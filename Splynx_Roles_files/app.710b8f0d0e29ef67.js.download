/*! For license information please see app.710b8f0d0e29ef67.js.LICENSE.txt */
(()=>{var __webpack_modules__={11757:(e,t,n)=>{"use strict";n.d(t,{A:()=>fe});var i=n(84781),o=n(41857),s=n(17629),a=n(94300),r=n(8974),l=n(15023);class c{constructor(e){let{id:t,date_created:n}=e;this.id=t,this.dateCreated=n,this.messages=[]}}var d=n(65760);class u{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.order=[],this.conversations=[],this.messages=[],this._statusesMap={},this._statusesMap=(0,r.deepCopyObj)(i),this.messages=this.constructor._format((0,r.deepCopyObj)(e)),this.conversations=this.constructor._format((0,r.deepCopyObj)(t)),this.order=this.constructor._format((0,r.deepCopyObj)(n)),this.messages=this.messages.map((e=>(e.ticket=new s.A(e.ticket),e.location=new a.A(e.location),e))),this.messages=this.messages.map((e=>(e.author instanceof d.A||(e.author=new d.A(e.author)),new l.A(e).withMappedStatus(this._statusesMap)))),this.conversations=this.conversations.map((e=>new c(e)))}static _format(e){return e instanceof Array?e??[]:"object"==typeof e?Object.values(e)??[]:e}process(){const e={};return this.order.forEach(((t,n)=>{e[t]=n})),this.messages.sort(((t,n)=>{const i=e[t.id];return e[n.id]-i})),this.conversations.forEach((t=>{const n=this.messages.filter((e=>e.conversationId===t.id));n.sort(((t,n)=>{const i=e[t.id];return e[n.id]-i})),t.messages=n.filter((e=>{let{id:t}=e;return this.order.includes(t)}))})),this.conversations.sort(((t,n)=>{const i=t.messages[0]??{},o=n.messages[0]??{},s=e[i.id];return e[o.id]-s})),this}get(){return this.conversations}}var p=n(32264),h=n(9133),f=n(95859);const m={data:()=>({centralMessage:null,currentPart:{...new p.A(new f.A,new h.A).get()}}),methods:{async loadPart(){const e=new o.A(this.senderType);return this.currentPart=await e.fetchPart(this.chatId,this.centralMessage),this.chatOpenedFromStart=this.currentPart.isFirst,this.chatOpenedFromEnd=this.currentPart.isLast,!0},async loadLastPart(){this.messagesBottomLoading=!0,this.centralMessage=null;const e=new o.A(this.senderType);this.currentPart=await e.fetchPart(this.chatId,null),this.$nextTick((()=>{this.scrollEnd(!0),this.messagesBottomLoading=!1}))},async loadEarlier(){this.messagesTopLoading=!0,this.centralMessage=this.currentPart.getEarlierCentral(),await this.loadEarlierPart(),this.$nextTick((()=>{this.scrollToMessage(this.centralMessage,!1,"top"),this.messagesTopLoading=!1}))},async loadLatest(){this.messagesBottomLoading=!0,this.centralMessage=this.currentPart.getLaterCentral(),await this.loadLaterPart(),this.$nextTick((()=>{this.scrollToMessage(this.centralMessage,!1,"bottom"),this.messagesBottomLoading=!1}))},async loadEarlierPart(){const e=new o.A(this.senderType),t=await e.fetchEarly(this.chatId,this.centralMessage);this.mergeParts(t,[...this.currentPart.order,...t.order])},async loadLaterPart(){const e=new o.A(this.senderType),t=await e.loadLaterPart(this.chatId,this.centralMessage);this.mergeParts(t,[...t.order,...this.currentPart.order])},mergeParts(e,t){this.currentPart={...e,messages:[...e.messages,...this.currentPart.messages],conversations:{...e.conversations,...this.currentPart.conversations},order:t}},scrollToMessageOrEnd(){this.$route.query.message_id||this.scrollToMessageOnOpen?this.scrollToMessage(this.$route.query.message_id||this.scrollToMessageOnOpen):this.scrollEnd(),this.initState=!1}},computed:{messageSearch(){return this.$route.query.message_id??this.scrollToMessageOnOpen??null},conversationToRender(){const e=new u(this.currentPart.messages,this.currentPart.conversations,this.currentPart.order,this.messagesStatuses);return e.process(),e.get()}},watch:{chatboxTitle(e){this.currentPart.messages.forEach((t=>{if("in"===t.type){if("string"==typeof t.author)return void(t.author=e);t.author.name=e}}))}}};n(43838),n(4949);var g=n(54059);const v={data(){return{chatData:{id:this.chatId,active:!1,canAdminWrite:!1,assigneeName:"",phone:"",profileName:"",title:"",senderType:"",cannedMessages:[]}}},mounted(){this.initSocketListener()},methods:{...(0,g.i0)("chats_listener",["addChatHandlers"]),initSocketListener(){this.addChatHandlers({callbacks:[this.onConversationClose],ids:{chat:this.chatId,messenger:this.messenger}}),this.addChatHandlers({callbacks:[this.onNewItem],ids:{chat:this.chatId,messenger:this.messenger}}),this.addChatHandlers({callbacks:[this.onAttachmentUpdate],ids:{chat:this.chatId,messenger:this.messenger}}),this.addChatHandlers({callbacks:[this.onAddActivitiesForLastMessage],ids:{chat:this.chatId,messenger:this.messenger}}),this.addChatHandlers({callbacks:[this.onReassign],ids:{chat:this.chatId,messenger:this.messenger}})},async onAttachmentUpdate(e){let{attachments:t,message_id:n}=e;const i=this.currentPart.messages.find((e=>e.id===n));i&&(i.attachments=t)},async onAddActivitiesForLastMessage(e){let{activities:t}=e;const n=this.currentPart.messages.find((e=>e.id===this.currentPart.order[0]));n&&(n.activities=t,this.lastMessageInFocus&&this.$nextTick((()=>{this.scrollEnd(!0)})))},async onNewItem(e){const{data:t,new_conversation:n,chat:i}=e,{messages:o,conversations:s}=t;if(o[0].type===l.A.TYPE_OUT&&!this.isLastPart)return await this.loadLastPart(),!1;const a=n,r=Object.values(s)[0]??{};if(i&&i.active&&await this.loadChatData(),!this.currentPart.conversations[r.id]){if(!a)return this.$showInformation(this.$t("messengers","Below is a new message"),4),!1;this.restoreConversation(r),i||i.active||await this.loadChatData()}this.receiveMessages(o)},async onConversationClose(e){let{conversation_id:t,activities:n}=e;if(this.chatbox)return this.$chatBoxShowList(),!1;await this.loadChatData();Object.values(this.currentPart.conversations).find((e=>e.id===t))?(this.lastMessage.activities=n,this.lastMessageInFocus&&this.$nextTick((()=>{this.scrollEnd(!0)}))):this.$showInformation(this.$t("messengers","Below is a new message"),4)},onReassign(e){let{assignee_name:t,can_admin_write:n}=e;this.chatData.canAdminWrite=n,this.chatData.assigneeName=t},async loadChatData(){const e=new o.A(this.senderType),{data:t,result:n,message:i}=await e.getChatData(this.chatId);if(!n)return this.$showError(i,4),this.$emit("chat-not-found"),!1;const{assigneeName:s,active:a,phone:r,profileName:l,title:c,id:d,checkAccessController:u,checkAccessAction:p,canAdminWrite:h,startConversation:f,senderType:m,cannedResponses:g}=t;return this.chatData.startConversationData=f,this.chatData.checkAccessController=u,this.chatData.checkAccessAction=p,this.chatData.id=d,this.chatData.active=a,this.chatData.canAdminWrite=h,this.chatData.assigneeName=s,this.chatData.phone=r,this.chatData.profileName=l,this.chatData.title=c,this.chatData.senderType=m,this.chatData.cannedMessages=g,this.$emit("chat-data",this.chatData),!0},restoreConversation(e){this.currentPart.conversations={...this.currentPart.conversations,[e.id]:e}},receiveMessages(e){if(!e.length)return!1;this.currentPart.messages.push(e[0]),this.currentPart.order.unshift(e[0].id)},async closeChat(e){this.processing=!0,await window.close_messenger_chat(e,this.senderType),this.processing=!1},async reAssignToMe(e){const t=new o.A(this.senderType);let{result:n,message:i}=await t.reAssignAdmin(e,window?.spl_config?.spl_user_id);!n&&i&&this.$showError(i,4),await this.loadChatData()},async sendMessage(e){let{content:t,files:n}=e;this.processing=!0;const i=new o.A(this.senderType);let{result:s,message:a}=await i.sendMessage(this.chatId,t,n);!s&&a&&this.$showError(a,4),this.processing=!1}},computed:{chatBoxHeadActionsForAnySender(){return[{title:this.$t("messengers","View chat"),name:"view-chat"}]},unknownSenderActions(){const e=[{title:this.$t("messengers","Create customer/lead"),name:"create-from-unknown",icon:"icon-ic_fluent_people_community_add_24_regular"},{title:this.$t("messengers","Link to customer/lead"),name:"link-sender",icon:"icon-ic_fluent_people_swap_24_regular"}];return this.chatData.active&&(e.push({title:this.$t("messengers","Re-assign chat"),name:"re-assign-chat",icon:"icon-ic_fluent_people_edit_20_regular"}),e.push({title:this.$t("messengers","Close chat"),name:"close-chat",icon:"icon-ic_fluent_dismiss_24_regular"})),this.chatbox&&e.unshift(...this.chatBoxHeadActionsForAnySender),this.selectedItems.length&&e.push(...this.getMassActions(!1)),e},existingSenderActions(){const e=[{title:this.$t("messengers","Close chat"),name:"close-chat"}];return this.chatData.active&&e.unshift({title:this.$t("messengers","Re-assign chat"),name:"re-assign-chat"}),this.chatbox&&e.unshift(...this.chatBoxHeadActionsForAnySender),this.selectedItems.length&&e.push(...this.getMassActions()),e},chatActions(){return this.unknownSender?this.unknownSenderActions:this.existingSenderActions},title(){return this.chatData.title??this.messenger}}};const b={props:{massActionSelectEnabled:{type:Boolean,default:!1}}},y={name:"ChatHeadExtended",mixins:[b],props:{title:String,assigned:String,customerId:[String,Number],showActions:Boolean,actions:Array},methods:{back(){this.$router.push({query:{id:this.customerId,messengers:!0}})}}};var w=n(71938);const _=(0,w.A)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex align-items-center pb-12 justify-content-between"},[n("div",{staticClass:"d-flex align-items-center"},[n("button",{staticClass:"conversation-action-btn btn btn-link btn-icon rounded-pill me-16",on:{click:e.back}},[n("i",{staticClass:"icon-ic_fluent_arrow_left_24_regular"})]),n("div",{staticClass:"d-flex flex-column"},[n("h5",[e._v(e._s(e.title))]),e.assigned?n("small",[n("span",{staticClass:"text-secondary"},[e._v(e._s(e.$t("messengers","Assigned to")))]),n("span",{staticClass:"text-dark"},[e._v(" "+e._s(e.assigned))])]):e._e()])]),e.showActions?n("div",{staticClass:"chat-head-actions"},[n("div",{staticClass:"btn-group dropdown"},[n("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(" "+e._s(e.$t("common","Actions"))+" ")]),n("ul",{staticClass:"dropdown-menu"},[n("li",{staticClass:"dropdown-item"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("set-mass-action-select-enabled",!e.massActionSelectEnabled)}}},[e._v(" "+e._s(e.massActionSelectEnabled?e.$t("messengers","Deselect messages"):e.$t("messengers","Select messages"))+" ")])]),e._l(e.actions,(function(t){return n("li",{key:t.name,staticClass:"dropdown-item"},[n("a",{attrs:{href:"javascript:void(0)","data-submit":"true","data-activities":"hide"},on:{click:function(n){return e.$emit(t.name)}}},[e._v(" "+e._s(t.title)+e._s(t.selectedCount)+" ")])])}))],2)])]):e._e()])}),[],!1,null,null,null).exports;const T={name:"ChatHeadMinimal",mixins:[b],props:{phone:{type:String,default:""},assigned:{type:String,default:""},showActions:Boolean,actions:Array}};const E=(0,w.A)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex justify-content-between align-items-end"},[n("div",{staticClass:"d-flex flex-column"},[n("h3",[e._v(e._s(e.phone))]),e.assigned?n("span",[n("span",{staticClass:"text-secondary"},[e._v(e._s(e.$t("messengers","Assigned to")))]),e._v(" "+e._s(e.assigned))]):e._e()]),n("div",{staticClass:"chat-head-actions"},[n("div",{staticClass:"btn-group dropdown"},[n("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(" "+e._s(e.$t("common","Actions"))+" ")]),n("ul",{staticClass:"dropdown-menu"},[n("li",{staticClass:"dropdown-item"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("set-mass-action-select-enabled",!e.massActionSelectEnabled)}}},[e._v(" "+e._s(e.massActionSelectEnabled?e.$t("messengers","Deselect messages"):e.$t("messengers","Select messages"))+" ")])]),e._l(e.actions,(function(t){return n("li",{key:t.name,staticClass:"dropdown-item"},[n("a",{attrs:{href:"javascript:void(0)","data-submit":"true","data-activities":"hide"},on:{click:function(n){return e.$emit(t.name)}}},[e._v(" "+e._s(t.title)+e._s(t.selectedCount)+" ")])])}))],2)])])])}),[],!1,null,null,null).exports;const S={name:"ChatHeadChatbox",mixins:[b],props:{messengerName:String,customerId:[Number,String],title:{type:String,default:""},phone:{type:String,default:""},assigned:{type:String,default:""},profileName:{type:String,default:""},showActions:Boolean,isLead:Boolean,actions:Array},methods:{openCustomer(){if(!this.customerId)return!1;this.isLead?switch_page(`/admin/crm/leads/view?id=${this.customerId}`):switch_page(`/admin/customers/view?id=${this.customerId}`)}},computed:{messengerFirstLetter(){return this.messengerName[0].toUpperCase()}}};const A=(0,w.A)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head-wrapper d-flex px-8 py-12 align-items-center justify-content-between"},[n("a",{staticClass:"chatbox-back me-4",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("back")}}},[n("i",{staticClass:"icon-ic_fluent_arrow_left_24_regular"})]),n("div",{staticClass:"chat-box-item-icon me-8"},[n("img",{attrs:{src:"/images/messengers/chat-box/"+e.messengerName+".svg",alt:e.messengerFirstLetter}})]),n("div",{staticClass:"d-flex flex-column justify-content-center flex-grow-1"},[n("a",{class:["chat-box-item-name",{disabled:!e.profileName}],attrs:{href:"javascript:void(0)"},on:{click:e.openCustomer}},[e._v(" "+e._s(e.profileName)+" "+e._s(e.profileName?"("+e.phone+")":e.phone)+" ")]),e.assigned?n("div",{staticClass:"chat-box-item-assignee mt-2"},[e._v(" "+e._s(e.$t("messengers","Assigned to"))+" "),n("span",[e._v(e._s(e.assigned))])]):e._e()]),e.showActions?n("div",{staticClass:"ms-4 me-4"},[n("a",{staticClass:"chat-box-action",attrs:{href:"javascript:void(0)",title:e.$t("messengers","Actions"),role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("i",{staticClass:"icon-ic_fluent_more_vertical_24_regular"})]),n("ul",{staticClass:"dropdown-menu"},[n("li",{staticClass:"dropdown-item"},[n("a",{attrs:{href:"javascript:void(0)","data-test-selector":"mass-action-link"},on:{click:function(t){return e.$emit("set-mass-action-select-enabled",!e.massActionSelectEnabled)}}},[e._v(" "+e._s(e.massActionSelectEnabled?e.$t("messengers","Deselect messages"):e.$t("messengers","Select messages"))+" ")])]),e._l(e.actions,(function(t){return n("li",{key:t.name,staticClass:"dropdown-item"},[n("a",{attrs:{href:"javascript:void(0)","data-submit":"true","data-activities":"hide"},on:{click:function(n){return e.$emit(t.name)}}},[e._v(" "+e._s(t.title)+e._s(t.selectedCount)+" ")])])}))],2)]):e._e(),n("a",{staticClass:"chat-box-action",attrs:{href:"javascript:void(0)",title:e.$t("messengers","Minimize")},on:{click:function(t){return e.$closeChatBox()}}},[n("i",{staticClass:"icon-ic_fluent_line_horizontal_1_20_regular"})])])}),[],!1,null,null,null).exports,C={name:"ChatHead",mixins:[b],props:{extended:{type:Boolean,default:!0},messengerName:{type:String,default:""},chatbox:{type:Boolean,default:!1},title:{type:String,default:""},phone:{type:String,default:""},assigned:{type:String,default:""},profileName:{type:String,default:""},isChatActive:{type:Boolean,default:!0},actions:{type:Array,default:()=>[]},customerId:[String,Number],isLead:Boolean},components:{ChatHeadMinimal:E,ChatHeadExtended:_,ChatHeadChatbox:A}};const k=(0,w.A)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.chatbox?n("chat-head-chatbox",{attrs:{assigned:e.assigned,title:e.title,actions:e.actions,"customer-id":e.customerId,phone:e.phone,"profile-name":e.profileName,"show-actions":e.isChatActive,"messenger-name":e.messengerName,"is-lead":e.isLead,"mass-action-select-enabled":e.massActionSelectEnabled},on:{"set-mass-action-select-enabled":function(t){return e.$emit("mass-action-select-enabled",t)},"mass-action-link-ticket":function(t){return e.$emit("mass-action-link-ticket")},"mass-action-create-ticket":function(t){return e.$emit("mass-action-create-ticket")},"create-from-unknown":function(t){return e.$emit("create-from-unknown")},"link-sender":function(t){return e.$emit("link-sender")},"close-chat":function(t){return e.$emit("close-chat",t)},"re-assign-chat":function(t){return e.$emit("re-assign-chat")},back:function(t){return e.$emit("back")},minimize:function(t){return e.$emit("minimize")},"view-chat":function(t){return e.$emit("view-chat")}}}):e.extended?n("chat-head-extended",{attrs:{assigned:e.assigned,title:e.title,actions:e.actions,"customer-id":e.customerId,"show-actions":e.isChatActive,"mass-action-select-enabled":e.massActionSelectEnabled},on:{"set-mass-action-select-enabled":function(t){return e.$emit("mass-action-select-enabled",t)},"mass-action-link-ticket":function(t){return e.$emit("mass-action-link-ticket")},"mass-action-create-ticket":function(t){return e.$emit("mass-action-create-ticket")},"close-chat":function(t){return e.$emit("close-chat",t)},"re-assign-chat":function(t){return e.$emit("re-assign-chat")}}}):n("chat-head-minimal",{attrs:{assigned:e.assigned,phone:e.phone,actions:e.actions,"customer-id":e.customerId,"show-actions":e.isChatActive,"mass-action-select-enabled":e.massActionSelectEnabled},on:{"set-mass-action-select-enabled":function(t){return e.$emit("mass-action-select-enabled",t)},"mass-action-create-ticket":function(t){return e.$emit("mass-action-create-ticket")},"create-from-unknown":function(t){return e.$emit("create-from-unknown")},"close-chat":function(t){return e.$emit("close-chat")},"re-assign-chat":function(t){return e.$emit("re-assign-chat")},"link-sender":function(t){return e.$emit("link-sender")}}})}),[],!1,null,null,null).exports;n(903),n(44249);var x=n(13817);const $={name:"ChatField",props:{loading:{type:Boolean,default:!1},chatbox:{type:Boolean,default:!1},active:{type:Boolean},canAdminWrite:{type:Boolean,default:!1},checkAccessAction:{type:String,default:""},checkAccessController:{type:String,default:""},setValueTrigger:{type:String,default:""}},data:()=>({isCannedMessageButtonActive:!1,text:""}),computed:{buttonSendClasses(){return["btn btn-primary ms-16",{"chat-send":this.chatbox}]},classes(){return{"position-relative":!0,"d-flex":!0,"justify-content-end":!this.active||!this.canAdminWrite}},rows(){return this.text.split("\n").length}},methods:{focus(e){e&&(this.text=`${this.text}${e}`);const t=this.$refs.input.$el;t.focus(),t.setSelectionRange(t.value.length,t.value.length)},onCannedMessageClick(){this.isCannedMessageButtonActive=!this.isCannedMessageButtonActive,this.isCannedMessageButtonActive?(this.focus(),this.text=`/${this.text}`):"/"===this.text.at(0)&&(this.text=this.text.slice(1))},onKeyup(e){e.preventDefault();const t=e.target.clientHeight+120;this.$emit("set-scroll-block-height",{height:t,isScroll:!0}),this.isCannedMessageButtonActive=this.text.startsWith("/");window.innerWidth>768&&"Enter"===e.key&&(e.shiftKey||this.processEnter()),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||!this.isCannedMessageButtonActive||this.$emit("arrow-select"),this.isCannedMessageButtonActive&&this.$emit("search-canned-messages",this.text.slice(1).trim())},processEnter(){this.send()},send(){if(!this.text.trim())return!1;this.$emit("send",{content:this.text,files:[]}),this.text="",this.isCannedMessageButtonActive=!1,this.$refs.input.$el.style.height="1em",this.$emit("set-scroll-block-height",{height:148,isScroll:!0})},sendMessageWithFiles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.map((e=>e.id));this.$emit("send",{content:t,files:n})},setContentFromOutside(e){this.text=e,this.isCannedMessageButtonActive=!1,this.$refs.input.$el.style.height=32*this.rows+"px",setTimeout((()=>{this.focus(),this.$refs.input.$el.dispatchEvent(new Event("input")),this.$emit("set-scroll-block-height",{height:this.$refs.input.$el.clientHeight+120,isScroll:!0})}),10)},openAttachmentDialog(){this.canAdminWrite&&window.showModal("messenger-app-attachment-file",{checkAccessAction:this.checkAccessAction,checkAccessController:this.checkAccessController,onSubmit:e=>{this.sendMessageWithFiles(e.files,e.message)}})},openReassignToMeDialog(){window.showModal("messenger-reassign-to-me",{text:this.$t("messengers","Are you sure you want to assign this chat to you?"),onSubmit:()=>{this.$emit("reassign-to-me")},onDismiss:()=>{this.$modals.close(this.name)}})}},components:{XComplexInput:x.D},watch:{isCannedMessageButtonActive(e){e?this.$emit("open-canned-messages-dropdown"):this.$emit("close-canned-messages-dropdown")},setValueTrigger(e){e&&this.setContentFromOutside(e)}}};const I=(0,w.A)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes},[e.active?[n("div",{directives:[{name:"show",rawName:"v-show",value:e.canAdminWrite,expression:"canAdminWrite"}],staticClass:"position-absolute chat-field-attach pe-4",on:{click:e.openAttachmentDialog}},[n("i",{staticClass:"icon-ic_fluent_attach_24_regular"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.canAdminWrite,expression:"canAdminWrite"}],class:["position-absolute","chat-field-attach",{active:e.isCannedMessageButtonActive},"ps-4"],style:{left:"32px"},on:{click:e.onCannedMessageClick}},[n("i",{staticClass:"icon-ic_fluent_comment_checkmark_24_regular"})]),n("x-complex-input",{directives:[{name:"show",rawName:"v-show",value:e.canAdminWrite,expression:"canAdminWrite"}],ref:"input",attrs:{type:"textarea",params:{options:{rows:e.rows,style:"width: 100%;",placeholder:e.$t("messengers","Write your message")}},"native-event-handlers":{keyup:e.onKeyup}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e.canAdminWrite?n("button",{class:e.buttonSendClasses,attrs:{disabled:e.loading,type:"button"},on:{click:e.send}},[e._v(" "+e._s(e.$t("messengers","Send"))+" ")]):n("button",{staticClass:"btn btn-primary ms-16 nowrap",attrs:{disabled:e.loading,type:"button"},on:{click:e.openReassignToMeDialog}},[e._v(" "+e._s(e.$t("messengers","Assign to me"))+" ")])]:[n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.loading,type:"button"},on:{click:function(t){return e.$emit("start-conversation")}}},[e._v(" "+e._s(e.$t("messengers","Start conversation"))+" ")])]],2)}),[],!1,null,null,null).exports;n(39028);class O{constructor(){let{name:e,title:t,params:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=e??null,this.title=t??null,this.params=n??{}}}var L=n(41129),R=n(54625);const N={methods:{onActionPerform(e){let{name:t,data:n}=e;this[window.toCamelCase(`action-${t}`)]?.call(this,n)},actionCreateTicket(e){let{messageId:t,customerId:n,messenger:i,chatId:o}=e;window.showModal("messenger-create-ticket-from-message",{customerId:n,messenger:i,chatId:o,isLead:"lead"===this.senderType,unknownSender:this.unknownSender,message:new l.A({content:this.message}),onSubmit:async e=>{let{ticketId:n}=e;const i=new R.A(this.senderType),{result:o,message:s}=await i.linkMessageToTicket(t,n);if(!o)return this.$showError(s,4),!1;this.$showSuccess(s,4)}})},async actionLinkTicket(e){let{ticket:t}=e;window.showModal("messenger-link-ticket-to-message",{linked:t,customerId:this.chatCustomerId,messageId:this.id,senderType:this.senderType,chatId:this.chatId,unlinkCallback:e=>this.actionUnlinkTicket(e)})},async actionUnlinkTicket(e){let{messageId:t,ticketId:n}=e;window.vue_confirm_dialog(this.$t("config","Are you sure you want unlink ticket #{ticketId}?",{ticketId:n}),(async()=>{const e=new R.A(this.senderType),{result:i,message:o}=await e.unlinkMessageFromTicket(t,n);if(!i)return this.$showError(o,4),!1;this.$showSuccess(o,4)}),(()=>!1))}}};const D={name:"ChatMessageActions",props:{actions:{type:Array,default:()=>[]}},methods:{performAction(e,t){this.$emit("perform",{name:e,data:t})}}};const M=(0,w.A)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown chat-message-actions"},[e._m(0),n("ul",{staticClass:"dropdown-menu"},e._l(e.actions,(function(t){return n("li",{key:t.name,staticClass:"dropdown-item"},[n("span",{staticClass:"btn-link",on:{click:function(n){return e.performAction(t.name,t.params)}}},[e._v(e._s(t.title))])])})),0)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon-wrap cursor-pointer text-primary",attrs:{"data-bs-toggle":"dropdown","aria-expanded":"false"}},[t("i",{staticClass:"icon-ic_fluent_chevron_down_24_regular"})])}],!1,null,null,null).exports;class P{static get(e){return Object.keys(P).map((e=>P[e])).find((t=>t.key===e))}}P.colors={DEFAULT:"#6C757D",FAILED:"#EB5757",READ:"#357bf2"},P.icons={QUEUE:"icon-ic_fluent_clock_24_regular",SENT:"icon-ic_fluent_checkmark_24_regular",DELIVERED:"icon-ic_fluent_checkmark_24_regular",READ:"icon-ic_fluent_checkmark_24_regular",FAILED:"icon-ic_fluent_error_circle_24_regular"},P.QUEUE={key:"queue",icon:P.icons.QUEUE,color:P.colors.DEFAULT,double:!1},P.SENT={key:"sent",icon:P.icons.SENT,color:P.colors.DEFAULT,double:!1},P.DELIVERED={key:"delivered",icon:P.icons.DELIVERED,color:P.colors.DEFAULT,double:!0},P.READ={key:"read",icon:P.icons.READ,color:P.colors.READ,double:!0},P.FAILED={key:"failed",icon:P.icons.FAILED,color:P.colors.FAILED,double:!1};const F={name:"MessageStatusIcon",props:{status:{type:[String],default:"queue"},out:Boolean},computed:{style(){return{opacity:String(Number(this.out))}},color(){return P.get(this.status).color},double(){return P.get(this.status).double},icon(){const e=P.get(this.status);return this.double?[e.icon,e.icon]:e.icon},doubleContainerClass(){return["icons-container",{double:this.double}]}}};const B=(0,w.A)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-status position-relative w-100 d-flex align-items-center justify-content-end",style:e.style},[n("div",{class:e.doubleContainerClass},[e.double?[n("i",{class:e.icon[0],style:{color:e.color}}),n("i",{class:e.icon[1],style:{color:e.color}})]:[n("i",{class:e.icon,style:{color:e.color}})]],2)])}),[],!1,null,null,null).exports;const H={name:"MessageLinkedTicket",props:{id:[String,Number],url:String,subject:String,messageType:String}};const j=(0,w.A)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex linked-ticket-url"},[n("router-link",{staticClass:"btn-icon-text linked-ticket-link",attrs:{to:e.url}},[n("i",{staticClass:"icon-ic_fluent_ticket_diagonal_16_regular"}),n("span",[e._v("#"+e._s(e.id)+" "+e._s(e.subject))])])],1)}),[],!1,null,null,null).exports;var U=n(59756),W=n(50714);const K={name:"ChatAttachmentImage",mixins:[U.A],data:()=>({width:0,loading:!0}),mounted(){this.width=this.$refs.attachedImage.parentNode.clientWidth,this.$refs.attachedImage.onload=()=>{this.loading=!1}},computed:{calculatedHeight(){const[e,t]=this.ratio.split("x").map(Number);return`${t/e*this.width}px`}},components:{XBootstrapSpinner:W.U}};const G=(0,w.A)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"attachments-grid",attrs:{id:e.elementId}},[n("div",{staticClass:"image-attachment-preload",style:{height:e.calculatedHeight}},[n("div",{staticClass:"position-absolute"},[e.loading?n("x-bootstrap-spinner",{attrs:{size:"sm"}}):e._e()],1),n("img",{ref:"attachedImage",staticClass:"attachment-image pws-open",attrs:{src:e.link,alt:"Attachment Image","data-is-pws":e.isPws,"data-pws-download-url":e.downloadUrl,"data-pws-ratio":e.ratio,"data-pws-title":e.title,"data-pws-type":e.type,"data-pws-url":e.url}})])])}),[],!1,null,null,null).exports;var V=n(19260),z=n(46884);const q={name:"ChatAttachmentAudio",mixins:[U.A],props:{audioAlternativeLink:String,audioAlternativeFormat:String},data:()=>({canPlay:!0,alternative:!1}),mounted(){document.createElement("audio").canPlayType(this.audioFormat)||(this.alternative=!0),this.$nextTick((()=>{this.alternative?this.$refs.sourceAlt.addEventListener("error",(()=>{this.canPlay=!1})):this.$refs.source.addEventListener("error",(()=>{this.canPlay=!1}))})),this.$refs.audio.addEventListener("canplay",(()=>{this.canPlay=!0}))}};const Y=(0,w.A)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.canPlay?n("audio",{ref:"audio",attrs:{controls:""}},[e.alternative?n("source",{ref:"sourceAlt",attrs:{src:e.audioAlternativeLink,type:e.audioAlternativeFormat}}):n("source",{ref:"source",attrs:{src:e.link,type:e.audioFormat}})]):n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.downloadFile(e.link)}}},[e._v(" "+e._s(e.name)+" ("+e._s(e.size)+") ")])}),[],!1,null,null,null).exports,X={name:"ChatMessage",mixins:[N],props:{message:{type:String,default:""},type:String,id:[Number,String],messenger:[Number,String],chatId:[Number,String],status:{type:[String],default:"queue"},phone:{type:String,default:""},date:{type:String,default:""},author:{type:d.A,default:()=>new d.A},location:{type:a.A,default:()=>new a.A},attachments:{type:L.A,default:()=>new L.A},chatCustomerId:[String,Number],senderType:String,ticket:{type:s.A,default:()=>new s.A},unknownSender:Boolean},data:()=>({audioAttachments:[],documentAttachments:[]}),mounted(){this.makeAttachments()},methods:{makeAttachments(){this.audioAttachments=this.attachments.getAudio(),this.documentAttachments=this.attachments.getDocuments()},wrapUrlsWithAnchorTags:e=>e.replace(/(\bhttps?:\/\/[^\s/$.?#].[^\s]*)/gi,'<a href="$1" target="_blank">$1</a>')},computed:{authorAndPhone(){const{name:e,isDeleted:t}=this.author,{phone:n}=this;return e?n?`${e} (${n}) ${t?`(${this.$t("messengers","Deleted")})`:""}`:e:n??this.phone??""},messageActions(){let e=[];const t={};return t.params={messageId:this.id,customerId:this.chatCustomerId,ticketId:this.ticket.id,messenger:this.messenger,chatId:this.chatId,ticket:this.ticket},this.isTicketLinkedToMessage||e.push(new O({...t,title:this.$t("messengers","Create ticket"),name:"create-ticket"})),this.chatCustomerId&&e.push(new O({...t,title:this.$t("messengers","Link ticket"),name:"link-ticket"})),this.isTicketLinkedToMessage&&e.push(new O({...t,title:this.$t("messengers","Unlink ticket"),name:"unlink-ticket"})),e},isTicketLinkedToMessage(){return s.A.isValidTicket(this.ticket)},formattedMessage(){const e=this.message?.replace(/\n/g,"<br />");return e?this.wrapUrlsWithAnchorTags(e):""},classes(){return{"position-relative":!0,message:!0,"message-in":this.isIn,"message-out":this.isOut}},massActionStyle(){const e="-24px",t={top:"calc(50% - 6.5px)"};return this.isOut?t.left=e:t.right=e,t},isIn(){return this.type===l.A.TYPE_IN},isOut(){return this.type===l.A.TYPE_OUT}},watch:{attachments:{handler(){this.makeAttachments()},deep:!0}},components:{MessageStatusIcon:B,ChatMessageActions:M,MessageLinkedTicket:j,ChatAttachmentIframe:V.A,ChatAttachmentImage:G,ChatAttachmentDocument:z.A,ChatAttachmentAudio:Y}};const Q=(0,w.A)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes,attrs:{id:"message_"+e.id}},[n("div",{staticClass:"d-flex flex-column message-content-container"},[n("div",{staticClass:"message-head"},[n("div",{staticClass:"message-head-info"},[n("div",{staticClass:"author-and-phone"},[e._v(" "+e._s(e.authorAndPhone)+" ")]),n("div",{staticClass:"date-and-time"},[e._v(" "+e._s(e.date)+" ")])]),n("div",{staticClass:"d-flex align-self-start"},[n("chat-message-actions",{attrs:{actions:e.messageActions},on:{perform:e.onActionPerform}})],1)]),e.attachments.list.length?n("div",{ref:"attachmentElement",staticClass:"message-content"},[e._l(e.attachments.getImages(),(function(e){return n("chat-attachment-image",{key:e.id+"_image",attrs:{id:e.id,type:e.type,"is-pws":e.isPws,"download-url":e.downloadUrl,ratio:e.ratio,title:e.title,url:e.url,link:e.link}})})),e._l(e.attachments.getIframes(),(function(e){return n("chat-attachment-iframe",{key:e.id+"_iframe",attrs:{id:e.id,type:e.type,"is-pws":e.isPws,"download-url":e.downloadUrl,ratio:e.ratio,title:e.title,url:e.url,link:e.link}})})),e._l(e.documentAttachments,(function(e){return n("chat-attachment-document",{key:e.id+"_document",attrs:{id:e.id,type:e.type,"is-pws":e.isPws,"download-url":e.downloadUrl,ratio:e.ratio,url:e.url,link:e.link,size:e.size,name:e.name}})})),e._l(e.audioAttachments,(function(e){return n("chat-attachment-audio",{key:e.id+"_audio",attrs:{id:e.id,type:e.type,"is-pws":e.isPws,"download-url":e.downloadUrl,ratio:e.ratio,url:e.url,link:e.link,size:e.size,name:e.name,"audio-format":e.audioFormat,"audio-alternative-link":e.audioAlternativeLink,"audio-alternative-format":e.audioAlternativeFormat}})}))],2):e._e(),n("div",{staticClass:"message-content",domProps:{innerHTML:e._s(e.formattedMessage)}}),e._t("message-location-element",null,{location:e.location}),e.ticket.id?n("message-linked-ticket",{attrs:{id:e.ticket.id,url:e.ticket.url,subject:e.ticket.subject}}):e._e()],2),n("message-status-icon",{attrs:{status:e.status,out:e.isOut}}),n("div",{staticClass:"position-absolute",style:e.massActionStyle},[e._t("mass-check-element")],2)],1)}),[],!1,null,null,null).exports;const Z={name:"ChatMessageActivities",props:{activities:Array}};const J=(0,w.A)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-message-activities mt-8 mb-8"},e._l(e.activities,(function(t,i){return n("div",{key:i+"activity"},[n("div",{domProps:{innerHTML:e._s(t.content)}})])})),0)}),[],!1,null,null,null).exports;const ee={name:"ChatDivider",props:{date:{type:String,default:""}}};const te=(0,w.A)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-divider"},[e.date?n("div",{staticClass:"divider-date"},[e._v(" "+e._s(e.date)+" ")]):e._e()])}),[],!1,null,null,null).exports,ne={name:"ChatConversation",props:{id:[String,Number],messages:Array,chatId:[String,Number],chatCustomerId:[String,Number],massSelectionActive:{type:Boolean,default:!1},unknownSender:Boolean,massSelectedIds:Array,messenger:[String,Number],dateCreated:String,senderType:String},methods:{empty:r.empty,selectCheckboxHandler(e,t){e?this.$emit("mass-message-select",t):this.$emit("mass-message-deselect",t)}},computed:{selectedMessages(){return this.massSelectedIds.reduce(((e,t)=>(e[t]=!0,e)),{})},containsMessages(){return this.messages.length}},components:{ChatDivider:te,ChatMessageActivities:J,ChatMessage:Q}};const ie=(0,w.A)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.containsMessages,expression:"containsMessages"}],staticClass:"conversation-block",attrs:{id:"messenger_conversation_block_"+e.id}},[n("chat-divider",{attrs:{date:e.dateCreated}}),e._l(e.messages,(function(t,i){return[n("chat-message",{key:String(e.id)+i,attrs:{id:t.id,type:t.type,message:t.content,messenger:e.messenger,"chat-id":e.chatId,"chat-customer-id":e.chatCustomerId,date:t.createdAt,author:t.author,phone:t.phone,status:t.status,ticket:t.ticket,location:t.location,attachments:t.attachments,"sender-type":e.senderType,"unknown-sender":e.unknownSender},scopedSlots:e._u([{key:"mass-check-element",fn:function(){return[n("transition",{attrs:{name:"fade"}},[e.massSelectionActive?n("div",[n("input",{attrs:{type:"checkbox"},domProps:{checked:!!e.selectedMessages[t.id]},on:{change:function(n){return e.selectCheckboxHandler(n.target.checked,t.id)}}})]):e._e()])]},proxy:!0},{key:"message-location-element",fn:function(t){var i=t.location;return[i.lat&&i.lng?n("div",{staticClass:"message-content pb-0"},[n("div",{staticClass:"d-flex align-items-center flex-wrap"},[n("span",{staticClass:"me-4"},[e._v(e._s(e.$t("messengers","Location: "))+" ")]),n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("show-message-location",i)}}},[e._v(e._s(i.address?i.address:i.lat+", "+i.lng))])])]):e._e()]}}],null,!0)}),n("chat-message-activities",{key:String(t.id)+i,attrs:{activities:t.activities}})]}))],2)}),[],!1,null,null,null).exports;var oe=n(66167);const se={data:()=>({initState:!0,messagesTopLoading:!1,messagesBottomLoading:!1,prevScrollPos:0,scrollLoadPartThrottler:null,autoScrollThrottler:null,chatOpenedFromStart:!1,chatOpenedFromEnd:!1,displayScrollDownButton:!1}),mounted(){this.autoScrollThrottler=new oe.A,this.scrollLoadPartThrottler=new oe.A,this.$watch((()=>this.autoScrollThrottler.currentPromise),(e=>{null===e&&this.scrollHandler(this.preLastMessageInFocus)})),this.$watch((()=>this.scrollLoadPartThrottler.currentPromise),(e=>{if(null===e){let e=this.scrollLoadPartThrottler.resolveData.filter((e=>!!e));this[e[e.length-1].action]()}}))},beforeDestroy(){this.$refs.scroll?.removeEventListener("scroll",this.onScroll)},computed:{lastMessageInFocus(){return this.visibleInContainer(this.$refs.scroll,this.lastMessageElement)},preLastMessageInFocus(){return this.visibleInContainer(this.$refs.scroll,this.preLastMessageElement)},preLastMessageElement(){return document.querySelector(`#${this.uid}.messenger-chat-block #message_${this.preLastMessage.id}`)},lastMessageElement(){return document.querySelector(`#${this.uid}.messenger-chat-block #message_${this.lastMessage.id}`)},lastMessage(){return this.currentPart.messages.find((e=>e.id===this.currentPart.order[0]))},preLastMessage(){return this.currentPart.messages.find((e=>e.id===this.currentPart.order[1]))},isFirstPart(){return this.currentPart.isFirst||this.chatOpenedFromStart},isLastPart(){return this.currentPart.isLast||this.chatOpenedFromEnd}},methods:{callbackDown(e,t,n){n>=e&&this.scrollLoadPartThrottler.addToHandlers((()=>new Promise((e=>{setTimeout((()=>{e({action:"loadDownArea"})}),50)}))))},callbackUp(e,t){t<=0&&this.scrollLoadPartThrottler.addToHandlers((()=>new Promise((e=>{setTimeout((()=>{e({action:"loadUpArea"})}),50)}))))},loadUpArea(){this.isFirstPart||this.loadEarlier()},loadDownArea(){this.isLastPart||this.loadLatest()},async scrollDown(){this.isLastPart?this.scrollEnd(!0):(await this.loadLastPart(),this.chatOpenedFromStart=!1,this.chatOpenedFromEnd=!0)},onScroll(){const e=this.$refs.scroll.scrollTop,t=document.querySelectorAll(`#${this.uid}.messenger-chat-block .message`),{lastFiveHeight:n,firstFiveHeight:i}=this.calculateElementHeights(t);this.prevScrollPos>e?this.callbackUp(i,this.$refs.scroll.scrollTop):this.prevScrollPos<e&&this.callbackDown(this.$refs.scroll?.scrollHeight,n,this.$refs.scroll.scrollTop+this.$refs.scroll.clientHeight),this.prevScrollPos=this.$refs.scroll?.scrollTop},calculateElementHeights(e){let t=0,n=0,i=0;if(e.length>=5){for(let t=0;t<5;t++)n+=e[t].offsetHeight;for(let t=e.length-5;t<e.length;t++)i+=e[t].offsetHeight;for(let n=0;n<e.length;n++)t+=e[n].offsetHeight}else n=t,i=t;return{totalHeight:t,firstFiveHeight:n,lastFiveHeight:i}},initScrollListeners(){this.prevScrollPos=this.$refs.scroll?.scrollTop,this.$refs.scroll?.addEventListener("scroll",this.onScroll)},messagesChanged(){if(this.initState||this.messagesTopLoading||this.messagesBottomLoading)return!1;this.autoScrollThrottler.addToHandlers((()=>new Promise((e=>{setTimeout((()=>{e({})}),50)}))))},visibleInContainer(e,t){if(!e||!t)return!1;const n=e.scrollTop+e.clientHeight,i=t.offsetTop+t.clientHeight;return t.offsetTop>=e.scrollTop&&i<=n},scrollToMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center";const i=document.querySelector(`#${this.uid} #message_${e}`);if(!i)return!1;this.scrollToChildren(this.$refs.scroll,i,n,t)},scrollEnd(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.$refs.scroll)return!1;const{scrollHeight:t}=this.$refs.scroll,n={top:t};e&&(n.behavior="smooth"),this.$refs.scroll.scrollTo(n)},scrollHandler(e){if(this.messagesTopLoading||this.messagesBottomLoading)return!1;e||this.currentPart.messages[this.currentPart.messages.length-1].type===l.A.TYPE_OUT?this.scrollEnd(!0):this.$showInformation(this.$t("messengers","Below is a new message"),4)},showScrollButton(){this.$refs.scroll?.addEventListener("scroll",(()=>{const{scrollTop:e,clientHeight:t,scrollHeight:n}=this.$refs.scroll;this.displayScrollDownButton=e+t<n-t}))},scrollToChildren(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=e.clientHeight;let s;s="top"===n?t.offsetTop:"bottom"===n?t.offsetTop-o+t.clientHeight:t.offsetTop-o/2+t.clientHeight/2;const a={top:s};i&&(a.behavior="smooth"),e.scrollTo(a),setTimeout((()=>{e.scrollTo(a)}),100)}},watch:{"currentPart.messages":{deep:!1,handler:"messagesChanged"}}},ae={data:()=>({messagesStatuses:{}}),created(){this.initStatusSocketListeners()},methods:{...(0,g.i0)("chats_listener",["addChatHandlers"]),initStatusSocketListeners(){this.addChatHandlers({callbacks:[this.statusUpdate],ids:{chat:this.chatId,messenger:this.messenger}})},statusUpdate(e){let{new_status:t,message_id:n}=e;this.messagesStatuses={...this.messagesStatuses,[n]:t}}}};n(85124),n(69740),n(37628),n(21215),n(36538),n(69565);const re={created(){this.initMessengerNotificationInterceptor()},beforeDestroy(){this.removeMessengerNotificationInterceptor()},methods:{removeMessengerNotificationInterceptor(){this.$disableNotificationInterceptor(l.A.NOTIFICATION_TYPE)},initMessengerNotificationInterceptor(){this.$interceptNotification(l.A.NOTIFICATION_TYPE,(e=>this.handler(e,this.chatId)))},handler(e,t){let n,{action_button:i}=e;if(!i||!i.redirect_url)return!0;const{redirect_url:o}=i,{searchParams:s}=new URL(`${window.location.protocol}//${window.location.hostname}${o}`);return s&&(n=s.get("chat_id")),String(t)!==String(n)}}},le={mounted(){this.initTicketSocketListener()},methods:{...(0,g.i0)("chats_listener",["addChatHandlers"]),initTicketSocketListener(){this.addChatHandlers({callbacks:[this.onTicketLinked],ids:{chat:this.chatId,messenger:this.messenger}}),this.addChatHandlers({callbacks:[this.onTicketUnlinked],ids:{chat:this.chatId,messenger:this.messenger}})},onTicketLinked(e){let{message_id:t,ticket:n}=e;const i=this.currentPart.messages.find((e=>e.id===t));i&&(i.ticket=n)},onTicketUnlinked(e){let{message_id:t}=e;const n=this.currentPart.messages.find((e=>e.id===t));n&&(n.ticket.id=null)}}},ce={data:()=>({massSelectionActive:!1,selectedItems:[]}),methods:{async massCreateTicketAndLinkToMessages(){await this.tryAddOrLinkTicketToMessages(this.openCreatingDialog)},async massLinkMessagesToTicket(){await this.tryAddOrLinkTicketToMessages(this.openLinkingDialog)},async tryAddOrLinkTicketToMessages(e){const t=[...this.selectedItems];this.currentPart.messages.filter((e=>e.ticket.id&&this.selectedItems.includes(e.id))).length?this.afterUnlinking(t,(async()=>{await e(t)})):await e(t),this.setMassActionSelectEnabled(!1)},mergeMessageContents(e){let t=[];for(let n of e){const i=this.currentPart.messages.find((e=>{let{id:t}=e;return t===n})),o=i.author?.name;1!==e.length?t.push(`${o}: \n${i.content??""}`):t.push(i.content??"")}return t.join("\n\n")},async linkTicketToMessages(e,t){const n=new R.A(this.senderType),{result:i,message:o}=await n.linkMessageToTicket(e,t);if(!i)return this.$showError(o,4),!1;this.$showSuccess(o,4)},openLinkingDialog(e){showModal("messenger-link-ticket-to-message",{linked:{},customerId:this.customerId,messageId:e,senderType:this.senderType,chatId:this.chatId})},openCreatingDialog(e){showModal("messenger-create-ticket-from-message",{customerId:this.customerId,messenger:this.messenger,chatId:this.chatId,isLead:"lead"===this.senderType,unknownSender:this.unknownSender,message:new l.A({content:this.mergeMessageContents(e)}),onSubmit:async t=>{let{ticketId:n}=t;await this.linkTicketToMessages(e,n)}})},afterUnlinking(e,t){showModal("messenger-unlink-ticket-from-multiple-messages",{messages:this.currentPart.messages,selected:e,unlinkCallback:async e=>this.actionUnlinkTickets(e),onSubmit:t})},async actionUnlinkTickets(e){let{messageId:t,ticketId:n}=e;const i=new R.A(this.senderType),{result:o,message:s}=await i.unlinkMessageFromTicket(t,n);if(!o)return this.$showError(s,4),!1;this.$showSuccess(s,4)},setMassActionSelectEnabled(e){e||this.massDeselectAll(),this.massSelectionActive=e},massDeselectAll(){this.selectedItems=[]},massSelectAll(e){this.selectedItems=[];let t=[];e instanceof Array&&(t=e.map((e=>{let{id:t}=e;return t}))),this.selectedItems.push(...t)},massAddSelectedElement(e){this.selectedItems.push(e)},massRemoveSelectedElement(e){this.selectedItems=this.selectedItems.filter((t=>t!==e))},getMassActions(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.$t("messengers",": {count} selected messages",{count:this.selectedItems.length}),n=[{selectedCount:t,title:this.$t("messengers","Create ticket"),name:"mass-action-create-ticket"}];return e&&n.unshift({selectedCount:t,title:this.$t("messengers","Link ticket"),name:"mass-action-link-ticket"}),n}}},de={data:()=>({setFieldContentTrigger:"",showCannedMessagesDropdown:!1,cannedMessagesSearchQuery:""}),methods:{async onCannedMessageSearch(e){this.cannedMessagesSearchQuery=e},onCannedMessageSelect(e){this.setFieldContentTrigger=e,this.$nextTick((()=>{this.setFieldContentTrigger=""}))},focusChatField(e){this.$refs.chatField.focus(e)},onFieldArrow(){this.$refs.cannedMessages.focus()}}};const ue={name:"CannedMessages",props:{items:{type:Array,default:()=>[]},searchQuery:String},data:()=>({elements:[],activeElement:0}),mounted(){this.elements=this.$el.querySelectorAll(".canned-message")},methods:{focus(){this.activeElement=0,this.elements[this.activeElement].focus()},onKeyUp(e){"Enter"===e.key&&(e.preventDefault(),this.$emit("select",this.filteredItems[this.activeElement].code)),this.activeElement>this.filteredItems.length-1&&(this.activeElement=0,this.$emit("focus-field",""))},onKeyDown(e){if("ArrowDown"===e.key){if(e.preventDefault(),this.activeElement++,this.activeElement>this.filteredItems.length-1)return!1}else if("ArrowUp"===e.key)e.preventDefault(),this.activeElement--,this.activeElement<0&&(this.activeElement=this.filteredItems.length-1);else if("Enter"!==e.key)return e.preventDefault(),this.$emit("focus-field",1===e.key.length?e.key:""),!1;if(!this.elements[this.activeElement])return this.activeElement=0,!1;this.elements[this.activeElement].focus()}},computed:{filteredItems(){if(!this.searchQuery)return this.items;const e=this.searchQuery.toLowerCase();return this.items.filter((t=>t.title.toLowerCase().includes(e)))}},watch:{filteredItems(){this.elements=this.$el.querySelectorAll(".canned-message")}}};const pe=(0,w.A)(ue,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"canned-messages",on:{keydown:e.onKeyDown,keyup:e.onKeyUp}},[e._l(e.filteredItems,(function(t,i){return n("div",{key:i,staticClass:"canned-message",attrs:{tabindex:"0"},on:{click:function(n){return e.$emit("select",t.code)}}},[n("h5",[e._v(e._s(t.title))]),n("p",[e._v(e._s(t.code))])])})),e.filteredItems.length?e._e():n("div",{staticClass:"canned-message empty"},[n("h5",[e._v(e._s(e.$t("messengers","No canned response found")))])])],2)}),[],!1,null,null,null).exports,he={name:"ChatView",mixins:[m,v,se,ae,re,le,ce,de],props:{chatbox:{type:Boolean,default:!1},senderType:{type:String,default:"customer"},unknownSender:{type:Boolean,default:!1},viewHeight:{type:[String,Number],default:null},scrollToMessageOnOpen:{type:[Boolean,Number,String],default:!1},messenger:[String,Number],messengerName:{type:String,default:""},chatId:[String,Number],customerId:[String,Number],chatboxTitle:String},data:()=>({scrollBlockHeightBias:148,processing:!1,loading:!0}),created(){this.centralMessage=this.messageSearch,Promise.all([this.loadPart(),this.loadChatData()]).then((()=>{this.loading=!1,this.messagesBottomLoading=!1,this.$nextTick((()=>{this.showScrollButton(),this.scrollToMessageOrEnd(),this.initScrollListeners()}))}))},methods:{onScrollBlockHeightChange(e){let{height:t,isScroll:n}=e;this.scrollBlockHeightBias=t,this.$nextTick((()=>{n&&this.scrollEnd()}))},viewChat(){const e="/admin/crm/leads/view"===this.$route.path||"/admin/customers/view"===this.$route.path;if(!this.customerId)return window.open_messenger_chat(this.chatData.id),this.$closeChatBox(),!1;let t="";t="lead"===this.chatData.senderType?"/admin/crm/leads/view":"/admin/customers/view",switch_page(`${(0,r.withGet)(t,{id:this.customerId,chat_id:this.chatData.id,messenger:this.messenger,messengers:""})}#communication`).then((()=>{e&&this.$root.REFRESH_ROUTE(),this.$closeChatBox()}))},startConversation(){this.chatbox?this.$emit("start-conversation",{customerId:this.customerId,phone:this.chatData.phone,messengerId:this.messenger,messengerTitle:null}):window.restore_messenger_chat(this.customerId,this.chatData.startConversationData,this.chatData.phone,this.messenger)},async connectChat(){const{chatId:e}=this;window.showModal("messenger-connect-chat",{chatId:e,onSubmit:()=>{this.loadChatData(),window.reloadLastDataTable()}})},async reAssignChatModal(){const{chatId:e}=this;window.showModal("messenger-app-re-assign-chat",{chatId:e,type:this.senderType,onSubmit:()=>{this.loadChatData()}})},createFromUnknown(){const{phone:e,profileName:t}=this.chatData;showModal("messenger-create-from-unknown",{fullName:t,phoneNumber:e})},showMessageLocation(e){showModal("show-messenger-message-location",e)}},computed:{uid(){return`chat_${this._uid}`},scrollBlockStyle(){return this.chatbox?{height:this.viewHeight,maxHeight:`calc(100% - ${this.scrollBlockHeightBias}px)`}:{}},topLoadingClasses(){return{"d-flex justify-content-center align-items-center":!0,"p-8":this.messagesTopLoading||!this.chatbox}},wrapperClasses(){return{"messenger-chat-block":!0,"chatbox-chat-view":this.chatbox}},elementId(){return this.chatbox||this.unknownSender?"":"communication_messengers_tab"},elementClass(){return this.chatbox?"":this.unknownSender?"h-100":"main-tab-holder h-100"}},components:{CannedMessages:pe,XBootstrapSpinner:W.U,XPreloaderBlock:i.default,ChatHead:k,ChatField:I,ChatConversation:ie}};const fe=(0,w.A)(he,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-preloader-block",{attrs:{loading:e.loading}},[n("div",{class:e.elementClass,attrs:{id:e.elementId}},[n("div",{class:e.wrapperClasses,attrs:{id:e.uid}},[n("chat-head",{attrs:{chatbox:e.chatbox,extended:!e.unknownSender,assigned:e.chatData.assigneeName,title:e.chatData.title,phone:e.chatData.phone,"is-chat-active":e.chatData.active,actions:e.chatActions,"customer-id":e.customerId,"is-lead":"lead"===e.chatData.senderType,"profile-name":e.chatboxTitle,"messenger-name":e.messengerName,"mass-action-select-enabled":e.massSelectionActive},on:{"view-chat":e.viewChat,"create-from-unknown":e.createFromUnknown,"close-chat":function(t){return e.closeChat(e.chatId)},"re-assign-chat":e.reAssignChatModal,"link-sender":e.connectChat,"mass-action-link-ticket":e.massLinkMessagesToTicket,"mass-action-create-ticket":e.massCreateTicketAndLinkToMessages,"mass-action-select-enabled":e.setMassActionSelectEnabled,back:function(t){return e.$emit("back")}}}),n("div",{staticClass:"messages-view-block"},[n("div",{class:e.topLoadingClasses},[n("transition",{attrs:{name:"fade"}},[e.messagesTopLoading?n("x-bootstrap-spinner",{attrs:{size:"sm"}}):e._e()],1)],1),n("div",{ref:"scroll",staticClass:"messages-scroll-block splynx-photo-swiper",style:e.scrollBlockStyle},e._l(e.conversationToRender,(function(t){return n("chat-conversation",{key:t.id,attrs:{id:t.id,"chat-id":e.chatId,"chat-customer-id":e.customerId,messenger:e.messenger,messages:t.messages,"date-created":t.dateCreated,"sender-type":e.senderType,"unknown-sender":e.unknownSender,"mass-selection-active":e.massSelectionActive,"mass-selected-ids":e.selectedItems},on:{"mass-message-select":e.massAddSelectedElement,"mass-message-deselect":e.massRemoveSelectedElement,"show-message-location":e.showMessageLocation}})})),1),n("transition",{attrs:{name:"fade"}},[e.displayScrollDownButton?n("div",{staticClass:"messages-scroll-down-button",on:{click:e.scrollDown}},[n("i",{staticClass:"icon-ic_fluent_arrow_down_24_regular"})]):e._e()]),n("div",{staticClass:"d-flex justify-content-center align-items-center p-8"},[n("transition",{attrs:{name:"fade"}},[e.messagesBottomLoading?n("x-bootstrap-spinner",{attrs:{size:"sm"}}):e._e()],1)],1)],1),n("div",{class:["messages-input-block",{"position-relative":!e.chatbox}]},[e.showCannedMessagesDropdown?n("canned-messages",{ref:"cannedMessages",attrs:{items:e.chatData.cannedMessages,"search-query":e.cannedMessagesSearchQuery},on:{select:e.onCannedMessageSelect,"focus-field":e.focusChatField}}):e._e(),n("chat-field",{ref:"chatField",attrs:{loading:e.processing,active:e.chatData.active,"can-admin-write":e.chatData.canAdminWrite,"check-access-controller":e.chatData.checkAccessController,"check-access-action":e.chatData.checkAccessAction,chatbox:e.chatbox,"set-value-trigger":e.setFieldContentTrigger},on:{"reassign-to-me":function(t){return e.reAssignToMe(e.chatId)},"start-conversation":e.startConversation,send:e.sendMessage,"set-scroll-block-height":e.onScrollBlockHeightChange,"open-canned-messages-dropdown":function(t){e.showCannedMessagesDropdown=!0},"close-canned-messages-dropdown":function(t){e.showCannedMessagesDropdown=!1},"search-canned-messages":e.onCannedMessageSearch,"arrow-select":e.onFieldArrow}})],1)],1)])])}),[],!1,null,null,null).exports},46884:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={name:"ChatAttachmentDocument",mixins:[n(59756).A]};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.downloadFile(e.link)}}},[e._v(" "+e._s(e.name)+" ("+e._s(e.size)+") ")])}),[],!1,null,null,null).exports},19260:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={name:"ChatAttachmentIframe",mixins:[n(59756).A]};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{staticClass:"attachment-image pws-open",attrs:{"data-is-pws":e.isPws,"data-pws-download-url":e.downloadUrl,"data-pws-ratio":e.ratio,"data-pws-title":e.title,"data-pws-type":e.type,"data-pws-url":e.url}},[e._v(e._s(e.title))])}),[],!1,null,null,null).exports},36660:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var i=n(65470),o=n(79887),s=n(13817),a=n(8974),r=n(52403),l=n(37943);const c={name:"SchedulingViewTask",mixins:[l.hz,l.Wy,l.A1,l.Dg,l.um,l.P$,l.nW,l.KH,l.mL,l.yS,l.NU,l.CQ,l.$g,l.jY,l.aP,l.Q3,l.Vt,l.T5,l.Xv],components:{XComplexInput:s.D,XForm:o.z,XPreloaderBlock:i.e},props:{id:[String,Number],args:{type:Object,default:null},relatedId:{type:Number,default:null},partnerId:{type:Number,default:null},parentTaskId:{type:Number,default:null},projectId:{type:[String,Number],default:null},statusId:{type:[String,Number],default:null},locationId:{type:[String,Number],default:null},fromTicket:{type:Number,default:null},adminCanEdit:{type:Boolean,default:!0}},data:()=>({initialState:!0,isSidebar:!0,model:{},changedModel:!1,attributesMeta:{},additionalAttributesMeta:{},permissions:{},options:{},className:"",loading:!0,newRecord:!0,formId:"admin_scheduling_task_preview",oldCustomerValue:0,oldServiceValue:0,resources:{geo_data_src:{customer:{},service:{}}},workflowStatusIDFromModel:null}),created(){this.loadData({related_id:this.relatedId,partner_id:this.partnerId,project_id:this.projectId,workflow_status_id:this.statusId,location_id:this.locationId,from_ticket:this.fromTicket}).then((e=>{let t={};for(let n in e.model)t[n]=e.model[n];this.model=t,this.workflowStatusIDFromModel=this.model.workflow_status_id,this.permissions=e.permissions,this.attributesMeta=e.attributesMeta.attributes,this.additionalAttributesMeta=e.attributesMeta.additional_attributes,this.options=e.resources.options,this.className=e.resources.class_name,this.newRecord=(0,a.empty)(e.model.id),this.oldCustomerValue=this.model.related_customer_id,this.oldServiceValue=this.model.related_service_id,this.__customerMixin_loadData(e),this.__changeHandlersMixin_loadData(e),this.__changesMixin_loadData(e),this.__addressMixin_loadData(e),this.__coordinatesMixin_loadData(e),this.args&&this.setNewData(this.args),this.__mentionsMixin_loadData(e),this.__partnersMixin_loadData(e),this.__geoDataSourceMixin__loadData(e),this.preselectPartner(this.options.partners),this.preselectProject(this.options.projects),this.loading=!1,this.$nextTick((()=>{this.__dateMixin_init(e),this.initialState=!1}))}))},computed:{formUrl(){return this.newRecord?"/admin/scheduling/tasks--add-from-sidebar":`/admin/scheduling/tasks--edit?id=${this.id}&fromSidebar=true`},toolbarButtons:()=>["bold","italic","underline","|","formatOL","formatUL","insertLink","|","color","clearFormatting","html"],goToTaskButtonTitle(){return this.model.id?this.$t("scheduling","Go to task page"):this.$t("scheduling","Save & go to task page")},cancelButtonTitle(){return this.model.is_archived?this.$t("scheduling","Close"):this.$t("scheduling","Cancel")},disableFields(){return this.model.is_archived||!this.adminCanEdit},disableEndDateTime(){return(0,a.empty)(this.model.scheduled_from)||this.disableFields},disableProject(){return(0,a.empty)(this.model.project_id)||this.disableFields},disableLocation(){return!(0,a.empty)(this.model.related_customer_id)||this.disableFields}},methods:{onChangeRelatedService(e){this.setTaskGeoDataChangeParams({scenario:"service",customer:(0,a.empty)(this.model.related_customer_id)?0:this.model.related_customer_id,service:(0,a.empty)(e)?0:e,old_service:(0,a.empty)(this.oldServiceValue)?0:this.oldServiceValue}),this.oldServiceValue=e,this.changeRelatedServices(e)},setTaskGeoDataChangeParams(e){let t=e.scenario;e.address=this.model.address,e.gps=this.model.gps,(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks/view--define-geo-data-change?type=${t}_change`,data:e,method:"POST"}).then((e=>{e.need_change&&(this.setAddressAction(e.address),this.setCoordinateAction(e.marker),this.setGeoDataSource(e.src,"address",e.address),this.setGeoDataSource(e.src,"marker",e.marker))}))},onChangeCustomer(e){this.setTaskGeoDataChangeParams({scenario:"customer",customer:(0,a.empty)(e)?0:e,old_customer:(0,a.empty)(this.oldCustomerValue)?0:this.oldCustomerValue,service:(0,a.empty)(this.model.related_service_id)?0:this.model.related_service_id}),this.oldCustomerValue=e,this.changeCustomer(e)},loadData(e){let t="";for(let n in e)null!==e[n]&&(t+=`&${n}=${e[n]}`);return new Promise((e=>{(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks--get-task-data?id=${(0,a.empty)(this.id)?0:this.id}${t}`}).then((t=>{e((0,a.formattedResponse)(t))}))}))},empty:a.empty,setNewData(e){this.model.scheduled_from=r.wt.parseDate(e.start),this.model.scheduled_to=r.wt.parseDate(e.end),this.model.assigned_value=r.wt.parseResource(e.resource)},changeListOfChecklist(e){(0,a.empty)(e)?this.checklistTemplateItems=[]:this.getChecklistByTemplate(e)},getAttributeLabel(e){return(0,a.isset)(this.attributesMeta,[e,"label"])?this.attributesMeta[e].label:e},preselectPartner(e){const t=Object.keys(e);1===t.length&&(this.model.partner_id=t[0])},preselectProject(e){const t=Object.keys(e);1===t.length&&(this.changeProject(t[0]),this.model.project_id=t[0])}},watch:{"model.related_customer_id":function(e){if(this.initialState)return!1;this.onChangeCustomer(e)},"model.related_service_id":function(e){if(this.initialState)return!1;this.onChangeRelatedService(e)},model:{deep:!0,handler(e,t){if(!(0,a.isset)(t,"id")&&this.newRecord)return!1;!this.changedModel&&this.newRecord&&(this.changedModel=!0)}},"model.scheduled_from":function(){(0,a.empty)(this.model.scheduled_from)&&(this.model.scheduled_to="")}}};const d=(0,n(71938).A)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scheduling-preview sidebar-content-inner h-100 px-0 pt-0"},[n("x-preloader-block",{attrs:{loading:e.loading}},[n("x-form",{ref:"form",staticClass:"h-100 scheduling-task-preview form-label-start",attrs:{id:e.formId,url:e.formUrl,method:"POST","prevent-db":"#admin_scheduling_task_preview_save_button",data:e.model,"class-name":e.className,"attributes-meta":e.attributesMeta,"af-attributes-meta":e.additionalAttributesMeta,"before-send":e.beforeSend},on:{success:e.onFormSuccess}},[n("div",{staticClass:"form-content"},[e.newRecord?n("div",{staticClass:"row",attrs:{"data-test-selector":"task-template-row"}},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Task template"))+" ")]),n("div",{staticClass:"col-md-12"},[n("x-complex-input",{attrs:{type:"select","data-test-selector":"task-template-select",params:{allowClear:!0,placeholder:e.$t("scheduling","Select template"),options:{id:"admin_config_task_templates_select_template",options:e.options.templates,disabled:e.disableFields}}},on:{input:e.changeTemplate},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}})],1)]):e._e(),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label hint"},[n("span",{domProps:{textContent:e._s(e.getAttributeLabel("title"))}}),n("span",{staticClass:"text-secondary"},[e._v(" "+e._s(e.$t("scheduling","required")))])]),n("div",{staticClass:"col-md-12"},[n("x-complex-input",{attrs:{type:"text",meta:e.attributesMeta.title,params:{options:{id:"scheduling_task_preview_title",disabled:e.disableFields}}},on:{focusout:e.changeTitle},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Description"))+" ")]),n("div",{staticClass:"col-md-12"},[n("x-complex-input",{ref:"froala",staticClass:"pt-0",attrs:{type:"froala",params:{options:{id:"scheduling_task_preview_description"},toolbarButtons:e.toolbarButtons,toolbarSticky:!1,mentions:!0,mentionsList:e.mentionsList,heightMax:105,disabled:e.disableFields},meta:e.attributesMeta.description},on:{focusout:e.changeDescription},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label hint"},[n("span",{domProps:{textContent:e._s(e.getAttributeLabel("project_id"))}}),n("span",{staticClass:"text-secondary"},[e._v(" "+e._s(e.$t("scheduling","required")))])]),n("x-complex-input",{attrs:{type:"select",params:{placeholder:e.$t("scheduling","Select project"),options:{id:"scheduling_task_preview_project_id",options:e.options.projects,class:e.showWarningIncorrectValues("project_id")?"incorrect":"",disabled:e.disableFields}},meta:e.attributesMeta.project_id},on:{input:e.changeProject},model:{value:e.model.project_id,callback:function(t){e.$set(e.model,"project_id",t)},expression:"model.project_id"}}),e.showWarningIncorrectValues("project_id")?n("small",{attrs:{"data-test-selector":"project-warning"},domProps:{innerHTML:e._s(e.getWarningMessage("project_id"))}}):e._e()],1),n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Assigned to"))+" ")]),n("x-complex-input",{attrs:{type:"select",params:{options:{id:"scheduling_task_preview_assigned_value",options:e.options.assignee_list,class:e.showWarningIncorrectValues("assigned_value")?"incorrect":"",disabled:e.disableFields}},meta:e.attributesMeta.assigned_value},on:{input:e.changeAdmin},model:{value:e.model.assigned_value,callback:function(t){e.$set(e.model,"assigned_value",t)},expression:"model.assigned_value"}}),e.showWarningIncorrectValues("assigned_value")?n("small",{attrs:{"data-test-selector":"admin-warning"},domProps:{innerHTML:e._s(e.getWarningMessage("assigned_value"))}}):e._e()],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Priority"))+" ")]),n("x-complex-input",{attrs:{type:"select",params:{options:{id:"scheduling_task_preview_priority",options:e.options.priorities,disabled:e.disableFields},templateResult:!0,templateSelection:!0},meta:e.attributesMeta.priority},model:{value:e.model.priority,callback:function(t){e.$set(e.model,"priority",t)},expression:"model.priority"}})],1),n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label",domProps:{textContent:e._s(e.getAttributeLabel("workflow_status_id"))}}),n("x-complex-input",{attrs:{type:"select",params:{options:{id:"scheduling_task_preview_workflow_status_id",options:e.options.statuses,disabled:e.disableProject},templateResult:!0,templateSelection:!0},meta:e.attributesMeta.workflow_status_id},model:{value:e.model.workflow_status_id,callback:function(t){e.$set(e.model,"workflow_status_id",t)},expression:"model.workflow_status_id"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Customer"))+" ")]),n("div",{staticClass:"col-12"},[n("x-complex-input",{attrs:{"data-test-selector":"customer-select",type:"select-search",params:e.customerAllParams,meta:e.attributesMeta.related_customer_id},model:{value:e.model.related_customer_id,callback:function(t){e.$set(e.model,"related_customer_id",t)},expression:"model.related_customer_id"}}),e.showWarningIncorrectValues("related_customer_id")?n("small",{attrs:{"data-test-selector":"customer-warning"},domProps:{innerHTML:e._s(e.getWarningMessage("related_customer_id"))}}):e._e()],1)]),e.showRelatedServices?n("div",{staticClass:"row",attrs:{"data-test-selector":"related-services-row"}},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Related service"))+" ")]),n("div",{staticClass:"col-12"},[n("x-complex-input",{attrs:{type:"select",meta:e.attributesMeta.related_service_id,params:{allowClear:!0,options:{id:"scheduling_task_related_service_id",options:e.serviceRelated,disabled:e.disableFields},placeholder:e.$t("scheduling","Select related service")}},model:{value:e.model.related_service_id,callback:function(t){e.$set(e.model,"related_service_id",t)},expression:"model.related_service_id"}})],1)]):e._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label hint"},[n("span",{domProps:{textContent:e._s(e.getAttributeLabel("partner_id"))}}),n("span",{staticClass:"text-secondary"},[e._v(" "+e._s(e.$t("scheduling","required")))])]),n("div",{staticClass:"col-md-12"},[n("x-complex-input",{attrs:{type:"select",params:{placeholder:e.$t("scheduling","Select partner"),options:{id:"scheduling_task_preview_partner_id",options:e.formattedPartners,class:e.showWarningIncorrectValues("partner_id")?"incorrect":"",disabled:e.disableFields}},meta:e.attributesMeta.partner_id},on:{input:e.checkPartners},model:{value:e.model.partner_id,callback:function(t){e.$set(e.model,"partner_id",t)},expression:"model.partner_id"}})],1)]),n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label hint"},[n("span",{domProps:{textContent:e._s(e.getAttributeLabel("location_id"))}}),e.disableLocation?n("span",{staticClass:"text-secondary"},[e._v(" "+e._s(e.$t("scheduling","Customer location")))]):e._e()]),n("x-complex-input",{attrs:{type:"select",params:{options:{id:"scheduling_task_preview_location_id",options:e.options.locations,placeholder:e.$t("scheduling","Select location"),disabled:e.disableLocation}},meta:e.attributesMeta.location_id},model:{value:e.model.location_id,callback:function(t){e.$set(e.model,"location_id",t)},expression:"model.location_id"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label hint"},[n("span",{domProps:{textContent:e._s(e.$t("scheduling","Address"))}}),n("span",{staticClass:"text-secondary"},[e._v(e._s(e.addressSource))])]),n("div",{staticClass:"col-md-12"},[n("x-complex-input",{attrs:{type:"textarea",params:{options:{id:"scheduling_task_preview_address",rows:2,disabled:e.disableFields}},meta:e.attributesMeta.address},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label hint"},[n("span",{domProps:{textContent:e._s(e.$t("scheduling","Coordinates"))}}),n("span",{staticClass:"text-secondary"},[e._v(e._s(e.gpsSource))])]),n("div",{staticClass:"col-md-12"},[n("x-complex-input",{attrs:{type:"text","data-test-selector":"gps-input",params:e.coordinateParams,meta:e.attributesMeta.gps},model:{value:e.model.gps,callback:function(t){e.$set(e.model,"gps",t)},expression:"model.gps"}})],1)]),e.newRecord?n("div",{staticClass:"row",attrs:{"data-test-selector":"check-list-row"}},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Checklist template"))+" ")]),n("div",{staticClass:"col-md-12"},[n("x-complex-input",{attrs:{type:"select","data-test-selector":"check-list-select",params:{allowClear:!0,placeholder:e.$t("scheduling","Select checklist"),options:{options:e.options.checklists_templates,disabled:e.disableFields}},meta:e.attributesMeta.checklist_template_id},on:{input:e.changeListOfChecklist},model:{value:e.model.checklist_template_id,callback:function(t){e.$set(e.model,"checklist_template_id",t)},expression:"model.checklist_template_id"}})],1)]):e._e(),e.empty(e.checklistTemplateItems)?e._e():n("div",{staticClass:"row",attrs:{"data-test-selector":"checklists-row"}},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"admin-scheduling--tasks-form-checklist-items"},[n("ul",{staticClass:"ps-16"},e._l(e.checklistTemplateItems,(function(t){return n("li",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),0)])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Start date & time"))+" ")]),n("x-complex-input",{attrs:{type:"datetime",params:{options:{id:"scheduling_task_preview_start_date",disabled:e.disableFields},datePickerConfig:{drops:"up"},activeClearButton:!e.disableFields},meta:e.attributesMeta.scheduled_from},on:{input:e.changeStartDate},model:{value:e.model.scheduled_from,callback:function(t){e.$set(e.model,"scheduled_from",t)},expression:"model.scheduled_from"}})],1),n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label",domProps:{textContent:e._s(e.getAttributeLabel("scheduled_to"))}}),n("x-complex-input",{attrs:{params:{options:{id:"scheduling_task_preview_end_date",disabled:e.disableEndDateTime},datePickerConfig:{drops:"up"},activeClearButton:!e.disableEndDateTime},meta:e.attributesMeta.scheduled_to,type:"datetime"},on:{input:e.changeEndDate},model:{value:e.model.scheduled_to,callback:function(t){e.$set(e.model,"scheduled_to",t)},expression:"model.scheduled_to"}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Travel time to task location"))+" ")]),n("x-complex-input",{attrs:{type:"text",params:{options:{id:"scheduling_task_preview_travel_time_to",placeholder:e.$t("scheduling","0h 0m"),disabled:e.disableFields}},meta:e.attributesMeta.formatted_travel_time_to},model:{value:e.model.formatted_travel_time_to,callback:function(t){e.$set(e.model,"formatted_travel_time_to",t)},expression:"model.formatted_travel_time_to"}})],1),n("div",{staticClass:"col-md-6"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Travel time from task location"))+" ")]),n("x-complex-input",{attrs:{type:"text",params:{options:{id:"scheduling_task_preview_travel_time_from",placeholder:e.$t("scheduling","0h 0m"),disabled:e.disableFields}},meta:e.attributesMeta.formatted_travel_time_from},model:{value:e.model.formatted_travel_time_from,callback:function(t){e.$set(e.model,"formatted_travel_time_from",t)},expression:"model.formatted_travel_time_from"}})],1)]),e.newRecord?e._e():n("div",{staticClass:"row",attrs:{"data-test-selector":"task-preview-timestamps"}},[n("div",{staticClass:"col"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Created"))+" ")]),n("div",{attrs:{id:"scheduling_task_preview_created_at"},domProps:{textContent:e._s(e.formatDateTime(e.model.created_at))}})]),n("div",{staticClass:"col"},[n("label",{staticClass:"col-form-label"},[e._v(" "+e._s(e.$t("scheduling","Updated"))+" ")]),n("div",{attrs:{id:"scheduling_task_preview_updated_at"},domProps:{textContent:e._s(e.formatDateTime(e.model.updated_at))}})])])]),n("div",{staticClass:"form-buttons"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[e.permissions.view?n("button",{staticClass:"btn btn-link",attrs:{id:"admin_scheduling_task_preview_go_to_button",type:"button"},domProps:{innerHTML:e._s(e.goToTaskButtonTitle)},on:{click:e.goToTaskPage}}):e._e()]),n("div",{staticClass:"col-6 text-end"},[n("button",{staticClass:"btn btn-cancel",attrs:{id:"admin_scheduling_task_preview_cancel_button"},domProps:{innerHTML:e._s(e.cancelButtonTitle)},on:{click:function(t){return t.preventDefault(),e.hideSidebar.apply(null,arguments)}}}),e.disableFields?e._e():n("button",{staticClass:"btn btn-primary",attrs:{id:"admin_scheduling_task_preview_save_button"},on:{click:function(t){return t.preventDefault(),e.$refs.form.submit()}}},[e._v(" "+e._s(e.$t("scheduling","Save"))+" ")])])])])])],1)],1)}),[],!1,null,null,null).exports},82950:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(54059),o=n(71556);n(43838);const s={name:"CustomersLabelTooltip",methods:{clickOnConfigPage(){this.$router.push("/admin/config/labels?module=customers")}}};var a=n(71938);const r=(0,a.A)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"help-wrapper"},[n("x-translate",{attrs:{tag:"false",category:"tariffs",message:"Labels are used to define new service availability alongside tariff plans Labels can be configured on the {br} {link}"},scopedSlots:e._u([{key:"link",fn:function(){return[n("a",{staticClass:"info-link cursor-pointer",attrs:{"data-test-selector":"config-page-redirect"},on:{click:e.clickOnConfigPage}},[e._v(" "+e._s(e.$t("tariffs","Config page"))+" ")])]},proxy:!0},{key:"br",fn:function(){return[n("br")]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;var l=n(8974);const c={name:"HideOnAdminPortalTooltip"};const d=(0,a.A)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"help-wrapper"},[t("x-translate",{attrs:{tag:"false",category:"tariffs",message:"If a customer’s location, category, or label does not match the tariff’s criteria, the tariff will be unavailable for selection. When ‘Hide tariff on Admin portal’ is disabled, the options below apply only to the customer portal. If enabled, these settings will also apply to the admin portal."}})],1)}),[],!1,null,null,null).exports,u={name:"AvailabilityForOrderingBlock",props:{attributesMeta:{type:Object,default:()=>({})},value:{type:Object,default:()=>({})},className:{type:String,default:""},customerCategories:{type:Object,default:()=>({})},customerLabels:{type:Object,default:()=>({})},locationsFromPageData:{type:Object,default:()=>({})}},computed:{...(0,i.L8)("locations",["locations"]),getLocations(){return(0,l.emptyObject)(this.locationsFromPageData)?this.locations:this.locationsFromPageData},CustomersLabelTooltip:()=>({component:r}),HideOnAdminPortalTooltip:()=>({component:d})},methods:{getAttributeLabel(e){return(0,l.isset)(this.attributesMeta,[e,"label"])?this.attributesMeta[e].label:e},inputHandler(e,t){let n=this.value;n[e]=t,this.$emit("input",n)}},components:{XComplexInput:o.Ay}};const p=(0,a.A)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-block"},[n("div",{staticClass:"card-block-header"},[n("h4",{domProps:{textContent:e._s(e.$t("tariffs","Plan availability"))}})]),n("div",{staticClass:"card-block-body"},[n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("show_on_customer_portal"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{value:e.value.show_on_customer_portal,type:"checkbox",params:{options:{name:e.className+"[show_on_customer_portal]"}},meta:e.attributesMeta.show_on_customer_portal},on:{input:function(t){return e.inputHandler("show_on_customer_portal",t)}}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("hide_on_admin_portal"))+" "),n("a",{directives:[{name:"x-tooltip",rawName:"v-x-tooltip:helpTooltip.top",value:e.HideOnAdminPortalTooltip,expression:"HideOnAdminPortalTooltip",arg:"helpTooltip",modifiers:{top:!0}}],staticClass:"btn-icon-sm",attrs:{href:"javascript:void(0)"}},[n("i",{staticClass:"icon-ic_fluent_info_24_regular"})])]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{value:e.value.hide_on_admin_portal,type:"checkbox",params:{options:{name:e.className+"[hide_on_admin_portal]"}},meta:e.attributesMeta.hide_on_admin_portal},on:{input:function(t){return e.inputHandler("hide_on_admin_portal",t)}}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("available_for_locations"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{value:e.value.available_for_locations,type:"multiple-select",params:{options:{options:e.getLocations,name:e.className+"[available_for_locations]"}},meta:e.attributesMeta.available_for_locations},on:{input:function(t){return e.inputHandler("available_for_locations",t)}}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("customer_categories"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{value:e.value.customer_categories,type:"multiple-select",params:{options:{options:e.customerCategories,name:e.className+"[customer_categories]"}},meta:e.attributesMeta.customer_categories},on:{input:function(t){return e.inputHandler("customer_categories",t)}}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.$t("tariffs","Customer labels"))+" "),n("a",{directives:[{name:"x-tooltip",rawName:"v-x-tooltip:helpTooltip.top",value:e.CustomersLabelTooltip,expression:"CustomersLabelTooltip",arg:"helpTooltip",modifiers:{top:!0}}],staticClass:"btn-icon-sm",attrs:{href:"javascript:void(0)"}},[n("i",{staticClass:"icon-ic_fluent_info_24_regular"})])]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{value:e.value.customerModuleLabels,type:"multipleTags",params:{options:{id:"admin_tariffs_test_",options:e.customerLabels.options,name:e.className+"[customerModuleLabels]",tagsForRender:e.customerLabels.render,placeholder:e.$t("customers","Start typing label name")}},meta:e.attributesMeta.customerModuleLabels},on:{input:function(t){return e.inputHandler("customerModuleLabels",t)}}})],1)])])])}),[],!1,null,null,null).exports},24704:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(8974);let o={},s={};function a(){return"/portal"===window.location.pathname.slice(0,7)?"/portal/add-on--get-code":"/admin/config/add-on--get-code"}const r={name:"XAddonCode",props:{page:String,location:String,params:Object,className:String},data:()=>({html:""}),mounted(){(function(e,t){let n=e;return empty(t)||(n+=window.md5(JSON.stringify(t))),(0,i.isset)(s,n)||(s[n]=new Promise(((r,l)=>{if((0,i.isset)(o,n))return delete s[n],void r(o[n]);let c=e.replace(/\\\\/g,"\\"),d={before:{page:c,params:t,location:"before_content"},after:{page:c,params:t,location:"after_content"}};$.ajax({url:a(),method:"POST",data:d,success:e=>{if((0,i.isset)(e,"error"))delete s[n],l(e);else{let t={before:(0,i.isset)(e,"before_code")?e.before_code:"",after:(0,i.isset)(e,"after_code")?e.after_code:""};delete s[n],o[n]=t,r(t)}},error:e=>{delete s[n],l(e)}})}))),s[n]})(this.page,this.params).then((e=>{let t="after_content"===this.location?"after":"before";this.setCode(e[t])})).catch((e=>{console.error(e)}))},methods:{parseCode(e){let t=$("<div>");t.append(e);let n=t.find("script");t.find("script").remove(),this.html=t.html(),this.$nextTick((()=>{n.each(((e,t)=>{$("body").append(t)}))}))},setCode(e){this.parseCode(e)}}};const l=(0,n(71938).A)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return""!==e.html?n("div",{class:e.className,domProps:{innerHTML:e._s(e.html)}}):e._e()}),[],!1,null,null,null).exports},68673:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(8974),o=n(6139),s=n(79887),a=n(54059),r=n(13886),l=n.n(r),c=n(65470),d=n(48789),u=n(42094),p=n(93089),h=n(17190),f=n(13817),m=n(58468),g=n(85953),v=n(80412);const b={...JSON.parse('{"window":false,"self":false,"document":false,"name":false,"location":true,"customElements":false,"history":true,"navigation":false,"locationbar":false,"menubar":false,"personalbar":false,"scrollbars":false,"statusbar":false,"toolbar":false,"status":false,"closed":false,"frames":false,"length":false,"top":false,"opener":false,"parent":false,"frameElement":false,"navigator":false,"origin":false,"external":false,"screen":false,"innerWidth":false,"innerHeight":false,"scrollX":false,"pageXOffset":false,"scrollY":false,"pageYOffset":false,"visualViewport":false,"screenX":false,"screenY":false,"outerWidth":false,"outerHeight":false,"devicePixelRatio":false,"clientInformation":false,"screenLeft":false,"screenTop":false,"styleMedia":false,"onsearch":false,"isSecureContext":false,"trustedTypes":false,"performance":false,"onappinstalled":false,"onbeforeinstallprompt":false,"crypto":false,"indexedDB":false,"sessionStorage":false,"localStorage":false,"onbeforexrselect":false,"onabort":false,"onbeforeinput":false,"onbeforetoggle":false,"onblur":false,"oncancel":false,"oncanplay":false,"oncanplaythrough":false,"onchange":false,"onclick":false,"onclose":false,"oncontextlost":false,"oncontextmenu":false,"oncontextrestored":false,"oncuechange":false,"ondblclick":false,"ondrag":false,"ondragend":false,"ondragenter":false,"ondragleave":false,"ondragover":false,"ondragstart":false,"ondrop":false,"ondurationchange":false,"onemptied":false,"onended":false,"onerror":false,"onfocus":false,"onformdata":false,"oninput":false,"oninvalid":false,"onkeydown":false,"onkeypress":false,"onkeyup":false,"onload":false,"onloadeddata":false,"onloadedmetadata":false,"onloadstart":false,"onmousedown":false,"onmouseenter":false,"onmouseleave":false,"onmousemove":false,"onmouseout":false,"onmouseover":false,"onmouseup":false,"onmousewheel":false,"onpause":false,"onplay":false,"onplaying":false,"onprogress":false,"onratechange":false,"onreset":false,"onresize":false,"onscroll":false,"onsecuritypolicyviolation":false,"onseeked":false,"onseeking":false,"onselect":false,"onslotchange":false,"onstalled":false,"onsubmit":false,"onsuspend":false,"ontimeupdate":false,"ontoggle":false,"onvolumechange":false,"onwaiting":false,"onwebkitanimationend":false,"onwebkitanimationiteration":false,"onwebkitanimationstart":false,"onwebkittransitionend":false,"onwheel":false,"onauxclick":false,"ongotpointercapture":false,"onlostpointercapture":false,"onpointerdown":false,"onpointermove":false,"onpointerrawupdate":false,"onpointerup":false,"onpointercancel":false,"onpointerover":false,"onpointerout":false,"onpointerenter":false,"onpointerleave":false,"onselectstart":false,"onselectionchange":false,"onanimationend":false,"onanimationiteration":false,"onanimationstart":false,"ontransitionrun":false,"ontransitionstart":false,"ontransitionend":false,"ontransitioncancel":false,"onafterprint":false,"onbeforeprint":false,"onbeforeunload":false,"onhashchange":false,"onlanguagechange":false,"onmessage":false,"onmessageerror":false,"onoffline":false,"ononline":false,"onpagehide":false,"onpageshow":false,"onpopstate":false,"onrejectionhandled":false,"onstorage":false,"onunhandledrejection":false,"onunload":false,"crossOriginIsolated":false,"scheduler":false,"alert":false,"atob":true,"blur":false,"btoa":false,"cancelAnimationFrame":false,"cancelIdleCallback":false,"captureEvents":false,"clearInterval":false,"clearTimeout":false,"close":false,"confirm":false,"createImageBitmap":false,"fetch":false,"find":false,"focus":false,"getComputedStyle":false,"getSelection":false,"matchMedia":false,"moveBy":false,"moveTo":false,"open":false,"postMessage":false,"print":false,"prompt":false,"queueMicrotask":false,"releaseEvents":false,"reportError":false,"requestAnimationFrame":false,"requestIdleCallback":false,"resizeBy":false,"resizeTo":false,"scroll":false,"scrollBy":false,"scrollTo":false,"setInterval":true,"setTimeout":true,"stop":false,"structuredClone":false,"webkitCancelAnimationFrame":false,"webkitRequestAnimationFrame":false,"chrome":false,"fence":false,"launchQueue":false,"onbeforematch":false,"originAgentCluster":false,"credentialless":false,"speechSynthesis":false,"oncontentvisibilityautostatechange":false,"onscrollend":false,"webkitRequestFileSystem":false,"webkitResolveLocalFileSystemURL":false,"spl_localization_messages":false,"modalCallbacks":false,"getCustomCallback":false,"customCallback":false,"error_information":false,"admin_config_admin_title":false,"spl_config":false,"date_format":false,"datetime_format":false,"systemTimeZone":false,"js_time_format":false,"php_time_format":false,"time_24_hour":false,"currency_format_pattern":false,"dt_datetime_format":false,"logout_time":false,"logout_is_enabled":false,"templateForDataRangePicker":false,"templateForSingleDataRangePicker":false,"templateForSingleDateTimeDataRangePicker":false,"spl_translations_messages":false,"webpackChunksplynx":false,"SPLANG_CLASS":false,"activeEditorSnippetPlugin":false,"splynx_event_bus":false,"setImmediate":false,"clearImmediate":false,"Color":false,"Chart":false,"jQuery":false,"$":true,"html2canvas":false,"md5":false,"csrf":true,"sfcLoader":false,"Vue":true,"VueSlider":false,"MaskedInput":false,"autosize":false,"SearchIndex":false,"head":false,"JSZip":false,"io":false,"WebuiPopovers":false,"minToHm":false,"HmToMin":false,"showInNM":false,"convertToBytes":false,"List":false,"moment":false,"reinitMoment":false,"CustomDatetimePicker":false,"initDaterangePicker":false,"NProgress":false,"CodeMirror":false,"PhotoSwipe":false,"PhotoSwipeUI_Default":false,"INIT_FROALA_CODE_SNIPPET_PLUGIN":true,"noty":false,"addEventListener":true,"removeEventListener":true,"makePhotoSwiper":false,"init_web_events":false,"add_socket_listener":false,"remove_socket_listener":false,"load_io":false,"last_dialog_id":false,"last_addon_dialog_id":false,"splynxDialogs":false,"splynxAddonDialogs":false,"password_window_id":false,"is_animate":false,"decimals_separator":false,"globalEditor":false,"tributeAttached":false,"disableEditorReinit":false,"mentionsList":false,"mentionsNeedsUpdating":false,"getMentionsIsRun":false,"vueACSComponentsMixins":false,"vueHelpersMixins":false,"load_dt_language":false,"time":false,"downloadURL":false,"download_iframe":false,"download_by_iframe":false,"show_error":false,"showErrors":false,"show_message":false,"show_success":false,"show_warning":false,"show_information":false,"show_simple_notify":false,"getNotyClasses":false,"close_notify":false,"show_notify":false,"isValidEmail":false,"isValidMobile":false,"isValidPhone":false,"makeSelect2":false,"makeMultileSelect":false,"setGlobalSelects":false,"makeDatepicker":false,"makeDecimalInput":false,"small_dialog":false,"isHaveUnsavedData":false,"forgetUnsavedData":false,"showUnsavedDataDialog":false,"checkUnsavedDataBeforeLeavePage":false,"checkUnsavedDataBeforeLeaveTab":false,"checkUnsavedDataBeforeCloseDialog":false,"vue_confirm_dialog":true,"splynx_dialog":false,"downloadAllFiles":false,"confirm_dialog":false,"closeLastDialog":false,"closeLastAddonDialog":false,"_closeLastDialogInArray":false,"closeAllDialogs":false,"closeAllVueDialogs":false,"closeAllAddonDialogs":false,"_closeDialogs":false,"getLastDialog":false,"getLastAddonDialog":false,"_getLastDialogFromArray":false,"registerDialog":false,"registerAddonDialog":false,"destroyDialog":false,"_destroyDialogFromArray":false,"closeDatepicker":false,"closeSelects":false,"closeMultipleSelects":false,"removeDatepicker":false,"removeWebuiPopover":false,"urlToId":false,"processDT":false,"loadUI":false,"unloadUI":false,"show_dialog":false,"open_dialog":false,"open_dialog_new":false,"open_addon_dialog":false,"open_password_window":false,"open_image_window":false,"open_portal_dialog":false,"open_dialog_for_save_template":false,"processPasswords":false,"setSelectionRange":false,"setCaretToPosition":false,"toggleMobileMenu":false,"supports_html5_storage":false,"address_reload":false,"isDateEq":false,"addDays":false,"resetForm":false,"formatTicketStatus":false,"formatCustomerStatuses":false,"generatePasswordForAf":false,"generatePassword":false,"showPassword":false,"changePasswordIcon":false,"decodeURIComponentExtended":true,"manageVisibilityForCustomerInfoInputs":false,"decodeHtml":false,"registerLogoutHandler":false,"logout":false,"blockquoteHandler":false,"randomString":false,"open_dialog_by_url":false,"empty":false,"disableInputsInBlock":false,"enableInputsInBlock":false,"disableInput":false,"enableInput":false,"isCheckedInput":false,"changePosition":false,"drawMenuLengthForDataTable":false,"open_help_dialog":false,"formattedResponse":true,"toCamelCase":false,"_exportTextarea":false,"buttonCommon":false,"default_buttons":false,"getDataTableButtons":true,"getDefaultButtons":false,"getShowHideButton":false,"imageEnlarging":false,"setModalForTicketImages":false,"collapsePanel":false,"expandPanel":false,"checkFroalaEmptyContent":false,"fixFroalaHeight":false,"savePanelState":false,"collapsePanelClickHandler":false,"isCollapseItem":false,"processCollapsedPanels":false,"processCollapsedPanel":false,"_processCollapsedPanelState":false,"is_gMap_loading":false,"is_OpenstreetMap_loading":false,"loadGoogleMapJs":false,"loadOpenstreetMapJs":false,"processValidationgInputs":false,"processInvalidInputs":false,"processChangeInvalidInput":false,"removeRequiredFromHiddenInputs":false,"addRequiredToVisibleInputs":false,"fixSelectEmptyValue":false,"initReportValidityBeforeSubmitForm":false,"addBeforeSubmitValidation":false,"loadVueComponentsByContext":false,"imageTicketEnlarging":false,"resizeImage":false,"numbersToRanges":false,"calculatePopoverPlacement":false,"preventDubleClick":false,"splynxDebounceFn":false,"t":false,"go_address":false,"addConfirmForUnsavedDataToSelect":false,"isset":false,"formatFileSize":false,"formatInternetSpeed":false,"removeSpaces":false,"initMentions":false,"updateMentions":false,"getMentions":false,"deleteMention":false,"initResponsiveTable":false,"updateSelect2Items":false,"rgbaToRgb":false,"rgbToHSL":false,"hslToRGB":false,"normalize_rgb_value":false,"rgbToHex":false,"lightenDarkenColor":false,"makeColorContrast":false,"formatSelect2Data":false,"arrayIncludes":false,"jsonStringify":false,"saveDataInCodeEditor":false,"actionsOnView":false,"openTab":false,"scrollToComment":false,"filterWidget":false,"modifyDTRequestData":false,"initPhotoSwiper":false,"analysisReminderDay":false,"isElementInBottom":false,"isElementInViewport":false,"fixDropDownPosition":false,"removeWebUiPopovers":false,"floatElementsRemover":false,"RealNumber":false,"stripTagsFromString":false,"isValidJSON":false,"clearAllTimeouts":false,"closeAllWebuiPopoverByCustomClass":false,"initTabs":false,"loadTab":false,"getElementOffsets":false,"isElementVisibleInScrollableArea":false,"scrollAreaToElement":false,"toggleCustomersInfoBlock":false,"domReplace":false,"initWidgets":false,"setSeparators":false,"formLink":false,"linkHandler":false,"setFroalaIcons":false,"objectMap":false,"snakeCase":false,"copyElementToClipboardAsImageById":false,"remindIn":false,"showNotifications":false,"initializeNotifications":false,"is_need_to_reload":false,"logout_timer_now":false,"log_socket":false,"webUiPopoverDefaultTemplate":false,"webUiPopoverUnderModalTemplate":false,"logout_timer":false,"logout_timer_reset":false,"getColoredStateLocalStorage":false,"toggleColoredClasses":false,"saveColoredStateLocalStorage":false,"coloredRow":false,"content_id":false,"createHTMLDiv":false,"processHTML":false,"switch_page":true,"checkIfNeedOpenLinkInNewTab":false,"fixNumber":false,"showCoursorLoadWhenAjaxCall":false,"ifItIpValidateIt":false,"showAjaxErrors":false,"makePopover":false,"reload_data_table_event":true,"reloadLastDataTable":true,"createReloadDataTableEvent":true,"massActionSuccess":false,"loadVueComponents":false,"registerOnPageAdmin":false,"checkDefaultCond":false,"deleteRow":false,"markForDelete":false,"unmarkDelete":false,"switch_page_without_cache":false,"resetBootstrapTagInputField":false,"open_dialog_for_preview_customer_document":false,"reassign_messenger_chat":false,"close_messenger_chat":false,"open_messenger_chat":false,"link_messenger_chat":false,"create_from_unknown":false,"VueAvatar":false,"logout_listener":false,"showModal":false,"onShowModal":false,"closeModal":false,"onCloseModal":false,"xApp":false,"daterangepicker_default_ranges":false,"daterangepicker_single_default_ranges":false,"daterangepicker_locale_config":false,"daterangepicker_default_config":false,"daterangepicker_single_default_config":false,"daterangepicker_datetime_locale_config":false,"daterangepicker_single_datetime_default_config":false,"tax_decimals":false}')},y={vue:window.Vue,vuex:a.Ay,jquery:l(),"@/components/common/XBootstrapSpinner/XBootstrapSpinner":()=>Promise.resolve().then(n.bind(n,85953)),"@/components/common/XAlertWithProgressBar/XAlertWithProgressBar":()=>n.e(2293).then(n.bind(n,42293)),"@/components/base/XLicense/XLicense":()=>Promise.resolve().then(n.bind(n,16845)),"@/components/common/inputs/XInputHidden":{XInputHidden:o.A},"@/utils/functions":{...i},"@/components/common/XPreloaderBlock":{XPreloaderBlock:c.A},"@/components/base/XBreadcrumbs":{XBreadcrumbs:d.A},"@/components/common/XDatatable":{XDatatable:u.Ay},"@/components/common/XTabs":{...p},"@/components/common/XFilter/XFilterWithUrl":()=>Promise.all([n.e(7564),n.e(3012)]).then(n.bind(n,53012)),"@/components/common/XModal":h.A,"@/components/common/inputs/XComplexInput":{XComplexInput:f.A},"@/components/common/XForm":{XForm:s.z},"@/components/common/XAce":{...m},"@/apps/admin/views/admin/config/templates/PlaceholdersTab":()=>n.e(1549).then(n.bind(n,61549))},w=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","let","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];const _={name:"XAddonVueComponent",props:{internalPreloader:{type:Boolean,default:!1},url:String,downData:Object,isPage:{type:Boolean,default:!1}},created(){window.__addon__modules||(window.__addon__modules={}),window.__addon__modules[this.resourcesUrl]={}},data:()=>({sfcLoader:{},compilation:!0,compiledDynamic:{}}),methods:{_importsToString(e){let t="import { ";const n=[];for(let t of Object.keys(e))"$"===t||Number.isFinite(Number(t))||w.includes(t)||n.push(t);return t+=n.join(", "),t+=" } from 'stubs'; \n",t},_esmSecurity:e=>`import { window } from 'stubs';\nvar addonWindow = { ...allowedGlobals.stubs };\n${e}`,_setSecurity(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".vue";if(".esm"===n)return this._esmSecurity(e);let i=e.search("<script>"),o=e.slice(0,i+8),s=e.slice(i+8);t||(i=0,o=e.slice(0,i),s=e.slice(i));return`${o}${this._getGlobalKeys(n)}import $ from 'jquery'; \n${s}`},_processObject(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};for(const o in e)Object.prototype.hasOwnProperty.call(t,[o])?"object"==typeof t[o]&&null!==t[o]?i[o]=this._processObject(e[o],t[o],!1):!1!==t[o]?i[o]=e[o]:i[o]=void 0:i[o]=n?void 0:e[o];return i},_deny(e){return this._processObject(e,b)},_getGlobalKeys(e){let t={...window};if(t.globalThis={},".vue"===e)return this._importsToString(t);if(".mjs"===e)return this._importsToString(t);throw new Error("Type is not support")},init(){i.promisifiedAjax({url:this.url}).then((e=>{i.promisifiedAjax({url:`${this.resourcesUrl}/js/vue/vue_views_${e.split("/").join("_")}.vue`}).then((async e=>{e=this._setSecurity(e),this.compiledDynamic=await function(e,t,n,o,s){window.allowedGlobals=n;const a={moduleCache:{...y,...n},async getFile(e){if("root.vue"===e)return t;const n=async function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=await fetch(e),a=await i.text();n&&(a=o(a,!1,".esm"));const r=function(e,t){return e.replace(/System\.register\(\s*\[(.*?)\]/,`System.register('${t}', []`)}(v.transform(a,{plugins:["transform-modules-systemjs"]}).code,t);new Function(r)(),window.__addon__modules[s][t]=await window.System.import(t)};if(e.startsWith("ADDON_APP/views")){const t=`vue_${e.split("/").slice(1).join("_")}.vue`,n=await(0,i.promisifiedAjax)({url:`${s}/js/vue/${t}`,method:"GET",contentType:"application/javascript"});return{type:".vue",getContentData:()=>o(n,!0,".vue")}}if(e.startsWith("ADDON_APP/services")){const t=`vue_${e.split("/").slice(1).join("_")}.js`,i=`${s.slice(1)}_${t}`;await n(`${s}/js/vue/${t}`,i);const o=`export default window.__addon__modules['${s}']['${i}'].default`;return{type:".mjs",getContentData:()=>o}}const a=`lib_${e}`,r=`${s.slice(1)}_vue_${a}`;await n(`${s}/js/vue/vue_${a}.js`,r,!1);const l=`export default window.__addon__modules['${s}']['${r}']`;return{type:".mjs",getContentData:()=>l}},addStyle(e){const t="vue-add-on-style";if(Array.from(document.querySelectorAll(`.${t}`)).some((t=>t.textContent===e)))return;const n=document.createElement("style");n.classList.add(t),n.textContent=e;const i=document.head.getElementsByTagName("style")[0]||null;document.head.insertBefore(n,i)}};return e.loadModule("root.vue",a)}(this.sfcLoader,e,this._getGlobalModules,this._setSecurity,this.resourcesUrl),this.compilation=!1,this.$emit("loaded")})).catch((e=>{console.error(e),this.$showError(e.responseText,4),this.compilation=!1}))})).catch((e=>{console.error(e),this.compilation=!1}))}},computed:{resourcesUrl(){return`/${this.downData.pointData.url.split("/")[1]}`},preloaderClasses(){return{"content clearfix active":this.isPage,"h-100 w-100":this.internalPreloader&&!this.isPage}},_getGlobalModules(){let e={...window};return e=this._deny(e),e.window={...e},e.globalThis={...e},{stubs:e}}},async beforeCreate(){await n.e(9767).then(n.t.bind(n,99767,23)),Promise.all([n.e(8402).then(n.t.bind(n,28402,23)),n.e(9708).then(n.t.bind(n,49708,23))]).then((e=>{let[t]=e;this.sfcLoader=t}))},components:{XBootstrapSpinner:g.default,XPreloaderBlock:c.A},watch:{compilation(e){this.$emit("processing",e)},sfcLoader(){this.init()}}};const T=(0,n(71938).A)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.compilation?n("div",{class:e.preloaderClasses},[e._t("default")],2):n(e.compiledDynamic,{tag:"component",attrs:{"down-data":e.downData},on:{"send-up":function(t){return e.$emit("up-data",t)}}})}),[],!1,null,null,null).exports},71971:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(54059),o=n(48881);const s={name:"XBreadcrumbs",props:{items:Array},data(){return{icon:this.$route.meta.icon,color:this.$route.meta.color}},methods:{...(0,i.PY)([o.qPd]),handleClick(e){this.isNeedRefresh(e)?this.REFRESH_ROUTE():e.url&&"#"!==e.url&&e.url!==this.$route.path&&this.$router.push(e.url)},renderTitle(e){return"string"==typeof e?e:Array.isArray(e)?this.$t(e[0],e[1],3===e.length?e[2]:null):e},isNeedRefresh(e){return e.url===this.$route.path||"#"===e.url||empty(e.url)},isLastItem(e){return this.items.length-1===e}}};const a=(0,n(71938).A)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"splynx-breadcrumbs"},[e.icon?n("span",{staticClass:"btn-icon-lg color-white me-12",class:"bg-"+e.color},[n("i",{class:e.icon})]):e._e(),n("ul",e._l(e.items,(function(t,i){return n("li",{key:i},[n("a",{attrs:{href:t.url},on:{click:function(n){return n.preventDefault(),e.handleClick(t,i)}}},[e._v(e._s(e.renderTitle(t.title)))]),e.items.length===i+1?e._t("label"):e._e()],2)})),0)])}),[],!1,null,null,null).exports},35187:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(8974),o=n(54059);const s={name:"HelpDocumentationRender",props:{content:{type:String},allowRedirect:{type:Boolean,default:!0},hash:String},mounted(){this.render(),this.hash&&this.scrollToHash()},methods:{scrollToHash(){this.$nextTick((()=>{const e=this.$refs.helpRenderWrapper.querySelector(`#${this.hash}`);e&&e.scrollIntoView({block:"start"})}))},isUrlAbsolute:e=>"string"==typeof e&&/^[a-z][a-z0-9+.-]*:/.test(e),isUrlWithJs:e=>"string"==typeof e&&/^javascript:/.test(e),isDownloadLink:e=>"string"==typeof e&&/\/download\?/.test(e),goToDocumentation(e){window.open(e)},prepareLinks(){let e=this,t=$(this.$refs.helpRenderWrapper),n=e.apiUrl;t.find("img").each((function(){let e=$(this).attr("src");if(!e.includes(n)){$(this).attr("src",`${n}/${e}`);let t=$(this).parent("a");(0,i.empty)(t)||t.attr("href","")}})),t.find("a").each((function(){let t=$(this).attr("href");$("a").hasClass("is-external-link")&&$(this).click((e=>{e.preventDefault()})),e.isUrlAbsolute(t)||e.isUrlWithJs(t)||e.isDownloadLink(t)?e.isUrlWithJs(t)||$(this).click((()=>{e.goToDocumentation(t)})):$("a").hasClass("is-internal-link")&&(e.allowRedirect?$(this).attr("href",`${n}${t}`):$(this).click((n=>{n.preventDefault(),"a"===n.target.localName&&e.$emit("load-by-path",t)})))}))},prepareDetails(){$(this.$refs.helpRenderWrapper).find("details").each((function(){$(this).find("summary").on("click",(e=>{e.preventDefault(),$(this).attr("open",!$(this).attr("open"))}))}))},prepareImages(){$(this.$refs.helpRenderWrapper).find("img").each((function(){imageEnlarging(this)}))},render(){this.prepareLinks(),this.prepareImages(),this.prepareDetails()}},computed:{...(0,o.L8)(["documentationConfig"]),apiUrl(){return this.documentationConfig.api_url}},updated(){this.render()}};const a=(0,n(71938).A)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"helpRenderWrapper",staticClass:"admin-help-content",attrs:{id:"help_render_wrapper"},domProps:{innerHTML:e._s(e.content)}})}),[],!1,null,null,null).exports},16845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const i={name:"XLicense",components:{XInputHidden:n(6139).p},props:{license:{type:Object,default:()=>({show:!1,isShowBuyLink:!1,label:"",daysToExpiration:0,buyLicenseUrl:"",licenseCode:"",message:""})}},methods:{submitBuyForm(){$.ajax({url:"/admin/tools--check-license",method:"GET"}),$(this.$refs.form).submit()},reloadLicense(){$.ajax({type:"GET",url:"/admin/tools--update-license",dataType:"json",success(e){e.result?(show_success("Success! Page will be reloaded in 2 seconds!",4),setTimeout((()=>{window.location.reload()}),2e3)):show_error("Error when trying reload license!",4)}})}}};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.license.show?n("div",{class:["license-wrapper","row","alert","alert-"+e.license.label]},[n("form",{ref:"form",attrs:{id:"admin_self_buy_form",role:"form",method:"POST",target:"_blank",action:e.license.buyLicenseUrl}},[n("x-input-hidden",{attrs:{id:"admin_self_buy_form_license",name:"license",value:e.license.licenseCode}}),n("x-translate",{attrs:{tag:"false",category:"config",message:e.license.message},scopedSlots:e._u([{key:"icon",fn:function(){return[n("span",{staticClass:"btn-icon-sm",staticStyle:{"vertical-align":"middle"}},[n("i",{staticClass:"icon-ic_fluent_warning_24_regular"})])]},proxy:!0},{key:"days",fn:function(){return[e._v(" "+e._s(e.license.daysToExpiration)+" ")]},proxy:!0}],null,!1,2863626048)}),e.license.isShowBuyLink?n("x-translate",{attrs:{tag:"false",category:"config",message:"You can {buy} a subscription or {reload} license if you have active subscription."},scopedSlots:e._u([{key:"buy",fn:function(){return[n("button",{staticClass:"btn btn-success btn-sm",attrs:{id:"admin_self_buy_form_submit_button"},on:{click:function(t){return t.preventDefault(),e.submitBuyForm.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("config","buy"))+" ")])]},proxy:!0},{key:"reload",fn:function(){return[n("button",{staticClass:"btn btn-primary btn-sm",attrs:{id:"admin_self_buy_form_reload_button"},on:{click:function(t){return t.preventDefault(),e.reloadLicense.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("config","reload"))+" ")])]},proxy:!0}],null,!1,3514523973)}):e._e()],1)]):e._e()}),[],!1,null,"2e8ca26e",null).exports},21216:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(90305),o=n(53507),s=n(70351),a=n(17071),r=n(8974);const l={left:[-1,0],right:[1,0],top:[0,1],bottom:[0,-1]},c={name:"XPopover",props:{name:{type:String,required:!0},delay:{type:Number,default:0},transition:{type:String},width:{type:[Number,String],default:180},pointer:{type:Boolean,default:!0},event:{type:String,default:"click"},anchor:{type:Number,default:.5,validator:e=>e>=0&&e<=1},notHideOnContent:{type:Boolean,default:!1},unsetMaxHeight:{type:Boolean,default:!1}},data:()=>({visible:!1,timeout:null,zIndex:1,positionClass:"",fixedParents:[],position:{left:0,top:0},dialogBody:null}),computed:{showEventName(){return`show:${this.event}`},hideEventName(){return`hide:${this.event}`},className(){return["vue-popover",this.pointer&&this.positionClass]},style(){const{width:e,zIndex:t,fixedParents:n,unsetMaxHeight:i}=this,o=n.length>0,s={width:`${e}${"number"==typeof e?"px":""}`,zIndex:t,...this.position};return o&&(s.position="fixed"),i&&(s.maxHeight="unset"),s},isCheckHideOnContent(){return this.notHideOnContent&&"hover"===this.event}},mounted(){i.g.$on(this.showEventName,this.showEventListener),i.g.$on(`${this.hideEventName}-no-delay`,(e=>this.hideEventListener(e,!0))),i.g.$on(this.hideEventName,(e=>this.hideEventListener(e,!1))),this.dialogBody=document.querySelector(".vue-dialog-body"),(0,r.empty)(this.dialogBody)||this.dialogBody.addEventListener("scroll",this.scrollEventListener)},beforeDestroy(){i.g.$off(this.showEventName,this.showEventListener),i.g.$off(this.hideEventName,this.hideEventListener),(0,r.empty)(this.dialogBody)||this.dialogBody.removeEventListener("scroll",this.scrollEventListener)},methods:{scrollEventListener(){this.showEventListener()},waitElementRemoved:(e,t)=>new Promise((n=>{$(t).length||n(!0);const i=new MutationObserver((()=>{$(t).length||(n(!0),i.disconnect())}));i.observe(e,{childList:!0,subtree:!0})})),showEventListener(e){this.waitElementRemoved(document.body,"div.vue-popover").then((()=>{if(this.visible||void 0===e)return void i.g.$emit(this.hideEventName);let{name:t,position:n}=e;t===this.name&&(this.timeout=setTimeout((()=>{this.positionClass=`dropdown-position-${n}`,this.visible=!0,this.$nextTick((()=>{this.$emit("show",e),this.$nextTick((()=>{let t=this.getDropdownPosition(e);this.position={left:`${t.left}px`,top:`${t.top}px`}}))}))}),Math.max(this.delay,0)))}))},hideEventListener(e,t){this.timeout&&clearTimeout(this.timeout);let{isCheckHideOnContent:n}=this;(0,r.isset)(e,["notCheckContent"])&&e.notCheckContent&&(n=!1),t&&(this.positionClass="",this.visible=!1,this.$nextTick((()=>{this.$emit("hide",e)}))),this.timeout=setTimeout((()=>{n&&0!==$("div.x-tooltip-content:hover").length||(this.positionClass="",this.visible=!1,this.$nextTick((()=>{this.$emit("hide",e)})))}),Math.max(this.delay,0))},getDropdownPosition(e){const{target:t,position:n}=e,i=l[n],{dropdown:s}=this.$refs,a=t.getBoundingClientRect(),r=s.getBoundingClientRect();this.fixedParents=(0,o.nT)(t);const c=e.zIndex?e.zIndex:(0,o.N8)([t,...this.fixedParents])+1;this.zIndex=c;let d=a.left,u=a.top;if(0===this.fixedParents.length){const e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;d=a.left+t,u=a.top+e}let p=.5*(r.height+a.height),h=d-.5*(r.width-a.width),f=u+a.height-p,m=.5*i[0]*(r.width+a.width),g=i[1]*p;return this.pointer&&(m+=6*i[0],g+=6*i[1]),{left:Math.round(h+m)>0?Math.round(h+m):0,top:Math.round(f-g)}}}};a.default.directive("x-popover",(0,s.u)());const d=c;const u=(0,n(71938).A)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:e.transition}},[e.visible?n("div",{ref:"dropdown",class:e.className,style:e.style,attrs:{"data-popover":e.name},on:{click:function(e){e.stopPropagation()}}},[e._t("default")],2):e._e()])}),[],!1,null,null,null).exports},78297:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let i=n(85782);window.ace=i,n(6879),n(95741),n(76264),n(10094),n(21559);const o={name:"XAce",props:{mode:{type:String,default:"twig"},value:String,encode:{type:Boolean,default:!1},height:{type:Number,default:250}},data:()=>({editor:null}),watch:{value(e,t){let n=this.getCode();e!==t&&e!==n&&(this.encode&&(e=decodeURIComponentExtended(e)),this.editor.getSession().setValue(e))}},mounted(){let e=$(this.$refs.textarea),t=$("<div>",{position:"absolute",height:this.height,"data-testid":"ace-container",class:"col-lg-12 admin_config_modules_edit_form_code_editor"}).insertBefore(e);t.css({"min-width":"100%","font-size":"14px"}),this.editor=i.edit(t[0]),this.editor.$blockScrolling=1/0,this.editor.getSession().setMode(`ace/mode/${this.mode}`),this.editor.setTheme("ace/theme/github"),this.editor.getSession().on("change",(()=>{let t=this.getCode();e.val(t).change(),this.$emit("input",t)})),this.editor.getSession().setValue(decodeURIComponentExtended(e.val())),e.attr("is_ace","true")},methods:{getCode(){let e=this.editor.getSession().getValue();return this.encode&&(e=encodeURIComponent(e)),e},inputHandler(e){this.$emit("input",e.target.value)}}};const s=(0,n(71938).A)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",{ref:"textarea",staticStyle:{display:"none"},attrs:{"data-test-selector":"x-ace-component"},domProps:{value:e.value},on:{input:e.inputHandler}})}),[],!1,null,"0d3bafba",null).exports},85953:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const i={name:"XBootstrapSpinner",props:{type:{type:String,default:"primary"},size:{type:String,default:"md"}},computed:{classes(){return["b-spinner-loader",`text-${this.type}`,this.size]}}};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes},[n("span",{staticClass:"sr-only"},[e._v("Loading...")])])}),[],!1,null,"6a5e470a",null).exports},90766:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(6504),o=n(8974),s=n(56228),a=n(86871),r=n(3124),l=n(34013),c=n(47557),d=n(91448);const u="data-table-reload",p={name:"XDatatable",mixins:[s.A,a.A,r.A,l.A,c.A],props:{buttons:{type:Object},buttonView:{type:String,default:"dropdown"},onBg:{type:Boolean,default:!1}},mounted(){splynx_event_bus.on("clear-selection-data-table",this.handleFinishMassAction)},data:()=>({firstRun:!0,showMassProgress:!1,localStateColoredButton:!0,localTableTagOptions:{}}),watch:{massAction:{deep:!0,immediate:!0,handler(e){!1!==e&&null!==e&&(0,i.DQ)(e,"percent")&&parseInt(e.percent)>0&&(this.showMassProgress=!0)}},title(e){$(`#${this.computedWrapperId} .table_title`).html(e)},tableOptions(e){this.localTableTagOptions={...e}}},methods:{_initMassActionsLabels(){$(this.wrapperIdSelector).on("show.bs.dropdown",".dropdown",(()=>{let e={},{buttonsBehavior:t}=this,n=$(`#${this.id}`).DataTable().columns().checkboxes.selected()[this.targetCheckbox],i=n.length,{buttons:o}=this;for(let t in this.buttons)e[t]=i;n.forEach((t=>{let n=$(t).data("visible-actions");for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&Object.prototype.hasOwnProperty.call(o,t)&&!n[t]&&(e[t]-=1)}));for(let s in e){let a="";a=e[s]===n.length?`<label class="badge bg-success">${e[s]}</label>`:`<label class="badge bg-${0===e[s]?"danger":"warning"}">${e[s]}</label>`,$(this.wrapperIdSelector).find(`#${o[s].id}`).find(".count").html(` ${a}`),Object.prototype.hasOwnProperty.call(e,s)&&Object.prototype.hasOwnProperty.call(o,s)&&0==e[s]&&$(this.wrapperIdSelector).find(`#${o[s].id}`).attr("disabled","disabled").closest("li").addClass("disabled"),t[s]&&e[s]!==i&&$(this.wrapperIdSelector).find(`#${o[s].id}`).closest("li").hide()}})),$(this.wrapperIdSelector).on("hide.bs.dropdown",".dropdown",(()=>{$(this.wrapperIdSelector).find(".mass-action-buttons .dropdown-menu li").removeClass("disabled").find("a").removeAttr("disabled","disabled"),$(this.wrapperIdSelector).find(".mass-action-buttons .dropdown-menu li").show()})),$(window).resize((()=>{setTimeout((()=>{$(this.wrapperIdSelector).find(".dt-checkboxes-cell").attr("colspan","0")}),300)}))},_initHandlingMassButtonsEvents(){for(let e in this.buttons){let t=this.buttons[e];if(!(0,i.DQ)(t,"id")){console.error(`DT mass buttons: Id is required parameter for button: ${e}`);continue}let n=this;$(this.wrapperIdSelector).on("click",`#${t.id}`,(function(){if(!$(this).attr("disabled")){let o=$(`#${n.id}`).DataTable().columns().checkboxes.selected()[n.targetCheckbox].filter((t=>$(t).data("visible-actions")[e]));o.forEach(((e,t)=>{$(e).length>0&&(o[t]=$(e).text())})),o=JSON.stringify(window.numbersToRanges(o)),(0,i.DQ)(t,"handler")?t.handler(o):open_dialog_new(t.url,{ids:o})}}))}},getColumnDefsOptions(){if(this.checkbox&&Object.keys(this.buttons).length>0){let e=`datatable_checkbox_input_${(0,o.rand)(1,99999)}_`,t=`datatable_checkbox_all_input_${Date.now()}`,n=`<div class="form-check select-all-chk checkbox" id="${t}"><input type="checkbox" class="dt-checkboxes dt-header form-check-input" title="${this.$t("support","Select all")}" id="select-all-chk"><label title="${this.$t("support","Select all")}" for="select-all-chk"></label></div>`;this.columnDefs.push({targets:this.targetCheckbox,orderable:!1,render:(t,n,i,o)=>("display"===n&&(t=`<div class="form-check select-all-chk checkbox"><input type="checkbox" class="dt-checkboxes form-check-input" id="${e}_${o.row}_${o.col}"><label for="${e}_${o.row}_${o.col}"></label></div>`),t),checkboxes:{stateSave:!1,selectRow:!0,orderable:!1,searchable:!1,selectAllRender:n,selectCallback:e=>{let n=$(this.wrapperIdSelector).find(".mass-action-buttons").find("input, button"),i=e.columns().checkboxes.selected()[this.targetCheckbox].length,o=e.page.info().recordsTotal,s=$("body").find(`#${t}`).find("input");if(i>0){if($("body").find(`#${t}`).find("label, input").attr("title",this.$t("common","Unselect all")),n.each((function(){$(this).removeAttr("disabled")})),s.prop("indeterminate",!0),s.prop("indeterminate")&&s.prop("checked",!0),this.checkboxAlert){this.renderCheckboxAlert();let e="";e=o===i?this.$t("common","All"):`${i} ${this.$t("common","out of")} ${o}`,this.getAlertElement().find(".number").html(e)}}else $("body").find(`#${t}`).find("label, input").attr("title",this.$t("common","Select All")),n.each((function(){$(this).attr("disabled","disabled")})),this.checkboxAlert&&this.getAlertElement().find(".mass-actions-alert").remove()},...this.checkboxOptions}})}return this.computedColumnDefs},renderCheckboxAlert(){let e=`<button type="button" class="btn btn-outline-primary" onclick="window.activeDT.columns().checkboxes.deselectAll();">${this.$t("customers","Reset selection")}</button>`,t=this.$t("administration","%s rows are selected. Actions will be applied to selected rows. {button}",{button:e}),n=this.renderAlert(t.replace("%s",'<b class="number"></b>'));this.setAlertHtml(n)},renderAlert(e){let t=document.createElement("span");t.innerHTML=e;let n=document.createElement("div");return n.className="alert alert-info text-center mass-actions-alert",n.setAttribute("role","alert"),n.appendChild(t),n.outerHTML},getMassButtonsHtml(){let e="";for(let t in this.buttons){let n=this.buttons[t];if((0,i.DQ)(n,"text"))if((0,i.DQ)(n,"id")){if((0,i.DQ)(n,"show")||(n.show=!0),n.show)if(((0,i.DQ)(n,"options")?n.options:{})[u]=u,"dropdown"===this.buttonView){let t=document.createElement("li");t.className="dropdown-item";let i=document.createElement("span");i.className="count";let o=document.createElement("a");o.href="#",o.id=n.id,o.dataset.tableReload="1";let s=document.createDocumentFragment();s.textContent=n.text,s.appendChild(i),o.appendChild(s),t.appendChild(o),e+=t.outerHTML}else{let t=document.createElement("button");t.id=n.id,t.className="btn btn-default btn-sm",t.style="margin-right: 5px;",t.dataset.tableReload="1",e+=t.outerHTML}}else n.id="",console.error("ID is required parameter of dt button");else n.text="Unknown",console.error("Text is required parameter of dt button")}if(!e||""===e)return"";let t="";if("dropdown"===this.buttonView){let n=document.createElement("button");n.innerHTML=`${this.$t("administration","Actions")}`;let i=document.createElement("span");i.className="caret",n.appendChild(i),n.className="btn btn-outline-dark dropdown-toggle",n.setAttribute("data-bs-toggle","dropdown"),n.setAttribute("aria-expanded","1"),n.setAttribute("aria-haspopup","1");let o=document.createElement("div");o.className="dropdown",o.style="display: inline-block; margin-right: 5px;",o.appendChild(n);let s=document.createElement("ul");s.className="dropdown-menu",s.innerHTML=e,o.appendChild(s),t=o.outerHTML}else t=e;let n=document.createElement("div");return(0,i.DQ)(this.buttonWrapperOptions,"class")&&(n.className=this.buttonWrapperOptions.class),(0,i.DQ)(this.buttonWrapperOptions,"style")&&(n.style=this.buttonWrapperOptions.style),n.innerHTML=t,n.outerHTML},handleFinishMassAction(){this.showMassProgress=!1,$(this.$refs.table).DataTable().column(0).checkboxes.deselectAll(),$(this.$refs.table).DataTable().ajax.reload()}},components:{"x-datatable-progress":d.A}};const h=(0,n(71938).A)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"default-spaces table-on-bg bg-light p-16 pb-0":e.onBg}},[n("x-datatable-progress",{directives:[{name:"show",rawName:"v-show",value:e.showMassProgress,expression:"showMassProgress"}],attrs:{"initial-progress":e.massActionInfo.progress,"initial-message":e.massActionInfo.message},on:{progress:function(t){e.showMassProgress=!0},finish:e.handleFinishMassAction}}),e._t("dt-under-header"),n("table",e._b({ref:"table",staticClass:"display supertable table table-striped",attrs:{id:e.id}},"table",e.localTableTagOptions,!1),[n("thead",[n("tr",[e._l(e.headers,(function(t){return n("th",{key:t,domProps:{innerHTML:e._s(t)}})})),e.actionColumn?n("th",{staticClass:"actions_column"},[e._v(" "+e._s(e.titleOfActionColumn)+" ")]):e._e()],2)])])],2)}),[],!1,null,null,null).exports},91448:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={name:"XDatatableProgress",props:{initialMessage:{type:[String,Number],default:""},initialProgress:{type:Number,default:0}},data:()=>({message:"",progress:0}),created(){remove_socket_listener("leads_mass_action_event",this.progressHandler),add_socket_listener("leads_mass_action_event",this.progressHandler)},destroyed(){remove_socket_listener("leads_mass_action_event",this.progressHandler)},mounted(){this.progress=this.initialProgress,this.message=this.initialMessage},methods:{progressHandler(e){"finish"===e.type?(this.$emit("finish",e),e.result.warning.length>0&&show_warning(e.result.warning,5),e.result.errors.length>0&&show_error(e.result.errors,5)):"progress"===e.type&&(this.$emit("progress",e),this.progress=parseInt(e.progress),this.message=e.message)}}};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"leads-mass-action-progress-wrapper"},[n("div",{staticClass:"alert alert-warning",staticStyle:{"text-align":"center"}},[n("span",{staticClass:"leads-mass-action-message",domProps:{innerHTML:e._s(e.message)}}),n("div",{staticClass:"progress",staticStyle:{"margin-bottom":"0"},attrs:{id:""}},[n("div",{staticClass:"progress-bar progress-bar-striped progress-bar-success active",style:{width:e.progress+"%"},attrs:{role:"progressbar"}},[e._v(" "+e._s(e.progress+"%")+" ")])])])])}),[],!1,null,"27a99948",null).exports},81971:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8974);const o={name:"XForm",props:{url:String,method:{type:String,default:"POST"},disableConfirmation:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},preventDb:String,data:{type:[Object,FormData]},className:{type:String,default:""},attributesMeta:{type:Object},afAttributesMeta:{type:[Object,Array]},beforeSend:{type:Function},beforeSendAdditional:{type:Function},formDataSend:{type:Boolean,default:!1},checkUnsavedDataBeforeLeavePage:{type:Boolean,default:!0},notifyOnInvalid:{type:Boolean,default:!1},formatRequest:{type:Boolean,default:!1},formatExcludes:{type:Object,default:()=>({})}},data:()=>({dontSaveChangesState:!1,isProcessing:!1}),watch:{isProcessing(e){let t;t=empty(this.preventDb)?$(this.$el).find("button"):$(this.preventDb),empty(t)||0===t.length||(e?t.attr("disabled","disabled"):t.removeAttr("disabled"))}},mounted(){this.validateInputs(),setTimeout((()=>{this.validateInputs()}),1e3),this.checkUnsavedDataBeforeLeavePage&&(setTimeout((()=>{$(this.$refs.form).on("change","input:enabled:not([data-silent-input]),select:enabled:not([data-silent-input]),textarea:enabled:not([data-silent-input])",(()=>{if(this.dontSaveChangesState)return!1;$(this.$refs.form).attr("data-form-changed","1")}))}),4e3),$(this.$refs.form).on("submit",this.submitAfterEnter))},destroyed(){$(this.$refs.form).off("submit",this.submitAfterEnter)},methods:{submitAfterEnter(e){e.preventDefault(),this.submit()},submit(){if(!this.isProcessing)if(this.$emit("submit"),this.isProcessing=!0,this.$refs.form.reportValidity()){let e=this.getChangedValuesToSend();if("function"==typeof this.beforeSend&&(e=this.beforeSend(e),!1===e))return void(this.isProcessing=!1);let t=new FormData;if(null===e||"object"==typeof e&&0===Object.keys(e).length){let e=this.getOnlyClassName();t.append(`${e}[]`,"")}e instanceof FormData?t=e:this.objectToFormData(t,e,this.className),0===Array.from(t.entries()).length&&t.append(`${this.className}[]`,""),"function"==typeof this.beforeSendAdditional&&(t=this.beforeSendAdditional(t)),$.ajax({url:this.url,method:this.method,data:t,contentType:!1,processData:!1,success:t=>{void 0!==t.result&&!1===t.result||(this.changeDefaultValues(e),this.resetDataFormChanged()),this.$emit("success",t)},error:e=>{this.$emit("error",e)},complete:()=>{this.isProcessing=!1}})}else this.isProcessing=!1},getOnlyClassName(){return this.className.split("[")[0]},resetDataFormChanged(){$(this.$refs.form).removeAttr("data-form-changed")},changeDefaultValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.attributesMeta,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";void 0!==this.attributesMeta&&Object.entries(e).forEach((e=>{let[i,o]=e;-1!==i.indexOf("additional_attributes")?this.changeDefaultValues(o,this.afAttributesMeta,"value"):isset(t,i)&&(t[i][n]=this.prepareValueToSet(o,t[i]))}))},objectToFormData(e,t,n){if(null!=t){if(t instanceof Array&&empty(t)&&e.append(n,""),this.formatRequest){t=(0,i.formattedRequest)(t);for(let e in t)this.formatExcludes[e]&&(t[this.formatExcludes[e]]=t[e],t[e]=void 0)}if("object"!=typeof t||t instanceof Date||t instanceof File||Array.isArray(t))if(Array.isArray(t)){e.append(n,"");for(let i of t.keys())"object"==typeof t[i]?2===Object.keys(t[i]).length&&isset(t[i],"id")&&isset(t[i],"text")?e.append(`${n}[]`,t[i].id):this.objectToFormData(e,t[i],`${n}[${i}]`):e.append(`${n}[]`,t[i])}else e.append(n,t);else Object.keys(t).forEach((i=>{let o=n?`${n}[${i}]`:i;this.objectToFormData(e,t[i],o)}))}},validateInputs(){$(this.$refs.form).find("input,select,textarea").off("invalid",this.processInvalidInputs),$(this.$refs.form).find("input,select,textarea").on("invalid",this.processInvalidInputs),void 0!==window.splynx_event_bus&&(window.splynx_event_bus.off("invalid",this.processInvalidInputs),window.splynx_event_bus.on("invalid",this.processInvalidInputs))},processInvalidInputs(e){if(!$(this.$refs.form).get(0)?.contains(e.target))return;let t=$(e.target).closest(".form-group");t.length<=0&&(t=$(e.target).parent()),this.notifyOnInvalid&&setTimeout((()=>{const t=$(e.target).attr("data-message"),n=$(`.toaster-content > div:contains('${t}')`).length;t&&!n&&window.show_error($(e.target).attr("data-message"),4)}),50),t.addClass("has-error"),$(e.target).off("change",this.processChangeInvalidInput),$(e.target).on("change",this.processChangeInvalidInput)},processChangeInvalidInput(e){$(e.target).closest(".has-error").removeClass("has-error")},getChangedValuesToSend(){let e={};if(this.formDataSend)return this.data;for(let t in this.data){let n="additional_attributes",i=this.data[t];if(this.formatRequest&&(n="additionalAttributes"),-1!==t.indexOf(n)){e[t]={};for(let n in i){let o=this.afAttributesMeta[n],s=o.value,a=isset(o,"ajax")&&o.ajax,r=i[n];if(a)if(Array.isArray(r))if("relation_multiple"===o.type){let e=[];r.forEach((t=>{e.push(t.id)})),r=e}else{let e=r[0];r="object"==typeof e?e.id:e}else"object"==typeof r&&(r=r.id);this.valueIsChanged(r,s)&&(e[t][n]=this.prepareValueToSend(r,o))}continue}let o=this.attributesMeta[t];if(empty(o)){console.warn(`Empty attribute meta: ${t}`),e[t]=this.prepareValueToSend(i,null);continue}let s=o.default;o.forceSend?e[t]=this.prepareValueToSend(i,o):this.valueIsChanged(i,s)&&(e[t]=this.prepareValueToSend(i,o))}return e},valueIsChanged(e,t){return e instanceof Array?t instanceof Array?!this.arraysIsEqual(e,t):e.length>0:($.isNumeric(t)&&$.isNumeric(e),e!==t)},arraysIsEqual(e,t){if(e.length!==t.length)return!1;let n=t.map((e=>e.toString()));for(let t=0;t<e.length;t++)if(!n.includes(e[t].toString()))return!1;return!0},getTypeFromMeta:e=>isset(e,["rule","type"])?e.rule.type:isset(e,["type"])?e.type:null,prepareValueToSend(e,t){return"boolean"===this.getTypeFromMeta(t)?"0"!=e&&e?"1":"0":e},prepareValueToSet(e,t){return"boolean"===this.getTypeFromMeta(t)?e?1:0:e}}};const s=(0,n(71938).A)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("form",{ref:"form",attrs:{method:e.method,action:e.url,role:"form"}},[e._t("default")],2)}),[],!1,null,null,null).exports},8525:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(85953),o=n(8974),s=n(34477),a=n(54059);const r={name:"XModal",components:{XButton:s.A,XBootstrapSpinner:i.default},props:{name:String,loading:{type:Boolean,default:!1},width:{type:[Number,String],default:"auto"},height:{type:[Number,String],default:"auto"},buttons:{type:Array,default(){return[{text:this.$t("common","Close"),click:()=>{this.$modal.close(this.name)}}]}},closeByEsc:{type:Boolean,default:!0},buttonsContainerClass:{type:[Object,Array],default:()=>["vue-dialog-buttons"]},disabledScrollBody:{type:Boolean,default:!1},bodyContainerClass:String,showCloseButton:{type:Boolean,default:!0}},data:()=>({customCallback:()=>{},windowWidth:0,windowHeight:0,isClosingConfirmed:!1,confirmActionModalOpen:!1,debouncedResize:(0,o.debounce)((()=>{void 0!==window.activeDT&&window.activeDT.draw()}),500)}),computed:{...(0,a.L8)("sidebar",["sidebarState"]),bodyClasses(){return["vue-dialog-body",{"overflow-hidden":this.disabledScrollBody,[this.bodyContainerClass||""]:!!this.bodyContainerClass}]},computedHeight(){return this.loading?this.userCanResize?this.windowHeight<=this.height?this.normalizeHeight(this.height):this.height||100:this.windowHeight:this.normalizeHeight(this.height)},computedWidth(){return this.loading?this.userCanResize?this.windowWidth<=this.width?this.normalizeWidth(this.width):this.width||300:this.windowWidth:this.normalizeWidth(this.width)},topRightButtons(){return this.showCloseButton?[{options:{class:"modal-close-button",title:this.$t("common","Close")},click:()=>{this.$modals.close(this.name)},text:'<i class="icon-ic_fluent_dismiss_24_regular" />'}]:[]},needActionsWithConfirmModal(){return window.splynxDialogs.length>=1&&"confirm-action-modal"===this.name||this.sidebarState},userCanResize(){return this.windowWidth>768}},watch:{computedHeight(){this.applyResize()},computedWidth(){this.applyResize()},loading(e){this.$nextTick((()=>{e?this.$emit("start-loading"):(splynx_event_bus.emit("vue-modal-loaded",this.$refs.dialogBody),this.$emit("loaded"))}))}},beforeMount(){this.customCallback=window.getCustomCallback(this.name),this.closeByEsc&&window.addEventListener("keyup",this.onEscapeKeyUp),window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){this.closeByEsc&&window.removeEventListener("keyup",this.onEscapeKeyUp),window.removeEventListener("resize",this.onWindowResize),this.customCallback.closed(this)},created(){this.windowWidth=(0,o.getWindowWidth)(),this.windowHeight=(0,o.getWindowHeight)()},methods:{modalOpened(){this.customCallback.opened(this)},beforeOpenHandler(){$("body").addClass("modal-open")},checkDialogHasUnsavedData(){return checkUnsavedDataBeforeCloseDialog(this.$refs.modal.$el,(()=>{this.isClosingConfirmed=!0,this.$modals.dismiss(this.name)}))},beforeCloseHandler(e){if(this.loading||!this.isClosingConfirmed&&this.checkDialogHasUnsavedData())return e.cancel&&e.cancel(),!1;$("body").removeClass("modal-open"),this.$modals.remove(this.name),this.$emit("before-close",e)},applyResize(){this.$nextTick((()=>{this.$refs.modal.setInitialSize()}))},onEscapeKeyUp(e){if(27===e.which){if(this.needActionsWithConfirmModal)return this.confirmActionModalOpen?(this.confirmActionModalOpen=!1,this.$modals.close(this.name)):(this.confirmActionModalOpen=!0,this.$modal.show(this.name)),!0;this.beforeCloseHandler(e),this.$modals.dismiss(this.name)}},normalizeHeight(e){const t=this.userCanResize?this.windowHeight-20:this.windowHeight;return!this.userCanResize||e>t?t:e},normalizeWidth(e){const t=this.userCanResize?this.windowWidth-20:this.windowWidth;return!this.userCanResize||e>t?t:e},onWindowResize(){this.windowWidth=(0,o.getWindowWidth)(),this.windowHeight=(0,o.getWindowHeight)()},checkButtonIsXButtonComponent:e=>isset(e,["button"]),getPreparedAdditionalActionOptionsForXButtonComponent:e=>void 0===e.additionalActions?{}:e.additionalActions}};const l=(0,n(71938).A)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-modal",{ref:"modal",attrs:{name:e.name,resizable:e.userCanResize,adaptive:!1,draggable:".vue-dialog-content-title",scrollable:!1,reset:!0,classes:["x-modal"],width:e.computedWidth,height:e.computedHeight,"min-height":150,"min-width":300,"click-to-close":!1},on:{resize:e.debouncedResize,"before-open":e.beforeOpenHandler,"before-close":e.beforeCloseHandler,opened:e.modalOpened}},[n("div",{staticClass:"top-right-buttons"},[e._l(e.topRightButtons,(function(t,i){return[n("button",e._b({key:i,domProps:{innerHTML:e._s(t.text)},on:{click:function(e){return t.click()}}},"button",t.options,!1))]}))],2),e.loading?e._e():n("div",{staticClass:"vue-dialog-content"},[n("div",{staticClass:"vue-dialog-content-title"},[e._t("title"),e.$slots.subtitle?n("div",{staticClass:"vue-dialog-content-subtitle"},[e._t("subtitle")],2):e._e()],2),n("div",{ref:"dialogBody",class:e.bodyClasses},[e._t("content",(function(){return[e._v(" Modal content ")]}))],2),e._t("buttons",(function(){return[e.buttons.length>0?n("div",{class:e.buttonsContainerClass},[e._l(e.buttons,(function(t,i){return[e.checkButtonIsXButtonComponent(t)?n("x-button",{key:i,attrs:{button:t.button,"additional-actions":e.getPreparedAdditionalActionOptionsForXButtonComponent(t)}}):n("button",e._b({key:i,staticClass:"btn btn-primary",attrs:{type:"button"},domProps:{innerHTML:e._s(t.text)},on:{click:function(e){return t.click()}}},"button",t.options,!1))]}))],2):e._e()]}))],2),e.loading?n("div",{staticClass:"vue-dialog-content vue-modal-preloader"},[n("div",{staticClass:"vue-dialog-content-title"},[e._v(" "+e._s(e.$t("common","Loading..."))+" ")]),n("x-bootstrap-spinner",{attrs:{size:"lg"}})],1):e._e()])}),[],!1,null,null,null).exports},84781:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(50714);const o={name:"XPreloaderBlock",functional:!0,components:{XBootstrapSpinner:i.U},props:{loading:{type:Boolean,default:!1},size:{type:String,default:"lg"}},render(e,t){let{props:n,slots:o}=t;const s=o();return n.loading?e("div",{class:"spinner-wrapper"},[e(i.U,{props:{size:n.size}})]):"default"in s?s.default:s}};const s=(0,n(71938).A)(o,undefined,undefined,!1,null,null,null).exports},45684:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={name:"XTab",inject:["tabs"],props:{title:{type:String,default:""},icon:{type:String,default:""},id:String,className:String,route:{type:[String,Object]},component:{type:[Object,Function],default:null},componentProps:{type:Object,default:()=>({})},canOpen:{type:Boolean,default:!0},counter:{type:Object}},data:()=>({cacheTab:!1,active:!1}),computed:{tabId(){return this.id?this.id:this.title}},created(){this.tabs.cacheTabs&&(this.cacheTab=!0)},mounted(){this.tabs.addTab(this)},destroyed(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.tabs.removeTab(this)},methods:{refresh(){this.active=!1,this.$nextTick((()=>{this.active=!0}))}},render(e){return this.active||this.cacheTab?null!==this.component?e(this.component,{props:this.componentProps}):this.$slots.default:""}};const o=(0,n(71938).A)(i,undefined,undefined,!1,null,null,null).exports},19252:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={name:"XTabAjax",components:{XPreloaderBlock:n(84781).default},props:{url:String},data:()=>({loading:!0,html:""}),mounted(){this.loadContent()},computed:{classes(){const e=["d-flex","flex-column"];return this.$parent.cacheTab&&e.push(this.$parent.active?"x-tab-cache-visible":"x-tab-cache-hidden"),e},style:()=>({flex:1})},methods:{loadContent(){$.ajax({url:this.url,method:"GET",success:e=>{this.parseHtml(e)},error:()=>{this.html=`<div class="main-tab-holder ps-20 pe-20">${this.$t("common","Couldn't load!")}</div>`,this.loading=!1}})},parseHtml(e){let t=$("<div>");t.append(e);let n=$(t).find("title");n.length>0&&n.remove();let i=t.find("script");t.find("script").remove(),this.html=t.html(),this.loading=!1,this.$nextTick((()=>{i.each(((e,t)=>{$("body").append(t)})),splynx_event_bus.emit("x-tab-ajax-loaded"),this.initWidgets(),this.$emit("x-tab-ajax-loaded")}))},initWidgets(){makeSelect2(),makeMultileSelect(),makeDatepicker(),makeDecimalInput(),processPasswords(),processDT(),processCollapsedPanels(),processValidationgInputs(),initReportValidityBeforeSubmitForm(),addBeforeSubmitValidation(),makePopover()}}};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-preloader-block",{attrs:{loading:e.loading}},[n("div",{class:e.classes,style:e.style,domProps:{innerHTML:e._s(e.html)}})])}),[],!1,null,null,null).exports},99086:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(6504),o=n(8974),s=n(54059);const a="tabs_refresh",r="tabs_state",l="horizontal",c={name:"XTabs",provide(){return{tabs:this}},props:{direction:{type:String,default:l},value:[String,Number,Object],id:String,cacheTabs:{type:Boolean,default:!1},persistent:{type:Boolean,default:!0},mode:{type:String,default:"light"},activateTabByHash:{type:Boolean,default:!0},activateTabByStore:{type:Boolean,default:!0},withoutCheckUnsavedData:{type:Boolean,default:!1}},data:()=>({activeTabIndex:0,tabs:[],refreshTimer:null,dropdownState:!1,initialization:!1}),beforeCreate(){window.addEventListener("beforeunload",this.handleRefreshPage)},beforeDestroy(){window.removeEventListener("beforeunload",this.handleRefreshPage),window.removeEventListener("resize",this.handleWindowResize)},async created(){let e=await this.getInitialTab();if(null!==e&&this.activateTab(e),this.cacheTabs){const e=[];this.$nextTick((()=>{this.$refs.tablist.classList.add("tab-light-loading"),this.tabs.forEach((t=>{e.push(new Promise((e=>{this.waitForElement(t).then((n=>{t.active?(n.classList.remove("x-tab-cache-hidden"),n.classList.add("x-tab-cache-visible")):(n.classList.remove("x-tab-cache-visible"),n.classList.add("x-tab-cache-hidden")),e()}))})))}))})),Promise.all(e).then((0,o.debounce)((()=>{this.$refs.tablist.classList.remove("tab-light-loading")}),500))}},mounted(){$(window).resize(this.handleWindowResize),this.toggleTabFromStore(),this.activateTabByHash&&window.location.hash.substring(1)&&this.findTabAndActivate(window.location.hash.substring(1))},methods:{...(0,s.i0)("tabs_store",["clearTab"]),waitForElement:e=>new Promise((t=>{const n=()=>{setTimeout((()=>{8!==e.$el.nodeType?t(e.$el):n(e.$el)}),50)};8!==e.$el.nodeType?t(e.$el):n()})),reloadTab(){if(this.activeTabIndex<this.tabs.length&&this.activeTabIndex>=0){this.tabs[this.activeTabIndex].refresh()}},navigateToTab(e,t){this.withoutCheckUnsavedData?this.changeTab(this.activeTabIndex,e,t):checkUnsavedDataBeforeLeaveTab(this.$el,(()=>{this.changeTab(this.activeTabIndex,e,t)}))},activateTab(e){if(this.tabs.forEach((e=>{e.active=!1})),this.activeTabIndex=e,this.tabs.length>0){let t=this.tabs[e];t.active=!0,this.$emit("input",t.id)}},changeTab(e,t,n){let i=this.tabs[e]||{},o=this.tabs[t];if(!o.disabled){if(this.activeTabIndex=t,i.active=!1,o.active=!0,this.saveTabsState(t),t===e)return!1;this.cacheTabs&&this.waitForElement(o).then((e=>{e.classList.remove("x-tab-cache-hidden"),e.classList.add("x-tab-cache-visible"),i.$el.classList.remove("x-tab-cache-visible"),i.$el.classList.add("x-tab-cache-hidden")})),this.$emit("input",this.tabs[t].id),this.$emit("tab-change",t,o,i),splynx_event_bus.emit("x-tab-change",{id:this.id,newIndex:t,newTab:o,oldTab:i,newTabId:o.$options?.propsData.id,oldTabId:i.$options?.propsData.id}),this.tryChangeRoute(n)}},tryChangeRoute(e){this.$router&&e&&this.$router.push(e)},addTab(e){let t=this.$slots.default.indexOf(e.$vnode);-1===t&&(t=this.tabs.length),this.tabs.splice(t,0,e)},removeTab(e){const{tabs:t}=this,n=t.indexOf(e);n>-1&&t.splice(n,1)},getTabs(){return this.$slots.default?this.$slots.default.filter((e=>e.componentOptions)):[]},findTabAndActivate(e){let t=this.tabs.findIndex(((t,n)=>t.title===e||t.id===e||n===e));t!==this.activeTabIndex||this.tabs[this.activeTabIndex].active||(this.tabs[this.activeTabIndex].active=!0),-1!==t?this.changeTab(this.activeTabIndex,t):this.changeTab(this.activeTabIndex,0)},handleRefreshPage(){null!==this.refreshTimer&&clearTimeout(this.refreshTimer),this.setToStorage(a,"1")},async getInitialTab(){let e=this.getFromStorage(r);if(null!=e){e=JSON.parse(e);let t=this.getFromStorage(a);if(t="1"===t,(t||this.persistent)&&(0,i.DQ)(e,this.id)){if(await this.checkTab(e[this.id]))return e[this.id].index}this.clearTabsRefresh()}return this.initialization=!0,null},clearTabsRefresh(){null!==this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=setTimeout((()=>{this.setToStorage(a,"0")}),5e3)},saveTabsState(e){if(!this.persistent)return!1;let t=this.getFromStorage(r);t=null==t?{}:JSON.parse(t),t[this.id]={index:e,id:this.tabs[e].id},this.setToStorage(r,JSON.stringify(t))},setToStorage(e,t){localStorage.setItem(e,t)},getFromStorage:e=>localStorage.getItem(e),handleWindowResize(){this.$forceUpdate()},renderTabTitle(e,t){if(0===this.tabs.length)return;let n=this.tabs[t],{active:i,title:o}=n;return n.$slots.title?n.$slots.title:n.$scopedSlots.title?n.$scopedSlots.title({active:i,title:o}):o},renderTabs(e){let t=[],n=[];let i,s=800;(0,o.empty)(this.$parent.$el)||(i=this.$parent.$el.nodeType===Node.COMMENT_NODE?$(this.$parent.$el).parent():$(this.$parent.$el),s=i.width()-38);let a=!1,r=!1;return this.tabs.forEach(((i,o)=>{if(!i)return;let{route:c,className:d,title:u,tabId:p}=i,h=this.activeTabIndex===o;if(d=void 0!==d?d:"",!("billing-help"==d&&window.innerWidth<550)){if(this.direction===l&&s<100)return a=!0,h&&(r=!0),void n.push(e("a",{class:["dropdown-item",{active:h,"active-tab-item":h}],key:u,attrs:{name:"tab",id:`t-${p}`,"aria-selected":h,"aria-controls":`p-${p}`,role:"tab",href:this.getTabUrl(i)},on:{click:e=>{i.$emit("click",e),e.preventDefault(),this.navigateToTab(o,c)}}},[i.counter?.value?e("span",{class:"badge x-tab-counter "+(i.counter.color?`bg-${i.counter.color}`:"")},`${i.counter.value}`):null,e("a",{class:[{active_tab:h},"tabs__link"],attrs:{role:"tab",href:this.getTabUrl(i)}},[this.renderTabTitle(e,o)])]));s-=100,t.push(e("li",{name:"tab",class:["x-tab",{active:h,"active-tab-item":h},d],key:u,attrs:{id:`t-${p}`},"aria-selected":h,"aria-controls":`p-${p}`,role:"tab",on:{click:e=>{i.canOpen&&(i.$emit("click",e),e.preventDefault(),this.dropdownState=!1,this.navigateToTab(o,c))}}},[i.counter?.value?e("span",{class:"badge x-tab-counter "+(i.counter.color?`bg-${i.counter.color}`:"")},`${i.counter.value}`):null,e("a",{class:[{active_tab:h},"tabs__link"],role:"tab",attrs:{href:this.getTabUrl(i)}},[this.renderTabTitle(e,o)])]))}})),a&&t.push(e("li",{class:["x-tab","dropdown","x-tab-more",{active:r,"active-tab-item":r}],attrs:{tabindex:"1"},on:{click:()=>{this.dropdownState=!this.dropdownState},focusout:e=>{e.relatedTarget&&!e.relatedTarget.classList.contains("dropdown")||(this.dropdownState=!1)}}},[e("span",{class:"dropdown-toggle x-tab-dropdown",attrs:{id:"dropdownTabsButton","data-toggle":"dropdown","aria-expanded":!1,"aria-haspopup":!0,role:"button"}},"..."),e("div",{class:"dropdown-menu dropdown-menu-right dropdown-menu-tab",attrs:{"aria-labelledby":"dropdownTabsButton",tabIndex:"1"}},n)])),t},getTabUrl:e=>!!e.canOpen&&`${(0,o.empty)(e.$route.hash)?e.$route.fullPath:e.$route.fullPath.replace(e.$route.hash,"")}#${e.id}`,toggleTabFromStore(){!(0,o.empty)(this.activeTab)&&this.activateTabByStore&&this.findTabAndActivate(this.activeTab)},checkTab(e){return new Promise((t=>{this.$nextTick((()=>{const n=this.tabs.map(((e,t)=>({index:t,id:e.id}))).find((t=>t.id===e.id));n?n.index!==e.index?(this.activateTab(n.index),this.saveTabsState(n.index),t(!1)):t(!0):(this.activateTab(0),this.saveTabsState(0),t(!1))}))}))}},computed:{classList(){return["x-tabs-bar",`mode-${this.mode}`]},...(0,s.L8)("tabs_store",["activeTab"])},watch:{tabs(e){0!==e.length&&(this.value?this.findTabAndActivate(this.value):e.length<=this.activeTabIndex?(this.activateTab(0),this.saveTabsState(0)):this.initialization&&this.activateTab(this.activeTabIndex))},value(e){this.findTabAndActivate(e)},dropdownState(e){const t=$(`#${this.id} > .x-tabs-bar`).find(".x-tab-dropdown");e?t.dropdown("show"):t.dropdown("hide")},activeTab(){this.toggleTabFromStore()}},render(e){const t=this.renderTabs(e);return e("div",{class:["x-tabs",`x-tabs-${this.direction}`],attrs:{id:this.id}},[e("ul",{class:this.classList,role:"tablist"},t),e("div",{ref:"tablist",class:["x-tabs-item","x-tab-content"]},[this.$slots.default])])}};const d=(0,n(71938).A)(c,undefined,undefined,!1,null,null,null).exports},34477:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8974);const o={name:"XButton",props:{title:{type:String,default:()=>window.xApp.$splang.t("config","Actions")},button:{type:Object,default:()=>({})},additionalActions:{type:[Array,Object],default:()=>({})}},computed:{renderAdditionalActions(){return"object"==typeof this.additionalActions?!(0,i.emptyObject)(this.additionalActions):!(0,i.empty)(this.additionalActions)},mainButtonTitle(){return(0,i.emptyObject)(this.button)?this.title:void 0===this.button.title?void console.error("Missing required 'title' attribute for 'button' property"):this.button.title},mainButtonAttributes(){return this.button.options},mainButtonActions(){return this.button.events},dropdownOptions(){let e=this.button.dropdownButtonOptions;if(void 0!==e.class){let t=e.class;"string"==typeof t?(t+=" dropdown-toggle dropdown-toggle-split",this.splitButtons&&(t+=" btn-icon")):(t["dropdown-toggle"]=!0,t["dropdown-toggle-split"]=!0,this.splitButtons&&(t["btn-icon"]=!0)),e.class=t}else this.splitButtons&&(e.class="btn-icon");return e},buttonGroupClass(){let e=this.splitButtons?["btn-group"]:[];return(0,i.isset)(this.button.dropdownButtonOptions,["position"])&&("top"===this.button.dropdownButtonOptions.position?e.push("dropup"):"down"===this.button.dropdownButtonOptions.position&&e.push("dropdown")),e},splitButtons(){return!(0,i.isset)(this.button.dropdownButtonOptions,["splitButtons"])||this.button.dropdownButtonOptions.splitButtons},dropdownButtonTitle(){return this.splitButtons?"":(0,i.isset)(this.button.dropdownButtonOptions,["title"])?this.button.dropdownButtonOptions.title:window.xApp.$splang.t("config","Actions")}},methods:{renderAdditionalActionsClasses(e){let t={};if(e.options&&e.options.class)for(let n in e.options.class)Object.prototype.hasOwnProperty.call(e.options.class,n)&&(t[n]=e.options.class[n]);return t},getButtonBinds(e){let t={...e.options};return t&&void 0!==t.class&&delete t.class,t}}};const s=(0,n(71938).A)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.renderAdditionalActions?n("div",[n("div",{class:e.buttonGroupClass},[e.splitButtons?n("button",e._g(e._b({attrs:{type:"button"}},"button",e.mainButtonAttributes,!1),e.mainButtonActions),[e._v(" "+e._s(e.mainButtonTitle)+" ")]):e._e(),n("button",e._b({attrs:{type:"button","data-bs-toggle":"dropdown"}},"button",e.dropdownOptions,!1),[e._v(" "+e._s(e.dropdownButtonTitle)+" ")]),n("ul",{staticClass:"dropdown-menu",attrs:{"data-popper-placement":"bottom"}},e._l(e.additionalActions,(function(t,i){return n("li",{key:i,staticClass:"dropdown-item"},[n("a",e._g(e._b({class:e.renderAdditionalActionsClasses(t),attrs:{"data-test-selector":t.title,href:"javascript:void(0);"}},"a",e.getButtonBinds(t),!1),t.events),[e._v(" "+e._s(t.title)+" ")])])})),0)])]):n("button",e._g(e._b({},"button",e.mainButtonAttributes,!1),e.mainButtonActions),[e._v(" "+e._s(e.mainButtonTitle)+" ")])}),[],!1,null,null,null).exports},15407:(e,n,i)=>{"use strict";i.d(n,{A:()=>w});var o=i(13817);const s="integer",a="decimal",r="numeric",l="boolean",c="relation",d="relation_multiple",u="file",p="ipv6",h="selectRelation",f="multipleSelectRelation",m="text",g="number",v="addon_text_and_button",b="button",y={name:"XAdditionalFieldInput",components:{XComplexInput:o.D},props:{type:String,search:{type:Boolean,default:!1},params:Object,meta:{type:Object,default:()=>({})},value:{type:[String,Boolean,Array,Number,File,FileList,Object],default:""}},data(){return{inputType:this.type}},computed:{preparedParams(){let e={...this.params};switch((e.readonly||e.disabled)&&(e.options.disabled=!0),e.type){case"datetime":e.clearButton=!0,e.activeClearButton=!e.disabled;break;case l:this.search&&(e.default="",e.options.options={"":t("common","All"),no:t("common","No"),yes:t("common","Yes")},e.options["data-ignore-empty"]="1");break;case s:e.options["data-ignore-empty"]="1";break;case"ip":this.search&&(e.options["data-ignore-empty"]="1",e.options.placeholder=t("networking","Comma separated IPs "));break;case"select":this.prepareSelectParams(e);break;case c:this.prepareRelationParams(e,!1);break;case d:this.prepareRelationParams(e,!0);break;case p:this.search&&(e.options["data-ignore-empty"]="1",e.options.placeholder=t("networking","Comma separated IPs "));break;case a:e.default="",e.options["data-ignore-empty"]="1",e.options.class="decimal",e.options.step="0.000000001";break;case r:e.default="",e.options["data-ignore-empty"]="1"}return e},preparedInputType(){return this.inputType}},created(){let e={};e[c]=h,e.string=m,e.date="date",e[s]=g;let t={...this.params};if(t.type===d&&(isset(t,"ajax")&&t.ajax||t.options.options.length>100)?e[d]=h:e[d]=f,e.select_multiple="multipleSelect",e[a]=g,e[r]=m,e[l]="checkbox",e.password="password",e[u]="file","add-on"===this.type)switch(this.params.addon_input_type){case b:e["add-on"]="addon_button";break;case"text":e["add-on"]="addon_text";break;default:e["add-on"]=v}this.search&&(e[l]="select",e[d]=f,e[u]=m,e.ip=m,e[p]=m),isset(e,this.type)?this.inputType=e[this.type]:this.inputType=this.type},methods:{isset:(e,t)=>isset(e,t),inputHandler(e){this.$emit("input",e)},afIsRequired(){return!(!this.search||!this.filter.is_required)&&("add-on"===this.filter.type?this.filter.addon_input_type!==b:this.filter.type!==l)},prepareRelationParams(e,t){if(e.options["data-ignore-empty"]="1",empty(e.value)||e.disabled||(e.additionalBlock=!0),e.valueForAdditionalBlock=e.value,t&&(e.options.multiple="multiple"),isset(e,"ajax")&&e.ajax||e.options.options.length>100||this.search){if(e.isAsync=!0,e.tags=!0,e.fixResizeMultiple=!0,!empty(e.value)&&"object"!=typeof e.value&&isset(e,["options","options"]))this.$emit("input",{id:e.value,text:e.options.options[e.value]});else if(Array.isArray(e.value)&&isset(e,["options","options"])){let t=[];e.value.forEach((n=>{t.push({id:n,text:e.options.options[n]})})),this.$emit("input",t)}let t;if(this.search){let n=e.name.match(/^additional_attributes\[(.+)\]$/);t=null===n?e.name:n[1]}else t=e.name;let{module:n}=e;empty(e.category)||"lead"!=e.category||(n="leads"),e.config={ajax:{url:"/admin/relations--get-options",delay:250,data:e=>({module:n,attribute:t,query:e.term}),processResults:e=>({results:e.data}),cache:!0},minimumInputLength:1,placeholder:this.t("common","Choose option:")}}else t||e.is_required||(e.placeholder=this.t("common","Choose option:"),e.allowClear=!0)},prepareSelectParams(e){e.is_required||(e.placeholder=this.t("common","Choose option:"),e.allowClear=!0)}}};const w=(0,i(71938).A)(y,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("x-complex-input",{ref:"input",attrs:{type:e.preparedInputType,params:e.preparedParams,value:e.value,meta:e.meta},on:{input:e.inputHandler}})}),[],!1,null,null,null).exports},71556:(e,t,n)=>{"use strict";n.d(t,{xK:()=>ue,oi:()=>pe,tM:()=>le,L6:()=>ae,DA:()=>me,Ay:()=>ve});var i=n(8974);const o=n(2211).A;const s=n(74485).A;var a=n(66710);const r={name:"XInputDate",mixins:[a.A],props:{options:Object,datePickerConfig:{type:Object,default:()=>({})},clearButton:{type:Boolean,default:!0},value:String},data:()=>({disabled:!1,emptyValue:!0}),computed:{attributes(){let e={...this.options};return isset(e,"class")||(e.class=""),e.class=this.addClass(e.class,["form-control","input-sm","date-picker-single","input-date-range"]),isset(e,"name")&&delete e.name,e},nameForHidden(){return isset(this.options,"name")?this.options.name:""},valueForHidden(){return""===this.value?"":this.value},defaultValue(){let e="";return empty(this.value)||"0000-00-00"===this.value||(e=moment(this.value,"YYYY-MM-DD").format(date_format)),e}},watch:{value(e,t){e!=t&&(empty(e)?($(this.$refs.input).val(""),this.emptyValue=!1):($(this.$refs.input).val(moment(e,"YYYY-MM-DD").format(date_format)),this.emptyValue=!0))},options:{deep:!0,handler(e){isset(e,"disabled")&&(this.disabled=e.disabled)}}},mounted(){let e=this,t={drops:"auto"};$.extend(!0,t,daterangepicker_single_default_config,this.datePickerConfig),$(this.$refs.input).daterangepicker(t,(t=>{let n=$(e.$refs.input);n.val(t.format(date_format)),n.trigger("change")})),empty(this.defaultValue)&&(this.emptyValue=!1),$(this.$refs.input).on("apply.daterangepicker",((t,n)=>{e.$emit("input",n.startDate.format("YYYY-MM-DD"))})),[$(".vue-dialog-body"),$(window),$(".splynx-dialog-content")].forEach((e=>{$(e).on("scroll",(()=>{$(this.$refs.input).length&&window.matchMedia("(min-width: 768px)").matches&&($(this.$refs.input).blur(),$(this.$refs.input).data("daterangepicker")?.hide())}))})),"0000-00-00"===this.value&&this.clearAndEmit(),this.disabled=this.$refs.input.disabled},methods:{emitFocusout(){$(this.$refs.input).trigger("blur")},focusout(e){this.$emit("input",$(e.target).data("daterangepicker").startDate.format("YYYY-MM-DD"))},clearPicker(){this.clearButton&&this.emptyValue&&this.clearButton?this.clearAndEmit():$(this.$refs.input).trigger("click")},clearAndEmit(){$(this.$refs.input).val("").trigger("change"),this.$emit("input",""),this.emptyValue=!1}}};var l=n(71938);const c=(0,l.A)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group"},[n("input",e._b({ref:"input",attrs:{"data-test-selector":"input","data-test-value":e.defaultValue},domProps:{value:e.defaultValue},on:{focusout:e.focusout,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitFocusout.apply(null,arguments)}}},"input",e.attributes,!1)),n("input",{ref:"hiddenInput",attrs:{type:"hidden",name:e.nameForHidden,"data-test-selector":"hidden"},domProps:{value:e.valueForHidden}}),e.disabled?e._e():n("button",{ref:"button",staticClass:"btn btn-outline-secondary btn-icon admin_customers_billing_finance_items_tariff cursor-pointer",attrs:{type:"button"},on:{click:e.clearPicker}},[e.emptyValue&&e.clearButton?e._e():n("i",{staticClass:"icon-ic_fluent_calendar_ltr_24_regular"}),e.emptyValue&&e.clearButton?n("i",{staticClass:"icon-ic_fluent_dismiss_24_regular"}):e._e()])])}),[],!1,null,"d7856936",null).exports,d=c;const u={name:"XInputDateMonths",extends:c,mixins:[a.A],props:{monthsList:{type:Array,default:()=>[]}},data(){return{months:[],defaultMonths:[{title:`+1 ${this.$t("common","months")}`,number:1},{title:`+3 ${this.$t("common","months")}`,number:3},{title:`+6 ${this.$t("common","months")}`,number:6},{title:`+1 ${this.$t("common","year")}`,number:12}]}},created(){this.months=this.monthsList.length?this.monthsList:this.defaultMonths},methods:{addMonths(e){let t=this.value;t=empty(t)||"0000-00-00"===t?moment():moment(t,"YYYY-MM-DD");const n=t.add(e,"months"),i=n.format("YYYY-MM-DD");this.$refs.input.value=n.format(date_format),$(this.$refs.input).trigger("change"),this.$emit("input",i),this.emptyValue=!1}}};const p=(0,l.A)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"input-group"},[n("input",e._b({ref:"input",attrs:{"data-test-selector":"input","data-test-value":e.defaultValue},domProps:{value:e.defaultValue},on:{focusout:e.focusout,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitFocusout.apply(null,arguments)}}},"input",e.attributes,!1)),n("input",{ref:"hiddenInput",attrs:{type:"hidden",name:e.nameForHidden,"data-test-selector":"hidden"},domProps:{value:e.valueForHidden}}),e.disabled?e._e():n("button",{ref:"button",staticClass:"btn btn-outline-secondary btn-icon cursor-pointer",attrs:{type:"button"},on:{click:e.clearPicker}},[e.emptyValue&&e.clearButton?e._e():n("i",{staticClass:"icon-ic_fluent_calendar_ltr_24_regular"}),e.emptyValue&&e.clearButton?n("i",{staticClass:"icon-ic_fluent_dismiss_24_regular"}):e._e()])]),n("div",{staticClass:"mt-4"},e._l(e.months,(function(t,i){return n("a",{key:i,staticClass:"btn btn-link ms-0",class:{"me-16":i!==e.months.length-1},attrs:{href:"javascript:void(0)"},domProps:{innerHTML:e._s(t.title)},on:{click:function(n){return e.addMonths(t.number)}}})})),0)])}),[],!1,null,null,null).exports;var h=n(6139),f=n(55125),m=n(17071);const g={name:"XRelationInfo",components:{XPreloaderBlock:n(65470).A},props:{module:String,category:String,name:String,value:[String,Number,Array,Object]},data:()=>({nameModule:{},relationsInfo:{},loadingRelationsInfo:!0,style:""}),mounted(){this.processingNameModule()},beforeDestroy(){this.style=""},methods:{processingNameModule(){this.nameModule=this.module,empty(this.category)||"lead"!=this.category||(this.nameModule="leads")},showSelectedRelations(){0===Object.keys(this.relationsInfo).length&&(this.loadingRelationsInfo=!0,$.ajax({url:"/admin/relations--load-relation-info",dataType:"json",data:{module:this.nameModule,attribute:this.name,value:JSON.stringify(this.value)},success:e=>{this.relationsInfo=e},error(){},complete:()=>{this.loadingRelationsInfo=!1,this.style="z-index:20;"}})),this.loadingRelationsInfo=!1},listenEventInPopover(){this.clearStyle()},clearStyle(){this.style=""}}};m.default.directive("click-outside",{bind(e,t,n){e.clickOutsideEvent=function(i){e==i.target||e.contains(i.target)||n.context[t.expression](i)},document.body.addEventListener("click",e.clickOutsideEvent)},unbind(e){document.body.removeEventListener("click",e.clickOutsideEvent)}});const v=g;const b=(0,l.A)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clearStyle,expression:"clearStyle"},{name:"popover",rawName:"v-popover",value:{name:"relation-"+e._uid},expression:"{name: 'relation-' + _uid}"}],ref:"popoverButton",staticClass:"btn btn-outline-secondary btn-icon cursor-pointer button-fixed-popover sm-align-right",style:e.style,attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.showSelectedRelations.apply(null,arguments)}}},[n("i",{staticClass:"icon-ic_fluent_link_square_24_regular"}),n("popover",{attrs:{name:"relation-"+e._uid,transition:"none",width:250}},[n("x-preloader-block",{attrs:{loading:e.loadingRelationsInfo,size:"sm"}},[n("h6",{staticClass:"popover-header"},[e._v(" "+e._s(e.relationsInfo.title)+" ")]),n("div",{staticClass:"popover-body"},[n("ul",{staticClass:"popover-dropdown"},e._l(e.relationsInfo.links,(function(t,i){return n("li",{key:i,domProps:{innerHTML:e._s(t)},on:{click:e.listenEventInPopover}})})),0)])])],1)],1)}),[],!1,null,null,null).exports,y={name:"XMultipleSelectRelation",components:{XRelationInfo:b},extends:f.A,inheritAttrs:!1,props:{additionalBlock:{type:Boolean,default:!1},module:String,name:String,category:String}};const w=(0,l.A)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-wrap"},[n("select",e._b({ref:"input"},"select",e.attributes,!1),[e.withGroups?e._l(e.selectData,(function(t,i){return n("optgroup",{key:i,attrs:{label:t.label}},e._l(t.children,(function(t,i){return n("option",{key:i,domProps:{value:t.value,innerHTML:e._s(t.text)}})})),0)})):e._l(e.selectData,(function(t,i){return n("option",{key:i,domProps:{value:t.value,innerHTML:e._s(t.text)}})}))],2)]),e.additionalBlock?n("x-relation-info",{attrs:{module:e.module,category:e.category,name:e.name,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):e._e()],1)}),[],!1,null,null,null).exports;var _=n(26332);const T=n(8086).A;const E={name:"XPasswordWindow",props:{disabled:{type:Boolean,default:!0},path:{type:String,required:!0}},methods:{handleClick(){open_password_window(this.path)}}};const S=(0,l.A)(E,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"btn btn-outline-primary btn-password",attrs:{type:"button"},domProps:{innerHTML:e._s(e.t("common","Show"))},on:{click:e.handleClick}})}),[],!1,null,null,null).exports;var A=n(49454);const C={name:"XSelectRelation",components:{XRelationInfo:b},extends:A.A,inheritAttrs:!1,props:{valueForAdditionalBlock:[String,Number,Array,Object],additionalBlock:{type:Boolean,default:!1},module:String,category:String,is_af:Boolean},computed:{relationSelectClasses(){return{"input-wrap":!0,"additional-relation-multiple":this.is_af}}}};const k=(0,l.A)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-md-12"},[n("div",{class:{"input-group":e.additionalBlock}},[n("div",{class:e.relationSelectClasses},[n("select",e._b({ref:"input"},"select",e.attributes,!1))]),e.additionalBlock?n("x-relation-info",{attrs:{module:e.module,category:e.category,name:e.name,value:e.valueForAdditionalBlock},on:{input:function(t){return e.$emit("input",t)}}}):e._e()],1)])}),[],!1,null,null,null).exports;const x={name:"XSelectMultipleTags",extends:A.A,inheritAttrs:!1,props:{arrow:{type:Boolean,default:!1}},computed:{attributes(){let e={...this.$attrs,...this.options};return delete e.options,(0,i.isset)(e,"class")?e.class+=" select2":e.class="select2",e.multiple="multiple",e}},methods:{reInit(){let e=$(this.$refs.input),t=null;e.data("select2")&&(e.select2("destroy"),e.find("option,optgroup").remove());let n={};if(this.isAsync){let e=this.getDefaultAsyncConfig();$.extend(!0,n,e,this.config),"string"==typeof n.ajax.data&&(n.ajax.data=Function("params",n.ajax.data)),"string"==typeof n.ajax.processResults&&(n.ajax.processResults=Function("data",n.ajax.processResults))}else n={data:this.getPreparedOptions(),tags:this.tags,allowClear:this.allowClear,placeholder:this.options.disabled?"":this.options.placeholder,arrow:this.arrow},$.extend(!0,n,this.config);let o=null;(0,i.isset)(this,["options","tagsForRender"])&&(o=this.options.tagsForRender);n.templateResult=function(e){if(!e)return;if(!e.id)return e.text;let t=null,n=null;o&&o[e.id]&&(t=o[e.id].color,n=o[e.id].textColor);let i=$(`<label>${e.text}</label>`);return i.addClass("badge"),t?(i.css("background-color",t),i.css("color",n)):i.addClass("badge-success"),i},n.templateSelection=function(e,t){if(!e)return;if(!e.id)return e.text;let n=null,i=null;return o&&o[e.id]&&(n=o[e.id].color,i=o[e.id].textColor),n&&($(t).css("background-color",n),$(t).css("color",i),$(t).css("border","none")),e.text},t=e.select2(n),e.data("select2").$container.addClass("multiple-tags"),e.data("select2").$dropdown.addClass("multiple-tags-dropdown"),t.val(this.value).trigger("change"),t.change(this.inputHandler),this.fixResizeMultiple&&t.data("select2").on("results:message",(function(){this.dropdown._resizeDropdown(),this.dropdown._positionDropdown()})),t.on("select2:open",this.onOpenSelect),this.options.disabledSelect&&(e.data("select2").selection.$selection.addClass("disabled-select"),t.on("select2:opening",(t=>{e.data("select2").selection.$search.prop("disabled",1),t.preventDefault()})))}}};const I=(0,l.A)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-wrap"},[n("select",e._b({ref:"input"},"select",e.attributes,!1))])}),[],!1,null,null,null).exports;var O=n(15626),L=n(32410);const R=n(52295).A;var N=n(35674),D=n(45164);const M={name:"XAddonButton",props:{value:String,options:Object,action:{type:String,default:"modal"},buttonUrl:String,hiddenInput:Boolean,error:String},methods:{empty:i.empty,handleClick(){(0,i.empty)(this.buttonUrl)||("redirect"===this.action&&(window.location.href=this.buttonUrl),"modal"===this.action&&window.open_addon_dialog(this.buttonUrl))}}};const P=(0,l.A)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.empty(e.error)?n("div",[e.hiddenInput?n("input",e._b({attrs:{type:"hidden"},domProps:{value:e.value}},"input",e.options,!1)):e._e(),n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.options.disabled},on:{click:function(t){return t.preventDefault(),e.handleClick.apply(null,arguments)}}},[e._v(" "+e._s(e.value?e.value:e.$t("config","View / Set"))+" ")])]):n("span",{staticClass:"label label-danger"},[e._v(e._s(e.error))])}),[],!1,null,"1ff54271",null).exports;const F={name:"XAddonText",props:{attribute:String,options:Object,value:[String,Number],error:String,is_af:Boolean},mounted(){splynx_event_bus.on(`set-af-from-addon-modal-${this.attribute}`,this.handleSetInputValue)},methods:{empty:i.empty,handleInput(e){this.$emit("input",e.target.value)},handleFocusout(e){this.$emit("focusout",e)},handleSetInputValue(e){e.is_af==this.is_af&&this.$emit("input",e.value)}}};const B=(0,l.A)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.empty(e.error)?n("input",e._b({staticClass:"form-control input-sm",attrs:{type:"text"},domProps:{value:e.value},on:{focusout:e.handleFocusout,input:e.handleInput}},"input",e.options,!1)):n("span",{staticClass:"label label-danger"},[e._v(e._s(e.error))])}),[],!1,null,null,null).exports;const H={name:"XAddonTextAndButton",props:{attribute:String,options:{type:Object},value:[String,Number],buttonUrl:String,error:String,is_af:Boolean},mounted(){splynx_event_bus.on(`set-af-from-addon-modal-${this.attribute}`,this.handleSetInputValue)},methods:{empty:i.empty,openModal(){(0,i.empty)(this.buttonUrl)||window.open_addon_dialog(this.buttonUrl)},handleInput(e){this.$emit("input",e.target.value)},handleSetInputValue(e){e.is_af==this.is_af&&this.$emit("input",e.value)}}};const j=(0,l.A)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.empty(e.error)?n("div",{staticClass:"input-group"},[n("input",e._b({staticClass:"form-control input-sm",attrs:{type:"text"},domProps:{value:e.value},on:{input:e.handleInput}},"input",e.options,!1)),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:e.openModal}},[e._v(" "+e._s(e.$t("common","View / Set"))+" ")])]):n("span",{staticClass:"label label-danger"},[e._v(e._s(e.error))])}),[],!1,null,null,null).exports;const U={name:"XInputIp",props:{options:Object,networks:Array,module:String,attribute:String,id:[String,Number],value:[String,Array]},data:()=>({popoverId:"",ipv4Id:null}),watch:{value(e){let t=!1;if(Array.isArray(e)){let n=[];e.forEach((e=>{n.push(e.id)}));let i=$(this.$refs.select).val();t=!Array.isArray(i)&&i!=n.join(",")||Array.isArray(i)&&n.join(",")!==i.join(",")}else t=e!=$(this.$refs.select).val();null===e&&(e=""),t&&(Array.isArray(e)?e.forEach((e=>{$(this.$refs.select).select2("trigger","select",{data:e})})):"object"==typeof e&&null!==e?$(this.$refs.select).select2("trigger","select",{data:e}):$(this.$refs.select).val(e).trigger("change"))}},created(){this.popoverId=`x_input_ip_popover_content_${Math.round(999999*Math.random())}`},beforeDestroy(){let e=$(this.$refs.select);e.data("select2")&&e.select2("destroy")},mounted(){$(this.$refs.popoverButton).webuiPopover({title:this.t("networking","Select IPv4 network"),placement:"right",width:350,height:150,url:`#${this.popoverId}`}),this.initSelect()},methods:{handleNetworkClick(e){this.addItem(e)},addItem(e,t,n){$.ajax({url:"/admin/relations--get-first-unused",dataType:"json",data:{ip:e,skip:t,ipv4Id:n},success:t=>{t.id&&(this.ipv4Id=t.id);let n=$(this.$refs.select).val();if(!(n&&-1!=n.indexOf(t.ip)||this.checkAllSelectedIp(t.ip)))return this.processSelect(t.ip),!0;this.addItem(e,!0,this.ipv4Id)}})},checkAllSelectedIp(e){let t=!1;return $(".ip_input_block").each((function(){$(this).find(".select2-hidden-accessible").val()&&"-1"!=$(this).find(".select2-hidden-accessible").val().indexOf(e)&&(t=!0)})),t},processSelect(e){$.ajax({url:"/admin/relations--get-ip",dataType:"json",data:{module:this.module,attribute:this.attribute,id:this.id},success:t=>{let n=$.map(t.results,(e=>({text:e.text,disabled:e.disabled,children:$.map(e.children,(e=>({id:e.id,text:e.text,disabled:e.disabled})))}))),i=$(this.$refs.select).val();i?i.push(e):i=e,$(this.$refs.select).html("").select2({data:n}),$(this.$refs.select).val(i).trigger("change"),$(this.$refs.popoverButton).webuiPopover("hide"),$(this.$refs.select).next().children(".selection").children(".select2-selection").css("border-radius","0px 3px 3px 0px")}})},initSelect(){$(this.$refs.popoverButton).webuiPopover("hide");let e=$(this.$refs.select);e.data("select2")&&(e.select2("destroy"),e.find("option,optgroup").remove());let t=$(this.$refs.select).select2({multiple:!0,tokenSeparators:[" "],ajax:{url:"/admin/relations--get-ip",dataType:"json",delay:250,data:e=>({module:this.module,attribute:this.attribute,id:this.id,query:e.term}),processResults:e=>({results:$.map(e.results,(e=>({text:e.text,disabled:e.disabled,children:$.map(e.children,(e=>({id:e.id,text:e.text,disabled:e.disabled})))})))}),cache:!0},minimumInputLength:0});t.val(this.value).trigger("change"),t.change(this.inputHandler),t.data("select2").on("open",this.setFocusToSearchInput),$(this.$refs.select).next().children(".selection").children(".select2-selection").css("border-radius","0px 3px 3px 0px")},setFocusToSearchInput(){setTimeout((()=>{let e=$(".select2-container--open .select2-search__field");e.length&&e.get(0).focus()}),100)},inputHandler(e){let t;if(t=$(e.target).select2("data"),t.length<1)t=e.target.value;else{let e=[];t.forEach((t=>{e.push({id:t.id,text:t.text})})),t=e}this.$emit("input",t),this.$emit("change",t)}}};const W=(0,l.A)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group ip_input_block"},[n("span",{ref:"popoverButton",staticClass:"input-group-text btn-icon",attrs:{title:e.t("common","Get IPv4")}},[n("i",{staticClass:"icon-ic_fluent_search_24_regular"})]),n("div",{staticClass:"webui-popover-content",attrs:{id:e.popoverId}},[n("div",{staticClass:"popover-content"},[n("div",{staticClass:"mb-16"},[e._v(" "+e._s(e.t("networking","First free IP will be used"))+" ")]),e._l(e.networks,(function(t,i){return n("div",{key:i,staticClass:"network-wrap"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return n.preventDefault(),e.handleNetworkClick(t.id)}}},[e._v(e._s(t.text)+" - "+e._s(t.title))])])}))],2)]),n("div",{staticClass:"input-wrap",attrs:{multiple:""}},[n("select",e._b({ref:"select"},"select",e.options,!1))])])}),[],!1,null,"25770eaa",null).exports;const K={name:"XInputIpV6",props:{options:Object,networks:Array,module:String,attribute:String,id:[String,Number],value:[String,Array]},data:()=>({popoverId:"",ipv6Id:null,prefixes:[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64],selectedPrefix:64,networkIps:{}}),watch:{selectedPrefix(){this.networkIps={}},value(e){let t=!1;if(Array.isArray(e)){let n=[];e.forEach((e=>{n.push(e.id)}));let i=$(this.$refs.select).val();t=!Array.isArray(i)&&i!=n.join(",")||Array.isArray(i)&&n.join(",")!==i.join(",")}else t=e!=$(this.$refs.select).val();null===e&&(e=""),t&&(Array.isArray(e)?e.forEach((e=>{$(this.$refs.select).select2("trigger","select",{data:e})})):"object"==typeof e&&null!==e?$(this.$refs.select).select2("trigger","select",{data:e}):$(this.$refs.select).val(e).trigger("change"))}},created(){this.popoverId=`x_input_ipv6_popover_content_${Math.round(999999*Math.random())}`},beforeDestroy(){let e=$(this.$refs.select);e.data("select2")&&e.select2("destroy");let t=$(this.$refs.prefixSelect);t.data("select2")&&t.select2("destroy")},mounted(){$(this.$refs.popoverButton).webuiPopover({title:this.t("networking","Select IPv6 network"),placement:"right",width:350,height:250,url:`#${this.popoverId}`,onShow:()=>{let e=$(this.$refs.prefixSelect);e.closest(".webui-popover").css("z-index","200"),e.select2({minimumResultsForSearch:-1,width:"100px"}),e.on("select2:select",(()=>{this.selectedPrefix=e.val()}))}}),this.initSelect()},methods:{isset:i.isset,insertNetwork(e){let{network:t,prefix:n}=e,i=`${t}/${n}`;if(this.checkAllSelectedIpV6(i))return;let o=new Option(i,i,!0,!0);$(this.$refs.select).append(o).trigger("change"),$(this.$refs.popoverButton).webuiPopover("hide")},checkAllSelectedIpV6(e){let t=!1;return $(".ipv6_input_block").each((function(){$(this).find(".select2-hidden-accessible").val()&&"-1"!=$(this).find(".select2-hidden-accessible").val().indexOf(e)&&(t=!0)})),t},initSelect(){let e=$(this.$refs.select);e.data("select2")&&(e.select2("destroy"),e.find("option,optgroup").remove());let t=$(this.$refs.select).select2({multiple:!0,tokenSeparators:[" "],ajax:{url:"/admin/relations--get-ip-v6",dataType:"json",delay:250,data:e=>({module:this.module,attribute:this.attribute,id:this.id,query:e.term}),processResults:e=>({results:$.map(e.results,(e=>({text:e.text,disabled:e.disabled,children:$.map(e.children,(e=>({id:e.id,text:e.text,disabled:e.disabled})))})))}),cache:!0},minimumInputLength:0});t.val(this.value).trigger("change"),t.change(this.inputHandler),t.data("select2").on("open",this.setFocusToSearchInput),$(this.$refs.select).next().children(".selection").children(".select2-selection").css("border-radius","0px 3px 3px 0px")},setFocusToSearchInput(){setTimeout((()=>{let e=$(".select2-container--open .select2-search__field");e.length&&e.get(0).focus()}),100)},inputHandler(e){let t;if(t=$(e.target).select2("data"),t.length<1)t=e.target.value;else{let e=[];t.forEach((t=>{e.push({id:t.id,text:t.text})})),t=e}this.$emit("input",t),this.$emit("change",t)},loadNextNetworks(e){let t=this.networkIps[e].networks[this.networkIps[e].networks.length-1];this.loadNetworkList(e,t.network)},loadNetworkList(e,t){if((0,i.isset)(this.networkIps,[e,"networks"])&&this.networkIps[e].networks.length>0&&empty(t))return;let n={network_id:e,prefix:this.selectedPrefix,selector:""};void 0!==t&&""!==t&&(n.from=t),$.ajax({url:"/admin/relations--load-ipv6-networks",data:n,success:t=>{(0,i.isset)(this.networkIps,e)||(this.networkIps[e]={}),(0,i.isset)(t,"error")&&(this.networkIps[e].error=t.error),(0,i.isset)(t,"showNext")&&(this.networkIps[e].showNext=t.showNext),(0,i.isset)(t,"networks")&&((0,i.isset)(this.networkIps,[e,"networks"])?t.networks.forEach((t=>{this.networkIps[e].networks.push(t)})):this.networkIps[e].networks=t.networks),this.$nextTick((()=>{this.$forceUpdate()}))}})},isShowNetworksList(e){return(0,i.isset)(this.networkIps,[e,"networks"])&&this.networkIps[e].networks.length>0},isShowNetworkError(e){return(0,i.isset)(this.networkIps,[e,"error"])&&!empty(this.networkIps[e].error)}}};const G=(0,l.A)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group ipv6_input_block"},[n("span",{ref:"popoverButton",staticClass:"input-group-text btn-icon",attrs:{title:e.t("networking","Get IPv6")}},[n("i",{staticClass:"icon-ic_fluent_search_24_regular"})]),n("div",{staticClass:"webui-popover-content",attrs:{id:e.popoverId}},[n("div",{staticClass:"popover-content"},[e._v(" "+e._s(e.t("networking","Prefix"))+": "),n("div",{staticClass:"mb-16"},[n("select",{ref:"prefixSelect",staticClass:"select2"},e._l(e.prefixes,(function(t,i){return n("option",{key:i,domProps:{value:t,selected:64===t}},[e._v(" /"+e._s(t)+" ")])})),0)]),e._l(e.networks,(function(t,i){return n("div",{key:i,staticClass:"network-wrap"},[n("a",{on:{click:function(n){return n.preventDefault(),e.loadNetworkList(t.id)}}},[e._v(e._s(t.key)+" - "+e._s(t.title))]),n("div",{staticClass:"network-ips-list",attrs:{"data-id":t.id}},[e.isShowNetworksList(t.id)?n("ul",[e._l(e.networkIps[t.id].networks,(function(t,i){return[e.isset(t,"first")&&t.first?n("br",{key:i}):e._e(),n("li",{key:i},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(n){return n.preventDefault(),e.insertNetwork(t)}}},[e._v(e._s(t.network)+"/"+e._s(t.prefix))])])]})),n("a",{directives:[{name:"show",rawName:"v-show",value:e.isset(e.networkIps[t.id],"showNext")&&e.networkIps[t.id].showNext,expression:"isset(networkIps[item.id], 'showNext') && networkIps[item.id].showNext"}],attrs:{href:"javascript:void(0)"},on:{click:function(n){return n.preventDefault(),e.loadNextNetworks(t.id)}}},[e._v(" "+e._s(e.t("networking","Load next"))+" ")])],2):e._e(),e.isShowNetworkError(t.id)?n("div",{staticClass:"alert alert-warning",attrs:{role:"alert"},domProps:{innerHTML:e._s(e.networkIps[t.id].error)}}):e._e()])])}))],2)]),n("div",{staticClass:"input-wrap",attrs:{multiple:""}},[n("select",e._b({ref:"select"},"select",e.options,!1))])])}),[],!1,null,"0ce3b37c",null).exports,V={name:"XEmailInput",components:{XTextField:O.A},mixins:[a.A],props:{value:[String,Number],options:Object,type:{type:String,default:"email"},linkAddon:{type:String,default:""}},computed:{valueString(){if(null==this.value)return"";let e=$.map(this.value.split(","),$.trim),t=[],n=this;return $.each(e,((e,i)=>{if(""===i)return;let{linkAddon:o}=n;o&&(o=$(o).attr("data-value",i).addClass("link-addon").get(0).outerHTML);let s=$("<a/>").attr("href",`${n.prefixForHref}:${i}`).attr("title",n.linkTitle).text(i).get(0).outerHTML,a=$("<span />").append(o).append(s).get(0).outerHTML;t.push($("<li/>",{class:"popover-dropdown-item"}).append(a).get(0).outerHTML)})),`<ul class="popover-dropdown">${t.join("")}</ul>`},prefixForHref(){return this.isEmail()?"mailto":"tel"},linkTitle(){return this.isEmail()?window.xApp.$splang.t("common","Open in mail app"):""},popoverTitle(){return this.isEmail()?window.xApp.$splang.t("common","Emails"):window.xApp.$splang.t("common","Phones")},iconClass(){return this.isEmail()?"icon-ic_fluent_mail_24_regular":"icon-ic_fluent_call_24_regular"},popoverButtonId(){return`${this.options.name.replace("[","_").replace("]","_")}popover`}},watch:{value(){this.initPopover()}},mounted(){$(document).on("switch_page",(function(){$(`#${this.popoverButtonId}`).webuiPopover("hide")})),this.initPopover()},methods:{initPopover(){let e=$(`#${this.popoverButtonId}`);if(e.webuiPopover("destroy"),this.valueString){let t=e.parent().parent().get(0);e.attr("style","cursor: pointer;").attr("title",this.popoverTitle).webuiPopover({title:this.popoverTitle,container:t,content:this.valueString,cache:!1,placement:"left"})}else e.attr("style","cursor: unset;").attr("title","")},isEmail(){return"email"===this.type||"text"===this.type}},render(e){let t=this,n={id:this.popoverButtonId,class:this.iconClass,options:{class:"btn btn-outline-secondary btn-icon",style:"cursor: unset;"}};return e("XTextField",{props:{value:this.value,options:this.options,button:n},ref:"input",on:{input:e=>{t.$emit("input",e)}}})}};const z=(0,l.A)(V,undefined,undefined,!1,null,null,null).exports;var q=n(32908),Y=n(55690);const X=()=>{const e="cannedPlaceholders.popup";let t=null;$.FroalaEditor.PLUGINS.cannedPlaceholders=function(n){return $.FroalaEditor.POPUP_TEMPLATES[e]||($.FroalaEditor.POPUP_TEMPLATES[e]="[_BUTTONS_][_CUSTOM_LAYER_]"),{showPopup:function(){let i=n.popups.get(e);i||(i=function(){const t={buttons:"",custom_layer:`<div id="placeholders_content"><div class="card-body">${window.t("common","Loading...")}</div></div>`};return n.popups.create(e,t)}()),n.popups.setContainer(e,n.$tb);const o=n.$tb.find('.fr-command[data-cmd="cannedPlaceholders"]');if(0===o.length)return;const s=o.offset().top+(n.opts.toolbarBottom?10:o.outerHeight()-10);n.popups.show(e,100,s,o.outerHeight()),t||$.ajax({url:"/admin/tickets--ticket-placeholders",success(e){t=e,$("#placeholders_content .card-body").html(t),$("#placeholders_content").off("click").on("click",".placeholder",(function(){const e=$(this).data("placeholder");n.html.insert(`{{ ${e} }}`),n.events.trigger("contentChanged")}))},error(){$("#placeholders_content .card-body").html(`<p>${window.t("common","Error loading placeholders")}</p>`)}}),n.popups.onHide(e,(()=>{window.closeSelects()})),$(document).off("click.cannedPlaceholders").on("click.cannedPlaceholders",(t=>{i===t.target||i.has(t.target).length||n.popups.hide(e)}))},hidePopup:function(){n.popups.hide(e)}}},$.FroalaEditor.DefineIcon("cannedPlaceholders",{NAME:"{ }",template:"text"}),$.FroalaEditor.RegisterCommand("cannedPlaceholders",{title:window.t("common","Placeholders"),icon:"cannedPlaceholders",focus:!0,undo:!1,refreshAfterCallback:!0,popup:!0,callback(){this.popups.isVisible(e)?this.cannedPlaceholders.hidePopup():this.cannedPlaceholders.showPopup()}})},Q=["bold","italic","underline","|","formatOL","formatUL","insertLink","|","color","insertTable","|","insertImage","clearFormatting","html","codeSnippet"],Z={name:"XFroala",props:{value:{type:String},licenseKey:{type:String,default:"bTYPASIBGMWC1YLMP=="},name:{type:String},id:{type:String},required:{type:Boolean},classes:{type:String,default:"form-control input-sm"},styles:{type:String,default:"width: 100%; display: none;"},iframe:{type:Boolean,default:!1},language:{type:String,default:"en"},enter:{type:Number,default:()=>window.$.FroalaEditor.ENTER_DIV},useClasses:{type:Boolean,default:!0},initOnClick:{type:Boolean,default:!1},placeholderText:{type:String,default(){return this.$t("common","Start typing something...")}},zIndex:{type:Number,default:19},theme:{type:String,default:"gray"},charCounterMax:{type:Number,default:0},pastePlain:{type:Boolean,default:!1},heightMin:{type:Number,default:150},heightMax:{type:Number,default:1e3},htmlExecuteScripts:{type:Boolean,default:!1},toolbarButtons:{type:Array,default:()=>Q},toolbarButtonsMD:{type:Array,default:()=>[]},toolbarButtonsSM:{type:Array,default:()=>[]},toolbarButtonsXS:{type:Array,default:()=>[]},toolbarSticky:{type:Boolean,default:!1},toolbarStickyOffset:{type:Number,default:0},enableSupportImages:{type:Boolean,default:!1},prefixUploadUrl:{type:String,default:"admin"},csrfToken:{type:String,default:()=>$("head").find('meta[name="csrf-token"]').attr("content")},mentions:{type:Boolean,default:!1},cannedResponsesType:{type:String,default:q.Br},mentionsList:{type:Array,default(){return this.mentionsListDefault}},textareaTestSelector:{type:String,default:"froala_textarea"},toolbarInline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:()=>({initialized:!1,initialValue:"",handleChangingValue:!0,mentionsListDefault:[],valueAttribute:""}),mounted(){window[`${this.variableFromId}_froala_input`]=this;let e=[],t=`/css/development/froala/themes/${this.theme}.css`;if(0===$(`link[href="${t}"]`).length&&e.push(t),"en"!==this.language){let t=`/js/production/froala/languages/${this.language}.js`;0===$(`script[src="${t}"]`).length&&e.push(t)}let n=()=>{this.initFroala(),this.initialized=!0,empty(this.initialValue)||(this.setValueToFroala(this.value),this.initialValue=""),this.$emit("initialized")};e.length>0?$.getScript("/js/development/head.min.js",(()=>{head.load(e,n)})):n()},methods:{initCustomPlugins(){(0,Y.A)(this),X(this.id)},initFluentIconsTemplate(){Object.assign($.FroalaEditor.ICON_TEMPLATES,{united:'<i class="fa fa-[NAME] [NAME]"></i>'}),window.setFroalaIcons("united")},initFroala(){this.initFluentIconsTemplate();let e=$(this.$refs.input);e.data("froala.editor")&&e.froalaEditor("destroy"),this.initCustomPlugins(),e.on("froalaEditor.initialized",((e,t)=>{window.globalEditor=t,setTimeout((()=>{this.$nextTick((()=>{this.iframe&&($(this.$refs.input).froalaEditor("size.syncIframe"),$(this.$refs.input).froalaEditor("size.refresh"))})),this.disabled?t.edit.off():this.mentions&&window.initMentions(t.$el,this.mentionsList,t.events)}),250)})).on("froalaEditor.click",(()=>{window.closeSelects()})).on("froalaEditor.html.get",((e,t,n)=>window.checkFroalaEmptyContent(n)&&t.$oel.attr("required")?"":n)).on("froalaEditor.input",(()=>{this.handleChangingValue=!1,this.$emit("input",e.froalaEditor("html.get"))})).on("froalaEditor.contentChanged",(()=>{this.handleChangingValue=!1,this.$emit("input",e.froalaEditor("html.get"))})).on("froalaEditor.image.beforeUpload",(t=>{this.$emit("load-image",!0),e.show(),$(".fr-image-progress-bar-layer").parent(".fr-popup").css({left:$(t.currentTarget).offset().left}),e.hide()})).on("froalaEditor.image.uploaded",(()=>{$('.fr-image-overlay + .fr-popup [data-cmd="imageLink"]').on("click",(()=>{$(".fr-link-insert-layer").parent(".fr-popup").removeClass("fr-hidden")}))})).on("froalaEditor.image.inserted",(()=>{this.$emit("load-image",!1)})).on("froalaEditor.clearFormatting",(()=>{this.handleChangingValue=!1,this.$emit("input",e.froalaEditor("html.get"))})).on("froalaEditor.focus",((e,t)=>{window.activeEditorSnippetPlugin&&window.activeEditorSnippetPlugin.id!==t.$oel.attr("id")&&(window.activeEditorSnippetPlugin.id=t.$oel.attr("id"))})).on("froalaEditor.paste.after",(()=>{this.handleChangingValue=!1,this.$emit("input",e.froalaEditor("html.get"))})),e.froalaEditor(this.getFroalaConfig())},getFroalaConfig(){let e=this.getToolbarButtons(),t={cannedResponsesType:this.cannedResponsesType,enter:this.enter,useClasses:this.useClasses,initOnClick:this.initOnClick,placeholderText:this.placeholderText,zIndex:this.zIndex,iframe:this.iframe,language:this.language,theme:this.theme,pastePlain:this.pastePlain,key:this.licenseKey,heightMin:this.heightMin,heightMax:this.heightMax,htmlExecuteScripts:this.htmlExecuteScripts,htmlRemoveTags:["input","textarea","select","option","optgroup"],htmlUntouched:!0,pasteAllowedStyleProps:[],htmlAllowedTags:[".*"],entities:"",htmlAllowedAttrs:[".*"],htmlAllowedEmptyTags:[],codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:"['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'ul', 'ol', 'table', 'dl']",brace_style:"expand",indent_char:" ",indent_size:4,wrap_line_length:0},customPlugins:["codeSnippet"],allowStyle:!0,toolbarButtons:e.lg,toolbarButtonsMD:e.md,toolbarButtonsSM:e.sm,toolbarButtonsXS:e.xs,toolbarSticky:this.toolbarSticky,toolbarStickyOffset:this.toolbarStickyOffset,toolbarInline:this.toolbarInline};return this.charCounterMax>0&&(t.charCounterMax=this.charCounterMax),this.enableSupportImages?(t.imageEditButtons=["imageReplace","imageAlign","imageCaption","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageAlt","imageSize"],t.imageInsertButtons=["imageUpload"],t.imageDefaultAlign="left",t.imageUploadURL=`/${this.prefixUploadUrl}/images--upload?csrfToken=${this.csrfToken}`,t.imageUploadParam="FroalaImage[file]",t.imageUploadParams={id:"FroalaImage[file]",_csrf_token:this.csrfToken},t.imageManagerLoadURL=`/${this.prefixUploadUrl}/images--list?csrfToken=${this.csrfToken}`,t.imageManagerDeleteURL=`/${this.prefixUploadUrl}/images--delete?csrfToken=${this.csrfToken}`,t.imageManagerDeleteMethod="POST",t.imageManagerDeleteParams={id:"file",_csrf_token:this.csrfToken}):(t.imagePaste=!1,t.imageUpload=!1),t},setValueToFroala(e){$(this.$refs.input).froalaEditor("html.set",e),$(this.$refs.input).trigger("froalaEditor.contentChanged",e)},getFroala(){return this.$refs.input},getToolbarButtons(){let e={lg:this.toolbarButtons,md:[],sm:[],xs:[]};return e.md=empty(this.toolbarButtonsMD)?this.toolbarButtons:this.toolbarButtonsMD,e.sm=empty(this.toolbarButtonsSM)?e.md:this.toolbarButtonsSM,e.xs=empty(this.toolbarButtonsXS)?e.sm:this.toolbarButtonsXS,e}},computed:{wrapperClass(){return["splynx-froala","pt-0","position-relative","x-froala",`froala-${this.id}`]},variableFromId(){return this.id?this.id.replaceAll("-","_"):"_"}},watch:{value(e){""===e||""===window.stripTagsFromString(e).trim()?($(this.$refs.input).html(""),this.$nextTick((()=>{this.required&&this.$refs.input.setCustomValidity(this.$t("common","Please fill in this field"))}))):this.$refs.input.setCustomValidity(""),this.handleChangingValue?this.initialized?this.setValueToFroala(e):this.initialValue=e:this.handleChangingValue=!0}}};const J=(0,l.A)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.wrapperClass},[e.initialized?e._e():n("img",{staticStyle:{display:"block",margin:"0 auto"},attrs:{src:"/images/loading.gif",alt:e.$t("support","Please wait")}}),n("textarea",{ref:"input",class:e.classes,style:e.styles,attrs:{id:e.id,rows:"10",name:e.name,required:e.required,"data-test-selector":e.textareaTestSelector,disabled:e.disabled},domProps:{value:e.value}})])}),[],!1,null,null,null).exports;const ee={name:"XInputEncrypt",mixins:[a.A],props:{options:{type:Object,default:()=>({})},value:[String,Number]},computed:{attributes(){let e={...this.options};return(0,i.isset)(e,["class"])||(e.class=""),e.class=this.addClass(e.class,["form-control","input-sm"]),delete e.id,delete e.name,e}}};const te=(0,l.A)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group"},[n("input",e._b({attrs:{type:"password",autocomplete:"off"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}},"input",e.attributes,!1))])}),[],!1,null,null,null).exports;const ne={name:"XSelectSearch",extends:A.A,inheritAttrs:!1,props:{data:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},placeholder:{type:String,default(){return this.$t("common","Search")}},searchKey:{type:String,default:"search"},ajaxUrl:String,ajaxData:{type:Object,default:()=>{}},customConfig:{type:Object,default:()=>{}},defaultDataResponse:{type:Boolean,default:!0}},methods:{reInit(){let e={},t=this.ajaxConfig.config;$.extend(!0,e,t),this.initHooks(e)},responseDataWithChildren:e=>e.results.map((e=>({text:e.text,disabled:e.disabled,children:e.children?e.children.map((e=>({id:e.id,text:e.text,disabled:e.disabled}))):[]})))},computed:{ajaxConfig(){return{config:{data:this.data,ajax:{url:this.ajaxUrl,delay:250,data:e=>({[this.searchKey]:e.term,...this.ajaxData}),processResults:e=>({results:this.defaultDataResponse?e.data:this.responseDataWithChildren(e)}),cache:!0},allowClear:!0,placeholder:this.placeholder,minimumInputLength:2,...this.customConfig},options:this.options}}}};const ie=(0,l.A)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-wrap"},[n("select",e._b({ref:"input"},"select",e.attributes,!1))])}),[],!1,null,null,null).exports,oe="boolean",se="checkbox",ae="text",re="decimal",le="number",ce="float",de="integer",ue="encrypt",pe="file",he="email",fe="phone",me={name:"XComplexInput",components:{XInputDateRange:o,XInputDatetime:s,XInputDate:d,XInputDateMonths:p,XInputHidden:h.A,XMultipleSelect:f.A,XMultipleSelectRelation:w,XInputNumber:_.h,XInputPassword:T,XPasswordWindow:S,XInputEncrypt:te,XSelect:A.A,XSelectRelation:k,XSelectMultipleTags:I,XSelectSearch:ie,XTextField:O.A,XTextarea:R,XFroala:J,XInputCheckbox:N.A,XInputRadio:D.A,XInputFile:L.Ay,XAddonButton:P,XAddonText:B,XAddonTextAndButton:j,XInputIp:W,XInputIpV6:G,XEmailPhoneInput:z},props:{type:String,params:Object,nativeEventHandlers:{type:Object,default:()=>({})},eventHandlers:{type:Object,default:()=>({})},value:{type:[String,Number,Array,Object,Boolean,FileList,File],default:""},meta:{type:Object,default:()=>({})}},data:()=>({show:!0}),computed:{componentName(){let e={};return e[ae]="XTextField",e.string="XTextField",e[le]="XInputNumber",e[ce]="XInputNumber",e[de]="XInputNumber",e[re]="XInputNumber",e.hidden="XInputHidden",e.password="XInputPassword",e.password_window="XPasswordWindow",e[ue]="XInputEncrypt",e.textarea="XTextarea",e.froala="XFroala",e.multipleSelect="XMultipleSelect",e["multiple-select"]="XMultipleSelect",e.multipleSelectRelation="XMultipleSelectRelation",e["multiple-select-relation"]="XMultipleSelectRelation",e.select="XSelect",e["select-search"]="XSelectSearch",e.multipleTags="XSelectMultipleTags",e.selectRelation="XSelectRelation",e["select-relation"]="XSelectRelation",e.datetime="XInputDatetime",e.date_range="XInputDateRange",e["date-range"]="XInputDateRange",e.daterange="XInputDateRange",e.date="XInputDate",e["date-months"]="XInputDateMonths",e[pe]="XInputFile",e[oe]="XInputCheckbox",e[se]="XInputCheckbox",e.radio="XInputRadio",e.addon_button="XAddonButton",e.addon_text="XAddonText",e.addon_text_and_button="XAddonTextAndButton",e.ip="XInputIp",e.ipv6="XInputIpV6",e[he]="XEmailPhoneInput",e[fe]="XEmailPhoneInput",(0,i.isset)(e,this.type)?e[this.type]:(console.error(`Unknown input type: ${this.type}`),"XTextField")},preparedParams(){let e=$.extend(!0,{},this.params);return e.value=this.value,Object.keys(this.meta).length>0&&((0,i.empty)(e.options)&&(e.options={}),(0,i.isset)(this.meta,["rule","required"])&&this.meta.rule.required&&(e.options.required="required"),(0,i.isset)(this.meta,["rule","min"])&&(e.options.min=this.meta.rule.min,this.type!==de&&this.type!==ce||(e.minimum=this.meta.rule.min)),(0,i.isset)(this.meta,["rule","max"])&&(e.options.max=this.meta.rule.max,this.type!==de&&this.type!==ce||(e.maximum=this.meta.rule.max)),(0,i.isset)(this.meta,["rule","decimals"])&&(e.float=this.meta.rule.decimals),this.type===ce&&(e.numberType="decimal")),this.type===he&&(e.options.type=ae),this.type===de&&(e.numberType=de),this.type===re&&(e.numberType=re),!(0,i.isset)(e,["options","id"])&&(0,i.isset)(e,["options","name"])&&(e.options.id=this.getIdFromName(e.options.name)),this.type===fe&&(e.type=this.type),this.type!==se&&this.type!==oe||!(0,i.empty)(e.value)||(e.value=!1),e.is_required&&(e.options.required="required"),e.max_length&&(e.maximum=e.max_length),e.min_length&&(e.minimum=e.min_length),e.type===re&&e.decimals&&(e.float=e.decimals),e}},methods:{getIdFromName:e=>e.replace("[","-").replace("]","").toLowerCase(),recreate(){this.show=!1,this.$nextTick((()=>{this.show=!0}))}},render(e){let t=this;return this.show?e(this.componentName,{props:this.preparedParams,ref:"input",on:{close:()=>{t.$emit("close")},open:()=>{t.$emit("open")},input:e=>{t.$emit("input",e)},...this.eventHandlers},nativeOn:{focusout:e=>{t.$emit("focusout",e)},...this.nativeEventHandlers}}):""}},ge=me;const ve=(0,l.A)(ge,undefined,undefined,!1,null,null,null).exports},26658:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(8974),o=n(32908);const s={name:"XInputCheckbox",mixins:[n(66710).A],props:{options:{type:Object,default:()=>({})},value:{default:!1,type:[Boolean,String,Number]},name:{default:"name",type:String},id:{default(){return this.name},type:String},label:{type:[Object,String],default:""},isFormSwitch:{type:Boolean,default:!0},clickByLabel:{type:Boolean,default:!1}},data(){return{changed:!!JSON.parse(this.value),labelTypes:o.DZ}},computed:{dataTestValue(){return this.changed?"on":"off"},booleanLabel(){return this.label?.active&&this.label?.disabled},booleanLabelClass(){return["badge",this.value?this.labelTypes.success:this.labelTypes.danger]},booleanLabelText(){return this.value?this.label.active:this.label.disabled},labelClass(){if("object"==typeof this.label){const e=Object.keys(this.labelTypes).find((e=>e===this.label.type));return this.labelTypes[e]}return""},formSwitchClass(){return"form-check "+(this.isFormSwitch?"form-switch":"")},labelForInput(){return this.clickByLabel?`${this.id}`:""}},watch:{value(e){this.changed=!!JSON.parse(e)}},methods:{empty:i.empty,inputHandler(){this.$emit("input",!!JSON.parse(this.changed))}}};const a=(0,n(71938).A)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-holder-checkbox"},[n("div",{ref:"formSwitch",class:e.formSwitchClass,attrs:{"data-test-selector":"form-switch"}},[n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.changed,expression:"changed"}],staticClass:"form-check-input",attrs:{id:e.id,"data-selector-value":e.dataTestValue,type:"checkbox"},domProps:{checked:Array.isArray(e.changed)?e._i(e.changed,null)>-1:e.changed},on:{change:[function(t){var n=e.changed,i=t.target,o=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&(e.changed=n.concat([null])):s>-1&&(e.changed=n.slice(0,s).concat(n.slice(s+1)))}else e.changed=o},e.inputHandler]}},"input",e.options,!1)),e.isFormSwitch||e.empty(e.label)?e._e():n("label",{class:{"cursor-pointer":e.clickByLabel,"color-secondary":e.options.disabled},attrs:{"data-test-selector":"label-checkbox",for:e.labelForInput},domProps:{innerHTML:e._s(e.label)}})]),e.booleanLabel?n("label",{class:e.booleanLabelClass,attrs:{"data-test-selector":"label-boolean"}},[e._v(" "+e._s(e.booleanLabelText)+" ")]):e.labelClass?n("label",{class:"badge "+e.labelClass,attrs:{"data-test-selector":"label-badge"}},[e._v(e._s(e.label.text||""))]):!e.empty(e.label)&&e.isFormSwitch?n("label",{attrs:{"data-test-selector":"label-simple"},domProps:{innerHTML:e._s(e.label)}}):e._e()])}),[],!1,null,null,null).exports},2211:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8974);const o={name:"XInputDateRange",mixins:[n(66710).A],props:{options:Object,fields:Object,dateRangePickerConfig:Object,value:String,clearButton:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},disableButton:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0}},data:()=>({emptyValue:!0,defaultClasses:["input-date-range","form-control","v-filter-data-range"]}),computed:{attributes(){let e={...this.options};return isset(e,"class")||(e.class=""),this.showButton||(e.class+=" border-radius-right"),e.class=this.addClass(e.class,this.defaultClasses),e.type="text",isset(e,"name")&&delete e.name,isset(e,"value")&&delete e.value,e["data-ignore-filter"]="1",e},nameForHidden(){return isset(this.options,"name")?this.options.name:""},valueForHidden(){let e=this.getPreparedDateRangeValue(this.value);return""===e?"":e}},watch:{value(e){e!=$(this.$refs.hiddenInput).val()&&this.setValue(e),this.emptyValue=(0,i.empty)(e)}},mounted(){let e={},t=this;$.extend(!0,e,window.daterangepicker_default_config,this.dateRangePickerConfig),(0,i.empty)(this.dateRangePickerConfig?.ranges)||(e.ranges=this.dateRangePickerConfig.ranges),$(this.$refs.input).daterangepicker(e,((e,n)=>{let i=`${e.format("YYYY-MM-DD")} - ${n.format("YYYY-MM-DD")}`;t.setValue(i),t.$emit("input",i)})),initDaterangePicker(),this.setValue(this.value),$(this.$refs.input).on("apply.daterangepicker",((e,t)=>{t.callback(t.startDate.clone(),t.endDate.clone(),t.chosenLabel)}))},methods:{clickButton(){this.clearButton&&!this.emptyValue?($(this.$refs.input).val("").trigger("change"),this.$emit("input",""),this.emptyValue=!0):$(this.$refs.input).trigger("click")},setValue(e){e=this.getPreparedDateRangeValue(e);let t=(0,i.empty)(e)?"":this.formatValue(e);$(this.$refs.input).val(t).trigger("change");let n="",o="";if(!(0,i.empty)(e)){let t=e.split(" - "),i=$(this.$refs.input).data("daterangepicker").locale.format;n=moment(t[0],"YYYY-MM-DD").format(i),o=moment(t[1],"YYYY-MM-DD").format(i),$(this.$refs.input).data("daterangepicker").setStartDate(n),$(this.$refs.input).data("daterangepicker").setEndDate(o)}this.emptyValue=(0,i.empty)(e)},formatValue(e){let t=e.split(" - ");return`${moment(t[0],"YYYY-MM-DD").format(date_format)} - ${moment(t[1],"YYYY-MM-DD").format(date_format)}`},getPreparedDateRangeValue(e){let t=e;if("RANGE_THIS_MONTH"===e){t=`${moment().clone().startOf("month").format("YYYY-MM-DD")} - ${moment().clone().endOf("month").format("YYYY-MM-DD")}`}else if("RANGE_CURRENT_DAY"===e){const e=moment().clone().format("YYYY-MM-DD");t=`${e} - ${e}`}return t!==e&&this.$emit("input",t),t}}};const s=(0,n(71938).A)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group"},[n("input",e._b({ref:"input"},"input",e.attributes,!1)),n("input",{ref:"hiddenInput",attrs:{"data-testid":"input",type:"hidden",name:e.nameForHidden},domProps:{value:e.valueForHidden}}),e.showButton?n("button",{staticClass:"btn btn-outline-secondary btn-icon admin_customers_billing_finance_items_tariff cursor-pointer",attrs:{disabled:e.disableButton,type:"button","data-testid":"button"},on:{click:e.clickButton}},[e.clearButton&&!e.emptyValue?n("i",{staticClass:"icon-ic_fluent_dismiss_24_regular"}):n("i",{staticClass:"icon-ic_fluent_calendar_ltr_24_regular"})]):e._e()])}),[],!1,null,null,null).exports},74485:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={name:"XInputDatetime",mixins:[n(66710).A],props:{options:Object,datePickerConfig:{type:Object,default:()=>({})},clearButton:{type:Boolean,default:!0},activeClearButton:{type:Boolean,default:!0},value:String,button:Object},data:()=>({}),computed:{clearButtonClass(){return["btn btn-outline-secondary btn-icon cursor-pointer",this.activeClearButton?"":"disabled"]},attributes(){let e={...this.options};return isset(e,"class")||(e.class=""),e.class=this.addClass(e.class,["form-control","input-sm","date-picker-single","input-date-range"]),isset(e,"name")&&delete e.name,e},formattedValue(){return moment(this.value,"YYYY-MM-DD HH:mm:ss").format(window.datetime_format)},buttonAttributes(){let e={...this.button};return isset(e,"html")&&delete e.html,e},nameForHidden(){return isset(this.options,"name")?this.options.name:""},valueForHidden(){return""===this.value?"":this.value}},watch:{value(e){if(e!=$(this.$refs.input).val())if(empty(e))$(this.$refs.input).val("");else{let t=moment(e,"YYYY-MM-DD HH:mm:ss").format(datetime_format);$(this.$refs.input).val(t).attr("original-value",t)}}},mounted(){let e=this,t={};$.extend(!0,t,daterangepicker_single_datetime_default_config,this.datePickerConfig),$(this.$refs.input).customdatetimepicker(t,(t=>{let n=$(e.$refs.input);n.val(t.format(datetime_format)),n.trigger("change")}));let n="";empty(this.value)||"0000-00-00 00:00:00"===this.value||(n=moment(this.value,"YYYY-MM-DD HH:mm:ss").format(datetime_format)),$(this.$refs.input).val(n).attr("original-value",n).trigger("change").on("apply.daterangepicker",((t,n)=>{e.$emit("input",n.startDate.format("YYYY-MM-DD HH:mm:ss"))})),[$(".vue-dialog-body"),$(window),$(".splynx-dialog-content")].forEach((e=>{$(e).on("scroll",(()=>{$(this.$refs.input)&&window.matchMedia("(min-width: 768px)").matches&&($(this.$refs.input).blur(),$(this.$refs.input).data("daterangepicker")?.hide())}))}))},methods:{clearPicker(){if(!this.activeClearButton)return!1;$(this.$refs.input).val("").trigger("change"),this.$emit("input","")},clickButton(){isset(this.button,"handler")&&"function"==typeof this.button.handler&&this.button.handler(this._self,this.$refs.input,this.$refs.button)}}};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group"},[n("input",e._b({ref:"input",attrs:{"data-test-value":e.formattedValue}},"input",e.attributes,!1)),n("input",{ref:"hiddenInput",attrs:{type:"hidden",name:e.nameForHidden},domProps:{value:e.valueForHidden}}),n("span",{class:e.clearButtonClass,on:{click:e.clearPicker}},[e.clearButton?e._e():n("i",{staticClass:"icon-ic_fluent_calendar_ltr_24_regular"}),e.clearButton?n("i",{staticClass:"icon-ic_fluent_dismiss_24_regular"}):e._e()]),e.button?n("span",e._b({ref:"button",domProps:{innerHTML:e._s(e.button.html)},on:{click:e.clickButton}},"span",e.buttonAttributes,!1)):e._e()])}),[],!1,null,null,null).exports},24296:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={name:"XInputHidden",props:{value:[String,Number],options:Object},mounted(){$(this.$refs.input).change(this.inputHandler)},methods:{inputHandler(e){this.$emit("input",e.target.value)}}};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._b({ref:"input",attrs:{type:"hidden"},domProps:{value:e.value},on:{input:e.inputHandler}},"input",e.options,!1))}),[],!1,null,null,null).exports},8086:(e,n,i)=>{"use strict";i.d(n,{A:()=>r});var o=i(8974),s=i(4931);const a={name:"XInputPassword",mixins:[i(66710).A],props:{options:{type:Object,default:()=>({})},value:[String,Number],showPasswordButton:{type:Boolean,default:!0},generatePassword:{type:Boolean,default:!0},showGenerateConfirm:{type:Boolean,default:!0},sign:{type:String,default:"*"},generatePasswordUrl:{type:String,default:"/admin/tools--generate-password"},generatePasswordIcon:{type:String,default:"icon-ic_fluent_lock_shield_24_regular"},borderSize:{type:Number,default:4}},data:()=>({visible:!1,maskedInput:null}),mounted(){this.maskedInput=new s.A(this.$refs.passwordInput,!this.visible,this.onChange,this.onVisibilityChanged,!1),this.maskedInput.setValue(this.value)},computed:{maskedClass(){return this.visible?"":s.A.MASKED},attributesForVisible(){let e={...this.options};return(0,o.isset)(e,["class"])||(e.class=""),(0,o.isset)(e,["autocomplete"])||(e.autocomplete="off"),e.class=this.addClass(e.class,["password_input","form-control","input-sm",this.maskedClass]),delete e.id,delete e.name,e},attributesForHidden(){let e={...this.$attrs};return(0,o.isset)(this.options,"name")&&(e.name=this.options.name),(0,o.isset)(this.options,"id")&&(e.id=this.options.id),e},buttonTitle(){return this.visible?this.$t("common","Hide password"):this.$t("common","Show password")},buttonIcon(){return this.visible?"icon-ic_fluent_eye_off_24_regular":"icon-ic_fluent_eye_24_regular"},borderStyle(){return this.generatePassword?{}:{"border-top-right-radius":`${this.borderSize}px`,"border-bottom-right-radius":`${this.borderSize}px`}}},methods:{onChange(e){this.$refs.hiddenInput.value=e,this.$emit("input",e)},onVisibilityChanged(e){this.visible=!e},onSymbolChange(e){this.$emit("symbol-changed",e)},togglePassword(){this.maskedInput.toggleMaskState()},setGeneratePassword(e){this.maskedInput.setValue(e),this.maskedInput.setMaskState(!1)},generatePasswordHandler(){this.generatePassword&&(this.showGenerateConfirm&&""!==this.value&&!window.confirm(t("config","Are you sure you want to generate a random password?"))||$.ajax({type:"GET",url:this.generatePasswordUrl,dataType:"json",success:e=>{this.setGeneratePassword(e.string)}}))}},watch:{value(e){e!==this.maskedInput.input.val()&&this.maskedInput.setValue(e)}}};const r=(0,i(71938).A)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group"},[e.showPasswordButton?n("button",{staticClass:"btn btn-outline-secondary btn-icon show-password",attrs:{type:"button","data-testid":"visibilityButton",title:e.buttonTitle},on:{click:e.togglePassword}},[n("i",{class:e.buttonIcon})]):e._e(),n("input",e._b({ref:"passwordInput",style:e.borderStyle,attrs:{type:"text","data-testid":"input"}},"input",e.attributesForVisible,!1)),n("input",e._b({ref:"hiddenInput",attrs:{type:"hidden"}},"input",e.attributesForHidden,!1)),e._t("generate-password-button",(function(){return[e.generatePassword?n("button",{staticClass:"btn btn-outline-secondary btn-icon generate-password",attrs:{type:"button",title:e.$t("common","Generate password")},on:{click:function(t){return e.generatePasswordHandler()}}},[n("i",{class:e.generatePasswordIcon})]):e._e()]}))],2)}),[],!1,null,null,null).exports},99826:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(8974),o=n(32908);const s={name:"XMultipleSelect",inheritAttrs:!1,props:{label:String,options:Object,type:String,sortByText:{type:Boolean,default:!1},optionCallback:{type:Function,default:null},config:{type:Object,default:()=>({})},autoUpdateOptions:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},value:[String,Number,Array]},data(){return{multipleSelect:null,previousTriggerValue:null,initialized:!1,optionsData:this.options.options}},computed:{attributes(){let e={...this.$attrs,...this.options,disabled:this.disabled};return delete e.options,e.multiple="multiple",delete e["data-placeholder"],isset(e,"style")||(e.style="width: 100%;"),e},selectData(){let e=this.optionsData,t=[];for(let n in e){let i,o=e[n];if("object"==typeof o){i={type:"optgroup",label:n,children:[]};for(let e in o){let t=parseInt(o[e].position);"object"==typeof o[e]&&(o[e]=o[e].title);let n={text:o[e],value:e,position:t};i.children.push(n)}}else i={text:o,value:n};"function"==typeof this.optionCallback&&(i=this.optionCallback(i)),t.push(i)}return this.sortByText&&(t.sort(((e,t)=>(e=isset(e,"label")?e.label.toUpperCase():e.text.toUpperCase(),t=isset(t,"label")?t.label.toUpperCase():t.text.toUpperCase(),"ALL"===e||"ANY"===e||"ANYONE"===e?-1:"ALL"===t||"ANY"===t||"ANYONE"===t||e>t?1:-1))),t.forEach((e=>{isset(e,"children")&&e.children.sort(((e,t)=>e.text.toUpperCase()>t.text.toUpperCase()?1:-1))}))),t.forEach((e=>{isset(e,"children")&&e.children.sort(((e,t)=>e.position-t.position))})),t},needCheckAll(){return"data-check-all"in this.attributes&&this.attributes["data-check-all"]},withGroups(){let e=this.optionsData;return"object"==typeof e[Object.keys(e)[0]]}},watch:{value(e,t){if((0,i.empty)(e)&&(e=[]),Array.isArray(e)||"string"==typeof e&&(e.includes("%2C")&&(e=decodeURIComponent(e)),e=e.includes(",")?e.split(","):[e]),"number"==typeof e)return this.$emit("input",e),!1;e.join(",")!==$(this.$refs.input).val().join(",")?this.setValue(e):t===o.rG&&this.$emit("input",e)},options:{deep:!0,handler(e){!(0,i.empty)(e.options)&&this.autoUpdateOptions&&(this.optionsData=e.options)}},optionsData:{deep:!0,handler(e,t){if(this.initialized){let n=null;isset(e,["selectValue"])&&(n=e.selectValue,delete e.selectValue),JSON.stringify(e)===JSON.stringify(t)||(0,i.empty)(e)||(0,i.empty)(t)||this.$nextTick((()=>{$(this.$refs.input).multipleSelect("refresh"),this.setValue(n||this.value);let t=$($(this.$refs.input).data("multipleSelect").$searchInput[0]);t?.hasClass("input-ms-search")||t.addClass("input-ms-search"),this.$emit("options-update",e)}))}}},disabled(e){this.$nextTick((()=>{$(this.$refs.input).multipleSelect(e?"disable":"enable")}))}},mounted(){this.init(),this.$refs.input.addEventListener("update-options",(e=>{(0,i.empty)(e.selectOptions)||(this.optionsData=e.selectOptions)})),splynx_event_bus.on("before_switch_page",this.close)},methods:{init(){this.initWidget(),this.needCheckAll||this.setValue(this.value),$(this.$refs.input).off("change"),$(this.$refs.input).change((()=>{let e=$(this.$refs.input).val();null!==this.previousTriggerValue&&this.previousTriggerValue.join(",")===e.join(",")||(this.previousTriggerValue=e,this.$emit("input",e))})),this.initialized=!0},setValue(e){void 0!==this.multipleSelect&&((0,i.empty)(e)&&(e=[]),e===o.rG||Array.isArray(e)&&e[0]===o.rG?this.multipleSelect.checkAll():(Array.isArray(e)||(e.includes("%2C")&&(e=decodeURIComponent(e)),e=e.includes(",")?e.split(","):[e]),this.multipleSelect.setSelects(e)))},initWidget(){const e=this;if(!(0,i.empty)($(this.$refs.input).data("multipleSelect")))return;let t=this.$refs.input;window.htmlElement=t;let n=!1,o=5,s=t.offsetWidth,a="";null!=$("optgroup",t).length&&$("optgroup",t).length>0&&(n=!0,o=0),$(".vue-dialog-content").length&&(a=".splynx-isp");let r={displayValues:n,minimumCountSelected:o,container:a,width:s,filter:!0,labelTemplate:e=>`<span>${e.attr("label")}</span>`,onOpen(){window.fixDropDownPosition(t),$(window).on("scroll",(()=>{window.fixDropDownPosition(t)}));let n,i,o,s,a,r=$(t).data("multipleSelect"),l={};if($(t).closest(".ui-dialog, .vue-dialog-content").length>0){$(".splynx-dialog-content").css({overflow:"hidden"}),n=$(t).closest(".ui-dialog-content, .vue-dialog-content"),i=r.$drop,o=$(n).height(),s=$(n).find(".ms-choice").outerWidth(),i.css({bottom:"unset"}),a=i.height(),l={width:s,position:"fixed",bottom:"unset"};let e=$(t).parent().find(".ms-parent").offset().top,c=$(window).scrollTop(),d=$(t).parent().find(".ms-parent").height();i.hasClass("top")?l.top=e-c-a:l.top=e-c+d,a>0&&(l.height=a),i.css(l);let u=$(i).offset().top-$(n).offset().top+$(n).scrollTop();u+$(i).find("ul").height()>o&&$(n).scrollTop(u),$(i).find("ul").css("max-height",`${this.maxHeight}px`),$(document).ready((()=>{$(document).off("focusin"),$(".ui-dialog ~ .ms-drop").css("height","auto"),$(".ms-drop .input-ms-search").each((function(){$(this).is(":visible")&&$(this).get(0).focus()}))}))}$(t).next(".ms-parent").find(".ms-choice").addClass("multipleselect-opened"),$(window).on("resize",(()=>{let e=$(".ui-dialog-content .ms-parent").offset()?.top;null===e&&(e=0);let o=e-$(window).scrollTop()+$(".ms-parent").height();o&&$(i).css("top",o),$(i).css("left",$(t).offset().left),$(i).css("width",$(n).find(".ms-choice").width())})),e.$emit("open")},onClose(){$(window).off("scroll"),$(".splynx-dialog-content").css({"overflow-x":"hidden","overflow-y":"auto"}),$(t).next(".ms-parent").find(".ms-choice").removeClass("multipleselect-opened"),e.$emit("close")},onClick:this.initChangeMultipleSelectEvent,onCheckAll:this.initChangeMultipleSelectEvent,onUncheckAll:this.initChangeMultipleSelectEvent,...this.config};$(t).multipleSelect(r),$(t).next(".ms-parent").find(".ms-search input").addClass("input-ms-search"),this.multipleSelect=$(t).data("multipleSelect"),$(t).attr("readonly")&&$(t).multipleSelect("disable"),this.needCheckAll&&this.multipleSelect.checkAll()},initChangeMultipleSelectEvent(){let e=document.createEvent("CustomEvent");e.initEvent("change-multiple-select",!0,!0),e.eventName="change-multiple-select",e.multipleSelectSelectedValues=$(this.$refs.input).val(),this.$refs.input.dispatchEvent(e)},close(){$(this.$refs.input).multipleSelect("close")}}};const a=(0,n(71938).A)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-wrap"},[n("select",e._b({ref:"input"},"select",e.attributes,!1),[e.withGroups?e._l(e.selectData,(function(t,i){return n("optgroup",{key:i,attrs:{label:t.label}},e._l(t.children,(function(t,i){return n("option",{key:i,staticClass:"option",attrs:{disabled:t.disabled},domProps:{value:t.value,innerHTML:e._s(t.text)}})})),0)})):e._l(e.selectData,(function(t,i){return n("option",{key:i,attrs:{disabled:t.disabled},domProps:{value:t.value,innerHTML:e._s(t.text)}})}))],2)])}),[],!1,null,null,null).exports},29404:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8974);const o={name:"XSelect",inheritAttrs:!1,props:{name:String,label:String,options:Object,type:String,placeholder:String,tags:Boolean,allowClear:Boolean,fixResizeMultiple:{type:Boolean,default:!1},isAsync:{type:Boolean,default:!1},config:{type:Object,default:()=>({})},sortByText:{type:Boolean,default:!1},sortCallback:{type:Function},value:[String,Number,Array,Object],dropdownZIndex:{type:Number,default:0},sortingField:{type:String,default:void 0},templateSelection:{type:Boolean,default:!1},templateResult:{type:Boolean,default:!1},clearAfterSelect:{type:Boolean,default:!1},openAfterInit:{type:Boolean,default:!1}},data:()=>({alreadyInit:!1}),computed:{attributes(){let e={...this.$attrs,...this.options};return delete e.options,(0,i.isset)(e,"class")?e.class+=" select2":e.class="select2",e},groupNames(){return{taxes:this.$t("finance","Taxes"),taxGroups:this.$t("finance","Tax groups")}}},watch:{value(e){let t=!1;if(Array.isArray(e)){let n=[];e.forEach((e=>{"string"==typeof e?n.push(e):n.push(e.id)}));let i=$(this.$refs.input).val();t=!Array.isArray(i)&&i!=n.join(",")||Array.isArray(i)&&n.join(",")!==i.join(",")}else t="object"==typeof e&&null!==e?e.id!=$(this.$refs.input).val():e!=$(this.$refs.input).val();null===e&&(e=""),t&&(Array.isArray(e)?$(this.$refs.input).val(e).trigger("change"):"object"==typeof e&&null!==e?$(this.$refs.input).select2("trigger","select",{data:e}):$(this.$refs.input).val(e).trigger("change"))},"options.options":function(e,t){this.alreadyInit&&(JSON.stringify(e)==JSON.stringify(t)||(0,i.emptyObject)(e)&&(0,i.emptyObject)(t)||this.reInit())}},mounted(){this.reInit(),this.alreadyInit=!0,splynx_event_bus.on("before_switch_page",this.close)},beforeDestroy(){this.destroy()},methods:{reInit(){let e={};if(this.isAsync){let t=this.getDefaultAsyncConfig();$.extend(!0,e,t,this.config),"string"==typeof e.ajax.data&&(e.ajax.data=Function("params",e.ajax.data)),"string"==typeof e.ajax.processResults&&(e.ajax.processResults=Function("data",e.ajax.processResults))}else e={data:this.getPreparedOptions(),tags:this.tags,allowClear:this.allowClear,placeholder:this.placeholder},this.templateResult&&$.extend(!0,e,{templateResult:this.formatSelection}),this.templateSelection&&$.extend(!0,e,{templateSelection:this.formatSelection}),$.extend(!0,e,this.config);this.initHooks(e)},initHooks(e){let t=null,n=$(this.$refs.input);n.data("select2")&&(n.select2("destroy"),n.find("option,optgroup").remove()),t=n.select2(e),this.isAsync&&!(0,i.emptyObject)(this.options?.options)&&0===n.find(`option[value='${this.value}']`).length&&(n.find(`option[value='${this.value}']`).length?n.val(this.value).trigger("change"):Object.keys(this.options.options).forEach((e=>{let t=new Option(this.options.options[e],e,!0,!0);n.append(t)}))),t.val(this.value).trigger("change"),t.change(this.inputHandler),this.fixResizeMultiple&&t.data("select2").on("results:message",(function(){this.dropdown._resizeDropdown(),this.dropdown._positionDropdown()})),t.on("select2:open",this.onOpenSelect),this.openAfterInit&&t.select2("open")},inputHandler(e){let t;if(this.isAsync){if(t=$(e.target).select2("data"),t.length<1)t=e.target.value;else{let e=[];t.forEach((t=>{e.push({id:t.id,text:t.text})})),t=e}this.clearAfterSelect&&this.$nextTick((()=>{$(e.target).val(null).trigger("change.select2")}))}else t=$(e.target).val()??"";this.$emit("input",t),this.$emit("change",t),this.tags&&$(window).off("paste")},getPreparedOptions(e){let t=[];if((0,i.emptyObject)(this.options.options)&&(0,i.emptyObject)(e))return t;let n=this.options.options;(0,i.emptyObject)(e)||(n=e),void 0!==this.sortingField&&(n=Array.from((0,i.sortObjectByProperty)(n,this.sortingField,!1,!0).values()));for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))if("string"==typeof n[e]||"number"==typeof n[e])t.push({text:n[e],id:e});else if((0,i.isset)(n[e],"key")&&(0,i.isset)(n[e],"value"))t.push({text:n[e].value,id:n[e].key});else if((0,i.isset)(n[e],"id")&&(0,i.isset)(n[e],"text")){let i={text:n[e].text,id:n[e].id};"badge"in n[e]&&(i.badge=n[e].badge),t.push(i)}else{let o=[];if((0,i.isObject)(n[e]))$.each(n[e],((e,t)=>{o.push({text:t,id:e})}));else for(const t in n[e])o.push({text:n[e][t].text,id:n[e][t].id,badge:n[e][t].badge});t.push({text:e,children:o})}return this.sortByText&&(t.sort(((e,t)=>(e=e.text.toUpperCase(),t=t.text.toUpperCase(),"ALL"===e||"ANY"===e||"ANYONE"===e?-1:"ALL"===t||"ANY"===t||"ANYONE"===t||e>t?1:-1))),t.forEach((e=>{(0,i.isset)(e,"children")&&e.children.sort(((e,t)=>e.text.toUpperCase()>t.text.toUpperCase()?1:-1))}))),this.sortCallback&&(t=this.sortCallback(t)),t},getDefaultAsyncConfig:()=>({data:{id:0,name:""},ajax:{url:"",dataType:"json",delay:250,cache:!0,data:e=>({value:e.term}),processResults:e=>({results:e.data})},allowClear:!0,placeholder:{},minimumInputLength:2}),onOpenSelect(){0!==this.dropdownZIndex&&$(".select2-dropdown").css("z-index",this.dropdownZIndex),this.tags&&this.value&&"relation_multiple"!==this.type&&setTimeout((()=>{$(".select2-container").find(".select2-results__option").attr("aria-selected","false")}),0),this.tags&&!this.value&&$(window).on("paste",this.changeValueAfterPaste),this.setFocusToSearchInput()},setFocusToSearchInput(){setTimeout((()=>{let e=$(".select2-container--open .select2-search__field");e&&(e.get(0)?.setAttribute("tabindex","1"),e.get(0)?.focus())}),100)},changeValueAfterPaste(){let e;setTimeout((()=>{e=$(".select2-container--open").find(".select2-selection__rendered").text(),this.$emit("input",e),$(window).off("paste")}),10)},formatSelection(e){if(e)return e?.children&&Object.keys(this.groupNames).includes(e.text)&&(e.text=this.groupNames[e.text]),e.badge?(0,i.isset)(e.badge,["text"])&&""!==e.badge.text?$(`<span><span class="text me-4">${e.text}</span><span class="badge\n                                            ${e.badge.background}">${e.badge.text}</span></span>`):$(`<span><span class="badge ${e.badge.background} text">${e.text}</span></span>`):e.text},destroy(){let e=$(this.$refs.input);e.data("select2")&&e.select2("destroy"),this.tags&&$(window).off("paste")},close(){let e=$(this.$refs.input);e.data("select2")&&e.select2("close")}}};const s=(0,n(71938).A)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-wrap"},[n("select",e._b({ref:"input"},"select",e.attributes,!1))])}),[],!1,null,null,null).exports},96644:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8974);const o={name:"XTextField",mixins:[n(66710).A],props:{value:[String,Number],options:Object,button:{type:[Object,Boolean,Array],default:!1},debounce:{type:Number,default:null}},data:()=>({debounceFunc:null}),mounted(){this.debounce&&(this.debounceFunc=(0,i.debounce)(this.emitInput,this.debounce,!1))},computed:{attributes(){let e=this.options;return void 0===e&&(e={}),(0,i.isset)(e,"class")||(e.class=""),e.class=this.addClass(e.class,["form-control","input-sm"]),e}},methods:{inputHandler(e){this.debounce?this.debounceFunc(e):this.emitInput(e)},emitInput(e){this.$emit("input",e.target.value)}},render(e){let t=this,n=$.extend(!0,{value:this.value},this.attributes),o="form-control input-sm";(0,i.isset)(this.attributes,"class")&&(o=this.attributes.class,delete this.attributes.class);let s=e("input",{ref:"input",class:o,attrs:{type:"text",value:this.value},domProps:n,on:{input:this.inputHandler,change:()=>{this.$emit("change")},invalid:e=>{void 0!==window.splynx_event_bus&&window.splynx_event_bus.emit("invalid",e),this.$emit("invalid",e)}}});if(!1===this.button)return s;let a=[],r=[];Array.isArray(this.button)?a=this.button:a.push(this.button);for(let n=0;n<a.length;n++){let o=a[n],s={id:o.id,style:"cursor: pointer;",class:"btn btn-icon btn-outline-secondary"},l="btn btn-icon btn-outline-secondary";(0,i.isset)(o,["options"])&&(s=$.extend(!0,s,o.options),(0,i.isset)(o,["options","class"])&&(l=o.options.class));let c=e("span",{class:l,ref:`button-${n+1}`,domProps:s,on:{click(){(0,i.isset)(o,"handler")&&"function"==typeof o.handler&&o.handler(t._self,t.$refs.input,t.$refs[`button-${n+1}`])}}},[o.html?function(){return o.html}:e("i",{class:o.class})]);r.push(c)}return e("div",{class:{"input-group":!0}},[s,...r])}};const s=(0,n(71938).A)(o,undefined,undefined,!1,null,null,null).exports},52295:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(66710),o=n(8974);const s={name:"XTextarea",mixins:[i.A],props:{options:Object,value:String},data:()=>({}),computed:{attributes(){let e=this.options;return void 0===e&&(e={}),(0,o.isset)(e,"class")||(e.class=""),e.class=this.addClass(e.class,["form-control"]),e}},created(){},mounted(){window.autosize($("textarea"))},methods:{inputHandler(e){this.$emit("input",e.target.value)}}};const a=(0,n(71938).A)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",e._b({ref:"input",domProps:{value:e.value},on:{input:e.inputHandler}},"textarea",e.attributes,!1))}),[],!1,null,null,null).exports},23579:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=23579,e.exports=t},98260:(e,t,n)=>{"use strict";n.r(t);var i=n(17071),o=n(97168),s=n.n(o),a=n(27880),r=n.n(a),l=n(62672),c=n.n(l),d=n(26695),u=n.n(d),p=n(68322),h=n(15454),f=n.n(h),m=n(25338),g=n(72052),v=n.n(g),b=n(29709),y=n.n(b),w=n(55690),_=n(4931);n.g.jQuery=n(13886),n.g.$=n.g.jQuery,window.jQuery=n.g.jQuery,window.$=n.g.jQuery,window.html2canvas=v(),window.md5=y(),window.html_entity={encode:p.encode,decode:p.decode},n(62759),window.Vue=i.default,window.VueSlider=s(),i.default.use(r(),{tooltip:!0}),window.MaskedInput=_.A,n(56555),n(69229),n(18055),n(76507),n(52519),n(32903),n(49360),n(52803),n(85771),n(97517),n(7137),n(39710),n(24678),n(38013),n(6039),n(53809),n(19673),n(73657),n(33443),n(90675),window.autosize=n(69493),n(80542),n(64733),window.JSZip=c(),n(4758),n(93708),n(67913),n(98924),n(4001),n(87945),n(4910),n(26064),n(65073),n(63919),n(24456),n(65821),n(68635),window.io=n(89460),n(73977),n(49314),n(19959),n(21365),n(67722),n(6514),n(39977),n(46955),window.moment=n(43181),window.reinitMoment=window.moment,n(92205),n(55345),n(88812),n(2338),n(61224),window.NProgress=n(63940),n(27353),window.Chart=u(),n(32339),window.CodeMirror=n(19394),n(1004),n(23548),n(36376),n(30635),n(14775),n(85899),n(10503),n(17360),window.PhotoSwipe=f(),window.PhotoSwipeUI_Default=n(61299),window.INIT_FROALA_CODE_SNIPPET_PLUGIN=w.A,n(45371),n(45505),n(68093),n(61628),n(43945),n(89749),n(96823),n(53458)(`./jquery.timeago.${spl_config.language}`),n(51620),n(97594),window.VueAvatar=m.A,add_socket_listener(`admin_logout_${spl_config.spl_user_id}`,(()=>{window.address_reload(!1,!0)})),window.logout_listener=`admin_logout_${spl_config.spl_user_id}`,load_io(),init_web_events(),n(44962)},44962:()=>{window.showModal=function(e,t){splynx_event_bus.emit(`show-modal-${e}`,t)},window.onShowModal=function(e,t){splynx_event_bus.off(`show-modal-${e}`),splynx_event_bus.on(`show-modal-${e}`,t)},window.closeModal=function(e){splynx_event_bus.emit("modal-dismiss",e)},window.onCloseModal=function(e){splynx_event_bus.reinitEvent("modal-dismiss",e)}},29512:(e,n,i)=>{"use strict";var o=i(17071),s=i(97199),a=i(54059),r=i(96720),l=i.n(r),c=i(38252),d=i(6504);const u={beforeCreate(){const e=this.$options;e.splang&&"object"==typeof e.splang?e.splang instanceof window.SPLANG_CLASS&&(this._splang=e.splang,this._splangWatcher=this._splang.watchSplangData()):this.$root&&this.$root.$splang&&this.$root.$splang instanceof window.SPLANG_CLASS?this._splang=this.$root.$splang:e.parent&&e.parent.splang&&e.parent.splang instanceof window.SPLANG_CLASS&&(this._splang=e.parent.splang)},beforeMount(){const e=this.$options;e.splang=e.splang||(e.splang?{}:null),e.splang?e.splang instanceof window.SPLANG_CLASS&&(this._splang._subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$splang&&this.$root.$splang instanceof window.SPLANG_CLASS||e.parent&&e.parent.splang&&e.parent.splang instanceof window.SPLANG_CLASS)&&(this._splang._subscribeDataChanging(this),this._subscribing=!0)},beforeDestroy(){if(!this._splang)return;const e=this;this.$nextTick((()=>{e._subscribing&&(e._splang._unsubscribeDataChanging(e),delete e._subscribing),e._splangWatcher&&(e._splangWatcher(),e._splang.destroyVM(),delete e._splangWatcher)}))}};var p=i(7999);class h{constructor(e){(0,c.A)(this,"messages",{}),(0,c.A)(this,"loadMessagesCallback",null),(0,c.A)(this,"_vm",null),(0,c.A)(this,"_splangWatcher",null),(0,c.A)(this,"_dataListeners",[]),(0,c.A)(this,"_listTranslateCategories",[]);const t=e.locale||"en";e.loadMessages&&"function"==typeof e.loadMessages&&(this.loadMessagesCallback=e.loadMessages),e.listTranslateCategories&&(this._listTranslateCategories=e.listTranslateCategories),this._initVm({locale:t}),this.loadLocale()}get vm(){return this._vm}get locale(){return this._vm.locale}set locale(e){this._vm.$set(this._vm,"locale",e),this.loadLocale()}loadLocale(){if((0,d.DQ)(this.messages,this.locale)||(this.messages[this.locale]={}),!(0,d.Tn)(this.loadMessagesCallback))return;let e=this.loadMessagesCallback(this.locale);null!==e&&"object"==typeof e&&(this.messages[this.locale]=e,this._forceUpdateListeners())}destroyVM(){this._vm.$destroy()}watchSplangData(){const e=this;return this._vm.$watch("$data",(()=>{e._forceUpdateListeners()}),{deep:!0})}_initVm(e){const{silent:t}=o.default.config;o.default.config.silent=!0,this._vm=new o.default({data:e}),o.default.config.silent=t}_forceUpdateListeners(){this._dataListeners.forEach((e=>{o.default.nextTick((()=>{e&&e.$forceUpdate()}))}))}_subscribeDataChanging(e){this._dataListeners.push(e)}_unsubscribeDataChanging(e){const t=this._dataListeners.indexOf(e);t>-1&&this._dataListeners.splice(t,1)}_t(e,t,n){if((0,d.DQ)(this.messages,[this.locale,e,t])){let i=this.messages[this.locale][e][t];return h._interpolateMessage(i,n)}return h._interpolateMessage(t,n)}t(e,t,n){return this._t(e,t,n)}static _interpolateMessage(e,t){if(t&&"string"==typeof e)for(let n in t)e=h._replaceAll(e,`{${n}}`,t[n]);return e}static _replaceAll(e,t,n){return"string"!=typeof e?e:e.replace(new RegExp(t,"g"),n)}}(0,c.A)(h,"install",void 0),(0,c.A)(h,"version",void 0),window.SPLANG_CLASS=h,h.install=function e(t){e.installed=!0;let n=t;return(n.version&&Number(n.version.split(".")[0])||-1)<2?void(0,d.R8)(`Splang (${e.version}) need to use Vue 2.0 or later (Vue: ${n.version})`):(function(e){Object.prototype.hasOwnProperty.call(e.prototype,"$splang")||Object.defineProperty(e.prototype,"$splang",{get(){return this._splang}}),e.prototype.$t=function(e,t,n){return this.$splang._t(e,t,n)},e.prototype.t=function(e,t,n){return this.$splang._t(e,t,n)}}(n),n.mixin(u),n.component(p.A.name,p.A),n.config.optionMergeStrategies.splang=function(e,t){return void 0===t?e:t},n)},h.version="__VERSION__",o.default.use(h);class f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.language=e,this.splang=new h({locale:this.language||"en",loadMessages:f.loadMessages,listTranslateCategories:t})}static loadMessages(e){return void 0===window.spl_localization_messages?(console.error(`Failed loading localization messages, language: ${e}`),null):window.spl_localization_messages}}const m=f,g=i(45422);const v=class extends g{reinitEvent(e,t){"string"==typeof e?"function"==typeof t?(this.off(e),this.on(e,t)):console.error(`Callback function for ${e} is not a function`):console.error("Event name is not a string")}};var b=i(48881);const y=new(i(45422).TinyEmitter);var w=i(8974);const _={name:"x-modal-wrapper",data:()=>({modals:[]}),created(){y.on("new",(e=>{if(this.getModal(e.name))return!1;let t={name:e.name,options:{...e}};t.options.props.name=t.name,this.modals.push(t),y.emit("opened",{name:e.name,instance:t})})),y.on("close",(e=>{let{name:t}=e,n=this.getModal(t);n&&(0,w.isset)(n,["options","onClose"])&&"function"==typeof n.options.onClose&&n.options.onClose(e.data),this.$modal.hide(t)})),y.on("dismiss",(e=>{let t=this.getModal(e);t&&(0,w.isset)(t,["options","onDismiss"])&&"function"==typeof t.options.onDismiss&&t.options.onDismiss(),this.$modal.hide(e)})),y.on("submit",(e=>{let{name:t,data:n}=e,i=this.getModal(t);i&&(0,w.isset)(i,["options","onSubmit"])&&"function"==typeof i.options.onSubmit&&i.options.onSubmit(n),this.$modal.hide(t)})),y.on("remove",(e=>{this.removeByName(e)}))},methods:{removeByName(e){this.modals=this.modals.filter((t=>t.name!==e))},getModal(e){return this.modals.find((t=>t.name===e))}},render(e){if(!this.modals.length)return null;let t=this.modals.map((t=>e(t.options.component,{props:{...t.options.props}})));return e("div",{class:"x-modal-wrapper"},[t])}},T={};T.install=e=>{e.prototype.$modals=new e({name:"XModalWrapper",created(){this.$on("new",(e=>{this.open(e)})),this.$on("close",(e=>{this.close(e.name,e.data)})),this.$on("dismiss",(e=>{this.dismiss(e||null)})),this.$on("submit",((e,t)=>{this.submit(e||null,t)})),this.$on("remove",(e=>{this.remove(e)}))},methods:{open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;y.emit("new",e)},close(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y.emit("close",{name:e,data:t})},dismiss(e){y.emit("dismiss",e)},submit(e,t){y.emit("submit",{name:e,data:t})},remove(e){y.emit("remove",e)}}}),e.mixin({created(){this.$on("modals:new",(e=>{y.emit("new",e)})),this.$on("modals:close",(e=>{y.emit("close",e)})),this.$on("modals:dismiss",(e=>{y.emit("dismiss",e)})),this.$on("modals:submit",((e,t)=>{y.emit("submit",{name:e,data:t})})),this.$on("modals:remove",(e=>{y.emit("remove",e)}))}})},"undefined"!=typeof window&&window.Vue&&window.Vue.use(T);const E=T,S={};S.install=e=>{e.prototype.setErrorState=function(e){const t=e??!1,n=()=>{window.closeAllVueDialogs(),window.closeAllDialogs(),this.$store.dispatch("setErrorState",e)};t&&t.show_error_page_view&&n(),t&&t.html&&t.html.show_error_page_view&&n()},e.prototype.initAjaxInterceptors=function(){if(window.error_information&&!(0,w.emptyObject)(window.error_information))return this.$store.dispatch("setErrorState",window.error_information),!1;$(document).ajaxError(((e,t)=>{if((0,w.interceptError)(t,(e=>{this.setErrorState(e)})),401===t.status)return void window.address_reload(!1,!0);if(403===t.status)return void this.setErrorState({code:403,error:t.responseJSON.error,show_error_page_view:!0});if(0===t.status)return;if(200===t.status)return;if(!window.showAjaxErrors)return;let n=t.responseJSON;const i=!(!n||!n.html)&&n.html.show_error_page_view;if(n&&n.error&&404!==t.status&&!i){let e=`Server error: ${n.error}`;show_error(e,5)}})),$(document).ready((()=>{$.ajaxSetup({beforeSend(e){e.setRequestHeader("Accept","application/json")}})}))}};const A=S,C={};C.install=e=>{e.prototype.$showNotify=function(e,t,n,i,o,s){if("string"!=typeof t&&t?.length)return t?.forEach((t=>{this.$showNotify(e,t,n,i,o,s)})),!0;this.$store.dispatch("global_notifications_store/showNotify",(0,w.formattedRequest)({type:e,message:t,timeout:n,toManager:i,actionButton:o,closeButton:s}))},e.prototype.$showError=function(e,t,n,i){this.$showNotify("error",e,t,n,null,null,i)},e.prototype.$showSuccess=function(e,t,n,i){this.$showNotify("success",e,t,n,null,null,i)},e.prototype.$showWarning=function(e,t,n,i){this.$showNotify("warning",e,t,n,null,null,i)},e.prototype.$showInformation=function(e,t,n,i){this.$showNotify("info",e,t,n,null,null,i)},e.prototype.$closeNotify=function(){this.$store.dispatch("global_notifications_store/cleanNotifications")},e.prototype.$interceptNotification=function(e,t){this.$store.dispatch("global_notifications_store/intercept",{interceptor:t,type:e})},e.prototype.$disableNotificationInterceptor=function(e){this.$store.dispatch("global_notifications_store/removeInterceptor",e)}};const k=C,x={};x.install=e=>{e.prototype.$openChatBox=function(){this.$store.dispatch("chatbox/open")},e.prototype.$closeChatBox=function(){this.$store.dispatch("chatbox/close")},e.prototype.$chatBoxNotify=function(){this.$store.dispatch("chatbox/notify")},e.prototype.$chatBoxShowList=function(){this.$store.dispatch("chatbox/showList")}};const I=x;var O=i(80375);i(39028);const L={search(e,t){let{commit:n}=e;if(t.length<2)return;let i=t.replace("#","%23");splynx_event_bus.emit("globalSearchProcessingStart"),(0,w.promisifiedAjax)({url:`/admin/search?q=${i}`}).then((e=>{n(b.hCl,e),splynx_event_bus.emit("globalSearchProcessingStop"),n(b.bKK,t)})).catch((()=>{n(b.hCl,{isError:!0,error:window.xApp.$splang.t("common","Error while search")}),splynx_event_bus.emit("globalSearchProcessingStop"),n(b.bKK,t)}))},clearSearch(e){let{commit:t}=e;t(b.hCl,{}),t(b.bKK,"")},updateActivePositionByKey(e,t){let{commit:n,state:i}=e,{activePosition:o}=i;38===t&&o--,40===t&&o++,o<0&&(o=0);let s=0;void 0!==i.searchResults.items&&(s=i.searchResults.items.length),o>=s&&(o=s-1),n(b.NdF,o)}},R={searchResults:e=>e.searchResults,activePosition:e=>e.activePosition,searchQuery:e=>e.searchQuery},N={[b.hCl](e,t){e.searchResults=t,e.activePosition=0},[b.bKK](e,t){e.searchQuery=t},[b.NdF](e,t){e.activePosition=t}},D={namespaced:!0,state:{searchResults:{},searchQuery:"",activePosition:0},actions:L,getters:R,mutations:N};function M(e){let t={};for(let n in e)t[n]=function(e){return e[n]};return t}const P={automaticEnabled:!1,adminCanPreview:!1,activeProgressIdentifiers:[],progressAlertTitle:"",currentProcessInfo:null,dataTableHeaders:[],dtColumnDefs:{},modelName:"",className:"",attributesMeta:{},model:{},partners:{},adminPartnerId:0},F={...M(P)},B={loadHistoryAndPreviewData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/finance/history--get-page-data",success:n=>{t(b.IMA,n),e()},error:e=>{n(e)}})}))}},H={[b.IMA](e,t){e.automaticEnabled=t.automaticEnabled,e.adminCanPreview=t.adminCanPreview,e.activeProgressIdentifiers=t.active_progress_identifiers,e.progressAlertTitle=t.title_for_progress_bars,e.dataTableHeaders=t.dataTableHeaders,e.dtColumnDefs=t.dtColumnDefs,e.modelName=t.modelName,e.partners=t.partners,e.attributesMeta=t.attributesMeta.attributes,e.className=t.attributesMeta.className,e.adminPartnerId=t.adminPartnerId,(0,w.isset)(t,"model")&&(e.model=t.model)}},j={namespaced:!0,state:P,actions:B,mutations:H,getters:F},U={dataTableHeaders:e=>e.dataTableHeaders,dtColumnDefs:e=>e.dtColumnDefs},W={loadModalInfo(e){let{commit:t}=e;return new Promise(((e,n)=>{(0,w.promisifiedAjax)({url:"/admin/administration/splynx/license--load-customers-count-license-information"}).then((i=>{i.result?(t(b.S$T,i.data),e()):n()})).catch((()=>{n()}))}))}},K={[b.S$T](e,t){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=t[n])}},G={namespaced:!0,modules:{splynx:{namespaced:!0,modules:{license:{namespaced:!0,modules:{customers_used_in_license:{state:{dataTableHeaders:[],dtColumnDefs:{}},getters:U,actions:W,mutations:K,namespaced:!0}}}}}}},V={model:{},attributesMeta:{},dataForForm:{},className:""},z={...M(V)},q={loadPageData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/administration/reports/hotspot-export--get-page-data",method:"GET",success:n=>{t(b.X0n,n),e()},error:e=>{n(e)}})}))}},Y={[b.X0n](e,t){for(let n in t)"attributesMeta"!==n?e[n]=t[n]:(e[n]=t[n].attributes,e.className=t[n].className)},[b.KzJ](e){e.model={},e.dataForForm={}}},X={namespaced:!0,state:V,actions:q,mutations:Y,getters:z};var Q=i(32908);const Z=(0,w.empty)(window.spl_config?.admin)?Q.Lj:Q.kT,J={collapseState:!1,mobileState:!1,mobileWidth:!1,window:{width:0},applicationPart:Z,localStorage:(0,w.supports_html5_storage)()?window.localStorage.getItem(`${Z}_menu_state`):"big"},ee="SET_MENU_STATE",te="SET_MOBILE_MENU_STATE",ne="SET_MOBILE_MENU_WIDTH",ie={toggleMenu(e,t){let{commit:n,state:i}=e;n(ee,t),t?localStorage.setItem(`${i.applicationPart}_menu_state`,"small"):localStorage.setItem(`${i.applicationPart}_menu_state`,"big")},showMobileMenu(e,t){let{commit:n}=e;n(te,t)},handleResize(e){let{commit:t,dispatch:n,state:i}=e;window.innerWidth<=1024?(n("toggleMenu",!1),t(ne,!0)):(n("toggleMenu","small"===localStorage.getItem(`${i.applicationPart}_menu_state`)),t(ne,!1))},isMobileWidth(e){let{state:t,dispatch:n}=e;window.innerWidth>1024?n("toggleMenu",!t.collapseState):n("showMobileMenu",!t.mobileState)}},oe={collapseState:e=>e.collapseState,mobileState:e=>e.mobileState,mobileWidth:e=>e.mobileWidth},se={[ee](e,t){e.collapseState=t},[te](e,t){e.mobileState=t},[ne](e,t){e.mobileWidth=t}},ae={namespaced:!0,state:J,actions:ie,getters:oe,mutations:se},re={activeTab:""},le="SET_ACTIVE_TAB",ce={switchTab(e,t){let{commit:n}=e;n(le,t)},clearTab(e){let{commit:t}=e;t(le,"")}},de={...M(re)},ue={[le](e,t){e.activeTab=t}},pe={namespaced:!0,state:re,actions:ce,getters:de,mutations:ue},he="SAVE_FILTER_STATE",fe="SAVE_BEFORE_URL_STATE",me="SAVE_ADVANCED_OPENED",ge={saveAdvancedOpenedState(e,t){let{commit:n}=e,{filterName:i,newState:o}=t;n(me,{filterName:i,newState:o})},saveFilterState(e,t){let{commit:n}=e,{filterName:i,newState:o}=t;n(he,{filterName:i,newState:o})},saveBeforeUrlState(e,t){let{commit:n}=e,{filterName:i,newState:o}=t;n(fe,{filterName:i,newState:o})}},ve={[fe](e,t){let{filterName:n,newState:i}=t;e.beforeUrlState[n]=i},[he](e,t){let{filterName:n,newState:i}=t;e.savedFilterStates[n]=i},[me](e,t){let{filterName:n,newState:i}=t;e.savedAdvancedOpened[n]=i}},be={namespaced:!0,state:{savedFilterStates:{},savedAdvancedOpened:{},beforeUrlState:{}},actions:ge,getters:{savedState:e=>e.savedFilterStates,savedAdvancedOpened:e=>e.savedAdvancedOpened,beforeUrlState:e=>e.beforeUrlState},mutations:ve};var ye=i(55127),we=i.n(ye);const _e="PUSH_NOTIFICATION",Te="REMOVE_NOTIFICATION",Ee="REMOVE_NOTIFICATIONS",Se="SET_INTERCEPTOR",Ae="REMOVE_INTERCEPTOR",Ce={intercept(e,t){let{commit:n}=e;n(Se,t)},removeInterceptor(e,t){let{commit:n}=e;n(Ae,t)},cleanNotifications(e){let{commit:t}=e;t(Ee)},showNotify(e,t){let{commit:n,state:i}=e;void 0===t.id&&(t.id=we()("id"));if(!["info","success","warning","error","text","message_and_action"].includes(t.type))throw new Error(`Failed to show notification. This type (${t.type}) of notification does not exist.`);if(t.message.search("</a>")>0){let e=(new DOMParser).parseFromString(t.message,"text/html"),n=e.querySelector("a");t.message=e.querySelector("body").innerHTML,!n?.getAttribute("onclick")&&n?.getAttribute("href")?t.action_button={...t.action_button,action:n?.getAttribute("href")}:t.action_button={...t.action_button,action:new Function([],n?.getAttribute("onclick"))},void 0===t.to_manager&&(t.to_manager=!0)}n(_e,t),(0,w.empty)(t.to_manager)||(t.action_button?.redirect_url&&!t?.action_button?.action&&(t.action_button.action=new Function([],`switch_page("${t.action_button.redirect_url}")`)),window.xApp.$store.dispatch("notifications/addNotificationToList",{type:t.type,message:t.message,action:t?.action_button?.action})),(0,w.empty)(t.timeout)||setTimeout((()=>{n(Te,t.id)}),1e3*t.timeout*((e,t,n)=>{let i=e.notifications.findIndex((e=>e.id===t));if(i<n)return 1;let o=1,s=0;for(;s<e.notifications.length;){if(s+=n,i<s)return o;o++}})(i,t.id,5))}},ke={getNotifications:e=>e.notifications,interceptors:e=>e.interceptors},xe={[_e](e,t){e.notifications.push(t)},[Ee](e){e.notifications=[]},[Te](e,t){let n=e.notifications.findIndex((e=>e.id===t));-1!==n&&e.notifications.splice(n,1)},[Se](e,t){e.interceptors[t.type]=t},[Ae](e,t){delete e.interceptors[t]}},$e={namespaced:!0,state:{notifications:[],interceptors:{}},actions:Ce,getters:ke,mutations:xe},Ie={markers:[],projects:{},priorities:[],partners:[],assignee_list:[],partner_id:0,labels:[],tags_for_render:[],map_type:"open_street",api_key:"",main_bounds_area:null,custom_bounds_area:null,date_range_default:"",error:null,icons_config:{},projects_to_workflows:{},workflow_items:{},selected_project:0},Oe={...M(Ie)},Le={loadPageData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/scheduling/maps--get-page-data",method:"GET",success:n=>{t(b.Ujl,n),e()},error:e=>{n(e)}})}))}},Re={[b.Ujl](e,t){for(let n in t)e[n]=t[n]},[b.xN9](e,t){e.markers=t}},Ne={namespaced:!0,state:Ie,actions:Le,mutations:Re,getters:Oe},De={namespaced:!0,state:{backlogTasksCount:0,taskCoordinate:"",taskAddress:""},getters:{getBacklogTasksCount:e=>e.backlogTasksCount,getTaskCoordinate:e=>e.taskCoordinate,getTaskAddress:e=>e.taskAddress},actions:{setCoordinateAction(e,t){let{commit:n}=e;n("setTaskCoordinate",t)},setAddressAction(e,t){let{commit:n}=e;n("setTaskAddress",t)}},mutations:{setBacklogTasksCount(e,t){e.backlogTasksCount=t},setTaskCoordinate(e,t){e.taskCoordinate=t},setTaskAddress(e,t){e.taskAddress=t}}};var Me=i(41857);const Pe={admin:window?.spl_config?.spl_user_id||"",messengers:[],columns:[],headers:[]},Fe={[b.wse](e,t){e.messengers=t},[b.FoM](e,t){e.columns=t},[b.oZ0](e,t){e.headers=t}},Be={namespaced:!0,state:Pe,getters:{...M(Pe)},mutations:Fe,actions:{async getConversationsPageData(e){let{commit:t}=e;const n=new Me.A("customer"),i=await n.getConversationsPageData();t(b.wse,i.messengers),t(b.FoM,i.columns),t(b.oZ0,i.tableHeaders)}}},He={admin:window?.spl_config?.spl_user_id||"",messengers:[],columns:[],headers:[]},je={[b.Kon](e,t){e.messengers=t},[b.X4L](e,t){e.columns=t},[b.kcK](e,t){e.headers=t}},Ue={namespaced:!0,state:He,getters:{...M(He)},mutations:je,actions:{async getConversationsPageData(e){let{commit:t}=e;const n=new Me.A("lead"),i=await n.getConversationsPageData();t(b.Kon,i.messengers),t(b.X4L,i.columns),t(b.kcK,i.tableHeaders)}}};class We{static loadData(){let e=empty(window.spl_config.customer)?"admin":"portal";return new Promise((t=>{(0,w.promisifiedAjax)({method:"GET",url:`/${e}/load-data--get-all-taxes-list`}).then((e=>{t(e)}))}))}static loadTaxDeleteModalData(e){return new Promise((t=>{(0,w.promisifiedAjax)({method:"GET",url:e}).then((e=>{t(e)}))}))}}function Ke(e,t){let n={id:e.id,text:`${e.rate_formatted} (${e.name})`};return e.archived&&(n.badge={text:t,background:"bg-secondary"}),n}const Ge=function(e){if(!e.taxes?.length&&!e.taxGroups?.length)return{};const t=window.xApp.$splang.t("finance","Archived"),n={};return e.taxes?.length&&(n.taxes=[],e.taxes.forEach((e=>{n.taxes.push(Ke(e,t))}))),e.taxGroups?.length&&(n.taxGroups=[],e.taxGroups.forEach((e=>{n.taxGroups.push(Ke(e,t))}))),n},Ve={dataTableHeaders:[],dtColumnDefs:[],columns:{},modelName:"",statuses:{},taxModal:{},taxArchiveModalData:{error:!1,relations:[],modules:[],usedInConfig:[],relatedGroups:[]},taxDeleteModalData:{error:!1,relations:[],modules:[],usedInConfig:[],relatedGroups:[]},taxGroupModalData:{},taxes:{}},ze="single",qe={...M(Ve),getRawTaxes:e=>e.taxes,getActiveTaxes(e){const{taxes:t}=e,n=Object.keys(t).map((e=>t[e]));let i={},o=n.filter((e=>!e.archived&&e.type===ze));o.length&&(i.taxes=o);let s=n.filter((e=>!e.archived&&"group"===e.type));return s.length&&(i.taxGroups=s),i},getActiveTaxesWithCurrentTax:(e,t)=>e=>{if(""===(e=parseInt(e)))return Ge(t.getActiveTaxes);let n=t.getRawTaxes;if(!isset(n,[e]))return show_error(window.xApp.$splang.t("finance","Tax or Group with ID {tax_id} not found",{tax_id:e}),4),Ge(t.getActiveTaxes);let i=n[e];if(!i.archived)return Ge(t.getActiveTaxes);const o=t.getActiveTaxes;if(i.type===ze){let e={};return e=Object.prototype.hasOwnProperty.call(o,"taxes")?[i,...o.taxes]:[i],Ge({...o,taxes:e})}return Object.prototype.hasOwnProperty.call(o,"taxGroups")?Ge({...o,taxGroups:[i,...o.taxGroups]}):Ge({...o,taxGroups:[i]})},getActiveTaxWithoutCurrent:(e,t)=>e=>{e=parseInt(e);let n=t.getActiveTaxes,i={};return Object.prototype.hasOwnProperty.call(n,"taxes")&&(i.taxes=n.taxes.filter((t=>t.id!==e))),Object.prototype.hasOwnProperty.call(n,"taxGroups")&&(i.taxGroups=n.taxGroups.filter((t=>t.id!==e))),Ge(i)}},Ye={loadPageTaxesData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/config/finance/taxes--get-page-data",success:n=>{t(b.Oth,n),e()},error:e=>{n(e)}})}))},loadTaxModalData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:t.url,success:t=>{n(b.mq3,t),e()},error:e=>{i(e)}})}))},loadTaxArchiveModalData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:t.url,success:t=>{n(b.b4t,t),e()},error:e=>{i(e)}})}))},async loadTaxDeleteModalData(e,t){let{commit:n}=e;const i=await We.loadTaxDeleteModalData(t.url);return n(b.O8u,i),!0},resetTaxArchiveModalData(e){let{commit:t}=e;t(b.mOy)},resetTaxDeleteModalData(e){let{commit:t}=e;t(b.x2u)},loadTaxGroupModalData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:t.url,success:t=>{n(b.snm,t),e()},error:e=>{i(e)}})}))},async loadTaxes(e){let{state:t,commit:n}=e;if(!(0,w.emptyObject)(t.taxes))return;const i=await We.loadData();n(b.Z2q,i)},async reloadTaxes(e){let{commit:t,dispatch:n}=e;t(b.Z2q,{}),n("loadTaxes")}},Xe={[b.Oth](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]},[b.mq3](e,t){for(let n in t)e.taxModal[(0,w.toCamelCase)(n)]=t[n]},[b.b4t](e,t){for(let n in t)e.taxArchiveModalData[(0,w.toCamelCase)(n)]=t[n]},[b.O8u](e,t){for(let n in t)e.taxDeleteModalData[(0,w.toCamelCase)(n)]=t[n]},[b.mOy](e){e.taxArchiveModalData={error:!1,hasRelations:!1}},[b.x2u](e){e.taxDeleteModalData={}},[b.snm](e,t){for(let n in t)e.taxGroupModalData[(0,w.toCamelCase)(n)]=t[n]},[b.Z2q](e,t){e.taxes=t}},Qe={namespaced:!0,state:Ve,actions:Ye,mutations:Xe,getters:qe},Ze={showSidebar(e,t){let{commit:n}=e;n(b._Sh,!0),n(b.Ddi,t)},hideSidebar(e,t){let{dispatch:n}=e;n("checkUnsavedData",t)},toggleSidebar(e){let{commit:t,state:n}=e;t(b._Sh,!n.sidebarState)},checkUnsavedData(e,t){let{commit:n}=e,i=$(".sidebar-wrapper");window.isHaveUnsavedData(i)?window.showUnsavedDataDialog(i,(()=>{window.forgetUnsavedData(i),"string"==typeof t&&new Function(t)(),"function"==typeof t&&t(),t instanceof Array&&t.forEach((e=>{if("string"==typeof e)return new Function(e)(),!0;"function"==typeof e&&e()})),n(b._Sh,!1)}),(()=>!1),window.xApp.$splang.t("common","Are you sure you want to close dialog? All unsaved data will be lost.")):n(b._Sh,!1)}},Je={sidebarState:e=>e.sidebarState,sidebarOptions:e=>e.sidebarOptions},et={[b._Sh](e,t){e.sidebarState=t},[b.Ddi](e,t){e.sidebarOptions=t}},tt={namespaced:!0,state:{sidebarState:!1,sidebarOptions:{title:"",component:"",props:""}},actions:Ze,getters:Je,mutations:et},nt={customerFormRelatedId:0,customerFormRelatedServiceId:0,mainFormShowWarningIncorrectValues:{},taskGeoDataParamsForChange:{}},it={...M(nt)},ot={[b.rTg](e,t){e.customerFormRelatedId=t},[b.Lvq](e,t){e.customerFormRelatedServiceId=t},[b.oOx](e,t){e.mainFormShowWarningIncorrectValues=t},[b.iyV](e,t){e.taskGeoDataParamsForChange=t}},st={namespaced:!0,state:nt,mutations:ot,actions:{setCustomerFormRelatedId(e,t){let{commit:n}=e;n(b.rTg,t)},setCustomerFormRelatedServiceId(e,t){let{commit:n}=e;n(b.Lvq,t)},setMainFormShowWarningIncorrectValues(e,t){let{commit:n}=e;n(b.oOx,t)},setTaskGeoDataChangeParams(e,t){let{commit:n}=e;n(b.iyV,t)}},getters:it};class at{constructor(e,t){this.url=e,this.data=t}async getGeoData(){return(0,w.promisifiedAjax)({url:this.url,method:"POST",data:this.data})}async getMapConfig(){return(0,w.promisifiedAjax)({url:this.url})}}const rt={coordinate:"",address:"",mapConfig:{}},lt={...M(rt)},ct={setCoordinateAction(e,t){let{commit:n}=e;n("setCoordinate",t)},setAddressAction(e,t){let{commit:n}=e;n("setAddress",t)},setMapConfigAction(e,t){let{commit:n}=e;n("setMapConfig",t)},async setGeoData(e,t){let{dispatch:n}=e,i=new at("/admin/tools--get-geo-data",t),{result:o,coordinates:s,message:a}=await i.getGeoData();return o?(n("setCoordinateAction",s),show_success(a,5)):show_error(a,5),{result:o,coordinates:s,message:a}},async loadMapConfig(e){let{dispatch:t}=e,n=new at("/admin/get-data--map-config"),i=await n.getMapConfig();t("setMapConfigAction",(0,w.formattedResponse)(i))}},dt={setCoordinate(e,t){e.coordinate=t},setAddress(e,t){e.address=t},setMapConfig(e,t){e.mapConfig=t}},ut={namespaced:!0,state:rt,getters:lt,actions:ct,mutations:dt},pt={model:{},contactsData:{contacts:[],contactsMeta:{}},accessData:{accessAction:"",accessController:""},documentsData:{data:[],removeUrl:"",uploadUrl:""},photosData:{data:[],removeUrl:"",uploadUrl:""},attributesMeta:{additional_attributes:{},attributes:{}},canUpdate:!1,addonTabs:[]},ht={attributesMeta:e=>e.attributesMeta,...M(pt)},ft={updateModel(e,t){let{commit:n}=e;n(b._5w,t)},updateAddonTabs(e,t){let{commit:n}=e;n(b.m59,t)},updateAttributesMeta(e,t){let{commit:n}=e;n(b.mUS,t)},updateContactsData(e,t){let{commit:n}=e;n(b.L93,t)},updateAccessData(e,t){let{commit:n}=e;n(b.ekV,t)},updateDocumentsData(e,t){let{commit:n}=e;n(b.soF,t)},updatePhotosData(e,t){let{commit:n}=e;n(b.rx0,t)},updateCanUpdate(e,t){let{commit:n}=e;n(b.KWu,t)}},mt={[b._5w](e,t){e.model={...t}},[b.m59](e,t){e.addonTabs=[...t]},[b.mUS](e,t){e.attributesMeta={...t}},[b.L93](e,t){e.contactsData={...t}},[b.ekV](e,t){e.accessData={...t}},[b.soF](e,t){e.documentsData={...t}},[b.KWu](e,t){e.canUpdate=t},[b.rx0](e,t){e.photosData={...t}}},gt={namespaced:!0,state:pt,actions:ft,mutations:mt,getters:ht},vt={rowsForUpdate:[],idsForDelete:[],rowsForAdd:[],needToUpdate:!1},bt="ADD_ROWS",yt="UPDATE_ROWS",wt="DELETE_ROWS",_t="NEED_UPDATE_FLAG",Tt={addTableRows(e,t){let{commit:n}=e;n(bt,t),n(_t,!(0,w.empty)(t))},updateTableRows(e,t){let{commit:n}=e;n(yt,t),n(_t,!(0,w.empty)(t))},deleteRows(e,t){let{commit:n}=e;n(wt,t),n(_t,!(0,w.empty)(t))},clearNeedToUpdate(e,t){let{commit:n}=e;n(_t,t)}},Et={...M(vt)},St={[bt](e,t){e.rowsForAdd=t},[yt](e,t){e.rowsForUpdate=t},[wt](e,t){"string"==typeof t&&(t=t.split(",")),e.idsForDelete=t},[_t](e,t){e.needToUpdate=t,t&&splynx_event_bus.emit("clear-selection-data-table")}},At={namespaced:!0,state:vt,actions:Tt,getters:Et,mutations:St};var Ct=i(66423),kt=i(65474),xt=i(92553),$t=i(98067),It=i(37293),Ot=(i(58740),i(35207),new WeakMap),Lt=new WeakSet;class Rt{constructor(){(0,Ct.A)(this,Lt),(0,kt.A)(this,Ot,void 0),(0,It.A)(Ot,this,{})}async fetchPermissions(){const e=await(0,w.promisifiedAjax)({url:"/admin/get-data--permissions"});(0,$t.A)(Lt,this,Nt).call(this,e.permissions)}getAllPermissions(){return(0,xt.A)(Ot,this)}getPermissions(e){if(Object.hasOwn((0,xt.A)(Ot,this),e))return(0,xt.A)(Ot,this)[e];throw new Error(`Controller ${e} not found`)}}function Nt(e){(0,It.A)(Ot,this,e)}const Dt={instanceClass:null,map:{}},Mt={...M(Dt)},Pt={async loadPermissions(e){let{dispatch:t,state:n}=e;return n.instanceClass||(t("createInstance"),await t("fetchDataInstance")),!1},createInstance(e){let{commit:t}=e;const n=new Rt;t(b.wBM,n)},async fetchDataInstance(e){let{commit:t,state:n}=e;await n.instanceClass.fetchPermissions(),t(b.OXV,n.instanceClass.getAllPermissions())}},Ft={[b.wBM](e,t){e.instanceClass=t},[b.OXV](e,t){e.map=t}},Bt={namespaced:!0,state:Dt,actions:Pt,mutations:Ft,getters:Mt},Ht={setTitle(e,t){let{commit:n}=e;n(b.Y4l,t??"")},setErrorState(e,t){let{commit:n}=e;n(b.Mgd,t)},updateAdminProfileImage(e){let{commit:t}=e;$.ajax({dataType:"json",url:"/admin/profile--get-photo-url",success:e=>{t(b.yri,e.url)}})},setLogoutTimeout(e,t){let{commit:n}=e;window.logout_is_enabled=0!==t,window.logout_timer_now=window.time(),window.logout_time=t,n(b.oSh,t),setInterval(window.logout_timer,1e3)}},jt={getMenu:e=>e.menu,admin:e=>e.admin,headerShortcuts:e=>e.headerShortcuts,logo:e=>e.logo,footer:e=>e.footer,serverSideConfig:e=>e.serverSideConfig,license:e=>e.license,pageTitle:e=>e.pageTitle,refreshRouteKey:e=>e.refreshRouteKey,documentationConfig:e=>e.documentationConfig,onBoardingSteps:e=>e.onBoardingSteps,firstDayOfWeek:e=>e.firstDayOfWeek,weekends:e=>e.weekends,referencesApp:e=>e.referencesApp,showPageError:e=>e.showPageError},Ut={[b.iye](e,t){e.numberConfig=t},[b.plQ](e,t){e.menu=t},[b.rOv](e,t){e.admin=t},[b.yri](e,t){e.admin&&(e.admin={...e.admin,photo_url:t})},[b.jzd](e,t){e.headerShortcuts=t},[b.j08](e,t){e.logo=t},[b.dF0](e,t){e.footer=t},[b._tS](e,t){e.serverSideConfig=t},[b.l7W](e,t){e.license=t},[b.oSh](e,t){e.admin&&(e.admin.timeout=t)},[b.Y4l](e,t){e.pageTitle=t,(0,w.empty)(t)||($.address.title(`${window.admin_config_admin_title}: ${t.replace(/&amp;/g,"&")}`),$(".page-name").empty().text(t.replace(/&amp;/g,"&")))},[b.qPd](e){e.refreshRouteKey=(new Date).getTime()},[b._vr](e,t){e.documentationConfig=JSON.parse(t)},[b.qPR](e,t){e.onBoardingSteps=t},[b.JyH](e,t){void 0===e.referencesApp?e.referencesApp=t:e.referencesApp=Object.assign(e.referencesApp,t)},[b.Ey4](e,t){e.firstDayOfWeek=t},[b.OPw](e,t){e.weekends=t},[b.Mgd](e,t){e.showPageError=t}},Wt={searchEntities:e=>e.entities},Kt={[b.oiR](e,t){e.entities=t}},Gt={namespaced:!0,state:()=>({entities:{}}),actions:{},mutations:Kt,getters:Wt};i(43838);const Vt={module:e=>e.module,moduleTitle:e=>e.moduleTitle,entry_points:e=>e.entry_points,attributeLabels:e=>e.attributeLabels,placesArray:e=>e.placesArray,sizeArray:e=>e.sizeArray,pointTypesAdmin:e=>e.pointTypesAdmin,pointTypesPortal:e=>e.pointTypesPortal,partners:e=>e.partners,locations:e=>e.locations,paymentTypes:e=>e.paymentTypes,rootsCode:e=>e.rootsCode,rootsTab:e=>e.rootsTab,rootsOther:e=>e.rootsOther,rootsPortalCode:e=>e.rootsPortalCode,rootsPortalOther:e=>e.rootsPortalOther,rootsMobile:e=>e.rootsMobile,adminModels:e=>e.adminModels,portalModels:e=>e.portalModels,paymentAccounts:e=>e.paymentAccounts,rootsWithBackground:e=>e.rootsWithBackground,defaultBackgroundColors:e=>e.defaultBackgroundColors,placeLocations:e=>e.placeLocations,moduleLabels:e=>e.moduleLabels,moduleTypesArray:e=>e.moduleTypesArray,installModuleRoots:e=>e.installModuleRoots},zt={loadModuleInfo(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/modules/list--get-module-info?module=${t}`,success:i=>{i.module=t,n(b.VvP,i),e()},error:()=>{i()}})}))},loadInstallModuleInfo(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/config/modules/install--get-info",success:n=>{t(b.jPf,n),e()},error:()=>{n()}})}))},loadEntryPoints(e){let{commit:t,state:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/modules/list--get-entry-points-of-module?module=${n.module}`,method:"GET",success:n=>{t(b.Ohd,n.points),e()},error:()=>{i()}})}))},saveEntryPoints(e,t){let{state:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/modules/list--save-entry-points?module=${n.module}`,method:"POST",data:{points:t},success:t=>{t.result?(show_success(window.xApp.$splang.t("config","Entry point saved!"),4),e()):(showErrors(t.message,6),i())},error:()=>{i()}})}))}},qt={[b.Ohd](e,t){e.entry_points=t},[b.VvP](e,t){e.module=t.module,e.moduleTitle=t.moduleTitle,e.entry_points=t.points,e.locations=t.locations,e.partners=t.partners,e.paymentTypes=t.paymentTypes,e.paymentAccounts=t.paymentAccounts,e.attributeLabels=t.attributeLabels,e.placesArray=t.placesArray,e.sizeArray=t.sizeArray,e.pointTypesAdmin=t.pointTypesAdmin,e.pointTypesPortal=t.pointTypesPortal,e.rootsCode=t.rootsCode,e.rootsTab=t.rootsTab,e.rootsOther=t.rootsOther,e.rootsPortalCode=t.rootsPortalCode,e.rootsPortalOther=t.rootsPortalOther,e.rootsMobile=t.rootsMobile,e.adminModels=t.adminModels,e.portalModels=t.portalModels,e.rootsWithBackground=t.rootsWithBackground,e.defaultBackgroundColors=t.defaultBackgroundColors,e.placeLocations=t.placeLocations},[b.jPf](e,t){e.moduleLabels=t.moduleLabels,e.moduleTypesArray=t.moduleTypesArray,e.installModuleRoots=t.installModuleRoots},[b.qcD](e,t){e.entry_points.splice(t,1)},[b.ow4](e,t){t||(t={id:null,background:"",code:"",deleted:null,enabled:!0,icon:"fa-cog",location:"before_content",location_geo:"",model:"",module:e.module,name:"",partners:"",payment_account_id:"0",payment_type:"",place:"admin",root:"",size:"large",title:"",type:"code",url:""}),e.entry_points.push(t)}},Yt={namespaced:!0,state:{module:"",moduleTitle:"Module",entry_points:[],locations:[],partners:[],paymentTypes:[],paymentAccounts:[],placesArray:[],attributeLabels:{},sizeArray:{},pointTypesAdmin:{},pointTypesPortal:{},rootsCode:{},rootsTab:{},rootsOther:{},rootsPortalCode:{},rootsPortalOther:{},rootsMobile:{},adminModels:{},portalModels:{},rootsWithBackground:{},defaultBackgroundColors:{},placeLocations:{},moduleLabels:{},moduleTypesArray:{},installModuleRoots:{}},actions:zt,mutations:qt,getters:Vt},Xt={locations:e=>e.locations,locationsWithAllOption(e){let t={};t[0]=window.xApp.$splang.t("common","All");for(let n in e.locations)t[n]=e.locations[n];return t},locationsWithAnyOption(e){let t={};t[0]=window.xApp.$splang.t("common","Any");for(let n in e.locations)t[n]=e.locations[n];return t}},Qt={loadLocations(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/load-data--get-all-locations-list",success:n=>{t(b._Y$,n),e()},error:()=>{n()}})}))}},Zt={[b._Y$](e,t){e.locations=t}},Jt={namespaced:!0,state:{locations:{}},actions:Qt,mutations:Zt,getters:Xt},en={partners:{}},tn={partners:e=>e.partners,partnersWithDefaultOption(){let e={};e[0]=window.xApp.$splang.t("common","Default");for(let t in en.partners)e[t]=en.partners[t];return e},partnersWithAnyOption(){let e={};e[0]=window.xApp.$splang.t("common","Any");for(let t in en.partners)e[t]=en.partners[t];return e},partnersWithAllOption(e){let t={};t[0]=window.xApp.$splang.t("common","All");for(let n in e.partners)t[n]=e.partners[n];return t}},nn={loadPartners(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({method:"GET",url:"/admin/load-data--get-all-partners-list",success:n=>{t(b.xL0,n),e()},error:()=>{n()}})}))}},on={[b.xL0](e,t){e.partners=t}},sn={namespaced:!0,state:en,actions:nn,mutations:on,getters:tn},an={list:e=>e.leads,filteredList:e=>e.filteredLeads,stages:e=>e.stages},rn={loadBoardInfo(e,t){let{commit:n}=e,{simpleParams:i,advancedParams:o}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/crm/leads/list--load-data-for-board?${i}`,data:o,method:"POST",success:t=>{if(clearTimeout(window.leadsNeedReloadMyTimeout),t.result){let i=Object.keys(t.message.leads).length>0?t.message.leads:{},o=Object.values(t.message.stages);o.forEach((e=>{isset(i,e.id)||(i[e.id]=[])})),n(b.RvZ,i),n(b.rUb,{...i}),n(b.T6p,o),e()}},error:e=>{t(e)}})}))},saveItemStatus(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:"/admin/crm/leads/view--change-status",method:"POST",data:{newStatusId:t.newStatus,leadsIds:[t.itemId]},success:o=>{clearTimeout(window.leadsNeedReloadMyTimeout),o.result?(n(b.zGj,t),isset(o.message,"lead")&&n(b.NBY,{board:t.newStatus,leadId:t.leadId,info:o.message.lead}),e(o)):i(o.message)}})}))},moveAllBoard(e,t){let{commit:n,state:i}=e,{toStatus:o,fromStatus:s}=t;return new Promise(((e,t)=>{if(!isset(i.leads,s))return void e();isset(i.leads,o)||n(b.uUH,{board:o,items:[]});let a=[];i.leads[s].forEach((e=>{a.push(e.id)})),$.ajax({url:"/admin/crm/leads/view--change-status",method:"POST",data:{newStatusId:o,leadsIds:a},success:a=>{if(clearTimeout(window.leadsNeedReloadMyTimeout),isset(a,"result")&&!a.result)return void t(a.message);let r=i.leads[o].slice();i.leads[s].forEach((e=>{r.push(e)})),n(b.uUH,{board:o,items:r}),n(b.uUH,{board:s,items:[]}),n(b.o_N,{board:o,items:r.slice()}),n(b.o_N,{board:s,items:[]}),e(a)}})}))},setNeedUpdateState(e,t){let{commit:n}=e;n(b.Igm,t)}},ln={[b.Igm](e,t){e.needUpdate=t},[b.RvZ](e,t){e.leads=t},[b.uUH](e,t){void 0===e.leads[t.board]&&(e.leads[t.board]=[]),e.leads[t.board]=t.leads},[b.rUb](e,t){e.filteredLeads=t},[b.o_N](e,t){void 0===e.filteredLeads[t.board]&&(e.filteredLeads[t.board]=[]),e.filteredLeads[t.board]=t.items},[b.oOu](e){e.filteredLeads={...e.leads}},[b.T6p](e,t){e.stages=t},[b.zGj](e,t){let{oldStatus:n,newStatus:i,leadId:o,position:s}=t,a=e.leads[n].find((e=>parseInt(e.id)===parseInt(o)));isset(e.leads,i)||(e.leads[i]=[]),empty(a)||pn(e.leads,n,i,e.leads[n].indexOf(a),a,s)},[b.NBY](e,t){let{board:n,leadId:i,info:o}=t;cn(e.leads,{board:n,leadId:i,info:o}),cn(e.filteredLeads,{board:n,leadId:i,info:o})},[b.RCP](e,t){let{board:n,leadId:i}=t;un(e.leads,{board:n,leadId:i}),un(e.filteredLeads,{board:n,leadId:i})},[b.LEh](e,t){let{lead:n}=t;dn(e.leads,n),dn(e.filteredLeads,n)}};function cn(e,t){let{board:n,leadId:i,info:o}=t,s=e[n].find((e=>parseInt(e.id)===parseInt(i))),a=e[n].indexOf(s);-1!==a&&(e[n][a]=o)}function dn(e,t){let n=function(e,t){t=parseInt(t);for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let i=e[n];if(!(i.length<=0))for(let e=0;e<i.length;e++)if(parseInt(i[e].id)===t)return{board:n,lead:i[e],index:e}}return null}(e,t.id);null!==n&&(e[n.board].splice(n.index,1,{...t}),parseInt(n.board)!==parseInt(t.stage)&&pn(e,n.board,t.stage,n.index,{...t},0))}function un(e,t){let{board:n,leadId:i}=t,o=e[n].find((e=>parseInt(e.id)===parseInt(i))),s=e[n].indexOf(o);-1!==s?e[n].splice(s,1):Object.entries(e).forEach((t=>{const[n,o]=t;Object.entries(o).forEach((t=>{const[o,s]=t;parseInt(i)===parseInt(s.id)&&e[n].splice(o,1)}))}))}function pn(e,t,n,i,o,s){e[t].splice(i,1),e[o.stage].splice(s,0,{...o})}const hn={namespaced:!0,state:{leads:{},stages:{},filteredLeads:{},needUpdate:!1},actions:rn,mutations:ln,getters:an},fn={tasks:{},stages:{},filteredTasks:{},projectName:""},mn={getTitle:()=>fn.projectName,list:e=>e.tasks,filteredList:e=>e.filteredTasks,stages:e=>e.stages},gn={loadBoardInfo(e,t){let{commit:n}=e,{advancedParams:i}=t;return new Promise(((e,t)=>{$.ajax({url:"/admin/scheduling/boards--reload-board",data:i,method:"POST",success:t=>{if(t.result){let i=Object.keys(t.message.tasks).length>0?t.message.tasks:{},o=Object.values(t.message.workflow||{});o.sort(((e,t)=>parseInt(e.position)>parseInt(t.position)?1:-1)),o.forEach((e=>{isset(i,e.id)||(i[e.id]=[])})),n(b.fzQ,t.message.projectTitle||""),n(b.QKJ,i),n(b.eVV,{...i}),n(b.T6p,o),e()}else showErrors(t.message,4)},error:e=>{t(e)}})}))},saveItemStatus(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/scheduling/boards--change-tasks-status?taskId=${t.itemId}`,method:"POST",data:{newStatus:t.newStatus,tasksIds:[t.itemId]},success:o=>{o.result?(n(b.Wqr,t),isset(o.message,"task")&&n(b.G5_,{board:t.newStatus,itemId:t.itemId,info:o.message.tasks}),e(o)):i(o.message)}})}))},moveAllBoard(e,t){let{commit:n,state:i}=e,{toStatus:o,fromStatus:s}=t;return new Promise(((e,t)=>{if(!isset(i.tasks,s))return;isset(i.tasks,o)||n(b.Tjh,{board:o,items:[]});let a=[];i.tasks[s].forEach((e=>{a.push(e.id)})),$.ajax({url:"/admin/scheduling/tasks--change-status",method:"POST",data:{newStatusId:o,tasksIds:a},success:a=>{if(isset(a,"result")&&!a.result)return void t(a.message);let r=i.tasks[o].slice();i.tasks[s].forEach((e=>{r.push(e)})),n(b.Tjh,{board:o,items:r}),n(b.Tjh,{board:s,items:[]}),n(b.Zx1,{board:o,items:r.slice()}),n(b.Zx1,{board:s,items:[]}),e(a.message.message)}})}))}},vn={[b.QKJ](e,t){e.tasks=t},[b.fzQ](e,t){e.projectName=t},[b.Tjh](e,t){void 0===e.tasks[t.board]&&(e.tasks[t.board]=[]),e.tasks[t.board]=t.items},[b.eVV](e,t){e.filteredTasks=t},[b.Zx1](e,t){void 0===e.filteredTasks[t.board]&&(e.filteredTasks[t.board]=[]),e.filteredTasks[t.board]=t.items},[b.$Md](e){e.filteredTasks={...e.tasks}},[b.T6p](e,t){e.stages=t},[b.Wqr](e,t){let{oldStatus:n,newStatus:i,itemId:o,position:s}=t,a=e.tasks[n].find((e=>parseInt(e.id)===parseInt(o)));isset(e.tasks,i)||(e.tasks[i]=[]),empty(a)||_n(e.tasks,n,i,e.tasks[n].indexOf(a),a,s)},[b.G5_](e,t){let{board:n,itemId:i,info:o}=t;bn(e.tasks,{board:n,itemId:i,info:o}),bn(e.filteredTasks,{board:n,itemId:i,info:o})},[b.enW](e,t){let{board:n,itemId:i}=t;wn(e.tasks,{board:n,itemId:i}),wn(e.filteredTasks,{board:n,itemId:i})},[b.UtX](e,t){let{task:n}=t;yn(e.tasks,n),yn(e.filteredTasks,n)}};function bn(e,t){let{board:n,itemId:i,info:o}=t,s=e[n].find((e=>parseInt(e.id)===parseInt(i))),a=e[n].indexOf(s);-1!==a&&(e[n][a]=o)}function yn(e,t){let n=function(e,t){t=parseInt(t);for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let i=e[n];if(!(i.length<=0))for(let e=0;e<i.length;e++)if(parseInt(i[e].id)===t)return{board:n,task:i[e],index:e}}return null}(e,t.id);null!==n&&(e[n.board].splice(n.index,1,{...t}),parseInt(n.board)!==parseInt(t.workflow_status_id)&&_n(e,n.board,t.workflow_status_id,n.index,{...t},0))}function wn(e,t){let{board:n,itemId:i}=t,o=e[n].find((e=>parseInt(e.id)===parseInt(i))),s=e[n].indexOf(o);-1!==s?e[n].splice(s,1):Object.entries(e).forEach((t=>{const[n,o]=t;Object.entries(o).forEach((t=>{const[o,s]=t;parseInt(i)===parseInt(s.id)&&e[n].splice(o,1)}))}))}function _n(e,t,n,i,o,s){e[t].splice(i,1),e[n].splice(s,0,{...o})}const Tn={namespaced:!0,state:fn,actions:gn,mutations:vn,getters:mn},En={resources:{class_name:"",options:{},breadcrumbs:{},sidebar_data:{}}},Sn={...M(En),className:e=>e.resources.class_name,options:e=>e.resources.options,breadcrumbs:()=>En.resources.breadcrumbs},An={updateResources(e,t){let{commit:n}=e;n(b.S6_,t)},updateCustomerOptions(e,t){let{commit:n}=e;n(b.icF,t)},updateSidebarCustomerData(e,t){let{commit:n}=e;n(b.$tU,t)},updateSidebarServiceData(e,t){let{commit:n}=e;n(b._m3,t)}},Cn={[b.S6_](e,t){e.resources={...t}},[b.icF](e,t){e.resources.options.customer_options=t},[b.$tU](e,t){e.resources.sidebar_data.customer={...t}},[b._m3](e,t){e.resources.sidebar_data.service={...t}}},kn={namespaced:!0,state:En,actions:An,mutations:Cn,getters:Sn},xn={model:{},attributes_meta:{additional_attributes:{},attributes:{}},permissions:{},is_lead:!1,timerData:{},tabsCounters:{},checkAccessController:"",checkAccessAction:""},$n={attributesMeta:e=>e.attributes_meta,...M(xn)},In={updateAccess(e,t){let{commit:n}=e,{check_access_controller:i,check_access_action:o}=t;n(b.MUe,{check_access_controller:i,check_access_action:o})},updateModel(e,t){let{commit:n}=e;n(b.h6G,t)},updateIsLead(e,t){let{commit:n}=e;n(b.DMJ,t)},updateMeta(e,t){let{commit:n}=e;n(b.fvT,t)},updateWorklogTimer(e,t){let{commit:n}=e;n(b.ERX,t)},updateTabsCounters(e,t){let{commit:n}=e;n(b.HtN,t)},setCustomGeoDataChanges(e,t){let{commit:n}=e;n(b.W6K,t)},updatePermissions(e,t){let{commit:n}=e;n(b.Z0r,t)}},On={[b.MUe](e,t){let{check_access_controller:n,check_access_action:i}=t;e.checkAccessController=n,e.checkAccessAction=i},[b.fvT](e,t){e.attributes_meta={...t}},[b.h6G](e,t){e.model={...t}},[b.DMJ](e,t){e.is_lead=t},[b.Z0r](e,t){e.permissions=t},[b.ERX](e,t){e.timerData={...e.timerData,...t}},[b.HtN](e,t){let n={};for(const e in t)n[e]={value:t[e],color:"secondary"};e.tabsCounters={...e.tabsCounters,...n}},[b.W6K](e,t){e.customGeoDataChanges=t}},Ln={namespaced:!0,state:xn,actions:In,mutations:On,getters:$n},Rn={renderTemplateTrigger:!1,callback:()=>{}},Nn={...M(Rn)},Dn={setRenderTemplateTrigger(e,t){let{commit:n}=e;n(b.yE2,t)},setRenderTemplateCallback(e,t){let{commit:n}=e;n(b.T63,t)}},Mn={[b.T63](e,t){e.callback=t},[b.yE2](e,t){e.renderTemplateTrigger=t}},Pn={namespaced:!0,state:Rn,actions:Dn,mutations:Mn,getters:Nn},Fn={checklistStore:[]},Bn={...M(Fn)},Hn={updateChecklist(e,t){let{commit:n}=e;n(b.OEw,t)}},jn={[b.OEw](e,t){e.checklistStore=[...t]}},Un={namespaced:!0,state:Fn,actions:Hn,mutations:jn,getters:Bn},Wn={warningsTask:{},warningsSidebarTask:{}},Kn={...M(Wn)},Gn={updateTaskWarningsArray(e,t){let{commit:n}=e;n(b.Fe9,t)},updateSidebarTaskWarningsArray(e,t){let{commit:n}=e;n(b.YC5,t)},resetSidebarTaskWarningsArray(e){let{commit:t}=e;t(b.YC5,{})}},Vn={[b.Fe9](e,t){e.warningsTask=t},[b.YC5](e,t){e.warningsSidebarTask=t}},zn={namespaced:!0,state:Wn,actions:Gn,mutations:Vn,getters:Kn},qn={customerPreselectedOption:[],taskId:0},Yn={...M(qn)},Xn={updateCustomerPreselectedOption(e,t){let{commit:n}=e;n(b.dQj,t)},resetCustomerPreselectedOption(e){let{commit:t}=e;t(b.Ue7)},updateTaskId(e,t){let{commit:n}=e;n(b.M8Q,t)}},Qn={[b.dQj](e,t){e.customerPreselectedOption=t},[b.Ue7](e){e.customerPreselectedOption=[]},[b.M8Q](e,t){e.taskId=t}},Zn={namespaced:!0,state:qn,actions:Xn,mutations:Qn,getters:Yn},Jn={changeNotificationList(e,t){let{commit:n}=e;n(b.pjO,t)},addNotificationToList(e,t){let{commit:n}=e;n(b.$qg,t)}},ei={notificationsList:e=>e.notificationsList},ti={[b.pjO](e,t){e.notificationsList=t},[b.$qg](e,t){e.notificationsList.push(t)}},ni={namespaced:!0,state:{notificationsList:[]},actions:Jn,getters:ei,mutations:ti},ii={speedLimitTypes:{},prioritiesArray:{},burstTypesArray:{},customerLabels:{},tariffsForChangeArray:{},customerBillingTypes:{},excludeTrafficClasses:{},className:"",attributesMeta:{},customPeriod:{},afAttributesMeta:{},model:{},transactionsCategories:{},isSetTransactionCategory:!1,customerCategories:{}},oi={...M(ii),storeModel:e=>e.model},si={loadAddPageInfo(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/tariffs/internet--get-form-page-info",method:"GET",success:n=>{t(b.aH$,n),e()},error:()=>{n()}})}))},loadEditPageInfo(e,t){let{commit:n}=e,{id:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/tariffs/internet--get-form-page-info?id=${i}`,method:"GET",success:t=>{n(b.aH$,t),e()},error:()=>{t()}})}))}},ai={[b.aH$](e,t){e.speedLimitTypes=t.speedLimitTypes,e.prioritiesArray=t.prioritiesArray,e.burstTypesArray=t.burstTypesArray,e.customerLabels=t.customerLabels,e.tariffsForChangeArray=t.tariffsForChangeArray,e.customerBillingTypes=t.customerBillingTypes,e.excludeTrafficClasses=t.excludeTrafficClasses,e.attributesMeta=t.attributesMeta.attributes,e.className=t.attributesMeta.className,e.transactionsCategories=t.transactionsCategories,e.isSetTransactionCategory=t.isSetTransactionCategory,e.customerCategories=t.customerCategories,e.customPeriod=t.customPeriod,(0,w.isset)(t,["attributesMeta","additional_attributes"])&&(e.afAttributesMeta=t.attributesMeta.additional_attributes),(0,w.isset)(t,"model")&&(e.model=t.model)},[b.WPx](e,t){e.tariffsForChangeArray=t}},ri={namespaced:!0,state:ii,actions:si,mutations:ai,getters:oi},li={className:"",attributesMeta:{},afAttributesMeta:{},transactionsCategories:{},isSetTransactionCategory:!1,model:{},customerLabels:{},customerCategories:{}},ci={...M(li),storeModel:e=>e.model},di={loadAddPageInfo(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({method:"GET",url:"/admin/tariffs/one-time--get-form-page-info",success:n=>{t(b.xoj,n),e()},error:()=>{n()}})}))},loadEditPageInfo(e,t){let{commit:n}=e,{id:i}=t;return new Promise(((e,t)=>{$.ajax({method:"GET",url:`/admin/tariffs/one-time--get-form-page-info?id=${i}`,success:t=>{n(b.xoj,t),e()},error:()=>{t()}})}))},setOneTimePageTariffsForChange(e,t){let{commit:n}=e;n(b.$cg,t)}},ui={[b.xoj](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n];if(!t.attributes_meta)return!1;e.attributesMeta=t.attributes_meta.attributes,e.afAttributesMeta=t.attributes_meta.additional_attributes,e.className=t.attributes_meta.className}},pi={namespaced:!0,state:li,actions:di,mutations:ui,getters:ci},hi={model:{},className:"",attributesMeta:{},afAttributesMeta:{},customerLabels:{},tariffsForChange:{},billingTypes:{},customPeriod:{},transactionsCategories:{},isSetTransactionCategory:!1,customerCategories:{}},fi={...M(hi),storeModel:e=>e.model},mi={loadAddPageInfo(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/tariffs/recurring--get-form-page-info",success:n=>{t(b.Sue,n),e()},error:()=>{n()}})}))},loadEditPageInfo(e,t){let{commit:n}=e,{id:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/tariffs/recurring--get-form-page-info?id=${i}`,success:t=>{n(b.Sue,t),e()},error:()=>{t()}})}))},setRecurringPageTariffsForChange(e,t){let{commit:n}=e;n(b.GSj,t)}},gi={[b.Sue](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n];e.attributesMeta=t.attributes_meta.attributes,e.className=t.attributes_meta.className,e.afAttributesMeta=t.attributes_meta.additional_attributes},[b.GSj](e,t){e.tariffsForChange=t}},vi={namespaced:!0,state:hi,actions:mi,mutations:gi,getters:fi},bi={model:{},className:"",attributesMeta:{},afAttributesMeta:{},customerLabels:{},typesArray:{},tariffsForChange:{},billingTypes:{},transactionsCategories:{},transactionsCategoriesArrayForItems:{},isSetTransactionCategory:!1,customerCategories:{},customPeriod:{}},yi={...M(bi),storeModel:e=>e.model},wi={loadAddPageInfo(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/tariffs/voice--get-form-page-info",success:n=>{t(b.jT9,n),e()},error:()=>{n()}})}))},loadEditPageInfo(e,t){let{commit:n}=e,{id:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/tariffs/voice--get-form-page-info?id=${i}`,success:t=>{n(b.jT9,t),e()},error:()=>{t()}})}))}},_i={[b.jT9](e,t){e.typesArray=t.typesArray,e.tariffsForChange=t.tariffsForChange,e.customerLabels=t.customerLabels,e.billingTypes=t.billingTypes,e.transactionsCategories=t.transactionsCategories,e.transactionsCategoriesArrayForItems=t.transactionsCategoriesArrayForItems,e.isSetTransactionCategory=t.isSetTransactionCategory,e.className=t.attributesMeta.className,e.attributesMeta=t.attributesMeta.attributes,e.customerCategories=t.customerCategories,e.customPeriod=t.customPeriod,(0,w.isset)(t,["attributesMeta","additional_attributes"])&&(e.afAttributesMeta=t.attributesMeta.additional_attributes),(0,w.isset)(t,"model")&&(e.model=t.model)},[b.frm](e,t){e.tariffsForChange=t}},Ti={namespaced:!0,state:bi,actions:wi,mutations:_i,getters:yi},Ei={showInternetTariffsPlans:!1,showVoiceTariffsPlans:!1,showCustomTariffsPlans:!1,breadcrumbsTitle:"Edit",isSetTransactionCategory:!1,labels:{},afLabels:{},attributesMeta:{},additionalAttributes:{},model:{additionalAttributes:{},partnersIds:[],billingTypes:[]},className:"",options:{},internetTariffs:[],voiceTariffs:[],customTariffs:[],relations:[]},Si={...M(Ei),model:e=>({...e.model,customPeriod:e.model.customPeriod||"0",customerLabels:void 0})},Ai={appendBundleTariff(e,t){let{commit:n}=e;n(b.lQo,t)},removeBundleTariff(e,t){let{commit:n}=e;n(b.nnu,t)},loadTariffsByPartnersAndBilling(e,t){let{commit:n}=e,{partnerIds:i,billingTypes:o,id:s,checkIsActive:a}=t;const r=$.param((0,w.formattedRequest)({partnerIds:i,billingTypes:o,id:s,checkIsActive:a}));return new Promise(((e,t)=>{$.ajax({method:"GET",url:`/admin/tariffs/bundles--get-plans-by-partners-and-billing?${r}`,success:t=>{t.result?n(b.$VC,t):window.showErrors(t.message),e()},error:e=>{t(e)}})}))},loadEditPageInfo(e,t){let{commit:n,state:i,dispatch:o}=e,{id:s,loadTariffs:a=!0}=t;let r=`/admin/tariffs/bundles--form-page-info?${$.param({id:s})}`;return new Promise(((e,t)=>{$.ajax({method:"GET",url:r,success:t=>{!t.result&&t.message?window.showErrors(t.message):(n(b.FXT,t),a&&o("loadTariffsByPartnersAndBilling",{partnerIds:i.model.partnersIds.join(","),billingTypes:i.model.billingTypes.join(","),id:i.model.id,checkIsActive:"1"}).then((()=>{})).catch((()=>{}))),e()},error:e=>{t(e)}})}))},setBundleTariffsFormModel(e,t){let{commit:n}=e;n(b.f$3,t)}};const Ci={[b.lQo](e,t){switch(t.type){case"internet":e=function(e,t){return e.model.internetTariffs.push(t),e}(e,t.id);break;case"voice":e=function(e,t){return e.model.voiceTariffs.push(t),e}(e,t.id);break;case"custom":e=function(e,t){return e.model.customTariffs.push(t),e}(e,t.id);break;default:return!1}},[b.nnu](e,t){switch(t.type){case"internet":e=function(e,t){return e.model.internetTariffs.splice(t,1),e}(e,t.id);break;case"voice":e=function(e,t){return e.model.voiceTariffs.splice(t,1),e}(e,t.id);break;case"custom":e=function(e,t){return e.model.customTariffs.splice(t,1),e}(e,t.id);break;default:return!1}},[b.f$3](e,t){let{value:n,field:i,additional:o,model:s}=t;s?e.model=s:o?e.model.additionalAttributes[i]=n:e.model[i]=n},[b.$VC](e,t){e.internetTariffs=t.items.internet,e.voiceTariffs=t.items.voice,e.customTariffs=t.items.custom;try{e.model.internetTariffs=t.items.internet?.selected,e.model.voiceTariffs=t.items.voice?.selected,e.model.customTariffs=t.items.custom?.selected}catch(e){console.error(e)}},[b.FXT](e,t){t=(0,w.formattedResponse)(t),e.showInternetTariffsPlans=t.showInternetTariffsPlans,e.showVoiceTariffsPlans=t.showVoiceTariffsPlans,e.showCustomTariffsPlans=t.showCustomTariffsPlans,e.breadcrumbsTitle=t.breadcrumbsTitle,e.isSetTransactionCategory=t.isSetTransactionCategory,e.labels=(0,w.formattedResponse)(t.labels),e.afLabels=(0,w.formattedResponse)((0,w.formattedResponse)(e.labels).additionalAttributes),e.additionalAttributes=(0,w.formattedResponse)((0,w.formattedResponse)(t.attributesMeta).additionalAttributes),e.className=(0,w.formattedResponse)(t.attributesMeta).className,e.attributesMeta=(0,w.formattedResponse)(t.attributesMeta.attributes),e.model=((e,t,n)=>{const i={};for(let e in t)i[e]=null!==t[e].value?t[e].value:t[e].default;return(0,w.formattedResponse)({...e,additionalAttributes:i,customerModuleLabels:n})})(t.model,e.additionalAttributes,t.customerModuleLabels),e.options=(0,w.formattedResponse)(t.options),e.relations=t.relations}},ki={namespaced:!0,state:Ei,actions:Ai,mutations:Ci,getters:Si},xi={vatPercent:0,taxId:0,model:{},needShowPlansSelect:!1,taxName:"VAT",taxesArray:{},attributesMeta:{},afAttributesMeta:{},isAggregatedBilling:!1,modelItems:[],taxTotal:0,totalWithoutTax:0,totalWithTax:0,perTax:[],balanceAfter:"",typeRecurringInvoice:"",linkToCustomer:"",linkToCreditNotes:"",readOnly:!1,relations:[],relationsTotal:0,relationsTotalFormatted:"0",additionalAttributes:[],actionPermissions:{},existsUnusedTransactions:!1,billingDue:0,isAddingItemsBlocked:!1,accounts:{},linkedBillingAccountData:{}},$i={...M(xi)},Ii={loadModalInfo(e,t){let{commit:n}=e,{customer_id:i,invoice_id:o}=t,s={customer_id:i};return o&&(s.invoice_id=o),new Promise(((e,t)=>{$.ajax({url:"/admin/customers/billing/invoices--get-modal-info",method:"GET",data:s,success:t=>{let i={};Object.keys(t).forEach((e=>{i[(0,w.toCamelCase)(e)]=t[e]})),n(b.GD4,i),e()},error:e=>{t(e)}})}))},getNewNumber(e,t){let{customer_id:n,date_created:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/invoices--number?customer_id=${n}`,method:"GET",data:{date_created:i},success:t=>{e(t)},error:e=>{t(e)}})}))},loadUnchargedTransactions(e,t){let{customer_id:n}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/invoices--get-uncharged-transactions?customer_id=${n}`,success:t=>{e(t)},error:e=>{t(e)}})}))}},Oi={[b.GD4](e,t){for(let n in t)"attributesMeta"!==n?("model"===n&&(e.readOnly="paid"===t[n].status),e[n]=t[n]):(e[n]=t[n].attributes,e.afAttributesMeta=t[n].additional_attributes)},[b.DrH](e){e.model={},e.modelItems=[],e.taxTotal=0,e.totalWithoutTax=0,e.totalWithTax=0,e.perTax=[],e.readOnly=!1,e.balanceAfter="",e.billingDue=0,e.isAddingItemsBlocked=!1,e.accounts={}}},Li={namespaced:!0,state:xi,actions:Ii,mutations:Oi,getters:$i},Ri={vatPercent:0,taxId:0,model:{},needShowPlansSelect:!1,taxName:"VAT",taxesArray:{},attributesMeta:{},afAttributesMeta:{},isAggregatedBilling:!1,modelItems:[],linkedInvoice:null,linkedInvoiceData:[],taxTotal:0,totalWithoutTax:0,totalWithTax:0,perTax:[],balanceAfter:"",readOnly:!1,invoiceDtHeaders:[],invoiceDtModelName:"",invoiceDtColumnDefs:[],linkToCustomer:"",relations:[],relationsTotal:0,relationsTotalFormatted:"0",additionalAttributes:[],linkedInvoiceRelationData:[],actionPermissions:{},enableResetPeriodForService:!1,disableResetPeriodSelect:!1,itemCategory:0,syncedToAccounting:!1,canBeDeleted:!1,relatedItems:[],accounts:{},linkedBillingAccountData:{}},Ni={...M(Ri)},Di={loadModalInfo(e,t){let{commit:n}=e,{customer_id:i,credit_note_id:o,invoice_id:s}=t,a={customer_id:i};return o&&(a.credit_note_id=o),s&&(a.invoice_id=s),new Promise(((e,t)=>{$.ajax({url:"/admin/customers/billing/credit-notes--get-modal-info",method:"GET",data:a,success:t=>{n(b.l85,t),e()},error:e=>{t(e)}})}))},getNewNumber(e,t){let{customer_id:n,date_created:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/credit-notes--number?customer_id=${n}`,method:"GET",data:{date_created:i},success:t=>{e(t)},error:e=>{t(e)}})}))},loadInvoiceTransactions(e,t){let{invoiceId:n}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/invoices--get-transactions?invoice_id=${n}`,success:t=>{e(t)},error:e=>{t(e)}})}))},clearCreditNoteModalInfo(e){let{commit:t}=e;t(b.y$I)}},Mi={[b.l85](e,t){for(let n in t)"attributesMeta"!==n?("model"===n&&(e.readOnly="not_refunded"!==t[n].status||!0===t[n].partiallyUse),e[(0,w.toCamelCase)(n)]=t[n]):(e[n]=t[n].attributes,e.afAttributesMeta=t[n].additional_attributes)},[b.y$I](e){e.model={},e.modelItems=[],e.linkedInvoice=null,e.linkedInvoiceData=[],e.linkedInvoiceRelationData=[],e.taxTotal=0,e.totalWithoutTax=0,e.totalWithTax=0,e.perTax=[],e.readOnly=!1,e.balanceAfter="",e.enableResetPeriodForService=!1,e.disableResetPeriodSelect=!1,e.itemCategory=0,e.syncedToAccounting=!1,e.canBeDeleted=!1,e.relatedItems=[],e.accounts={}}},Pi={namespaced:!0,state:Ri,actions:Di,mutations:Mi,getters:Ni};class Fi extends Error{constructor(e){super(e),this.name=this.constructor.name}}function Bi(e,t){return new Promise(((n,i)=>{$.ajax({url:e,method:"POST",data:t,cache:!1,processData:!1,contentType:!1,type:"POST",success(e){n(e)},failed(e){i(e)}})}))}const Hi={attributeLabels:e=>e.attributeLabels,delimiters:e=>e.delimiters,importModelId:e=>e.modelId},ji={initImportComponent(e){let{commit:t}=e;return new Promise(((e,n)=>{let i=(0,w.getUrlParam)("id");$.ajax({url:`/admin/config/networking/acs--provision-flow-import-load-data?groupId=${i}`,success(n){t(b.$H3,n),e()},failed(){n(window.xApp.$splang.t("config","Error while load importing data. Please refresh this page."))}})}))},processFile(e,t){let{state:n}=e;return new Promise(((e,i)=>{Bi(`/admin/config/networking/acs--provision-flow-import-process-file?json=yes&id=${n.modelId}`,t).then((t=>{e(t)})).catch((()=>{i(window.xApp.$splang.t("config","Error while processing file"))}))}))}},Ui={[b.$H3](e,t){e.attributeLabels=t.attributeLabels,e.delimiters=t.delimiters,e.modelId=t.modelId}},Wi={namespaced:!0,state:{attributeLabels:null,delimiters:null,modelId:null},getters:Hi,actions:ji,mutations:Ui};var Ki=i(63293);class Gi{constructor(e,t){this.groupId=e,this.type="",this.deviceId=t,this.provisionConfigLoadingType="",this.step=1}refresh(){return new Promise(((e,t)=>{$.ajax({method:"GET",url:"/admin/config/networking/acs--provision-flow-refresh-config",data:this.getRequestParams(),success(n){n.result?e(n):t(n)},failed(e){t(e)}})}))}getRequestParams(){return{id:this.groupId,type:this.type,provisionConfigLoadingType:this.provisionConfigLoadingType,step:this.step,device_id:this.deviceId}}setProvisionConfigLoadingType(e){return this.provisionConfigLoadingType=e,this}setStep(e){return this.step=e,this}}class Vi extends Gi{constructor(e,t){super(e,t),this.type=Ki.jB}}class zi extends Gi{constructor(e,t){super(e,t),this.type=Ki.pr}}async function qi(e){return new Promise(((t,n)=>{e.setProvisionConfigLoadingType(Ki.g$).refresh().then((e=>(show_success(e.message,4),t(e)))).catch((e=>(void 0!==e.message&&show_error(e.message,4),n(e))))}))}const Yi={namespaced:!0,state:{},getters:{},actions:{processFullDevice:async(e,t)=>qi(new zi((0,w.getUrlParam)("id"),t.fullDevice).setStep(t.iteration)),processEmptyDevice:async(e,t)=>qi(new Vi((0,w.getUrlParam)("id"),t.emptyDevice).setStep(t.iteration))},mutations:{}},Xi={namespaced:!0,state:{},getters:{},actions:{processFullDevice:async(e,t)=>qi(new zi((0,w.getUrlParam)("id"),t.fullDevice).setStep(Ki.Dn))},mutations:{}},Qi={availableDevices:e=>e.allGroupDevices,availableDevicesIsEmpty:e=>Object.keys(e.allGroupDevices).length<=0},Zi={loadGroupDevices(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:`/admin/config/networking/acs--load-provision-wizard-info?groupId=${(0,w.getUrlParam)("id")}`,success(i){i.result?(t(b.fzF,i.groupDevices),e()):(t(b.fzF,{}),n())},failed(){n()}})}))}},Ji={[b.fzF](e,t){e.allGroupDevices=t}},eo={namespaced:!0,state:{allGroupDevices:{}},getters:Qi,actions:Zi,mutations:Ji},to={filled:e=>e.filled,dataTable:e=>e.dataTable,availableAcsTypes:e=>e.availableAcsTypes,availableSplynxValuesByTypes:e=>e.availableSplynxValuesByTypes,addNewBlockState:e=>e.addNewBlockState,availableObjects:e=>e.availableObjects,allBlocksIsChecked:e=>e.allBlocksIsChecked,activeBlockKey:e=>e.activeBlockKey,activeBlockSelectedKey:e=>"----new----"!==e.activeBlockKey?0:e.activeBlockSelectedKey,availableObjectsAttributes:e=>e.availableObjectsAttributes,allCheckedAttributeCount(e){let t=0;for(let n in e.blocks){if(!Object.prototype.hasOwnProperty.call(e.blocks,n))continue;if("delete"===e.blocks[n].configs.action||"create-empty-object"===e.blocks[n].configs.action){e.blocks[n].configs.checked&&(t+=1);continue}const i=(0,w.filterObjectsByValueInPath)(e.blocks[n].attributes,"checked",!0);t+=Object.keys(i).length}return t},enabledCheckedAttributeCount:e=>ro(e,!0),disabledCheckedAttributeCount:e=>ro(e,!1),blocks:e=>e.blocks,blocksCount:e=>Object.keys(e.blocks).length,sortedBlocks:e=>(0,w.sortObjectByProperty)(e.blocks,["configs","position"],!0),blockExist:e=>t=>{Object.prototype.hasOwnProperty.call(e.blocks,t)},objectActions:e=>e.objectActions,addNewStateOnBlock(e){for(let t in e.blocks)if(Object.prototype.hasOwnProperty.call(e.blocks,t)&&"create-empty-object"!==e.blocks[t]?.configs?.action&&"delete"!==e.blocks[t]?.configs?.action&&void 0!==e.blocks[t].attributes[Q.b_])return!0;return!1},addNewState:e=>void 0!==e.blocks[Q.b_],configForPreview(e){let t=JSON.parse(JSON.stringify(e.blocks));for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("1"===t[e].configs.enabled||!0===t[e].configs.enabled)for(let n in t[e].attributes)Object.prototype.hasOwnProperty.call(t[e].attributes,n)&&"1"!==t[e].attributes[n].enabled&&!0!==t[e].attributes[n].enabled&&delete t[e].attributes[n];else delete t[e];return t}},no={loadProvisionInfo(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/networking/acs--load-group-data?id=${t}`,success:t=>{n(b.HZ$,t),e()},error:()=>{i()}})}))},baseMassActions(e,t){let{state:n,dispatch:i}=e;void 0===t.skipAttributesActionIfObjectChecked&&(t.skipAttributesActionIfObjectChecked=!1);for(let e in n.blocks)if(Object.prototype.hasOwnProperty.call(n.blocks,e)&&(n.blocks[e].configs.checked&&t.objectAction(e),!(void 0===n.blocks[e]||t.skipAttributesActionIfObjectChecked&&n.blocks[e].configs.checked)))for(let i in n.blocks[e].attributes)Object.prototype.hasOwnProperty.call(n.blocks[e].attributes,i)&&n.blocks[e].attributes[i].checked&&t.attributeAction(e,i);i("makeAllObjectChecked",!1)},massDeleteAttributes(e){let{dispatch:t,commit:n,getters:i}=e;if(i.allCheckedAttributeCount<=0)return;t("baseMassActions",{objectAction:e=>{n(b.X9V,e)},attributeAction:(e,t)=>{n(b._W3,{blockKey:e,key:t})},skipAttributesActionIfObjectChecked:!0}),0===i.allCheckedAttributeCount&&(n(b.YkB,!1),t("addNewBlockBelow",1))},baseMassEnabledDisable(e,t){let{dispatch:n,commit:i}=e;n("baseMassActions",{objectAction:e=>{i(b.kyT,{blockKey:e,objectState:t})},attributeAction:(e,n)=>{i(b.$s2,{blockKey:e,key:n,attributeState:t})}})},massEnableAttributes(e){let{dispatch:t,getters:n}=e;n.disabledCheckedAttributeCount>0&&t("baseMassEnabledDisable",!0)},massDisableAttributes(e){let{dispatch:t,getters:n}=e;n.enabledCheckedAttributeCount>0&&t("baseMassEnabledDisable",!1)},makeBlockChecked(e,t){let{state:n,commit:i}=e;const{blockState:o}=t,{blockKey:s}=t;for(let e in n.blocks[s].attributes)Object.prototype.hasOwnProperty.call(n.blocks[s].attributes,e)&&i(b.ZBn,{blockKey:s,attributeKey:e,checked:o});i(b.gai,{blockKey:s,checked:o});let a=!1;Object.keys(n.blocks).length===ao(n.blocks,"configs.checked")&&(a=!0),n.allBlocksIsChecked!==a&&i(b.YkB,a)},makeAttributeChecked(e,t){let{state:n,commit:i}=e;i(b.ZBn,t);let o=!1;if(Object.keys(n.blocks[t.blockKey].attributes).length===ao(n.blocks[t.blockKey].attributes)&&(o=!0),n.blocks[t.blockKey].configs.checked!==o){i(b.gai,{blockKey:t.blockKey,checked:o});let e=!1;Object.keys(n.blocks).length===ao(n.blocks,"configs.checked")&&(e=!0),n.allBlocksIsChecked!==e&&i(b.YkB,e)}},makeAllObjectChecked(e,t){let{state:n,dispatch:i}=e;for(let e in n.blocks)Object.prototype.hasOwnProperty.call(n.blocks,e)&&i("makeBlockChecked",{blockKey:e,blockState:t})},updateObjectAction(e,t){let{state:n,commit:i}=e;return new Promise(((e,o)=>{let s=n.blocks[t.blockKey].configs,a=s.key.replaceAll(`~${s.action}-`,`~${t.newAction}-`);if(s.key===Q.b_&&(i(b.De,{action:t.newAction,key:Q.b_}),e()),a===s.key)return void o();Object.prototype.hasOwnProperty.call(n.blocks,a)&&(a=so(s.selectedObject,t.newAction,n.blocks,!0),show_error(window.xApp.$splang.t("config","Object with this action already exist"),4)),i(b.CiV,{newKey:a,key:t.blockKey}),i(b.De,{action:t.newAction,key:a});let r=n.blocks[a].attributes;(0,w.emptyObject)(r)&&"delete"!==t.newAction&&"create-empty-object"!==t.newAction&&i(b.SAM,{blockKey:a,key:Q.b_,attribute:{checked:!1,enabled:!0,position:t.position,key:0,type:"string",selected:"value",value:""}}),e()}))},updateObjectCount(e,t){let{commit:n}=e;return new Promise((e=>{n(b.gD9,{count:t.newCount,blockKey:t.blockKey}),e()}))},setObjectActionValue(e,t){let{state:n,commit:i}=e;return new Promise(((e,o)=>{n.blocks[t.blockKey]?(i(b.HV0,{blockKey:t.blockKey,key:t.newAction.name,attribute:t.newAction}),e()):o()}))},addNewBlockBelow(e,t){let{commit:n,dispatch:i}=e,o=t+1;n(b.BJx,o),n(b.FYA,{blockKey:Q.b_,newBlock:{configs:{enabled:!0,position:o,key:Q.b_,selectedObject:0,action:"create"},attributes:{}}}),i("addNewAttribute",{blockKey:Q.b_,position:0}),n(b.s1s,!0),i("setActiveBlockKey",Q.b_)},removeWholeObject(e,t){let{commit:n,dispatch:i,getters:o}=e;t===Q.b_&&n(b.s1s,!1),n(b.X9V,t),i("setActiveBlockKey",0),0===o.blocksCount&&i("addNewBlockBelow",0)},unlockAddBlockButton(e){let{state:t,commit:n}=e;t.addNewBlockState&&n(b.s1s,!1)},saveNewBlock(e){let{state:t,commit:n,dispatch:i}=e;const s=t.blocks[Q.b_];let a=null;try{a=so(s.configs.selectedObject,s.configs.action,t.blocks)}catch(e){if(e instanceof Fi)return void show_error(e.message,4);throw e}if("create-empty-object"!==s.configs?.action&&"delete"!==s.configs?.action&&void 0!==s.attributes[Q.b_]&&(0,w.empty)(s.attributes[Q.b_].key))return void show_error(window.xApp.$splang.t("config","Object has no configured attribute. Please configure attribute or remove him."),4);let r={};void 0!==t.availableObjectsAttributes[s.configs.selectedObject]&&(r=t.availableObjectsAttributes[s.configs.selectedObject]),n(b.FYA,{blockKey:a,newBlock:o.default.observable({configs:{position:s.configs.position,objectName:s.configs.selectedObject,checked:!1,enabled:!0,checkedList:[],action:s.configs.action,key:a,availableACSAttributes:r},attributes:s.attributes})}),n(b.X9V,Q.b_),void 0===t.blocks[a].attributes[Q.b_]||(0,w.empty)(t.blocks[a].attributes[Q.b_].key)||i("saveNewAttribute",{blockKey:a}),n(b.s1s,!1)},moveAttribute(e,t){let{state:n}=e,{position:i}=t,{direction:s}=t,{blockKey:a}=t;const r=Object.keys(n.blocks[a].attributes).length;for(let e in n.blocks[a].attributes)if(Object.prototype.hasOwnProperty.call(n.blocks[a].attributes,e))if("up"===s){if(i-1===n.blocks[a].attributes[e].position){let t=n.blocks[a].attributes[e];t.position+=1,o.default.set(n.blocks[a].attributes,e,o.default.observable(t))}else if(i===n.blocks[a].attributes[e].position){let t=n.blocks[a].attributes[e];t.position=t.position>1?t.position-1:1,o.default.set(n.blocks[a].attributes,e,o.default.observable(t))}}else{if(r<i+1)continue;if(i===n.blocks[a].attributes[e].position){let t=n.blocks[a].attributes[e];t.position+=1,o.default.set(n.blocks[a].attributes,e,o.default.observable(t))}else if(i+1===n.blocks[a].attributes[e].position){let t=n.blocks[a].attributes[e];t.position=t.position>1?t.position-1:1,o.default.set(n.blocks[a].attributes,e,o.default.observable(t))}}},removeAttribute(e,t){let{state:n,commit:i,dispatch:o}=e;if(t.key===Q.b_){if(1===Object.keys(n.blocks[t.blockKey].attributes).length&&void 0!==n.blocks[t.blockKey].attributes[Q.b_])return;"function"==typeof t.removeNewItemFromVirtualScrollerPool&&t.removeNewItemFromVirtualScrollerPool.call(),i(b.nY,{blockKey:t.blockKey,state:!1})}o("addAttributeInToAvailableAttributesStorage",{blockKey:t.blockKey,attribute:t.key}),i(b._W3,t),i(b.L94,t),Object.keys(n.blocks[t.blockKey].attributes).length<=0&&o("addNewAttribute",{position:0,blockKey:t.blockKey})},addNewAttribute(e,t){let{commit:n}=e;t.position+=1,n(b.Q96,t),t.key=Q.b_,t.attribute={checked:!1,enabled:!0,position:t.position,key:0,type:"string",selected:"value",value:""},n(b.SAM,t),n(b.nY,{blockKey:t.blockKey,state:!0})},saveNewAttribute(e,n){let{state:i,commit:o,dispatch:s}=e,a=i.blocks[n.blockKey].attributes[Q.b_];void 0===i.blocks[n.blockKey].attributes[a.key]?("function"==typeof n.removeNewItemFromVirtualScrollerPool&&n.removeNewItemFromVirtualScrollerPool.call(),o(b.SAM,{blockKey:n.blockKey,key:a.key,attribute:a}),o(b._W3,{blockKey:n.blockKey,key:Q.b_}),o(b.nY,{blockKey:n.blockKey,state:!1}),s("removeAttributeFromAvailableAttributesStorageIfExist",{blockKey:n.blockKey,attribute:a.key})):show_error(t("config","Attribute already exist"),4)},setAttributeValueBySelected(e,t){let{commit:n}=e,{value:i}=t;if("value"===t.selected)return i="",void n(b.$GK,{blockKey:t.blockKey,key:t.key,value:i});"template"!==t.selected&&"ignore_statement"!==t.selected&&(i=`${"{".repeat(2)} ${t.selected} ${"}".repeat(2)}`),"ignore_statement"===t.selected&&(i="{% if customer.login is not empty %}value{% else %}---ignore---{% endif %}"),n(b.$GK,{blockKey:t.blockKey,key:t.key,value:i})},checkIfAttributeIsDefault(e,t){let{state:n,commit:i}=e;return new Promise(((e,o)=>{void 0!==n.blocks[t.blockKey]&&void 0!==n.blocks[t.blockKey].attributes[Q.b_]||e();let s=n.blocks[t.blockKey].attributes[Q.b_];0===t.value&&(s.type=null,i(b.SAM,{key:Q.b_,blockKey:t.blockKey,attribute:s}),e());let a=`${n.blocks[t.blockKey].configs.objectName}.${t.value}`;$.ajax({url:`/admin/config/networking/acs--load-params-for-provision-flow?id=${(0,w.getUrlParam)("id")}&paramName=${a}`,success:n=>{s.newItemIsDefault=n.isDefault,n.deniedAttributeName&&o(window.xApp.$splang.t("config","This readonly attribute")),n.isDefault?(s.type=n.type,s.selected="value",s.value=n.value):s.type="string",i(b.SAM,{key:Q.b_,blockKey:t.blockKey,attribute:s}),e()},error(e){o(e)}})}))},removeAttributeFromAvailableAttributesStorageIfExist(e,t){let{state:n,commit:i}=e;void 0!==n.blocks[t.blockKey].configs.availableACSAttributes&&void 0!==n.blocks[t.blockKey].configs.availableACSAttributes[t.attribute]&&i(b.IbR,t)},addAttributeInToAvailableAttributesStorage(e,t){let{state:n,commit:i}=e;if(t.attribute!==Q.b_&&(void 0!==n.blocks[t.blockKey].configs.usedAvailableACSAttributes&&void 0!==n.blocks[t.blockKey].configs.usedAvailableACSAttributes[t.attribute]&&i(b.yjD,t),void 0!==n.blocks[t.blockKey].attributes[t.attribute])){let e=n.blocks[t.blockKey].attributes[t.attribute];void 0!==e.isDefault&&e.isDefault&&i(b.yjD,t)}},setManuallyInsertConfigs(e,t){let{commit:n}=e;n(b.k_t,t)},setActiveBlockKey(e,t){let{commit:n}=e;n(b.YGG,t)},setActiveBlockSelectedKey(e,t){let{commit:n}=e;n(b._NZ,t)}},oo={[b.HZ$](e,t){e.filled=t.filled,e.blocksHashSum=function(e){if(0===e.length)return null;return e.split("").reduce(((e,t)=>0|(e=(e<<5)-e+t.charCodeAt(0))),0)}(JSON.stringify(t.blocks)),e.dataTable=t.dataTable,e.blocks=t.blocks,e.objectActions=t.objectActions,e.availableSplynxValuesByTypes=t.availableSplynxValuesByTypes,e.availableAcsTypes=t.availableAcsTypes,e.availableObjects=t.availableObjects,e.availableObjectsAttributes=t.availableObjectsAttributes},[b.CiV](e,t){if(!Object.prototype.hasOwnProperty.call(e.blocks,t.key))return;let n=e.blocks[t.key];n.configs.key=t.newKey,o.default.set(e.blocks,t.newKey,n),o.default.delete(e.blocks,t.key)},[b.De](e,t){if(!Object.prototype.hasOwnProperty.call(e.blocks,t.key))return;let n=e.blocks[t.key];n.configs.action=t.action,o.default.set(e.blocks,t.key,n)},[b.gD9](e,t){o.default.set(e.blocks[t.blockKey].configs,"count",t.count)},[b.SAM](e,t){o.default.set(e.blocks[t.blockKey].attributes,t.key,t.attribute)},[b.Q96](e,t){for(let n in e.blocks[t.blockKey].attributes)if(Object.prototype.hasOwnProperty.call(e.blocks[t.blockKey].attributes,n)&&t.position<=e.blocks[t.blockKey].attributes[n].position){let i=e.blocks[t.blockKey].attributes[n];i.position+=1,o.default.set(e.blocks[t.blockKey].attributes,n,o.default.observable(i))}},[b._W3](e,t){o.default.delete(e.blocks[t.blockKey].attributes,t.key)},[b.L94](e,t){let n=1,i=(0,w.sortObjectByProperty)(e.blocks[t.blockKey].attributes,"position");for(let s in i){if(!Object.prototype.hasOwnProperty.call(e.blocks[t.blockKey].attributes,s))continue;let i=e.blocks[t.blockKey].attributes[s];i.position=n++,o.default.set(e.blocks[t.blockKey].attributes,s,o.default.observable(i))}},[b._2K](e,t){let{position:n}=t,{direction:i}=t;const s=Object.keys(e.blocks).length;for(let t in e.blocks)if(Object.prototype.hasOwnProperty.call(e.blocks,t))if("up"===i){if(n-1===e.blocks[t].configs.position){let n=e.blocks[t];n.configs.position+=1,o.default.set(e.blocks,t,o.default.observable(n))}else if(n===e.blocks[t].configs.position){let n=e.blocks[t];n.configs.position=n.configs.position>1?n.configs.position-1:1,o.default.set(e.blocks,t,o.default.observable(n))}}else{if(s<n+1)continue;if(n===e.blocks[t].configs.position){let n=e.blocks[t];n.configs.position+=1,o.default.set(e.blocks,t,o.default.observable(n))}else if(n+1===e.blocks[t].configs.position){let n=e.blocks[t];n.configs.position=n.configs.position>1?n.configs.position-1:1,o.default.set(e.blocks,t,o.default.observable(n))}}},[b.nY](e,t){o.default.set(e.blocks[t.blockKey],"addNewAttributeState",t.state)},[b.BJx](e,t){for(let n in e.blocks)if(Object.prototype.hasOwnProperty.call(e.blocks,n)&&t<=e.blocks[n].configs.position){let t=e.blocks[n];t.configs.position+=1,o.default.set(e.blocks,n,o.default.observable(t))}},[b.FYA](e,t){o.default.set(e.blocks,t.blockKey,o.default.observable(t.newBlock))},[b.X9V](e,t){o.default.delete(e.blocks,t)},[b.s1s](e,t){e.addNewBlockState=t},[b.ZBn](e,t){let n=t.attributeKey;(0,w.empty)(n)&&(n=Q.b_);let i=e.blocks[t.blockKey].attributes[n];i.checked=t.checked,o.default.set(e.blocks[t.blockKey].attributes,n,i)},[b.HV0](e,t){e.blocks[t.blockKey].attributes[t.key].value=t.attribute.value},[b.gai](e,t){o.default.set(e.blocks[t.blockKey].configs,"checked",t.checked)},[b.YkB](e,t){e.allBlocksIsChecked=t},[b.kyT](e,t){o.default.set(e.blocks[t.blockKey].configs,"enabled",t.objectState)},[b.$s2](e,t){o.default.set(e.blocks[t.blockKey].attributes[t.key],"enabled",t.attributeState)},[b.k_t](e,t){e.filled=t},[b.$GK](e,t){o.default.set(e.blocks[t.blockKey].attributes[t.key],"value",t.value)},[b.yjD](e,t){void 0!==e.blocks[t.blockKey].configs.usedAvailableACSAttributes&&void 0!==e.blocks[t.blockKey].configs.usedAvailableACSAttributes[t.attribute]&&o.default.delete(e.blocks[t.blockKey].configs.usedAvailableACSAttributes,t.attribute);let n={};void 0!==e.blocks[t.blockKey].configs.availableACSAttributes&&(n=e.blocks[t.blockKey].configs.availableACSAttributes),n[t.attribute]=t.attribute,o.default.set(e.blocks[t.blockKey].configs,"availableACSAttributes",n)},[b.IbR](e,t){o.default.delete(e.blocks[t.blockKey].configs.availableACSAttributes,t.attribute);let n={};void 0!==e.blocks[t.blockKey].configs.usedAvailableACSAttributes&&(n=e.blocks[t.blockKey].configs.usedAvailableACSAttributes),n[t.attribute]=t.attribute,o.default.set(e.blocks[t.blockKey].configs,"usedAvailableACSAttributes",n)},[b.YGG](e,t){e.activeBlockKey=t},[b._NZ](e,t){e.activeBlockSelectedKey=t}};function so(e,t,n,i){let o=`${e}~${t}`,s=function(e,t){let n=0,i=0;for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;let s=e[o].replaceAll(t,"");if(s.length<e[o].length){n++;let e=parseInt(s.replaceAll("-",""));i<e&&(i=e)}}return{keysCount:n,maxIndex:i}}(Object.keys(n),o);if((void 0===i||!1===i)&&("update"===t||"delete"===t||"create-empty-object"===t)&&s.keysCount>0)throw new Fi(window.xApp.$splang.t("config","Object with this action already exist"));return`${o}-${s.maxIndex+1}`}function ao(e,t){return void 0===t&&(t="checked"),Object.keys((0,w.filterObjectsByValueInPath)(e,t,!0)).length}function ro(e,t){let n=0;for(let i in e.blocks){if(!Object.prototype.hasOwnProperty.call(e.blocks,i))continue;if("delete"===e.blocks[i].configs.action||"create-empty-object"===e.blocks[i].configs.action){e.blocks[i].configs.checked&&e.blocks[i].configs.enabled===t&&(n+=1);continue}const o=(0,w.filterObjectsByValueInPath)(e.blocks[i].attributes,"checked",!0),s=(0,w.filterObjectsByValueInPath)(o,"enabled",t);n+=Object.keys(s).length}return n}const lo={namespaced:!0,state:()=>({filled:null,blocks:null,blocksHashSum:null,objectActions:null,availableSplynxValuesByTypes:null,availableAcsTypes:null,availableObjects:null,availableObjectsAttributes:null,addNewBlockState:!1,allBlocksIsChecked:!1,activeBlockKey:0,activeBlockSelectedKey:0,dataTable:null}),actions:no,mutations:oo,getters:to,modules:{provision_import:Wi,provision_fully_or_empty_devices:Yi,provision_common:eo,one_device:Xi}},co={loadPageData(e,t){let{state:n,commit:i,dispatch:o}=e;return new Promise(((e,s)=>{$.ajax({url:`/admin/settings--get-page-data?type=${t}`,success:t=>{i(b.UF_,t.blocks),e()},error:()=>{s()},complete(){"config"===n.type&&(n.basicState===n.basicTranslateBasic?(i(b.zcS,n.basicActiveTitles),o("showBasicBlocks",n.basicTranslateBasic)):n.filterActiveTitles.length>0?o("filterRememberedActiveTitles"):o("generateBlocksNames",n.basicTranslateAll)),e()}})}))},keyUpHandler(e,t){let{dispatch:n,commit:i,state:o}=e;if(o.configSearchQuery===t)return;let s=null;s&&(clearTimeout(s),s=null),t.length>=3?s=setTimeout((()=>{n("makeSearchRequest",t)}),300):i(b.S9f,[]),i(b.HBW,t)},makeSearchRequest(e,t){let{dispatch:n,commit:i,state:o}=e;if(!empty(t)&&"admin"!==o.type)return new Promise(((e,o)=>{$.ajax({url:`/admin/settings--search?text=${encodeURI(t)}`,method:"GET",success:o=>{i(b.S9f,o),n("filterBySearchResults",t),e()},error:()=>{o()}})}))},filterBySearchResults(e,t){let{dispatch:n,state:i}=e,{results:o}=i;n("filterByText",t=t.toLowerCase()),i.configBlocks.forEach((e=>{e.items.forEach((t=>{o.forEach((n=>{n.module===e.anchor&&n.path===t.anchor&&(e.hidden=!1,t.hidden=!1,i.allHidden=!1,i.filterActiveTitles.push(e.title))}))}))})),n("generateBlocksNames")},showAll(e){let{commit:t,state:n,dispatch:i}=e;"config"===n.type&&(t(b.zcS,[n.basicTranslateAll]),t(b.kgk,n.basicTranslateAll),i("generateBlocksNames",n.basicTranslateAll)),n.allHidden=!1,n.configBlocks.forEach((e=>{e.hidden=!1,e.items.forEach((e=>{e.hidden=!1}))}))},filterByText(e,t){let{dispatch:n,state:i}=e;i.allHidden=!0,i.configBlocks.forEach((e=>{if(-1!==e.title.toLowerCase().indexOf(t))return e.hidden=!1,i.allHidden=!1,void e.items.forEach((e=>{e.hidden=!1}));e.hidden=!0,e.items.forEach((n=>{-1!==n.title.toLowerCase().indexOf(t)?(n.hidden=!1,e.hidden=!1,i.allHidden=!1):n.hidden=!0}))})),"config"===i.type&&n("generateBlocksNames")},filterByBlocks(e,t){let{state:n,dispatch:i}=e;n.allHidden=!0,n.configBlocks.forEach((e=>{if(-1!==n.filterActiveTitles.toString().indexOf(e.title))return e.hidden=!1,n.allHidden=!1,void e.items.forEach((e=>{e.hidden=!1}));e.hidden=!0,e.items.forEach((e=>{e.hidden=!0}))})),i("generateBlocksNames",t)},showBasicBlocks(e){let{state:t,dispatch:n}=e;t.allHidden=!0,t.configBlocks.forEach((e=>{if(-1!==t.basicActiveTitles.toString().indexOf(e.title))return e.hidden=!0,t.allHidden=!1,void e.items.forEach((t=>{t.hidden=!t.basic,t.hidden||(e.hidden=!1)}));e.hidden=!0,e.items.forEach((e=>{e.hidden=!0}))})),t.filterActiveTitles=[],n("generateBlocksNames",t.basicTranslateBasic)},filterRememberedActiveTitles(e){let{state:t,dispatch:n}=e;t.filterActiveTitles.forEach((e=>{e!==t.basicTranslateAll&&n("filterByBlocks")}))},generateBlocksNames(e,t){let{state:n,commit:i}=e,o=n.filterDefaultShortcuts.map((e=>{let n=t===e.title&&!e.hidden;return{title:e.title,button_class:e.button_class,active:n}})),s=n.configBlocks.map((e=>{let i=t!==n.basicTranslateAll&&t!==n.basicTranslateBasic&&!e.hidden;return{title:e.title,button_class:e.button_class,active:i}}));i(b.nXz,o.concat(s))},searchHandler(e,t){let{dispatch:n}=e;0===t.length?n("showAll"):n("filterByText",t=t.toLowerCase())},mainFilterClickHandler(e,t){let{dispatch:n,state:i,commit:o}=e;if(t!==i.basicTranslateAll){if(t===i.basicTranslateBasic)return o(b.zcS,i.basicActiveTitles),o(b.kgk,i.basicTranslateBasic),void n("showBasicBlocks",i.basicTranslateBasic);if(-1===i.filterActiveTitles.toString().indexOf(t))o(b.zcS,i.filterActiveTitles.concat([t])),o(b.kgk,i.basicTranslateAll);else{let e=i.filterActiveTitles.filter((e=>t!==e));if(0===e.length||1===e.length&&0===e.toString().indexOf(i.basicTranslateAll))return void n("showAll");o(b.zcS,e)}n("filterByBlocks")}else n("showAll")}},uo={configBlocks:e=>e.configBlocks,configSettingsFiltersList:e=>e.configSettingsFiltersList,configSearchQuery:e=>e.configSearchQuery,results:e=>e.results,allHidden:e=>e.allHidden,filterActiveTitles:e=>e.filterActiveTitles,basicState:e=>e.basicState,type:e=>e.type,basicActiveTitles:e=>e.basicActiveTitles,filterDefaultShortcuts:e=>e.filterDefaultShortcuts,basicTranslateAll:e=>e.basicTranslateAll,basicTranslateBasic:e=>e.basicTranslateBasic},po={[b.UF_](e,t){e.configBlocks=t},[b.nXz](e,t){e.configSettingsFiltersList=t},[b.HBW](e,t){e.configSearchQuery=t},[b.S9f](e,t){e.results=t},[b.zcS](e,t){e.filterActiveTitles=t},[b.kgk](e,t){e.basicState=t},[b.qeJ](e,t){e.type=t},[b.LQQ](e,t){e.basicActiveTitles=t},[b.gs5](e,t){e.filterDefaultShortcuts=t},[b.HNv](e,t){e.basicTranslateAll=t},[b.Mdm](e,t){e.basicTranslateBasic=t}},ho={namespaced:!0,state:{type:"",configBlocks:[],configSettingsFiltersList:[],configSearchQuery:"",results:[],sendRequest:!0,allHidden:!1,basicState:"All",basicTranslateAll:"All",basicTranslateBasic:"Basic",filterDefaultShortcuts:[],filterActiveTitles:[],basicActiveTitles:[]},actions:co,mutations:po,getters:uo},fo={recordForPrinting:e=>e.statisticRecord,recordForPrintingAttributesMeta:e=>e.statisticRecordAttributesMeta},mo={[b.z4R](e){e.statisticRecord=null},[b.Yed](e,t){e.statisticRecord=t},[b.Y8s](e,t){e.statisticRecordAttributesMeta=t}},go={namespaced:!0,state:{statisticRecord:null,statisticRecordAttributesMeta:null},getters:fo,mutations:mo,actions:{fetchDataForModal(e,t){let{commit:n}=e;return new Promise(((e,i)=>{(0,w.promisifiedAjax)({url:`/admin/customers/statistics/internet-statistics--online-info?${$.param(t)}`}).then((t=>{if(t.result&&!(0,w.emptyObject)(t.message))return n(b.Yed,t.message.model),n(b.Y8s,t.message.attributesMeta.attributes),void e();i(new Error("Invalid value in response"))})).catch((e=>{i(e)}))}))}}},vo=()=>({model:{},show_billing_tab:!1,show_cpe_tab:!1,show_services_tab:!1,show_statistics_tab:!1,show_documents_tab:!1,show_cap_tab:!1,show_communication_tab:!1,show_messengers_tab:!1,show_sub_accounts_tab:!1,exists_messenger_addons:!1,need_show_acs_tab:!1,show_crm_tab:!1,addonTabs:[],license_message:null,linked_billing_account_data:{}}),bo={...M({model:{},show_billing_tab:!1,show_cpe_tab:!1,show_services_tab:!1,show_statistics_tab:!1,show_documents_tab:!1,show_cap_tab:!1,show_communication_tab:!1,show_messengers_tab:!1,show_sub_accounts_tab:!1,exists_messenger_addons:!1,need_show_acs_tab:!1,show_crm_tab:!1,addonTabs:[],license_message:null,linked_billing_account_data:{}})},yo={loadCustomerInfo(e,n){let{commit:i,state:o}=e,s=!1;"object"==typeof n&&(s=n.isLead,n=n.id);let a=`${s?"/admin/crm/leads":"/admin/customers"}/view--get-page-data?id=${n}`;if(!empty(n))return new Promise(((e,t)=>{$.ajax({url:a,success:t=>{i(b.VQt,t),e()},error:e=>{t(e)}})}));empty(o.model)&&show_warning(t("customers","Customer is not selected"),3)},setCustomerInfo(e,t){let{commit:n}=e;n(b.VQt,t)}},wo={[b.VQt](e,t){for(let n in t)e[n]=t[n]}},_o={namespaced:!0,state:vo,actions:yo,mutations:wo,getters:bo,modules:{sessions:go}},To=()=>({model:{},showDocumentsTab:!1,showQuotesTab:!1,showCommunicationTab:!1,showMessengersTab:!1,existsMessengerAddons:!1,showCustomerTab:!1,addonTabs:[]}),Eo={...M({model:{},showDocumentsTab:!1,showQuotesTab:!1,showCommunicationTab:!1,showMessengersTab:!1,existsMessengerAddons:!1,showCustomerTab:!1,addonTabs:[]})},So={loadLeadInfo(e,n){let{commit:i,state:o}=e;if(!empty(n))return new Promise(((e,t)=>{$.ajax({url:`/admin/crm/leads/view--get-page-data?id=${n}`,success:t=>{i(b.ugH,t),e()},error:e=>{t(e)}})}));empty(o.model)&&show_warning(t("crm","Lead is not selected"),3)}},Ao={[b.ugH](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},Co={namespaced:!0,state:To,actions:So,mutations:Ao,getters:Eo},ko={taxName:null,items:{},ids:"",invoice:{},customerId:0,taxTotal:0,totalWithoutTax:0,totalWithTax:0,perTax:[],defaultTax:[],stocks:[],stockId:0},xo={...M(ko),formData(e){let t=new FormData;t.set("customer_id",e.customerId),t.set("stock_id",e.stockId);for(let n in e.items){if(!Object.prototype.hasOwnProperty.call(e.items,n))continue;const i=e.items[n];t.append("id[]",i.id),t.append("categoryIdForTransaction[]",i.categoryIdForTransaction),t.append("inventoryItems[]",i.inventoryItems),t.append("pos[]",i.pos),t.append("description[]",i.description),t.append("quantity[]",i.quantity),t.append("unit[]",null!==i.unit&&void 0!==i.unit?i.unit:""),t.append("price[]",i.price),t.append("tax[]",i.tax),t.append("tax_id[]",i.tax_id),t.append("with_tax[]",i.with_tax)}return t.append("number",e.invoice.number),t.append("date_created",e.invoice.date_created),t.append("date_till",e.invoice.date_till),t.append("note",e.invoice.note??""),t.set("ids",e.ids),t}},$o={initForm(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/inventory/items--sell-modal-info",success(n){t(b.cH6,n),e()},failed(){n()}})}))},loadFinanceItemsList(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/inventory/items--sell-modal-info-form-data?customerId=${t.customerId}`,method:"POST",data:{ids:t.ids},success(i){n(b.SwG,i),n(b.NFG,t.ids),e()},failed(){i()}})}))},recalculateRow(e,t){let{state:n,commit:i}=e,{item:o}=t,{modifiedField:s}=t,a=[],r=0;for(let e in n.items){if(!Object.prototype.hasOwnProperty.call(n.items,e))continue;let t=n.items[e];o.product_id===e&&(t=o),a[r++]={quantity:t.quantity,price:t.price,tax:t.tax,tax_id:t.tax_id,withVat:t.with_tax,isChangedInput:parseInt(o.product_id)===parseInt(t.product_id)}}$.ajax({url:`/admin/inventory/items--calc-row?quantity=${o.quantity}&price=${o.price}&taxId=${o.tax_id}&withVat=${o.with_tax}&modifiedField=${s}`,type:"POST",data:{items:JSON.stringify(a)},success(e){i(b._Sx,{taxTotal:e.total.vat,totalWithoutTax:e.total.withoutVat,withTax:e.total.total,perTax:e.total.per_tax}),o.price=e.rowData.price,o.quantity=e.rowData.quantity,o.total=e.rowData.total,o.tax=e.rowData.tax,o.tax_id=e.rowData.tax_id,o.with_tax=e.rowData.withVat,i(b.X8C,{product_id:o.product_id,item:o})},error(){show_error(window.xApp.$splang.t("inventory","Error while recalculate totals"),4)}})},clearFormData(e){let{commit:t}=e;t(b.SwG,{formData:{items:[],invoice:{number:"",date_created:"",date_till:""},invoiceTotals:{totalVat:0,totalWithoutVat:0,total:0,perTax:[]}}})},addRow(e){let{state:t}=e,n={},i=Math.max.apply(null,Object.keys(t.items))+1;n.description="",n.categoryIdForTransaction=1,n.pos=i,n.product_id=i,n.price="0.0000",n.with_tax="0.0000",n.total="0.0000",n.quantity=1,n.isNew=1,n.tax=t.defaultTax.rate,n.tax_id=t.defaultTax.id,n.getTaxesArray=t.items[Object.keys(t.items)[0]].getTaxesArray,o.default.set(t.items,i,n)},removeRow(e,t){let{state:n,commit:i,dispatch:o}=e;if(Object.keys(n.items).length<=1)return;i(b.bTy,t);let s=(0,w.sortObjectByProperty)(n.items,"pos",!1,!0);s=Array.from(s.values()),o("rePos",s),o("recalculateRow",{item:n.items[Object.keys(n.items)[Object.keys(n.items).length-1]],modifiedField:"price"})},rePos(e,t){let{state:n,commit:i}=e,{items:o}=n;for(let e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;const n=t[e];Object.prototype.hasOwnProperty.call(o,n.product_id)&&(o[n.product_id].pos=parseInt(e)+1)}i(b.tCU,o)},createDocument(e){let{getters:t}=e;return Bi("/admin/inventory/items--add-invoice",t.formData)},getNewNumber(e,t){let{customer_id:n,date_created:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/invoices--number?customer_id=${n}`,method:"GET",data:{date_created:i},success:t=>{e(t)},error:e=>{t(e)}})}))},updateStockId(e,t){let{commit:n}=e;n(b.B0v,t)}},Io={[b.cH6](e,t){e.taxName=t.taxName,e.stocks=t.stocks,e.stockId=t.default_stock},[b.SwG](e,t){e.items=t.formData.items,e.invoice=t.formData.invoice,e.customerId=t.customerId,e.taxTotal=t.formData.invoiceTotals.totalVat,e.totalWithoutTax=t.formData.invoiceTotals.totalWithoutVat,e.totalWithTax=t.formData.invoiceTotals.total,e.perTax=t.formData.invoiceTotals.per_tax,e.defaultTax=t.formData.default_tax},[b._Sx](e,t){e.taxTotal=t.taxTotal,e.totalWithoutTax=t.totalWithoutTax,e.totalWithTax=t.withTax,e.perTax=t.perTax},[b.ung](e,t){e.updatingRow=t},[b.X8C](e,t){o.default.set(e.items,t.product_id,t.item)},[b.bTy](e,t){o.default.delete(e.items,t)},[b.tCU](e,t){e.items=t},[b.NFG](e,t){e.ids=t},[b.B0v](e,t){e.stockId=t}},Oo={namespaced:!0,modules:{items:{namespaced:!0,modules:{sell:{namespaced:!0,state:ko,actions:$o,mutations:Io,getters:xo}}}}},Lo={customer:{},payment_method:null,formatted_deposit:0,formatted_mrr:0,blocking_info:{},show_finance_document_tab:!1,is_sub_account:!1,show_transactions_tab:!1,show_billing_config_tab:!1,addonTabs:[]},Ro={...M(Lo)},No={loadCustomerBillingInfo(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/customers/billing--get-page-data?id=${t}`,success:t=>{empty(t.license_message)?(n(b.Zwi,t),e()):address_reload()},error:e=>{i(e)}})}))},setCustomerBlockingInfo(e,t){let{commit:n}=e;n(b.lr6,t)}},Do={[b.Zwi](e,t){for(let n in t)e[n]=t[n]},[b.lr6](e,t){e.blocking_info=t}},Mo={namespaced:!0,state:Lo,actions:No,mutations:Do,getters:Ro},Po={vatPercent:0,taxId:0,model:{},needShowPlansSelect:!1,readOnly:!1,taxName:"VAT",taxesArray:{},attributesMeta:{},afAttributesMeta:{},isAggregatedBilling:!1,modelItems:[],taxTotal:0,totalWithoutTax:0,totalWithTax:0,perTax:[],linkToCustomer:"",relations:[],relationsTotal:0,relationsTotalFormatted:"0",additionalAttributes:[],actionPermissions:{},accounts:{},linkedBillingAccountData:{}},Fo={...M(Po)},Bo={loadModalInfo(e,t){let{commit:n}=e,{customer_id:i,request_id:o}=t,s={customer_id:i};return o&&(s.request_id=o),new Promise(((e,t)=>{$.ajax({url:"/admin/customers/billing/proforma-invoices--get-modal-info",method:"GET",data:s,success:t=>{n(b.F7K,(0,w.formattedResponse)(t)),e()},error:e=>{t(e)}})}))},getNewNumber(e,t){let{customer_id:n,date_created:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/proforma-invoices--number?customer_id=${n}`,method:"GET",data:{date_created:i},success:t=>{e(t)},error:e=>{t(e)}})}))}},Ho={[b.F7K](e,t){for(let n in t)"attributesMeta"!==n?("model"===n&&"paid"==t[n].status&&(e.readOnly=!0),e[(0,w.toCamelCase)(n)]=t[n]):(e[n]=t[n].attributes,e.afAttributesMeta=t[n].additional_attributes)},[b.gyR](e){e.model={},e.modelItems=[],e.taxTotal=0,e.totalWithoutTax=0,e.totalWithTax=0,e.perTax=[],e.readOnly=!1,e.accounts={}}},jo={namespaced:!0,state:Po,actions:Bo,mutations:Ho,getters:Fo},Uo={adminCanAdd:!1,dataTableHeaders:[],templatesTypes:[],dtColumnDefs:{},modelName:"",loadSpanishTemplates:!1,className:{},attributesMeta:{},model:{},isMailTemplate:!1,previewType:"",placeholders:{}},Wo={...M(Uo)},Ko={loadPageTemplatesData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/config/templates--get-page-data",success:n=>{t(b.aOf,n),e()},error:e=>{n(e)}})}))},loadAddPageInfo(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/templates--get-add-page-info?type=${t}`,success:t=>{n(b.aib,t),e()},error:()=>{i()}})}))},loadEditPageInfo(e,t){let{commit:n}=e,{id:i,type:o}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/config/templates--get-add-page-info?id=${i}&type=${o}`,success:t=>{n(b.aib,t),e()},error:()=>{t()}})}))}},Go={[b.aOf](e,t){for(let n in t)e[n]=t[n]},[b.aib](e,t){e.attributesMeta=t.attributesMeta.attributes,e.className=t.attributesMeta.className,e.isMailTemplate=t.isMailTemplate,e.previewType=t.previewType,e.placeholders=t.placeholders,(0,w.isset)(t,"model")&&(e.model=t.model)}},Vo={namespaced:!0,state:Uo,actions:Ko,mutations:Go,getters:Wo},zo={adminCanAdd:!1,dataTableHeaders:[],labelModules:[],dtColumnDefs:{},modelName:"",className:{},attributesMeta:{},model:{}},qo={...M(zo)},Yo={loadPageLabelsData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/config/labels--get-page-data",success:n=>{t(b.ua9,n),e()},error:e=>{n(e)}})}))},loadAddPageInfo(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/labels--get-add-page-info?module=${t}`,success:t=>{n(b.myW,t),e()},error:()=>{i()}})}))},loadEditPageInfo(e,t){let{commit:n}=e,{id:i,module:o}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/config/labels--get-add-page-info?id=${i}&module=${o}`,success:t=>{n(b.myW,t),e()},error:()=>{t()}})}))}},Xo={[b.ua9](e,t){for(let n in t)e[n]=t[n]},[b.myW](e,t){e.attributesMeta=t.attributesMeta.attributes,e.className=t.attributesMeta.className,(0,w.isset)(t,"model")&&(e.model=t.model)}},Qo={namespaced:!0,state:zo,actions:Yo,mutations:Xo,getters:qo},Zo={model:{},invoice:{},request:{},creditNote:{},paymentsTypesArray:{},attributesMeta:{},afAttributesMeta:{},isAggregatedBilling:!1,typeLabelForAddFields:{},readOnly:!1,customer:{},relatedItems:{},actionPermissions:{}},Jo={...M(Zo)},es={loadModalInfo(e,t){let{commit:n}=e,{customer_id:i,payment_id:o,invoice_id:s,request_id:a,view:r}=t;return new Promise(((e,t)=>{$.ajax({url:"/admin/customers/billing/payments--get-modal-info",method:"GET",data:{customer_id:i,payment_id:o??null,invoice_id:s??null,request_id:a??null,view:r??0},success:t=>{n(b.Ttj,(0,w.formattedResponse)(t)),e()},error:e=>{t(e)}})}))},loadFieldsForType:(e,t)=>new Promise(((e,n)=>{$.ajax({url:"/admin/customers/billing/payments--get-name-fields",method:"GET",data:{type:t},success:t=>{e(t)},error:e=>{n(e)}})})),getNewNumber(e,t){let{customer_id:n,date:i,payment_type:o}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/payments--receipt-number?customer_id=${n}`,method:"POST",data:{date:i,payment_type:o},success:t=>{e(t)},error:e=>{t(e)}})}))}},ts={[b.Ttj](e,t){for(let n in t)"attributesMeta"!==n?("isNewRecord"===n&&(e.readOnly=t[n]),e[n]=t[n]):(e[n]=t[n].attributes,e.afAttributesMeta=t[n].additional_attributes)},[b.WFE](e){e.model={},e.invoice={},e.request={},e.readOnly=!1}},ns={namespaced:!0,state:Zo,actions:es,mutations:ts,getters:Jo},is={hideAttributesForListByDefault:[],types:{},accounts:{},headerForTable:[],columns:[],columnDefs:[]},os={...M(is)},ss={loadModalInfo(e,t){let{commit:n}=e,{customer_id:i,type:o,account:s}=t;return new Promise(((e,t)=>{let a={id:i,type:o};null!==s&&(a.account=s),$.ajax({url:(0,w.withGet)("/admin/customers/billing/transactions--info-statement",a),method:"GET",success:t=>{n(b.NdH,t),e()},error:e=>{t(e)}})}))}},as={[b.NdH](e,t){for(let n in t)e[n]=t[n]},[b._7n](e){e.hideAttributesForListByDefault=[],e.types={},e.accounts={},e.headerForTable=[],e.columns=[],e.columnDefs=[]}},rs={namespaced:!0,state:is,actions:ss,mutations:as,getters:os},ls={isNewRecord:!1,model:{},showToInvoice:!1,needShowPlansSelect:!1,readOnly:!1,taxName:"VAT",taxesArray:{},categoriesArray:{},typesArray:{},attributesMeta:{},afAttributesMeta:{},taxTotal:0,totalWithoutTax:0,totalWithTax:0,perTax:[],vatPercent:0,taxId:0,isAutomaticBalanceCorrection:!1,accounts:[],linkedBillingAccountData:{}},cs={...M(ls)},ds={loadModalInfo(e,t){let{commit:n}=e,{customer_id:i,transaction_id:o}=t,s={customer_id:i};return o&&(s.transaction_id=o),new Promise(((e,t)=>{$.ajax({url:"/admin/customers/billing/transactions--get-modal-info",method:"GET",data:s,success:t=>{n(b.T29,t),e()},error:e=>{t(e)}})}))}},us={[b.T29](e,t){for(let n in t)"attributesMeta"!==n?e[(0,w.toCamelCase)(n)]=t[n]:(e[n]=t[n].attributes,e.afAttributesMeta=t[n].additional_attributes)},[b.im1](e){e.model={},e.taxTotal=0,e.totalWithoutTax=0,e.totalWithTax=0,e.perTax=[],e.showToInvoice=!1,e.isNewRecord=!1,e.isAutomaticBalanceCorrection=!1}},ps={namespaced:!0,state:ls,actions:ds,mutations:us,getters:cs},hs={defaultBillingType:"0",settingsBillingType:"0",dateForStartNextCharge:"",fallbackDateForStartNextCharge:"",model:{},needShowPlansSelect:!1,taxName:"VAT",taxesArray:{},billingTypes:{},attributesMeta:{},toBillAttributesMeta:{},afAttributesMeta:{},isAggregatedBilling:!1,lastProcess:{},modelItems:[],taxTotal:0,billingDue:0,totalWithoutTax:0,totalWithTax:0,perTax:[],balanceAfter:"",totalWithTaxUnformatted:0,readOnly:!1,vatPercent:0,taxId:0,lastCancelledCharge:[],accounts:{},linkedBillingAccountData:{}},fs={...M(hs)},ms={loadModalInfo(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/customers/billing/overview--modal-info-recurring-invoice?customer_id=${t}`,method:"GET",success:t=>{n(b._Z3,t),e()},error:e=>{i(e)}})}))},getNewNumber(e,t){let{customer_id:n,date_created:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/invoices--number?customer_id=${n}&date_created=${i}`,method:"GET",success:t=>{e(t)},error:e=>{t(e)}})}))}},gs={[b._Z3](e,t){for(let n in t)"attributesMeta"!==n?e[(0,w.toCamelCase)(n)]=t[n]:(e[n]=t[n].attributes,(0,w.isset)(t[n],["toBill"])&&(e.toBillAttributesMeta=t[n].toBill.attributes),e.afAttributesMeta=t[n].additional_attributes)},[b.xOD](e){e.model={},e.modelItems=[],e.taxTotal=0,e.totalWithoutTax=0,e.totalWithTax=0,e.perTax=[],e.balanceAfter="",e.totalWithTaxUnformatted=0,e.billingDue=0,e.dateForStartNextCharge="",e.fallbackDateForStartNextCharge="",e.lastProcess={},e.accounts={}}},vs={namespaced:!0,state:hs,actions:ms,mutations:gs,getters:fs},bs={isMassAction:!1,isPendingInvoices:!1,isPendingProformaInvoices:!1,customerId:0},ys={...M(bs)},ws={loadModalInfo(e,t){let{commit:n}=e,{nameController:i,ids:o}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/${i}--mass-pay`,method:"POST",data:{ids:o},success:t=>{n(b.Sp6,t),n(`customer_payments/${b.Ttj}`,t,{root:!0}),e(t)},error:e=>{t(e)}})}))}},_s={[b.Sp6](e,t){for(let n in t)e[n]=t[n]},[b.Pv8](e){e.isMassAction=!1,e.isPendingInvoices=!1,e.isPendingProformaInvoices=!1,e.customerId=0}},Ts={namespaced:!0,modules:{common:{namespaced:!0,modules:{mass_pay:{namespaced:!0,state:bs,actions:ws,mutations:_s,getters:ys}}}}},Es={modalShow:!1,appRefs:{},onBoardingStepsToGo:[],pageBillingConfigLoad:!1,pageFinanceDocumentsLoad:!1,pageMainDashboardLoad:!1,pageSchedulingLoad:!1,pageTaskViewLoad:!1,pageNetworkSiteViewLoad:!1,pageNetworkSitesListLoad:!1,taskViewOnBoardingShort:!1,pageCustomerViewLoad:!1,firstSubAccountLinked:!1,subAccountsTabLoad:!1,currentStep:{},showDeploymentGuideButton:!1,currentOnBoarding:"",rememberedStep:"",permissionsMap:{}},Ss={modalShow(e,t){let{commit:n}=e;n(b.ur4,t)},pageFinanceDocumentsLoadChange(e,t){let{commit:n}=e;n(b.udE,t)},pageMainDashboardLoadChange(e,t){let{commit:n}=e;n(b.fxl,t)},pageSchedulingLoadChange(e,t){let{commit:n}=e;n(b.zbk,t)},pageTaskViewLoadChange(e,t){let{commit:n}=e;n(b.Sjh,t)},pageNetworkSiteViewLoadChange(e,t){let{commit:n}=e;n(b.jE9,t)},pageNetworkSitesListLoadChange(e,t){let{commit:n}=e;n(b.pyw,t)},taskViewOnBoardingShort(e,t){let{commit:n}=e;n(b.A$3,t)},pageCustomerViewLoadChange(e,t){let{commit:n}=e;n(b.qPz,t)},subAccountsLinkedChange(e,t){let{commit:n}=e;n(b.QCZ,t)},subAccountsTabLoadChange(e,t){let{commit:n}=e;n(b.IaX,t)},addRefs(e,t){let{commit:n,dispatch:i}=e,o={...t};n(b.Y32,o),n(b.JyH,o,{root:!0}),i("addSteps"),i("checkWhatOnBoardingToLoad")},handleOnBoardingsToLoad(e){let{dispatch:t}=e;t("checkWhatOnBoardingToLoad")},addSteps(){(0,w.empty)(Es.onBoardingStepsToGo)&&(Es.onBoardingStepsToGo=this.getters.onBoardingSteps)},checkWhatOnBoardingToLoad(e){let{state:t,dispatch:n,commit:i}=e,o=0,s=setInterval((()=>{o++,5!==o?t.pageFinanceDocumentsLoad&&t.onBoardingStepsToGo.indexOf("billingModuleOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","billingModuleOnBoarding"),n("initOnBoarding")):t.pageMainDashboardLoad&&t.onBoardingStepsToGo.indexOf("regularUserOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","regularUserOnBoarding"),n("initOnBoarding")):t.pageMainDashboardLoad&&t.onBoardingStepsToGo.indexOf("superAdminOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","superAdminOnBoarding"),n("initOnBoarding")):t.pageSchedulingLoad&&t.onBoardingStepsToGo.indexOf("schedulingOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","schedulingOnBoarding"),n("initOnBoarding")):t.pageTaskViewLoad&&t.onBoardingStepsToGo.indexOf("taskViewOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","taskViewOnBoarding"),n("initOnBoarding")):t.pageNetworkSiteViewLoad&&t.onBoardingStepsToGo.indexOf("networkSiteViewGuideOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","networkSiteViewGuideOnBoarding"),n("initOnBoarding")):t.pageNetworkSitesListLoad&&t.onBoardingStepsToGo.indexOf("networkSitesListGuideOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","networkSitesListGuideOnBoarding"),n("initOnBoarding")):t.pageCustomerViewLoad&&t.onBoardingStepsToGo.indexOf("introducingLBAOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","introducingLBAOnBoarding"),n("initOnBoarding")):-1==t.onBoardingStepsToGo.indexOf("introducingLBAOnBoarding")&&t.firstSubAccountLinked&&t.onBoardingStepsToGo.indexOf("introducingLBASubAccountsOnBoarding")>-1?(clearInterval(s),i("currentOnBoarding","introducingLBASubAccountsOnBoarding"),n("initOnBoarding")):t.subAccountsTabLoad&&t.onBoardingStepsToGo.indexOf("introducingLBASubAccountsTabOnBoarding")>-1&&(clearInterval(s),i("currentOnBoarding","introducingLBASubAccountsTabOnBoarding"),n("initOnBoarding")):clearInterval(s)}),500)},removeRefs(e){let{state:t}=e;t.appRefs={}},popstateHandle(e){let{dispatch:t}=e;window.onpopstate=()=>{t("closeOnBoarding")}},closeOnBoarding(e){let{dispatch:t}=e;t("modalShow",!1),t("bodyScroll"),t("removeRefs")},initOnBoarding(e){let{state:t,dispatch:n}=e;window.innerWidth<1024?n("modalShow",!1):""!==t.currentOnBoarding&&(""!==t.rememberedStep?n(t.rememberedStep):n(t.currentOnBoarding),n("bodyScroll"),window.addEventListener("resize",(()=>{if(""!==t.currentOnBoarding){if(window.innerWidth<1024)return void n("modalShow",!1);""!==t.rememberedStep?n(t.rememberedStep):n(t.currentOnBoarding),n("bodyScroll")}})),n("popstateHandle"))},billingModuleOnBoarding(e){let{state:t,dispatch:n}=e,{financeDocumentsTab:i}=t.appRefs;void 0!==i&&n("billingModuleOnBoardingStepOne")},billingModuleOnBoardingStepOne(e){let{dispatch:t,commit:n}=e,i={title:window.xApp.$splang.t("common","Billing tour. <span>Step 1/4</span>"),subtitle:window.xApp.$splang.t("common","New simple logic."),text:window.xApp.$splang.t("common","We've simplified the logic and use of billing in our product. Next, we'll show you how."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){t("completeTour","billingModuleOnBoarding"),n("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){t("billingModuleOnBoardingStepTwo"),n("rememberedStep","billingModuleOnBoardingStepTwo")}}],offset:{left:0,top:324,width:606,height:168,align:"center"}};t("generateStep",{elements:[],message:i,callback:function(){}})},billingModuleOnBoardingStepTwo(e){let{dispatch:t,commit:n}=e,i=document.querySelector("#customers_view_billing_tabs"),o=[],s={elements:o,message:function(){if(void 0!==i){o.push(i.querySelector(".x-tabs-bar"));let e=i.querySelector(".x-tabs-bar").getBoundingClientRect(),s=e.left-10,a=e.top+e.height+10;return{title:window.xApp.$splang.t("common","Billing tour. <span>Step 2/4</span>"),subtitle:window.xApp.$splang.t("common","3 Tabs."),text:window.xApp.$splang.t("common","In the first tab, we have gathered all <b>Financial documents</b> for a more unified look and feel <b>Transactions</b> have been kept as it details all billing interactions. Billing overview has also been renamed to <b>Billing config</b>."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){t("completeTour","billingModuleOnBoarding"),n("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){t("billingModuleOnBoardingStepThree"),n("rememberedStep","billingModuleOnBoardingStepThree")}}],offset:{left:s,top:a,width:532,height:208}}}}(),callback:function(){}};t("generateStep",s)},billingModuleOnBoardingStepThree(e){let{dispatch:t,commit:n}=e,i=[],o={elements:i,message:function(){let e=document.querySelector("#tabsCustomerBillingOverviewBlock");if(void 0!==e){i.push(e);let o=e.getBoundingClientRect(),s=o.left-10,a=o.top+o.height+20;return{title:window.xApp.$splang.t("common","Billing tour. <span>Step 3/4</span>"),subtitle:window.xApp.$splang.t("common","Customer billing overview."),text:window.xApp.$splang.t("common","Always visible and easily accessible so you don't have to switch between tabs."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){t("completeTour","billingModuleOnBoarding"),n("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){t("billingModuleOnBoardingStepFour"),n("rememberedStep","billingModuleOnBoardingStepFour")}}],offset:{left:s,top:a,width:e.width,height:188}}}}(),callback:function(){}};t("generateStep",o)},billingModuleOnBoardingStepFour(e){let{state:t,dispatch:n,commit:i}=e,o=[],s={elements:o,message:function(){let{billingDataTableWrapper:e}=t.appRefs;if(void 0!==e){let e=document.querySelector("#admin_customers_view_finance_documents_list").querySelectorAll("th:nth-child(2), td:nth-child(2)"),t=document.querySelector("#addDocumentButtonHolder"),s=t.getBoundingClientRect();return o.push(t,e),{title:window.xApp.$splang.t("common","Billing tour. <span>Step 4/4</span>"),subtitle:window.xApp.$splang.t("common","All Financial documents in one place."),text:window.xApp.$splang.t("common","We have merged all financial documents into one space - they are now easily accessible and can also be filtered to view certain types of documents. We have also introduced future items, credit notes and partial payments from version 4.0"),buttons:[{buttonText:window.xApp.$splang.t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","billingModuleOnBoarding"),i("rememberedStep","")}}],offset:{left:582,top:s.top+s.height+20,width:493,height:228}}}}(),callback:function(){}};n("generateStep",s)},regularUserOnBoarding(e){let{state:t,dispatch:n}=e,{dashboardReff:i}=t.appRefs;void 0!==i&&n("regularUserOnBoardingStepOne")},regularUserOnBoardingStepOne(e){let{state:t,dispatch:n,commit:i}=e,{menuHolder:o}=t.appRefs,s=[o],a={title:window.xApp.$splang.t("common","Product tour. <span>Step 1/4</span>"),subtitle:window.xApp.$splang.t("common","Main menu."),text:window.xApp.$splang.t("common","Here you can find all the available functions."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","regularUserOnBoarding"),i("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("regularUserOnBoardingStepTwo"),i("rememberedStep","regularUserOnBoardingStepTwo")}}],offset:{left:o.getBoundingClientRect().width+30,top:220,width:372,height:168}};n("generateStep",{elements:s,message:a,callback:function(){}})},regularUserOnBoardingStepTwo(e){let{state:t,dispatch:n,commit:i}=e,{headerNavigationHolder:o}=t.appRefs,s=[o],a=o.getBoundingClientRect().width<372?window.innerWidth-372:o.getBoundingClientRect().left-10,r={title:window.xApp.$splang.t("common","Product tour. <span>Step 2/4</span>"),subtitle:window.xApp.$splang.t("common","Quick access."),text:window.xApp.$splang.t("common","We've brought frequent and important features to a visible place where you can always ask for help,  use our powerful search tool, receive notifications or browse product documentation."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","regularUserOnBoarding"),i("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("regularUserOnBoardingStepThree"),i("rememberedStep","regularUserOnBoardingStepThree")}}],offset:{left:a,top:o.getBoundingClientRect().height+30,width:372,height:168}};n("generateStep",{elements:s,message:r,callback:function(){}})},regularUserOnBoardingStepThree(e){let{state:t,dispatch:n,commit:i}=e,{dashboardReff:o}=t.appRefs,s=[o],a={title:window.xApp.$splang.t("common","Product tour. <span>Step 3/4</span>"),subtitle:window.xApp.$splang.t("common","The dashboard."),text:window.xApp.$splang.t("common","Here we have collected information for you from the main modules of the product which is worth paying attention to. Some modules also have their own dashboards."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","regularUserOnBoarding"),i("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("regularUserOnBoardingStepFour"),i("rememberedStep","regularUserOnBoardingStepFour")}}],offset:{left:0,top:225,width:372,height:168}};n("generateStep",{elements:s,message:a,callback:function(){}})},regularUserOnBoardingStepFour(e){let{dispatch:t,commit:n}=e,i=window.xApp.$splang.t("common","You can explore the product yourself."),o=window.xApp.$splang.t("common","Or"),s=window.xApp.$splang.t("common","watch the video"),a=window.xApp.$splang.t("common","that our team has recorded for you, which clarifies many aspects of Splynx product."),r={title:window.xApp.$splang.t("common","Product tour. <span>Step 4/4</span>"),subtitle:window.xApp.$splang.t("common","Where to begin?"),text:`${i}</br>${o}&nbsp;<a href="https://www.youtube.com/watch?v=UtE4oifGqZ8" target="_blank">${s}</a>&nbsp;${a}`,video:"https://www.youtube.com/embed/UtE4oifGqZ8",buttons:[{buttonText:window.xApp.$splang.t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){t("completeTour","regularUserOnBoarding"),n("rememberedStep","")}}],offset:{left:0,top:60,width:446,height:456,align:"center"}};t("generateStep",{elements:[],message:r,callback:function(){}})},superAdminOnBoarding(e){let{state:t,dispatch:n}=e,{dashboardReff:i}=t.appRefs;void 0!==i&&n("superAdminOnBoardingStepOne")},superAdminOnBoardingStepOne(e){let{state:t,dispatch:n,commit:i}=e,{menuHolder:o}=t.appRefs,s=[o],a={title:window.xApp.$splang.t("common","Product tour. <span>Step 1/4</span>"),subtitle:window.xApp.$splang.t("common","Main menu."),text:`${window.xApp.$splang.t("common","Lots of items, right?")}<br>${window.xApp.$splang.t("common","You can hide the ones your business does't need")}&nbsp;<a href="/admin/config/modules/main" target="_blank">${window.xApp.$splang.t("common","on the Config page")}</a>`,buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","superAdminOnBoarding"),i("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("superAdminOnBoardingStepTwo"),i("rememberedStep","superAdminOnBoardingStepTwo")}}],offset:{left:o.getBoundingClientRect().width+30,top:220,width:372,height:168}};n("generateStep",{elements:s,message:a,callback:function(){}})},superAdminOnBoardingStepTwo(e){let{state:t,dispatch:n,commit:i}=e,{headerNavigationHolder:o}=t.appRefs,s=[o],a={title:window.xApp.$splang.t("common","Product tour. <span>Step 2/4</span>"),subtitle:window.xApp.$splang.t("common","Quick access."),text:window.xApp.$splang.t("common","We've brought frequent and important features to a visible place where you can always ask for help, use our powerful search tool, receive notifications or browse product documentation."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","superAdminOnBoarding"),i("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("superAdminOnBoardingStepThree"),i("rememberedStep","superAdminOnBoardingStepThree")}}],offset:{left:o.getBoundingClientRect().left-10,top:o.getBoundingClientRect().height+30,width:372,height:168}};n("generateStep",{elements:s,message:a,callback:function(){}})},superAdminOnBoardingStepThree(e){let{state:t,dispatch:n,commit:i}=e,{dashboardReff:o}=t.appRefs,s=[o],a={title:window.xApp.$splang.t("common","Product tour. <span>Step 3/4</span>"),subtitle:window.xApp.$splang.t("common","The dashboard."),text:window.xApp.$splang.t("common","Here we have collected information for you from the main modules of the product, which is worth paying attention to.<br> Some modules also have their own dashboards."),buttons:[{buttonText:window.xApp.$splang.t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","superAdminOnBoarding"),i("rememberedStep","")}},{buttonText:window.xApp.$splang.t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("superAdminOnBoardingStepFour"),i("rememberedStep","superAdminOnBoardingStepFour")}}],offset:{left:0,top:225,width:372,height:168}};n("generateStep",{elements:s,message:a,callback:function(){}})},superAdminOnBoardingStepFour(e){let{dispatch:t,commit:n}=e,i=window.xApp.$splang.t("common","Use deployment guide"),o=window.xApp.$splang.t("common","Or"),s=window.xApp.$splang.t("common","watch the video"),a=window.xApp.$splang.t("common","that our team has recorded for you, which clarifies many aspects of Splynx product deployment."),r={title:window.xApp.$splang.t("common","Product tour. <span>Step 4/4</span>"),subtitle:window.xApp.$splang.t("common","Where to begin?"),text:`<span class="styled-link" onclick="document.getElementById('buttonDeploymentGuide').click();">${i}.</span>&nbsp;${o}&nbsp;<a href="https://www.youtube.com/watch?v=UtE4oifGqZ8" target="_blank">${s}</a>&nbsp;${a}`,video:"https://www.youtube.com/embed/UtE4oifGqZ8",buttons:[{buttonText:window.xApp.$splang.t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){t("completeTour","superAdminOnBoarding"),n("rememberedStep","")}}],offset:{left:0,top:60,width:446,height:456,align:"center"}};t("generateStep",{elements:[],message:r,callback:function(){}})},schedulingOnBoarding(e){let{state:t,dispatch:n}=e,{schedulingCalendar:i}=t.appRefs;void 0!==i&&n("schedulingOnBoardingStepOne")},schedulingOnBoardingStepOne(e){let{dispatch:n,commit:i}=e,o={title:t("common","Scheduling calendar tour. <span>Step 1/4</span>"),subtitle:`${t("common","Welcome to the revamped calendar view!")}<br>`,text:`${t("common","Experience more options and enjoy the convenience of editing tasks")}<br>${t("common","on a single page.")}`,buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","schedulingOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("schedulingOnBoardingStepTwo"),i("rememberedStep","schedulingOnBoardingStepTwo")}}],offset:{width:502,height:188,align:"center"}};n("generateStep",{message:o,callback:function(){}})},schedulingOnBoardingStepTwo(e){let{dispatch:n,commit:i}=e,o=document.querySelector("#toggleButton"),s=[o],a=o.getBoundingClientRect(),r={title:t("common","Scheduling calendar tour. <span>Step 2/4</span>"),subtitle:`${t("common","Teams & Assignees.")}<br>`,text:`${t("common","Effortlessly view all the teams and assignees you are interested in on a")}<br>${t("common","single screen. Simply reveal their details by clicking on this icon.")}`,buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","schedulingOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("schedulingOnBoardingStepThree"),i("rememberedStep","schedulingOnBoardingStepThree")}}],offset:{left:a.left-15,top:a.top+a.height+20,width:532,height:188}};n("generateStep",{elements:s,message:r,callback:function(){}})},schedulingOnBoardingStepThree(e){let{dispatch:n,commit:i}=e,o=document.querySelector("#schedulingNavigationButtons"),s=[o],a=o.getBoundingClientRect(),r={title:t("common","Scheduling calendar tour. <span>Step 3/4</span>"),subtitle:`${t("common","Backlog & Filters.")}<br>`,text:`${t("common","We've introduced sorting and search functionality to the ")}<b>${t("common","Backlog,")}</b><br>${t("common","allowing you to easily organize and find tasks by project, assignee, and")}<br>\n                ${t("common","creator. Additionally, ")}<b>${t("common","Filters")}</b>\n                ${t("common","now offer more options for a more flexible")}<br>\n                ${t("common","display of information.")}`,buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","schedulingOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("schedulingOnBoardingStepFourth"),i("rememberedStep","schedulingOnBoardingStepFourth")}}],offset:{left:a.right-532,top:a.top+a.height+20,width:532,height:228}};n("generateStep",{elements:s,message:r,callback:function(){}})},schedulingOnBoardingStepFourth(e){let{dispatch:n,commit:i}=e,o=document.querySelector("#schedulingAddTaskButton"),s=[o],a=o.getBoundingClientRect(),r={title:t("common","Scheduling calendar tour. <span>Step 4/4</span>"),subtitle:`${t("common","Task creation.")}<br>`,text:`${t("common","Experience seamless task creation directly from the sidebar while")}<br>\n                ${t("common","staying on the same page. If needed, you can always navigate to the")}<br>\n                ${t("common","Task page later for more details.")}`,buttons:[{buttonText:t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","schedulingOnBoarding"),i("rememberedStep","")}}],offset:{left:a.right-385,top:a.top+a.height+20,width:532,height:208}};n("generateStep",{elements:s,message:r,callback:function(){}})},networkSitesListGuideOnBoarding(e){let{state:t,dispatch:n}=e;const{page:i}=t.appRefs;void 0!==i&&n("networkSitesListGuideOnBoardingStepOne")},networkSitesListGuideOnBoardingStepOne(e){let{dispatch:n,commit:i}=e;const o={config:{height:"52",width:"73",styles:"with-tab-padding"},elements:[document.querySelector("#admin_networking_network_sites_add_button")],message:{title:t("networking","Network sites tour."),subtitle:t("networking","Welcome to the new network site module! {br}",{br:"<br />"}),text:t("networking","This feature enables you to add an unlimited number of network sites, each seamlessly integrated with linked hardware devices, access points, and customer services. Add your first network site to explore its capabilities."),offset:{width:502,height:228,align:"center"},buttons:[{buttonText:t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","networkSitesListGuideOnBoarding"),i("rememberedStep","")}}]},callback:()=>{}};n("generateStep",o)},networkSiteViewGuideOnBoarding(e){let{state:t,dispatch:n}=e;const{tabs:i}=t.appRefs;void 0!==i&&n("networkSiteViewGuideOnBoardingStepOne")},networkSiteViewGuideOnBoardingStepOne(e){let{dispatch:n,commit:i}=e;const o=document.querySelector("#network_site_view_tabs .x-tabs-bar"),s=[o],a=o.getBoundingClientRect(),r=`<a href="https://wiki.splynx.com/en/networking/hardware#adding-a-new-device" target="_blank">${t("common","Access device toggle")}</a>`,l={title:t("networking","Network sites tour. {step}",{step:"<span>Step 1/3</span>"}),subtitle:t("networking","Easy manage {br}",{br:"<br />"}),text:t("networking","Easily switch between tabs to manage your network site efficiently. To link customer services to existing hardware, first enable the {link}.",{link:r}),offset:{left:a.left-14,top:a.bottom+16,width:502,height:208},buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","networkSiteViewGuideOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("networkSiteViewGuideOnBoardingStepTwo"),i("rememberedStep","networkSiteViewGuideOnBoardingStepTwo")}}]};n("generateStep",{elements:s,message:l,config:{height:"54",styles:"with-tab-padding"},callback:()=>{}})},networkSiteViewGuideOnBoardingStepTwo(e){let{dispatch:n,commit:i}=e;const o=document.querySelector("#network_site_view_tabs #t-customers"),s=[o],a=o.getBoundingClientRect(),r=`<a href="/admin/customers/list" target="_blank">${t("networking","Customers list")}</a>`,l={title:t("networking","Network sites tour. {step}",{step:"<span>Step 2/3</span>"}),subtitle:t("networking","Streamlined Linking {br}",{br:"<br />"}),text:t("networking","Here, you can see which customer services are linked to Access device. Customers services can be linked either individually or in bulk. To link multiple customer services, use the mass actions button in the top left corner of the {link} and click on “Link to access device.”",{link:r}),offset:{left:a.left,top:a.bottom+16,width:532,height:228},buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","networkSiteViewGuideOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("networkSiteViewGuideOnBoardingStepThree"),i("rememberedStep","networkSiteViewGuideOnBoardingStepThree")}}]};n("generateStep",{elements:s,message:l,config:{height:"54",styles:"with-tab-padding",parentClass:"x-tabs-bar mode-light"},callback:()=>{}})},networkSiteViewGuideOnBoardingStepThree(e){let{dispatch:n,commit:i}=e;const o=`<a href="https://wiki.splynx.com/en/networking/network-sites" target="_black">${t("networking","Splynx knowledge base")}</a>`,s={message:{title:t("networking","Network sites tour. {step}",{step:"<span>Step 3/3</span>"}),subtitle:t("networking","Get started with network sites {br}",{br:"<br />"}),text:t("networking","For comprehensive details on this feature, visit our {base}.",{base:o}),offset:{width:502,height:188,align:"center"},buttons:[{buttonText:t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","networkSiteViewGuideOnBoarding"),i("rememberedStep","")}}]},callback:()=>{}};n("generateStep",s)},taskViewOnBoarding(e){let{state:t,dispatch:n}=e,{taskView:i}=t.appRefs;void 0!==i&&n("taskViewOnBoardingStepOne")},taskViewOnBoardingStepOne(e){let{dispatch:n,commit:i}=e;const o=Es.taskViewOnBoardingShort?"<span>Step 1/3</span>":"<span>Step 1/4</span>";let s={title:t("common","Task page tour. {stepTour}",{stepTour:o}),subtitle:`${t("common","WELCOME TO THE REVAMPED TASKS PAGE.")}<br>`,text:`${t("common","We have arranged everything so that you can simultaneously manage")}<br>${t("common","both the task and the details of the corresponding customer.")}`,buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","taskViewOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("taskViewOnBoardingStepTwo"),i("rememberedStep","schedulingOnBoardingStepTwo")}}],offset:{width:532,height:188,align:"center"}};n("generateStep",{message:s,callback:function(){}})},taskViewOnBoardingStepTwo(e){let{dispatch:n,commit:i}=e,o=document.querySelector("#taskDetailsCard"),s=[o],a=o.getBoundingClientRect();const r=Es.taskViewOnBoardingShort?"<span>Step 2/3</span>":"<span>Step 2/4</span>";let l={title:t("common","Task page tour. {stepTour}",{stepTour:r}),subtitle:`${t("common","TASK SECTIONS.")}<br>`,text:`${t("common","All necessary information on the task is collected here. Each tab has ")}<br>${t("common","several improvements.")}`,buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","taskViewOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){let e=Es.taskViewOnBoardingShort?"taskViewOnBoardingStepFourth":"taskViewOnBoardingStepThree";n(e),i("rememberedStep",e)}}],offset:{left:a.left+19,top:a.top+127,width:502,height:188}};n("generateStep",{elements:s,message:l,config:{height:"120",styles:"with-tab-padding"},callback:function(){}})},taskViewOnBoardingStepThree(e){let{dispatch:n,commit:i}=e,o=document.querySelector("#customerDetailsCard"),s=[o],a=o.getBoundingClientRect(),r={title:t("common","Task page tour. <span>Step 3/4</span>"),subtitle:`${t("common","CUSTOMER INFORMATION.")}<br>`,text:`${t("common","Basic information about the customer and their service is always ")}<br>${t("common","available when you are working on a task. Link a customer to a task")}<br>${t("common","to see all the new features on the updated page.")}`,buttons:[{buttonText:t("common","Close & finish the product tour"),buttonClassNames:"btn btn-cancel",buttonAction(){n("completeTour","taskViewOnBoarding"),i("rememberedStep","")}},{buttonText:t("common","Next"),buttonClassNames:"btn btn-primary",buttonAction(){n("taskViewOnBoardingStepFourth"),i("rememberedStep","taskViewOnBoardingStepFourth")}}],offset:{left:a.left-100,top:a.top+112,width:502,height:208}};n("generateStep",{elements:s,message:r,config:{height:"105",styles:"with-tab-padding"},callback:function(){}})},taskViewOnBoardingStepFourth(e){let{dispatch:n,commit:i}=e,o=document.querySelector(".customer-buttons-wrapper"),s=[o],a=o.getBoundingClientRect();const r=Es.taskViewOnBoardingShort?"<span>Step 3/3</span>":"<span>Step 4/4</span>";let l={title:t("common","Task page tour. {stepTour}",{stepTour:r}),subtitle:`${t("common","UPDATED MAIN CONTROLS.")}<br>`,text:`${t("common","Experience seamless task creation directly from the sidebar and an")}<br>${t("common","updated task-saving logic. Now, when switching between tabs, by")}<br>${t("common","default, but with a warning, the changes made in the task will")}${t("common"," automatically be saved.")}`,buttons:[{buttonText:t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","taskViewOnBoarding"),i("rememberedStep","")}}],offset:{left:a.left-347,top:a.top+62,width:502,height:228}};n("generateStep",{elements:s,message:l,callback:function(){}})},introducingLBAOnBoarding(e){let{dispatch:t}=e;document.querySelector("#customer-view-Actions")&&t("introducingLBAOnBoardingStepOne")},introducingLBAOnBoardingStepOne(e){let{dispatch:n,commit:i}=e,o=document.querySelector("#customer-view-Actions"),s=[o],a=o.getBoundingClientRect(),r={title:t("common","Introduction to Linked accounts"),text:`${t("common","Splynx now supports {highlighted_linked_accounts}, allowing you to create {highlighted_main} ",{highlighted_linked_accounts:"<b>Linked accounts</b>",highlighted_main:"<b>main</b>"})}<br>${t("common","{highlighted_accounts} and link {highlighted_sub_accounts} for enhanced billing and management ",{highlighted_accounts:"<b>accounts</b>",highlighted_sub_accounts:"<b>sub-accounts</b>"})}<br>${t("common","flexibility. This feature is perfect for businesses managing multiple ")}<br>${t("common","customer accounts under a single billing entity.")}<br>${t("common","To get started, use the {highlighted_actions} button to link sub-accounts to a main ",{highlighted_actions:"<b>Actions</b>"})}<br>${t("common","account. This enables consolidated billing, shared account management,")}<br>${t("common","and a seamless experience for both administrators and end-users.")}<br>${t("common","{highlighted_new} The “Link sub-account” action simplifies account association.",{highlighted_new:"<b>New:</b>"})}`,buttons:[{buttonText:t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","introducingLBAOnBoarding"),i("rememberedStep","");const e=document?.querySelector("li#t-sub_accounts");e&&(i("currentOnBoarding","introducingLBASubAccountsOnBoarding"),n("initOnBoarding"))}}],offset:{left:a.left-600,top:a.top+a.height-40,width:548,height:296}};n("generateStep",{elements:s,message:r,callback:function(){}})},introducingLBASubAccountsOnBoarding(e){let{dispatch:t}=e;document.querySelector("li#t-sub_accounts")&&t("introducingLBASubAccountsOnBoardingStepOne")},introducingLBASubAccountsOnBoardingStepOne(e){let{dispatch:n,commit:i}=e,o=document.querySelector("#t-sub_accounts"),s=[o],a=o.getBoundingClientRect(),r={title:t("common","Managing Linked sub-accounts"),text:`${t("common","Once linked, sub-accounts are neatly organized under the new {highlighted_sub} ",{highlighted_sub:"<b>Sub-</b>"})}<br>${t("common","{highlighted_accounts} tab. Here, you can view all linked accounts, monitor their ",{highlighted_accounts:"<b>accounts</b>"})}<br>${t("common","statuses, and manage relationships between the main and sub-accounts. ")}<br>${t("common","{highlighted_key_benefit} Gain complete visibility and control over sub-account  ",{highlighted_key_benefit:"<b>Key benefit:</b>"})}<br>${t("common","connections within a centralized interface, ensuring smooth operations")}<br>${t("common","and simplified customer account grouping.")}<br>`,buttons:[{buttonText:t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","introducingLBASubAccountsOnBoarding"),i("rememberedStep","")}}],offset:{left:a.left-370,top:a.top+a.height+20,width:532,height:256}};n("generateStep",{elements:s,message:r,callback:function(){},config:{height:"54",styles:"with-tab-padding",parentClass:"x-tabs-bar mode-light"}})},introducingLBASubAccountsTabOnBoarding(e){let{dispatch:t}=e,{subAccountsTab:n}=Es.appRefs;void 0!==n&&t("introducingLBASubAccountsTabOnBoardingStepOne")},introducingLBASubAccountsTabOnBoardingStepOne(e){let{dispatch:n,commit:i}=e,o={title:t("common","Sub-account controls & features"),text:`${t("common","Sub-accounts tab provides robust controls to tailor account")}<br>${t("common","relationships.")}<br>\n                <ul class="marked-list">\n                    <li><b>${t("common","Edit sub-accounts")}</b> - ${t("common","adjust the billing mode to either aggregated billing")}<br>\n                    ${t("common","(one invoice for all linked accounts) or independent billing for separate")}<br>\n                    ${t("common","invoicing to each sub-account.")}\n                    </li>\n                    <li><b>${t("common","Enable sub-account management ")}</b> - ${t("common","allow the main account holder")} <br>${t("common","to oversee sub-accounts directly.")}</li>\n                </ul>`,buttons:[{buttonText:t("common","Close & discover the product"),buttonClassNames:"btn btn-primary",buttonAction(){n("completeTour","introducingLBASubAccountsTabOnBoarding"),i("rememberedStep","")}}],offset:{width:548,height:276,align:"center"}};n("generateStep",{message:o,callback:function(){}})},showDeploymentGuide(){Es.onBoardingStepsToGo.indexOf("deploymentGuideEnabled")>-1&&(Es.showDeploymentGuideButton=!0)},hideDeploymentGuide(e){let{state:t}=e;(0,w.promisifiedAjax)({url:"/admin/profile--make-tour-as-complete",data:{tour:"deploymentGuideEnabled"},method:"POST"}),t.showDeploymentGuideButton=!1},generateStep(e,t){let n,i,o,s,a,r,l,{commit:c}=e,{elements:d,message:u,callback:p,config:h}=t,f=[],m=0;d&&d.length>0&&d.forEach((e=>{if(Object.prototype.isPrototypeOf.call(NodeList.prototype,e)){let t=document.createElement("table");t.classList="table table-striped table-without-vertical-margin",e.forEach(((e,n)=>{0===n&&(l=e.getBoundingClientRect());let i=document.createElement("tr");i.appendChild(e.cloneNode(!0)),t.appendChild(i)})),n=t}else l=e.getBoundingClientRect(),n=e.cloneNode(!0);i=parseInt(l.left)-10,o=parseInt(l.top)-8,s=h&&h.width?parseInt(h.width):parseInt(l.width)+20,h&&h.height&&(a=parseInt(h.height)),h&&h.styles&&(r=h.styles),m=0===m?l.top:m<l.top?m:l.top;let t={element:n,offset:{left:i,top:o,width:s,height:a},styles:r};h?.parentClass&&(t.parentClass=h.parentClass),f.push(t)}));let g={selectedElements:f,message:u,callback:p};c(b.wS7,g),c(b.ur4,!0)},enableOnBoarding(e,t){let{state:n,commit:i,dispatch:o}=e;n.onBoardingStepsToGo.push(t),i("currentOnBoarding","billingModuleOnBoarding"),o("initOnBoarding")},restartOnBoarding(e,t){let{state:n,commit:i,dispatch:o}=e;-1===n.onBoardingStepsToGo.indexOf(t)&&n.onBoardingStepsToGo.push(t),i("currentOnBoarding",t),o("initOnBoarding")},completeTour(e,t){let{commit:n,dispatch:i}=e;(0,w.promisifiedAjax)({url:"/admin/profile--make-tour-as-complete",data:{tour:t},method:"POST"}),i("closeOnBoarding");let o=Es.onBoardingStepsToGo.indexOf(t);o>-1&&Es.onBoardingStepsToGo.splice(o,1),n("currentOnBoarding","")},bodyScroll(e){let{state:t}=e,n=document.querySelector("body");t.modalShow?n.style.overflow="hidden":n.removeAttribute("style")},loadPermissions(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/on-boarding",method:"GET",success:n=>{t(b.Trk,n.permissions),e(n)},error:()=>{n()}})}))}},As={...M(Es)},Cs={[b.ur4](e,t){e.modalShow=t},[b.udE](e,t){e.pageFinanceDocumentsLoad=t},[b.fxl](e,t){e.pageMainDashboardLoad=t},[b.zbk](e,t){e.pageSchedulingLoad=t},[b.Sjh](e,t){e.pageTaskViewLoad=t},[b.jE9](e,t){e.pageNetworkSiteViewLoad=t},[b.pyw](e,t){e.pageNetworkSitesListLoad=t},[b.A$3](e,t){e.taskViewOnBoardingShort=t},[b.qPz](e,t){e.pageCustomerViewLoad=t},[b.QCZ](e,t){e.firstSubAccountLinked=t},[b.IaX](e,t){e.subAccountsTabLoad=t},[b.Y32](e,t){void 0===e.appRefs?e.appRefs=t:e.appRefs=Object.assign(t,e.appRefs)},[b.Tx$](e,t){e.steps=t},[b.wS7](e,t){e.currentStep=t},rememberedStep(e,t){e.rememberedStep=t},currentOnBoarding(e,t){e.currentOnBoarding=t},[b.Trk](e,t){e.permissionsMap=t}},ks={namespaced:!0,state:Es,actions:Ss,getters:As,mutations:Cs},xs={blockInNextBillingCycle:!1,recurringBlockingDays:"",recurringBlockingDate:"",deactivationDate:"",deactivationDays:"",customerStatus:"",isProcessBillingDueEnabled:!1,toBillLogDate:"",isWorkingDay:!0,deactivationDayIsWorking:!0,disabledByPeriod:!1},$s={...M(xs)},Is={loadModalInfo(e,t){let{commit:n}=e,{customer_id:i,date:o}=t,s={id:i};return o&&(s.date=o),new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/overview--recurring-blocking-info?${$.param(s)}`,method:"GET",success:t=>{n(b.JAi,t),e()},error:e=>{t(e)}})}))}},Os={[b.JAi](e,t){for(let n in t)e[n]=t[n]},[b.e3L](e){e.blockInNextBillingCycle=!1,e.recurringBlockingDays="",e.recurringBlockingDate="",e.deactivationDate="",e.deactivationDays="",e.customerStatus="",e.isProcessBillingDueEnabled=!1,e.toBillLogDate="",e.isWorkingDay=!0,e.deactivationDayIsWorking=!0,e.disabledByPeriod=!1}},Ls={namespaced:!0,state:xs,actions:Is,mutations:Os,getters:$s},Rs={typeOverview:!1,typePrepaid:!1,typePrepaidMonthly:!1,isEntryPointsExist:!1,hasActiveServices:!1,invertAccountBalance:!1,needCreateInvoiceAfterPayment:!1,proformaInvoicesEnabled:!1,model:{},attributesMeta:{},partnerId:0,customerId:0,futureBlockInfo:{},adminCan:{toBill:!1,calendar:!1,previewReminder:!1,cancelToBill:!1,paymentAccountsIndex:!1,extendExpiration:!1,cancelLastChargeIsEnabled:!1,recurring_blocking_info:!1},reminderBlock:{days:[],labels:[],types:{},count:0,recurringNextDate:[{date:"",label:"",format:""}],isStaticDay:!1},paymentAccountData:"",billingInfo:{types:{},paymentMethods:{},blockingDates:{},dates:{},disableValueBlockingPeriod:0,defaultPartnerPercent:"0",datesWithoutDisabled:{},datesForProformaInvoice:{},periods:{},requestTypes:{}},customerBlockingInfo:{},interPartnerEnabled:!1},Ns={...M(Rs)},Ds={loadPageData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/customers/billing/overview--get-page-data?id=${t}`,method:"GET",success:t=>{empty(t.license_message)?(n(b.Km2,t),e()):address_reload()},error:e=>{i(e)}})}))},changeFutureBlockInfo(e,t){let{commit:n}=e;n(b.mWg,t)},setBillingSettingsModel(e,t){let{commit:n}=e;n(b.Km2,{model:{...Rs.model,...t}})}},Ms={[b.Km2](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]="customerId"!=n&&"partnerId"!=n?t[n]:Number(t[n])},[b.mWg](e,t){e.futureBlockInfo=t},[b.Zew](e){e.typeOverview=!1,e.typePrepaid=!1,e.typePrepaidMonthly=!1,e.blockInNextBillingCycle=!1,e.isEntryPointsExist=!1,e.hasActiveServices=!1,e.needCreateInvoiceAfterPayment=!1,e.model={},e.attributesMeta={},e.partnerId=0,e.customerId=0,e.futureBlockInfo={},e.adminCan={toBill:!1,calendar:!1,previewReminder:!1,cancelToBill:!1,paymentAccountsIndex:!1,extendExpiration:!1},e.reminderBlock={days:[],labels:[],types:{},count:0,recurringNextDate:[{date:"",label:"",format:""}],isStaticDay:!1},e.paymentAccountData="",e.billingInfo={types:{},paymentMethods:{},blockingDates:{},dates:{},disableValueBlockingPeriod:0,defaultPartnerPercent:"0",datesWithoutDisabled:{},datesForProformaInvoice:{},periods:{},requestTypes:{},cancelLastChargeIsEnabled:!1},e.requestTypes={},e.interPartnerEnabled=!1}},Ps={namespaced:!0,state:Rs,actions:Ds,mutations:Ms,getters:Ns},Fs={mail:{},sms:{},subject:"",reminderSubjects:""},Bs={...M(Fs)},Hs={loadModalInfo(e,t){let{commit:n}=e,{customerId:i,type:o}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/customers/billing/overview--preview-reminder?customerId=${i}&reminderType=${o}`,method:"GET",success:t=>{n(b.ZRG,t),e()},error:e=>{t(e)}})}))}},js={[b.ZRG](e,t){for(let n in t)e[n]=t[n]},[b.w5U](e){e.mail={}}},Us={namespaced:!0,modules:{to_bill_log_edit_date:Ls,overview_tab_info:Ps,preview_reminder:{namespaced:!0,state:Fs,actions:Hs,mutations:js,getters:Bs}}},Ws={config:{},rawConfig:{},attributesMeta:{},partnerId:null,partner:{},partnersList:{},isPartnerConfig:!1,billingType:"",billingTypes:{},isNeedShowTopUpWarning:!1},Ks={...M(Ws)},Gs={loadPageData(e,t){let{commit:n}=e,{partner_id:i,billing_type:o}=t;return new Promise(((e,t)=>{null===i&&(i=""),$.ajax({url:`/admin/config/main/cap--get-page-data?partner_id=${i}&billing_type=${o}`,success:t=>{n(b.NxC,t),e()},error:e=>{t(e)}})}))}},Vs={[b.NxC](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},zs={namespaced:!0,state:Ws,actions:Gs,mutations:Vs,getters:Ks},qs={config:{},rawConfig:{},attributesMeta:{},billing:{},partnerId:null,partnersList:{},isReminderStaticDay:!1,blocks:{}},Ys={...M(qs)},Xs={loadPageData(e,t){let{commit:n}=e,{partnerId:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/config/finance/reminders--get-page-data?partner_id=${i}`,success:t=>{n(b.Oi_,t),n(b.$gI,t.raw_config.blocks),e()},error:e=>{t(e)}})})).then((()=>{})).catch((()=>{}))}},Qs={[b.Oi_](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]},[b.$gI](e,t){e.blocks=t}},Zs={namespaced:!0,state:qs,actions:Xs,mutations:Qs,getters:Ys},Js={config:{},rawConfig:{},attributesMeta:{},partner:{},billing:{},customerLabel:{},disableValueBlockingPeriod:""},ea={...M(Js)},ta={loadPageData(e,t){let{commit:n}=e,{partnerId:i}=t;return(0,w.promisifiedAjax)({url:`/admin/config/finance/settings--get-page-data?partner_id=${i}`,method:"GET"}).then((e=>{let{config:t,billing:i}=e;for(let e in t.items)Object.prototype.hasOwnProperty.call(t.items[e],"options")&&(t.items[e].options=Object.assign(t.items[e].options,i[e]));n(b.VMH,e)}))}},na={[b.VMH](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},ia={namespaced:!0,state:Js,actions:ta,mutations:na,getters:ea},oa={config:{},rawConfig:{},attributesMeta:{},partner:{}},sa={...M(oa)},aa={loadPageData(e,t){let{commit:n}=e,{partnerId:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/config/company-information--get-page-data?partner_id=${i}`,success:t=>{n(b.hyz,t),e()},error:e=>{t(e)}})})).then((()=>{})).catch((()=>{}))},deleteLogo(e,t){let{commit:n}=e,{partnerId:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/config/company-information--delete-logo?partner_id=${i}`,method:"POST",success:t=>{n(b.hyz,t),e()},error:e=>{t(e)}})})).then((()=>{})).catch((()=>{}))}},ra={[b.hyz](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},la={namespaced:!0,state:oa,actions:aa,mutations:ra,getters:sa},ca={config:{},rawConfig:{},attributesMeta:{},fields:{},partnersList:{},partnerConfig:{},partnerRawConfig:{},partnerAttributesMeta:{}},da={...M(ca)},ua={loadGeneralTabData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/config/main/portal--general-settings",success:n=>{t(b.HF5,n),e()},error:e=>{n(e)}})}))},loadAdditionalFieldsData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/config/main/portal--get-additional-settings",success:n=>{t(b.HF5,n),e()},error:e=>{n(e)}})}))},loadPartnerTabData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/main/portal--get-partner-settings?partner_id=${t}`,success:t=>{n(b.HF5,t),e()},error:e=>{i(e)}})}))}},pa={[b.HF5](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},ha={namespaced:!0,state:ca,actions:ua,mutations:pa,getters:da},fa={model:{email:"",username:"",password:"",imap_host:"",imap_port:"",imap_no_validate_cert:!0,encryption:"tls",imap_what_find:"all",imap_last_processing_date:"",imap_mark_as_read:!0,imap_receive_unregistered_email:!0,ticket_priority:"",ticket_group_id:"",ticket_type_id:"",imap_enabled:!0},oauth_account:{id:"",status:"",server_name:"",date_added:"",error_message:""},whatFindArray:[],addressFromArray:[],prioritiesArray:[],groupsArray:[],typesArray:[],authTypesArray:[],encryptionArray:[],attributeLabels:[],attributesMeta:{},domainUrl:"",defaultOfficeOauthValues:[]},ma={...M(fa)},ga={loadEditPageData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:`/admin/config/support/incoming-mail--load-edit-page-data?id=${t}`,success:t=>{n(b.SIp,t),e()},error:()=>{i()}})}))},loadAddPageData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/config/support/incoming-mail--load-add-page-data",success:n=>{t(b.SIp,n),e()},error:()=>{n()}})}))}};function va(e){return null===e?"0":e}const ba={[b.SIp](e,t){e.model=t.model,e.model.ticket_group_id=va(e.model.ticket_group_id),e.model.ticket_priority=va(e.model.ticket_priority),e.model.ticket_type_id=va(e.model.ticket_type_id),e.whatFindArray=t.whatFindArray,e.addressFromArray=t.addressFromArray,e.prioritiesArray=t.prioritiesArray,e.groupsArray=t.groupsArray,e.typesArray=t.typesArray,e.authTypesArray=t.authTypesArray,e.encryptionArray=t.encryption_array,e.attributeLabels=t.attributeLabels,e.attributesMeta=t.attributesMeta.attributes,t.oauth_account&&(e.oauth_account=t.oauth_account),e.domainUrl=t.domainUrl,e.defaultOfficeOauthValues=t.default_office_oauth_values}},ya={namespaced:!0,state:fa,actions:ga,mutations:ba,getters:ma},wa={isSchedulingEnabled:!0,addonTabs:[]},_a={...M(wa)},Ta={loadProfilePageData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/profile--load-profile-page-data",success:n=>{t(b.iD0,n),e()},error:e=>{n(e)}})}))}},Ea={[b.iD0](e,t){for(let n in t)e[n]=t[n]}},Sa={namespaced:!0,state:wa,actions:Ta,mutations:Ea,getters:_a},Aa={securityModes:[],whatFindArray:[],adminsList:{},imapModel:{},attributesMeta:{},systemSmtpParams:{},systemSmtpIsConfigured:!0,imapIsFullyConfigured:!0,authTypesList:{},domainUrl:"",oauthAccount:{id:"",status:"",server_name:"",date_added:"",error_message:""},defaultOfficeImapOauthValues:[],defaultOfficeSmtpOauthValues:[],smtpTypeOptions:[]},Ca={...M(Aa)},ka={loadPageData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/profile--load-email-page-data",success:n=>{t(b.E1z,n),e()},error:e=>{n(e)}})}))}},xa={[b.E1z](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},$a={namespaced:!0,state:Aa,actions:ka,mutations:xa,getters:Ca},Ia={customerSearchFields:[]},Oa={...M(Ia)},La={loadPageData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/profile--customer-search-fields",success:n=>{t(b._zf,n),e()},error:e=>{n(e)}})}))}},Ra={[b._zf](e,t){for(let n in t)e[n]=t[n]}},Na={namespaced:!0,state:Ia,actions:La,mutations:Ra,getters:Oa},Da=()=>({checkedAll:!1}),Ma={...M({checkedAll:!1})},Pa={checkAllState(e,t){let{commit:n}=e;n(b.lkd,t)}},Fa={[b.lkd](e,t){e.checkedAll=t}},Ba={namespaced:!0,state:Da,actions:Pa,mutations:Fa,getters:Ma},Ha={model:null,without_google_account:!1,google_account_email:"",google_account_is_enabled:null,data_table_headers:[],splynx_domain:"",pairedCalendarsModal:{model:{},calendars_list:{},google_calendars_list:{},attribute_labels:{},attributes_meta:{},is_new_record:!1,empty_account:!1,error:!1,message:""},deleteModal:{attributes_meta:{}}},ja={...M(Ha)},Ua={loadPageData(e){let{commit:t}=e;return new Promise(((e,n)=>{$.ajax({url:"/admin/profile--load-scheduling-page-data",success:n=>{t(b.$5$,n),e()},error:e=>{n(e)}})}))},disconnectAccount:()=>new Promise(((e,t)=>{$.ajax({url:"/admin/profile--scheduling-disconnect-google-account",type:"POST",success:t=>{show_success(t.message,4),e()},error:e=>{t(e)}})})),loadPairedCalendarsData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:t.url,success:t=>{n(b.aGs,t),e()},error:e=>{i(e)}})}))},loadPairedCalendarsDeleteData(e,t){let{commit:n}=e;return new Promise(((e,i)=>{$.ajax({url:t.url,success:t=>{n(b.SeJ,t),e()},error:e=>{i(e)}})}))}},Wa={[b.$5$](e,t){for(let n in t)e[n]=t[n]},[b.aGs](e,t){for(let n in t)e.pairedCalendarsModal[n]=t[n]},[b.SeJ](e,t){for(let n in t)e.deleteModal[n]=t[n]}},Ka={namespaced:!0,state:Ha,actions:Ua,mutations:Wa,getters:ja},Ga={id:null,type:null,tabsContent:[],changedElements:[]},Va={...M(Ga),url(e){let t="roles"===e.type?"name":"id";return`/admin/administration/${e.type}--permissions?${t}=${e.id}`},saveList(e){let t=[];return e.changedElements.forEach((e=>{let{controller:n,action:i}=e,o=e.checked?"allow":"deny";empty(n)||empty(i)||empty(o)||t.push({controller:n,action:i,rule:o})})),t}},za={loadData(e,t){let{commit:n,getters:i}=e;return n(b.NeY,t),n(b.l6r),new Promise(((e,t)=>{$.ajax({url:i.url,method:"GET",success:t=>{n(b.BQv,t),e()},error:e=>{t(e)}})}))},addChangedElement(e,t){let{state:n,commit:i}=e;Xa(n.tabsContent[t.index].items,t.item),i(b.rJj,{...t.item})},selectUnselectAllChildren(e,t){let{state:n,commit:i}=e,o=[],s=(e,t,n)=>{e.forEach((e=>{if(e.controller===t.controller&&e.action===t.action){e.checked!==n&&(e.checked=n,o.push({...e}));let t=e=>{e.checked!==n&&(e.checked=n,o.push({...e})),(0,w.isset)(e,"items")&&e.items.length>0&&e.items.forEach(t)};e.items.forEach(t)}(0,w.isset)(e,"items")&&e.items.length>0&&s(e.items,t,n)}))};s(n.tabsContent[t.index].items,t.item,t.value),i(b.rJj,o)},changeAllElements(e,t){let{state:n,commit:i}=e,o=[],s=(e,t)=>{e.forEach((e=>{e.checked!==t&&(e.checked=t,o.push({...e})),(0,w.isset)(e,"items")&&e.items.length>0&&s(e.items,t)}))};s(n.tabsContent[t.index].items,t.value),i(b.rJj,o)},saveData(e){let{commit:t,getters:n}=e;empty(n.saveList)?show_error(window.xApp.$splang.t("common","Not changes"),4):$.ajax({type:"POST",url:n.url,dataType:"json",data:{data:JSON.stringify(n.saveList)},success(e){e.result?(show_success(e.message,4),t(b.l6r)):showErrors(e.message,4)}})}},qa={[b.NeY](e,t){for(let n in t)e[n]=t[n]},[b.BQv](e,t){let n=t.controllers_map;e.tabsContent=(0,w.isObject)(n)?Object.values(n):n},[b.rJj](e,t){let n=t=>{const n=e=>e.controller===t.controller&&e.action===t.action;e.changedElements.some((e=>n(e)))?e.changedElements=e.changedElements.filter((e=>!n(e))):e.changedElements.push({...t})};(0,w.isArray)(t)?t.forEach(n):n(t)},[b.l6r](e){e.changedElements=[]}},Ya={namespaced:!0,state:Ga,actions:za,getters:Va,mutations:qa};function Xa(e,t){e.forEach((e=>{e.controller===t.controller&&e.action===t.action&&(e.checked=t.checked),(0,w.isset)(e,"items")&&e.items.length>0&&Xa(e.items,t)}))}const Qa={config:{className:"",items:[]},rawConfig:{translate:!0},attributesMeta:{},existsModule:!0},Za={...M(Qa),attributesMeta:e=>Object.keys(e.attributesMeta).length?e.attributesMeta.attributes:{}},Ja={loadPageData(e,t){let{commit:n}=e,{module:i}=t;return new Promise(((e,t)=>{$.ajax({url:`/admin/config/modules/list--get-main-data?module=${i}`,success:t=>{n(b.YbS,t),e()},error:e=>{t(e)}})})).then((()=>{})).catch((()=>{}))}},er={[b.YbS](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},tr={namespaced:!0,state:Qa,getters:Za,mutations:er,actions:Ja},nr={config:{className:"",items:[]},rawConfig:{translate:!0},attributesMeta:{}},ir={...M(nr),attributesMeta:e=>Object.keys(e.attributesMeta).length?e.attributesMeta.attributes:{}},or={updatePerPartner(e,t){let{commit:n}=e,{module:i,blockPartnersQueries:o}=t;const s=$.param({partner:o.per_partner_options});return new Promise(((e,t)=>{$.ajax({url:`/admin/config/modules/list--get-config-data?module=${i}&${s}`,success:t=>{n(b.fvb,t),e()},error:e=>{t(e)}})})).then((()=>{})).catch((()=>{}))},loadPageData(e,t){let{commit:n}=e,{module:i,blockPartnersQueries:o}=t;const s=$.param({partner:o.per_partner_options});return new Promise(((e,t)=>{$.ajax({url:`/admin/config/modules/list--get-config-data?module=${i}&${s}`,success:t=>{n(b.YbS,t),e()},error:e=>{t(e)}})})).then((()=>{})).catch((()=>{}))}},sr={[b.fvb](e,t){const n=t.raw_config.blocks.config.items.per_partner_options;e.rawConfig.blocks.config.items.per_partner_options=n;for(let i in n.items)e.config.items[i]=t.config.items[i]},[b.YbS](e,t){for(let n in t)e[(0,w.toCamelCase)(n)]=t[n]}},ar={namespaced:!0,state:nr,getters:ir,mutations:sr,actions:or};class rr{static async loadCheckAccess(e){let t="";return t=e?(0,w.withGet)("/admin/scheduling/tasks/view--get-access-file-upload-permissions",e):"/admin/scheduling/tasks/view--get-access-file-upload-permissions",(0,w.promisifiedAjax)({url:t})}}const lr={checkAccessAction:"",checkAccessController:""},cr={...M(lr)},dr={async getAccessPermissions(e,t){let{commit:n}=e;n("updateData",await rr.loadCheckAccess(t))}},ur={updateData(e,t){e.checkAccessAction=t.check_access_action,e.checkAccessController=t.check_access_controller}},pr={namespaced:!0,state:lr,getters:cr,actions:dr,mutations:ur};var hr=i(30741);const fr={messengersList:[],commonUnread:0,opened:!1,notifyTrigger:!1,chats:[],filter:["0","1"],viewListTrigger:!1,soundNotificationsActive:!1,selectedNotificationsSound:hr.A.DEFAULT_SOUND},mr={...M(fr),filteredChats(e){if(0===e.filter.length)return e.chats;let t=e.chats.filter((t=>!(!e.filter.includes("0")||!t.assign_id)||!(!e.filter.includes("1")||t.assign_id)));return t.sort(((e,t)=>{if(e.chat_unread_messages>t.chat_unread_messages)return-1;if(e.chat_unread_messages<t.chat_unread_messages)return 1;moment.suppressDeprecationWarnings=!0;let n=moment(e.message.created),i=moment(t.message.created);return moment.suppressDeprecationWarnings=!1,n.isAfter(i)?-1:n.isBefore(i)?1:0})),t}},gr={[b.LT1](e,t){e.chats=e.chats.filter((e=>e.id!==t))},[b.FrB](e,t){t.forEach((t=>{let n=e.chats.find((e=>e.id===t.id));n?Object.keys(t).forEach((e=>{n[e]=t[e]})):e.chats.push(t)}))},[b.NA_](e,t){e.commonUnread=t},[b.bLf](e,t){e.filter=t},[b.pXv](e,t){e.soundNotificationsActive=t},[b.op6](e,t){e.selectedNotificationsSound=t},[b.YM7](e,t){e.chats=t},[b.TAs](e,t){e.messengersList=t},[b.U69](e){e.opened=!0},[b.IIA](e){e.opened=!1},[b.s7G](e){e.viewListTrigger=!0,setTimeout((()=>{e.viewListTrigger=!1}),1e3)},[b.P0R](e){e.notifyTrigger=!0,setTimeout((()=>{e.notifyTrigger=!1}),1e3)}},vr={namespaced:!0,state:fr,actions:{initChatBoxUpdating(e){let{dispatch:t,commit:n}=e;n(b.IIA),remove_socket_listener("chat_box_chats_updated"),add_socket_listener("chat_box_chats_updated",(e=>{"update"===e.type?t("updateOrAddChats",e.data):"remove"===e.type&&t("removeChat",e.data.id)})),remove_socket_listener("chat_box_update_unread_counter"),add_socket_listener("chat_box_update_unread_counter",(e=>{let{data:n}=e;if(!n)return;const{counter:i}=n;t("updateCommonCounter",i??0)})),io.connect(`//${window.location.host}/notification`).on("notification",(e=>{"message"===e.command&&"messengers"===e.scope&&t("notify")}))},updateCommonCounter(e,t){let{commit:n}=e;n(b.NA_,t)},updateOrAddChats(e,t){let{commit:n}=e;n(b.FrB,t)},removeChat(e,t){let{commit:n}=e;n(b.LT1,t)},setChatBoxFilter(e,t){let{commit:n}=e;n(b.bLf,t)},setChatBoxSoundNotificationsActive(e,t){let{commit:n}=e;n(b.pXv,t)},setChatBoxNotificationsSound(e,t){let{commit:n}=e;n(b.op6,t)},async fetchChats(e){let{commit:t}=e;const n=await hr.A.fetchChats();t(b.TAs,n.data.messengers??[]),t(b.op6,n.data.selected_notification_sound??hr.A.DEFAULT_SOUND),t(b.YM7,n.data.data??[]),t(b.NA_,n.data.counter??0)},open(e){let{commit:t}=e;t(b.U69)},close(e){let{commit:t}=e;t(b.IIA)},showList(e){let{commit:t}=e;t(b.s7G)},notify(e){let{commit:t}=e;t(b.P0R)}},mutations:gr,getters:mr},br={getCallbacksForEvent:e=>(t,n)=>{const i=[];return e.handlers[n]?(e.handlers[n].forEach((e=>{Array.from(e.values()).forEach((e=>{e.name.replace("bound ","")===t&&i.push(e)}))})),i):i}},yr={listenChats(e){let{getters:t}=e;add_socket_listener("messenger_chat_message",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("onNewItem",`${o}_${s}`).forEach((e=>e(i)))})),add_socket_listener("messenger_chat_close",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("onConversationClose",`${o}_${s}`).forEach((e=>e(i)))})),add_socket_listener("messenger_chat_message_attachment_refresh",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("onAttachmentUpdate",`${o}_${s}`).forEach((e=>e(i)))})),add_socket_listener("messenger_chat_add_activities_for_last_message",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("onAddActivitiesForLastMessage",`${o}_${s}`).forEach((e=>e(i)))})),add_socket_listener("messenger_chat_message_status_update",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("statusUpdate",`${o}_${s}`).forEach((e=>e(i)))})),add_socket_listener("messenger_chat_ticked_linked",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("onTicketLinked",`${o}_${s}`).forEach((e=>e(i)))})),add_socket_listener("messenger_chat_ticked_unlinked",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("onTicketUnlinked",`${o}_${s}`).forEach((e=>e(i)))})),add_socket_listener("messenger_chat_reassign",(e=>{let{meta:n,data:i}=e;const{messenger_id:o,chat_id:s}=n;t.getCallbacksForEvent("onReassign",`${o}_${s}`).forEach((e=>e(i)))}))},addChatHandlers(e,t){let{commit:n}=e,{callbacks:i,ids:o}=t;n("ADD_CHAT_HANDLERS",{ids:o,callbacks:i})}},wr={ADD_CHAT_HANDLERS(e,t){let{ids:n,callbacks:i}=t;e.handlers[`${n.messenger}_${n.chat}`]||(e.handlers[`${n.messenger}_${n.chat}`]=new Map),e.handlers[`${n.messenger}_${n.chat}`].set(i,i)}},_r={state:()=>({menuStructure:[],admin:{},logo:"",footer:"",license:{},serverSideConfig:{},pageTitle:"",refreshRouteKey:(new Date).getTime(),documentationConfig:{},firstDayOfWeek:{},weekends:{},showPageError:{error:null,comment:null,code:0,file:null,line:null,html:null},headerShortcuts:[]}),mutations:Ut,actions:Ht,getters:jt,modules:{admin_permissions:Bt,chatbox:vr,chats_listener:{namespaced:!0,state:{handlers:{}},getters:br,mutations:wr,actions:yr},filters_store:be,tabs_store:pe,search:Gt,entry_points:Yt,locations:Jt,partners:sn,leads:hn,tasks:Tn,task_view:Ln,task_customer_bus:st,task_view_checklist:Un,task_view_warnings:zn,task_options_for_inventory_modals:Zn,global_notifications_store:$e,sidebar:tt,notifications:ni,internet_tariffs:ri,one_time_tariffs:pi,recurring_tariffs:vi,voice_tariffs:Ti,bundle_tariffs:ki,scheduling_resources:kn,customer_invoices:Li,customer_credit_notes:Pi,customers:_o,leads_view:Co,customer_communication:Be,lead_communication:Ue,customer_billing:Mo,acs_provision_flow:lo,settings:ho,inventory:Oo,customer_proforma_invoices:jo,templates:Vo,labels:Qo,customer_payments:ns,customer_statements:rs,customer_transactions:ps,customer_recurring_invoices:vs,finance:Ts,global_search:D,history_and_preview:j,customers_overview:Us,on_boarding:ks,scheduling_map:Ne,hotspot_export_report:X,menu_store:ae,administration:G,cap_configs:zs,portal_configs:ha,incoming_mail_boxes:ya,admin_profile:Sa,admin_imap:$a,admin_customer_search:Na,admin_customers_list:Ba,admin_scheduling:Ka,taxes:Qe,permissions:Ya,config_reminders:Zs,company_info:la,finance_settings:ia,addon_config_main:tr,addon_config:ar,scheduling_calendars:De,render_task_template:Pn,network_sites_view:gt,file_upload:pr,geo_data:ut,update_table_items:At},plugins:[function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.storage||window.localStorage,n=e.key||"vuex",i=e.paths||null;function o(e){try{const o=i?function(e,t){return t.reduce(((t,n)=>(Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]),t)),{})}(e,i):e;t.setItem(n,JSON.stringify(o))}catch(e){console.error("Failed to save state:",e)}}return function(i){const s=function(){try{const e=t.getItem(n);return e?JSON.parse(e):void 0}catch(e){return void console.error("Failed to load state:",e)}}();s&&i.replaceState({...i.state,...s}),i.subscribe(((t,n)=>{("function"!=typeof e.filter||e.filter(t))&&o(n)}))}}({paths:["notifications","admin_customers_list","filters_store","chatbox"],setState(e,t,n){n.setItem(e,JSON.stringify(function(e){return function e(t){return"function"==typeof t?t.toString():Array.isArray(t)?t.map(e):null!==t&&"object"==typeof t?Object.fromEntries(Object.entries(t).map((t=>{let[n,i]=t;return[n,e(i)]}))):t}(e)}(t)))},storage:{getItem:e=>window.localStorage.getItem(e),setItem:(e,t)=>window.localStorage.setItem(e,t),removeItem:e=>window.localStorage.removeItem(e)}})]};function Tr(e){return e.path&&e.children&&!e.component}function Er(e,t){return t.map((t=>(void 0!==t.delimiter?t.path=e+t.delimiter+t.path:t.path=`${e}/${t.path}`,t)))}function Sr(e){const t=[];for(const n of e)n.children&&0!==n.children.length?Tr(n)?t.push(...Sr(Er(n.path,n.children))):(n.children=Sr(n.children),t.push(n)):t.push(n);return t}function Ar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(let n of e){if(null!==t)if((0,w.isset)(n,["meta","breadcrumbs"])&&n.meta.breadcrumbs.length>0)for(let e=t.length-1;e>=0;e--)n.meta.breadcrumbs.unshift(t[e]);else(0,w.isset)(n,["meta","breadcrumbs"])||((0,w.isset)(n,["meta"])||(n.meta={}),n.meta.breadcrumbs=[]),n.meta.breadcrumbs=t;n.children&&n.children.length>0&&((0,w.isset)(n,["meta","breadcrumbs"])?Ar(n.children,n.meta.breadcrumbs):Ar(n.children,null))}return e}class Cr{constructor(){this.license_info=window.spl_config.license_info}needRedirectToLicenseRoute(e){return void 0!==this.license_info&&!e.includes("/admin/license")}getRouteToRedirect(){return void 0!==this.license_info.licenseKey&&(0,w.empty)(this.license_info.licenseKey)?{name:"admin.license.enter"}:{name:"admin.license"}}static reloadLicenseRoute(){window.spl_config.license_info=void 0,window.location.reload()}getLicenseInfo(){return this.license_info}}var kr=i(70351),xr=i(56062),$r=i(90305);const Ir={name:"XTooltip",components:{XPopover:xr.o},props:{name:{type:String,default:"tooltip"},event:{type:String,default:"hover"},pointer:{type:Boolean,default:!1},width:{type:Number,default:160},component:{type:Object,default:()=>({})}},data:()=>({value:"",delay:200}),computed:{getWidth(){return"object"==typeof this.value&&(0,w.isset)(this.value,["width"])?this.value.width:this.width},hideEventName(){return`hide:${this.event}`},isHover(){return"hover"===this.event}},mounted(){this.isHover&&($(document).off("mouseleave","div.x-tooltip-content",this.onMouseLeave),$(document).on("mouseleave","div.x-tooltip-content",this.onMouseLeave)),splynx_event_bus.on("before_switch_page",this.close)},methods:{close(){$r.g.$emit(`${this.hideEventName}-no-delay`)},onMouseLeave(){$r.g.$emit(this.hideEventName)}}};o.default.directive("x-tooltip",(0,kr.u)());const Or=Ir;var Lr=i(71938);const Rr=(0,Lr.A)(Or,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-popover",{attrs:{name:e.name,pointer:e.pointer,event:e.event,delay:e.delay,width:e.getWidth,"not-hide-on-content":e.isHover},on:{show:function(t){e.value=t.value}}},["string"==typeof e.value?n("div",{domProps:{innerHTML:e._s(e.value)}}):e._e(),n(e.value.component,e._b({tag:"component"},"component",e.value.componentParams,!1))],1)}),[],!1,null,null,null).exports;const Nr="spl_global_notification_add_event",Dr={name:"XGlobalNotifications",mounted(){"function"==typeof remove_socket_listener&&remove_socket_listener(Nr,this.add),"function"==typeof add_socket_listener&&add_socket_listener(Nr,this.add)},computed:{...(0,a.L8)("global_notifications_store",["getNotifications","interceptors"]),limitedNotifications(){return this.getNotifications.filter(((e,t)=>t<5))}},methods:{...(0,a.PY)("global_notifications_store",[_e,Te]),...(0,a.i0)("global_notifications_store",["showNotify"]),...(0,a.i0)("tabs_store",["switchTab","clearTab"]),add(e){this.interceptors[e.type]&&!this.interceptors[e.type].interceptor(e)||this.showNotify(e)},remove(e){this.REMOVE_NOTIFICATION(e)},runAction(e){"function"==typeof e.action_button.action?e.action_button.action():"string"==typeof e.action_button.action?switch_page(e.action_button.action):(switch_page(e.action_button.redirect_url,!1,!0),this.getHash()),this.remove(e.id)},getHash(){if(this.$route.hash){let{hash:e}=this.$route;this.switchTab(e.substring(1)),this.$nextTick((()=>{this.clearTab()}))}}}};const Mr=(0,Lr.A)(Dr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toasters-wrap"},[n("transition-group",{attrs:{name:"fade"}},e._l(e.limitedNotifications,(function(t,i){return n("div",{key:"key-"+i,staticClass:"toaster",attrs:{"data-test-selector":"message"}},[n("div",{staticClass:"toaster-content",on:{click:function(n){return e.remove(t.id)}}},["text"!==t.type?n("span",{class:{"icon-wrap":!0,"color-danger":"error"===t.type,"color-warning":"warning"===t.type,"color-success":"success"===t.type,"color-info":"info"===t.type}},[n("i",{class:{"icon-ic_fluent_error_circle_24_regular":"error"===t.type,"icon-ic_fluent_warning_24_regular":"warning"===t.type,"icon-ic_fluent_checkmark_circle_24_regular":"success"===t.type,"icon-ic_fluent_info_12_regular":"info"===t.type}})]):e._e(),n("div",{domProps:{innerHTML:e._s(t.message)}})]),t.action_button?n("div",{staticClass:"toaster-buttons"},[n("a",{staticClass:"toaster-button",attrs:{href:"javascript:void(0)"},domProps:{textContent:e._s(t.close_button?t.close_button.name:e.t("common","Skip"))},on:{click:function(n){return e.remove(t.id)}}}),n("a",{staticClass:"toaster-button-primary",attrs:{href:"javascript:void(0)"},domProps:{textContent:e._s(t.action_button.name?t.action_button.name:e.t("common","View"))},on:{click:function(n){return e.runAction(t)}}})]):n("div",{staticClass:"toaster-buttons"},[n("a",{staticClass:"toaster-button-icon",attrs:{href:"javascript:void(0)"},on:{click:function(n){return e.remove(t.id)}}},[n("span",{staticClass:"icon-wrap"},[n("i",{staticClass:"icon-ic_fluent_dismiss_24_regular"})])])])])})),0)],1)}),[],!1,null,null,null).exports,Pr={name:"EmptyLayout",components:{XGlobalNotifications:Mr,XModalWrapper:_,XTooltip:Rr}};const Fr=(0,Lr.A)(Pr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"splynx-wrapper empty-page"},[e._t("default"),n("x-global-notifications"),n("x-modal-wrapper",{ref:"modalWrapper"}),n("tooltip",{staticClass:"vue-js-modal-tooltip",attrs:{width:230}}),n("x-tooltip",{staticClass:"vue-js-modal-tooltip x-tooltip-content",attrs:{name:"helpTooltip",width:230}})],2)}),[],!1,null,null,null).exports,Br={name:"XViewError",components:{EmptyLayout:Fr},props:{application:String,error:Object},data:()=>({isDev:!1}),created(){this.isLogin||window.switch_page_without_cache(`/${this.application}/login`),this.SET_PAGE_TITLE(this.error.title||this.error.error)},computed:{isLogin:()=>!!window.spl_config.spl_user_id,errorTitle(){return this.error.error||this.error.html?.error?this.error.error||this.error.html?.error:this.$t("site","Oops! This page could not be found.")},errorComment(){return this.error.comment||this.error.html?.comment?this.error.comment||this.error.html?.comment:this.$t("common","The page you are looking for might have been removed or is temporarily unavailable.")}},methods:{goToDashboard(){window.switch_page_without_cache(`/${this.application}/dashboard`)},...(0,a.PY)([b.Y4l])}};const Hr=(0,Lr.A)(Br,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("empty-layout",[e.isLogin?n("div",{staticClass:"not-found-404-error-page"},[n("div",{staticClass:"not-found-404-error-page-wrapper"},[n("div",{staticClass:"not-found-404-img-box"},[404===e.error.code?n("img",{attrs:{src:"/images/404.svg",alt:"404"}}):n("b",[e._v(e._s(e.error.code||e.error.html.code||500))])]),n("div",{staticClass:"error-details"},[n("div",{staticClass:"error-details-title"},[e._v(" "+e._s(e.errorTitle)+" ")]),n("div",{staticClass:"error-details-description"},[e._v(" "+e._s(e.errorComment)+" ")]),e.isDev?n("div",{staticClass:"error-details-dev"},[404===e.error.code?[n("div",[e._v("Route "),n("i",[e._v(e._s(e.$route.path))]),e._v(" not found.")]),e._v(" Maybe you forgot to add this route to the App. ")]:[e._v(" "+e._s(e.error.file)+":"+e._s(e.error.line)+" ")]],2):e._e()]),n("div",{staticClass:"not-found-404-btn"},[n("button",{staticClass:"btn btn-primary",on:{click:e.goToDashboard}},[e._v(" "+e._s(e.$t("site","Back to main dashboard"))+" ")])])])]):e._e()])}),[],!1,null,"5a25079e",null).exports,jr={name:"NotFoundView",components:{XViewError:Hr}};const Ur=(0,Lr.A)(jr,(function(){var e=this.$createElement;return(this._self._c||e)("x-view-error",{attrs:{application:"admin",error:{code:404}}})}),[],!1,null,null,null).exports;var Wr=i(66012);function Kr(e,t,n){for(let i of n)Object.prototype.hasOwnProperty.call(i,"meta")?i.meta={...i.meta,icon:e,color:t}:i.meta={icon:e,color:t},i.children&&i.children.length>0&&Kr(e,t,i.children)}function Gr(e){let t=[];for(const n of e)if(n.children&&0!==n.children.length){if(Object.prototype.hasOwnProperty.call(n,"meta")){Kr(n.meta.icon??!1,n.meta.color??!1,n.children)}t.push(n)}else t.push(n);return t}const Vr=()=>i.e(4625).then(i.bind(i,94625)),zr=[{path:"",name:"admin.tariffs.voice",component:()=>Promise.all([i.e(7564),i.e(248),i.e(7395)]).then(i.bind(i,87395)),meta:{breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/voice"},{title:["common","Voice"],url:"/admin/tariffs/voice"}],title:["tariffs","Tariffs"],keepAlive:!0,componentName:"VoicePlansList"}},{delimiter:"--",path:"add",name:"admin.tariffs.voice.add",component:Vr,meta:{edit:!1,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/voice"},{title:["common","Voice"],url:"/admin/tariffs/voice"},{title:["common","Add"],url:"/admin/tariffs/voice--add"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"edit",name:"admin.tariffs.voice.edit",component:Vr,meta:{edit:!0,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/voice"},{title:["common","Voice"],url:"/admin/tariffs/voice"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"change-tariff-on-services",name:"admin.tariffs.voice.change_tariff_on_services",component:Wr.A},{delimiter:"--",path:"table",name:"admin.tariffs.voice.table",component:Wr.A,meta:{title:["tariffs","Tariff plan table"]}}],qr=()=>i.e(1188).then(i.bind(i,81188)),Yr=[{path:"",name:"admin.tariffs.internet",component:()=>Promise.all([i.e(7564),i.e(248),i.e(9513)]).then(i.bind(i,29513)),meta:{breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/internet"},{title:["common","Internet"],url:"/admin/tariffs/internet"}],title:["tariffs","Tariffs"],keepAlive:!0,componentName:"InternetPlansList"}},{delimiter:"--",path:"add",name:"admin.tariffs.internet.add",component:qr,meta:{edit:!1,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/internet"},{title:["common","Internet"],url:"/admin/tariffs/internet"},{title:["common","Add"],url:"/admin/tariffs/internet--add"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"edit",name:"admin.tariffs.internet.edit",component:qr,meta:{edit:!0,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/internet"},{title:["common","Internet"],url:"/admin/tariffs/internet"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"change-tariff-on-services",name:"admin.tariffs.internet.change_tariff_on_services",component:Wr.A},{delimiter:"--",path:"table",name:"admin.tariffs.internet.table",component:Wr.A,meta:{title:["tariffs","Tariff plan table"]}}],Xr=()=>i.e(8683).then(i.bind(i,8683)),Qr=[{path:"",name:"admin.tariffs.recurring",component:()=>Promise.all([i.e(7564),i.e(248),i.e(395)]).then(i.bind(i,20395)),meta:{breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/recurring"},{title:["common","Recurring"],url:"/admin/tariffs/recurring"}],title:["tariffs","Tariffs"],keepAlive:!0,componentName:"RecurringPlansList"}},{delimiter:"--",path:"add",name:"admin.tariffs.recurring.add",component:Xr,meta:{edit:!1,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/voice"},{title:["common","Recurring"],url:"/admin/tariffs/recurring"},{title:["common","Add"],url:"/admin/tariffs/recurring--add"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"edit",name:"admin.tariffs.recurring.edit",component:Xr,meta:{edit:!0,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/recurring"},{title:["common","Recurring"],url:"/admin/tariffs/recurring"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"change-tariff-on-services",name:"admin.tariffs.recurring.change_tariff_on_services",component:Wr.A},{delimiter:"--",path:"table",name:"admin.tariffs.recurring.table",component:Wr.A,meta:{title:["tariffs","Tariff plan table"]}}];var Zr=i(48789),Jr=i(65470),el=i(13817),tl=i(89016),nl=i(79887),il=i(33027),ol=i(82950);const sl={name:"OneTimePlansForm",mixins:[il.A],props:{form:{type:String,default:"add"}},data:()=>({model:{additional_attributes:{}},loadingPartners:!1,taxOptions:{}}),mounted(){this.loadTaxes().then((()=>{this.taxOptions=this.getActiveTaxesWithCurrentTax(this.model.tax_id)}))},methods:{...(0,a.i0)("one_time_tariffs",["setOneTimePageTariffsForChange","loadEditPageInfo"]),...(0,a.i0)("taxes",["loadTaxes"]),getAttributeLabel(e){return(0,w.isset)(this.attributesMeta,[e,"label"])?this.attributesMeta[e].label:e},onFormSuccess(e){e.result?(show_success(e.message,4),"add"===this.form&&setTimeout((()=>{window.switch_page(`/admin/tariffs/one-time--edit?id=${e.options.id}`)}),1e3),"edit"===this.form&&e.options.need_refresh&&this.updateTransactionCategoryId()):window.showErrors(e.message,4)},onFormError(e){console.error("Form err",e)},getAdditionalAttributes(){let e={};for(let t in this.attributesMeta)e[t]=this.attributesMeta[t].default,null!==this.attributesMeta[t].rule&&("boolean"===this.attributesMeta[t].rule.type&&(e[t]=!!this.attributesMeta[t].default),"vat_percent"===t&&(e[t]=(0,w.taxFormat)(this.attributesMeta[t].default,!0)));e.additional_attributes={};for(let t in this.afAttributesMeta)e.additional_attributes[t]=this.afAttributesMeta[t].value;this.model=e},getPageData(e){this.loadingPartners||empty(e)||$.ajax({url:"/admin/tariffs--get-tariffs-by-partners",data:{partners:e,type:"one-time",excludeId:this.model.id,checkIsActive:"1"},success:e=>{this.setOneTimePageTariffsForChange(e)},complete:()=>{this.loadingPartners=!1}})},backToList(){window.switch_page("/admin/tariffs/one-time")}},created(){this.getAdditionalAttributes(),this.getPageData()},computed:{...(0,a.L8)("one_time_tariffs",["storeModel","className","attributesMeta","afAttributesMeta","transactionsCategories","isSetTransactionCategory","customerLabels","customerCategories"]),...(0,a.L8)("partners",["partners"]),...(0,a.L8)("taxes",["getActiveTaxesWithCurrentTax"]),formUrl(){let e="/admin/tariffs/one-time--save";return"edit"===this.form?`${e}?id=${this.$route.query.id}`:e},afsForAdding(){let e={};for(let t in this.afAttributesMeta){let n=this.afAttributesMeta[t];"add"===this.type&&!n.is_add||n.hidden||(e[t]=n)}return e},availableForServicesLabel(){return{active:this.$t("tariffs","Active"),disabled:this.$t("tariffs","Archived")}}},components:{AvailabilityForOrderingBlock:ol.A,XAdditionalFieldInput:tl.i,XComplexInput:el.D,XForm:nl.z}};const al=(0,Lr.A)(sl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-form",{ref:"form",staticClass:"form-horizontal",attrs:{id:"admin_tariffs_one_time_form_"+e.form,url:e.formUrl,method:"POST",data:e.model,"class-name":e.className,"attributes-meta":e.attributesMeta,"af-attributes-meta":e.afAttributesMeta},on:{success:e.onFormSuccess,error:e.onFormError}},[n("div",{staticClass:"card-block"},[n("div",{staticClass:"card-block-header"},[n("h4",{domProps:{textContent:e._s(e.$t("tariffs","General settings"))}})]),n("div",{staticClass:"card-block-body"},[n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("title"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{type:"text",params:{options:{name:"OneTimeTariffs[title]"}},meta:e.attributesMeta.title},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("service_description"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{type:"text",params:{options:{name:"OneTimeTariffs[service_description]"}},meta:e.attributesMeta.service_description},model:{value:e.model.service_description,callback:function(t){e.$set(e.model,"service_description",t)},expression:"model.service_description"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("enabled"))+" ")]),n("div",{staticClass:"col-md-8 d-flex"},[n("x-complex-input",{attrs:{type:"checkbox",params:{label:e.availableForServicesLabel,options:{class:"availible-for-services",name:"OneTimeTariffs[enabled]"}},meta:e.attributesMeta.available_for_services},model:{value:e.model.enabled,callback:function(t){e.$set(e.model,"enabled",t)},expression:"model.enabled"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("price"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{type:"number",params:{allowEmpty:!0,numberType:"decimal",options:{name:"OneTimeTariffs[price]"}},meta:e.attributesMeta.price},model:{value:e.model.price,callback:function(t){e.$set(e.model,"price",t)},expression:"model.price"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("partners_ids"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{type:"multiple-select",params:{options:{options:e.partners,name:"OneTimeTariffs[partners_ids]",required:!0}},meta:e.attributesMeta.partners_ids},model:{value:e.model.partners_ids,callback:function(t){e.$set(e.model,"partners_ids",t)},expression:"model.partners_ids"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("with_vat"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{type:"checkbox",params:{options:{name:"OneTimeTariffs[with_vat]"}},meta:e.attributesMeta.with_vat},model:{value:e.model.with_vat,callback:function(t){e.$set(e.model,"with_vat",t)},expression:"model.with_vat"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("tax_id"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{type:"select",name:"taxId",params:{options:{options:e.taxOptions,name:"OneTimeTariffs[tax_id]"},templateSelection:!0,templateResult:!0},meta:e.attributesMeta.tax_id},model:{value:e.model.tax_id,callback:function(t){e.$set(e.model,"tax_id",t)},expression:"model.tax_id"}}),n("small",{staticClass:"text-secondary"},[e._v(" "+e._s(e.$t("common","If a location-based tax is applied, it will take preference and be used by default in the customer's financial documents."))+" ")])],1)]),e.isSetTransactionCategory?n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(e.getAttributeLabel("transaction_category_id"))+" ")]),n("div",{staticClass:"col-md-8"},[n("x-complex-input",{attrs:{type:"select",params:{options:{options:e.transactionsCategories,name:"OneTimeTariffs[transaction_category_id]"},sortCallback:e.sortTransactionCategories},meta:e.attributesMeta.transaction_category_id},model:{value:e.model.transaction_category_id,callback:function(t){e.$set(e.model,"transaction_category_id",t)},expression:"model.transaction_category_id"}})],1)]):e._e(),e._l(e.afsForAdding,(function(t,i){return n("div",{key:i,staticClass:"row"},[n("label",{staticClass:"col-md-4 col-form-label"},[e._v(" "+e._s(t.title)+" ")]),n("div",{staticClass:"col-md-8"},[n("x-additional-field-input",{attrs:{type:t.type,search:!1,params:t},model:{value:e.model.additional_attributes[i],callback:function(t){e.$set(e.model.additional_attributes,i,t)},expression:"model.additional_attributes[name]"}})],1)])}))],2)]),n("availability-for-ordering-block",{attrs:{"attributes-meta":e.attributesMeta,"customer-categories":e.customerCategories,"customer-labels":e.customerLabels,"class-name":"OneTimeTariffs"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("button",{staticClass:"btn btn-primary pull-right",attrs:{id:"admin_tariff_one_time_button"+("add"===e.form?"_add":"_edit"),type:"submit"},on:{click:function(t){return t.preventDefault(),e.$refs.form.submit()}}},[e._v(" "+e._s(e.$t("tariffs","Save"))+" ")]),n("a",{staticClass:"btn btn-cancel pull-right",on:{click:e.backToList}},[e._v(e._s(e.$t("tariffs","Back to list")))])])])],1)}),[],!1,null,null,null).exports;const rl={name:"OneTimePlansAddEdit",mixins:[i(94064).A],data:()=>({loading:!0}),created(){Promise.all([this.loadPageInfo(),this.loadPartners(),this.loadLocations()]).finally((()=>{this.loading=!1}))},methods:{...(0,a.i0)("one_time_tariffs",["loadAddPageInfo","loadEditPageInfo"])},computed:{...(0,a.L8)("one_time_tariffs",["model"])},components:{OneTimePlansForm:al,XBreadcrumbs:Zr.n,XPreloaderBlock:Jr.e}};const ll=(0,Lr.A)(rl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content clearfix active"},[n("x-preloader-block",{attrs:{loading:e.loading}},[n("div",{staticClass:"splynx-top-nav"},[n("x-breadcrumbs",{attrs:{items:e.breadcrumbs}})],1),n("div",{staticClass:"spl-page-panel"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-9"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("one-time-plans-form",{ref:"form",attrs:{form:e.type}})],1)])])])])])],1)}),[],!1,null,null,null).exports,cl=[{path:"",name:"admin.tariffs.one_time",component:()=>Promise.all([i.e(7564),i.e(248),i.e(3288)]).then(i.bind(i,13288)),meta:{breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/one-time"},{title:["common","One-Time"],url:"/admin/tariffs/one-time"}],title:["tariffs","Tariffs"],keepAlive:!0,componentName:"OneTimePlansList"}},{delimiter:"--",path:"add",name:"admin.tariffs.one_time.add",component:ll,meta:{edit:!1,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/one-time"},{title:["common","One-Time"],url:"/admin/tariffs/one-time"},{title:["common","Add"],url:"/admin/tariffs/one-time--add"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"edit",name:"admin.tariffs.one_time.edit",component:ll,meta:{edit:!0,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/one-time"},{title:["common","One-Time"],url:"/admin/tariffs/one-time"}],title:["tariffs","Tariffs"]}},{delimiter:"--",path:"table",name:"admin.tariffs.one_time.table",component:Wr.A,meta:{title:["tariffs","Tariff plan table"]}}],dl=()=>i.e(8693).then(i.bind(i,48693)),ul=[{path:"",name:"admin.tariffs.bundles",component:()=>Promise.all([i.e(7564),i.e(248),i.e(6959)]).then(i.bind(i,16959)),meta:{breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/bundles"},{title:["common","Bundles"],url:"/admin/tariffs/bundles"}],title:["tariffs","Bundles"],keepAlive:!0,componentName:"BundlePlansList"}},{delimiter:"--",path:"add",name:"admin.tariffs.bundles.add",component:dl,meta:{edit:!1,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/bundles"},{title:["common","Bundles"],url:"/admin/tariffs/bundles"},{title:["common","Add"]}],title:["tariffs","Bundles"],componentName:"BundleTariffPage"}},{delimiter:"--",path:"edit",name:"admin.tariffs.bundles.edit",component:dl,meta:{edit:!0,breadcrumbs:[{title:["common","Tariffs plans"],url:"/admin/tariffs/bundles"},{title:["common","Bundles"],url:"/admin/tariffs/bundles"}],title:["tariffs","Bundles"],componentName:"BundleTariffPage"}}],pl=[{path:"internet",children:Yr},{path:"fup",children:[{path:"",name:"admin.tariffs.fup",component:Wr.A},{delimiter:"--",path:"preview",name:"admin.tariffs.fup.preview",component:Wr.A,meta:{title:["voice","FUP Preview and Test"]}}]},{path:"voice",children:zr},{path:"pricing",children:[{path:"",name:"admin.tariffs.pricing",component:Wr.A},{path:"groups",name:"admin.tariffs.pricing.groups",component:Wr.A,meta:{title:["tariffs","Groups"]}},{path:"preview",name:"admin.tariffs.pricing.preview",component:Wr.A,meta:{title:["tariffs","Preview"]}}]},{path:"recurring",children:Qr},{path:"one-time",children:cl},{path:"bundles",children:ul}];var hl=i(68673),fl=i(85953);const ml={name:"XAddonVueCode",props:{module:String,point:[String,Number],params:{type:Object,default:()=>({})},pointParams:{type:Object,default:()=>({})},isPage:{type:Boolean,default:!1}},data:()=>({processing:!0,loaded:!1,url:"",pointData:{}}),mounted(){(0,w.promisifiedAjax)({url:"/admin/config/add-on--get-entry-point-data",data:{module:this.module,point:this.point,...this.pointParams}}).then((e=>{let{uri:t,point:n}=e;if(this.pointData=n,this.url=t,this.isPage){if(!new URL(`${window.location.origin}/${t}`).searchParams.get("is_vue"))return this.$emit("no-vue-point"),!1}this.$nextTick((()=>{this.loaded=!0}))})).catch((e=>{this.$showError(e),this.url=""}))},methods:{onDataFromAddon(e){e.action&&this.$emit(e.action,e.data)}},computed:{downData(){return{params:this.params,pointParams:this.pointParams,pointData:this.pointData}}},components:{XBootstrapSpinner:fl.default,XAddonVueComponent:hl.A}};const gl=(0,Lr.A)(ml,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded?n("x-addon-vue-component",{attrs:{url:e.url,"internal-preloader":!0,"down-data":e.downData,"is-page":e.isPage},on:{"up-data":e.onDataFromAddon,processing:function(t){e.processing=t}}},[e.processing?e._t("preloader",(function(){return[n("div",{staticClass:"h-100 d-flex w-100 justify-content-center align-items-center"},[n("x-bootstrap-spinner",{attrs:{size:"lg"}})],1)]})):e._e()],2):e._e()}),[],!1,null,null,null).exports;var vl=i(84781);const bl={name:"XAddonPage",data:()=>({isTwigEntryPoint:!1}),components:{XPreloaderBlock:vl.default,XTwigPage:Wr.T,XAddonVueCode:gl}};const yl=(0,Lr.A)(bl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isTwigEntryPoint?n("x-twig-page"):n("x-addon-vue-code",{attrs:{"allow-no-vue-point":!0,module:e.$route.query.module,point:e.$route.query.point,"point-params":{module:e.$route.query.module,point:e.$route.query.point},"is-page":!0},on:{"no-vue-point":function(t){e.isTwigEntryPoint=!0}},scopedSlots:e._u([{key:"preloader",fn:function(){return[n("x-preloader-block",{attrs:{loading:!0}})]},proxy:!0}])})}),[],!1,null,null,null).exports,wl=[{delimiter:"--",path:"settings",name:"admin.config.main.settings",component:Wr.A},{path:"localization",name:"admin.config.main.localization",component:Wr.A},{path:"api",name:"admin.config.main.api",component:Wr.A},{path:"maps",name:"admin.config.main.maps",component:Wr.A},{path:"cap",name:"admin.config.main.cap",component:()=>Promise.all([i.e(9970),i.e(6238)]).then(i.bind(i,36238)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Main"],url:"/admin/config#main"},{title:["config","CAP"],url:"/admin/config/main/cap"}],title:["config","CAP settings"]}},{path:"mail",name:"admin.config.main.mail",component:Wr.A},{path:"portal",name:"admin.config.main.portal",component:()=>i.e(191).then(i.bind(i,90191)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Main"],url:"/admin/config#main"},{title:["config","Portal"],url:"/admin/config/main/portal"}],title:["config","Portal settings"]}},{path:"customization",name:"admin.config.main.customization",component:()=>Promise.all([i.e(4785),i.e(3183)]).then(i.bind(i,13183)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Main"],url:"/admin/config#main"},{title:["config","Site customization"],url:"/admin/config/main/customization"}],title:["config","Site customization"]}}],_l=[{delimiter:"--",path:"settings",name:"admin.config.crm.settings",component:Wr.A},{path:"finance",name:"admin.config.crm.finance",component:Wr.A},{path:"sign-up",name:"admin.config.crm.sign_up",component:Wr.A},{path:"leads",name:"admin.config.crm.leads",component:Wr.A},{path:"convert-status",name:"admin.config.crm.convert_status",component:Wr.A},{path:"leads-pipeline",name:"admin.config.crm.leads_pipeline",component:Wr.A}],Tl=[{path:"workflow",name:"admin.config.scheduling.workflow",component:()=>i.e(5679).then(i.bind(i,5679)),meta:{keepAlive:!0,componentName:"WorkflowsList"}},{path:"team",name:"admin.config.scheduling.team",component:()=>i.e(1346).then(i.bind(i,31346)),meta:{keepAlive:!0,componentName:"SchedulingTeamsList"}},{path:"task-template",name:"admin.config.scheduling.task_template",component:()=>i.e(5235).then(i.bind(i,85235)),meta:{keepAlive:!0,componentName:"TaskTemplates"}},{path:"checklist-template",name:"admin.config.scheduling.checklist_template",component:()=>i.e(7128).then(i.bind(i,97128)),meta:{keepAlive:!0,componentName:"ChecklistTemplatesList"}},{path:"project-type",name:"admin.config.scheduling.project_type",component:()=>i.e(5315).then(i.bind(i,85315)),meta:{keepAlive:!0,componentName:"ProjectTypesList"}},{path:"project-category",name:"admin.config.scheduling.project_category",component:()=>i.e(5264).then(i.bind(i,75264)),meta:{keepAlive:!0,componentName:"ProjectCategories"}},{path:"notifications",name:"admin.config.scheduling.notifications",component:Wr.A}],El=[{path:"stocks",name:"admin.config.inventory.stocks",component:()=>i.e(5895).then(i.bind(i,15895)),meta:{keepAlive:!0,componentName:"InventoryStocksList"}},{path:"notifications",name:"admin.config.inventory.notifications",component:Wr.A},{path:"categories",name:"admin.config.inventory.categories",component:()=>i.e(4832).then(i.bind(i,94832)),meta:{keepAlive:!0,componentName:"InventoryCategoriesList"}}],Sl=[{delimiter:"--",path:"settings",name:"admin.config.finance.main_settings",component:Wr.A},{path:"settings",name:"admin.config.finance.settings",component:()=>Promise.all([i.e(9970),i.e(8445)]).then(i.bind(i,38445)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Finance"],url:"/admin/config#finance"},{title:["config","Settings"],url:"/admin/config/finance/settings"}],title:["config","Settings"],componentName:"ConfigFinanceSettings"}},{path:"pairing",name:"admin.config.finance.pairing",component:Wr.A},{path:"notifications",name:"admin.config.finance.notifications",component:Wr.A},{path:"change-plan",name:"admin.config.finance.change_plan",component:Wr.A},{path:"payment-methods",name:"admin.config.finance.payment_methods",component:()=>i.e(4598).then(i.bind(i,14598)),meta:{keepAlive:!0,componentName:"PaymentMethodsList"}},{path:"transaction-categories",name:"admin.config.finance.transaction_categories",component:()=>i.e(5526).then(i.bind(i,45526)),meta:{keepAlive:!0,componentName:"TransactionCategoriesList"}},{path:"reminders",name:"admin.config.finance.reminders",component:()=>i.e(9492).then(i.bind(i,79492)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Finance"],url:"/admin/config#finance"},{title:["config","Reminders"],url:"/admin/config/reminders"}],title:["config","Reminders"],componentName:"Reminders"}},{path:"payment-accounts",name:"admin.config.finance.payment_accounts",component:()=>i.e(4830).then(i.bind(i,74830)),meta:{keepAlive:!0,componentName:"PaymentAccountsList"}},{path:"cost-categories",name:"admin.config.finance.cost_categories",component:()=>i.e(6437).then(i.bind(i,16437)),meta:{keepAlive:!0,componentName:"CostCategoriesList"}},{path:"fixed-costs",name:"admin.config.finance.fixed_costs",component:()=>i.e(4623).then(i.bind(i,84623)),meta:{keepAlive:!0,componentName:"FixedCostsList"}},{path:"accounting-categories",name:"admin.config.finance.accounting_categories",component:Wr.A},{path:"accounting-bank-accounts",name:"admin.config.finance.accounting_bank_accounts",component:Wr.A},{path:"accounting-tax-rates",name:"admin.config.finance.accounting_tax_rates",component:Wr.A},{path:"e-invoicing-tax-rates",name:"admin.config.finance.e_invoicing_tax_rates",component:Wr.A},{path:"e-invoicing-categories",name:"admin.config.finance.e_invoicing_categories",component:Wr.A},{path:"e-invoicing-payment-methods",name:"admin.config.finance.e_invoicing_payment_methods",component:Wr.A},{path:"taxes",name:"admin.config.finance.taxes",component:()=>Promise.all([i.e(7564),i.e(248),i.e(3592)]).then(i.bind(i,3592)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Finance"],url:"/admin/config#finance"},{title:["config","Taxes"],url:"/admin/config/finance/taxes"}],keepAlive:!0,componentName:"TaxesList",title:["config","Taxes"]}}],Al=[{delimiter:"--",path:"settings",name:"admin.config.support.settings",component:Wr.A},{path:"ticket-templates",name:"admin.config.support.ticket_templates",component:()=>i.e(2152).then(i.bind(i,52152)),meta:{keepAlive:!0,componentName:"TicketTemplates",breadcrumbs:[{title:["common","Config"],url:"/admin/config"},{title:["common","Helpdesk"],url:"/admin/config#support"},{title:["common","Ticket notifications"],url:"/admin/config/support/ticket-templates"}]}},{path:"ticket-templates--edit-template",name:"admin.config.support.ticket_templates.edit",component:()=>i.e(4494).then(i.bind(i,64494)),meta:{keepAlive:!0,componentName:"EditTicketTemplate",breadcrumbs:[{title:["common","Config"],url:"/admin/config"},{title:["common","Helpdesk"],url:"/admin/config#support"},{title:["common","Ticket notifications"],url:"/admin/config/support/ticket-templates"},{title:["common","Edit template"],url:"/admin/config/support/ticket-templates"}]}},{path:"ticket-canned-responses",name:"admin.config.support.ticket_canned_responses",component:()=>i.e(9496).then(i.bind(i,69496)),meta:{keepAlive:!0,componentName:"CannedResponsesList"}},{path:"ticket-things",name:"admin.config.support.ticket_things",component:()=>i.e(8138).then(i.bind(i,38138)),meta:{keepAlive:!0,componentName:"TicketThingsConfig"}},{path:"feedback",name:"admin.config.support.feedback",component:Wr.A},{path:"incoming-mail",name:"admin.config.support.incoming_mail",component:Wr.A},{path:"incoming-mail--add-mailbox",name:"admin.config.support.incoming_mail.add_mailbox",component:()=>Promise.all([i.e(9888),i.e(4419)]).then(i.bind(i,54419)),meta:{keepAlive:!0,componentName:"AddMailBoxPage",breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Helpdesk"],url:"/admin/config#support"},{title:["config","Inboxes"],url:"/admin/config/support/incoming-mail"},{title:["config","Add incoming mailbox"],url:"/admin/config/support/incoming-mail"}],title:["config","Add incoming mailbox"]}},{path:"incoming-mail--edit-mailbox",name:"admin.config.support.incoming_mail.edit_mailbox",component:()=>Promise.all([i.e(9888),i.e(9439)]).then(i.bind(i,39439)),meta:{keepAlive:!0,componentName:"EditMailBoxPage",breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Helpdesk"],url:"/admin/config#support"},{title:["config","Inboxes"],url:"/admin/config/support/incoming-mail"}],title:["config","Edit incoming mailbox"]}},{path:"ticket-automation",name:"admin.config.support.ticket_automation",component:()=>i.e(1266).then(i.bind(i,61266)),meta:{keepAlive:!0,componentName:"TicketAutomationList"}},{path:"chat-box",name:"admin.config.support.chat_box",component:()=>i.e(4115).then(i.bind(i,44115)),meta:{keepAlive:!0,componentName:"ChatBoxConfig",title:["config","Chatbox"],breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Helpdesk"],url:"/admin/config#support"},{title:["config","Chatbox"],url:"/admin/config/support/chat-box"}]}}],Cl=[{path:"",name:"admin.config.networking.acs",component:Wr.A},{delimiter:"--",path:"provision-flow",name:"admin.config.networking.acs.provision-flow",component:()=>Promise.all([i.e(397),i.e(2424)]).then(i.bind(i,62424)),meta:{breadcrumbs:[{title:["config","Provision flow"],url:"/admin/config/networking/acs--provision-flow"}]}}],kl=[{delimiter:"--",path:"settings",name:"admin.config.networking.settings",component:Wr.A},{path:"radius",name:"admin.config.networking.radius",component:Wr.A},{path:"fup",name:"admin.config.networking.fup",component:Wr.A},{path:"nas-types",name:"admin.config.networking.nas_types",component:()=>i.e(7387).then(i.bind(i,67387)),meta:{keepAlive:!0,componentName:"NasTypesList"}},{path:"radius-failover",name:"admin.config.networking.radius_failover",component:()=>i.e(1215).then(i.bind(i,31215)),meta:{keepAlive:!0,componentName:"RadiusFailover"}},{path:"ip-network-categories",name:"admin.config.networking.ip_network_categories",component:()=>i.e(1895).then(i.bind(i,71895)),meta:{keepAlive:!0,componentName:"IpNetworkCategoriesList"}},{path:"ip-host-categories",name:"admin.config.networking.ip_host_categories",component:()=>i.e(4003).then(i.bind(i,64003)),meta:{keepAlive:!0,componentName:"IpHostCategories"}},{path:"monitoring",name:"admin.config.networking.monitoring",component:()=>i.e(1454).then(i.bind(i,41454)),meta:{keepAlive:!0,componentName:"MonitoringList"}},{path:"network-sites",name:"admin.config.networking.network_sites",component:()=>i.e(6284).then(i.bind(i,86284)),meta:{keepAlive:!0,componentName:"NetworkSites",breadcrumbs:[{title:["config","Config"],url:"/admin/config/"},{title:["config","Networking"],url:"/admin/config#networking"},{title:["config","Network Sites"],url:"#"}],title:["config","Network Sites"]}},{path:"acs",name:"admin.config.networking.acs",children:Cl,meta:{breadcrumbs:[{title:["config","ACS"],url:"/admin/config/networking/acs"}]}},{path:"traffic-class",name:"admin.config.networking.traffic_class",component:()=>i.e(9792).then(i.bind(i,39792)),meta:{keepAlive:!0,componentName:"TrafficClassList"}},{path:"multiple-psk",name:"admin.config.networking.multilpe_psk",component:()=>i.e(4910).then(i.bind(i,74910)),meta:{keepAlive:!1,componentName:"MultiplePSK",breadcrumbs:[{title:["config","Config"],url:"/admin/config/"},{title:["config","Networking"],url:"/admin/config#networking"},{title:["config","Multiple PSK"],url:"#"}],title:["config","Multiple PSK"]}},{path:"dns-blocking",name:"admin.config.networking.dns_blocking",component:()=>Promise.all([i.e(9970),i.e(1894)]).then(i.bind(i,89513)),meta:{keepAlive:!0,componentName:"DNSBlocking",breadcrumbs:[{title:["config","Config"],url:"/admin/config/"},{title:["config","Networking"],url:"/admin/config#networking"},{title:["config","DNS Blocking"],url:"#"}],title:["config","DNS Blocking"]}}],xl=[{path:"auto-cdr-processing",name:"admin.config.voice.auto_cdr_processing",component:()=>i.e(1987).then(i.bind(i,91987)),meta:{keepAlive:!0,componentName:"AutoCdrProcessingList"}},{path:"import-data-source",name:"admin.config.voice.import-data-source",component:()=>i.e(5383).then(i.bind(i,65383)),meta:{keepAlive:!0,componentName:"ImportDataSource"}}],$l={name:"AddOnsList",extends:Wr.T};const Il=(0,Lr.A)($l,undefined,undefined,!1,null,null,null).exports,Ol={name:"ModulesList",extends:Wr.T,activated(){$("#admin_config_modules_list_table").DataTable().ajax.reload()}};const Ll=(0,Lr.A)(Ol,undefined,undefined,!1,null,null,null).exports,Rl=[{path:"main",name:"admin.config.modules.main",component:Wr.A},{path:"add-ons",name:"admin.config.modules.add_ons",component:Il,meta:{keepAlive:!0,componentName:"AddOnsList"}},{path:"install",name:"admin.config.modules.install",component:()=>Promise.all([i.e(7616),i.e(3154)]).then(i.bind(i,76577)),meta:{breadcrumbs:[{title:["config","Install module"],url:"/admin/config/modules/list"}],title:["config","Install module"]}},{path:"list",name:"admin.config.modules.list",component:Ll,meta:{breadcrumbs:[{title:["common","Modules list"],url:"/admin/config/modules/list"}],keepAlive:!0,componentName:"ModulesList"}},{path:"list--edit",name:"admin.config.modules.edit_config",component:()=>Promise.all([i.e(9970),i.e(4500)]).then(i.bind(i,4500)),meta:{breadcrumbs:[{title:["common","Modules list"],url:"/admin/config/modules/list"}]}},{path:"list--edit-entry-points",name:"admin.config.modules.entry_points",component:()=>Promise.all([i.e(7616),i.e(7773)]).then(i.bind(i,97296)),meta:{breadcrumbs:[{title:["common","Modules list"],url:"/admin/config/modules/list"}],title:["config","Points list"]}}];class Nl{static async getPageData(){return(0,w.promisifiedAjax)({url:Nl.GET_PAGE_DATA,method:"GET"})}static async reloadEngine(){return(0,w.promisifiedAjax)({url:Nl.RELOAD,method:"POST",data:{}})}static async resetEngine(){return(0,w.promisifiedAjax)({url:Nl.RESET,method:"POST",data:{}})}}Nl.GET_PAGE_DATA="/admin/config/tools/reload-search-engine--get-page-data",Nl.RELOAD="/admin/config/tools/reload-search-engine--reload",Nl.RESET="/admin/config/tools/reload-search-engine--reset";const Dl="disable-reset-button-end-time",Ml={name:"ReloadSearchEngine",data:()=>({loading:!0,isRunning:!1,log:"",loadInterval:null,disabledResetButton:!1}),mounted(){this.loadData(),this.checkDisableResetButton()},methods:{async loadData(){const e=(0,w.formattedResponse)(await Nl.getPageData());this.setData(e),this.loading=!1},async reload(){const{result:e,message:t}=(0,w.formattedResponse)(await Nl.reloadEngine());this.isRunning=e,this.setLoadInterval(),t&&(e?this.$showSuccess(t,4):this.$showWarning(t,4))},async reset(){const{result:e,message:t}=(0,w.formattedResponse)(await Nl.resetEngine());e&&this.setLoadInterval(),t&&(e?this.$showSuccess(t,4):this.$showWarning(t,4)),this.addDisableResetButtonTimer()},setData(e){let{isRunning:t,log:n}=e;this.isRunning=t,this.log=n,t?this.setLoadInterval():clearInterval(this.loadInterval)},async showProcessToggle(){await this.reload()},scrollToBottom(){const e=this.$refs.logContainer;e.scrollTo({top:e.scrollHeight})},setLoadInterval(){clearInterval(this.loadInterval),this.loadInterval=setInterval(this.loadData,1e4)},addDisableResetButtonTimer(){const e=Date.now()+6e4;localStorage.setItem(Dl,e.toString()),this.disabledResetButton=!0,this.startDisableResetButtonTimer()},startDisableResetButtonTimer(){const e=setInterval((()=>{const t=parseInt(localStorage.getItem(Dl)||"0",10);Date.now()>=t&&(clearInterval(e),localStorage.removeItem(Dl),this.disabledResetButton=!1)}),1e3)},checkDisableResetButton(){const e=parseInt(localStorage.getItem(Dl)||"0",10);Date.now()<e&&(this.disabledResetButton=!0,this.startDisableResetButtonTimer())}},computed:{showProcess(){return this.isRunning}},watch:{log(){this.$nextTick((()=>{this.scrollToBottom()}))}},components:{XPreloaderBlock:Jr.e,XBreadcrumbs:Zr.n}};const Pl=(0,Lr.A)(Ml,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content clearfix active"},[n("div",{staticClass:"splynx-top-nav"},[n("x-breadcrumbs",{attrs:{items:e.$route.meta.breadcrumbs}})],1),n("x-preloader-block",{attrs:{loading:e.loading}},[n("div",{staticClass:"spl-page-panel splynx-config-panel"},[n("div",{staticClass:"main-data-table-holder pt-40",attrs:{id:"admin_config_tools_reload_search_engine"}},[n("div",{staticClass:"text-center"},[n("p",{staticClass:"color-secondary mb-12",attrs:{"data-test-selector":"reload-description"}},[n("x-translate",{attrs:{tag:"false",category:"config",message:"Click this button to reload the search engine if the search is {br} not functioning properly."},scopedSlots:e._u([{key:"br",fn:function(){return[n("br")]},proxy:!0}])})],1),n("div",{staticClass:"mb-24"},[n("button",{staticClass:"btn btn-outline-primary me-24",attrs:{"data-test-selector":"reset-button",disabled:!e.showProcess||e.disabledResetButton},on:{click:e.reset}},[e._v(" "+e._s(e.$t("config","Reset"))+" ")]),n("button",{staticClass:"btn btn-primary",attrs:{"data-test-selector":"reload-button",disabled:e.showProcess},on:{click:e.showProcessToggle}},[e._v(" "+e._s(e.$t("config","Reload search"))+" ")])])]),n("div",{staticClass:"card-block mx-16",attrs:{"data-test-selector":"reload-process"}},[n("div",{staticClass:"card-block-heading"},[n("h3",[e._v(e._s(e.$t("config","Reload process"))+" ")])]),n("div",{staticClass:"card-block-body"},[n("div",{staticClass:"form-horizontal"},[n("pre",{ref:"logContainer",staticClass:"pre-scrollable full-height",attrs:{id:"admin_config_tools_reload_search_engine_log","data-test-selector":"reload-process-log"},domProps:{innerHTML:e._s(e.log)}})])])])])])])],1)}),[],!1,null,null,null).exports;var Fl=i(71971),Bl=i(91939);const Hl={name:"TaxUpdateForm",data:()=>({interval:null,isRunning:!1,log:"",className:"",attributesMeta:{oldTaxId:{},newTaxId:{},targetDate:{},roundingMode:{},vatPayer:{}},model:{oldTaxId:0,newTaxId:0,targetDate:moment().add(1,"month").startOf("month").format("YYYY-MM-DD"),roundingMode:"nearest",vatPayer:0},availableTaxes:{},roundingModes:{},taxesRates:{},payers:{},loading:!0}),mounted(){Bl.A.getPageData().then((e=>{this.attributesMeta=e.attributes_meta.attributes,this.className=e.attributes_meta.className,this.isRunning=e.is_running,e.is_running&&this.runBackgroundUpdate(),this.log=e.log,this.availableTaxes=e.available_taxes,this.taxesRates=e.taxes_rates,this.roundingModes=e.rounding_modes,this.payers=e.payers,this.$nextTick((()=>{this.loading=!1}))}))},methods:{update(){Bl.A.getLog().then((e=>{this.log=e.log,setTimeout((()=>{this.$refs.log.scrollTo({top:this.$refs.log.scrollHeight,behavior:"smooth"})})),this.isRunning=e.is_running,e.is_running||clearInterval(this.interval)}))},runBackgroundUpdate(){this.interval=setInterval(this.update,5e3)},tryUpdate(){showModal("tax-update-confirm",{data:this.model,newTaxRate:this.newTaxRate,oldTaxRate:this.oldTaxRate,className:this.className,onSubmit:()=>{this.isRunning=!0,this.resetFormValues(),this.update(),this.runBackgroundUpdate()}})},resetFormValues(){this.model.vatPayer=0,this.model.oldTaxId=0,this.model.newTaxId=0,this.model.targetDate=moment().add(1,"month").startOf("month").format("YYYY-MM-DD"),this.model.roundingMode="nearest"}},computed:{oldTaxRate(){return Number(this.taxesRates[this.model.oldTaxId])},newTaxRate(){return Number(this.taxesRates[this.model.newTaxId])},buttonActive(){return!this.isRunning&&!this.newOldRateError&&0!=this.model.oldTaxId&&0!=this.model.newTaxId&&""!==this.model.targetDate&&0!=this.model.vatPayer},downloadLogUrl:()=>Bl.A.getDownloadLogUrl(),downloadPendingServicesLogUrl:()=>Bl.A.getDownloadPendingServicesLogUrl(),newOldRateError(){return this.model.newTaxId===this.model.oldTaxId&&0!=this.model.newTaxId&&0!=this.model.oldTaxId},oldTaxSmall(){return this.$t("config","This is the tax rate that will be replaced in tariff plans and on the company info page. Tax values different from this one will not be affected.")}},components:{XPreloaderBlock:vl.default,XComplexInput:el.D,XForm:nl.z}};const jl={name:"TaxUpdate",components:{TaxUpdateForm:(0,Lr.A)(Hl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("x-preloader-block",{attrs:{loading:e.loading}},[n("x-form",{attrs:{id:"admin_config_tools_tax_update_form",method:"POST",data:e.model,"attributes-meta":e.attributesMeta}},[n("div",{staticClass:"card-block",attrs:{id:"admin_config_tools_tax_update"}},[n("div",{staticClass:"card-block-header"},[n("strong",[e._v(e._s(e.$t("config","Tax update")))])]),n("div",{staticClass:"card-block-body"},[n("div",{staticClass:"form-horizontal"},[n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label col-lg-4 col-md-4"},[e._v(e._s(e.attributesMeta.oldTaxId.label))]),n("div",{staticClass:"col-lg-8 col-md-8"},[n("x-complex-input",{attrs:{type:"select",params:{options:{options:e.availableTaxes}}},model:{value:e.model.oldTaxId,callback:function(t){e.$set(e.model,"oldTaxId",t)},expression:"model.oldTaxId"}}),n("small",{domProps:{textContent:e._s(e.oldTaxSmall)}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label col-lg-4 col-md-4"},[e._v(e._s(e.attributesMeta.newTaxId.label))]),n("div",{staticClass:"col-lg-8 col-md-8"},[n("x-complex-input",{attrs:{type:"select",params:{options:{options:e.availableTaxes}}},model:{value:e.model.newTaxId,callback:function(t){e.$set(e.model,"newTaxId",t)},expression:"model.newTaxId"}}),n("small",[e._v(e._s(e.$t("config","This is the new tax rate that will replace the old one in tariff plans and on the company info page. Сonfig new Tax")))]),e.newOldRateError?n("div",{staticClass:"alert alert-danger mt-8"},[e._v(" "+e._s(e.$t("config","Old and new tax rates must be different."))+" ")]):e._e()],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label col-lg-4 col-md-4"},[e._v(e._s(e.attributesMeta.targetDate.label))]),n("div",{staticClass:"col-lg-8 col-md-8"},[n("x-complex-input",{attrs:{params:{datePickerConfig:{minDate:new Date}},type:"date"},model:{value:e.model.targetDate,callback:function(t){e.$set(e.model,"targetDate",t)},expression:"model.targetDate"}}),n("small",[e._v(e._s(e.$t("config","Date when the new tax rate will take effect and apply to all relevant services and invoices.")))])],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label col-lg-4 col-md-4"},[e._v(e._s(e.attributesMeta.roundingMode.label))]),n("div",{staticClass:"col-lg-8 col-md-8"},[n("x-complex-input",{attrs:{type:"select",params:{options:{options:e.roundingModes}}},model:{value:e.model.roundingMode,callback:function(t){e.$set(e.model,"roundingMode",t)},expression:"model.roundingMode"}})],1)]),n("div",{staticClass:"row"},[n("label",{staticClass:"col-form-label col-lg-4 col-md-4"},[e._v(e._s(e.attributesMeta.vatPayer.label))]),n("div",{staticClass:"col-lg-8 col-md-8"},[n("x-complex-input",{attrs:{type:"select",params:{options:{options:e.payers}}},model:{value:e.model.vatPayer,callback:function(t){e.$set(e.model,"vatPayer",t)},expression:"model.vatPayer"}}),n("small",[e._v(e._s(e.$t("config","This is the new tax rate that will replace the old one in tariff plans and on the company info page. Config new Tax")))])],1)]),e.buttonActive&&!e.isRunning?n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-4 col-md-4"}),n("div",{staticClass:"col-lg-8 col-md-8"},[n("div",{staticClass:"alert alert-warning"},["isp"===e.model.vatPayer?n("h5",[e._v(" "+e._s(e.$t("config","What changes will be immediately made after button Update tax"))+": ")]):e._e(),"customer"===e.model.vatPayer?n("h5",[e._v(" "+e._s(e.$t("config","What changes will be immediately made after button Update VAT"))+": ")]):e._e(),n("ul",{staticClass:"mt-4"},[n("li",{staticClass:"pb-4"},[e._v(" "+e._s(e.$t("config","Default system tax will be changed to {newTax}% for default company and all partners with {oldTax}% tax.",{newTax:e.newTaxRate,oldTax:e.oldTaxRate}))+" ")]),"isp"===e.model.vatPayer?[n("li",{staticClass:"pb-4"},[n("b",[e._v(e._s(e.$t("config","If “VAT included” function is enabled"))+":")]),n("ul",[n("li",{staticClass:"pt-4"},[e._v(" "+e._s(e.$t("config","Each tariff plan with {oldTax}% will be duplicated with a new tax.",{oldTax:e.oldTaxRate}))+" ")])])]),n("li",{staticClass:"pb-4"},[n("b",[e._v(e._s(e.$t("config","If “VAT included” function is disabled"))+":")]),n("ul",[n("li",{staticClass:"pt-4"},[e._v(" "+e._s(e.$t("config","Each tariff plan with {old}% will be duplicated with a new {new}% tax and a price decreased by {diff}%.",{new:e.newTaxRate,old:e.oldTaxRate,diff:Math.abs(e.newTaxRate-e.oldTaxRate)}))+" ")])])])]:e._e(),"customer"===e.model.vatPayer?[n("li",{staticClass:"pb-4"},[n("b",[e._v(e._s(e.$t("config","If “VAT included” function is enabled"))+":")]),n("ul",[n("li",{staticClass:"pt-4"},[e._v(" "+e._s(e.$t("config","Each tariff plan with {old}% will be duplicated with a new {new}% tax and a price increased by {diff}%.",{new:e.newTaxRate,old:e.oldTaxRate,diff:Math.abs(e.newTaxRate-e.oldTaxRate)}))+" ")])])]),n("li",{staticClass:"pb-4"},[n("b",[e._v(e._s(e.$t("config","If “VAT included” function is disabled"))+":")]),n("ul",[n("li",{staticClass:"pt-4"},[e._v(" "+e._s(e.$t("config","Each tariff plan with {oldTax}% will be duplicated with a new {newTax}% tax.",{oldTax:e.oldTaxRate,newTax:e.newTaxRate}))+" ")])])])]:e._e(),n("li",{staticClass:"pb-4"},[n("b",[e._v(e._s(e.$t("config",'For each customer service, the "Change tariff" function will be used.')))]),n("ul",[n("li",{staticClass:"pt-4"},[e._v(" "+e._s(e.$t("config","Existing end dates will be preserved."))+" ")]),n("li",{staticClass:"pt-4"},[e._v(" "+e._s(e.$t("config","If a service has a custom price, the new service will be created using that custom price instead of the default tariff."))+" ")]),n("li",[e._v(" "+e._s(e.$t("config","All pending services will be deleted and must be recreated from scratch."))+" ")]),n("li",[e._v(" "+e._s(e.$t("config","All FUPs, CAPs, voice pricing, and limits will be copied to the new tariff."))+" ")])])])],2)])])]):e._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("button",{staticClass:"btn btn-primary pull-right",attrs:{type:"button",disabled:!e.buttonActive},on:{click:e.tryUpdate}},[e._v(" "+e._s(e.$t("config","Update tax"))+" ")])])])])])]),e.log?n("div",{staticClass:"card-block"},[n("div",{staticClass:"card-block-body"},[n("div",{staticClass:"form-horizontal"},[n("div",{staticClass:"mb-8 mt-12"},[n("a",{staticClass:"btn btn-link me-16",attrs:{href:e.downloadLogUrl}},[e._v(" "+e._s(e.$t("config","Download log"))+" ")]),n("a",{staticClass:"btn btn-link",attrs:{href:e.downloadPendingServicesLogUrl}},[e._v(" "+e._s(e.$t("config","Download pending services log"))+" ")])]),n("pre",{ref:"log",staticClass:"pre-scrollable full-height",domProps:{innerHTML:e._s(e.log)}})])])]):e._e()])],1)}),[],!1,null,null,null).exports,XBreadcrumbs:Fl.A}};const Ul=(0,Lr.A)(jl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content clearfix active"},[n("div",{staticClass:"splynx-top-nav"},[n("x-breadcrumbs",{attrs:{items:e.$route.meta.breadcrumbs}})],1),n("div",{staticClass:"spl-page-panel sticky-heading-in-panels splynx-config-panel"},[n("div",{staticClass:"main-content-holder"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12 col-md-12"},[n("tax-update-form")],1)])])])])}),[],!1,null,null,null).exports,Wl=[{path:"import",name:"admin.config.tools.import",component:()=>i.e(7757).then(i.bind(i,97757)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Tools"],url:"/admin/config#tools"},{title:["config","Import"]}],title:["config","Import"],componentName:"ImportHistory"}},{path:"import--new",name:"admin.config.tools.import.new",component:Wr.A},{path:"import--set-columns",name:"admin.config.tools.import.set_columns",component:Wr.A},{path:"import--confirm-import",name:"admin.config.tools.import.confirm",component:Wr.A},{path:"import--summary",name:"admin.config.tools.import.summary",component:Wr.A},{path:"export",name:"admin.config.tools.export",component:Wr.A},{path:"export--rates",name:"admin.config.tools.export.rates",component:Wr.A},{path:"activate-services",name:"admin.config.tools.activate_services",component:Wr.A},{path:"migration-import",name:"admin.config.tools.migration_import",component:Wr.A},{path:"cloud",name:"admin.config.tools.cloud",component:()=>i.e(1874).then(i.bind(i,71874)),meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Tools"],url:"/admin/config#tools"},{title:["config","VPN"],url:"/admin/config/tools/cloud"}],title:["config","VPN"],componentName:"CloudPage"}},{path:"invoices-cache",name:"admin.config.tools.invoices_cache",component:Wr.A},{path:"backup-and-restore",name:"admin.config.tools.backup_and_restore",component:Wr.A},{path:"backup-and-restore--upload-detail",name:"admin.config.tools.backup_and_restore.upload",component:Wr.A},{path:"backup-and-restore--create-detail",name:"admin.config.tools.backup_and_restore.create",component:Wr.A},{path:"backup-and-restore--restore-detail",name:"admin.config.tools.backup_and_restore.restore_detail",component:Wr.A},{path:"update-coordinates",name:"admin.config.tools.update_coordinates",component:Wr.A},{path:"customer-restore",name:"admin.config.tools.customer_restore",component:Wr.A},{path:"migrate-services",name:"admin.config.tools.migrate_services",component:Wr.A},{path:"reload-search-engine",name:"admin.config.tools.reload_search_engine",component:Pl,meta:{title:["config","Reload search engine"],breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Tools"],url:"/admin/config#tools"},{title:["config","Reload search engine"],url:"/admin/config/tools/reload-search-engine"}],keepAlive:!0,componentName:"ReloadSearchEngine"}},{path:"tax-update",name:"admin.config.tools.tax_update",component:Ul,meta:{breadcrumbs:[{title:["config","Config"],url:"/admin/config"},{title:["config","Tools"],url:"/admin/config#tools"},{title:["config","Tax update"],url:"/admin/config/tools/tax-update"}],title:["config","Tax update"],componentName:"TaxUpdate"}}],Kl=[{path:"add",name:"admin.config.extended_module.add",component:Wr.A},{path:"list",name:"admin.config.extended_module.list",component:Wr.A},{path:"view",name:"admin.config.extended_module.view",component:Wr.A}],Gl=[{path:"",name:"admin.config.templates",component:()=>Promise.all([i.e(7564),i.e(6806)]).then(i.bind(i,76806)),meta:{title:["config","Templates"],keepAlive:!1,componentName:"TemplatesList",queryKeyRefresh:!0}},{delimiter:"--",path:"add",name:"admin.config.templates.add",component:()=>Promise.all([i.e(6662),i.e(8296)]).then(i.bind(i,8296)),meta:{breadcrumbs:[{title:["config","Create template"],url:"/admin/config/templates--add"}],title:["config","Create template"]}},{delimiter:"--",path:"edit",name:"admin.config.templates.edit",component:()=>Promise.all([i.e(6662),i.e(9343)]).then(i.bind(i,39343)),meta:{title:["config","Edit template"]}}],Vl=[{path:"",name:"admin.config",component:()=>Promise.all([i.e(7409),i.e(8416)]).then(i.bind(i,8416)),meta:{breadcrumbs:[{title:["common","Config"],url:"/admin/config"}],title:["common","Config"]}},{path:"simple-module",name:"admin.config.simple_module",component:Wr.A},{path:"extended-module",children:Kl},{path:"additional-fields",name:"admin.config.additional_fields",component:()=>i.e(2541).then(i.bind(i,2541)),meta:{keepAlive:!0,componentName:"AdditionalFieldsList"}},{path:"custom-translations",name:"admin.config.custom_translations",component:()=>i.e(2336).then(i.bind(i,82336)),meta:{keepAlive:!0,componentName:"CustomTranslationsList"}},{path:"file-manager",name:"admin.config.file_manager",component:()=>i.e(1071).then(i.bind(i,21071)),meta:{keepAlive:!0,componentName:"FileManagerList"}},{path:"templates",children:Gl,meta:{breadcrumbs:[{title:["common","Config"],url:"/admin/config"},{title:["common","Templates"],url:"/admin/config/templates"}]}},{path:"labels",name:"admin.config.labels",component:()=>Promise.all([i.e(7564),i.e(248),i.e(6979)]).then(i.bind(i,66979)),meta:{title:["config","Labels"],keepAlive:!0,componentName:"LabelsList",breadcrumbs:[{title:["common","Config"],url:"/admin/config"},{title:["common","Labels"],url:"/admin/config/labels"}]}},{path:"company-information",name:"admin.config.company_information",component:()=>Promise.all([i.e(9970),i.e(5191)]).then(i.bind(i,65191)),meta:{title:["config","Company information"],keepAlive:!0,breadcrumbs:[{title:["common","Config"],url:"/admin/config"},{title:["common","Company information"],url:"/admin/config/company-information"}]}},{path:"main",children:wl},{path:"crm",children:_l},{path:"scheduling",children:Tl},{path:"inventory",children:El},{path:"finance",children:Sl},{path:"support",children:Al},{path:"networking",children:kl},{path:"voice",children:xl},{path:"modules",children:Rl,meta:{breadcrumbs:[{title:["common","Integrations"],url:"/admin/config#integrations"}]}},{path:"hooks",name:"admin.config.hooks",component:()=>i.e(1750).then(i.bind(i,21750)),meta:{keepAlive:!0,componentName:"HooksList"}},{path:"tools",children:Wl},{path:"add-on",name:"admin.config.add-on",component:yl}],zl=[{path:"operations",name:"admin.administration.logs.operations",component:()=>i.e(526).then(i.bind(i,98145)),meta:{keepAlive:!0,componentName:"LogsOperationsList"}},{path:"internal",name:"admin.administration.logs.internal",component:()=>i.e(4749).then(i.bind(i,94749)),meta:{keepAlive:!0,componentName:"InternalLogsList"}},{path:"portal",name:"admin.administration.logs.portal",component:()=>i.e(2774).then(i.bind(i,32774)),meta:{keepAlive:!0,componentName:"PortalLogsList"}},{path:"files",name:"admin.administration.logs.files",component:()=>i.e(9977).then(i.bind(i,59977)),meta:{keepAlive:!0,componentName:"FilesLogsList"}},{path:"email",name:"admin.administration.logs.email",component:()=>i.e(9755).then(i.bind(i,69755)),meta:{keepAlive:!0,componentName:"EmailLogsList"}},{path:"sms",name:"admin.administration.logs.sms",component:()=>i.e(2613).then(i.bind(i,82613)),meta:{keepAlive:!0,componentName:"SmsLogsList"}},{path:"sessions",name:"admin.administration.logs.sessions",component:()=>i.e(711).then(i.bind(i,90711)),meta:{keepAlive:!0,componentName:"SessionsLogsList"}},{path:"api",name:"admin.administration.logs.api",component:()=>i.e(5951).then(i.bind(i,95951)),meta:{keepAlive:!0,componentName:"ApiLogsList"}},{path:"changes",name:"admin.administration.logs.changes",component:()=>i.e(3347).then(i.bind(i,13347)),meta:{keepAlive:!0,componentName:"ChangesLogsList"}},{path:"services",name:"admin.administration.logs.services",component:()=>i.e(3855).then(i.bind(i,23855)),meta:{keepAlive:!0,componentName:"ServicesLogsList"}},{path:"pending",name:"admin.administration.logs.pending",component:()=>i.e(3768).then(i.bind(i,23768)),meta:{keepAlive:!0,componentName:"PendingLogsList"}},{path:"accounting",name:"admin.administration.logs.accounting",component:()=>i.e(4092).then(i.bind(i,34092)),meta:{keepAlive:!0,componentName:"AccountingLogsList"}},{path:"e-invoicing",name:"admin.administration.logs.e_invoicing",component:()=>i.e(8763).then(i.bind(i,38763)),meta:{keepAlive:!0,componentName:"EInvoicingLogsList"}}],ql=[{path:"statistics-internet",name:"admin.administration.reports.statistics_internet",component:()=>i.e(4222).then(i.bind(i,94222)),meta:{keepAlive:!0,componentName:"StatisticsInternetReport"}},{path:"services-export",name:"admin.administration.reports.services_export",component:Wr.A},{path:"finance-report",name:"admin.administration.reports.finance_report",component:()=>i.e(2270).then(i.bind(i,22270)),meta:{keepAlive:!0,componentName:"FinanceReport"}},{path:"usage-report",name:"admin.administration.reports.usage_report",component:()=>i.e(9166).then(i.bind(i,69166)),meta:{keepAlive:!0,componentName:"UsageReport"}},{path:"refill-card-statistics",name:"admin.administration.reports.refill_card_statistics",component:()=>i.e(8730).then(i.bind(i,18730)),meta:{keepAlive:!0,componentName:"RefillCardsStatistics"}},{path:"mrr-net-change-report",name:"admin.administration.reports.mrr_net_change_report",component:()=>Promise.all([i.e(7564),i.e(248),i.e(9547)]).then(i.bind(i,99547)),meta:{keepAlive:!0,componentName:"MRRNetChangeReport",breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Reports"],url:"/admin/administration#reports"},{title:["administration","Monthly recurring revenue net change report"],url:"/admin/administration/reports/mrr-net-change-report"}],title:["administration","Monthly recurring revenue net change report"]}},{path:"blocked-report",name:"admin.administration.reports.blocked_report",component:()=>i.e(7182).then(i.bind(i,77182)),meta:{keepAlive:!0,componentName:"BlockedReport"}},{path:"finance-logs",name:"admin.administration.reports.finance_logs",component:()=>i.e(184).then(i.bind(i,80184)),meta:{keepAlive:!0,componentName:"FinanceLogsReport"}},{path:"statements-main",name:"admin.administration.reports.statements_main",component:()=>Promise.all([i.e(7564),i.e(248),i.e(6292)]).then(i.bind(i,16292)),meta:{keepAlive:!0,componentName:"StatementsMainReport",breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Featured reports"],url:"/admin/administration#featured-reports"},{title:["administration","Account statements"],url:"/admin/administration/reports/statements-main"}],title:["administration","Account statements"]}},{path:"tax",name:"admin.administration.reports.tax",component:()=>i.e(792).then(i.bind(i,40792)),meta:{keepAlive:!0,componentName:"TaxReport"}},{path:"invoice-report",name:"admin.administration.reports.invoice_report",component:()=>i.e(1951).then(i.bind(i,21951)),meta:{keepAlive:!0,componentName:"InvoiceReport"}},{path:"customers-total-report",name:"admin.administration.reports.customers_total_report",component:()=>i.e(3517).then(i.bind(i,43517)),meta:{keepAlive:!0,componentName:"CustomersTotalReport"}},{path:"new-services-report",name:"admin.administration.reports.new_services_report",component:()=>Promise.all([i.e(7564),i.e(248),i.e(4556)]).then(i.bind(i,44556)),meta:{keepAlive:!1,componentName:"NewServicesReport",title:["administration","New services"],breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Featured reports"],url:"/admin/administration#featured-reports"},{title:["administration","New services"],url:"#"}]}},{path:"custom-prices-and-discount-report",name:"admin.administration.reports.prices_and_discounts",component:()=>i.e(1286).then(i.bind(i,81286)),meta:{keepAlive:!0,componentName:"PricesAndDiscountReport"}},{path:"transactions-categories",name:"admin.administration.reports.transactions_categories",component:()=>i.e(7786).then(i.bind(i,87786)),meta:{keepAlive:!0,componentName:"TransactionsCategoriesRe"}},{path:"ticket-reports",name:"admin.administration.reports.ticket_reports",component:()=>i.e(7224).then(i.bind(i,87224)),meta:{keepAlive:!0,componentName:"TicketReports"}},{path:"customer-contracts",name:"admin.administration.reports.customer_contracts",component:()=>i.e(9666).then(i.bind(i,9666)),meta:{keepAlive:!0,componentName:"CustomerContracts",breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Other reports"],url:"/admin/administration#other-reports"},{title:["administration","Customer contracts reports"],url:"/admin/administration/reports/customer-contracts"}],title:["administration","Customer contracts reports"]}},{path:"future-charges",name:"admin.administration.reports.future_charges",component:()=>i.e(3529).then(i.bind(i,23529)),meta:{keepAlive:!0,componentName:"FutureCharges"}},{path:"charge-history",name:"admin.administration.reports.charge_history",component:()=>i.e(5464).then(i.bind(i,25464)),meta:{keepAlive:!0,componentName:"ChargeHistory"}},{path:"daily-receipt",name:"admin.administration.reports.daily_receipt",component:()=>i.e(9136).then(i.bind(i,76755)),meta:{keepAlive:!0,componentName:"DailyReceiptReport"}},{path:"finance-customers-report",name:"admin.administration.reports.finance_customers_report",component:()=>i.e(9833).then(i.bind(i,89833)),meta:{keepAlive:!0,componentName:"FinanceCustomersReport"}},{path:"statements",name:"admin.administration.reports.statements",component:()=>i.e(4916).then(i.bind(i,24916)),meta:{keepAlive:!0,componentName:"StatementsReport"}},{path:"tax-total-report",name:"admin.administration.reports.tax_total_report",component:Wr.A},{path:"tax-report",name:"admin.administration.reports.tax_report",component:Wr.A},{path:"hotspot-export",name:"admin.administration.reports.hotspot_export",component:()=>i.e(4856).then(i.bind(i,64856)),meta:{breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Other reports"],url:"/admin/administration#other-reports"},{title:["administration","Hotspot export"],url:"/admin/administration/reports/hotspot-export"}],title:["administration","Hotspot export"]}},{path:"customers-chart",name:"admin.administration.reports.customers_chart",component:()=>i.e(7671).then(i.bind(i,37671)),meta:{breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Other reports"],url:"/admin/administration#other-reports"},{title:["administration","Customer status chart"],url:"/admin/administration/reports/customers-chart"}],title:["administration","Customer status chart"]}},{path:"account-status-preview",name:"admin.administration.reports.account_status_preview",component:()=>i.e(2403).then(i.bind(i,74784)),meta:{breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Other reports"],url:"/admin/administration#other-reports"},{title:["administration","Account status preview"],url:"/admin/administration/reports/account-status-preview"}],title:["administration","Account status preview"]}},{path:"inventory",name:"admin.administration.reports.inventory",component:()=>i.e(4980).then(i.bind(i,54980)),meta:{breadcrumbs:[{title:["administration","Administration"],url:"/admin/administration"},{title:["administration","Other reports"],url:"/admin/administration#other-reports"},{title:["administration","Inventory reports"],url:"/admin/administration/reports/inventory"}],title:["administration","Inventory report"],controller:"controllers\\admin\\administration\\reports\\InventoryController"}}],Yl=[{path:"",name:"admin.administration",component:()=>Promise.all([i.e(7409),i.e(4381)]).then(i.bind(i,64381)),meta:{breadcrumbs:[{title:["common","Administration"],url:"/admin/administration"}],title:["common","Administration"]}},{path:"administrators",name:"admin.administration.administrators",component:()=>i.e(9592).then(i.bind(i,99592)),meta:{keepAlive:!0,componentName:"AdministratorsList"}},{path:"roles",name:"admin.administration.roles",component:()=>i.e(2335).then(i.bind(i,82335)),meta:{keepAlive:!0,componentName:"RolesList"}},{path:"partners",name:"admin.administration.partners",component:()=>i.e(1168).then(i.bind(i,98787)),meta:{keepAlive:!0,componentName:"PartnersList"}},{path:"locations",name:"admin.administration.locations",component:()=>i.e(6771).then(i.bind(i,6771)),meta:{keepAlive:!0,componentName:"LocationsList"}},{path:"api-keys",name:"admin.administration.api_keys",component:()=>i.e(4162).then(i.bind(i,84162)),meta:{keepAlive:!0,componentName:"ApiKeysList"}},{path:"logs",children:zl},{path:"splynx/license",name:"admin.administration.splynx.license",component:Wr.A},{path:"reports",children:ql}],Xl={name:"LeadsDashboard",extends:Wr.T};const Ql=(0,Lr.A)(Xl,undefined,undefined,!1,null,null,null).exports,Zl={name:"QuotesList",extends:Wr.T};const Jl=(0,Lr.A)(Zl,undefined,undefined,!1,null,null,null).exports,ec=[{path:"quotes",name:"admin.crm.leads.billing.quotes",component:Wr.A,meta:{title:["crm","Quotes"]}}],tc=[{path:"history",name:"admin.crm.leads.activity.history",component:Wr.A,meta:{title:["customers","History"]}}],nc=[{path:"list",name:"admin.crm.leads.list",component:()=>Promise.all([i.e(493),i.e(7564),i.e(248),i.e(6500),i.e(4882)]).then(i.bind(i,59521)),meta:{breadcrumbs:[{title:["crm","Leads"],url:"/admin/crm/dashboard"},{title:["crm","List"],url:"/admin/crm/leads/list"}],title:["crm","Leads list"],keepAlive:!0,componentName:"LeadsList"}},{path:"add",name:"admin.crm.leads.add",component:()=>i.e(1422).then(i.bind(i,91422)),meta:{breadcrumbs:[{title:["crm","Leads"],url:"/admin/crm/dashboard"},{title:["crm","Add lead"],url:"/admin/crm/leads/add"}],title:["crm","Add lead"]}},{path:"view",name:"admin.crm.leads.view",component:()=>Promise.all([i.e(4332),i.e(3229)]).then(i.bind(i,3229)),meta:{breadcrumbs:[{title:["crm","Leads"],url:"/admin/crm/dashboard"},{title:["crm","List"],url:"/admin/crm/leads/list"}],title:["crm","Leads list"],componentName:"LeadsList"}},{path:"convertation",name:"admin.crm.leads.convertation",component:()=>i.e(8831).then(i.bind(i,68831)),meta:{componentName:"LeadConvertation",breadcrumbs:[{title:["crm","Leads"],url:"/admin/crm/dashboard"},{title:["crm","List"],url:"/admin/crm/leads/list"}]}},{path:"documents",name:"admin.crm.leads.documents",component:Wr.A,meta:{title:["crm","Documents"]}},{path:"communication",name:"admin.crm.leads.communication",component:Wr.A,meta:{title:["crm","Communication"]}},{path:"billing",children:ec},{path:"activity",children:tc},{path:"comments",name:"admin.crm.leads.comments",component:Wr.A,meta:{title:["customers","Comments"]}}],ic=[{path:"customers-quotes-convertation",name:"admin.crm.customers.customers_quotes_convertation",component:Wr.A},{path:"customers-crm",name:"admin.crm.customers.customers_crm",component:Wr.A},{path:"customers-quotes",name:"admin.crm.customers.customers_quotes",component:Wr.A}],oc=[{path:"dashboard",name:"admin.crm.dashboard",component:Ql,meta:{keepAlive:!0,componentName:"LeadsDashboard"}},{path:"leads",children:nc},{path:"quotes",name:"admin.crm.quotes",component:Jl,meta:{keepAlive:!0,componentName:"QuotesList"}},{path:"map",name:"admin.crm.map",component:Wr.A},{path:"customers",children:ic}],sc=[{path:"",name:"admin.customers.cards.list",component:Wr.A},{delimiter:"--",path:"all",name:"admin.customers.cards.list.all",component:Wr.A,meta:{title:["customers","All vouchers"]}},{delimiter:"--",path:"online",name:"admin.customers.cards.list.online",component:Wr.A,meta:{title:["customers","Online vouchers"]}}],ac=[{path:"",name:"admin.customers.cards.view",component:Wr.A},{delimiter:"--",path:"statistics",name:"admin.customers.cards.view.statistics",component:Wr.A,meta:{title:["customers","Voucher statistics"]}}],rc=[{path:"generate",name:"admin.customers.cards.generate",component:Wr.A},{path:"series",name:"admin.customers.cards.series",component:Wr.A},{path:"search",name:"admin.customers.cards.search",component:Wr.A},{path:"list",children:sc},{path:"view",children:ac}],lc=[{path:"",name:"admin.customers.list.index",component:()=>Promise.all([i.e(248),i.e(4568)]).then(i.bind(i,44568)),meta:{breadcrumbs:[{title:["customers","Customers"],url:"/admin/dashboard"},{title:["customers","List"],url:"/admin/crm/customers/list"}],keepAlive:!0,title:["customers","Customers list"],componentName:"CustomersList"}},{delimiter:"--",path:"all",name:"admin.customers.list.all",component:Wr.A,meta:{title:["customers","All customers"]}},{delimiter:"--",path:"online",name:"admin.customers.list.online",component:Wr.A,meta:{title:["customers","Online customers"]}}],cc=[{path:"internet-statistics",name:"admin.customers.statistics.internet_statistics",component:Wr.A,meta:{title:["customers","Statistics internet"]}},{path:"voice-statistics",name:"admin.customers.statistics.voice_statistics",component:Wr.A,meta:{title:["customers","Statistics voice"]}}],dc=[{path:"history",name:"admin.customers.view.activity.history",component:Wr.A,meta:{title:["customers","History"]}},{path:"comments",name:"admin.customers.view.activity.comments",component:Wr.A,meta:{title:["customers","Comments"]}}],uc=[{path:"add",name:"admin.customers.add",component:Wr.T},{path:"search",name:"admin.customers.search",component:Wr.T},{path:"list",children:lc},{path:"map",name:"admin.customers.map",component:Wr.T},{path:"view",name:"admin.customers.view",component:()=>Promise.all([i.e(4332),i.e(6156)]).then(i.bind(i,6156)),meta:{breadcrumbs:[{title:["common","Customers"],url:"/admin/dashboard"},{title:["common","List"],url:"/admin/customers/list"}],title:["common","Customer"]}},{path:"cards",children:rc},{path:"statistics",children:cc},{path:"activity",children:dc}],pc=[{path:"dashboard",name:"admin.tickets.dashboard",component:()=>i.e(9596).then(i.bind(i,89596)),meta:{componentName:"TicketsDashboard"}},{path:"create",name:"admin.tickets.create",component:Wr.A},{path:"opened",name:"admin.tickets.opened",component:()=>Promise.all([i.e(7564),i.e(248),i.e(1840),i.e(773)]).then(i.bind(i,70773)),meta:{breadcrumbs:[{title:["common","Tickets"],url:"/admin/tickets/opened"},{title:["support","List"],url:"/admin/tickets/opened"}],title:["support","List"],keepAlive:!0,componentName:"OpenedTicketsList"}},{path:"opened--view",name:"admin.tickets.opened.view",component:Wr.A},{path:"closed--view",name:"admin.tickets.closed.view",component:Wr.A},{path:"trash",name:"admin.tickets.trash",component:()=>Promise.all([i.e(7564),i.e(248),i.e(1840),i.e(2607)]).then(i.bind(i,92607)),meta:{breadcrumbs:[{title:["common","Tickets"],url:"/admin/tickets/opened"},{title:["support","Archive"],url:"/admin/tickets/trash"}],title:["support","Archive"],keepAlive:!0,componentName:"TrashTicketsList"}},{path:"trash--view",name:"admin.tickets.trash.view",component:Wr.A},{path:"requesters",name:"admin.tickets.requesters",component:()=>i.e(5970).then(i.bind(i,5970)),meta:{keepAlive:!0,componentName:"TicketRecipientsList"}}],hc=[{path:"dashboard",name:"admin.finance.dashboard",component:()=>i.e(6969).then(i.bind(i,6969)),meta:{keepAlive:!0,componentName:"FinanceDashboard"}},{path:"transactions",name:"admin.finance.transactions",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(6797)]).then(i.bind(i,16797)),meta:{title:["finance","Transactions"],breadcrumbs:[{title:["finance","Transactions"],url:"admin/finance/transactions"}],keepAlive:!0,componentName:"FinanceTransactionsList"}},{path:"invoices",name:"admin.finance.invoices",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(9404)]).then(i.bind(i,7023)),meta:{title:["finance","Invoices"],controller:"controllers\\admin\\finance\\InvoicesController",breadcrumbs:[{title:["finance","Invoices"],url:"admin/finance/transactions"}],keepAlive:!1,componentName:"FinanceInvoicesList"}},{path:"credit-notes",name:"admin.finance.credit_notes",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(4688)]).then(i.bind(i,64688)),meta:{keepAlive:!0,title:["finance","Credit Notes"],controller:"controllers\\admin\\finance\\CreditNotesController",componentName:"FinanceCreditNotesList",breadcrumbs:[{title:["finance","Credit notes"],url:"admin/finance/credit-notes"}]}},{path:"proforma-invoices",name:"admin.finance.proforma_invoices",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(6680)]).then(i.bind(i,36680)),meta:{keepAlive:!0,title:["finance","Proforma invoices"],controller:"controllers\\admin\\finance\\ProformaInvoicesController",componentName:"FinanceProformaInvoices",breadcrumbs:[{title:["finance","Proforma invoices"],url:"admin/finance/proforma-invoices"}]}},{path:"payments",name:"admin.finance.payments",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(8145)]).then(i.bind(i,20526)),meta:{title:["finance","Payments"],keepAlive:!0,controller:"controllers\\admin\\finance\\PaymentsController",componentName:"FinancePaymentsList",breadcrumbs:[{title:["finance","Payments"],url:"admin/finance/payments"}]}},{path:"history",name:"admin.finance.history",component:()=>Promise.all([i.e(7564),i.e(248),i.e(7287)]).then(i.bind(i,27287)),meta:{title:["finance","History & Preview"],breadcrumbs:[{title:["finance","History & Preview"],url:"admin/finance/history"}],keepAlive:!0,componentName:"HistoryAndPreview"}},{path:"bank-statements",children:[{path:"process",name:"admin.finance.bank_statements.process",component:Wr.A},{path:"history",name:"admin.finance.bank_statements.history",component:()=>i.e(2552).then(i.bind(i,82552)),meta:{keepAlive:!0,componentName:"BankStatementsHistory"}},{path:"view",name:"admin.finance.bank_statements.view",component:Wr.A},{path:"view--view-unprocessed",name:"admin.finance.bank_statements.view_unprocessed",component:Wr.A},{path:"view--pair",name:"admin.finance.bank_statements.pair",component:Wr.A}]},{path:"refill-cards",children:[{path:"generate",name:"admin.finance.refill_cards.generate",component:Wr.A},{path:"series",name:"admin.finance.refill_cards.series",component:()=>i.e(5878).then(i.bind(i,65878)),meta:{keepAlive:!0,componentName:"RefillCardsList"}},{path:"view",name:"admin.finance.refill_cards.view",component:Wr.A}]},{path:"costs",name:"admin.finance.costs",component:()=>i.e(1014).then(i.bind(i,1014)),meta:{keepAlive:!0,componentName:"FinanceCostsList"}}],fc=[{path:"suppliers",name:"admin.inventory.supply.suppliers",component:()=>i.e(9809).then(i.bind(i,49809)),meta:{keepAlive:!0,componentName:"SuppliersList"}},{path:"suppliers--view",name:"admin.inventory.supply.suppliers.view",component:Wr.A},{path:"vendor",name:"admin.inventory.supply.vendor",component:()=>i.e(2048).then(i.bind(i,2048)),meta:{keepAlive:!0,componentName:"InventoryVendorsList"}},{path:"vendor--view",name:"admin.inventory.supply.vendor.view",component:Wr.A},{path:"supplier-invoices",name:"admin.inventory.supply.supplier_invoices",component:()=>i.e(3710).then(i.bind(i,93710)),meta:{keepAlive:!0,componentName:"SupplierInvoicesList"}}],mc=[{path:"view",name:"admin.inventory.products.view",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(7925)]).then(i.bind(i,50306)),meta:{componentName:"InventoryProductsView",breadcrumbs:[{title:["inventory","Inventory"],url:"/admin/inventory/dashboard"},{title:["inventory","Products"],url:"/admin/inventory/products"}],title:["inventory","Product"]}},{path:"",name:"admin.inventory.products",component:()=>i.e(699).then(i.bind(i,30699)),meta:{keepAlive:!0,componentName:"InventoryProductsList"}}],gc=[{path:"dashboard",name:"admin.inventory.dashboard",component:()=>i.e(8298).then(i.bind(i,28298)),meta:{keepAlive:!0,componentName:"InventoryDashboard"}},{path:"items",name:"admin.inventory.items",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(1107)]).then(i.bind(i,61107)),meta:{keepAlive:!1,title:["inventory","Items"],componentName:"InventoryItemsList",breadcrumbs:[{title:["inventory","Inventory"],url:"/admin/inventory/dashboard"},{title:["inventory","Items"],url:"/admin/inventory/items"}]}},{path:"items--history",name:"admin.inventory.items.history",component:Wr.A},{path:"products",children:mc},{path:"supply",children:fc}],vc=[{path:"",name:"admin.networking.network_sites",component:()=>Promise.all([i.e(7564),i.e(4733),i.e(3126),i.e(6202)]).then(i.bind(i,76202)),meta:{keepAlive:!0,componentName:"NetworkSitesPage",title:["networking","Network sites"],breadcrumbs:[{title:["networking","Networking"],url:"/admin/networking/network-sites"},{title:["networking","Network sites"],url:"/admin/networking/network-sites"}]}},{path:"view",name:"admin.networking.network_sites.view",component:()=>i.e(5360).then(i.bind(i,85360)),meta:{componentName:"NetworkSitesViewPage",title:["networking","Network sites"],breadcrumbs:[{title:["networking","Networking"],url:"/admin/networking/network-sites"},{title:["networking","Network sites"],url:"/admin/networking/network-sites"}],controller:"controllers\\admin\\networking\\network_sites\\ViewController"}}],bc=[{path:"",name:"admin.networking.routers.view",component:Wr.A},{delimiter:"--",path:"sectors",name:"admin.networking.routers.view.sectors",component:Wr.A,meta:{title:["networking","Сonnection rules"]}},{delimiter:"--",path:"mikrotik",name:"admin.networking.routers.view.mikrotik",component:Wr.A,meta:{title:["networking","MikroTik"]}},{delimiter:"--",path:"mikrotik-log",name:"admin.networking.routers.view.mikrotik_log",component:Wr.A,meta:{title:["networking","MikroTik log"]}},{delimiter:"--",path:"map",name:"admin.networking.routers.view.map",component:Wr.A,meta:{title:["networking","Map"]}}],yc=[{path:"add",name:"admin.networking.routers.add",component:Wr.A},{path:"list",name:"admin.networking.routers.list",component:()=>i.e(1582).then(i.bind(i,81582)),meta:{keepAlive:!0,componentName:"RoutersList"}},{path:"view",children:bc}],wc=[{path:"dashboard",name:"admin.networking.acs.dashboard",component:()=>i.e(5757).then(i.bind(i,88138)),meta:{keepAlive:!0,componentName:"AcsDashboard"}},{path:"devices",name:"admin.networking.acs.devices",component:()=>i.e(2460).then(i.bind(i,52460)),meta:{keepAlive:!0,componentName:"AcsDevicesList"}},{path:"device-view",children:[{path:"",name:"admin.networking.acs.devices_view",component:Wr.A},{delimiter:"--",path:"wan",name:"admin.networking.acs.devices_view.wan",component:Wr.A,meta:{title:["networking","WAN"]}},{delimiter:"--",path:"lan",name:"admin.networking.acs.devices_view.lan",component:Wr.A,meta:{title:["networking","LAN"]}},{delimiter:"--",path:"nat",name:"admin.networking.acs.devices_view.nat",component:Wr.A,meta:{title:["networking","NAT"]}},{delimiter:"--",path:"firewall",name:"admin.networking.acs.devices_view.firewall",component:Wr.A,meta:{title:["networking","Firewall"]}},{delimiter:"--",path:"diagnose",name:"admin.networking.acs.devices_view.diagnose",component:Wr.A,meta:{title:["networking","Diagnoses"]}},{delimiter:"--",path:"activity",name:"admin.networking.acs.devices_view.activity",component:Wr.A,meta:{title:["networking","Activity"]}}]},{path:"files",name:"admin.networking.acs.files",component:()=>i.e(6013).then(i.bind(i,46013)),meta:{keepAlive:!0,componentName:"AcsFilesList"}},{path:"upgrade",name:"admin.networking.acs.upgrade",component:()=>i.e(912).then(i.bind(i,80912)),meta:{keepAlive:!0,componentName:"AcsUpgradesList"}},{path:"upgrade--add",name:"admin.networking.acs.upgrade.add",component:Wr.A},{path:"upgrade--view-batch",name:"admin.networking.acs.upgrade.view_batch",component:Wr.A}],_c=[{path:"add",name:"admin.networking.voice_devices.add",component:Wr.A},{path:"list",name:"admin.networking.voice_devices.list",component:()=>i.e(2795).then(i.bind(i,62795)),meta:{keepAlive:!0,componentName:"VoiceDevicesList"}},{path:"view",name:"admin.networking.voice_devices.view",component:Wr.A}];var Tc=i(99086),Ec=i(19252),Sc=i(93089),Ac=i(78765),Cc=i(31052);const kc={name:"HardwareView",mixins:[i(50884).A],data:()=>({loading:!0,model:{},showGraphsTab:!1}),mounted(){this.loadData()},methods:{async loadData(){const[e]=await Promise.all([Ac.A.getPageDataForHardwareView(this.$route.query.id),this.loadPermissions()]);this.model=e.model,this.usePermissions();this.showGraphsTab=this.getPermissionsByKey("controllers\\admin\\networking\\monitoring\\GraphsManageController","index"),this.loading=!1}},computed:{breadcrumbItem(){let e=this.model?.ip?` (${this.model.ip})`:"";return{title:this.model.title+e,url:"#"}},hardwareServicesTab:()=>()=>Promise.all([i.e(7564),i.e(248),i.e(3367),i.e(1905)]).then(i.bind(i,31905))},components:{XAddonCode:Cc.y,XPreloaderBlock:vl.default,XTab:Sc.XTab,XTabAjax:Ec.A,XTabs:Tc.A,XBreadcrumbs:Fl.A}};const xc=[{path:"",name:"admin.networking.monitoring.view",component:(0,Lr.A)(kc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content active"},[n("x-preloader-block",{attrs:{loading:e.loading}},[n("div",{staticClass:"splynx-top-nav"},[n("x-breadcrumbs",{attrs:{items:e.$route.meta.breadcrumbs.concat([e.breadcrumbItem])}})],1),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("x-addon-code",{ref:"addon_code_before",attrs:{page:"controllers\\\\admin\\\\networking\\\\monitoring\\\\ViewController",location:"before_content",params:{hardware:e.model}}})],1)]),n("x-tabs",{ref:"tabs",attrs:{id:"hardware_view_tabs",direction:"horizontal"}},[n("x-tab",{attrs:{id:"information",title:e.$t("networking","Information")}},[n("x-tab-ajax",{attrs:{url:"/admin/networking/monitoring/view--index?id="+e.model.id}})],1),n("x-tab",{attrs:{id:"oid",title:e.$t("networking","SNMP OID")}},[n("x-tab-ajax",{attrs:{url:"/admin/networking/monitoring/view--oid?id="+e.model.id}})],1),n("x-tab",{attrs:{id:"logs",title:e.$t("networking","Logs")}},[n("x-tab-ajax",{attrs:{url:"/admin/networking/monitoring/view--log?id="+e.model.id}})],1),e.showGraphsTab?n("x-tab",{attrs:{id:"graphs",title:e.$t("networking","Graphs")}},[n("x-tab-ajax",{attrs:{url:"/admin/networking/monitoring/graphs-manage?id="+e.model.id}})],1):e._e(),n("x-tab",{attrs:{id:"backup",title:e.$t("networking","Backup")}},[n("x-tab-ajax",{attrs:{url:"/admin/networking/monitoring/view--backup?id="+e.model.id}})],1),n("x-tab",{attrs:{id:"map",title:e.$t("networking","Map")}},[n("x-tab-ajax",{attrs:{url:"/admin/networking/monitoring/view--map?id="+e.model.id}})],1),e.model.access_device?n("x-tab",{attrs:{id:"customer_services",title:e.$t("networking","Customer services"),component:e.hardwareServicesTab,"component-props":{model:e.model}}}):e._e()],1),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("x-addon-code",{ref:"addon_code_after",attrs:{page:"controllers\\\\admin\\\\networking\\\\monitoring\\\\ViewController",location:"after_content",params:{hardware:e.model}}})],1)])],1)],1)}),[],!1,null,null,null).exports,meta:{breadcrumbs:[{title:["networking","Networking"],url:"#"},{title:["networking","Hardware"],url:"#"},{title:["networking","List"],url:"/admin/networking/monitoring/list"}],controller:"controllers\\admin\\networking\\monitoring\\ViewController"}},{delimiter:"--",path:"oid",name:"admin.networking.monitoring.view.oid",component:Wr.A,meta:{title:["networking","SNMP OID"]}},{delimiter:"--",path:"log",name:"admin.networking.monitoring.view.log",component:Wr.A,meta:{title:["networking","Logs"]}},{delimiter:"--",path:"backup",name:"admin.networking.monitoring.view.backup",component:Wr.A,meta:{title:["networking","Backup"]}},{delimiter:"--",path:"map",name:"admin.networking.monitoring.view.map",component:Wr.A,meta:{title:["networking","Map"]}}],$c=[{path:"routers",children:yc},{path:"network-sites",children:vc},{path:"cpe",name:"admin.networking.cpe",component:()=>i.e(7722).then(i.bind(i,17722)),meta:{keepAlive:!0,componentName:"CpeList"}},{path:"acs",children:wc},{path:"voice-devices",children:_c},{path:"monitoring",children:[{path:"add",name:"admin.networking.monitoring.add",component:Wr.T},{path:"list",name:"admin.networking.monitoring.list",component:()=>i.e(3965).then(i.bind(i,63965)),meta:{keepAlive:!0,componentName:"HardwareList"}},{path:"view",children:xc},{path:"graphs-manage",name:"admin.networking.monitoring.graphs_manage",component:Wr.T,meta:{title:["networking","Graphs"]}},{path:"backups",name:"admin.networking.monitoring.backups",component:()=>i.e(1776).then(i.bind(i,11776)),meta:{keepAlive:!0,componentName:"HardwareBackupsList"}}]},{path:"ipv4",children:[{path:"add",name:"admin.networking.ipv4.add",component:Wr.A},{path:"list",name:"admin.networking.ipv4.list",component:()=>i.e(7676).then(i.bind(i,65295)),meta:{keepAlive:!0,componentName:"Ipv4NetworksList"}},{path:"view",name:"admin.networking.ipv4.view",component:Wr.A}]},{path:"ipv6",children:[{path:"add",name:"admin.networking.ipv6.add",component:Wr.A},{path:"list",name:"admin.networking.ipv6.list",component:()=>i.e(7994).then(i.bind(i,97994)),meta:{keepAlive:!0,componentName:"Ipv6NetworksList"}},{path:"view",name:"admin.networking.ipv6.view",component:Wr.A}]},{path:"map",name:"admin.networking.map",component:Wr.A}],Ic=[{path:"inbox",name:"admin.support.inbox",component:()=>i.e(4216).then(i.bind(i,44216)),meta:{keepAlive:!0,componentName:"InboxList"}},{path:"messages",children:[{path:"create",name:"admin.support.messages.create",component:Wr.A},{path:"history",name:"admin.support.messages.history",component:()=>i.e(5240).then(i.bind(i,95240)),meta:{keepAlive:!0,componentName:"MessagesHistoryList"}}]},{path:"messengers",name:"admin.support.messengers",component:()=>i.e(2974).then(i.bind(i,22974)),meta:{breadcrumbs:[{title:["common","Messages"],url:"/admin/support/messengers"},{title:["common","Messengers"],url:"/admin/support/messengers"}],title:["support","Messengers"],keepAlive:!0,componentName:"MessengersPage"}},{path:"news",name:"admin.support.news",component:()=>Promise.all([i.e(7564),i.e(248),i.e(8283)]).then(i.bind(i,48283)),meta:{breadcrumbs:[{title:["common","Messages"],url:"/admin/support/news"},{title:["common","News"],url:"/admin/support/news"}],title:["support","News"],keepAlive:!0,componentName:"NewsPage"}}],Oc=[{path:"dashboard",name:"admin.scheduling.dashboard",component:()=>i.e(7784).then(i.bind(i,7784)),meta:{keepAlive:!0,componentName:"SchedulingDashboard"}},{path:"projects",name:"admin.scheduling.projects",component:()=>i.e(9679).then(i.bind(i,9679)),meta:{keepAlive:!0,componentName:"SchedulingProjectsList"}},{path:"tasks",children:[{path:"",name:"admin.scheduling.tasks",component:()=>Promise.all([i.e(493),i.e(7564),i.e(6500),i.e(4850)]).then(i.bind(i,50335)),meta:{componentName:"SchedulingTasksList",breadcrumbs:[{title:["scheduling","Scheduling"],url:"/admin/scheduling/dashboard"},{title:["scheduling","Tasks"],url:"/admin/scheduling/tasks"}],title:["scheduling","Tasks"]}},{delimiter:"--",path:"add",name:"admin.scheduling.tasks.add",component:Wr.A},{path:"view",name:"admin.scheduling.tasks.view",component:()=>i.e(8554).then(i.bind(i,88554)),meta:{componentName:"TaskView",breadcrumbs:[{title:["scheduling","Scheduling"],url:"/admin/scheduling/dashboard"},{title:["scheduling","Tasks"],url:"/admin/scheduling/tasks"}],title:["scheduling","Task view"],queryKeyRefresh:!0}}]},{path:"calendars",name:"admin.scheduling.calendars",component:()=>Promise.all([i.e(7564),i.e(1450),i.e(873)]).then(i.bind(i,60873)),meta:{breadcrumbs:[{title:["crm","Scheduling"],url:"/admin/scheduling/dashboard"},{title:["crm","Calendar"],url:"/admin/scheduling/calendars"}],title:["crm","Calendar"],keepAlive:!1,componentName:"SchedulingCalendar"}},{path:"maps",name:"admin.scheduling.maps",component:()=>Promise.all([i.e(5066),i.e(718)]).then(i.bind(i,80718)),meta:{breadcrumbs:[{title:["crm","Scheduling"],url:"/admin/scheduling/dashboard"},{title:["crm","Maps"],url:"/admin/scheduling/maps"}],title:["crm","Scheduling Map"],keepAlive:!0,componentName:"SchedulingMap"}},{path:"archive",children:[{path:"",name:"admin.scheduling.archive",component:()=>Promise.all([i.e(7564),i.e(285)]).then(i.bind(i,20285)),meta:{componentName:"SchedulingArchiveList",breadcrumbs:[{title:["scheduling","Scheduling"],url:"/admin/scheduling/dashboard"},{title:["scheduling","Archive"],url:"/admin/scheduling/archive"}],title:["scheduling","Archive"]}},{delimiter:"--",path:"add",name:"admin.scheduling.archive.add",component:Wr.A},{path:"view",name:"admin.scheduling.archive.view",component:()=>i.e(8554).then(i.bind(i,88554)),meta:{componentName:"TaskView",breadcrumbs:[{title:["scheduling","Scheduling"],url:"/admin/scheduling/dashboard"},{title:["scheduling","Archive"],url:"/admin/scheduling/archive"}],title:["scheduling","Task view"]}}]}],Lc=[{path:"cdr-import",name:"admin.voice.processing.cdr_import",component:Wr.A},{path:"cdr-export",name:"admin.voice.processing.cdr_export",component:Wr.A},{path:"cdr-history",name:"admin.voice.processing.cdr_history",component:Wr.A},{path:"cdr-errors",name:"admin.voice.processing.cdr_errors",component:Wr.A},{path:"cdr-errors--view-errors",name:"admin.voice.processing.cdr_errors.view",component:Wr.A}],Rc=[{path:"",name:"admin.voice.rates.customer_rates",component:Wr.A},{delimiter:"--",path:"rates",name:"admin.voice.rates.customer_rates.rates",component:Wr.A,meta:{title:["voice","Customer rates"]}}],Nc=[{path:"",name:"admin.voice.rates.provider_rates",component:Wr.A},{delimiter:"--",path:"rates",name:"admin.voice.rates.provider_rates.rates",component:Wr.A,meta:{title:["voice","Provider rates"]}}],Dc=[{path:"processing",children:Lc},{path:"rates",children:[{path:"customers",name:"admin.voice.rates.customers",component:Wr.A},{path:"customer-rates",children:Rc},{path:"providers",name:"admin.voice.rates.providers",component:Wr.A},{path:"provider-rates",children:Nc}]},{path:"categories",name:"admin.voice.categories",component:()=>i.e(8086).then(i.bind(i,58086)),meta:{keepAlive:!0,componentName:"VoiceCategoriesList"}},{path:"prefixes",name:"admin.voice.prefixes",component:()=>i.e(430).then(i.bind(i,430)),meta:{keepAlive:!0,componentName:"VoicePrefixesList"}}];const Mc={name:"AdminLicense",components:{},data(){let e=new Cr;return{...e.getLicenseInfo(),licenseChecker:e}},computed:{showLicenseInput(){return this.licenseKey??!1}},beforeCreate(){},mounted(){},methods:{reloadLicense(){$.ajax({type:"GET",url:"/admin/tools--update-license",dataType:"json",success:e=>{e.result?(window.show_success("Success! Page will be reloaded in 2 seconds!",2e3),setTimeout((()=>{Cr.reloadLicenseRoute()}),2e3)):window.show_error("Error when trying reload license!",3e3)}})},activateLicense(){$.get("/admin/tools--check-license"),this.$refs.splynx_buy_form.submit()}}};const Pc=(0,Lr.A)(Mc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("div",{staticClass:"container center-content flex-column"},[n("div",{staticClass:"row welcome-holder"},[n("div",{staticClass:"col-md-12"},[n("h2",{staticClass:"text-center"},[e._v(" Splynx ")]),n("div",{staticClass:"card mt-24"},[e._m(0),n("div",{staticClass:"card-body p-24"},[n("form",{ref:"splynx_buy_form",attrs:{id:"splynx_buy_form",target:"_blank",action:e.billingUrl,method:"POST"}},[e.showLicenseInput?n("input",{attrs:{type:"hidden",name:"license"},domProps:{value:e.licenseKey}}):e._e(),e.showByForm?n("p",{staticClass:"color-dark"},[e._v(" You can "),n("button",{staticClass:"btn btn-success",attrs:{id:"splynx_buy_form_button",type:"button"},on:{click:e.activateLicense}},[e._v(" Activate ")]),e._v(" a subscription. ")]):n("p",{staticClass:"color-dark"},[e._v(" The license for this instance has expired - please contact a Super Administrator for more information. Should the license be renewed - please click the reload button below. ")]),n("p",{staticClass:"color-dark mt-24"},[e._v(" If you have active subscription please "),n("button",{staticClass:"btn btn-info",attrs:{id:"splynx_license_reload_button",type:"button"},on:{click:e.reloadLicense}},[e._v(" Reload ")]),e._v(" license information. ")])]),e._m(1)])])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-header ps-24 pe-24 pb-0"},[n("h4",[e._v("License has expired!")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-24"},[n("div",{staticClass:"col-md-12"},[n("p",{staticClass:"color-dark"},[e._v(" Contact if needed:"),n("br"),n("a",{staticClass:"btn btn-link",attrs:{href:"mailto:info@splynx.com"}},[e._v("info@splynx.com")]),n("br"),n("a",{staticClass:"btn btn-link",attrs:{href:"https://splynx.com/"}},[e._v("https://splynx.com/")])])])])}],!1,null,null,null).exports;var Fc=i(50714);const Bc={name:"AdminEnterLicense",components:{XBootstrapSpinner:Fc.U},data:()=>({loading:!1,errorMessage:""}),computed:{},mounted(){$((()=>{$("#license_code").focus()}))},methods:{setLicenseSubmit(){let e=this;return $.ajax({type:"GET",url:"/admin/tools--set-license",dataType:"json",data:$("#splynx_license_form").serialize(),beforeSend(){e.loading=!0},success(t){e.loading=!1,t.result?(alert("Success! Page will be reloaded in 2 seconds!"),setTimeout((()=>{Cr.reloadLicenseRoute()}),2e3)):t.message&&(e.errorMessage=t.message[0])}}),!1}}};const Hc=(0,Lr.A)(Bc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("div",{staticClass:"container center-content flex-column"},[n("div",{staticClass:"row welcome-holder"},[n("div",{staticClass:"col-md-12"},[n("h2",{staticClass:"text-center"},[e._v(" Welcome to Splynx ")]),n("div",{staticClass:"card mt-24"},[e._m(0),n("div",{staticClass:"card-body p-24 pt-12"},[n("form",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"fix-height",attrs:{id:"splynx_license_form",method:"GET"},on:{submit:function(t){return t.preventDefault(),e.setLicenseSubmit.apply(null,arguments)}}},[n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-12"},[e._v(" License ")]),n("div",{staticClass:"col-md-12"},[n("input",{staticClass:"btn btn-primary pull-right",attrs:{id:"admin_license_save_button",type:"submit",value:"Save"}}),n("input",{staticClass:"form-control input-sm license-input",attrs:{id:"license_code",type:"text",name:"license",value:""}}),n("small",{staticClass:"color-danger",domProps:{innerHTML:e._s(e.errorMessage)}})])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"row fix-height"},[n("div",{staticClass:"col-md-12 center-content"},[n("x-bootstrap-spinner",{attrs:{type:"primary",size:"md"}})],1)]),e._m(1)])])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-header ps-24 pe-24"},[n("h4",[e._v("Enter license code:")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-24"},[n("div",{staticClass:"col-md-12"},[n("p",{staticClass:"color-dark"},[e._v(" You can get license on this url: "),n("a",{staticClass:"btn btn-link",attrs:{target:"_blank",href:"https://splynx.com/get-started/?utm_campaign=license-inside"}},[e._v("https://splynx.com/get-started/")])]),n("p",{staticClass:"color-dark"},[e._v(" Contact if needed:"),n("br"),n("a",{staticClass:"btn btn-link",attrs:{href:"mailto:info@splynx.com"}},[e._v("info@splynx.com")]),n("br"),n("a",{staticClass:"btn btn-link",attrs:{href:"https://splynx.com/"}},[e._v("https://splynx.com/")])])])])}],!1,null,null,null).exports,jc=[{name:"admin.license",path:"/",component:Pc,meta:{layout:Q.JO}},{delimiter:"--",name:"admin.license.enter",path:"enter",component:Hc,meta:{layout:Q.JO}}],Uc=Sr(Ar([{path:"/",redirect:e=>{e({name:"admin.login"})}},{path:"/admin",children:Gr([{name:"admin.dashboard",path:"dashboard",component:()=>i.e(2757).then(i.bind(i,2757)),meta:{breadcrumbs:[{title:["site","Dashboard"],url:"/admin/dashboard"}],title:["dashboard","Dashboard"],icon:"icon-ic_fluent_board_24_regular",color:"secondary",keepAlive:!1,componentName:"Dashboard"}},{path:"tariffs",meta:{icon:"icon-ic_fluent_add_subtract_circle_24_regular",color:"success"},children:pl},{path:"crm",meta:{icon:"icon-ic_fluent_handshake_24_regular",color:"purple"},children:oc},{path:"customers",meta:{icon:"icon-ic_fluent_people_team_24_regular",color:"purple"},children:uc},{path:"tickets",meta:{icon:"icon-ic_fluent_ticket_diagonal_24_regular",color:"purple"},children:pc},{path:"finance",meta:{icon:"icon-ic_fluent_money_24_regular",color:"purple",breadcrumbs:[{title:["config","Finance"],url:"/admin/finance/dashboard"}]},children:hc},{path:"inventory",meta:{icon:"icon-ic_fluent_layer_24_regular",color:"success"},children:gc},{path:"networking",children:$c,meta:{icon:"icon-ic_fluent_globe_person_24_regular",color:"success"}},{path:"support",meta:{icon:"icon-ic_fluent_mail_24_regular",color:"purple"},children:Ic},{path:"scheduling",meta:{icon:"icon-ic_fluent_calendar_ltr_24_regular",color:"success"},children:Oc},{path:"voice",children:Dc,meta:{icon:"icon-ic_fluent_mic_24_regular",color:"success"}},{path:"administration",children:Yl,meta:{icon:"icon-ic_fluent_calendar_info_20_regular",color:"secondary"}},{path:"config",children:Vl,meta:{icon:"icon-ic_fluent_options_24_regular",color:"secondary"}},{path:"profile",children:[{path:"",name:"admin.profile",component:()=>i.e(9578).then(i.bind(i,69578)),meta:{breadcrumbs:[{title:["common","My Profile"],url:"/admin/profile"}],title:["common","Profile"]}}],meta:{icon:"icon-ic_fluent_person_24_regular",color:"secondary"}},{path:"reset-password",name:"admin.reset_password",component:Wr.A},{path:"reset-password--verify-check-code",name:"admin.reset_password.verify",component:Wr.A},{path:"reset-password--set-new-password",name:"admin.reset_password.set_new_password",component:Wr.A},{path:"welcome",name:"admin.welcome",component:()=>i.e(9904).then(i.bind(i,89904)),meta:{layout:Q.JO,title:["dashboard","Post-install configuration"]}},{path:"help",name:"admin.help",component:Wr.A},{path:"license",children:jc}]),props:!0},{name:"not_found",meta:{layout:"empty_layout"},path:"/:pathMatch(.*)*",component:Ur}])),Wc=s.Ay.prototype.push;s.Ay.prototype.push=function(e,t,n){return window.popStateDetected=!1,t||n?Wc.call(this,e,t,n):Wc.call(this,e).catch((t=>s.Ay.isNavigationFailure(t)?(s.Ay.isNavigationFailure(t,16)&&e.force&&window.xApp.REFRESH_ROUTE(),t):Promise.reject(t)))};const Kc=new s.Ay({mode:"history",routes:Uc});Kc.beforeEach(((e,t,n)=>{let i=new Cr;i.needRedirectToLicenseRoute(e.fullPath)&&n(i.getRouteToRedirect()),n()})),window.addEventListener("popstate",(()=>{window.popStateDetected=!0})),Kc.beforeEach(((e,t,n)=>{const i="#content, .splynx-dialog-content, .vue-dialog-body";if(isHaveUnsavedData(i))return n(!1),window.showUnsavedDataDialog(i,(()=>{if(window.popStateDetected)return Kc.go(-1),!1;n()}),(()=>{n(!1)})),!0;n()}));const Gc=Kc;const Vc={name:"XMenuItem",props:{item:{type:Object,required:!0},activeItem:{type:Object},isCollapsed:{type:Boolean},isMobileItem:{type:Boolean,default:!1},mobileItem:{type:Object,default:null},openedItem:{type:Object,default:null},openedSubItem:{type:Object,default:null},level:{type:Number,default:1},switchPage:{type:String,default:""},activeColor:{type:String,default:""},activeBlocks:{type:Array},firstInGroup:{type:Array},appPart:String},data:()=>({itemHover:!1,isOpen:!1,showTitle:!0}),computed:{showMenuTitle(){return!(!this.isFirstLevel||this.isMobileItem)&&this.firstInGroup.some((e=>e===this.item.title))},caseTitleBlock(){switch(this.item.menuGroup){case"group_crm":return t("common","CRM");case"group_company":return t("common","Company");case"group_system":return t("common","System");default:return""}},caseActiveColor(){switch(this.isFirstLevel?this.item.menuGroup:this.activeColor){case"group_portal":case"group_crm":return"color-purple";case"group_company":return"color-success";case"group_main":case"group_system":return"color-secondary";default:return"color-inherit"}},isFirstLevel(){return 1===this.level},itemLinkClass(){return[this.item.items&&this.item.items.length>0?"has-dropdown":"",this.isMobileItem?"":`menu-item-level-${this.level}`,{"menu-item-mobile-item":this.isMobileItem},{"menu-item-mobile-item-open":this.isOpen&&this.isCollapsed},{"parent-active-item":this.isChildActive(this.item.items)},{"active-item":this.isActiveItem()},{"menu-open":this.isOpen&&!this.isCollapsed||this.isOpen&&!this.isCollapsed&&!this.isFirstLevel}]},shouldDisplayItem(){return this.isCollapsed&&!this.isFirstLevel||!this.isCollapsed||this.isMobileItem||!this.isMobileItem&&!this.isFirstLevel}},watch:{switchPage(e){this.activatePageSwitch(e),this.setOpenItem()},openedItem(){this.checkOpenItem()},openedSubItem(){this.checkOpenItem()}},created(){this.$on("click-item",((e,t,n)=>{this.$parent.$emit("click-item",e,t,n)})),this.$on("expand-item",((e,t)=>{this.$parent.$emit("expand-item",e,t)})),this.$on("opened-item",(e=>{this.$parent.$emit("opened-item",e)})),this.$on("activate-item",(e=>{this.$parent.$emit("activate-item",e)})),this.$on("activate-item-page-switch",(e=>{this.$parent.$emit("activate-item-page-switch",e)})),this.setOpenItem()},methods:{isEmptyLink:e=>"#"===e||""===e,clickHandler(e,t,n){let i=window.location.pathname.replace(/\/+$/,""),o=i+window.location.search;if(-1!==o.toString().indexOf("?id=")){let e=new URLSearchParams(window.location.search);e.delete("id"),o=i,""!==e.toString()&&(o+=`?${e.toString()}`)}if(o.toString()===t.url.toString()&&!t.itemsAmount)return!1;this.$emit("click-item",t,n,e),this.itemCanBeOpened(t)&&(this.isOpen=!this.isOpen)},itemCanBeOpened:e=>!(0,w.empty)(e.items),isActiveItem(){return this.activeItem===this.item},activatePageSwitch(e){(-1!==e.indexOf(this.item.url)||!(0,w.empty)(this.item.urlAlternative)&&-1!==e.indexOf(this.item.urlAlternative))&&this.$emit("activate-item-page-switch",this.item,this.level)},isCurrentUrl(e){let t=window.location.pathname+window.location.search;if(-1!==t.toString().indexOf(e.url))return!0;if(!(0,w.empty)(e.urlAliases))for(let n in e.urlAliases)if(-1!==t.indexOf(e.urlAliases[n]))return!0;return!1},isLinkActive(e){return this.isChildActive(e.items)||this.isCurrentUrl(e)},isChildActive(e){return!!e&&e.some((e=>this.isLinkActive(e)))},checkOpenItem(){this.isOpen=this.item===this.openedItem||this.item===this.openedSubItem},setOpenItem(){this.isChildActive(this.item.items)&&this.$emit("expand-item",this.item,this.level)},mouseEnterEvent(e){e.stopPropagation(),this.itemHover=!0,this.isCollapsed&&this.isFirstLevel&&!this.isMobileItem&&this.$emit("set-mobile-item",{item:this.item,itemEl:e.currentTarget})},mouseLeaveEvent(e){e.stopPropagation(),this.itemHover=!1},hover(){return this.isCollapsed&&this.isFirstLevel?this.item===this.mobileItem:this.itemHover},beforeEnter(e){requestAnimationFrame((()=>{e.style.height||(e.style.height="0px"),e.style.display=null}))},enter(e){requestAnimationFrame((()=>{requestAnimationFrame((()=>{e.style.height=`${e.scrollHeight}px`}))}))},afterEnter(e){e.style.height=null},beforeLeave(e){requestAnimationFrame((()=>{e.style.height||(e.style.height=`${e.offsetHeight}px`)}))},leave(e){requestAnimationFrame((()=>{requestAnimationFrame((()=>{e.style.height="0px"}))}))},afterLeave(e){e.style.height=null}}};const zc=(0,Lr.A)(Vc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item.hideFromMenu?e._e():n("div",{class:[e.isFirstLevel?"":e.caseActiveColor],attrs:{"data-test-selector":e.item.title}},[!e.item.hideFromMenu&&e.showMenuTitle?n("span",{class:["menu-block-title",e.caseActiveColor],domProps:{textContent:e._s(e.caseTitleBlock)}}):e._e(),e.item.hideFromMenu?e._e():n("div",e._g({staticClass:"menu-item",class:[e.itemLinkClass,e.isFirstLevel?e.caseActiveColor:"color-inherit"],on:{mouseout:e.mouseLeaveEvent}},e.isCollapsed?{mouseover:e.mouseEnterEvent}:{click:e.mouseEnterEvent}),[n("a",{class:[e.isFirstLevel?e.caseActiveColor:"color-inherit"],attrs:{href:e.item.url},on:{click:function(t){return t.preventDefault(),e.clickHandler(t,e.item,e.level)}}},[e.isFirstLevel?n("span",{staticClass:"btn-icon-sm main-icon",attrs:{"data-test-selector":"icon-item"}},[n("i",{class:e.item.icon})]):e._e(),e.shouldDisplayItem?[n("span",{staticClass:"item-title"},[e._v(e._s(e.item.title))]),e.item.counter&&e.item.counterValue>0?[n("span",{staticClass:"badge bg-dark rounded-pill",attrs:{id:e.appPart+"_"+e.item.source.toLowerCase().replace(/\\/g,"_")+"_after_menu_item_title_label","data-test-selector":"counter-value"}},[e._v(e._s(e.item.counterValue))])]:e._e(),e.item.items&&e.item.items.length>0&&!e.isMobileItem?[e._m(0)]:e._e()]:e._e()],2),e.shouldDisplayItem?[n("transition",{attrs:{"enter-active-class":"enter-active","leave-active-class":"leave-active"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave,"before-enter":e.beforeEnter,"before-leave":e.beforeLeave,enter:e.enter,leave:e.leave}},[e.item.items&&e.item.items.length>0&&e.isOpen?n("div",{staticClass:"menu-list"},e._l(e.item.items,(function(t,i){return n("x-menu-item",{key:i,attrs:{"active-item":e.activeItem,"is-collapsed":e.isCollapsed,item:t,level:e.level+1,"opened-item":e.openedItem,"opened-sub-item":e.openedSubItem,"switch-page":e.switchPage}})})),1):e._e()])]:e._e()],2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"btn-icon-sm button-close",attrs:{"data-test-selector":"arrow-down"}},[t("i",{staticClass:"icon-ic_fluent_chevron_down_24_regular"})])}],!1,null,null,null).exports,qc={name:"XMenuApp",props:{menuStructure:Array,appPart:String,switchPage:String,collapsedMenu:{type:Boolean}},data(){return{isCollapsed:this.collapsedMenu,width:"236px",widthCollapsed:"48px",activeItem:null,activeSearchItemLevel:1,mobileItem:null,mobileItemPos:0,mobileItemHeight:0,mobileItemTimeout:null,parentHeight:"100%",parentWidth:"100vw",parentOffsetTop:"0px",parentOffsetLeft:"0px",resultSearchItem:null,parentItem:null,openedItem:null,openedSubItem:null,level:1,items:this.menuStructure,activeBlocks:[],firstInGroup:[]}},created(){this.activateItem(),add_socket_listener("updateMenuCounter",this.updateMenuCounterEvent),this.isBlockExist(),window.xApp.menu=this},mounted(){this.updateAdminCounters(),this.updatePortalCounters()},computed:{filteredItems(){return this.items.filter((e=>e))},sidebarWidth(){return this.isCollapsed?this.widthCollapsed:this.width},mobileItemStyle(){return{item:[{position:"absolute"},{top:`${this.mobileItemPos}px`},{left:"0px"},{"z-index":200},{width:`calc(${this.parentWidth} - ${this.parentOffsetLeft})`},{"max-width":this.width},{height:"32px"},{color:"#333"}],dropdown:[{position:"absolute"},{top:`calc(${this.mobileItemPos}px + 32px)`},{left:this.sidebarWidth},{right:"0px"},{background:"#fff"},{width:`calc(${this.width} - ${this.sidebarWidth})`},{"max-width":`calc(${this.width} - ${this.sidebarWidth})`},{"max-height":`calc(${this.parentHeight} - ${this.mobileItemPos+this.mobileItemHeight}px )`},{"overflow-y":"auto"}]}}},methods:{updateAdminCounters(){"admin"===this.appPart&&this.getMenuCounters()},updatePortalCounters(){"portal"===this.appPart&&(this.getPortalMenuMessagesCounter(),this.getPortalMenuTicketsCounter(),this.getPortalMenuNewsCounter(),this.getPortalMenuOrderCounter())},isBlockExist(){this.items.forEach((e=>{this.activeBlocks.some((t=>this.checkMenuGroup(t,e)))||(this.firstInGroup.push(e.title),this.activeBlocks.push(e.menuGroup))}))},checkMenuGroup:(e,t)=>e===t.menuGroup,getMenuMessagesCounter(){let e=this;$.ajax({url:"/admin/support/inbox--unread-count",success(t){e.updateMenuCounterEvent(t)}})},getMenuCounters(){let e=this;$.ajax({url:"/counters",success(t){e.updateMenuCounterEvent(t)}})},getPortalMenuMessagesCounter(){let e=this;$.ajax({url:"/portal/messages--unread-amount",success(t){e.updateMenuCounterEvent(t)}})},getPortalMenuTicketsCounter(){let e=this;$.ajax({url:"/portal/tickets--unread-amount",success(t){e.updateMenuCounterEvent(t)}})},getPortalMenuNewsCounter(){$.ajax({url:"/portal/news--unread-amount",success:e=>{this.updateMenuCounterEvent(e)}})},getPortalMenuOrderCounter(){$.ajax({url:"/portal/services/order--disapprove-amount",success:e=>{this.updateMenuCounterEvent(e)}})},updateMenuCounterEvent(e){void 0!==e.controllers&&this.updateMenuCounter(this.items,e.controllers,e.counter)},updateMenuCounter(e,t,n){e.forEach(((i,o)=>{t.forEach((t=>{t.name&&i.source===t.name?Vue.set(e[o],"counterValue",t.count):i.source===t&&Vue.set(e[o],"counterValue",n)})),(0,w.empty)(i.items)||this.updateMenuCounter(i.items,t,n)}))},isEmptyLink:e=>"#"===e||""===e,itemCanBeOpened:e=>!(0,w.empty)(e.items),expandItem(e,t){this.checkLinksLevel(e,t),this.activateItem(e)},clickItem(e,t,n){const i=window.checkIfNeedOpenLinkInNewTab(n);i?this.switchContent(e.url,i):(this.checkLinksLevel(e,t),this.switchContent(e.url,!1),this.activateItem(e))},checkLinksLevel(e,t){this.itemCanBeOpened(e)||1!==t?this.itemCanBeOpened(e)&&this.openedItem!==e&&this.openedSubItem!==e?this.setOpenItem(e):this.itemCanBeOpened(e)&&1===t?this.openedItem=e:this.itemCanBeOpened(e)&&2===t?this.openedSubItem=e:this.itemCanBeOpened(e)||2!==t||(this.openedSubItem=null):(this.openedItem=null,this.openedSubItem=null)},activateItemPageSwitch(e){this.activateItem(e)},activateItem(e){let t=window.location.pathname+window.location.search;if(null!==e&&e&&(e.url===t||!(0,w.empty)(e.urlAlternative)&&e.urlAlternative===t))return this.activeItem=e,!1;this.searchItem(this.items,t,1),(0,w.empty)(e)&&!(0,w.empty)(this.activeItem)&&this.checkLinksLevel(this.activeItem,this.activeSearchItemLevel)},setOpenItem(e){this.openedItem===e?(this.openedItem=null,this.openedSubItem=null):this.openedSubItem===e?this.openedSubItem=null:null!==this.openedItem&&this.openedItem!==e&&this.openedItem.items&&this.openedItem.items.length>0&&this.isChild(this.openedItem,e)?this.openedSubItem=e:this.openedItem=e},isChild(e,t){return!!t&&e.items.some((n=>(n===t&&(this.openedItem=e),n===t)))},searchItem(e,t,n){t&&-1!==t.indexOf("?module=")&&-1===t.indexOf("admin/config/additional-fields")?this.searchItemForEntryPoint(e,t,n):e.forEach((e=>{let i=!1;if(t&&-1!==t.indexOf(e.url))i=!0;else if(!(0,w.empty)(e.urlAliases))for(let n in e.urlAliases)if(t&&-1!==t.indexOf(e.urlAliases[n])){i=!0;break}if(i)return this.parentItem=this.resultSearchItem,this.activeItem=e,void 0!==n&&(this.activeSearchItemLevel=n),!1;e.items&&e.items.length>0&&(this.resultSearchItem=e,this.searchItem(e.items,t,void 0!==n?parseInt(n)+1:void 0))}))},searchItemForEntryPoint(e,t,n){e.forEach((e=>{if(t===e.url||!(0,w.empty)(e.urlAlternative)&&-1!==t.indexOf(e.urlAlternative))return this.parentItem=this.resultSearchItem,this.activeItem=e,!1;if(!(0,w.empty)(e.entryPointsUrlsForMenuSearchForHiddenMenuItemsControllers))for(let n in e.entryPointsUrlsForMenuSearchForHiddenMenuItemsControllers)if(e.entryPointsUrlsForMenuSearchForHiddenMenuItemsControllers[n]==t)return this.parentItem=this.resultSearchItem,this.activeItem=e,!1;e.items&&e.items.length>0&&(this.resultSearchItem=e,this.searchItemForEntryPoint(e.items,t,void 0!==n?parseInt(n)+1:void 0))}))},switchContent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("/admin/logout"!==e||"admin"!==this.appPart){if(!this.isEmptyLink(e)){if(t)return void window.open(e,"_blank");this.searchItem(this.items,e),e&&this.$router.path!==e&&this.$router.push(e),this.closeMobileMenu(),$(window).trigger("resize"),this.updatePortalCounters()}}else logout("/admin/logout")},closeMobileMenu(){this.showMobileMenu(!1)},setMobileItem(e){let{item:t,itemEl:n}=e;if(this.mobileItem===t)return;let i=this.$el.getBoundingClientRect().top,o=window.getComputedStyle(n),s=parseFloat(o.paddingTop),a=parseFloat(o.paddingBottom),r=n.offsetHeight-(s+a),l=n.getBoundingClientRect().top-i+s;this.unsetMobileItem(),this.$nextTick((()=>{this.mobileItem=t,this.mobileItemPos=l,this.mobileItemHeight=r}))},unsetMobileItem(e,t){e?(this.mobileItemTimeout&&clearTimeout(this.mobileItemTimeout),t||(this.mobileItemTimeout=setTimeout((()=>{this.mobileItem=null}),600))):this.mobileItem=null},initParentOffsets(){let e=this.$el.getBoundingClientRect().top,t=this.$el.getBoundingClientRect().left;if(this.relative){let n=this.$el.parentElement,i=n.getBoundingClientRect().top,o=n.getBoundingClientRect().left;this.parentHeight=`${n.offsetHeight}px`,this.parentWidth=`${n.offsetWidth}px`,this.parentOffsetTop=e-i+"px",this.parentOffsetLeft=t-o+"px"}else this.parentOffsetTop=`${e}px`,this.parentOffsetLeft=`${t}px`},onMouseLeave(){this.unsetMobileItem()},...(0,a.i0)("menu_store",["showMobileMenu"])},watch:{switchPage(){this.activateItemPageSwitch(null)},collapsedMenu(e){this.isCollapsed!==this.collapsedMenu&&(this.isCollapsed=e,this.unsetMobileItem(),this.isCollapsed&&this.$nextTick((()=>{this.initParentOffsets()})))}},components:{XMenuItem:zc}},Yc=qc;const Xc=(0,Lr.A)(Yc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"side",class:[e.isCollapsed?"collapsed":"expanded"],style:{position:"relative",width:e.sidebarWidth},on:{mouseleave:e.onMouseLeave,click:e.closeMobileMenu}},[n("div",{staticClass:"sidebar-menu-wrapper"},[n("div",{staticClass:"enter"},[e._t("default")],2),n("div",{staticClass:"sidebar-menu"},[n("div",{staticClass:"menu"},[n("div",{staticClass:"menu-list"},e._l(e.filteredItems,(function(t,i){return n("x-menu-item",{key:i,attrs:{item:t,"first-in-group":e.firstInGroup,"is-collapsed":e.isCollapsed,"active-item":e.activeItem,"opened-item":e.openedItem,"opened-sub-item":e.openedSubItem,"switch-page":e.switchPage,"app-part":e.appPart},on:{"click-item":e.clickItem,"activate-item":e.activateItem,"set-mobile-item":e.setMobileItem,"expand-item":e.expandItem,"unset-mobile-item":e.unsetMobileItem}})})),1),e.isCollapsed&&e.mobileItem?n("div",{staticClass:"mobile-item",style:e.mobileItemStyle.item},[e.mobileItem?n("x-menu-item",{attrs:{item:e.mobileItem,"is-mobile-item":!0,"is-collapsed":e.isCollapsed,"active-item":e.activeItem,"opened-item":e.openedItem,"opened-sub-item":e.openedSubItem,"switch-page":e.switchPage},on:{"click-item":e.clickItem,"expand-item":e.expandItem,"activate-item":e.activateItem}}):e._e()],1):e._e(),n("div",{staticClass:"menu-item-dropdown",style:e.mobileItemStyle.dropdown},[e.mobileItem&&e.mobileItem.items?e._l(e.mobileItem.items,(function(t,i){return n("x-menu-item",{key:i,attrs:{item:t,"active-color":e.mobileItem.menuGroup,level:e.level+1,"is-collapsed":e.isCollapsed,"active-item":e.activeItem,"opened-item":e.openedItem,"opened-sub-item":e.openedSubItem,"switch-page":e.switchPage},on:{"click-item":e.clickItem,"expand-item":e.expandItem,"activate-item":e.activateItem}})})):e._e()],2)])])])])}),[],!1,null,null,null).exports,Qc={name:"XMenu",props:{collapseFirst:{type:Boolean,default:!1},appPart:String,menuStructure:[Object,Array]},data:()=>({switchPageUrl:"",showGoTop:!1,windowHeight:0,scrollTop:0,anchorStyle:""}),beforeMount(){this.collapseFirst&&this.toggleMenu(!0)},created(){window.addEventListener("scroll",this.handleScrollState),this.handleScrollState(),window.addEventListener("popstate",this.handlePopState),this.$router.afterEach((()=>{this.handlePopState()}))},destroyed(){window.addEventListener("scroll",this.handleScrollState),window.removeEventListener("popstate",this.handlePopState)},methods:{updateMenu(e){this.switchPageUrl=e},closeMobileMenu(){this.showMobileMenu(!1)},handlePopState(){this.updateMenu(window.location.pathname)},handleScrollState(){this.windowHeight=document.documentElement.clientHeight,this.scrollTop=window.pageYOffset,this.showGoTop=this.windowHeight<this.scrollTop,this.anchorStyle=this.styleForAnchor},...(0,a.i0)("menu_store",["toggleMenu","showMobileMenu"]),goTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}},computed:{...(0,a.L8)("menu_store",["mobileState","collapseState"]),mobileMenu(){return this.mobileState},collapsedMenu(){return this.collapseState},styleForAnchor(){return this.scrollTop+this.windowHeight>document.body.clientHeight-31?"transform:translateY(calc(-100% + 12px))":""}},components:{XMenuApp:Xc}};const Zc=(0,Lr.A)(Qc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{ref:"menuHolder",staticClass:"side-wrap"},[n("x-menu-app",{ref:"menu",attrs:{"app-part":e.appPart,"menu-structure":e.menuStructure,"switch-page":e.switchPageUrl,"collapsed-menu":e.collapsedMenu}},[e._t("default")],2),e.showGoTop?n("a",{staticClass:"btn btn-light btn-icon btn-to-top color-dark",style:e.anchorStyle,attrs:{title:e.$t("common","Go to top"),"data-test-selector":"btn-to-top"},on:{click:e.goTop}},[n("i",{staticClass:"icon-ic_fluent_arrow_up_24_regular"})]):e._e()],1)}),[],!1,null,null,null).exports;const Jc={name:"XHeader",mounted(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize)},methods:{...(0,a.i0)("sidebar",["showSidebar"]),...(0,a.i0)("menu_store",["toggleMenu","showMobileMenu","handleResize","isMobileWidth"])},computed:{isShowHelp(){return"super-administrator"===this.admin.role_name},isShowTimeout(){return parseInt(this.admin.timeout)>0},isHaveAdmin(){return!(0,w.empty)(this.admin)},...(0,a.L8)(["admin","logo"]),...(0,a.L8)("search",["searchEntities"]),...(0,a.L8)("menu_store",["mobileState","mobileWidth","collapseState"]),iconClassName(){return this.mobileWidth?this.iconMobileClassName:this.iconDesktopClassName},iconDesktopClassName(){return this.collapseState?"icon-ic_fluent_chevron_right_24_regular":"icon-ic_fluent_chevron_left_24_regular"},iconMobileClassName(){return this.mobileState?"icon-ic_fluent_dismiss_24_regular":"icon-ic_fluent_navigation_24_regular"},headerLogo(){return""===this.logo||null===this.logo?'<a class="navbar-brand" href="/">Splynx</a>':this.logo}}};const ed=(0,Lr.A)(Jc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"splynx-header"},[n("a",{staticClass:"nav-toggler",on:{click:e.isMobileWidth}},[n("i",{class:e.iconClassName})]),n("div",{staticClass:"splynx-logo",domProps:{innerHTML:e._s(e.headerLogo)}}),e._t("default"),e._m(0)],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mobile-head"},[t("div",{staticClass:"page-name"})])}],!1,null,null,null).exports;const td={name:"XGlobalSearchOffers",delimiters:["${","}"],props:{filteredSearchEntity:Array,choiceEntity:Function},data:()=>({position:{x:0,y:0,arrayPosition:-1},map:[]}),watch:{filteredSearchEntity:{immediate:!0,handler(e){Vue.nextTick((()=>{this.calculateMap(e)}))}}},mounted(){window.addEventListener("keydown",this.processKeyboard)},destroyed(){window.removeEventListener("keydown",this.processKeyboard)},methods:{processKeyboard(e){if(void 0==={13:13,37:37,38:38,39:39,40:40}[e.keyCode])return;if(13===e.keyCode)return void this.choiceEntity(this.filteredSearchEntity[this.position.arrayPosition]);const t=()=>this.map[this.position.y].length-1,n=e=>{-1===this.position.arrayPosition&&(this.$set(this.position,"arrayPosition",0),void 0!==e&&e())};37===e.keyCode&&(-1===this.position.arrayPosition&&n(),this.position.x>0?this.position.x--:(this.position.y--,this.position.y<0&&(this.position.y=this.map.length-1),this.position.x=t())),39===e.keyCode&&(n((()=>{this.position.x=-1})),this.position.x<this.map[this.position.y].length-1?this.position.x++:(this.position.x=0,this.position.y++,this.position.y>this.map.length-1&&(this.position.y=0)));let i=()=>{void 0===this.map[this.position.y][this.position.x]&&(this.position.x=t())};38===e.keyCode&&(n((()=>{this.position.y=this.map.length})),this.position.y>0?this.position.y--:this.position.y=0,i()),40===e.keyCode&&(n((()=>{this.position.y=-1})),this.position.y<this.map.length-1?this.position.y++:this.position.y=this.map.length-1,i()),this.$set(this.position,"arrayPosition",this.map[this.position.y][this.position.x])},calculateMap(e){let t=[],n=-1,i=-1;for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;let s=document.getElementById(`entity_${o}`);n<s.offsetTop&&(t.push([]),n=s.offsetTop,i++),t[i].push(o)}this.map=t,this.position={x:0,y:0,arrayPosition:-1}}}};const nd=(0,Lr.A)(td,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"entity-offers"},e._l(e.filteredSearchEntity,(function(t,i){return n("a",{key:"entity"+t,class:{"entity-offer-item":!0,active:e.position.arrayPosition==i},attrs:{id:"entity_"+i},domProps:{textContent:e._s(t)},on:{click:function(n){return n.preventDefault(),e.choiceEntity(t)}}})})),0)}),[],!1,null,null,null).exports,id={name:"XGlobalSearch",delimiters:["${","}"],props:{availableSearchEntityList:[Array,Object],appMountedCallback:Function,appDestroyedCallback:Function,openSearch:Function},data(){return{skipSearchQuery:!1,inputSearchQuery:this.$store.getters["global_search/searchQuery"],isLoading:!1,debouncedSearch:(0,w.debounce)(this.search,300)}},computed:{searchResultsEmptyObject(){return Object.keys(this.searchResults).length<=0||void 0===this.searchResults||null===this.searchResults},filteredSearchEntity(){return(0,w.empty)(this.inputSearchQuery)||"@"!==this.inputSearchQuery.charAt(0)?[]:(this.scrollResultsList(0),this.availableSearchEntityList.filter((e=>e.toLowerCase().includes(this.inputSearchQuery.toLowerCase()))))},ifSearchIsEmpty(){return(0,w.empty)(this.filteredSearchEntity)},ifIsEmptySearchQuery(){return(0,w.empty)(this.searchQuery)},searchQuery:{get(){return this.$store.getters["global_search/searchQuery"]},set(e){this.debouncedSearch(e)}},...(0,a.L8)("global_search",["searchResults","activePosition"])},watch:{inputSearchQuery(e){this.skipSearchQuery?this.skipSearchQuery=!1:null!==e&&""!==e?e.length<2||(this.searchQuery=e):this.clearSearchQuery()}},methods:{empty:e=>(0,w.empty)(e),hideSearchSidebar(){this.hideSidebar()},clearSearchQuery(){this.clearSearch(),this.inputSearchQuery="",this.setFocusIntoSearchInput()},getHref(e){if(null===e.modalInfo)return e.href;let{path:t}=this.$route;return(0,w.empty)(this.$route.query)||(t+=`?${$.param({...this.$route.query,...e.modalInfo})}`),t},callHrefFunction(e){setTimeout((()=>{null!==e.modalInfo?2==e.modalInfo["modal-type"]?open_dialog_new(e.modalInfo.modal):showModal(e.modalInfo.modal,e.modalInfo["modal-params"]):new Function(`switch_page("${e.href}")`)()}),200),this.hideSearchSidebar()},processKeyboard(e){if((0,w.empty)(this.filteredSearchEntity)){if(13===e.keyCode&&this.searchResults.items){if(void 0===this.searchResults.items[this.activePosition])return;this.callHrefFunction(this.searchResults.items[this.activePosition])}return 38===e.keyCode||40===e.keyCode?(e.preventDefault(),this.processSelectionByKeyboard(e.keyCode),!1):void 0}},scrollResults(){let e=0;for(let t=0;t<this.activePosition-1;t++){e+=$("#fast_search_result:visible tr").eq(t).height()}this.scrollResultsList(e)},processSelectionByKeyboard(e){this.updateActivePositionByKey(e),this.scrollResults()},choiceEntity(e){void 0!==e&&(this.skipSearchQuery=!0,this.inputSearchQuery=`${e}: `,this.setFocusIntoSearchInput())},setFocusIntoSearchInput(){let e=$(this.$refs.searchInput);if(e.is(":visible"))return void this.$refs.searchInput.focus();let t=setInterval((()=>{e.is(":visible")&&(this.$refs.searchInput.focus(),clearInterval(t))}),10)},scrollResultsList(e){this.$refs.searchList?.scrollTo({top:e,behavior:"smooth"})},getItemClass(e){return{"bg-light-warning":e===this.activePosition}},...(0,a.i0)("sidebar",["hideSidebar"]),...(0,a.i0)("global_search",["search","clearSearch","updateActivePositionByKey"])},mounted(){this.appMountedCallback(this),this.scrollResults(),splynx_event_bus.reinitEvent("globalSearchProcessingStart",(()=>{this.isLoading=!0})),splynx_event_bus.reinitEvent("globalSearchProcessingStop",(()=>{this.isLoading=!1}))},destroyed(){this.appDestroyedCallback(this)},components:{XTranslate:p.A,XGlobalSearchOffers:nd}};const od=(0,Lr.A)(id,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-content-inner"},[n("div",{staticClass:"search-wrapper"},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputSearchQuery,expression:"inputSearchQuery"}],ref:"searchInput",staticClass:"fast_search_in form-control search-input search",attrs:{type:"text",autocomplete:"off","data-test-selector":"search-input",placeholder:e.$t("common","Search..."),autofocus:""},domProps:{value:e.inputSearchQuery},on:{input:function(t){t.target.composing||(e.inputSearchQuery=t.target.value)}}}),e.ifIsEmptySearchQuery?n("button",{class:["btn","btn-outline-secondary","btn-icon"],attrs:{type:"button","data-test-selector":"search-button"}},[e.isLoading?n("i",{staticClass:"icon-ic_fluent_spinner_ios_20_regular icon-spin"}):n("i",{staticClass:"icon-ic_fluent_search_24_regular"})]):n("button",{class:["btn","btn-outline-secondary","btn-icon"],attrs:{type:"button","data-test-selector":"clear-button"},on:{click:function(t){return e.clearSearchQuery()}}},[e.isLoading?n("i",{staticClass:"icon-ic_fluent_spinner_ios_20_regular icon-spin"}):n("i",{staticClass:"icon-ic_fluent_dismiss_24_regular"})])])]),n("div",{ref:"searchList",staticClass:"search-list"},[e.ifSearchIsEmpty?e._e():n("x-global-search-offers",{attrs:{"filtered-search-entity":e.filteredSearchEntity,"choice-entity":e.choiceEntity,"data-test-selector":"global-search-offers"}}),e.searchResultsEmptyObject&&e.ifSearchIsEmpty?n("div",[n("div",{staticClass:"help-message",attrs:{"data-test-selector":"help-message"}},[n("h4",[e._v(e._s(e.$t("common","Tip")))]),n("p",[n("x-translate",{attrs:{tag:"false",category:"common",message:"Use the {forward_slash} key or {s_key} key at any time to open this window"},scopedSlots:e._u([{key:"forward_slash",fn:function(){return[n("code",[e._v("/")])]},proxy:!0},{key:"s_key",fn:function(){return[n("code",[e._v("s")])]},proxy:!0}],null,!1,3462791439)})],1),n("br"),n("p",[n("x-translate",{attrs:{tag:"false",category:"common",message:"To show all the available entities to search through, type {symbol} sign in a search field."},scopedSlots:e._u([{key:"symbol",fn:function(){return[n("code",[e._v("@")])]},proxy:!0}],null,!1,3242355553)})],1),n("br"),n("p",[n("x-translate",{attrs:{tag:"false",category:"common",message:"To start the search in the desired entity, type {entityPattern}, e.g. {entityExample}."},scopedSlots:e._u([{key:"entityPattern",fn:function(){return[n("code",[e._v("@entity_name: data")])]},proxy:!0},{key:"entityExample",fn:function(){return[n("code",[e._v("@invoices: 202101000004")])]},proxy:!0}],null,!1,2742624764)})],1),n("br"),n("p",[n("x-translate",{attrs:{tag:"false",category:"common",message:"To search according to id, start a search request from {sharp} sign, then add id num, e.g. {sharpExample}."},scopedSlots:e._u([{key:"sharp",fn:function(){return[n("code",[e._v("#")])]},proxy:!0},{key:"sharpExample",fn:function(){return[n("code",[e._v("#123")])]},proxy:!0}],null,!1,319304241)})],1),n("br"),n("p",[n("x-translate",{attrs:{tag:"false",category:"common",message:"The combination of the methods above for search request is supported, e.g. {example}."},scopedSlots:e._u([{key:"example",fn:function(){return[n("code",[e._v("@customers: #40")])]},proxy:!0}],null,!1,2992101573)})],1)])]):e._e(),e.ifSearchIsEmpty?e._e():n("hr"),e.searchResults.isEmpty?n("div",[n("br"),e.searchResults.error?n("h4",{staticClass:"fast-search-results-block text-center",domProps:{textContent:e._s(e.searchResults.error)}}):n("h4",{staticStyle:{"text-align":"center"},domProps:{textContent:e._s(e.t("common","No results found."))}})]):n("div",{staticClass:"fast-search-results-block"},[n("table",{attrs:{id:"fast_search_result","data-test-selector":"search-table"}},e._l(e.searchResults.items,(function(t,i){var o;return n("tr",{key:"result_item"+i,on:{click:function(n){return e.callHrefFunction(t)}}},[n("td",{class:e.getItemClass(i)},[n("div",{staticClass:"search-heading"},[n("div",{staticClass:"icon-wrap-sm"},[e.empty(t.image)?n("i",{class:(o={},o[t.icon]=!0,o["result-icon"]=!0,o),attrs:{title:t.iconTitle}}):n("img",{attrs:{src:"/images/icons/"+t.image,alt:t.image}})]),n("a",{staticClass:"result-heading",attrs:{href:e.getHref(t)},domProps:{textContent:e._s(t.title)},on:{click:function(e){e.preventDefault()}}})]),t.relationLink?n("div",{staticClass:"result-relationLink",domProps:{textContent:e._s(t.relationLink)}}):e._e(),n("div",{staticClass:"result-sniped",domProps:{innerHTML:e._s(t.snippet)}})])])})),0)])],1)])}),[],!1,null,null,null).exports;var sd=i(35187);const ad={name:"XHelpPanel",data:()=>({title:t("common","Loading.."),content:"",suffixForDescription:"...",lengthForDescription:200,path:"",currentPath:"",history:[],lastSplynxUrl:null,showExportLink:!0,searchQuery:null,searchTimoutId:null,pageSizeForSearch:10,searchResults:{isLoading:!1,count:0,disableButtonMore:!1,isEmpty:!1,items:[]},previousSearchQuery:{}}),methods:{searchTimeoutProcessor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null!==this.searchQuery&&this.searchQuery!==this.previousSearchQuery&&(null!==this.searchTimoutId&&clearTimeout(this.searchTimoutId),this.previousSearchQuery=this.searchQuery,this.searchTimoutId=setTimeout(this.makeSearchAjaxQuery,300,e))},makeSearchAjaxQuery(e){if(this.searchTimoutId=null,this.searchQuery.length<=1)return;1==e&&this.resetVariableSearchResults(),this.searchResults.isLoading=!0;let t=this.searchQuery.replace("#","%23");this.history=[];let n=`${this.getApiUrl()}/pages/search`,i=this;this.history.push({requestUrl:n,data:{query:t,lang:this.lang},method:"GET",search:!0}),this.lastSplynxUrl=n,this.currentPath=`page/search?text=${t}`,""!==this.lang&&$.ajax({url:n,method:"GET",data:{query:t,lang:this.lang,version:this.version},dataType:"json",success(e){i.searchResults.count=e.count,i.searchResults.isEmpty=!0,e.items&&e.items.forEach((e=>{i.searchResults.items.push(e)})),!1===i.showExportLink&&void 0!==window.history&&window.history.pushState({},document.title,i.exportLink),i.searchResults.isLoading=!1},error(e){console.error("Open page ",n,"failed with response:",e),i.currentPath=""}})},clearSearchQuery(){this.searchQuery=null,this.searchTimoutId=null,this.resetVariableSearchResults()},resetVariableSearchResults(){this.searchResults={count:0,disableButtonMore:!1,isEmpty:!1,items:[]}},processKeyboard(e){13===e.keyCode&&this.searchTimeoutProcessor()},back(){if(this.history.pop(),this.history.length>0){let e=this.history.pop();if(1==e.search)return this.searchQuery=e.data.query,void this.searchTimeoutProcessor();this.loadPage(e.requestUrl,e.data,e.method)}else this.loadPageByPath("home")},ltrim:(e,t)=>t.length<1||"string"!=typeof t?t:t[0]===e?t.slice(1):t,rtrim:(e,t)=>t.length<1||"string"!=typeof t?t:t[t.length-1]===e?t.slice(0,t.length-1):t,wikiDomain(){return`${this.rtrim("/",this.apiUrl)}`},getApiUrl(){return`${this.wikiDomain()}/api`},loadPage(e,n,i){let o=this;this.history.push({requestUrl:e,data:n,method:i,search:!1}),this.lastSplynxUrl=e,""!==this.lang&&$.ajax({url:`${e}?lang=${this.lang}&version=${this.version}`,method:i,data:n,dataType:"json",success(e){o.title=e.title,o.content=e.rendered_content,o.currentPath=e.path,o.clearSearchQuery(),!1===o.showExportLink&&void 0!==window.history&&window.history.pushState({},document.title,o.exportLink),o.previousSearchQuery={}},error(n){console.error("Open page ",e,"failed with response:",n),o.title=t("common","Not found!"),o.content=t("common","Page not found!"),o.currentPath=""}})},loadPageByPath(e){let t=this.prepareLinkForLoadingByPath(e);const n=t.indexOf("#");if(-1!==n){if(t.substring(0,n)===this.prepareLinkForLoadingByPath(this.currentPath)){const e=t.substring(n),i=["h1","h2","h3","h4","h5","h6"];for(let t in i){const n=this.$el.querySelector(`${i[t]}${e}`);if(!(0,w.empty)(n))return void n.scrollIntoView({behavior:"smooth"})}return}}let i=`${this.getApiUrl()}/pages/by-path/${t}`;this.loadPage(i,{lang:this.lang,version:this.version},"GET")},prepareLinkForLoadingByPath(e){let t=e.replace(this.version,"").replace(`/${this.lang}/`,"").replace("/en/","");return this.ltrim("/",t)},loadPageByUrl(e){this.history=[];let t=`${this.getApiUrl()}/pages/by-url`;this.loadPage(t,{url:this.ltrim("/",e)},"POST")},isIndexPage(){return"home"===this.currentPath},reopen(){let e=this.getCurrentUrl();e!==this.lastSplynxUrl&&this.loadPageByUrl(e)},getCurrentUrl:()=>xApp.$route.fullPath,goToDocumentation(e){window.open(e)}},computed:{...(0,a.L8)(["documentationConfig"]),isShowBackButton(){return!this.isIndexPage()},isShowExportLink(){return!!this.visibleSearchResults&&!0===this.showExportLink},exportLink(){return`${this.apiUrl}/${this.currentPath}`},apiUrl(){return this.documentationConfig.api_url},lang(){return this.documentationConfig.lang},version(){return this.documentationConfig.version},visibleSearchResults(){return!this.searchResults.isEmpty&&this.isSearchResult},isSearchResult(){return(0,w.empty)(this.searchResults.items)},headerForBlock(){return this.visibleSearchResults?this.title:this.searchResults.count>0?this.t("common","Found {count} matches;",{count:this.searchResults.count}):this.t("common","Found 0 matches, try changing the query")}},mounted(){this.path?this.loadPageByPath(this.path):this.loadPageByUrl(this.getCurrentUrl()),document.getElementById("search_by_user_documentation").addEventListener("keydown",this.processKeyboard)},components:{XBootstrapSpinner:Fc.A,XDocumentationRender:sd.A}};const rd=(0,Lr.A)(ad,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-content-inner",attrs:{id:"search_by_user_documentation"}},[n("p",{domProps:{innerHTML:e._s(e.$t("common","Use the {d_key} key at any time to open this window",{d_key:"<code>d</code>"}))}}),n("br"),n("div",{staticClass:"search-wrapper"},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],ref:"searchInput",staticClass:"fast_search_in form-control search-input search",attrs:{type:"text",autocomplete:"off",placeholder:e.$t("common","Search..."),autofocus:""},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),n("button",{class:["btn","btn-outline-secondary","btn-icon"],attrs:{type:"button"},on:{click:function(t){return e.searchTimeoutProcessor(1)}}},[e.searchResults.isLoading?n("i",{staticClass:"fa fa-circle-o-notch fa-spin"}):n("i",{staticClass:"icon-ic_fluent_search_24_regular"})])])]),n("div",{staticClass:"admin-help-panel-header"},[n("strong",[e._v(" "+e._s(e.headerForBlock)+" ")]),n("a",{directives:[{name:"show",rawName:"v-show",value:e.isShowExportLink,expression:"isShowExportLink"}],staticClass:"admin-help-link-btn btn btn-outline-secondary btn-icon pull-right",attrs:{target:"_blank",title:e.t("common","Open documentation in new window")},on:{click:function(t){return e.goToDocumentation(e.exportLink)}}},[n("i",{staticClass:"icon-ic_fluent_window_new_24_regular"})]),n("a",{directives:[{name:"show",rawName:"v-show",value:e.isShowBackButton,expression:"isShowBackButton"}],staticClass:" btn btn-outline-secondary btn-icon-text pull-right me-4",attrs:{href:"javascript:void(0)"},on:{click:e.back}},[n("i",{staticClass:"icon-ic_fluent_arrow_hook_up_left_24_regular"}),e._v(" "+e._s(e.t("common","back"))+" ")])]),e.visibleSearchResults?n("div",[e.searchResults.isLoading?n("div",{staticClass:"loader"},[n("x-bootstrap-spinner",{attrs:{size:"lg"}})],1):n("x-documentation-render",{attrs:{content:e.content,"allow-redirect":!1},on:{"load-by-path":e.loadPageByPath}})],1):n("div",[n("div",{staticClass:"admin-help-content"},e._l(e.searchResults.items,(function(t,i){return n("div",{key:i,staticClass:"card search-page-block",on:{click:function(n){return e.loadPageByPath(t.path)}}},[n("div",{staticClass:"search-block-header",domProps:{innerHTML:e._s(t.title)}})])})),0)])])}),[],!1,null,null,null).exports;const ld={name:"XSupportPanel",props:{src:String}};const cd=(0,Lr.A)(ld,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-content-inner"},[n("iframe",{attrs:{id:"splynx-feedback-widget-frame",width:"100%",src:e.src,frameborder:"0"}})])}),[],!1,null,null,null).exports;const dd={name:"XNotificationsPanel",data:()=>({}),methods:{doAction(e){let t=!1;if("string"==typeof e&&e.startsWith("function")&&(t=!0),"function"!=typeof e&&!t)return switch_page(e),this.hideSidebar(),!0;(e=(0,w.parseAnonymousSwitchPage)(e))(null,!0),this.hideSidebar()},removeNotification(e){let t=e.currentTarget.getAttribute("data-id"),n=Array.from(this.notificationsList),i=n.length-1-t;n.splice(i,1),this.changeNotificationList(n)},clearNotifications(){this.changeNotificationList([])},...(0,a.i0)("notifications",["changeNotificationList"]),...(0,a.i0)("sidebar",["hideSidebar"])},computed:{notificationsCount(){return this.notificationsList.length},showMarkLink(){return!!this.notificationsList.length},...(0,a.L8)("notifications",["notificationsList"])}},ud=dd;const pd=(0,Lr.A)(ud,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-content-inner"},[n("transition",{attrs:{name:"fade"}},[e.showMarkLink?n("div",{staticClass:"row justify-end mb-16",attrs:{id:"mark_all_read","data-test-selector":"mark-link"}},[n("div",{staticClass:"col-md-12 text-end"},[n("a",{staticClass:"mark-all-read",attrs:{href:"javascript:void(0)","data-test-selector":"mark-all-read"},on:{click:e.clearNotifications}},[e._v(" "+e._s(e.$t("common","Mark all as read"))+" ")])])]):e._e()]),n("transition",{attrs:{name:"fade"}},[e.notificationsCount?e._e():n("div",{staticClass:"no-notification",attrs:{"data-test-selector":"no-notification"}},[e._v(" "+e._s(e.$t("common","There is no notification in here"))+" ")])]),n("div",{staticClass:"list-group list-group-alt",attrs:{id:"notification-list-mobile"}},[n("transition-group",{attrs:{name:"fade"}},e._l(e.notificationsList.slice().reverse(),(function(t,i){return n("div",{key:"key-"+i,staticClass:"notification-item"},["text"!==t.type?n("i",{class:{"icon-ic_fluent_info_12_regular color-info":"info"===t.type,"icon-ic_fluent_checkmark_circle_24_regular color-success":"success"===t.type,"icon-ic_fluent_warning_24_regular color-warning":"warning"===t.type,"icon-ic_fluent_error_circle_24_regular color-danger":"error"===t.type}}):e._e(),n("div",{staticClass:"activity-item"},[n("div",{class:{activity:!0,"without-icon":"text"===t.type,clickable:!!t.action},domProps:{innerHTML:e._s(t.message)},on:{click:function(n){t.action&&e.doAction(t.action)}}}),n("div",{staticClass:"notification-remove",attrs:{"data-id":i},on:{click:function(t){return e.removeNotification(t)}}},[n("i",{staticClass:"icon-ic_fluent_dismiss_24_regular"})])])])})),0)],1)],1)}),[],!1,null,null,null).exports;const hd={name:"XDeploymentGuide",components:{XPreloaderBlock:vl.default},data(){const e=JSON.parse(window.spl_config.documentationConfig);return{loading:!1,defaultLinks:[{title:this.$t("common","Configure the system"),url:"/admin/config",docTitle:this.$t("common","Read about how configure the system"),docUrl:`${e.doc_url}configuration`,permissionKey:"config"},{title:this.$t("common","Configure network"),url:"/admin/networking/routers/list",docTitle:this.$t("common","Read about how configure network"),docUrl:`${e.doc_url}networking`,permissionKey:"routers_list"},{title:this.$t("common","Add tariff plan"),url:"/admin/tariffs/internet--add",docTitle:this.$t("common","Read about how add tariff plan"),docUrl:`${e.doc_url}configuring_tariff_plans`,permissionKey:"internet_tariffs_add"},{title:this.$t("common","Add customer"),url:"/admin/customers/add",docTitle:this.$t("common","Read about how add customer"),docUrl:`${e.doc_url}customer_management/add_new_customer`,permissionKey:"customers_add"},{title:this.$t("common","Add router"),url:"/admin/networking/routers/add",docTitle:this.$t("common","Read about how add router"),docUrl:`${e.doc_url}networking/routers_settings`,permissionKey:"routers_add"}]}},created(){this.loading=!0,this.loadPermissions().then((()=>{this.loading=!1})).catch((e=>{console.error(e),this.loading=!1}))},computed:{...(0,a.L8)("on_boarding",["permissionsMap"]),links(){return this.defaultLinks.filter((e=>isset(this.permissionsMap,e.permissionKey)&&this.permissionsMap[e.permissionKey]))}},methods:{clickHandler(e){this.hideSidebar(),switch_page(e)},clickDocHandler(e){window.open(e,"_blank")},hideGuide(){this.hideDeploymentGuide(),this.hideSidebar()},...(0,a.i0)("sidebar",["hideSidebar"]),...(0,a.i0)("on_boarding",["hideDeploymentGuide","loadPermissions"])}};const fd=(0,Lr.A)(hd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-content-inner"},[n("x-preloader-block",{attrs:{loading:e.loading}},[n("h4",{directives:[{name:"show",rawName:"v-show",value:e.links.length>0,expression:"links.length > 0"}],attrs:{"data-test-selector":"steps"}},[e._v(" "+e._s(e.$t("common","Recommended steps"))+" ")]),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.links.length>0,expression:"links.length > 0"}],staticClass:"list-unstyled mb-12",attrs:{"data-test-selector":"links"}},e._l(e.links,(function(t,i){return n("li",{key:i,staticClass:"mt-12"},[n("a",{staticClass:"btn btn-link",attrs:{href:t.url,title:t.title},domProps:{textContent:e._s(t.title)},on:{click:function(n){return n.preventDefault(),e.clickHandler(t.url)}}}),n("a",{directives:[{name:"popover",rawName:"v-popover:tooltip.top",value:t.docTitle,expression:"link.docTitle",arg:"tooltip",modifiers:{top:!0}}],staticClass:"icon-wrap color-secondary doc-handler",attrs:{href:t.docUrl,target:"_blank"},on:{click:function(n){return n.preventDefault(),e.clickDocHandler(t.docUrl)}}},[n("i",{staticClass:"icon-ic_fluent_book_information_24_regular"})])])})),0),n("h4",[e._v(e._s(e.$t("common","Additional steps")))]),n("ul",{staticClass:"list-unstyled mb-12 mt-12"},[n("li",[n("a",{staticClass:"btn btn-link doc-handler",attrs:{href:"https://deploy.splynx.com/",target:"_blank"},on:{click:function(t){return t.preventDefault(),e.clickDocHandler("https://deploy.splynx.com/")}}},[e._v(" "+e._s(e.$t("common","Watch our tutorial videos for ease of deployment"))+" ")])])]),n("div",{staticClass:"video"},[n("iframe",{attrs:{src:"https://www.youtube.com/embed/UtE4oifGqZ8",frameborder:"0",width:"100%",height:"275px",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),n("ul",{staticClass:"list-unstyled mb-12 mt-12"},[n("li",[n("a",{staticClass:"btn btn-link doc-handler",attrs:{href:"https://wiki.splynx.com/",target:"_blank"},on:{click:function(t){return t.preventDefault(),e.clickDocHandler("https://wiki.splynx.com/")}}},[e._v(" "+e._s(e.$t("common","Read detailed product documentation"))+" ")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("a",{staticClass:"btn btn-primary pull-right hide-guide",attrs:{href:"",title:e.$t("common","Don't show this guide again")},domProps:{textContent:e._s(e.$t("common","Don't show this guide again"))},on:{click:e.hideGuide}})])])])],1)}),[],!1,null,null,null).exports;var md=i(55695),gd=i(36660);const vd={name:"XHeaderList",data:()=>({}),mounted(){for(const e of document.querySelectorAll("[data-hotkey]"))(0,md.ai)(e);this.mobileWidth||this.$nextTick((()=>{let e=this.$parent?.$parent?.$children?.find((e=>"side-wrap"===e.$el.className));this.addRefs(this.$refs),this.addRefs(e?.$refs),this.showDeploymentGuide()})),splynx_event_bus.on("after_switch_page",this.closeDropdown),this.addTask()},methods:{closeDropdown(){$(".splynx-header .dropdown-toggle").hasClass("show")&&$(".splynx-header .dropdown-toggle.show").dropdown("toggle")},loadGlobalSearch(){let e={title:t("common","Search"),props:{availableSearchEntityList:this.searchEntities,appMountedCallback:e=>{e.setFocusIntoSearchInput(),document.addEventListener("keydown",e.processKeyboard)},appDestroyedCallback:e=>{document.removeEventListener("keydown",e.processKeyboard)},openSearch:this.openByShortcut},component:od};this.showSidebar(e)},loadSupportPanel(){let e={title:t("common","Splynx Support (New ticket)"),props:{src:"https://billing.splynx.com/admin/feedback?widgetType=embedded&formTitle=Support%20and%20help&submitTitle=Send&submitThanks=Thanks%20for%20feedback&attachFile=1"},component:cd};this.showSidebar(e)},loadHelpPanel(){let e={title:t("common","Documentation"),props:{src:"/admin/help",ref:"contentComponent",lang:window.spl_config.language,showExportLink:!0},component:rd};this.showSidebar(e)},loadNotificationsPanel(){let e={title:t("common","Notifications"),props:{},component:pd};this.showSidebar(e)},loadDeploymentGuide(){let e={title:t("common","Deployment guide"),subtitle:t("common","Recommended steps for a successful deployment."),props:{},component:fd};this.showSidebar(e)},logoutClickHandler(){window.logout("/admin/logout")},toProfile(){this.$router.push("/admin/profile")},closeMobileMenu(){this.showMobileMenu(!1)},addTask(){let e={component:gd.default};window.showSchedulingTaskSidebar=(t,n)=>{t.preventDefault(),t.stopPropagation();let i,o=n&&n.id?`#${n.id}`:"";i=n&&n.title?`${n.title} ${o}`:n&&n["parent-task-id"]?this.$t("scheduling","Add subtask"):this.$t("scheduling","Add task");let s=Object.assign(e,{props:n},{title:i});this.showSidebar(s)}},clickHandler:e=>e.onclick?($(".dropdown-toggle.show").dropdown("toggle"),new Function(e.onclick)()):(switch_page(e.url),!1),...(0,a.i0)("menu_store",["showMobileMenu"]),...(0,a.i0)("sidebar",["showSidebar"]),...(0,a.i0)("on_boarding",["addRefs","showDeploymentGuide"])},computed:{isShowHelp(){return"super-administrator"===this.admin.role_name},isShowTimeout(){return parseInt(this.admin.timeout)>0},isHaveAdmin(){return!(0,w.empty)(this.admin)},isHeaderShortcuts(){return!(0,w.empty)(this.headerShortcuts)&&this.headerShortcuts.length>0},...(0,a.L8)(["admin","headerShortcuts"]),...(0,a.L8)("search",["searchEntities"]),...(0,a.L8)("notifications",["notificationsList"]),...(0,a.L8)("on_boarding",["showDeploymentGuideButton"]),...(0,a.L8)("menu_store",["mobileWidth"])},components:{}},bd=vd;const yd=(0,Lr.A)(bd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{ref:"headerNavigationHolder",staticClass:"navigation"},[!e.mobileWidth&&e.showDeploymentGuideButton?n("li",[n("button",{staticClass:"btn btn-primary",attrs:{id:"buttonDeploymentGuide",type:"button",title:e.$t("common","Deployment guide")},domProps:{textContent:e._s(e.$t("common","Deployment guide"))},on:{click:e.loadDeploymentGuide}})]):e._e(),e.mobileWidth?e._e():n("li",{directives:[{name:"show",rawName:"v-show",value:e.isHeaderShortcuts,expression:"isHeaderShortcuts"}],staticClass:"dropdown",attrs:{id:"quick-addition","data-test-selector":"quick-addition",title:e.$t("common","Quick addition")}},[e._m(0),n("div",{staticClass:"dropdown-menu dropdown-menu-end"},e._l(e.headerShortcuts,(function(t,i){return n("div",{key:i,staticClass:"dropdown-item"},[n("a",{attrs:{href:t.url,title:t.title},domProps:{textContent:e._s(t.title)},on:{click:function(n){return n.preventDefault(),e.clickHandler(t)}}})])})),0)]),n("li",[n("a",{attrs:{"data-hotkey":"/,s",title:e.$t("common","Search"),href:"javascript:void(0)","data-test-selector":"search"},on:{click:function(t){return e.loadGlobalSearch()}}},[n("i",{staticClass:"icon-ic_fluent_search_24_regular"})])]),e.isShowHelp?n("li",{attrs:{id:"help-dropdown"}},[n("a",{attrs:{href:"javascript:void(0)",title:e.$t("common","Help and Support"),"data-test-selector":"help-and-support"},on:{click:function(t){return e.loadSupportPanel()}}},[n("i",{staticClass:"icon-ic_fluent_chat_help_24_regular"})])]):e._e(),n("li",{attrs:{id:"admin_right_help_panel_open_button"}},[n("a",{attrs:{href:"javascript:void(0);","data-hotkey":"d",title:e.$t("common","Documentation"),"data-test-selector":"documentation"},on:{click:function(t){return e.loadHelpPanel()}}},[n("i",{staticClass:"icon-ic_fluent_book_information_24_regular"})])]),n("li",{staticClass:"notification-main"},[n("a",{attrs:{id:"notifications",href:"javascript:void(0);",title:e.$t("common","Notifications"),"data-test-selector":"notifications"},on:{click:function(t){return e.loadNotificationsPanel()}}},[n("i",{staticClass:"icon-ic_fluent_alert_24_regular"}),n("div",{staticClass:"noty-manager-bubble",style:{opacity:e.notificationsList.length?"1":"0"}},[e._v(e._s(e.notificationsList.length)+" ")])]),n("div",{ref:"notifications",attrs:{id:"notification-list"}})]),e.mobileWidth?e._e():n("li",{staticClass:"dropdown"},[n("a",{staticClass:"dropdown-toggle custom-chevron",attrs:{"data-bs-toggle":"dropdown",href:"javascript:void(0)","data-test-selector":"admin-dropdown-button"}},[n("span",{staticClass:"avatar-admin"},[""!==e.admin.photo_url?n("img",{attrs:{src:e.admin.photo_url,alt:e.admin.login}}):n("i",{staticClass:"icon-ic_fluent_person_24_regular"})]),n("span",{staticClass:"name",domProps:{innerHTML:e._s(e.admin.name)}})]),n("div",{staticClass:"dropdown-menu admin-dropdown dropdown-menu-end",attrs:{"data-test-selector":"admin-dropdown"}},[n("div",{staticClass:"admin-dropdown-item"},[n("span",{staticClass:"avatar-admin"},[""!==e.admin.photo_url?n("img",{attrs:{src:e.admin.photo_url,alt:e.admin.login}}):n("i",{staticClass:"icon-ic_fluent_person_24_regular"})]),n("span",{staticClass:"admin-name"},[n("span",{staticClass:"name",domProps:{innerHTML:e._s(e.admin.login)}}),n("span",{staticClass:"status",domProps:{innerHTML:e._s(e.admin.role_title)}})])]),n("div",{staticClass:"dropdown-item"},[n("a",{attrs:{href:"/admin/profile","data-test-selector":"admin-profile"}},[e._m(1),e._v(" "+e._s(e.$t("profile","Profile"))+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTimeout,expression:"isShowTimeout"}],staticClass:"dropdown-item"},[n("span",[e._v(" "+e._s(e.$t("site","Logout after"))+": "),n("span",{attrs:{id:"auto_logout"}},[e._v(e._s(e.admin.timeout))])])]),n("div",{staticClass:"dropdown-item"},[n("a",{attrs:{"data-test-selector":"admin-logout"},on:{click:function(t){return t.preventDefault(),e.logoutClickHandler.apply(null,arguments)}}},[e._m(2),e._v(" "+e._s(e.$t("site","Logout"))+" ")])])])]),e.mobileWidth?n("li",[n("a",{attrs:{"data-test-selector":"profile"},on:{click:function(t){return t.preventDefault(),e.toProfile.apply(null,arguments)}}},[e._m(3)])]):e._e(),e.mobileWidth?n("li",{attrs:{"data-test-selector":"logout"},on:{click:function(t){return t.preventDefault(),e.logoutClickHandler.apply(null,arguments)}}},[e._m(4)]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"dropdown-toggle",attrs:{href:"javascript:void(0)",role:"button","data-bs-toggle":"dropdown"}},[t("i",{staticClass:"icon-ic_fluent_add_24_regular"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon-wrap"},[t("i",{staticClass:"icon-ic_fluent_person_24_regular"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon-wrap"},[t("i",{staticClass:"icon-ic_fluent_sign_out_24_regular"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon-wrap"},[t("i",{staticClass:"icon-ic_fluent_person_24_regular"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("span",{staticClass:"icon-wrap"},[t("i",{staticClass:"icon-ic_fluent_sign_out_24_regular"})])])}],!1,null,"1d27804f",null).exports;const wd={name:"XFooter",props:{footer:{type:String,default:"Powered by Splynx"}}};const _d=(0,Lr.A)(wd,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"splynx-footer",domProps:{innerHTML:e._s(e.footer)}})}),[],!1,null,null,null).exports;const Td=i(16845).default;const Ed={name:"XSidebar",data:()=>({hideCallback:"",pointerUpTarget:null,pointerDownTarget:null}),mounted(){window.addEventListener("keydown",this.processKeyboard)},destroyed(){window.removeEventListener("keydown",this.processKeyboard)},methods:{...(0,a.i0)("sidebar",["hideSidebar"]),onHide(e){let{callback:t,context:n}=e;this.hideCallback=t.bind(n)},hideOpenedSidebar(e){if("Range"===document.getSelection().type)return e?.stopPropagation(),e?.preventDefault(),!1;e.target===this.$refs["sidebar-wrapper"]&&this.hideSidebar(this.hideCallback)},processKeyboard(e){27===e.keyCode&&this.hideSidebar(this.hideCallback)}},computed:{...(0,a.L8)("sidebar",["sidebarState","sidebarOptions"])}};const Sd=(0,Lr.A)(Ed,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sidebarState?n("div",{ref:"sidebar-wrapper",staticClass:"sidebar-wrapper",attrs:{role:"group"},on:{click:e.hideOpenedSidebar}},[n("transition",{attrs:{name:"slide-fade"}},[n("div",{staticClass:"sidebar",attrs:{role:"dialog"}},[n("button",{staticClass:"btn-close btn-icon-sm",attrs:{type:"button"},on:{click:function(t){return e.hideSidebar(e.hideCallback)}}}),n("div",{staticClass:"sidebar-header"},[n("h2",{domProps:{innerHTML:e._s(e.sidebarOptions.title)}}),n("p",{domProps:{innerHTML:e._s(e.sidebarOptions.subtitle)}})]),n("div",{staticClass:"sidebar-content"},[n(e.sidebarOptions.component,e._b({tag:"component",on:{"set-hide-callback":e.onHide}},"component",e.sidebarOptions.props,!1))],1)])])],1):e._e()}),[],!1,null,null,null).exports;const Ad={name:"XOnboardingStepper",methods:{makeSelectedAreaStyles:e=>`left:${e.left}px;`+`top:${e.top}px;`+`width:${e.width}px;`+(e.height?`height:${e.height}px;`:""),buttonAction(e){"function"==typeof e&&e(),"function"==typeof this.currentStep.callback&&this.currentStep.callback()}},computed:{makeModalStyles(){let{left:e,top:t,width:n,height:i}=this.currentStep.message.offset,o=`left:${e}px;`,s=`top:${t}px;`;return(this.currentStep.message.offset.align??!1)&&(s="top: 50vh;",o="left: 50%; transform: translate(-50%,-50%);"),o+s+`width:${n}px;`+`min-height:${i}px;`+`max-width:${window.innerWidth-e-24}px;`},...(0,a.L8)("on_boarding",["modalShow","currentStep"])}};const Cd=(0,Lr.A)(Ad,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.modalShow?n("div",{staticClass:"onb-wrap"},[n("div",{staticClass:"onb-overflow"}),e._l(e.currentStep.selectedElements,(function(t,i){return[n("div",{key:i,class:"selected-area "+t.styles,style:e.makeSelectedAreaStyles(t.offset)},[t.parentClass?n("div",{class:t.parentClass},[n("div",{domProps:{innerHTML:e._s(t.element.outerHTML)}})]):n("div",{domProps:{innerHTML:e._s(t.element.outerHTML)}})])]})),n("div",{staticClass:"onb-modal",style:e.makeModalStyles},[n("div",{staticClass:"onb-title",domProps:{innerHTML:e._s(e.currentStep.message.title)}}),n("div",{staticClass:"onb-content"},[n("span",{staticClass:"subtitle",domProps:{innerHTML:e._s(e.currentStep.message.subtitle)}}),e._v(" "),n("span",{staticClass:"text",domProps:{innerHTML:e._s(e.currentStep.message.text)}}),e.currentStep.message.video&&e.currentStep.message.video.length>0?n("div",{staticClass:"video"},[n("iframe",{attrs:{src:e.currentStep.message.video,frameborder:"0",width:e.currentStep.message.videoWidth||"400px",height:"225px",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):e._e()]),n("div",{staticClass:"onb-footer"},e._l(e.currentStep.message.buttons,(function(t,i){return n("button",{key:i,class:[t.buttonClassNames,{"ms-8":i>0}],attrs:{type:"button"},domProps:{innerHTML:e._s(t.buttonText)},on:{click:function(n){return n.preventDefault(),e.buttonAction(t.buttonAction)}}})})),0)])],2):e._e()}),[],!1,null,null,null).exports;const kd={name:"ChatBoxButton",mixins:[{data:()=>({throttleTimers:{}}),methods:{throttle(e,t,n){this.throttleTimers[n]||(this.throttleTimers[n]=setTimeout((()=>{e(),delete this.throttleTimers[n]}),t))}},beforeDestroy(){for(let e in this.throttleTimers)clearTimeout(this.throttleTimers[e])}}],props:{counter:Number},data:()=>({move:0,observer:null}),mounted(){splynx_event_bus.on("after_switch_page",this.handleButtonOverlappingCheck),window.removeEventListener("scroll",this.handleButtonOverlappingCheck),window.addEventListener("scroll",this.handleButtonOverlappingCheck),this.handleButtonOverlappingCheck()},methods:{handleButtonOverlappingCheck(){this.throttle((()=>{const e=100,t={left:window.innerWidth-39-60,right:window.innerWidth-39,top:window.innerHeight-16-60,bottom:window.innerHeight-16};let n=0;const i=document.querySelectorAll(["button:not(.chat-send):not(.ms-choice)",'input[type="submit"]',"a.btn",".messages-scroll-down-button","#spl_admins_on_page_wrapper"].join(", "));function o(e,t){return!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function s(e,t){const n=e.right-t.left+10,i=t.right-e.left+10,o=t.bottom-e.top+10,s=e.bottom-t.top+10;return Math.max(n,i,o,s)}if(i.forEach((e=>{const i=e.getBoundingClientRect();if(o(t,i)){const e=s(t,i);e>n&&(n=e)}})),n>e&&(n=e),n>0){let a=0,r={...t,top:t.top-n,bottom:t.bottom-n};i.forEach((e=>{const t=e.getBoundingClientRect();if(o(r,t)){const e=s(r,t);e>a&&(a=e)}})),a>0&&(n+=a,n>e&&(n=e)),this.move=n}else this.move=0}),1e3,"moveButton")}}};const xd=(0,Lr.A)(kd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-box-circle",style:{transform:"translateY(-"+e.move+"px)",transition:"transform .2s ease"}},[n("i",{staticClass:"icon-ic_fluent_chat_multiple_24_regular"}),e._t("counter",null,{value:e.counter})],2)}),[],!1,null,null,null).exports;const $d={name:"ChatBoxHeader",data:()=>({filterOpened:!1}),mounted(){setTimeout((()=>{$("#admin_messengers_chatbox_filter_assignee").attr("style","display: none !important"),$("#admin_messengers_chatbox_filter_assignee + div > .ms-choice").attr("style","display: none !important"),$(".ms-select-all").hide(),$(".ms-search").hide()}),100)},methods:{...(0,a.i0)("chatbox",["setChatBoxFilter","setChatBoxSoundNotificationsActive"]),toggleSoundNotifications(){this.setChatBoxSoundNotificationsActive(!this.soundNotificationsActive)},onInput(e){this.setChatBoxFilter(e)},onFilterClick(){this.filterOpened?this.closeSelect():this.openSelect()},openSelect(){setTimeout((()=>{$("#admin_messengers_chatbox_filter_assignee").multipleSelect("open")}))},closeSelect(){setTimeout((()=>{$("#admin_messengers_chatbox_filter_assignee").multipleSelect("close")}))}},computed:{...(0,a.L8)("chatbox",["filter","soundNotificationsActive"])},components:{XComplexInput:el.D}};const Id=(0,Lr.A)($d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-box-header"},[n("h4",[e._v(e._s(e.$t("messengers","Chats")))]),n("div",{staticClass:"chat-box-actions"},[n("a",{staticClass:"chat-box-action",attrs:{"data-test-selector":"create-chat",href:"javascript:void(0)",title:e.$t("messengers","Create chat")},on:{click:function(t){return e.$emit("create")}}},[n("i",{staticClass:"icon-ic_fluent_add_circle_24_regular"})]),n("a",{staticClass:"chat-box-action",attrs:{href:"javascript:void(0)",title:e.$t("messengers","Quick access")}},[n("i",{staticClass:"icon-ic_fluent_filter_24_regular",on:{click:e.onFilterClick}}),n("x-complex-input",{ref:"select",attrs:{value:e.filter,"data-test-selector":"filter-input",type:"multiple-select",params:{options:{id:"admin_messengers_chatbox_filter_assignee",options:{0:e.$t("messengers","Assigned to me"),1:e.$t("messengers","Unassigned")}}}},on:{close:function(t){e.filterOpened=!1},open:function(t){e.filterOpened=!0},input:e.onInput}})],1),n("a",{staticClass:"chat-box-action",attrs:{"data-test-selector":"sound-notifications-active-state",href:"javascript:void(0)",title:e.soundNotificationsActive?e.$t("messengers","Mute notifications"):e.$t("messengers","Unmute notifications")},on:{click:e.toggleSoundNotifications}},[n("i",{class:[e.soundNotificationsActive?"icon-ic_fluent_speaker_2_24_regular":"icon-ic_fluent_speaker_off_24_regular"]})]),n("a",{staticClass:"chat-box-action",attrs:{href:"javascript:void(0)",title:e.$t("messengers","Minimize")},on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"icon-ic_fluent_line_horizontal_1_20_regular"})])])])}),[],!1,null,null,null).exports;const Od={name:"ChatBoxAttachmentPreview",props:{attachment:Object}};const Ld=(0,Lr.A)(Od,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.attachment?n("div",{staticClass:"chat-box-attachment-preview"},[e.attachment["data-is-pws"]&&"image"===e.attachment["data-pws-type"]?[n("img",{attrs:{src:e.attachment.link,alt:e.attachment["data-pws-type"]}}),n("p",[e._v(e._s(e.$t("messengers","Image")))])]:[n("p",[e._v(e._s(e.attachment.name))])]],2):e._e()}),[],!1,null,null,null).exports,Rd={name:"ChatBoxItem",props:{messengerName:String,messengerId:[Number,String],customerId:[Number,String],customerLeadName:String,senderType:String,chatId:[Number,String],title:String,phone:String,preview:String,attachments:[Array,Object],date:String,assignee:[Number,String],counter:[Number,String]},computed:{viewData(){return{chatId:this.chatId,customerId:this.customerId,isUnknownSender:!this.customerId,senderType:this.senderType,messengerId:this.messengerId,messengerName:this.messengerName,title:this.title}}},components:{ChatBoxAttachmentPreview:Ld}};const Nd=(0,Lr.A)(Rd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.chatId,staticClass:"chat-box-item",on:{click:function(t){return e.$emit("view",e.viewData)}}},[n("div",{staticClass:"chat-box-item-date"},[e._v(" "+e._s(e.date)+" ")]),n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"chat-box-item-icon"},[n("img",{attrs:{src:"/images/messengers/chat-box/"+e.messengerName+".svg",alt:""}}),n("transition",{attrs:{name:"fade"}},[e.counter>0?n("small",{attrs:{"data-test-selector":"counter"}},[e._v(" "+e._s(e.counter)+" ")]):e._e()])],1),n("div",{staticClass:"chat-box-item-info"},[n("h5",[e._v(" "+e._s(e.title||e.phone)+" ")]),e.preview?n("p",[e._v(" "+e._s(e.preview)+" ")]):e._e(),n("chat-box-attachment-preview",{attrs:{"data-test-selector":"last-attachment",attachment:e.attachments[0]}})],1)]),n("div",{staticClass:"flex-grow mt-8 w-100"},[e.assignee?e._e():n("label",{staticClass:"badge bg-secondary"},[e._v(e._s(e.$t("messengers","Unassigned")))])])])}),[],!1,null,null,null).exports,Dd={name:"ChatsList",props:{loading:Boolean,chats:Array,unassignedFilter:Boolean},methods:{onBeforeEnter(e){e.style.opacity=0,e.style.transform="translateY(30px)"},onEnter(e,t){const n=parseInt(e.dataset.index,10);setTimeout((()=>{e.style.transition="all 0.5s ease",e.style.opacity=1,e.style.transform="translateY(0)",t()}),100*(n+1))},onBeforeLeave(e){e.style.opacity=1,e.style.transform="translateY(0)"},onLeave(e,t){e.style.transition="all 0.5s ease",e.style.opacity=0,e.style.transform="translateY(-30px)",setTimeout((()=>{t()}),500)},viewChatRoute(e){let{chatId:t,customerId:n,title:i,isUnknownSender:o,messengerId:s,messengerName:a,senderType:r}=e;this.$emit("view-chat",{chatId:t,customerId:n,title:i,isUnknownSender:o,messengerId:s,messengerName:a,senderType:r})},createChatRoute(){this.$emit("create")},seeAllInMessengers(){switch_page("/admin/support/messengers?tab=all_senders_tab").then((()=>{this.$closeChatBox()}))}},components:{XBootstrapSpinner:fl.default,ChatBoxItem:Nd,XTranslate:p.A,ChatBoxHeader:Id}};const Md=(0,Lr.A)(Dd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-box-list-row"},[n("chat-box-header",{on:{close:function(t){return e.$closeChatBox()},create:e.createChatRoute}}),n("div",{staticClass:"chat-box-content-grow chat-box-scroll"},[!e.loading&&e.chats.length?n("div",[e.loading?n("div",{staticClass:"spinner-wrapper mt-0"},[n("x-bootstrap-spinner",{attrs:{size:"md"}})],1):e._e(),e.loading?e._e():[n("transition-group",{attrs:{name:"list",tag:"div",css:!1},on:{"before-enter":e.onBeforeEnter,"before-leave":e.onBeforeLeave,enter:e.onEnter,leave:e.onLeave}},e._l(e.chats,(function(t,i){return n("div",{key:i,attrs:{"data-index":i}},[n("chat-box-item",{key:i,attrs:{"messenger-name":t.messenger_name,"messenger-id":t.messenger_id,"customer-id":t.customer_id,"chat-id":t.id,title:t.customer&&t.customer.name,phone:t.phone,"sender-type":t.sender_type,attachments:t.message.attachments||[],preview:t.message.body,assignee:t.assign_id,date:t.message.created,counter:t.chat_unread_messages},on:{view:e.viewChatRoute}})],1)})),0)]],2):e._e(),e.chats.length||e.loading?e._e():n("div",{staticClass:"chat-box-empty-list chat-box-content-grow"},[e.unassignedFilter?n("x-translate",{attrs:{tag:"false",message:"There are no unassigned chats at the moment. You can {my} or browse {all}."},scopedSlots:e._u([{key:"my",fn:function(){return[n("a",{attrs:{href:"javascript:void(0)","data-test-selector":"view-assigned-chats"},on:{click:function(t){return e.$emit("view-assigned")}}},[e._v(e._s(e.$t("messengers","view your chats")))])]},proxy:!0},{key:"all",fn:function(){return[n("a",{attrs:{href:"javascript:void(0)","data-test-selector":"browse-all-chats"},on:{click:e.seeAllInMessengers}},[e._v(e._s(e.$t("messengers","browse all available conversations")))])]},proxy:!0}],null,!1,122314053)}):n("x-translate",{attrs:{tag:"false",message:"No active chats are currently assigned to you. You can either {create} or view {all}"},scopedSlots:e._u([{key:"create",fn:function(){return[n("a",{attrs:{href:"javascript:void(0)","data-test-selector":"create-new-chat"},on:{click:e.createChatRoute}},[e._v(e._s(e.$t("messengers","create a new chat")))])]},proxy:!0},{key:"all",fn:function(){return[n("a",{attrs:{href:"javascript:void(0)","data-test-selector":"see-all-chats"},on:{click:e.seeAllInMessengers}},[e._v(e._s(e.$t("messengers","all available conversations")))])]},proxy:!0}],null,!1,3616303650)})],1)]),n("div",{staticClass:"chat-box-all-link"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:e.seeAllInMessengers}},[e._v(" "+e._s(e.$t("messengers","See all in Messengers"))+" ")])])],1)}),[],!1,null,null,null).exports;const Pd={name:"ChatBoxCreateHead",props:{messengerName:String},computed:{messengerTitle(){return this.messengerName?`&nbsp;${this.messengerName}`:""}}};const Fd=(0,Lr.A)(Pd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head-wrapper d-flex p-16 align-items-center justify-content-between"},[n("a",{staticClass:"chatbox-back me-4",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("back")}}},[n("i",{staticClass:"icon-ic_fluent_arrow_left_24_regular"})]),n("div",{staticClass:"d-flex align-items-center"},[e.messengerTitle?n("h4",{domProps:{innerHTML:e._s(e.$t("messengers","Create new{messengerTitle} chat",{messengerTitle:e.messengerTitle}))}}):n("h4",[e._v(" "+e._s(e.$t("messengers","Create new conversation"))+" ")])]),n("a",{staticClass:"chat-box-action",attrs:{href:"javascript:void(0)",title:e.$t("messengers","Minimize")},on:{click:function(t){return e.$closeChatBox()}}},[n("i",{staticClass:"icon-ic_fluent_line_horizontal_1_20_regular"})])])}),[],!1,null,null,null).exports;const Bd={name:"ChatBoxMessengerItem",props:{title:String,name:String},computed:{messengerFirstLetter(){return this.messengerName[0].toUpperCase()}}};const Hd=(0,Lr.A)(Bd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-box-messenger-item d-flex align-items-center"},[n("div",{staticClass:"chat-box-item-icon me-12"},[n("img",{attrs:{src:"/images/messengers/chat-box/"+e.name+".svg",alt:e.name}})]),n("h4",[e._v(" "+e._s(e.title)+" ")])])}),[],!1,null,null,null).exports,jd={name:"ChatBoxCreate",props:{messengers:Array},methods:{viewForm(e){this.$emit("create-form",{messengerId:e.id,messengerTitle:e.title,point:String(e.start_conversation.point_meta.point),module:e.start_conversation.point_meta.module})}},components:{ChatBoxMessengerItem:Hd,ChatBoxCreateHead:Fd}};const Ud=(0,Lr.A)(jd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("chat-box-create-head",{on:{back:function(t){return e.$emit("back")}}}),e._l(e.messengers,(function(t){return n("chat-box-messenger-item",{key:t.id,attrs:{name:t.name,title:t.title},nativeOn:{click:function(n){return e.viewForm(t)}}})}))],2)}),[],!1,null,null,null).exports;const Wd={name:"ChatBoxCreateForm",props:{onlyMessenger:Boolean,messengerId:[String,Number],messengerTitle:String,module:String,point:String,phone:String,customerId:[String,Number]},components:{XAddonVueCode:gl,ChatBoxCreateHead:Fd}};const Kd=(0,Lr.A)(Wd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column justify-content-between h-100"},[n("chat-box-create-head",{attrs:{"messenger-name":e.messengerTitle},on:{back:function(t){return e.$emit("back",e.onlyMessenger)}}}),n("x-addon-vue-code",{attrs:{module:e.module,point:e.point,params:{messengerId:e.messengerId,chatBox:!0,phone:e.phone},"point-params":{customer_id:e.customerId}},on:{back:function(t){return e.$emit("back",e.onlyMessenger)},"go-to-chat":function(t){return e.$emit("go-to-chat",t)}}})],1)}),[],!1,null,null,null).exports;var Gd=i(11757);const Vd={name:"ChatBoxChatView",props:{scrollToMessage:{type:[String,Number,Boolean],default:!1},unknownSender:{type:Boolean,default:!1},customerId:[Number,String],messengerId:[Number,String],messengerName:String,senderType:String,title:String,chatId:[Number,String]},methods:{onChatNotFound(){this.$emit("not-found")}},components:{ChatView:Gd.A}};const zd=(0,Lr.A)(Vd,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("chat-view",{attrs:{"chat-id":e.chatId,chatbox:!0,"customer-id":e.customerId,"chatbox-title":e.title,"unknown-sender":e.unknownSender,"sender-type":e.senderType,"scroll-to-message-on-open":e.scrollToMessage,"view-height":"350px",messenger:e.messengerId,"messenger-name":e.messengerName},on:{"chat-not-found":e.onChatNotFound,back:function(t){return e.$emit("back")},"start-conversation":function(t){return e.$emit("start-conversation",t)}}})}),[],!1,null,null,null).exports,qd="list",Yd="view",Xd="create",Qd="create-form",Zd={name:"ChatBox",data:()=>({currentChatView:{chatId:null,customerId:null,isUnknownSender:null,messengerId:null,messengerName:"",title:""},currentCreateMessenger:{phone:"",customerId:null,messengerId:null,messengerTitle:"",module:"",point:null},loading:!0,transitionName:"",LIST:qd,VIEW:Yd,CREATE:Xd,CREATE_FORM:Qd,route:qd}),async mounted(){await this.fetchChats(),this.loading=!1},methods:{...(0,a.i0)("chatbox",["fetchChats","setChatBoxFilter"]),startConversation(e){let{messengerId:t,messengerTitle:n,customerId:i,phone:o}=e;const s=this.messengersList.find((e=>e.id===t));this.viewCreateForm({messengerId:t,messengerTitle:n,customerId:i,phone:o,point:String(s.start_conversation.point_meta.point),module:s.start_conversation.point_meta.module})},goToChat(e){let{id:t,messengerId:n,unknownSender:i,messengerName:o,customerId:s}=e;this.viewChat({chatId:t,customerId:s,messengerId:n,isUnknownSender:i,messengerName:o})},viewAssignedChats(){this.setChatBoxFilter(["0"])},resetChatView(){this.currentChatView={chatId:null,customerId:null,isUnknownSender:null,messengerId:null}},viewList(){this.transitionName="slide-right",this.route=qd},viewCreate(e,t){this.transitionName=e?"slide-right":"slide-left",t?this.route=qd:this.onlyMessenger?this.viewCreateForm({messengerId:this.messengersList[0].id,messengerTitle:this.messengersList[0].title,point:String(this.messengersList[0].start_conversation.point_meta.point),module:this.messengersList[0].start_conversation.point_meta.module}):this.route=Xd},viewCreateForm(e){let{messengerId:t,messengerTitle:n,customerId:i,phone:o,module:s,point:a}=e;this.currentCreateMessenger={messengerId:t,messengerTitle:n,customerId:i,phone:o,module:s,point:a},this.$nextTick((()=>{this.transitionName="slide-left",this.route=Qd}))},viewChat(e){let{chatId:t,customerId:n,title:i,isUnknownSender:o,messengerId:s,messengerName:a,senderType:r}=e;this.currentChatView={chatId:t,customerId:n,isUnknownSender:o,senderType:r,messengerId:s,messengerName:a,title:i},this.$nextTick((()=>{this.transitionName="slide-left",this.route=Yd}))},onChatNotFound(){this.viewList(),this.resetChatView()}},computed:{...(0,a.L8)("chatbox",["viewListTrigger","messengersList","opened","filter","chats","filteredChats"]),onlyMessenger(){return 1===this.messengersList.length},classes(){return["chat-box",{closed:!this.opened}]}},watch:{viewListTrigger(e){if(!e)return!1;this.viewList()},chats:{deep:!0,handler(e){if(!e.length)return!1;const t=e.find((e=>e.id===this.currentChatView.chatId));if(!t)return!1;this.currentChatView.title=t?.customer?.name,this.currentChatView.customerId=t?.customer_id,this.currentChatView.isUnknownSender=!t.customer&&!t?.customer_id}}},components:{ChatBoxCreateForm:Kd,ChatBoxCreate:Ud,ChatsList:Md,ChatBoxChatView:zd}};const Jd=(0,Lr.A)(Zd,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes},[n("transition",{attrs:{name:e.transitionName}},[n("div",{key:e.route,staticClass:"chat-box-animation-wrapper"},[e.route===e.LIST?n("div",{staticClass:"chat-box-route"},[n("chats-list",{attrs:{chats:e.filteredChats,"unassigned-filter":1===e.filter.length&&"1"===e.filter[0],loading:e.loading},on:{create:e.viewCreate,"view-chat":e.viewChat,"view-assigned":e.viewAssignedChats}})],1):e._e(),e.route===e.VIEW?n("div",{staticClass:"chat-box-route"},[e.currentChatView.chatId?n("chat-box-chat-view",{attrs:{"chat-id":e.currentChatView.chatId,"customer-id":e.currentChatView.customerId,title:e.currentChatView.title,"unknown-sender":e.currentChatView.isUnknownSender,"messenger-id":e.currentChatView.messengerId,"messenger-name":e.currentChatView.messengerName,"sender-type":e.currentChatView.senderType},on:{"not-found":e.onChatNotFound,back:e.viewList,"start-conversation":e.startConversation}}):e._e()],1):e._e(),e.route===e.CREATE?n("div",{staticClass:"chat-box-route chat-box-create"},[n("chat-box-create",{attrs:{messengers:e.messengersList},on:{"create-form":e.viewCreateForm,back:e.viewList}})],1):e._e(),e.route===e.CREATE_FORM?n("div",{staticClass:"chat-box-route chat-box-create"},[n("chat-box-create-form",{attrs:{"only-messenger":e.onlyMessenger,"messenger-id":e.currentCreateMessenger.messengerId,"customer-id":e.currentCreateMessenger.customerId,phone:e.currentCreateMessenger.phone,"messenger-title":e.currentCreateMessenger.messengerTitle,module:e.currentCreateMessenger.module,point:e.currentCreateMessenger.point},on:{back:function(t){return e.viewCreate(!0,t)},"view-list":e.viewList,"go-to-chat":e.goToChat}})],1):e._e()])])],1)}),[],!1,null,null,null).exports;class eu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"splynx-db",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.dbName=e,this.version=t,this.storeNames=n,this.db=null,this.ready=this.init()}init(){return new Promise(((e,t)=>{const n=indexedDB.open(this.dbName,this.version);n.onupgradeneeded=e=>{const t=e.target.result;this.storeNames.forEach((e=>{t.objectStoreNames.contains(e)||t.createObjectStore(e,{keyPath:"id"})}))},n.onsuccess=t=>{this.db=t.target.result,e()},n.onerror=e=>{t(e.target.error)}}))}async _withStore(e,t,n){await this.ready;const i=this.db.transaction(e,t);return n(i.objectStore(e),i)}async add(e,t){return this._withStore(e,"readwrite",(e=>new Promise(((n,i)=>{const o=e.add(t);o.onsuccess=()=>n(!0),o.onerror=()=>i(o.error)}))))}async put(e,t){return this._withStore(e,"readwrite",(e=>new Promise(((n,i)=>{const o=e.put(t);o.onsuccess=()=>n(!0),o.onerror=()=>i(o.error)}))))}async get(e,t){return this._withStore(e,"readonly",(e=>new Promise(((n,i)=>{const o=e.get(t);o.onsuccess=()=>n(o.result),o.onerror=()=>i(o.error)}))))}async getAll(e){return this._withStore(e,"readonly",(e=>new Promise(((t,n)=>{const i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)}))))}async delete(e,t){return this._withStore(e,"readwrite",(e=>new Promise(((n,i)=>{const o=e.delete(t);o.onsuccess=()=>n(!0),o.onerror=()=>i(o.error)}))))}close(){this.db?.close?.()}}class tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default-task";this.lockKey=e,this.tabId=`${Date.now()}-${crypto.randomUUID()}`,this.db=new eu("splynx-db",1,["locks"])}async tryExecute(e){try{await this.db.ready;if(await this.db.get("locks",this.lockKey))return!1;const t={id:this.lockKey,tabId:this.tabId,timestamp:Date.now()};return await this.db.add("locks",t),await e(),await this.db.delete("locks",this.lockKey),!0}catch(e){return!1}finally{await this.db.delete("locks",this.lockKey)}}destroy(){this.db?.close?.()}}const nu={name:"XMessengersChatBoxWrapper",props:{active:{type:Boolean,default:!0}},data:()=>({executor:new tu("splynx-audio-lock")}),mounted(){this.initChatBoxUpdating()},beforeUnmount(){this.executor?.destroy()},methods:{...(0,a.i0)("chatbox",["initChatBoxUpdating"]),playSoundNotification(){this.executor.tryExecute((async()=>{await hr.A.playNotification(this.selectedNotificationsSound)}))},playNotifyAnimation(){const e=this.$refs.button.$el;e.classList.add("bounce"),setTimeout((()=>{e.classList.remove("bounce")}),1e3),this.soundNotificationsActive&&this.playSoundNotification()}},computed:{...(0,a.L8)("chatbox",["notifyTrigger","commonUnread","soundNotificationsActive","selectedNotificationsSound"])},watch:{notifyTrigger(e){e&&this.playNotifyAnimation()}},components:{ChatBox:Jd,ChatBoxButton:xd}};const iu=(0,Lr.A)(nu,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-box-wrapper"},[n("chat-box-button",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],ref:"button",attrs:{counter:e.commonUnread},nativeOn:{click:function(t){return e.$openChatBox()}},scopedSlots:e._u([{key:"counter",fn:function(t){var i=t.value;return[n("transition",{attrs:{name:"fade"}},[e.commonUnread>0?n("div",{staticClass:"chat-box-counter"},[e._v(" "+e._s(i)+" ")]):e._e()])]}}])}),n("chat-box")],1)}),[],!1,null,null,null).exports;const ou={name:"XPhotoSwipe",components:{"photo-swipe":i(66731).n},data(){return{isOpen:!1,items:[],options:{index:0,bgOpacity:.8,closeOnScroll:!1,closeOnVerticalDrag:!1,mouseUsed:!0,history:!1},titleAttributes:{"pswp__button--close":this.$t("common","Close"),"pswp__button--share":this.$t("common","Share"),"pswp__button--fs":this.$t("common","Full Screen"),"pswp__button--zoom":this.$t("common","Zoom"),"pswp__button--arrow--left":this.$t("common","Previous"),"pswp__button--arrow--right":this.$t("common","Next")}}},mounted(){this.options.shareButtons=this.shareButtons,window.$photoswiper=this},methods:{setTitles(e){const t=this;$(e).find("*[title]").each((function(){$(this).attr("title",t.titleAttributes[$(this).get(0).classList[1]])}))},getMeta:e=>new Promise((t=>{const n=new Image;n.addEventListener("error",(()=>{t(!1)})),n.addEventListener("load",(function(){t({name:this.name,width:this.naturalWidth,height:this.naturalHeight})})),n.src=e})),getShareButtons(){const e={id:"download",label:this.$t("common","Download"),download:!0,url:this.items[this.options.index].src};return[{id:"open_new_tab",label:this.$t("common","Open in new window"),url:this.items[this.options.index].src},e,{id:"download_all",label:this.$t("common","Download All"),url:this.items[this.options.index].src}]},downloadImagesList(e){e.forEach((e=>{this.download(e.src,e.name)}))},filterSizes:e=>(e.width>window.innerWidth&&(e.width=window.innerWidth/100*90),e.height>window.innerHeight&&(e.height=window.innerHeight/100*90),e),async prepareImages(e){const t=e.map((async e=>{if(!e.src)return null;if(e.type&&"iframe"===e.type)return this.prepareIframe(e);const t=await this.getMeta(e.src);if(!t)return null;const n=this.filterSizes(t);return{src:e.src,w:n.width,h:n.height,title:e.name}}));return(await Promise.all(t)).filter(Boolean)},prepareIframe:e=>({type:"iframe",title:e.name,html:`<iframe\n                    frameborder="0"\n                    width="100%"\n                    height="100%"\n                    class="embed-responsive-item"\n                    src="${e.src}"\n                ></iframe>`}),getNearestIndex(e,t,n){let i=n;return e.forEach((()=>{if(t[i]&&t[i].src)return!1;i-=1,i<0&&(i=t.length-1)})),i},showImages(e,t){if(empty(e))return!1;this.prepareImages(e).then((n=>{n[t]||(t=this.getNearestIndex(e,n,t)),this.$set(this.options,"index",t),this.items=n,this.options.shareButtons=this.getShareButtons(),this.isOpen=!0,this.$nextTick((()=>{this.setTitles($(this.$refs.slider.$el)),this.prepareDownloadAll();let{pswp:e}=this.$refs.slider;e.listen("afterChange",(()=>{this.$set(this.options,"index",e.getCurrentIndex()),$(".pswp__button--share").on("click",(()=>{$(".pswp__share-tooltip").find(".pswp__share--open_new_tab").attr("href",this.items[e.getCurrentIndex()].src),$(".pswp__share-tooltip").find(".pswp__share--download").attr("href",this.items[e.getCurrentIndex()].src)}))}))}))}))},download(e,t){let n=document.createElement("a");n.download=t,n.href=e,n.click()},prepareDownloadAll(){const e=".pswp__ui:not(.pswp__ui--hidden) .pswp__button--share";$(e).off("click"),$(e).on("click",(()=>{const e=".pswp__ui:not(.pswp__ui--hidden) .pswp__share--download_all";$(e).off("click"),$(e).on("click",(e=>{e.preventDefault(),e.target.target="",e.target.href="",e.target.download=!0,this.downloadImagesList(this.items)}))}))},hidePhotoSwipe(){this.items=[],this.isOpen=!1}}},su=ou;const au={name:"BaseLayout",data:()=>({applicationPart:Q.kT}),components:{XPhotoSwipe:(0,Lr.A)(su,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"photoswipe-component"},[e.isOpen?n("photo-swipe",{ref:"slider",attrs:{"is-open":e.isOpen,items:e.items,options:e.options},on:{close:e.hidePhotoSwipe}}):e._e()],1)}),[],!1,null,null,null).exports,XMessengersChatBoxWrapper:iu,XGlobalNotifications:Mr,XMenu:Zc,XHeader:ed,XHeaderList:yd,XFooter:_d,XLicense:Td,XModalWrapper:_,XSidebar:Sd,XTooltip:Rr,XOnboardingStepper:Cd},mounted(){this.$nextTick((()=>{this.addRefs(this.$refs),this.listenChats()}))},methods:{...(0,a.i0)("on_boarding",["addRefs"]),...(0,a.i0)("chats_listener",["listenChats"])},computed:{chatBoxPermissions:()=>window.spl_config.widgetsAccessStatus.chat_box,...(0,a.L8)(["getMenu","license"]),...(0,a.L8)("menu_store",["mobileState","mobileWidth"]),...(0,a.L8)(["footer"])}};const ru=(0,Lr.A)(au,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"splynx-wrapper",class:{"mobile-menu-open":e.mobileState}},[n("x-photo-swipe"),n("x-license",{attrs:{license:e.license}}),n("x-header",[e.mobileWidth?e._e():n("x-header-list")],1),n("div",{staticClass:"main"},[n("x-menu",{ref:"menuHolder",attrs:{"app-part":e.applicationPart,"menu-structure":e.getMenu}},[e.mobileWidth?n("x-header-list"):e._e()],1),n("div",{staticClass:"content-wrap",attrs:{id:"page_wrapper"}},[n("div",{attrs:{id:"content"}},[e._t("default")],2)]),n("div",{staticStyle:{display:"none"},attrs:{id:"custom_components"}})],1),n("x-global-notifications"),n("transition",{attrs:{name:"fade"}},[n("x-sidebar")],1),n("x-footer",{attrs:{footer:e.footer}}),e.chatBoxPermissions?n("x-messengers-chat-box-wrapper"):e._e(),n("x-modal-wrapper",{ref:"modalWrapper"}),n("x-onboarding-stepper"),n("tooltip",{staticClass:"vue-js-modal-tooltip",attrs:{width:230}}),n("x-tooltip",{staticClass:"vue-js-modal-tooltip x-tooltip-content",attrs:{name:"helpTooltip",width:230}})],1)}),[],!1,null,"d083d3c8",null).exports;const lu=function(e){onCloseModal((t=>{e.$modals.dismiss(t)})),onShowModal("send-file",(function(){let{fetchDataUrl:t="",id:n,ids:o,onSubmit:s=()=>{},onClose:a=()=>{},onDismiss:r=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.$modals.open({name:"send-file",props:{fetchDataUrl:t,id:n,ids:o},onSubmit:s,onClose:a,onDismiss:r,component:()=>i.e(1304).then(i.bind(i,91304))})})),onShowModal("save-message-template",(t=>{let{code:n,selectedType:o,templateTypes:s,subject:a,onSubmit:r,onClose:l,onDismiss:c}=t;e.$modals.open({name:"save-message-template",props:{code:n,selectedType:o,templateTypes:s,subject:a},onSubmit:r,onClose:l,onDismiss:c,component:()=>i.e(6478).then(i.bind(i,96478))})})),onShowModal("preview-template",(t=>{let{id:n,subject:o,customerId:s,type:a,code:r,fetchUrl:l,isMass:c,onSubmit:d,onClose:u,onDismiss:p}=t;e.$modals.open({name:"preview-template",props:{id:n,subject:o,customerId:s,type:a,code:r,fetchUrl:l,isMass:c},onSubmit:d,onClose:u,onDismiss:p,component:()=>i.e(4735).then(i.bind(i,94735))})})),onShowModal("delete-invoice",(t=>{let{onSubmit:n,id:o,invoiceId:s}=t;e.$modals.open({name:"delete-invoice",props:{customerId:o,invoiceId:s},component:()=>i.e(1980).then(i.bind(i,21980)),onSubmit:n})})),onShowModal("mass-delete-invoices",(t=>{let{onSubmit:n,ids:o=[],mark:s=!1}=t;e.$modals.open({name:"mass-delete-invoices",props:{ids:o,mark:s},onSubmit:n,component:()=>i.e(3324).then(i.bind(i,93324))})})),onShowModal("mass-charge-invoices",(t=>{let{onSubmit:n,ids:o=[]}=t;e.$modals.open({name:"mass-charge-invoices",props:{ids:o},onSubmit:n,component:()=>Promise.all([i.e(6779),i.e(546)]).then(i.bind(i,90546))})})),onShowModal("mass-export-invoices",(t=>{let{onSubmit:n,ids:o=[],type:s}=t;e.$modals.open({name:"mass-export-invoices",props:{ids:o,type:s},onSubmit:n,component:()=>Promise.all([i.e(6779),i.e(5261)]).then(i.bind(i,25261))})})),onShowModal("mass-change-invoices",(t=>{let{onSubmit:n,ids:o=[]}=t;e.$modals.open({name:"mass-change-invoices",props:{ids:o},onSubmit:n,component:()=>i.e(1277).then(i.bind(i,91277))})})),onShowModal("deny-delete-has-related-items",(t=>{let{id:n,className:o,showDeleteWithRelationsButton:s,deleteWithRelationsUrl:a,relations:r,title:l,alertMessage:c,width:d,height:u,onSubmit:p,redirectTo:h}=t;e.$modals.open({name:"deny-delete-has-related-items",props:{id:n,className:o,deleteWithRelationsUrl:a,relations:r,title:l,alertMessage:c,width:d,height:u,showDeleteWithRelationsButton:s,redirectTo:h,onSubmit:p},component:()=>i.e(9810).then(i.bind(i,99810))})})),onShowModal("add-on-link-modal",(t=>{let{props:n,onSubmit:o,onClose:s,onDismiss:a}=t;e.$modals.open({name:"add-on-link-modal",props:n,onSubmit:o,onClose:s,onDismiss:a,component:()=>i.e(5722).then(i.bind(i,5722))})})),onShowModal("select-linked-invoices",(t=>{let{onSubmit:n,current:o,customerId:s}=t;e.$modals.open({name:"select-linked-invoices",props:{invoices:o,customerId:s,module:"/admin/finance/invoices"},onSubmit:n,component:()=>i.e(5790).then(i.bind(i,25790))})})),onShowModal("common-confirm-modal",(t=>{let{onSubmit:n,onClose:o,onDismiss:s,ask:a,title:r,confirmButtonText:l,cancelButtonText:c,width:d,height:u}=t;e.$modals.open({name:"confirm-action-modal",props:{title:r,ask:a,confirmButtonText:l,cancelButtonText:c,width:d,height:u},component:()=>i.e(6104).then(i.bind(i,16104)),onSubmit:n,onClose:o,onDismiss:s})})),onShowModal("profile-edit-photo",(t=>{e.$modals.open({name:"profile-edit-photo",props:{name:"profile-edit-photo",title:e.$t("profile","Edit photo"),width:663,height:550,closeButton:{text:e.$t("profile","Close"),id:"admin_administration_profile_photo_form_close_button"},submitButton:{text:e.$t("profile","Save"),id:"admin_administration_profile_photo_form_close_button"}},onSubmit:t.successCallback,component:()=>i.e(5129).then(i.bind(i,15129))})})),onShowModal("canned-group-form",(t=>{createReloadDataTableEvent("#profile_canned_responses_group_list");let n=e.$t("support","Edit"),o=e.$t("support","Save");t.id||(n=e.$t("support","Create"),o=e.$t("support","Add")),e.$modals.open({name:"canned-group-form",props:{name:"canned-group-form",title:n,id:t.id,width:500,height:350,closeButton:{text:e.$t("support","Close"),id:"admin_profile_support_ticket_canned_groups_form_close_button"},submitButton:{text:o,id:"admin_profile_support_ticket_canned_groups_form_submit_button"}},onSubmit:()=>{reloadLastDataTable()},component:()=>i.e(1985).then(i.bind(i,61985))})})),onShowModal("canned-group-delete",(t=>{createReloadDataTableEvent("#profile_canned_responses_group_list"),e.$modals.open({name:"canned-group-form",props:{name:"canned-group-form",title:e.$t("support","Delete"),id:t.id,width:500,height:350,closeButton:{text:e.$t("support","Close"),id:"admin_profile_support_ticket_canned_group_delete_form_close_button"},submitButton:{text:e.$t("support","Delete"),id:"admin_profile_support_ticket_canned_group_delete_form_submit_button"}},onSubmit:()=>{reloadLastDataTable()},component:()=>i.e(8637).then(i.bind(i,58637))})})),onShowModal("canned-responses-form",(t=>{createReloadDataTableEvent("#profile_canned_responses_list"),createReloadDataTableEvent("#admin_config_support_ticket_canned_responses_list");let n=e.$t("support","Edit"),o=e.$t("support","Save");t.id||(n=e.$t("support","Create"),o=e.$t("support","Add")),e.$modals.open({name:"canned-responses-form",props:{isFromHelpdesk:t.isFromHelpdesk,isEdit:!!t.id,name:"canned-responses-form",title:n,id:t.id,width:850,height:600,closeButton:{text:e.$t("support","Close"),id:"admin_ticket_canned_responses_form_close_button"},submitButton:{text:o,id:"admin_ticket_canned_responses_form_submit_button"}},onSubmit:()=>{reloadLastDataTable()},component:()=>i.e(5699).then(i.bind(i,45699))})})),onShowModal("canned-responses-delete",(t=>{createReloadDataTableEvent("#profile_canned_responses_list"),e.$modals.open({name:"canned-responses-delete",props:{name:"canned-responses-delete",title:e.$t("support","Delete"),id:t.id,width:500,height:350,closeButton:{text:e.$t("support","Close"),id:"admin_profile_support_ticket_canned_responses_delete_form_close_button"},submitButton:{text:e.$t("support","Delete"),id:"admin_profile_support_ticket_canned_responses_delete_form_submit_button"}},onSubmit:()=>{reloadLastDataTable()},component:()=>i.e(1311).then(i.bind(i,11311))})})),onShowModal("two-factor-auth-form",(t=>{void 0===t.showCloseButton&&(t.showCloseButton=!0),void 0===t.height&&(t.height=550),e.$modals.open({name:"two-factor-auth-form",props:{name:"two-factor-auth-form",title:e.$t("profile","Two-factor authentication configuration"),width:500,height:t.height,showCloseButton:t.showCloseButton,closeButton:{text:e.$t("profile","Close")}},onSubmit:t.successCallback,component:()=>i.e(1712).then(i.bind(i,51712))})})),onShowModal("delete-customer-rate-table",(t=>{e.$modals.open({name:"delete-customer-rate-table-modal",props:{title:t.title,url:`/admin/voice/rates/customers--delete?id=${t.id}`,deleteBtnId:"admin_voice_customer_rate_tables_delete_button_submit",closeBtnId:"admin_voice_customer_rate_tables_delete_button_close",confirmMessage:e.$t("voice",'Are you sure want to delete rate table <b>"{name}"</b>?',{name:t.title})},component:()=>i.e(7296).then(i.bind(i,17296)),onClose:()=>{$("#admin_voice_rates_customer_rate_tables_list").DataTable().ajax.reload()}})})),onShowModal("add-customer-invoice",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,title:e.$t("finance","Add one-time invoice"),isNew:!0,formUrl:`/admin/customers/billing/invoices--add?id=${t.customer_id}`,className:"Invoices",requestController:"/admin/customers/billing/invoices"},component:()=>Promise.all([i.e(2254),i.e(3550),i.e(2931),i.e(1052)]).then(i.bind(i,38399)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("edit-customer-invoice",(t=>{e.$modals.open({name:"finance-document-modal",props:{invoice_id:t.invoice_id,customer_id:t.customer_id,title:e.$t("finance","Edit invoice"),isNew:!1,formUrl:`/admin/customers/billing/invoices--edit?id=${t.customer_id}&invoice_id=${t.invoice_id}`,className:"Invoices",requestController:"/admin/customers/billing/invoices",listType:t.list_type},component:()=>Promise.all([i.e(2254),i.e(3550),i.e(2931),i.e(1052)]).then(i.bind(i,38399)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("add-customer-proforma-invoice",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,title:e.$t("finance","Add proforma invoice"),isNew:!0,formUrl:`/admin/customers/billing/proforma-invoices--add?id=${t.customer_id}`,className:"ProformaInvoices",requestController:"/admin/customers/billing/proforma-invoices"},component:()=>Promise.all([i.e(2254),i.e(3550),i.e(2931),i.e(6130)]).then(i.bind(i,97437)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("edit-customer-proforma-invoice",(t=>{e.$modals.open({name:"finance-document-modal",props:{request_id:t.request_id,customer_id:t.customer_id,title:e.$t("finance","Edit proforma invoice"),isNew:!1,formUrl:`/admin/customers/billing/proforma-invoices--edit?id=${t.customer_id}&request_id=${t.request_id}`,className:"ProformaInvoices",requestController:"/admin/customers/billing/proforma-invoices"},component:()=>Promise.all([i.e(2254),i.e(3550),i.e(2931),i.e(6130)]).then(i.bind(i,97437)),onSubmit:()=>{t.refresh&&splynx_event_bus.emit("reload-data-for-table"),reloadLastDataTable()}})})),onShowModal("add-customer-payment",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,invoice_id:t.invoice_id,request_id:t.request_id,title:e.$t("finance","Add payment"),isNew:!0,formUrl:`/admin/customers/billing/payments--add?id=${t.customer_id}`,className:"Payments",listType:t.list_type},component:()=>Promise.all([i.e(1923),i.e(8518)]).then(i.bind(i,88518)),onSubmit:()=>{t.refresh&&splynx_event_bus.emit("reload-data-for-table"),reloadLastDataTable()}})})),onShowModal("edit-customer-payment",(t=>{e.$modals.open({name:"finance-document-modal",props:{payment_id:t.payment_id,customer_id:t.customer_id,title:e.$t("finance","Edit payment"),isNew:!1,formUrl:`/admin/customers/billing/payments--edit?id=${t.customer_id}&payment_id=${t.payment_id}`,className:"Payments"},component:()=>Promise.all([i.e(1923),i.e(8518)]).then(i.bind(i,88518)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("view-customer-payment",(t=>{e.$modals.open({name:"view-customer-payment",props:{payment_id:t.payment_id,customer_id:t.customer_id,title:e.$t("finance","View payment"),className:"Payments"},component:()=>i.e(271).then(i.bind(i,90271))})})),onShowModal("view-customer-invoice",(t=>{e.$modals.open({name:"view-customer-invoice",props:{listType:t.list_type,invoice_id:t.invoice_id,customer_id:t.customer_id,title:e.$t("finance","View invoice"),className:"Invoices"},component:()=>Promise.all([i.e(815),i.e(6235)]).then(i.bind(i,26235))})})),onShowModal("view-customer-proforma-invoice",(t=>{e.$modals.open({name:"view-customer-proforma-invoice",props:{proforma_invoice_id:t.proforma_invoice_id,customer_id:t.customer_id,title:e.$t("finance","View proforma invoice"),className:"ProformaInvoices"},component:()=>Promise.all([i.e(815),i.e(661)]).then(i.bind(i,40661))})})),onShowModal("view-customer-credit-note",(t=>{e.$modals.open({name:"view-customer-credit-note",props:{credit_note_id:t.credit_note_id,customer_id:t.customer_id,title:e.$t("finance","View credit note"),className:"CreditNotes"},component:()=>Promise.all([i.e(815),i.e(751)]).then(i.bind(i,60751))})})),onShowModal("customer-generate-statement",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,for_sub:t.for_sub??0,title:e.$t("customers","Generate statement"),formUrl:"/admin/administration/reports/statements"},component:()=>Promise.all([i.e(7564),i.e(248),i.e(3698)]).then(i.bind(i,73698)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("add-customer-transaction",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,title:e.$t("finance","Add transaction"),isNew:!0,formUrl:`/admin/customers/billing/transactions--add?id=${t.customer_id}`,className:"Transactions"},component:()=>Promise.all([i.e(6780),i.e(4966)]).then(i.bind(i,36780)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("edit-customer-transaction",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,transaction_id:t.transaction_id,title:e.$t("finance","Edit transaction"),isNew:!1,formUrl:`/admin/customers/billing/transactions--edit?id=${t.customer_id}&transaction_id=${t.transaction_id}`,className:"Transactions"},component:()=>Promise.all([i.e(6780),i.e(4966)]).then(i.bind(i,36780)),onClose:()=>{"admin_finance_transactions_list_table"===window.currentDataTableJsSelector?splynx_event_bus.emit("reload-data-for-table"):reloadLastDataTable()}})})),onShowModal("add-customer-recurring-invoice",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,title:e.$t("finance","Add recurring invoice"),formUrl:`/admin/customers/billing/overview--add?id=${t.customer_id}`,className:"Overview",requestController:"/admin/customers/billing/invoices"},component:()=>Promise.all([i.e(2254),i.e(3550),i.e(1689)]).then(i.bind(i,24436)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("add-customer-credit-note",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,credit_note_id:t.credit_note_id,title:e.$t("finance","Add credit note"),isNew:!0,formUrl:`/admin/customers/billing/credit-notes--add?id=${t.customer_id}`,className:"CreditNotes",showLoadTransactions:!0,requestController:"/admin/customers/billing/credit-notes",autoSelectionForInvoiceId:t.select_invoice_id,listType:t.list_type},component:()=>Promise.all([i.e(2254),i.e(3550),i.e(2931),i.e(4220)]).then(i.bind(i,9343)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("edit-customer-credit-note",(t=>{e.$modals.open({name:"finance-document-modal",props:{credit_note_id:t.credit_note_id,customer_id:t.customer_id,title:e.$t("finance","Edit credit note"),isNew:!1,formUrl:`/admin/customers/billing/credit-notes--edit?id=${t.customer_id}&credit_note_id=${t.credit_note_id}`,className:"CreditNotes",showLoadTransactions:!0,requestController:"/admin/customers/billing/credit-notes"},component:()=>Promise.all([i.e(2254),i.e(3550),i.e(2931),i.e(4220)]).then(i.bind(i,9343)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("refund-customer-credit-note",(t=>{let{customer_id:n,credit_note_id:o}=t;e.$modals.open({name:"refund-customer-credit-note",props:{creditNoteId:o,customerId:n},component:()=>i.e(6452).then(i.bind(i,56452)),onSubmit:()=>{splynx_event_bus.emit("reload-data-for-table")}})})),onShowModal("delete-customer-credit-note",(t=>{e.$modals.open({name:"delete-credit-note",props:{creditNoteId:t.credit_note_id,customerId:t.customer_id},component:()=>i.e(542).then(i.bind(i,30542)),onSubmit:()=>{reloadLastDataTable(),splynx_event_bus.emit("reload-data-for-table")}})})),onShowModal("add-customer-future-item",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,title:e.$t("finance","Add future items"),subtitle:e.$t("finance","Future items are transactions that will appear on the next recurring invoice."),formUrl:`/admin/customers/billing/transactions--mass-create-future-items?id=${t.customer_id}`},component:()=>i.e(2930).then(i.bind(i,92930)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("finance-invoices-mass-pay",(t=>{e.$modals.open({name:"finance-document-modal",props:{ids:t.ids,listType:t.listType,title:e.$t("finance","Pay invoices"),urlPaymentForm:"/admin/customers/billing/payments--add",urlMassPaymentForm:"/admin/customers/billing/payments--mass-add-for-invoice",nameSocket:"finance_invoices_mass_pay",nameController:"invoices"},component:()=>Promise.all([i.e(1923),i.e(7795)]).then(i.bind(i,97795)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("finance-proforma-invoices-mass-pay",(t=>{e.$modals.open({name:"finance-document-modal",props:{ids:t.ids,title:e.$t("finance","Pay proforma invoices"),urlPaymentForm:"/admin/customers/billing/payments--add",urlMassPaymentForm:"/admin/customers/billing/payments--mass-add-for-request",nameSocket:"finance_proforma_invoices_mass_pay",nameController:"proforma-invoices"},component:()=>Promise.all([i.e(1923),i.e(7795)]).then(i.bind(i,97795)),onSubmit:()=>{t.refresh&&splynx_event_bus.emit("reload-data-for-table"),reloadLastDataTable()}})})),onShowModal("customer-overview-edit-to-bill-log-date",(t=>{e.$modals.open({name:"finance-document-modal",props:{customer_id:t.customer_id,title:e.$t("finance","Set next block date"),formUrl:`/admin/customers/billing/overview--edit-to-bill-log-date?id=${t.customer_id}`},component:()=>i.e(1213).then(i.bind(i,71213))})})),onShowModal("customer-overview-preview-reminder-modal",(t=>{e.$modals.open({name:"x-modal",props:{customerId:t.customerId,reminderType:t.reminderType,title:e.$t("finance","Preview reminder"),formUrl:`/admin/customers/billing/overview--preview-reminder?customerId=${t.customerId}&reminderType=${t.reminderType}`,nameController:"overview"},component:()=>i.e(4224).then(i.bind(i,54224))})})),onShowModal("confirm-forget-unsaved-data-modal",(t=>{e.$modals.open({name:"confirm-action-modal",props:{ask:t.text},component:()=>i.e(6104).then(i.bind(i,16104)),onSubmit:()=>{t.onSubmit()},onClose:t.onClose,onDismiss:()=>{t.onDismiss()}})})),onShowModal("show-statistic-info-modal",(t=>{e.$modals.open({name:"show-statistic-info",props:t,component:()=>i.e(6371).then(i.bind(i,56371))})})),onShowModal("show-customers-license-counters-modal",(t=>{e.$modals.open({name:"show-customers-license-counters",props:t,component:()=>i.e(753).then(i.bind(i,90753))})})),onShowModal("show-license-usage-details-modal",(t=>{e.$modals.open({name:"show-license-usage-details",props:t,component:()=>i.e(9246).then(i.bind(i,9246))})})),onShowModal("labels-form-modal",(t=>{e.$modals.open({name:"labels-form-modal",props:{module:t.module,id:t.id,type:t.type},component:()=>i.e(4714).then(i.bind(i,4714))})})),onShowModal("labels-form-delete",(t=>{e.$modals.open({name:"labels-form-delete",props:{label:t.label,module:t.module,id:t.id},component:()=>i.e(3581).then(i.bind(i,13581))})})),onShowModal("config-reset-to-default",(t=>{e.$modals.open({name:"config-reset-to-default",props:t,component:()=>i.e(5837).then(i.bind(i,65837))})})),onShowModal("config-encrypted-reset",(t=>{e.$modals.open({name:"config-encrypted-reset",props:t,component:()=>i.e(981).then(i.bind(i,40981))})})),onShowModal("manage-service-request",(t=>{e.$modals.open({name:"manage-service-request",props:{id:t.id,controller:t.controller,startDate:t.start_date},component:()=>i.e(1249).then(i.bind(i,81249))})})),onShowModal("confirm-domain-dialog-common",(t=>{e.$modals.open({name:"confirm-domain-modal",props:{url:t.url,confirmCallback:e=>{t.confirm(e)}},component:()=>i.e(5575).then(i.bind(i,55575))})})),onShowModal("disconnect-google-account",(t=>{e.$modals.open({name:"disconnect-google-account-modal",props:{email:t.email,disconnectCallback:()=>{t.disconnect()}},component:()=>i.e(4118).then(i.bind(i,54118))})})),onShowModal("scheduling-paired-calendars-edit",(t=>{e.$modals.open({name:"scheduling-paired-calendars-edit-modal",props:{id:t.id},component:()=>i.e(6116).then(i.bind(i,16116)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("scheduling-paired-calendars-delete",(t=>{e.$modals.open({name:"scheduling-paired-calendars-delete-modal",props:{id:t.id},component:()=>i.e(459).then(i.bind(i,30459)),onClose:()=>{reloadLastDataTable()}})})),onShowModal("close-scheduling-task",(t=>{e.$modals.open({name:"close-scheduling-task",props:{id:t.id,reloadTable:t.reload_table},component:()=>i.e(8328).then(i.bind(i,8328))})})),onShowModal("re-open-scheduling-task",(t=>{e.$modals.open({name:"re-open-scheduling-task",props:{id:t.id,reloadTable:t.reload_table},component:()=>i.e(9946).then(i.bind(i,79946))})})),onShowModal("help-documentation-modal",(t=>{e.$modals.open({name:"help-documentation-modal",props:{title:t.title,content:t.renderedContent,hash:t.hash},component:()=>i.e(7090).then(i.bind(i,77090))})})),onShowModal("open-pdf-preview",(t=>{e.$modals.open({name:"open-pdf-preview",props:t,component:()=>i.e(6869).then(i.bind(i,26869))})})),onShowModal("permissions-modal",(t=>{e.$modals.open({name:"permissions-modal",props:t,component:()=>i.e(4331).then(i.bind(i,74331))})})),onShowModal("tariffs-plan-info",(t=>{e.$modals.open({name:"tariffs-plans-info-modal",props:t,component:()=>i.e(5626).then(i.bind(i,45626))})})),onShowModal("inventory-modals-actions",(t=>{e.$modals.open({name:"inventory-modals-actions",props:t,component:()=>i.e(1001).then(i.bind(i,71001))})})),onShowModal("sell-inventory-items",(t=>{let{onSubmit:n,...o}=t;e.$modals.open({name:"sell-inventory-items",props:{ids:o.ids,listType:o.listType,deleteBtnId:"admin_inventory_items_sold_button_submit",closeBtnId:"admin_inventory_items_sold_button_button_close"},onDismiss:n,component:()=>Promise.all([i.e(2254),i.e(7116)]).then(i.bind(i,57116))})})),onShowModal("items-move-to",(t=>{e.$modals.open({name:"items-move-to",props:t,onSubmit:t.onSubmit,component:()=>i.e(3793).then(i.bind(i,23793))})})),onShowModal("items-link-to-task",(t=>{e.$modals.open({name:"items-link-to-task",props:t,component:()=>i.e(9517).then(i.bind(i,49517))})})),onShowModal("items-unlink-task",(t=>{e.$modals.open({name:"items-unlink-task",props:t,onSubmit:t.onSubmit,component:()=>i.e(3060).then(i.bind(i,53060))})})),onShowModal("items-return-item",(t=>{e.$modals.open({name:"items-return-item",props:t,onSubmit:t.onSubmit,component:()=>i.e(326).then(i.bind(i,10326))})})),onShowModal("inventory-items-rent-items",(t=>{e.$modals.open({name:"inventory-items-rent-items",props:t,onSubmit:t.onSubmit,component:()=>Promise.all([i.e(2254),i.e(6076)]).then(i.bind(i,26076))})})),onShowModal("inventory-items-set-internal-usage-assign-customer",(t=>{e.$modals.open({name:"inventory-items-set-internal-usage-assign-customer",props:t,onSubmit:t.onSubmit,component:()=>i.e(418).then(i.bind(i,20418))})})),onShowModal("inventory-items-enter-serial-numbers-barcode",(t=>{e.$modals.open({name:"inventory-items-enter-serial-numbers-barcode",props:t,onSubmit:t.onSubmit,component:()=>i.e(7828).then(i.bind(i,37828))})})),onShowModal("inventory-items-edit",(t=>{let{onSubmit:n,...o}=t;e.$modals.open({name:"inventory-items-edit",props:o,onSubmit:n,component:()=>i.e(9037).then(i.bind(i,39037))})})),onShowModal("inventory-items-delete",(t=>{e.$modals.open({name:"inventory-items-delete",props:t,component:()=>i.e(7937).then(i.bind(i,87937))})})),onShowModal("inventory-items-add",(t=>{e.$modals.open({name:"inventory-items-add",props:t,component:()=>i.e(2953).then(i.bind(i,22953))})})),onShowModal("inventory-items-mass-add",(t=>{e.$modals.open({name:"inventory-items-mass-add",props:t,component:()=>Promise.all([i.e(2254),i.e(7095)]).then(i.bind(i,87095))})})),onShowModal("update-existing-customers",(t=>{e.$modals.open({name:"update-existing-customers",props:{type:t.type,partnerId:t.partnerId,title:e.$t("finance","Update billing information")},component:()=>i.e(6421).then(i.bind(i,26421))})})),onShowModal("scheduling-task-preview-geo",(t=>{let{taskId:n,onSubmit:o}=t;e.$modals.open({name:"scheduling-task-preview-geo",props:{taskId:n,height:660,width:1100},component:()=>Promise.all([i.e(5066),i.e(1453)]).then(i.bind(i,61453)),onSubmit:o})})),onShowModal("preview-geo",(t=>{e.$modals.open({name:"preview-geo",props:{propsMapConfig:t.propsMapConfig,formConfig:t.formConfig,height:660,width:1100},onSubmit:t.onSubmit,component:()=>Promise.all([i.e(5066),i.e(5704)]).then(i.bind(i,95704))})})),onShowModal("messenger-open-chat",(t=>{let{chatId:n,scrollToMessage:o,onClose:s,onDismiss:a}=t;e.$modals.open({name:"open-messenger-chat",props:{chatId:n,scrollToMessage:o},component:()=>i.e(7255).then(i.bind(i,7255)),onClose:s,onDismiss:a})})),onShowModal("messenger-app-re-assign-chat",(t=>{let{chatId:n,onSubmit:o,type:s}=t;e.$modals.open({name:"messenger-app-re-assign-chat",props:{chatId:n,type:s},onSubmit:o,component:()=>i.e(3320).then(i.bind(i,63320))})})),onShowModal("messenger-create-ticket-from-message",(t=>{let{customerId:n,onSubmit:o,messenger:s,chatId:a,isLead:r,message:l,unknownSender:c}=t;e.$modals.open({name:"messenger-create-ticket-from-message",props:{customerId:n,messenger:s,chatId:a,isLead:r,message:l,unknownSender:c},onSubmit:o,component:()=>i.e(5479).then(i.bind(i,25479))})})),onShowModal("messenger-unlink-ticket-from-multiple-messages",(t=>{let{messages:n,onSubmit:o,unlinkCallback:s,customerId:a,selected:r}=t;e.$modals.open({name:"messenger-unlink-ticket-from-multiple-messages",props:{messages:n,customerId:a,unlinkCallback:s,selected:r},onSubmit:o,component:()=>i.e(3049).then(i.bind(i,83049))})})),onShowModal("messenger-link-ticket-to-message",(t=>{let{onSubmit:n,linked:o,unlinkCallback:s,customerId:a,messageId:r,chatId:l,senderType:c}=t;e.$modals.open({name:"messenger-link-ticket-to-message",props:{name:"messenger-link-ticket-to-message",linked:o,unlinkCallback:s,customerId:a,messageId:r,chatId:l,senderType:c},onSubmit:n,component:()=>i.e(4643).then(i.bind(i,80672))})})),onShowModal("messenger-app-attachment-file",(t=>{let{onSubmit:n,checkAccessAction:o,checkAccessController:s}=t;e.$modals.open({name:"messenger-app-attachment-file",props:{checkAccessAction:o,checkAccessController:s},onSubmit:n,component:()=>i.e(6695).then(i.bind(i,16695))})})),onShowModal("messenger-connect-chat",(t=>{let{chatId:n,onSubmit:o}=t;e.$modals.open({name:"messenger-connect-chat",props:{chatId:n},onSubmit:o,component:()=>i.e(6755).then(i.bind(i,96755))})})),onShowModal("wireguard-clients-configuration",(()=>{e.$modals.open({name:"wireguard-clients-configuration",props:{name:"wireguard-clients-configuration"},onSubmit(){reloadLastDataTable()},component:()=>i.e(7308).then(i.bind(i,27308))})})),onShowModal("wireguard-clients-status",(()=>{e.$modals.open({name:"wireguard-clients-status",props:{name:"wireguard-clients-status"},component:()=>i.e(224).then(i.bind(i,50224))})})),onShowModal("wireguard-clients-delete",(t=>{let{id:n,title:o}=t;e.$modals.open({name:"wireguard-clients-delete",props:{name:"wireguard-clients-delete",id:n,title:o},onSubmit(){reloadLastDataTable()},component:()=>i.e(1851).then(i.bind(i,1851))})})),onShowModal("tools-import-history-info",(t=>{e.$modals.open({name:"tools-import-history-info",props:{id:t},component:()=>i.e(2530).then(i.bind(i,2530))})})),onShowModal("messenger-reassign-to-me",(t=>{let{text:n,onSubmit:o,onDismiss:s}=t;e.$modals.open({name:"confirm-action-modal",props:{ask:n},component:()=>i.e(6104).then(i.bind(i,16104)),onSubmit:o,onDismiss:s})})),onShowModal("messenger-create-from-unknown",(t=>{let{fullName:n,phoneNumber:o,onSubmit:s}=t;createReloadDataTableEvent("#admin_messages_messengers_list"),e.$modals.open({name:"messenger-create-from-unknown",props:{fullName:n,phoneNumber:o},onSubmit:s,component:()=>i.e(5690).then(i.bind(i,25690))})})),onShowModal("scheduling-calendar-from-task-view",(t=>{let{assigned:n,taskId:o,date:s,travelTime:a,onClose:r}=t;e.$modals.open({name:"scheduling-calendar-from-task-view",props:{taskId:o,assigned:n,date:s,travelTime:a},component:()=>Promise.all([i.e(1450),i.e(2942)]).then(i.bind(i,2942)),onClose:r})})),onShowModal("wireguard-clients-form",(n=>{let{id:o,title:s}=n;s=o?t("config","Edit Wireguard client"):t("config","Create Wireguard client"),e.$modals.open({name:"wireguard-clients-form",props:{name:"wireguard-clients-form",id:o,title:s},onSubmit(){reloadLastDataTable()},component:()=>i.e(3473).then(i.bind(i,83473))})})),onShowModal("mass-add-labels-to-ticket",(t=>{let{ids:n,onSubmit:o}=t;e.$modals.open({name:"mass-add-labels-to-ticket",props:{ids:n},onSubmit:o,component:()=>i.e(7756).then(i.bind(i,67756))})})),onShowModal("show-selected-charge-parameters",(t=>{let{url:n,id:o}=t;e.$modals.open({name:"show-selected-charge-parameters",props:{url:n,id:o},component:()=>i.e(2954).then(i.bind(i,62954))})})),onShowModal("worklog-event-action",(t=>{let{edit:n,taskId:o,worklog:s,title:a,stopTimerWorklogId:r}=t;e.$modals.open({name:"worklog-event-action-modal",props:{edit:n,taskId:o,worklog:s,title:a,stopTimerWorklogId:r},component:()=>i.e(9903).then(i.bind(i,29903))})})),onShowModal("link-inventory-item-to-customer",(t=>{e.$modals.open({name:"link-inventory-item-to-customer",props:t.props,component:()=>i.e(5893).then(i.bind(i,65893)),onSubmit:t.onSubmit})})),onShowModal("reset-cwmp-credentials",(t=>{let{title:n,ask:o,width:s,height:a,confirmButtonText:r,cancelButtonText:l,onSubmit:c}=t;e.$modals.open({name:"confirm-action-modal",props:{title:n,width:s,height:a,confirmButtonText:r,cancelButtonText:l,ask:o},onSubmit:c,component:()=>i.e(6104).then(i.bind(i,16104))})})),onShowModal("task-view-change-related-item",(t=>{let{edit:n,item:o,type:s,title:a,unlinkItem:r,linkItem:l,taskType:c}=t;e.$modals.open({name:"task-view-change-related-item",props:{edit:n,item:o,type:s,title:a,unlinkItem:r,linkItem:l,taskType:c},component:()=>i.e(5723).then(i.bind(i,45723))})})),onShowModal("add-comment-with-files-modal",(t=>{let{onSubmit:n,message:o,filesList:s,isEdit:a,checkAccessAction:r,checkAccessController:l,mentionsList:c}=t;e.$modals.open({name:"add-comment-with-files-modal",props:{message:o,filesList:s,isEdit:a,checkAccessAction:r,checkAccessController:l,mentionsList:c},onSubmit:n,component:()=>i.e(9684).then(i.bind(i,89684))})})),onShowModal("load-checklist-template",(t=>{let{buttons:n,title:o}=t;e.$modals.open({name:"load-checklist-template",props:{title:o,buttons:n,name:"load-checklist-template"},component:()=>i.e(7044).then(i.bind(i,97044))})})),onShowModal("add-payments-modal",(()=>{e.$modals.open({name:"add-payments-modal",props:{},component:()=>Promise.all([i.e(2254),i.e(5224)]).then(i.bind(i,95224))})})),onShowModal("mass-export-payments",(t=>{let{onSubmit:n,ids:o=[],type:s}=t;e.$modals.open({name:"mass-export-payments",props:{ids:o,type:s},onSubmit:n,component:()=>Promise.all([i.e(6779),i.e(4059)]).then(i.bind(i,94059))})})),onShowModal("mass-export-proforma-invoices",(t=>{let{onSubmit:n,ids:o=[],type:s}=t;e.$modals.open({name:"mass-export-proforma-invoices",props:{ids:o,type:s},onSubmit:n,component:()=>Promise.all([i.e(6779),i.e(8410)]).then(i.bind(i,78410))})})),onShowModal("mass-export-credit-notes",(t=>{let{onSubmit:n,ids:o=[],type:s}=t;e.$modals.open({name:"mass-export-credit-notes",props:{ids:o,type:s},onSubmit:n,component:()=>Promise.all([i.e(6779),i.e(6348)]).then(i.bind(i,6348))})})),onShowModal("link-hardware-modal",(t=>{let{siteId:n,siteName:o}=t;e.$modals.open({name:"link-hardware-modal",props:{title:e.$t("networking","Link hardware"),siteId:n,siteName:o},component:()=>i.e(91).then(i.bind(i,20091))})})),onShowModal("delete-network-site",(t=>{let{id:n}=t;e.$modals.open({name:"delete-network-site",props:{id:n},component:()=>i.e(943).then(i.bind(i,63324))})})),onShowModal("unlink-hardware-from-network-site",(t=>{let{id:n,networkSiteId:o,hardwareTitle:s}=t;e.$modals.open({name:"unlink-hardware-from-network-site",props:{id:n,networkSiteId:o,hardwareTitle:s},component:()=>i.e(6177).then(i.bind(i,86177))})})),onShowModal("task-notification-settings",(t=>{let{id:n}=t;e.$modals.open({name:"task-notification-settings",props:{id:n},component:()=>i.e(7391).then(i.bind(i,27391))})})),onShowModal("mass-link-to-access-device",(t=>{let{ids:n,onSubmit:o}=t;e.$modals.open({name:"mass-link-to-access-device",props:{ids:n},onSubmit:o,component:()=>Promise.all([i.e(2254),i.e(4411)]).then(i.bind(i,4411))})})),onShowModal("show-messenger-message-location",(t=>{let{lat:n,lng:o,address:s}=t;e.$modals.open({name:"show-messenger-message-location",props:{lat:n,lng:o,address:s},component:()=>Promise.all([i.e(5066),i.e(3644)]).then(i.bind(i,23644))})})),onShowModal("tax-update-confirm",(t=>{let{onSubmit:n,data:o,className:s,oldTaxRate:a,newTaxRate:r}=t;e.$modals.open({name:"tax-update-confirm",props:{data:o,className:s,oldTaxRate:a,newTaxRate:r},onSubmit:n,component:()=>i.e(3321).then(i.bind(i,3321))})})),onShowModal("confirm-disable-access-device",(t=>{let{width:n,height:o,modalData:s,onSubmit:a}=t;e.$modals.open({name:"confirm-disabling-access-device",props:{width:n,height:o,modalData:s},onSubmit:a,component:()=>i.e(6987).then(i.bind(i,16987))})})),onShowModal("customer-link-billing-sub-account",(t=>{let{customerId:n,partnerId:o,isCustomerDisabled:s}=t;e.$modals.open({name:"customer-link-billing-sub-account",props:{customerId:n,partnerId:o,isCustomerDisabled:s},component:()=>i.e(6096).then(i.bind(i,26096))})})),onShowModal("customer-unlink-billing-main-account",(t=>{let{customerId:n,fromSubPage:o}=t;e.$modals.open({name:"customer-unlink-billing-main-account",props:{customerId:n,fromSubPage:o},component:()=>i.e(6212).then(i.bind(i,96212))})})),onShowModal("edit-customer-sub-account",(t=>{let{customerId:n,mainIsActiveAndPositiveBalance:o,selectedBillingType:s,subAccountBalance:a,subAccountHasFutureItems:r}=t;e.$modals.open({name:"edit-customer-sub-account",props:{customerId:n,mainIsActiveAndPositiveBalance:o,selectedBillingType:s,subAccountBalance:a,subAccountHasFutureItems:r},component:()=>i.e(8334).then(i.bind(i,88334))})})),onShowModal("cancel-customer-service",(t=>{let{serviceId:n,serviceTitle:o,billingEndDate:s,serviceType:a}=t;e.$modals.open({name:"cancel-customer-service",props:{serviceId:n,serviceTitle:o,maxBillingEndDate:s,serviceType:a},component:()=>i.e(9718).then(i.bind(i,99718))})})),onShowModal("mass-add-labels-modal",(t=>{let{ids:n,type:o,module:s,service:a,hintText:r,usedLabelsHintText:l,onSubmit:c}=t;e.$modals.open({name:"mass-add-labels-modal",props:{ids:n,type:o,module:s,service:a,hintText:r,usedLabelsHintText:l},onSubmit:c,component:()=>i.e(3310).then(i.bind(i,83310))})})),onShowModal("multiple-psk-form-modal",(function(){let{id:t=0,onClose:n=()=>{},onDismiss:o=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.$modals.open({name:"multiple-psk-form-modal",props:{id:t},onSubmit:()=>{reloadLastDataTable()},onClose:n,onDismiss:o,component:()=>i.e(9170).then(i.bind(i,59170))})})),onShowModal("multiple-psk-delete-modal",(function(){let{id:t=0,onClose:n=()=>{},onDismiss:o=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.$modals.open({name:"multiple-psk-delete-modal",props:{id:t},onSubmit:()=>{reloadLastDataTable()},onClose:n,onDismiss:o,component:()=>i.e(9929).then(i.bind(i,69929))})})),onShowModal("multiple-psk-services-reset-password-modal",(t=>{e.$modals.open({name:"multiple-psk-services-reset-password-modal",props:{id:t},onSubmit:()=>{reloadLastDataTable()},component:()=>i.e(9686).then(i.bind(i,39686))})})),onShowModal("multiple-psk-print-templates",(t=>{e.$modals.open({name:"multiple-psk-print-templates",props:t,component:()=>i.e(3679).then(i.bind(i,13679))})})),onShowModal("dns-host-form-modal",(function(){let{id:t=0,onSubmit:n=()=>{},onClose:o=()=>{},onDismiss:s=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.$modals.open({name:"dns-host-form-modal",props:{id:t},onSubmit:n,onClose:o,onDismiss:s,component:()=>i.e(2862).then(i.bind(i,2862))})})),onShowModal("dns-host-delete-modal",(function(){let{id:t=0,onSubmit:n=()=>{},onClose:o=()=>{},onDismiss:s=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.$modals.open({name:"dns-host-delete-modal",props:{id:t},onSubmit:n,onClose:o,onDismiss:s,component:()=>i.e(8146).then(i.bind(i,68146))})})),onShowModal("hardware-nas-identifier-form-modal",(t=>{let{nasIdentifier:n,callTo:o}=t;e.$modals.open({name:"hardware-nas-identifier-form-modal",props:{nasIdentifier:n,callTo:o},component:()=>i.e(1151).then(i.bind(i,31151))})})),onShowModal("customer-sub-account-services-info",(t=>{let{customerId:n}=t;e.$modals.open({name:"customer-sub-account-services-info",props:{customerId:n},component:()=>i.e(5251).then(i.bind(i,55251))})})),onShowModal("change-service-denied",(t=>{let{title:n,warning:o}=t;e.$modals.open({name:"change-service-denied",props:{title:n,warning:o},component:()=>i.e(458).then(i.bind(i,20458))})}))},cu="XTwigPage",du={name:"App",data(){return{routeViewKey:this.$route.fullPath,LAYOUT_EMPTY:Q.JO,refreshing:!1,exclude:cu}},beforeMount(){this.SET_MENU(spl_config.menuStructure),this.SET_ADMIN(spl_config.admin),this.SET_HEADER_SHORTCUTS(spl_config.headerShortcuts),this.SET_LOGO(spl_config.header),this.SET_FOOTER(spl_config.footer),this.SET_LICENSE(spl_config.license),this.$store.commit(`search/${b.oiR}`,spl_config.search_entities),this.SET_SERVER_SIDE_CONFIG(spl_config.serverSideConfig),this.SET_DOCUMENTATION_CONFIGS(spl_config.documentationConfig),this.SET_NUMBER_CONFIG(spl_config.numberConfig),this.SET_ON_BOARDING_STEPS(spl_config.onBoardingSteps),this.SET_FIRST_DAY_OF_THE_WEEK(spl_config.firstDayOfWeek),this.SET_WEEKENDS(spl_config.weekends),this.SET_APP_CHILD_REFERENCES(this.$refs),this.setTitle(this.$route)},mounted(){this.$router.beforeEach(((e,t,n)=>{t.fullPath!==e.fullPath&&(splynx_event_bus.emit("before_switch_page"),checkUnsavedDataBeforeLeavePage((()=>{n()}),(()=>{n(!1)})))})),this.$router.afterEach((e=>{this.setTitle(e),removeWebUiPopovers(),this.showNotFoundPage||window.closeAllVueDialogs(),this.$nextTick((()=>{splynx_event_bus.emit("after_switch_page"),this.openModalFromUrl()}))})),lu(this),add_socket_listener("after_system_upgrade",(()=>{let e=`${this.$t("common","System has been updated. The page may not work correctly.")} <br><b>${this.$t("common","Please refresh the page")}</b><br>`;e+=`<button class="btn btn-primary" style="margin-top: 5px;" onclick="location.reload()">${this.$t("common","Refresh")}</button>`,show_warning(e,9999)})),add_socket_listener("UPDATE_VUE_PERMISSIONS_EVENT",(0,w.debounce)(this.loadPermissions,1e3)),this.showEnableTwoFactorModal()},methods:{...(0,a.PY)([b.plQ,b.rOv,b.jzd,b.j08,b.l7W,b._tS,b.Y4l,b._vr,b.dF0,b.iye,b.qPR,b.JyH,b.OPw,b.Ey4]),setTitle(e){if(isset(e.meta,"title")){let{title:t}=e.meta,n=this.$t(t[0],t[1],3===t.length?t[2]:null);this.SET_PAGE_TITLE(n)}else this.SET_PAGE_TITLE("")},openModalFromUrl(){let{query:e}=this.$route;if(void 0===e.modal)return;if(2==e["modal-type"])return void open_dialog_new(e.modal);let t={};Object.keys(e).forEach((n=>{let i=n.match(/modal-params\[(.*)\]/);null!==i&&(t[i[1]]=e[n])})),showModal(e.modal,t)},showEnableTwoFactorModal(){this.$store.getters.admin.need_to_enable_two_factor&&window.showModal("two-factor-auth-form",{showCloseButton:!1,height:480})}},computed:{...(0,a.L8)(["refreshRouteKey","showPageError"])},watch:{"$route.fullPath":function(){this.$route.meta.queryKeyRefresh?this.routeViewKey=this.$route.fullPath:this.routeViewKey=this.$route.fullPath.split(/[?, #]+/)[0]},refreshRouteKey(){!0!==this.$route.meta.keepAlive&&(this.routeViewKey=this.refreshRouteKey),this.exclude=this.$route.meta.componentName,this.refreshing=!0,setTimeout((()=>{this.refreshing=!1,this.$nextTick((()=>{this.exclude=cu}))}),200)}},components:{XViewError:Hr,EmptyLayout:Fr,BaseLayout:ru}};const uu=(0,Lr.A)(du,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showPageError.error?n("x-view-error",{attrs:{application:"admin",error:e.showPageError}}):e.$route.meta.layout===e.LAYOUT_EMPTY?n("empty-layout",[n("router-view",{key:e.routeViewKey})],1):n("base-layout",[e.$route.meta.keepAlive?e._e():n("router-view",{key:e.routeViewKey}),n("keep-alive",{attrs:{max:20,exclude:e.exclude}},[!e.refreshing&&e.$route.meta.keepAlive?n("router-view",{key:e.routeViewKey,ref:"routerViews"}):e._e()],1)],1)}),[],!1,null,null,null).exports;o.default.use(E),o.default.use(I),o.default.use(s.Ay),o.default.use(l(),{componentName:"VModal",dialog:!1}),o.default.use(a.Ay),o.default.use(A),o.default.use(k),o.default.use(O.Ay),window.splynx_event_bus=new v,void 0===window.spl_config&&(window.spl_config={language:"en",spl_user_id:null,menuStructure:[],search_entities:null,header:{logo:""},admin:null,adminOnPage:null});let pu=new m(window.spl_config.language,window.spl_config.listTranslateCategories);i(98260),moment.locale(window.spl_config.language),window.xApp=new o.default({router:Gc,store:new a.Ay.Store(_r),splang:pu.splang,render:e=>e(uu),beforeCreate(){this.initAjaxInterceptors()},methods:{...(0,a.PY)([b.qPd]),refreshRoute(){this.REFRESH_ROUTE()}}}),xApp.$mount("#app"),o.default.config.devtools=!1},50884:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(58740);var i=n(54059);const o={data:()=>({permissions:{}}),methods:{...(0,i.i0)("admin_permissions",["loadPermissions"]),usePermissions(){this.instanceClass&&(this.permissions=this.instanceClass.getPermissions(this.$route.meta.controller))},adminCan(e){return this.permissions[e]},getPermissionsByKey(e,t){if(t)return this.map[e][t];if(e)return this.map[e];throw new Error(`Controller ${e} not specified`)}},computed:{...(0,i.L8)("admin_permissions",["instanceClass","map"])}}},92649:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(43838);const i={data:()=>({backgroundUpdates:{},backgroundFunctions:{}}),activated(){this._makeUpdate()},methods:{setUpdateFunction(e,t){this.backgroundFunctions[e]=t},registerUpdate(e,t){this.backgroundUpdates[e]||(this.backgroundUpdates[e]=[]),this.backgroundUpdates[e].push(t)},_makeUpdate(){Object.keys(this.backgroundUpdates).forEach((e=>{this.backgroundUpdates[e].forEach(((t,n)=>{this.backgroundUpdates[e].splice(n,1),this.backgroundFunctions[e](t)}))}))}}}},95038:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(43838);const i={methods:{updateRows(e){let{rows:t}=e;const n=`#${this.tableId}`,i=this.eventName;if(!$(n).length)return this.registerUpdate(i,{rows:t}),!1;const o=$(n).DataTable(),s=t.map((e=>e.id)),a=o.rows(((e,t)=>s.includes(t.id))),r=[],l=function(e){return`<div class="action-cell row-gap-16 column-gap-12">${e.join("")}</div>`};a.every((function(){const e=this.data();r.push(e.id);const n=t.find((t=>t.id===e.id));n.actions=l(n.actions),this.data({...e,...n})}));const c=s.filter((e=>!r.includes(e)));c.length&&(c.forEach((e=>{const n=t.find((t=>t.id===e));if(!n.actions)return!1;const i=l(n.actions);o.row.add({...n,actions:i})})),o.draw().sort())}}}},59756:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={props:{id:[Number,String],type:String,isPws:Boolean,audioFormat:String,downloadUrl:[String,Boolean],ratio:String,title:String,url:String,size:String,link:String,name:String},computed:{elementId(){return`message_attachment_${this.id}`}},methods:{downloadFile:e=>window.download_by_iframe(e),attachmentsUpdated(){window.initPhotoSwiper()}},mounted(){setTimeout((()=>{this.attachmentsUpdated(document.querySelector(".splynx-photo-swiper"))}),0)}}},23777:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={data:()=>({calendarColored:!1}),mounted(){this.calendarColored=JSON.parse(localStorage.getItem("scheduling-calendar-colored"))},methods:{toggleColorOnScheduler(){this.calendarColored=!this.calendarColored,localStorage.setItem("scheduling-calendar-colored",this.calendarColored)}}}},37943:(e,t,n)=>{"use strict";n.d(t,{Wy:()=>s,A1:()=>r,Dg:()=>l,um:()=>c,P$:()=>p,nW:()=>h,KH:()=>f,mL:()=>m,yS:()=>d,NU:()=>g,CQ:()=>v,$g:()=>b,jY:()=>y,aP:()=>w,Q3:()=>_,AM:()=>I,Vt:()=>T,T5:()=>E,Xv:()=>S,DB:()=>C,hz:()=>O});var i=n(54059);const o="scheduling_calendars",s={methods:{__addressMixin_loadData(){this.setAddress(this.model.address)},setAddress(e){this.setAddressAction(e)},...(0,i.i0)(o,["setAddressAction"])},computed:{...(0,i.L8)(o,["getTaskAddress"])},watch:{"model.address":function(e){this.setAddress(e)},getTaskAddress(e){e!==this.model.address&&(this.model.address=e)}}};var a=n(8974);const r={data:()=>({relatedToProjectData:{}}),methods:{__changeHandlersMixin_loadData(){this.projectId&&this.newRecord&&this.changeProject(this.model.project_id)},async changeTitle(){return(this.doesHasCurlyBrackets(this.model.title)||this.renderForTemplatesApplied("schedulingtask-title"))&&(this.changeRenderForTemplates("schedulingtask-title",this.model.title),await this.renderTemplates()),!0},changeDescription(){(this.doesHasCurlyBrackets(this.model.description)||this.renderForTemplatesApplied("admin_scheduling_task_create_description_area_froala_input"))&&(this.templatesForRender.admin_scheduling_task_create_description_area_froala_input=this.model.description,this.renderTemplates())},changeAdmin(){this.checkPartners(),this.renderTemplates()},changeProject(e){null!==e&&isset(this.relatedToProjectData,[e])&&(this.checkPartners(),this.options.statuses=this.relatedToProjectData[e].statuses,this.$nextTick((()=>{(0,a.empty)(this.workflowStatusIDFromModel)&&(this.model.workflow_status_id=this.relatedToProjectData[e]?.statuses[0]?.id)})))},changeTaskGeoDataByParamsHandler(e){let t=e.scenario;e.address=this.model.address,e.gps=this.model.gps,(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks/view--define-geo-data-change?type=${t}_change`,data:e,method:"POST"}).then((e=>{e.need_change&&(this.setAddressAction(e.address),this.setCoordinateAction(e.marker),this.model.address=e.address,this.model.gps=e.marker,this.setGeoDataSource(e.src,"address",e.address),this.setGeoDataSource(e.src,"marker",e.marker),this.$nextTick((()=>{"function"==typeof this.formMapPreview&&this.formMapPreview(e.marker)})))}))}}},l={methods:{__changesMixin_loadData(){this.statusId&&this.newRecord&&this.changeStatus(this.model.workflow_status_id),this.locationId&&this.newRecord&&this.changeLocation(this.model.location_id)},changeStatus(){this.$nextTick((()=>{this.model.workflow_status_id=this.statusId}))},changeLocation(){this.$nextTick((()=>{this.model.location_id=this.locationId}))}}},c={data:()=>({checklistTemplateItems:[]}),methods:{renderChecklistTemplate(e){return new Promise(((t,n)=>{(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks/view--load-checklist-items?id=${this.model.id}&checklist=${e}`,method:"GET"}).then((e=>{this.updateChecklist([...e]),t()})).catch((e=>{n(e)}))}))},getChecklistByTemplate(e){return new Promise(((t,n)=>{(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks/view--load-checklist-by-template?id=${e}`,method:"GET"}).then((e=>{this.checklistTemplateItems=e,t()})).catch((e=>{n(e)}))}))},...(0,i.i0)("task_view_checklist",["updateChecklist"])}},d={data:()=>({redirectToTaskPage:!1}),methods:{goToTaskPage(){if(this.model.id)return this.hideSidebar(),void switch_page(`/admin/scheduling/tasks/view?id=${this.id}`);this.redirectToTaskPage=!0,this.$refs.form.submit()}}},u="scheduling_calendars",p={methods:{__coordinatesMixin_loadData(){this.setCoordinate(this.model.gps)},...(0,i.i0)(u,["setCoordinateAction"]),setCoordinate(e){this.setCoordinateAction(e)},addGeoData(){return new Promise((e=>{(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks--add-geo-data-task?id=${this.model.id}&geocode=true`,method:"POST",data:{address:this.model.address}}).then((t=>{t.result?(this.setCoordinate(t.coordinates),this.$showSuccess(t.message,5)):this.$showError(t.message,5),e(t.coordinates)}))}))}},computed:{coordinateParams(){return{options:{id:"scheduling_task_preview_coordinate",type:"text",disabled:!0},button:[{id:"scheduling_task_preview_get_coordinate",class:"icon-ic_fluent_my_location_24_regular ",options:{class:"btn btn-outline-secondary btn-icon cursor-pointer "+(this.disableFields?"disabled":"")},handler:()=>{this.disableFields||this.addGeoData().then((e=>{"function"==typeof this.formMapPreview&&this.formMapPreview(e)}))}},{id:"scheduling_task_preview_coordinate_button",class:"icon-ic_fluent_map_24_regular",options:{class:"btn btn-outline-secondary btn-icon cursor-pointer "+(this.disableFields?"disabled":"")},handler:()=>{this.disableFields||(this.setCoordinate(this.model.gps),this.setAddress(this.model.address),showModal("scheduling-task-preview-geo",{taskId:this.model.id,onSubmit:e=>{"function"==typeof this.formMapPreview&&this.formMapPreview(e)}}))}}]}},...(0,i.L8)(u,["getTaskCoordinate"])},watch:{"model.gps":function(e){this.setCoordinate(e)},getTaskCoordinate(e){e!==this.model.gps&&(this.model.gps=e)}}},h={data:()=>({curlyBrackets:/({{)(( )*([a-z])*(\d)*(\.)*(\[)*(')*(\])*(_)*)+(}})/}),methods:{doesHasCurlyBrackets(e){return e&&this.curlyBrackets.test(e)}}},f={data:()=>({needShowServiceField:!1}),methods:{...(0,i.i0)("scheduling_resources",["updateCustomerOptions"]),__customerMixin_loadData(e){this.needShowServiceField=e.resources.options.need_show_service_field,this.relatedToProjectData=e.resources.related_to_project_data,this.needShowServiceField&&this.getRelated()},processDataFromSelect(){let e=$(`#scheduling_task_${this.isSidebar?"preview":"customer_details"}_related_customer_id`).select2("data");if(void 0===e)return!1;(0,a.empty)(e[0]?.partner_id)||(this.model.partner_id=e[0].partner_id),this.isSidebar||this.updateCustomerOptions(e),(0,a.empty)(e[0]?.location_id)||(this.model.location_id=e[0].location_id)},changeCustomer(e){Array.isArray(e)&&(this.model.related_customer_id=e[0].id),(0,a.empty)(e)&&(this.model.related_service_id="",this.model.partner_id="",this.model.location_id="0"),this.processDataFromSelect(),this.checkPartners(),this.renderTemplates(),this.needShowServiceField&&this.getRelated()}},computed:{customerAllParams(){return{placeholder:this.$t("scheduling","Select customer"),data:this.options.customer_options,options:{id:`scheduling_task_${this.isSidebar?"preview":"customer_details"}_related_customer_id`,name:`${this.className}[related_customer_id]`,class:this.showWarningIncorrectValues("related_customer_id")&&this.model.related_customer_id?"incorrect":"",disabled:this.disableFields},ajaxUrl:"/admin/scheduling/tasks--find-customers",searchKey:"login",ajaxData:{partner_id:(0,a.empty)(this.model.partner_id)?0:this.model.partner_id}}}}},m={data:()=>({duration:1,timeUnit:"minutes",format:"YYYY-MM-DD HH:mm:ss"}),methods:{formatDateTime:a.formatDateTime,__dateMixin_init(){const e=moment(this.model.scheduled_from).seconds(0);e.isValid()&&this.defineMinDate(e)},defineMinDate(e){const t=`#${this.formId} #scheduling_task_preview_end_date`;$(t).length&&($(t).data("daterangepicker").minDate=e.subtract(55,"minutes"),$(t).trigger("change"))},changeStartDate(e){if((0,a.empty)(e))return;const t=moment(e).seconds(0);if(this.model.scheduled_from=t.format(this.format),t.isValid()){const e=`#${this.formId} #scheduling_task_preview_end_date`;this.duration>1?(this.model.scheduled_to=t.add(this.duration,this.timeUnit).format(this.format),$(e).data("daterangepicker").minDate=t.subtract(this.duration,this.timeUnit).add(5,"minutes"),$(e).trigger("change")):(this.model.scheduled_to=t.add(60,"minutes").format(this.format),this.duration=60,this.model.formatted_duration="60m",$(e).data("daterangepicker").minDate=t.subtract(55,"minutes"),$(e).trigger("change"))}this.$nextTick((()=>{$(`#${this.formId} #scheduling_task_preview_end_date`).trigger("change")}))},changeEndDate(e){if((0,a.empty)(e))return;const t=moment(e).seconds(0);if(this.model.scheduled_to=t.format("YYYY-MM-DD HH:mm:ss"),t.isValid()&&this.model.scheduled_from){let e=t.diff(moment(this.model.scheduled_from),this.timeUnit);this.duration=e>0?e:1,this.model.formatted_duration=`${this.duration}m`}}}},g={methods:{beforeSend(e){return this.parentTaskId&&(e.parent_task_id=this.parentTaskId),e},onFormSuccess(e){e.result?(this.newRecord&&this.permissions.view?this.$showNotify("success",e.message,6,!1,{name:this.$t("scheduling","View"),redirect_url:`/admin/scheduling/tasks/view?id=${e.options.event.id}`}):this.$showSuccess(e.message,4),this.hideSidebar(),this.redirectToTaskPage?(this.redirectToTaskPage=!this.redirectToTaskPage,switch_page(`/admin/scheduling/tasks/view?id=${e.options.event.id}`)):reloadLastDataTable(),this.parentTaskId&&this.$root.REFRESH_ROUTE(),splynx_event_bus.emit("check-partners-task-view")):(this.$showError(e.message,4),this.redirectToTaskPage=!1)}}},v={mounted(){window.closeSelects(),$(".dropdown-toggle.show").dropdown("toggle")}},b={data:()=>({mentionsList:[]}),methods:{__mentionsMixin_loadData(){this.getTaskMentions()},getTaskMentions(){(0,a.promisifiedAjax)({url:"/admin/scheduling/tasks--get-mentions",method:"GET",data:{partner_id:this.model.partner_id,assign_to:this.model.assigned_to,assignee:this.model.assignee}}).then((e=>{this.mentionsList=e}))}}},y={data:()=>({correctPartnerId:""}),mounted(){this.correctPartnerId=this.model.partner_id},methods:{__partnersMixin_loadData(){this.resetSidebarTaskWarningsArray(),this.newRecord||this.checkPartners()},...(0,i.i0)("task_view_warnings",["resetSidebarTaskWarningsArray","updateTaskWarningsArray","updateSidebarTaskWarningsArray"]),checkPartners(){if(this.model.partner_id){let e={partner_id:this.model.partner_id,project_id:this.model.project_id,related_customer_id:this.model.related_customer_id,assigned_value:this.model.assigned_value,parent_task_id:this.parentTaskId};(0,a.promisifiedAjax)({type:"POST",url:`/admin/scheduling/tasks/view--check-partners?id=${this.model.id}&withOutModelName=true`,data:e}).then((e=>{this.errorMessages=[],this.correctPartnerId=e.related_customer_id?.correct_partner_id||this.model.partner_id,this.isSidebar?this.updateSidebarTaskWarningsArray(e):this.updateTaskWarningsArray(e)}))}}},computed:{formattedPartners(){if(this.model.related_customer_id){const e=this.options.partners[this.correctPartnerId],t=this.$t("scheduling","(Customer's partner)");if(e&&!e.includes(t))return{...this.options.partners,[this.correctPartnerId]:`${e} ${t}`}}return this.options.partners}}},w={data:()=>({showRelatedServices:!1,serviceRelated:{}}),methods:{changeRelatedServices(){this.renderTemplates()},getRelated(){let e=this.model.related_customer_id||0;(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks--load-services?customerId=${e}`}).then((e=>{(0,a.empty)(e)?(this.showRelatedServices=!1,this.serviceRelated={0:this.$t("scheduling","No services")}):(this.serviceRelated=e,this.showRelatedServices=!0)}))}}},_={methods:{...(0,i.i0)("sidebar",["hideSidebar"])}},T={data:()=>({templatesForRender:{}}),methods:{renderForTemplatesApplied(e){return this.templatesForRender[e]},changeRenderForTemplates(e,t){this.templatesForRender[e]=t}}},E={data:()=>({template:0,oldTemplate:0}),methods:{renderTemplates(){return new Promise((e=>{setTimeout((()=>{let t=this.model.related_customer_id??0,n=this.model.related_service_id??0;return new Promise((()=>{(0,a.promisifiedAjax)({url:"/admin/scheduling/tasks--render-templates",data:{id:Number(t),template_id:this.template,assignee:this.model.assigned_value,templates:this.templatesForRender,service_id:Number(n)},method:"POST"}).then((t=>{this.convertDataFromTemplate(t),e()}))}))}),0)}))},convertDataFromTemplate(e){for(let t in e)switch(t){case"schedulingtask-title":this.model.title=e[t];break;case"admin_scheduling_task_create_description_area_froala_input":this.model.description=e[t],this.updateFroalaEditor(e[t]);break;case"title":this.doesHasCurlyBrackets(e[t])?this.changeRenderForTemplates("schedulingtask-title",e[t]):delete this.templatesForRender["schedulingtask-title"],this.model.title=e[t];break;case"description":this.doesHasCurlyBrackets(e[t])?this.changeRenderForTemplates("admin_scheduling_task_create_description_area_froala_input",e[t]):delete this.templatesForRender.admin_scheduling_task_create_description_area_froala_input,this.model.description=e[t],this.updateFroalaEditor(e[t]);break;case"additional_fields":this.model.additional_attributes=e[t];break;case"project_id":0!=e[t]&&(this.model[t]=e[t]);break;default:this.model[t]=e[t]}},changeTemplate(e){if(this.oldTemplate!==e&&!(0,a.empty)(e))return new Promise((t=>{(0,a.promisifiedAjax)({url:`/admin/scheduling/tasks/view--load-data-template?templateId=${e}`,method:"GET"}).then((e=>{!0!==e.status||(0,a.empty)(e.result)||(this.changedModel?window.vue_confirm_dialog(this.$t("scheduling","Are you sure, you want to do this? If you change the template, your changes in the task will be lost."),(()=>{this.convertDataFromTemplate(e.result),this.oldTemplate=this.template,this.renderTemplates()}),(()=>{this.template=this.oldTemplate})):(this.convertDataFromTemplate(e.result),this.renderTemplates())),t()}))}))},updateFroalaEditor(e){this.$refs.froala&&($(this.$refs.froala.$el).find("textarea").froalaEditor("html.set",e),$(this.$refs.froala.$el).find("textarea").trigger("froalaEditor.contentChanged",e))}}};n(43838);const S={data:()=>({errorMessages:[]}),methods:{getWarningType(e){switch(e){case"parent":return"parent_task_id";case"subtask":return"related_subtask";case"related":return"related_tasks";case"ticket":return"linked_ticket";default:return!1}},getWarningMessage(e){this.errorMessages[e]=[];const t=(this.isSidebar?this.warningsSidebarTask:this.warningsTask)[e];if(this.warningCheckAsList(t)){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].partner){this.errorMessages[e].push(this.$t("scheduling","partner"));break}}else t.partner&&this.errorMessages[e].push(this.$t("scheduling","partner")),t.project&&this.errorMessages[e].push(this.$t("scheduling","parent project"));return this.$t("scheduling","Incorrect: {errors}!",{errors:this.errorMessages[e].join(this.$t("scheduling"," and "))})},showWarningIncorrectValues(e,t){const n=this.isSidebar?this.warningsSidebarTask:this.warningsTask,i=n[e];if(!this.warningCheckAsList(i))return!(0,a.empty)(n)&&(i?.partner||i?.project);{const e=t.id.toString();if(i[e]&&i[e].partner)return!0}return!1},warningCheckAsList:e=>"object"==typeof e&&!Object.prototype.hasOwnProperty.call(e,"project")&&!Object.prototype.hasOwnProperty.call(e,"partner")},computed:{...(0,i.L8)("task_view_warnings",["warningsTask","warningsSidebarTask"])}};var A=n(56939);const C={data:()=>({selectedWatchers:[]}),mounted(){this.fetchWatchers()},computed:{watchersList(){return this.adminsOptions}},methods:{fetchWatchers(){A.A.loadWatchers(this.model.id).then((e=>{this.selectedWatchers=e}))}}};var k=n(52403),x=n(15948);const I={created(){remove_socket_listener("scheduling_calendar_event"),add_socket_listener("scheduling_calendar_event",(e=>{let{action:t,event:n}=e;if("edit"!==t)return!1;if(n.id!==this.model.id)return!1;for(let e in n)"scheduled_from"===e||"scheduled_to"===e?(this.model.is_scheduled=!0,n[e]&&(this.model[e]=k.wt.parseDate(new x.A(n[e])))):this.model[e]=n[e]}))}},O={data:()=>({geoDataSrc:{service:{address:"",marker:"",src:""},customer:{address:"",marker:"",src:""}}}),mounted(){this.geoDataSrc=this.resources.geo_data_src},methods:{setGeoDataSource(e,t,n){this.geoDataSrc[e]||(this.geoDataSrc[e]={address:"",marker:"",src:""}),("customer"!==e||this.model.related_customer_id)&&("service"!==e||this.model.related_service_id)?this.geoDataSrc[e][t]=n:this.geoDataSrc[e][t]=""},__geoDataSourceMixin__loadData(e){this.geoDataSrc=e.resources.geo_data_src}},computed:{isGeoDataSrcService(){return this.geoDataSrc.service.address||this.geoDataSrc.service.marker},isServiceAddress(){return!!this.model.address&&this.isGeoDataSrcService&&this.model.address===this.geoDataSrc.service.address},isServiceGps(){return!!this.model.gps&&this.isGeoDataSrcService&&this.model.gps===this.geoDataSrc.service.marker},isCustomerAddress(){return!!this.model.address&&this.model.address===this.geoDataSrc.customer.address},isCustomerGps(){return!!this.model.gps&&this.model.gps===this.geoDataSrc.customer.marker},gpsSource(){let e="";return this.isCustomerGps&&(e=this.$t("scheduling","Customer coordinates")),this.isServiceGps&&(e=this.$t("scheduling","Service coordinates")),this.isArchived&&e&&(e=`(${e})`),e},addressSource(){let e="";return this.isCustomerAddress&&(e=this.$t("scheduling","Customer address")),this.isServiceAddress&&(e=this.$t("scheduling","Service address")),this.isArchived&&e&&(e=`(${e})`),e}}};n(23777)},63293:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>a,Ro:()=>r,g$:()=>s,jB:()=>o,pr:()=>i});const i="full",o="full",s="double_loading_type",a="first_iteration",r="second_iteration"},91939:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);class o{static async getPageData(){return(0,i.promisifiedAjax)({url:"/admin/config/tools/tax-update--get-page-data",method:"GET"})}static async getLog(){return(0,i.promisifiedAjax)({url:"/admin/config/tools/tax-update--get-log",method:"GET"})}static async update(e){return(0,i.promisifiedAjax)({url:"/admin/config/tools/tax-update--update-tax",method:"POST",contentType:!1,processData:!1,data:e})}static getDownloadLogUrl(){return"/admin/config/tools/tax-update--download-log-file"}static getDownloadPendingServicesLogUrl(){return"/admin/config/tools/tax-update--download-pending-services-log"}}},15023:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(17629),o=n(94300),s=n(65760),a=n(41129);class r{constructor(){let{id:e,conversation_id:t,type:n,author:r,phone:l,created_at:c,updated_at:d,content:u,status:p,ticket:h,attachments:f,location:m,activities:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=e,this.conversationId=t,this.type=n,this.status=p,this.author=r,this.phone=l,this.createdAt=c,this.updatedAt=d,this.content=u,this.activities=g,this.ticket=h??new i.A,this.location=m??new o.A,this.author=r??new s.A,this.attachments=new a.A(f)}withMappedStatus(e){return this.status=e[this.id]??this.status,this}}r.TYPE_OUT="out",r.NOTIFICATION_TYPE="message_and_action",r.TYPE_IN="in"},65760:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(){let{id:e,role:t,name:n,is_deleted:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=e,this.name=n??"",this.role=t??i.ROLE_CUSTOMER,this.isDeleted=o||!1}}i.ROLE_CUSTOMER="customer",i.ROLE_ADMIN="admin",i.ROLE_LEAD="lead"},94300:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(){let{latitude:e,longitude:t,address:n,lat:i,lng:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.address=n??"",this.lat=e??i??"",this.lng=t??o??""}}},41857:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(8974),o=n(32264),s=n(95859),a=n(9133);class r{constructor(e,t,n){this._url="",this._chat="",this._central=null,this._loaded={first:new s.A,second:new a.A},this._url=t,this._chat=e,this._central=n}get(){return new o.A(this._loaded.first,this._loaded.second)}async fetchEarly(){const e={central:this._central,direction:r.BEFORE,fullPath:!0},t=this._formRequestUrl(e),n=await r._requestHalfPart(t);return this._loaded.second=new a.A(n),this._loaded.first.laterMessage=this._loaded.second.laterMessage,!0}async fetchLater(){const e={central:this._central,direction:r.AFTER,fullPath:!0},t=this._formRequestUrl(e),n=await r._requestHalfPart(t);return this._loaded.first=new s.A(n),this._loaded.second.earlierMessage=this._loaded.first.earlierMessage,!0}async fetch(){let e;e=this._central?this._formRequestUrl({direction:r.AFTER,include:!0,central:this._central}):this._formRequestUrl({});const t=await r._requestHalfPart(e);let n=new s.A(t);if(n.messages.length<=r.COUNT&&null==n.earlierMessage&&null==n.laterMessage)return this._loaded.first=n,!0;const i={direction:r.BEFORE};this._central?i.central=this._central:i.central=n.central,e=this._formRequestUrl(i);const o=await r._requestHalfPart(e);let l=new a.A(o);return this._loaded.first=n,this._loaded.second=l,!0}static async _requestHalfPart(e){let{data:t}=await(0,i.promisifiedAjax)({url:e});return t}_formRequestUrl(e){const t=e.include?"&include-offset=1":"",n=e.fullPart?`&per-page=${r.PER_PAGE}`:`&per-page=${r.COUNT}`,i=`${e.central?`&offset=${e.central}`:""}${e.direction?`&direction=${e.direction}`:""}`;return`${this._url}?chatId=${this._chat}${i}${n}${t}`}}r.AFTER="after",r.PER_PAGE=30,r.COUNT=r.PER_PAGE/2,r.BEFORE="before";const l="customer",c="lead",d="messengers";class u{constructor(e){this.url=u.TYPE_PATHS[e]}getDatatableAllMessengersFilterUrl(){const e=this.constructor.CONTROLLERS.ALL_SENDERS,t=this.constructor.ACTIONS.MESSENGER_TABLE_DATA;return`${this.url}/${e}--${t}`}getDatatableUnknownMessengersFilterUrl(){const e=this.constructor.CONTROLLERS.UNKNOWN_SENDERS,t=this.constructor.ACTIONS.MESSENGER_TABLE_DATA;return`${this.url}/${e}--${t}`}async getAllMessengersPageData(){const e=this.constructor.CONTROLLERS.ALL_SENDERS;return new Promise((t=>{(0,i.promisifiedAjax)({url:`${this.url}/${e}`,method:"GET"}).then((e=>{t((0,i.formattedResponse)(e))}))}))}async getUnknownMessengersPageData(){const e=this.constructor.CONTROLLERS.UNKNOWN_SENDERS;return new Promise((t=>{(0,i.promisifiedAjax)({url:`${this.url}/${e}`,method:"GET"}).then((e=>{t((0,i.formattedResponse)(e))}))}))}getDatatableMessengersFilterUrl(e){let{messenger:t,customer_id:n}=e;const i=this.constructor.CONTROLLERS.MESSENGERS,o=this.constructor.ACTIONS.MESSENGER_TABLE_DATA;return`${this.url}/${i}--${o}?messenger=${t}&customerId=${n}`}async getConversationsPageData(){const e=this.constructor.CONTROLLERS.MESSENGERS,t=this.constructor.ACTIONS.CONVERSATIONS_PAGE_DATA;return new Promise((n=>{(0,i.promisifiedAjax)({url:`${this.url}/${e}--${t}`,method:"GET"}).then((e=>{n((0,i.formattedResponse)(e))}))}))}async requestConversation(e){const t=this.constructor.CONTROLLERS.MESSENGERS_CHAT,n=this.constructor.ACTIONS.REQUEST_CONVERSATION;return new Promise((o=>{(0,i.promisifiedAjax)({url:`${this.url}/${t}--${n}?chatId=${e}`,method:"GET"}).then((e=>{o(e)}))}))}async closeChat(e){const t=this.constructor.CONTROLLERS.MESSENGERS_CHAT,n=this.constructor.ACTIONS.CLOSE_CHAT;return new Promise((o=>{(0,i.promisifiedAjax)({url:`${this.url}/${t}--${n}`,method:"GET",data:{chatId:e}}).then((e=>{o((0,i.formattedResponse)(e))}))}))}async sendMessage(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const o=this.constructor.CONTROLLERS.MESSENGERS_CHAT,s=this.constructor.ACTIONS.SEND_MESSAGE;return new Promise((a=>{(0,i.promisifiedAjax)({url:`${this.url}/${o}--${s}`,method:"POST",data:{chatId:e,content:t,files:n}}).then((e=>{a((0,i.formattedResponse)(e))}))}))}async fetchPart(e,t){const n=this.constructor.CONTROLLERS.MESSENGERS_CHAT,i=this.constructor.ACTIONS.LOAD_MESSAGES,o=new r(e,`${this.url}/${n}--${i}`,t);return await o.fetch(),o.get().get()}async fetchEarly(e,t){const n=this.constructor.CONTROLLERS.MESSENGERS_CHAT,i=this.constructor.ACTIONS.LOAD_MESSAGES,o=new r(e,`${this.url}/${n}--${i}`,t);return await o.fetchEarly(),o.get().get()}async loadLaterPart(e,t){const n=this.constructor.CONTROLLERS.MESSENGERS_CHAT,i=this.constructor.ACTIONS.LOAD_MESSAGES,o=new r(e,`${this.url}/${n}--${i}`,t);return await o.fetchLater(),o.get().get()}async getChatData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?new Promise((t=>{const n=this.constructor.CONTROLLERS.MESSENGERS_CHAT,o=this.constructor.ACTIONS.GET_CHAT_DATA;(0,i.promisifiedAjax)({url:`${this.url}/${n}--${o}`,method:"GET",data:{chatId:e}}).then((e=>{let{result:n,data:o,message:s}=e;t({result:n,data:(0,i.formattedResponse)(o),message:s})}))})):[]}async getTabsPermissions(){const e=this.constructor.ACTIONS.LOAD_TABS_PERMISSIONS;return new Promise((t=>{(0,i.promisifiedAjax)({url:`${this.url}--${e}`,method:"GET"}).then((e=>{t((0,i.formattedResponse)(e))}))}))}async getReAssignAdmins(e){const t=this.constructor.CONTROLLERS.MESSENGERS_CHAT,n=this.constructor.ACTIONS.GET_ADMINS;return new Promise((o=>{(0,i.promisifiedAjax)({url:`${this.url}/${t}--${n}?chatId=${e}`,method:"GET"}).then((e=>{o((0,i.formattedResponse)(e))}))}))}async reAssignAdmin(e,t){const n=this.constructor.CONTROLLERS.MESSENGERS_CHAT,o=this.constructor.ACTIONS.REASSIGN_ADMIN;return new Promise((s=>{(0,i.promisifiedAjax)({url:`${this.url}/${n}--${o}?chatId=${e}&adminId=${t}`,method:"GET"}).then((e=>{s((0,i.formattedResponse)(e))}))}))}}u.TYPE_PATHS={[l]:"/admin/customers/communication",[c]:"/admin/crm/leads/communication",[d]:"/admin/support/messengers"},u.CONTROLLERS={MESSENGERS:"messengers",MESSENGERS_CHAT:"messengers-chat",UNKNOWN_SENDERS:"unknown-senders",ALL_SENDERS:"all-senders"},u.ACTIONS={MESSENGER_TABLE_DATA:"load-chats",REQUEST_CONVERSATION:"assign-to-logged-admin",CONVERSATIONS_PAGE_DATA:"get-page-data",CLOSE_CHAT:"close-chat",SEND_MESSAGE:"send-message",REASSIGN_ADMIN:"reassign-admin",GET_ADMINS:"load-administrators",GET_CHAT_DATA:"info",LOAD_MESSAGES:"load-messages",LOAD_TABS_PERMISSIONS:"load-tabs-permissions"}},41129:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isPws=e["data-is-pws"],this.downloadUrl=e["data-pws-download-url"],this.ratio=e["data-pws-ratio"],this.title=e["data-pws-title"],this.type=e["data-pws-type"],this.url=e["data-pws-url"],this.name=e.name,this.id=e.id,this.size=e.size,this.link=e.link,this.isDownloadAllUrl=e.is_download_all_url,this.downloadAllUrl=e.download_all_url,this.isAudio=e.is_audio||e.isAudio,this.audioFormat=e.audioFormat||e.audio_format,this.audioAlternativeLink=e.audio_alternative_link||e.audioAlternativeLink,this.audioAlternativeFormat=e.audio_alternative_format||e.audioAlternativeFormat}}class o extends i{}class s extends i{}class a extends i{}class r extends i{}class l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.list=[...e].map(l._defineTypes)}static _defineTypes(e){return e["data-pws-type"]===l.IMAGE?new s(e):e["data-pws-type"]===l.IFRAME?new a(e):e.is_audio||e.isAudio?new r(e):new o(e)}get(){return this.list}getImages(){return this.list.filter((e=>e instanceof s))}getIframes(){return this.list.filter((e=>e instanceof a))}getDocuments(){return this.list.filter((e=>e instanceof o))}getAudio(){return this.list.filter((e=>e instanceof r))}}l.IFRAME="iframe",l.IMAGE="image",l.DOCUMENT="document"},30741:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);class o{static soundsList(){return{"software-interface-start":"Software interface start","bell-notification":"Bell notification","confirmation-tone":"Confirmation tone","correct-answer-reward":"Correct answer reward","correct-answer-tone":"Correct answer tone","digital-quick-tone":"Digital quick tone","doorbell-single-press":"Doorbell single press","elevator-tone":"Elevator tone","gaming-lock":"Gaming lock","guitar-notification-alert":"Guitar notification alert","happy-bells-notification":"Happy bells notification","interface-hint-notification":"Interface hint notification","interface-option-select":"Interface option select","magic-marimba":"Magic marimba","message-pop-alert":"Message pop alert","positive-notification":"Positive notification","sci-fi-click":"Sci-fi click","sci-fi-confirmation":"Sci-fi confirmation","sci-fi-reject-notification":"Sci-fi reject notification","software-interface-back":"Software interface back","software-interface-remove":"Software interface remove","tile-game-reveal":"Tile game reveal","wrong-answer-fail-notification":"Wrong answer fail notification"}}static async playNotification(e){const t=new Audio(`/audio/notifications/${e}.mp3`);await t.play()}static fetchChats(){return(0,i.promisifiedAjax)({url:"/admin/support/chat_box/chat-box--load-chats"})}static fetchChatBoxConfigPageData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"config";return(0,i.promisifiedAjax)({url:`/admin/config/support/chat-box--get-page-data?type=${e}`})}}o.DEFAULT_SOUND="software-interface-start"},9133:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(15493);class o extends i.A{constructor(e){super(e),this.central=this.latestMessage}}},15493:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(){let{messages:e,conversations:t,order_messages:n,prev_message_id:i,next_message_id:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.messages=[],this.conversations={},this.order=[],this.messages=e??[],this.conversations=t??{},this.order=n??[],this.earlierMessage=o??null,this.earliestMessage=this.order[this.order.length-1]??null,this.laterMessage=i??null,this.latestMessage=this.order[0]??null}get(){return{messages:this.messages,conversations:this.conversations,order:this.order}}}},95859:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(15493);class o extends i.A{constructor(e){super(e),this.central=this.earliestMessage}}},32264:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(e,t){this.earlierPart={},this.laterPart={},this.central=null,this.conversations={},this.messages=[],this.order=[],this.isLast=!1,this.isFirst=!1,this.laterPart=e,this.earlierPart=t,this.central=this.laterPart.central,this.isLast=null==this.laterPart.laterMessage,this.isFirst=null==this.earlierPart.earlierMessage}getEarlierCentral(){return this.earlierPart.earliestMessage}getLaterCentral(){return this.laterPart.latestMessage}get(){const e={};return e.isFirst=this.isFirst,e.isLast=this.isLast,e.getEarlierCentral=this.getEarlierCentral.bind(this),e.getLaterCentral=this.getLaterCentral.bind(this),e.earlierMessage=this.earlierPart.earlierMessage,e.laterMessage=this.laterPart.laterMessage,e.messages=[...this.laterPart.get().messages,...this.earlierPart.get().messages],e.conversations={...this.laterPart.get().conversations,...this.earlierPart.get().conversations},e.order=[...this.laterPart.get().order,...this.earlierPart.get().order],e}}},78765:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);class o{static async getPageData(){return(0,i.promisifiedAjax)({url:"/admin/networking/network-sites/hardware--get-page-data"})}static async getPageDataForHardwareView(e){return(0,i.promisifiedAjax)({url:`/admin/networking/monitoring/view--get-entity?id=${e}`})}static async getPageDataForCustomerServices(){return(0,i.promisifiedAjax)({url:"/admin/networking/monitoring/services--get-page-data"})}static async loadServicesList(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";return e.ajax.url(`/admin/networking/monitoring/services--get-services-list?id=${t}&status=${n}`).load()}static async relinkAccessDevice(e,t){return(0,i.promisifiedAjax)({url:"/admin/networking/monitoring/view--relink",data:{id:e,relinkId:t}})}}},15948:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(56077);const o=i.DayPilot.Date},80812:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(56077);const o=i.DayPilot.Duration},52403:(e,t,n)=>{"use strict";n.d(t,{wj:()=>f,kU:()=>g,wm:()=>v,uL:()=>m,d_:()=>d,l8:()=>h,wt:()=>y,V8:()=>u,Oo:()=>p});n(43838);const i=n(56077).DayPilot.Locale,o={dayNames:["يکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayNamesShort:["ی","د","س","چ","پ","ج","ش"],monthNames:["ژانویه","فوریه","مارس","آوریل","مه","ژوئن","ژوئیه","اوت","سپتامبر","اکتبر","نوامبر","دسامبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],timePattern:"H:mm",datePattern:"yy/mm/dd",dateTimePattern:"yy/mm/dd H:mm",timeFormat:"Clock24Hours",weekStarts:6};var s=n(80812),a=n(15948);const r="priority_low",l="priority_medium",c="priority_high",d="day",u="week",p="working_hours",h="full_day",f="#1B2124",m="#ffffff",g="#DFE4ED",v="#F7F8FC",b={en:"en-gb","en-us":"en-us",es:"es-es",cs:"cs-cz",sk:"sk-sk",uk:"uk-ua",it:"it-it",pl:"pl-pl",ca:"ca-es","pt-br":"pt-br",fr:"fr-fr",de:"de-de",nl:"nl-nl",fa:"fa-ir",ps:"en-gb"};class y{static calendarTaskClasses(e){return y.calendarColors[e]||e}static calendarTaskLabels(e){return y.labelColors[e]||e}static getTimeUnits(e){let t;switch(e){case d:t="Minutes";break;case u:t="Hours";break;default:t="Minutes"}return t}static backlogTaskClasses(e){return y.backlogColors[e]||e}static compareDateTimes(e){return e<new a.A.now}static taskAreas(e,t){let{moveTo:n,moveFrom:i,start:o,end:s,taskInPast:a,taskHtml:r}=t;const l=e===d,c=[];return n&&l&&c.push({start:o,end:o.addMinutes(n),html:'<span class="btn-icon"><i class="icon-ic_fluent_vehicle_car_profile_ltr_16_regular"></i></span>',cssClass:`before_task${a}`}),r&&c.push({start:o.addMinutes(n||0),html:r,end:s.addMinutes(-i||0),cssClass:`scheduler_task${a} scheduler_task_${e}`}),i&&l&&c.push({start:s.addMinutes(-i),end:s,html:'<span class="btn-icon"><i class="icon-ic_fluent_vehicle_car_profile_ltr_16_regular"></i></span>',cssClass:`after_task${a}`}),c}static getBackgroundImage(e){return`\n            background-image:url('${e}');\n            background-repeat: no-repeat;\n            background-position: center center;\n            background-size: cover;\n        `}static parseResource(e){if("A0"===e)return"assigned_to_anyone";let t=e.split(""),n=t[0].includes("A")?"admin_":"team_";return t.shift(),n+=t.join(""),n}static parseDate(e){return e.toString("yyyy-MM-dd HH:mm:ss")}static calculateDuration(e,t){return`${new s.A(this.parseDate(e),this.parseDate(t)).totalMinutes()}m`}static localeLanguage(){return b[window.spl_config.language]??b.en}static addCustomLocales(){i.register(new i("fa-ir",o))}}y.calendarColors={[r]:"bg-success",[l]:"bg-warning",[c]:"bg-danger"},y.backlogColors={[r]:"success",[l]:"warning",[c]:"danger"},y.labelColors={[r]:"Low",[l]:"Medium",[c]:"High"}},56939:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);class o{static async loadData(e){return(0,i.promisifiedAjax)({methods:"GET",url:(0,i.withGet)("/admin/scheduling/tasks/view--load-data",{id:e})})}static async loadWatchers(e){return(0,i.promisifiedAjax)({methods:"GET",url:(0,i.withGet)("/admin/scheduling/tasks/view--get-watchers",{id:e})})}static async loadAttachments(e){return(0,i.promisifiedAjax)({methods:"GET",url:(0,i.withGet)("/admin/scheduling/tasks/view--get-attachments",{id:e})})}static async loadInventoryData(e,t){return(0,i.promisifiedAjax)({method:"GET",url:(0,i.withGet)("/admin/scheduling/tasks/view--load-customer-inventory-data",{id:e,customer_id:t})})}static async loadTaskViewInventory(e){return(0,i.promisifiedAjax)({method:"GET",url:(0,i.withGet)("/admin/scheduling/tasks/view--load-inventory",{id:e})})}static async loadTaskInventoryLinkData(e){return(0,i.promisifiedAjax)({method:"GET",url:(0,i.withGet)("/admin/inventory/items--link-to-task-with-items-on-form",{scheduling_task_id:e})})}static async loadTaskInventoryLinkDataForDataTable(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o={id:e};return empty(n)||(o.customer_id=n),(0,i.promisifiedAjax)({method:"POST",url:(0,i.withGet)("/admin/scheduling/tasks/view--get-inventory-items-for-link",o),data:t})}static async loadTaskInventoryLinkItemsForTable(e){return(0,i.promisifiedAjax)({method:"POST",url:"/admin/inventory/items--link-to-task",data:e})}}},17629:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{static isValidTicket(e){let{id:t,url:n,subject:i}=e;return t&&n&&i}constructor(){let{id:e,url:t,subject:n,created_at:i,source:o,reporter:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=e??null,this.url=t??null,this.subject=n??null,this.created_at=i,this.source=o,this.reporter=s}}},54625:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(8974);const o="customer",s="lead";class a{constructor(e){this.url=a.TYPE_PATHS[e]}static getCreateTicketUrl(e){return e?`${a.CREATE_TICKET_URL}?customerId=${e}`:a.CREATE_TICKET_URL}async getTicketsForOptions(e){const t=this.constructor.CONTROLLERS.MESSENGERS_CHAT,n=this.constructor.ACTIONS.GET_MODAL_LINK_TO_TICKET,o=`?customerId=${e}`;return new Promise((e=>{(0,i.promisifiedAjax)({url:`${this.url}/${t}--${n}${o}`,method:"GET"}).then((t=>{e(t)}))}))}async unlinkMessageFromTicket(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=this.constructor.CONTROLLERS.MESSENGERS_CHAT,o=this.constructor.ACTIONS.UNLINK_MESSAGE_FROM_TICKET;return e instanceof Array||(e=[e]),new Promise((s=>{(0,i.promisifiedAjax)({url:`${this.url}/${n}--${o}`,method:"POST",data:{messagesIds:e.join(","),ticketId:t}}).then((e=>{s(e)}))}))}async linkMessageToTicket(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=this.constructor.CONTROLLERS.MESSENGERS_CHAT,o=this.constructor.ACTIONS.LINK_MESSAGE_TO_TICKET;return e instanceof Array||(e=[e]),new Promise((s=>{(0,i.promisifiedAjax)({url:`${this.url}/${n}--${o}`,method:"POST",data:{messagesIds:e.join(","),ticketId:t}}).then((e=>{s(e)}))}))}static async getFormDataForCreatingTicket(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?`?customerId=${e}`:"";return new Promise((e=>{(0,i.promisifiedAjax)({url:a.FORM_DATA_FOR_CREATING_TICKET_URL+t,method:"GET"}).then((t=>{e(t)}))}))}static async getTicketsLabelsData(e){const t=new FormData;return t.append("ids",e),new Promise((e=>{(0,i.promisifiedAjax)({url:a.MASS_ADD_LABELS_TO_TICKETS_URL,method:"POST",data:t,contentType:!1,processData:!1}).then((t=>{e(t)}))}))}}a.CREATE_TICKET_URL="/admin/tickets/create--save",a.MASS_ADD_LABELS_TO_TICKETS_URL="/admin/tickets/opened--change-labels",a.FORM_DATA_FOR_CREATING_TICKET_URL="/admin/tickets/create--get-page-data",a.TYPE_PATHS={[o]:"/admin/customers/communication",[s]:"/admin/crm/leads/communication"},a.CONTROLLERS={MESSENGERS_CHAT:"messengers-chat"},a.ACTIONS={LINK_MESSAGE_TO_TICKET:"link-message-to-ticket",UNLINK_MESSAGE_FROM_TICKET:"unlink-message-from-ticket",GET_MODAL_LINK_TO_TICKET:"get-modal-link-to-ticket"}},48881:(e,t,n)=>{"use strict";n.d(t,{$5$:()=>Xn,$GK:()=>$t,$H3:()=>Nt,$Md:()=>ee,$VC:()=>Ve,$cg:()=>Ue,$gI:()=>w,$qg:()=>A,$s2:()=>kt,$tU:()=>ke,A$3:()=>_e,B0v:()=>Xt,BJx:()=>wt,BQv:()=>ri,CiV:()=>ct,DMJ:()=>fe,Ddi:()=>k,De:()=>dt,DrH:()=>Qe,E1z:()=>zn,ERX:()=>ge,Ey4:()=>g,F7K:()=>Mt,FXT:()=>Ge,FYA:()=>bt,Fe9:()=>Ae,FoM:()=>fi,FrB:()=>Li,G5_:()=>ne,GD4:()=>Xe,GSj:()=>We,HBW:()=>dn,HF5:()=>Wn,HNv:()=>vn,HV0:()=>Et,HZ$:()=>lt,HtN:()=>ve,IIA:()=>ki,IMA:()=>ln,IaX:()=>Se,IbR:()=>Ot,Igm:()=>B,JAi:()=>wn,JyH:()=>Mn,KWu:()=>Ai,Km2:()=>Sn,Kon:()=>mi,KzJ:()=>Hn,L93:()=>_i,L94:()=>mt,LEh:()=>Y,LQQ:()=>bn,LT1:()=>Oi,Lvq:()=>Re,M8Q:()=>Oe,MUe:()=>ae,Mdm:()=>gn,Mgd:()=>b,NA_:()=>Ri,NBY:()=>z,NFG:()=>Yt,NdF:()=>u,NdH:()=>Jt,NeY:()=>ai,NxC:()=>Un,O8u:()=>ni,OEw:()=>me,OPw:()=>v,OXV:()=>l,Ohd:()=>x,Oi_:()=>y,Oth:()=>Jn,P0R:()=>xi,Pv8:()=>rn,Q96:()=>gt,QCZ:()=>Ee,QKJ:()=>Q,RCP:()=>q,RvZ:()=>H,S$T:()=>jn,S6_:()=>ce,S9f:()=>pn,SAM:()=>pt,SIp:()=>Kn,SeJ:()=>Zn,Sjh:()=>be,Sp6:()=>an,Sue:()=>Fe,SwG:()=>Wt,T29:()=>tn,T63:()=>he,T6p:()=>U,TAs:()=>Ni,Tjh:()=>X,Trk:()=>Dn,Ttj:()=>Qt,Tx$:()=>Ln,U69:()=>Ci,UF_:()=>un,Ue7:()=>Ie,Ujl:()=>Pn,UtX:()=>se,VMH:()=>_,VQt:()=>Je,VvP:()=>$,W6K:()=>De,WFE:()=>Zt,WPx:()=>je,Wqr:()=>te,X0n:()=>Bn,X4L:()=>vi,X8C:()=>Gt,X9V:()=>yt,Y32:()=>Nn,Y4l:()=>h,Y8s:()=>st,YC5:()=>Ce,YGG:()=>Lt,YM7:()=>$i,YbS:()=>di,Yed:()=>ot,YkB:()=>At,Z0r:()=>de,Z2q:()=>M,ZBn:()=>Tt,ZRG:()=>Tn,Zew:()=>An,Zwi:()=>et,Zx1:()=>J,_2K:()=>ht,_5w:()=>bi,_7n:()=>en,_NZ:()=>Rt,_Sh:()=>C,_Sx:()=>Kt,_W3:()=>ft,_Y$:()=>R,_Z3:()=>on,_m3:()=>xe,_tS:()=>P,_vr:()=>m,_zf:()=>qn,aGs:()=>Qn,aH$:()=>Pe,aOf:()=>Ft,aib:()=>Bt,b4t:()=>ti,bKK:()=>p,bLf:()=>Ii,bTy:()=>Vt,cH6:()=>Ut,dF0:()=>a,dQj:()=>$e,e3L:()=>_n,eVV:()=>Z,ekV:()=>Ei,enW:()=>oe,f$3:()=>ze,frm:()=>Ke,fvT:()=>le,fvb:()=>ui,fxl:()=>In,fzF:()=>Dt,fzQ:()=>ie,gD9:()=>ut,gai:()=>St,gs5:()=>yn,gyR:()=>Pt,h6G:()=>re,hCl:()=>d,hyz:()=>T,iD0:()=>Gn,icF:()=>ue,im1:()=>nn,iyV:()=>Me,iye:()=>N,j08:()=>s,jE9:()=>ye,jPf:()=>L,jT9:()=>Be,jzd:()=>o,k_t:()=>xt,kcK:()=>gi,kgk:()=>mn,kyT:()=>Ct,l6r:()=>ci,l7W:()=>F,l85:()=>at,lQo:()=>qe,lkd:()=>nt,lr6:()=>tt,m59:()=>yi,mOy:()=>ii,mUS:()=>wi,mWg:()=>Cn,mq3:()=>ei,myW:()=>jt,nXz:()=>hn,nY:()=>vt,nnu:()=>Ye,oOu:()=>G,oOx:()=>Ne,oSh:()=>Yn,oZ0:()=>hi,o_N:()=>K,oiR:()=>c,op6:()=>Pi,ow4:()=>O,pXv:()=>Mi,pjO:()=>S,plQ:()=>E,pyw:()=>we,qPR:()=>kn,qPd:()=>f,qPz:()=>Te,qcD:()=>I,qeJ:()=>cn,rJj:()=>li,rOv:()=>i,rTg:()=>Le,rUb:()=>W,rx0:()=>Si,s1s:()=>_t,s7G:()=>Di,snm:()=>si,soF:()=>Ti,tCU:()=>qt,uUH:()=>j,ua9:()=>Ht,udE:()=>$n,ugH:()=>Ze,ung:()=>zt,ur4:()=>xn,w5U:()=>En,wBM:()=>r,wS7:()=>Rn,wse:()=>pi,x2u:()=>oi,xL0:()=>D,xN9:()=>Fn,xOD:()=>sn,xoj:()=>He,y$I:()=>rt,yE2:()=>pe,yjD:()=>It,yri:()=>Vn,z4R:()=>it,zGj:()=>V,zbk:()=>On,zcS:()=>fn});const i="SET_ADMIN",o="SET_HEADER_SHORTCUTS",s="SET_LOGO",a="SET_FOOTER",r="SET_PERMISSIONS",l="SET_MAP",c="SET_SEARCH_ENTITIES",d="SET_SEARCH_RESULTS",u="SET_SEARCH_ACTIVE_POSITION",p="SET_SEARCH_QUERY",h="SET_PAGE_TITLE",f="REFRESH_ROUTE",m="SET_DOCUMENTATION_CONFIGS",g="SET_FIRST_DAY_OF_THE_WEEK",v="SET_WEEKENDS",b="SET_SHOW_ERROR_PAGE",y="SET_CONFIGS_REMINDERS_PAGE_DATA",w="SET_CONFIGS_REMINDERS_PAGE_BLOCKS_DATA",_="SET_CONFIGS_FINANCE_SETTINGS_PAGE_DATA",T="SET_CONFIGS_COMPANY_INFO_DATA",E="SET_MENU",S="CLEAR_NOTIFICATIONS_LIST",A="ADD_NOTIFICATION_TO_LIST",C="SIDEBAR_LOAD",k="SIDEBAR_SET_OPTIONS",x="SET_ENTRY_POINTS",$="SET_ENTRY_POINTS_INFO",I="DELETE_ENTRY_POINT",O="ADD_ENTRY_POINT",L="SET_INSTALL_MODULE_INFO",R="SET_LOCATIONS",N="SET_NUMBER_CONFIG",D="SET_PARTNERS",M="SET_TAXES",P="SET_SERVER_SIDE_CONFIG",F="SET_LICENSE",B="SET_NEED_UPDATE_STATE",H="SET_LEADS",j="SET_BOARD_LEADS",U="SET_STAGES",W="SET_FILTERED_LEADS",K="SET_BOARD_FILTERED_LEADS",G="RESET_FILTERED_LEADS",V="MOVE_LEAD",z="SET_LEAD_INFO",q="DELETE_LEAD",Y="UPDATE_LEAD",X="SET_BOARD_TASKS",Q="SET_TASKS",Z="SET_FILTERED_TASKS",J="SET_BOARD_FILTERED_TASKS",ee="RESET_FILTERED_TASKS",te="MOVE_TASK",ne="SET_TASK_INFO",ie="SET_PROJECT_NAME",oe="DELETE_TASK",se="UPDATE_TASK",ae="SET_TASK_VIEW_ACCESS",re="SET_TASK_VIEW_MODEL",le="SET_TASK_VIEW_META",ce="SET_SCHEDULING_RESOURCES",de="SET_SCHEDULING_PERMISSIONS",ue="SET_SCHEDULING_RESOURCES_CUSTOMER_OPTIONS",pe="SET_RENDER_TEMPLATE_TRIGGER",he="SET_RENDER_TEMPLATE_CALLBACK",fe="SET_TASK_VIEW_IS_LEAD",me="SET_TASK_VIEW_CHECKLIST",ge="SET_TASK_VIEW_WORKLOG_TIMER_DATA",ve="SET_TASK_VIEW_TAB_COUNTERS",be="ON_BOARDING_TASK_VIEW_LOAD",ye="ON_BOARDING_NETWORK_SITE_VIEW_LOAD",we="ON_BOARDING_NETWORK_SITES_LIST_LOAD",_e="TASK_VIEW_ON_BOARDING_SHORT",Te="INTRODUCING_LBA_ON_BOARDING",Ee="INTRODUCING_LBA_SUB_ACCOUNTS_ON_BOARDING",Se="INTRODUCING_LBA_SUB_ACCOUNTS_TAB_ON_BOARDING",Ae="SET_TASK_WARNINGS_ARRAY",Ce="SET_SIDEBAR_TASK_WARNINGS_ARRAY",ke="SET_SCHEDULING_RESOURCES_SIDEBAR_CUSTOMER_DATA",xe="SET_SCHEDULING_RESOURCES_SIDEBAR_SERVICE_DATA",$e="SET_CUSTOMER_PRESELECTED_OPTION",Ie="RESET_CUSTOMER_PRESELECTED_OPTION",Oe="SET_TASK_ID_FOR_INVENTORY_MODAL",Le="SET_CUSTOMER_FORM_RELATED_ID",Re="SET_CUSTOMER_FORM_RELATED_SERVICE_ID",Ne="SET_MAIN_FORM_SHOW_WARNING_INCORRECT_VALUES",De="SET_CUSTOM_GEO_DATA_CHANGES",Me="SET_TASK_GEO_DATA_CHANGE_PARAMS",Pe="SET_INTERNET_PAGE_INFO",Fe="SET_RECURRING_TARIFFS_PAGE_INFO",Be="SET_VOICE_TARIFFS_PAGE_INFO",He="SET_ONE_TIME_PAGE_TARIFFS_PAGE_INFO",je="SET_INTERNET_PAGE_TARIFFS_FOR_CHANGE",Ue="SET_ONE_TIME_PAGE_TARIFFS_FOR_CHANGE",We="SET_RECURRING_PAGE_TARIFFS_FOR_CHANGE",Ke="SET_VOICE_PAGE_TARIFFS_FOR_CHANGE",Ge="SET_BUNDLE_TARIFF_FORM_DATA",Ve="SET_BUNDLE_TARIFFS_OPTIONS",ze="SET_BUNDLE_TARIFFS_FORM_MODEL",qe="APPEND_BUNDLE_TARIFF",Ye="REMOVE_BUNDLE_TARIFF",Xe="SET_INVOICE_MODAL_INFO",Qe="CLEAR_INVOICE_MODAL_INFO",Ze="SET_LEADS_INFO",Je="SET_CUSTOMER_INFO",et="SET_CUSTOMER_BILLING_INFO",tt="SET_CUSTOMER_BLOCKING_INFO",nt="CHECK_ALL_CUSTOMERS",it="STATISTICS_RESET_SESSION_RECORD",ot="STATISTICS_SET_SESSION_RECORD",st="STATISTICS_SET_SESSION_RECORD_ATTRIBUTES_META",at="SET_CREDIT_NOTE_MODAL_INFO",rt="CLEAR_CREDIT_NOTE_MODAL_INFO",lt="ACS_PROVISIONING_LOAD_SET_GROUP_DATA",ct="ACS_PROVISIONING_UPDATE_OBJECT_KEY",dt="ACS_PROVISIONING_UPDATE_OBJECT_ACTION",ut="ACS_PROVISIONING_UPDATE_OBJECT_COUNT",pt="ACS_PROVISIONING_ADD_NEW_ATTRIBUTE",ht="ACS_PROVISIONING_MOVE_OBJECT",ft="ACS_PROVISIONING_REMOVE_ATTRIBUTE",mt="ACS_PROVISIONING_RECALCULATE_POSITIONS",gt="ACS_PROVISIONING_RECALCULATE_POSITIONS_BELOW_ATTRIBUTE",vt="ACS_PROVISIONING_SET_ADDING_NEW_ATTRIBUTE_STATE",bt="ACS_PROVISIONING_ADD_NEW_BLOCK",yt="ACS_PROVISIONING_REMOVE_BLOCK",wt="ACS_PROVISIONING_RECALCULATE_POSITIONS_BELOW_OBJECT",_t="ACS_PROVISIONING_SET_ADD_NEW_OBJECT_STATE",Tt="ACS_PROVISIONING_SET_ATTRIBUTE_CHECKED_STATUS",Et="ACS_PROVISIONING_SET_ATTRIBUTE_NEW_VALUE",St="ACS_PROVISIONING_SET_OBJECT_CHECKED_STATUS",At="ACS_PROVISIONING_SET_ALL_OBJECT_CHECKED_STATUS",Ct="ACS_PROVISIONING_SET_DISABLED_STATE_FOR_OBJECT",kt="ACS_PROVISIONING_SET_DISABLED_STATE_FOR_ATTRIBUTE",xt="ACS_PROVISIONING_SET_FILLED",$t="ACS_PROVISIONING_SET_VALUE_BY_SELECTED",It="ACS_PROVISIONING_ADD_AVAILABLE_ATTRIBUTE_INTO_STORAGE",Ot="ACS_PROVISIONING_REMOVE_AVAILABLE_ATTRIBUTE_IN_STORAGE",Lt="ACS_PROVISIONING_SET_ACTIVE_BLOCK_KEY",Rt="ACS_PROVISIONING_SET_ACTIVE_BLOCK_SELECTED_KEY,",Nt="ACS_PROVISIONING_INIT_COMPONENT",Dt="ACS_PROVISIONING_SET_AVAILABLE_DEVICES_FOR_REFRESH",Mt="SET_PROFORMA_INVOICE_MODAL_INFO",Pt="CLEAR_PROFORMA_INVOICE_MODAL_INFO",Ft="SET_TEMPLATES_DATA",Bt="SET_TEMPLATES_ADD_PAGE_DATA",Ht="SET_LABELS_DATA",jt="SET_LABELS_ADD_PAGE_DATA",Ut="INVENTORY_ITEMS_SELL_INIT",Wt="INVENTORY_ITEMS_SELL_SET_FINANCE_ITEMS",Kt="INVENTORY_ITEMS_SELL_SET_TOTALS",Gt="INVENTORY_ITEMS_SELL_UPDATE_ITEM",Vt="INVENTORY_ITEMS_SELL_DELETE_ITEM",zt="INVENTORY_ITEMS_SELL_UPDATE_ROW_STATE",qt="INVENTORY_ITEMS_SELL_SET_ITEMS",Yt="INVENTORY_ITEMS_SELL_SET_IDS",Xt="INVENTORY_ITEMS_SELL_SET_STOCK_ID",Qt="SET_PAYMENT_MODAL_INFO",Zt="CLEAR_PAYMENT_MODAL_INFO",Jt="SET_CUSTOMER_STATEMENT_INFO",en="CLEAR_CUSTOMER_STATEMENT_INFO",tn="SET_TRANSACTION_MODAL_INFO",nn="CLEAR_TRANSACTION_MODAL_INFO",on="SET_RECURRING_INVOICE_MODAL_INFO",sn="CLEAR_RECURRING_INVOICE_MODAL_INFO",an="SET_FINANCE_MASS_PAY",rn="CLEAR_FINANCE_MASS_PAY",ln="SET_HISTORY_AND_PREVIEW_PAGE_DATA",cn="CONFIG_SETTINGS_TYPE_PAGE",dn="CONFIG_SETTINGS_SEARCH_QUERY",un="CONFIG_SETTINGS_BLOCKS",pn="CONFIG_SETTINGS_QUERY_RESULT",hn="CONFIG_SETTINGS_FILTER_LIST",fn="CONFIG_SETTINGS_ACTIVE_FILTER_TITLES",mn="CONFIG_SETTINGS_BASIC_STATE",gn="CONFIG_SETTINGS_BASIC_TRANSLATE_BASIC",vn="CONFIG_SETTINGS_BASIC_TRANSLATE_ALL",bn="CONFIG_SETTINGS_BASIC_ACTIVE_TITLES",yn="CONFIG_SETTINGS_FILTER_DEFAULT_SHORTCUTS",wn="SET_OVERVIEW_EDIT_TO_BILL_DATE",_n="CLEAR_OVERVIEW_EDIT_TO_BILL_DATE",Tn="SET_PREVIEW_REMINDER",En="CLEAR_PREVIEW_REMINDER",Sn="SET_OVERVIEW_TAB_INFO",An="CLEAR_OVERVIEW_TAB_INFO",Cn="CHANGE_FUTURE_BLOCK_OVERVIEW_TAB_INFO",kn="SET_ON_BOARDING_STEPS",xn="ON_BOARDING_LOAD",$n="ON_BOARDING_PAGE_BILLING_FINANCE_DOCUMENTS_LOAD",In="ON_BOARDING_MAIN_DASHBOARD_LOAD",On="ON_BOARDING_SCHEDULING_LOAD",Ln="ON_BOARDING_STEPS",Rn="ON_BOARDING_CURRENT_STEP",Nn="ON_BOARDING_REFS",Dn="SET_ON_BOARDING_PERMISSIONS",Mn="SET_APP_CHILD_REFERENCES",Pn="SET_SCHEDULING_MAP_INFO",Fn="SET_SCHEDULING_MAP_MARKERS",Bn="SET_HOTSPOT_REPORT_INFO",Hn="CLEAR_HOTSPOT_REPORT_INFO",jn="LOAD_LICENSE_CUSTOMERS_USAGE_MODAL_DATA",Un="SET_CAP_CONFIGS_PAGE_DATA",Wn="SET_PORTAL_CONFIGS_PAGE_DATA",Kn="SET_INCOMING_MAILBOXES_PAGE_DATA",Gn="SET_ADMIN_PROFILE_PAGE_DATA",Vn="SET_ADMIN_PROFILE_PHOTO",zn="SET_ADMIN_IMAP_PAGE_DATA",qn="SET_ADMIN_CUSTOMER_SEARCH_PAGE_DATA",Yn="SET_LOGOUT_TIMEOUT",Xn="SET_ADMIN_SCHEDULING_PAGE_DATA",Qn="SET_ADMIN_PAIRED_CALENDARS_MODAL_DATA",Zn="SET_ADMIN_PAIRED_CALENDARS_DELETE_MODAL_DATA",Jn="SET_CONFIG_FINANCE_TAXES_DATA",ei="SET_CONFIG_FINANCE_TAX_MODAL_DATA",ti="SET_CONFIG_FINANCE_TAX_ARCHIVE_MODAL_DATA",ni="SET_CONFIG_FINANCE_TAX_DELETE_MODAL_DATA",ii="RESET_CONFIG_FINANCE_TAX_ARCHIVE_MODAL_DATA",oi="RESET_CONFIG_FINANCE_TAX_DELETE_MODAL_DATA",si="SET_CONFIG_FINANCE_TAX_GROUP_ADD_MODAL_DATA",ai="SET_PERMISSIONS_INFO",ri="SET_PERMISSIONS_TABS",li="ADD_CHANGED_ELEMENTS",ci="RESET_CHANGED_ELEMENTS",di="SET_CONFIGS_PAGE_DATA",ui="SET_PER_PARTNER_BLOCK_DATA",pi="SET_CUSTOMER_MESSENGERS_LIST",hi="SET_CUSTOMER_MESSENGERS_HEADERS",fi="SET_CUSTOMER_MESSENGERS_COLUMNS",mi="SET_CUSTOMER_MESSENGERS_LIST",gi="SET_CUSTOMER_MESSENGERS_HEADERS",vi="SET_CUSTOMER_MESSENGERS_COLUMNS",bi="SET_NETWORK_SITE_VIEW_MODEL",yi="SET_NETWORK_SITE_VIEW_ADDON_TABS",wi="SET_NETWORK_SITE_VIEW_ATTRIBUTES_META",_i="SET_NETWORK_SITE_VIEW_CONTACTS_DATA",Ti="SET_NETWORK_SITE_VIEW_DOCUMENTS_DATA",Ei="SET_NETWORK_SITE_VIEW_ACCESS_DATA",Si="SET_NETWORK_SITE_VIEW_PHOTOS_DATA",Ai="SET_NETWORK_SITE_CAN_UPDATE_DATA",Ci="CHAT_BOX_OPEN",ki="CHAT_BOX_CLOSE",xi="CHAT_BOX_NOTIFY",$i="CHAT_BOX_SET_CHATS",Ii="CHAT_BOX_SET_FILTER",Oi="CHAT_BOX_REMOVE_CHAT",Li="CHAT_BOX_UPDATE_CHATS",Ri="CHAT_BOX_SET_COMMON_COUNTER",Ni="CHAT_BOX_SET_MESSENGERS",Di="CHAT_BOX_SHOW_LIST",Mi="CHAT_BOX_SET_SOUND_NOTIFICATION_ACTIVE",Pi="CHAT_BOX_SET_NOTIFICATION_SOUND"},33027:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);const o={data:()=>({fieldsForUpdate:["update_service_price","force_update_service_price","update_service_name","force_update_service_name"]}),computed:{showCustomPeriod(){return!!this.model?.billing_types&&this.model.billing_types.includes("prepaid_monthly")}},methods:{setUpdatingFalseValue(){"edit"===this.type&&this.fieldsForUpdate.forEach((e=>{this.model[e]=!1,(0,i.empty)(this.attributesMeta[e])||(this.attributesMeta[e].default=!1)}))},sortTransactionCategories(e){const t=e.findIndex((e=>"-1"===e.id));if(-1!==t){const n=e.splice(t,1)[0];e.splice(1,0,n)}return e},updateTransactionCategoryId(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loadEditPageInfo({id:this.$route.query.id,loadTariffs:t}).finally((()=>{e&&(this.model.transaction_category_id=this.storeModel.transaction_category_id),setTimeout((()=>{this.$refs.form.resetDataFormChanged()}),0)}))}}}},94064:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(54059);const o={methods:{...(0,i.i0)("partners",["loadPartners"]),...(0,i.i0)("locations",["loadLocations"]),loadPageInfo(){return this.$route.meta.edit?this.loadEditPageInfo({id:this.$route.query.id}):this.loadAddPageInfo()}},computed:{type(){return this.$route.meta.edit?"edit":"add"},breadcrumbs(){return this.$route.meta.edit?[...this.$route.meta.breadcrumbs,{title:this.model.title,url:"#"}]:this.$route.meta.breadcrumbs}}}},31052:(e,t,n)=>{"use strict";n.d(t,{y:()=>i.A});var i=n(24704)},48789:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,n:()=>i.A});var i=n(71971);const o=i.A},56062:(e,t,n)=>{"use strict";n.d(t,{o:()=>i.A});var i=n(21216)},66012:(e,t,n)=>{"use strict";n.d(t,{T:()=>r,A:()=>l});var i=n(8974),o=n(54059),s=n(48881);const a={name:"XTwigPage",components:{XPreloaderBlock:n(84781).default},data:()=>({loading:!0,rawHtml:"",html:"",contentId:"",active:!0,title:""}),mounted(){splynx_event_bus.reinitEvent("before_switch_page",(()=>{window.closeAllAddonDialogs(),window.closeLastDialog(),window.closeSelects(),window.closeMultipleSelects()})),splynx_event_bus.on("reload-page-content",this.reloadPage),this.contentId=this.generateContentId(this.$route.path),this.loadPage()},deactivated(){splynx_event_bus.off("reload-page-content",this.reloadPage),this.active=!1},activated(){splynx_event_bus.on("reload-page-content",this.reloadPage),splynx_event_bus.emit("page-activated"),this.active=!0,this.setPageTitle(),this.findActualDT()},beforeDestroy(){splynx_event_bus.off("reload-page-content",this.reloadPage)},methods:{...(0,o.PY)([s.Y4l]),findActualDT(){if(this.$refs.page){$(this.$refs.page).find("table").each((function(){$.fn.DataTable.isDataTable($(this))&&(window.activeDT=$(this).DataTable())}))}},getUrlForLoadPage(){let{path:e}=this.$route;return(0,i.empty)(this.$route.query)||(e+=`?${$.param(this.$route.query)}`),e},loadPage(){this.active&&(this.loading=!0,$.ajax({url:this.getUrlForLoadPage(),method:"GET",complete:()=>{this.loading=!1},success:e=>{this.rawHtml=e,this.parseHtml(e),this.$nextTick((()=>{splynx_event_bus.emit("after_switch_page")}))}}))},parseHtml(e){$(document).trigger("switch_page",!0),removeWebUiPopovers();let t=$("<div>");t.append(e);let n=$(t).find("title");n.length>0&&(this.title=n.text(),this.setPageTitle(),n.remove());let i=t.find("script");t.find("script").remove(),this.html=t.html(),this.loading=!1,this.$nextTick((()=>{i.each(((e,t)=>{t.id?0===$(`#${t.id}`).length&&$("body").append(t):$("body").append(t)})),this.makeBreadcrumbsIcons(),this.initWidgets();let{hash:e}=window.location,t=e?document.querySelector(e):null,n=void 0!==t&&null!=t?t.offsetTop-10:0;window.scroll({top:n,behavior:"smooth"})}))},reloadPage(){this.html="",this.loadPage()},setPageTitle(){this.SET_PAGE_TITLE(this.title)},makeBreadcrumbsIcons(){let e,t,n=document.querySelector(".menu-item-level-1.parent-active-item, .menu-item-level-1.active-item");if(n){e=n.querySelector(".main-icon i").className,t=n.className.split(" ").pop().slice(6)}else e=this.$route.meta.icon,t=this.$route.meta.color;$(".splynx-breadcrumbs>span").find("i").remove(),$(".splynx-breadcrumbs>span").addClass(`bg-${t}`).append(`<i class="${e}"></i>`)},initWidgets(){window.initWidgets(),$(document).trigger("after_switch_page",!0)},generateContentId(e){-1!==e.indexOf("#")&&(e=e.substring(0,e.indexOf("#")));return $.each(["view","edit","admin/config/additional-fields","admin/tariffs/fup","admin/inventory/items","admin/crm/leads/add","admin/tickets/create","admin/tickets/opened","admin/scheduling/tasks","admin/tariffs/internet--change-tariff-on-services","admin/tariffs/voice--change-tariff-on-services","admin/tariffs/recurring--change-tariff-on-services","admin/crm/leads/convertation","admin/crm/leads/add","admin/crm/leads/list","admin/customers/add","admin/finance/invoices","/admin/inventory/products"],((t,n)=>{if(-1!=e.indexOf(n)&&-1!=e.indexOf("?"))return e=e.substring(0,e.indexOf("?")),""})),"/"===e[e.length-1]&&(e=e.slice(0,-1)),`content${e.replace(/[^a-z0-9 ,.!]/gi,"_")}`}},watch:{"$route.fullPath":function(){this.active&&(this.loadPage(),this.contentId=this.generateContentId(this.$route.path))}}};const r=(0,n(71938).A)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("div",{staticClass:"content clearfix active",attrs:{id:e.contentId}},[n("x-preloader-block",{attrs:{loading:e.loading}})],1):n("div",{ref:"page",staticClass:"content clearfix active",attrs:{id:e.contentId},domProps:{innerHTML:e._s(e.html)}})}),[],!1,null,null,null).exports,l=r},58468:(e,t,n)=>{"use strict";n.r(t),n.d(t,{XAce:()=>i.A,default:()=>o});var i=n(78297);const o=i.A},50714:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,U:()=>i.default});var i=n(85953);const o=i.default},42094:(e,t,n)=>{"use strict";n.d(t,{xs:()=>i.A,HA:()=>y,Ay:()=>w});var i=n(90766),o=(n(91448),n(8974));const s={name:"XDatatableProgressOptimized",props:{initialMessage:{type:[String,Number],default:""},initialProgress:{type:Number,default:0},typeMassActionEvent:{type:String,default:"leads"}},data:()=>({message:"",progress:0}),created(){remove_socket_listener(`${this.typeMassActionEvent}_mass_action_event`,this.progressHandler),add_socket_listener(`${this.typeMassActionEvent}_mass_action_event`,this.progressHandler)},destroyed(){remove_socket_listener(`${this.typeMassActionEvent}_mass_action_event`,this.progressHandler)},mounted(){this.progress=this.initialProgress,this.message=this.initialMessage},methods:{progressHandler(e){"finish"===e.type?(this.$emit("finish",e),e.result.warning.length>0&&show_warning(e.result.warning,5),e.result.errors.length>0&&show_error(e.result.errors,5)):"progress"===e.type&&(this.$emit("progress",e),this.progress=parseInt(e.progress),this.message=e.message)}}};var a=n(71938);const r=(0,a.A)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mass-action-progress-wrapper"},[n("div",{staticClass:"alert alert-warning",staticStyle:{"text-align":"center"}},[n("span",{staticClass:"mass-action-message",domProps:{innerHTML:e._s(e.message)}}),n("div",{staticClass:"progress mb-0"},[n("div",{staticClass:"progress-bar progress-bar-striped progress-bar-success active",style:{width:e.progress+"%"},attrs:{role:"progressbar"}},[e._v(" "+e._s(e.progress+"%")+" ")])])])])}),[],!1,null,null,null).exports;var l=n(56228),c=n(3124),d=n(34013),u=n(47557),p=n(86871);const h={name:"XMassActions",mixins:[p.A],props:{massActions:{type:[Object,Boolean],default:null},checkedIds:{type:Array,default:()=>[]},dataForMassActions:{type:Array,default:()=>[]}},data:()=>({massActionsCounts:{},actionsList:{}}),methods:{_initMassActionsLabels(){this.actionsList=this.massActions,Object.keys(this.actionsList).forEach((e=>{let t=this.checkedIds.filter((t=>this.dataForMassActions[t][e]));this.actionsList[e].ids=t,this.actionsList[e].disabled=0===t.length}))},_setUpMassActions(){$(`#${this.id}`).on("draw.dt",(()=>{let e=this.$refs.buttonActions;$(this.wrapperIdSelector).find(".mass-action-buttons").remove(),$(this.wrapperIdSelector).find(".dataTables_length").prepend(e)}))},getClassNames(e){let t="",n=e.length;return t=0===n?"danger":this.checkedIds&&n===this.checkedIds.length?"success":"warning",`badge ms-4 me-0 bg-${t}`},clickHandler(e){(0,o.isset)(e,"handler")?e.handler(e.ids):open_dialog_new(e.url,{ids:e.ids})}},watch:{checkedIds:{immediate:!0,handler(){this._initMassActionsLabels()}}}};const f=(0,a.A)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"buttonActions",staticClass:"mass-action-buttons"},[n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-outline-dark dropdown-toggle me-4",attrs:{type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:0===e.checkedIds.length}},[e._v(" "+e._s(e.$t("common","Actions"))+" ")]),n("div",{staticClass:"dropdown-menu"},e._l(e.actionsList,(function(t,i){return n("li",{key:i,class:["dropdown-item",{disabled:t.disabled}]},[n("a",{attrs:{disabled:t.disabled,"data-test-selector":"selector-"+i},on:{click:function(n){return e.clickHandler(t)}}},[e._v(e._s(t.text)+" "),n("span",{class:e.getClassNames(t.ids)},[e._v(e._s(t.ids.length))])])])})),0)])])}),[],!1,null,null,null).exports;var m=n(95038),g=n(92649),v=n(54059);const b={name:"XDatatableChunks",mixins:[d.A,p.A,c.A,l.A,u.A,m.A,g.A],props:{massActions:{type:Object,required:!0},typeMassActionEvent:String,data:{type:Array,default:()=>[]}},data:()=>({localData:[],allRecordsIds:[],dataForMassActions:[],checkedIds:[],headerCheckboxSelector:"",idCurrent:"",processing:!1}),mounted(){this.localData=this.data,window.currentDataTableJsSelector=this.id,this.headerCheckboxSelector=document.querySelector(`#${this.id} th input.dt-checkboxes`),splynx_event_bus.off("data-for-table-refreshed"),splynx_event_bus.on("data-for-table-refreshed",this.refreshActions),splynx_event_bus.off("clear-selection-data-table"),splynx_event_bus.on("clear-selection-data-table",this.handleFinishMassAction),this.tableId=this.id},activated(){this.init()},methods:{...(0,v.i0)("update_table_items",["updateTableRows","deleteRows","clearNeedToUpdate","addTableRows"]),drawCallBackPrimary(){let e=this;return function(){this.api().columns.adjust().responsive.recalc(),(0,o.empty)(e.drawCallback)||"function"!=typeof e.drawCallback||e.drawCallback(),e.checkbox&&$(`#${e.id} input.dt-checkboxes`).each((function(){$(this).off().on("change",(()=>{let t=$(this).val(),n=$(this).prop("checked");if("select_all"===t)return e.selectAll(n),!1;e.setCheckedIds(t,n)}))}))}},setCheckedIds(e){this.checkedIds.includes(String(e))?this.checkedIds.splice(this.checkedIds.indexOf(String(e)),1):this.checkedIds.push(e),this.checkRenderAlert()},selectAll(e){this.processing=!0,this.renderCheckboxesAndData(!1,e),this.processing=!1},addListener(){document.querySelector(".reset-button")&&document.querySelector(".reset-button").addEventListener("click",this.resetCheckboxes)},resetCheckboxes(){document.querySelector(".reset-button")&&document.querySelector(".reset-button").removeEventListener("click",this.resetCheckboxes),this.headerCheckboxSelector.removeEventListener("click",this.resetCheckboxes),this.headerCheckboxSelector.checked=!1,this.selectAll(!1)},checkboxTemplate:(e,t)=>`<div class="form-check checkbox">\n                        <input type="checkbox" class="dt-checkboxes dt-header form-check-input"\n                               id="checkbox_${e}" value="${e}" ${t} />\n                        <label for="checkbox_${e}"></label>\n                   </div>`,renderCheckboxesAndData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$(this.$refs.table).DataTable().rows({search:"applied"}),i=n[0],s=i?.length===this.localData.length,a=[];if(this.needToUpdate&&((0,o.emptyObject)(this.rowsForAdd)||(this.localData=JSON.parse(JSON.stringify([...this.localData,...this.rowsForAdd]))),(0,o.empty)(this.idsForDelete)||(this.localData=this.localData.filter((e=>!this.idsForDelete.includes(e.checkbox.id)))),(0,o.emptyObject)(this.rowsForUpdate)||(this.localData=this.localData.map((e=>{let t=this.rowsForUpdate.find((t=>t.checkbox.id===e.checkbox.id));return(0,o.empty)(t)?e:t})))),s&&(this.checkedIds=t?[...this.allRecordsIds]:[],this.checkRenderAlert()),e||s||this.needToUpdate)this.localData.forEach((n=>{let i;i=(0,o.isArray)(n)?this.getLayoutForRowFromArray(n,t,e):this.getLayoutForRowFromObject(n,t,e),a.push(i)})),this.updateTableRows([]),this.deleteRows([]),this.addTableRows([]),this.actionsAsObject&&(a=this.getCellFromObject(a)),this.addRows(a);else{let e=this;n.every((function(){let n=this.data(),i=(n.checkbox?$(n.checkbox):$(n[0])).find("input").val(),o="";return t?(e.checkedIds.push(String(i)),o='checked="checked"'):e.checkedIds.includes(String(i))&&e.checkedIds.splice(e.checkedIds.indexOf(String(i)),1),n.checkbox?this.data().checkbox=e.checkboxTemplate(i,o):this.data()[0]=e.checkboxTemplate(i,o),this.invalidate(),this.data()})).draw(),this.checkRenderAlert()}},getLayoutForRowFromObject(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={...e},{id:o,checkbox:s,actions:a}=i;if(!o&&s&&(o=s.id),"checkbox"===s.type){let e=t?'checked="checked"':"";if(n||this.needToUpdate){let e=JSON.parse(JSON.stringify(s.visible_actions));this.allRecordsIds.push(String(o)),this.dataForMassActions[o]=e}i.checkbox=this.checkboxTemplate(o,e)}return a&&"object"==typeof a&&(i.actions=this.getActionsTemplate(a)),i},getLayoutForRowFromArray(e,t,n){let i=[...e],{id:o,type:s}=i[0];if("checkbox"===s){let e=t?'checked="checked"':"";if(n){let e=JSON.parse(JSON.stringify(i[0].visible_actions));this.allRecordsIds.push(String(o)),this.dataForMassActions[o]=e}i[0]=this.checkboxTemplate(o,e)}return i},addRows(e){$(this.$refs.table).DataTable().clear(),$(this.$refs.table).DataTable().rows.add(e),$(this.$refs.table).DataTable().draw()},renderCheckboxAlert(){let e=`<b>${this.$t("common","{rows} out of {total}",{rows:this.checkedIds.length,total:this.allRecordsIds.length})}</b>`;this.checkedIds.length===this.allRecordsIds.length&&(e=`<b>${this.$t("common","All")}</b>`);let t=this.$t("administration","{rows} rows are selected. Actions will be applied to selected rows.",{rows:e});this.renderAlert(t)},renderAlert(e){let t=document.createElement("span");t.innerHTML=e;let n=document.createElement("button");n.innerHTML=this.$t("common","Reset selection"),n.className="btn btn-outline-primary mx-4 reset-button";let i=document.createElement("div");i.className="alert alert-info text-center mass-actions-alert",i.setAttribute("role","alert"),i.appendChild(t),i.appendChild(n),this.setAlertHtml(i.outerHTML)},handleFinishMassAction(){this.showMassProgress=!1,(0,o.empty)(this.rowsForUpdate)||this.prepareForUpdateRows(),this.refreshActions()},refreshActions(){this.checkedIds=[],this.headerCheckboxSelector.checked=!1,this.allRecordsIds=[],this.dataForMassActions=[],this.resetCheckboxes()},checkRenderAlert(){this.checkedIds.length>0?(this.renderCheckboxAlert(),this.addListener()):this.setAlertHtml(""),this.checkedIds.length>0&&this.checkedIds.length<this.allRecordsIds.length?(this.headerCheckboxSelector.indeterminate=!0,this.headerCheckboxSelector.addEventListener("click",this.resetCheckboxes)):0!==this.checkedIds.length&&this.checkedIds.length!==this.allRecordsIds.length||(this.headerCheckboxSelector.indeterminate=!1,this.headerCheckboxSelector.removeEventListener("click",this.resetCheckboxes))},prepareForUpdateRows(){this.rowsForUpdate.forEach((e=>{(0,o.isObject)(e.actions)&&e.actions.forEach(((t,n)=>{e.actions[n]=this.getLinkActions(t)}))}))}},computed:{...(0,v.L8)("update_table_items",["rowsForUpdate","idsForDelete","needToUpdate","rowsForAdd"])},watch:{data(e){this.localData=structuredClone(e),this.renderCheckboxesAndData(!0)},processing(e){e?$(`#${this.pageName}_table_processing`).show():$(`#${this.pageName}_table_processing`).hide()}},components:{XDatatableProgressOptimized:r,XMassActions:f},deactivated(){this.refreshActions(),$(this.$refs.table).DataTable().destroy()}};const y=(0,a.A)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("x-datatable-progress-optimized",{directives:[{name:"show",rawName:"v-show",value:e.showMassProgress,expression:"showMassProgress"}],attrs:{"initial-progress":e.massActionInfo.progress,"type-mass-action-event":e.typeMassActionEvent,"initial-message":e.massActionInfo.message},on:{progress:function(t){e.showMassProgress=!0},finish:e.handleFinishMassAction}}),e._t("dt-under-header"),e.chunksTable?n("x-mass-actions",{ref:"massActions",attrs:{id:e.id,"wrapper-id":e.wrapperId,"mass-actions":e.massActions,"checked-ids":e.checkedIds,"data-for-mass-actions":e.dataForMassActions}}):e._e(),n("table",e._b({ref:"table",staticClass:"display supertable table table-striped",attrs:{id:e.id}},"table",e.localTableTagOptions,!1),[n("thead",[n("tr",[e._l(e.headers,(function(t){return n("th",{key:t,domProps:{innerHTML:e._s(t)}})})),e.actionColumn?n("th",{staticClass:"actions_column"},[e._v(" "+e._s(e.titleOfActionColumn)+" ")]):e._e()],2)])])],2)}),[],!1,null,null,null).exports,w=i.A},34013:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);const o={props:{actionsAsObject:{type:Boolean,default:!1},customCellTypes:{type:Object,default(){return{link:{properties:["text","href","action","target","bold"],template:e=>`<a href="${e.href}" style="${e.bold?"font-weight: bold;":""}" onclick="${e.action}" target="${e.target}">\n                                ${e.text}\n                                ${e.in}\n                            </a>`},badge:{properties:["label","title","badge","inline"],template:e=>`<span class="badge bg-${e.label||e.badge||"dark"} ${e.inline?"ms-8":""}">${e.title}${e.in}</span>`},coloredText:{properties:["color","title"],template:e=>`<span class="color-${e.color}">${e.title}${e.in}</span>`},textWithBadge:{properties:["color","title","text","bold","hideBadge","inline"],template(e){let t=`${e.text}${e.in}`;if(!e.hideBadge){let n;e.inline?n="ms-8":(t+="<br/>",n="mt-4"),t+=`<span class="${n} badge bg-${e.color}">${e.title}</span>`}return e.bold&&(t=`<strong>${t}</strong>`),t.trim()}},textWithBadgesList:{properties:["title"],template:e=>`<span class="me-8">${e.title}</span>${e.in}`},inputTypeText:{properties:["inputTypeText"],template(e){const{type:t,value:n,id:i}=e.attributes;return`<input type="${t}" value="${n}" id="${i}"/>`}},badgesList:{properties:["badges"],template(e){let t="";for(let n of e.badges)t+=`<span class="me-8 badge bg-${n.badge}">${n.title}</span>`;return t.trim()}},table:{properties:["table"],template:e=>{const t=this.colsForInsideTable,{rows:n}=e,i=document.createElement("table"),o=document.createElement("thead"),s=document.createElement("tr");Object.keys(t).forEach((e=>{const n=document.createElement("th");n.textContent=t[e],s.appendChild(n)})),o.appendChild(s);const a=document.createElement("tbody");return null!==n&&n.forEach((e=>{const n=document.createElement("tr");Object.keys(t).forEach((t=>{const i=document.createElement("td");let o="";if("current"===t){const n=document.createElement("i");n.className="1"===e[t]?"icon-ic_fluent_checkmark_24_regular":"icon-ic_fluent_subtract_24_regular",i.appendChild(n)}else o=e[t],i.innerHTML=o;n.appendChild(i)})),a.appendChild(n)})),i.appendChild(o),i.appendChild(a),i.className="table tables-display insideTable",i.outerHTML}}}}}},methods:{getLinkActions(e){let t=`(${window.linkHandler(e.action)})(event);`,n="";return"(function() {})(event);"===t?n=e.action:e.href&&(n=e.href),`<a onclick="${t}" target="${e.target}" href="${n}" title="${e.title}">\n                        <i class="${e.icon}"></i>\n                    </a>`},getDropdownActions(e){let t="";return e.action.forEach((e=>{t+=`<li class="dropdown-item"><a onclick="(${window.linkHandler(e.action,!0)})();">${e.title}</a></li>`})),(0,i.empty)(e.action)?"":`<a class="dropdown-toggle" data-bs-toggle="dropdown" title="${e.title}">\n                        <i class="${e.icon}"></i>\n                    </a><div class="dropdown-menu">${t}</div>`},getActionsTemplate(e){let t="";return e?.forEach((e=>{switch(e.type){case"link":default:t+=this.getLinkActions(e);break;case"dropdown":t+=this.getDropdownActions(e)}})),`<div class="action-cell row-gap-16 column-gap-12">${t}</div>`},baseCellTemplate(e){return e.in&&(e.in=this.getCellFromObject([{in:e.in}]),e.in=e.in[0].in),this.customCellTypes[e.type].properties.forEach((t=>{null!==e[t]&&void 0!==e[t]||(e[t]=""),void 0!==e.in&&null!==e.in||(e.in="")})),e},getCellFromObject(e){return e.forEach(((t,n)=>{for(const[i,o]of Object.entries(t))if("object"==typeof o){if("actions"===i){e[n].actions_object=o,e[n].actions=this.getActionsTemplate(o);continue}if(!o?.type||!Object.keys(this.customCellTypes).includes(o.type)){e[n][i]="";continue}e[n][i]=this.customCellTypes[o.type].template(this.baseCellTemplate(o))}})),e}}}},3124:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);const o={props:{coloredRowsButton:{type:Boolean}},methods:{setColoredButton(){this.getColoredStateLocalStorage(this.firstRun);let e=document.createElement("button"),t=document.createElement("i"),n=document.querySelector(".dt-buttons-wrap"),i=document.querySelector(".dataTables_wrapper"),o=document.querySelector(".dt-buttons"),s=["btn","btn-outline-secondary","btn-icon","me-8","active"],a=document.getElementById(this.id);this.localStateColoredButton?a.classList.add("table-colored"):(s.pop(),i.classList.add("table-not-colored"),a.classList.remove("table-colored")),e.setAttribute("type","button"),e.setAttribute("id","toggle_color_button"),e.setAttribute("title",this.$t("common","Toggle colored rows according to status")),e.classList.add(...s),t.classList.add("icon-ic_fluent_color_24_regular"),e.appendChild(t),n.insertBefore(e,o),e.addEventListener("click",(e=>{e.stopPropagation(),this.toggleColoredClasses()}),!0)},toggleColoredClasses(){let e=document.getElementById("toggle_color_button"),t=e.closest(".dataTables_wrapper"),n=document.getElementById(this.id);e.classList.toggle("active"),t.classList.toggle("table-not-colored"),n.classList.toggle("table-colored"),this.localStateColoredButton=!this.localStateColoredButton,this.saveColoredStateLocalStorage()},saveColoredStateLocalStorage(){supports_html5_storage()&&localStorage.setItem(`coloredState${this.id}DataTable`,this.localStateColoredButton)},getColoredStateLocalStorage(e){if(!supports_html5_storage()||!e)return;let t=localStorage.getItem(`coloredState${this.id}DataTable`);(0,i.empty)(t)||(this.localStateColoredButton="true"===t)}}}},47557:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8974);const o={methods:{_setUpEventHandlers(e){this.chunksTable||this.setMassActions(),$(this.$refs.table).on("click","tr.dt-hasChild",(e=>{const t=$(e.target).parents(".dt-hasChild").next();let n=t.find(".dropdown-item"),i=t.find(".dropdown-menu");n.each((function(){i.append($(this))}))})),this.chunksTable||this.tableXR(),this.underHeadSlot(!1),this.initByEvent&&e&&($(`#${this.id}`).off("manual-init"),$(`#${this.id}`).on("manual-init",(()=>{this.dt.destroy(),this._initTable(!0)}))),this.chunksTable&&this.$refs.massActions._setUpMassActions()},setMassActions(){$(`#${this.id}`).on("draw.dt",(()=>{let e=this.getMassButtonsHtml();if(""!==e){$(this.wrapperIdSelector).find(".mass-action-buttons").remove(),$(this.wrapperIdSelector).find(".dataTables_length").prepend(e);let t=0;if(void 0!==this.jsVar&&(t=$(this.$refs.table).DataTable().columns().checkboxes.selected()[this.targetCheckbox]?.length),0==t){$(`#${this.computedWrapperId}`).find(".dataTables_length").find("input, button").each((function(){$(this).prop("disabled",!0)}))}}else $(`#${this.id}`).find(".dt-checkboxes-cell").remove();$(this.wrapperIdSelector).find("[data-table-reload]").click((()=>{let e=$(`#${this.id}`).DataTable();createReloadDataTableEvent(e)})),this.$emit("draw-dt",this.dt)}))},tableXR(){$(this.$refs.table).on("prerXhr.dt",((e,t)=>{this.$emit("pre-xhr-dt",{dt:this.dt,e,settings:t})})),$(this.$refs.table).on("xhr.dt",((e,t,n)=>{let o;n?.cols&&(this.colsForInsideTable=n.cols),!(0,i.empty)(n?.data)&&this.actionsAsObject&&(n.data=this.getCellFromObject(n.data)),n?.totals&&!this.chunksTable&&this.$emit("totals-data",n.totals),n?.total_columns&&!this.chunksTable&&this.$emit("totals-columns",n.total_columns),n?.total_headers&&!this.chunksTable&&this.$emit("totals-headers",n.total_headers),o=null!=n&&void 0!==n.serverSideEnabled&&n.serverSideEnabled;let s=(0,i.empty)(this.dataTableOptions.pageLength)?$(`select[name=${this.id}_length]`).val():this.dataTableOptions.pageLength;(0,i.empty)(s)&&(s=10),o?this.dt.settings()[0].oFeatures.bServerSide=!0:($(this.$refs.table).DataTable().column(0).checkboxes.deselectAll(),this.dt.settings()[0].oFeatures.bServerSide=!1,this.dt.page.len(s).draw("page")),this._drawMenuLengthForDataTable(this.id,o,s),window.activeDT=$(`#${this.id}`).DataTable(),this.$emit("xhr-dt",{dt:this.dt,e,settings:t,json:n})}))},_getDtOptions(e){let t={stateSave:this.stateSave,columnDefs:this.chunksTable?this.computedColumnDefs:this.getColumnDefsOptions(),buttons:this.showDataTableButtons?this.getDataTableButtons():[]};if(this.initByEvent&&e||(t.ajax=this.ajaxUrl),!(0,i.empty)(this.columnsConfig)||!(0,i.emptyObject)(this.columnsConfig)){t.columns=[];for(let e in this.columnsConfig){let n=this.columnsConfig[e];t.columns.push({data:n})}}"function"==typeof this.stateLoadParams?t.stateLoadParams=this.stateLoadParams:t.stateLoadParams=function(e,t){this.rememberSearch||(t.search.search="")},this.checkbox&&!this.chunksTable&&(t.order=[[this.targetCheckbox+1,"asc"]],t.dom="\"<'row'<'col-md-12'<'table_title table-title'>>><'row'<'col-md-12'<'dt-actions has-mass-actions'<'dt-show-items'l><'dt-search'f><'dt-buttons-wrap'B>r>>>",t.dom+="<'row'<'col-md-12 dt-under-header'>>t<'row justify-content-end under-table'<'info' i>p>\"",0===Object.keys(this.buttons).length&&t.columnDefs.push({targets:this.targetCheckbox,visible:!1,searchable:!1}));let n={};if((0,i.empty)(this.dataTableOptions)||(n={...this.dataTableOptions}),n&&(0,i.isset)(n,"stateSaveParams")&&"function"==typeof n.stateSaveParams){let e=n.stateSaveParams;n.stateSaveParams=function(t,n){delete n.columns,e(t,n)}}else n.stateSaveParams=function(e,t){delete t.columns};for(let e in n)t[e]=n[e];let o=this.serverSideConfig,s=o?.enabled_processing||!1;return(0,i.isset)(t,"serverSide")&&!s&&(t.serverSide=!1),this.initByEvent&&e&&delete t.serverSide,this.localTableTagOptions["data-server-side"]=(0,i.isset)(t,"serverSide")&&t.serverSide&&s,this.chunksTable?t.drawCallback=this.drawCallBackPrimary():(0,i.empty)(this.drawCallback)||"function"!=typeof this.drawCallback||(t.drawCallback=this.drawCallback),(0,i.empty)(this.createdRow)||"function"!=typeof this.createdRow||(t.createdRow=this.createdRow),(0,i.empty)(this.fnInitComplete)||"function"!=typeof this.fnInitComplete||(t.fnInitComplete=this.fnInitComplete),t}}}},86871:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={props:{id:{type:String,default:""},wrapperId:{type:String,default:""}},methods:{getAlertElement(){return $(this.wrapperIdSelector).find(".dt-under-header")}},computed:{dt(){return $(this.$refs.table).DataTable()},wrapper(){return $(`#${this.id}`).closest(".dataTables_wrapper")},jsVar(){return`${this.id}_dt`},searchDelayVar(){return`searchDelay${this.jsVar}`},lastSearchValVar(){return`lastSearchVal${this.jsVar}`},wrapperVar(){return`dataTableWrapper${this.jsVar}`},searchInputValueVar(){return`searchInputValue${this.jsVar}`},computedWrapperId(){return""!==this.wrapperId?this.wrapperId:`${this.id}_wrapper`},wrapperIdSelector(){return`#${this.computedWrapperId}`}}}},56228:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(8974),o=n(14867),s=n.n(o),a=n(54059);const r={props:{headers:{type:Array},title:{type:String},buttonWrapperOptions:{type:Object,default:()=>({class:"mass-action-buttons",style:"display: inline-block;"})},enableCheckActions:{type:Boolean,default:!1},ajaxUrl:{type:[String,Object],default:""},stateSave:{type:Boolean,default:!0},rememberSearch:{type:Boolean,default:!1},actionColumn:{type:Boolean,default:!0},searchByDefault:{type:String,default:""},checkbox:{type:Boolean,default:!1},targetCheckbox:{type:Number,default:0},checkboxAlert:{type:Boolean,default:!1},tableOptions:{type:Object,default:()=>({class:"display supertable table table-striped"})},dataTableOptions:{type:Object,default:()=>({})},columnDefs:{type:[Object,Array],default:()=>[]},columnsConfig:{type:[Object,Array],default:()=>[]},checkboxOptions:{type:Object},initByEvent:{type:Boolean,default:!1},actionColumnTitle:{type:String,default:""},modelName:{type:String,default:""},drawCallback:{type:Function},createdRow:{type:Function},fnInitComplete:{type:Function},stateLoadParams:{type:Function},massAction:{type:[Object,Boolean],default:!1},fileNameForExport:{type:String,default:"*"},showDataTableButtons:{type:Boolean,default:!0},chunksTable:{type:Boolean,default:!1}},created(){this.localTableTagOptions={...this.tableOptions},this.debounceFn=null,window.addEventListener("resize",this.handleResize),splynx_event_bus.on("after_switch_page",this._handleSwitchPage)},activated(){window.activeDT=$(`#${this.id}`).DataTable()},destroyed(){this.dt&&this.dt.destroy(),window.removeEventListener("resize",this.handleResize),splynx_event_bus.off("after_switch_page",this._handleSwitchPage)},data:()=>({firstRun:!0,showMassProgress:!1,localStateColoredButton:!0,localTableTagOptions:{},colsForInsideTable:{}}),methods:{init(){this._initTable(),this.underHeadSlotElement=$(`#${this.id}_wrapper`).siblings("#dt-under-header").detach(!0),this.underHeadSlot()},_initTable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._setUpEventHandlers(this.firstRun),window[this.jsVar]=$(`#${this.id}`).DataTable(this._getDtOptions(this.firstRun)),window.activeDT=$(`#${this.id}`).DataTable(),e){let e=()=>{$(`#${this.id}`).trigger("manual-init-finished"),window[this.jsVar].off("draw.dt",e)};window[this.jsVar].on("draw.dt",e)}$(`#${this.computedWrapperId} .table_title`).html(this.title),""!==this.searchByDefault&&this.dt.search(this.searchByDefault),window[this.jsVar].on("init.dt",(()=>{const e=$(`[name="${this.id}_length"`);e.data("select2")&&$(e).data("select2").$results.addClass("select2-no-scrollbar")})),this.chunksTable||(this._initHandlingMassButtonsEvents(),this._initMassActionsLabels()),window[this.searchDelayVar]=null,window[this.lastSearchValVar]="",window[this.wrapperVar]=$(`#${this.id}`).closest(".dataTables_wrapper"),"undefined"==typeof enableSearchInputProcessing&&(window.enableSearchInputProcessing=!0),$(`${this.wrapperIdSelector} .dataTables_filter input`).off("keyup.DT search.DT input.DT paste.DT cut.DT"),$("body").on("input.DT paste.DT cut.DT","div.dataTables_filter input",(()=>{if(window.enableSearchInputProcessing){let e=$(`${this.wrapperIdSelector} .dataTables_filter input`).val();clearTimeout(window[this.searchDelayVar]),this.dt.search(e),this.dt.state.save();let t=this.serverSideConfig?.search_delay||0;window[this.searchDelayVar]=setTimeout((()=>{window[this.lastSearchValVar]!==e&&(window[this.lastSearchValVar]=e,$(`${this.wrapperIdSelector} .dataTables_filter input`).is("[readonly]")||($(this.$refs.table).dataTable().api().search(e),$(this.$refs.table).dataTable().api().draw(),$(this.$refs.table).dataTable().api().state.save()))}),t)}})),this.wrapper.find("div.dataTables_filter input").trigger("input.DT"),this.wrapper.find(".dataTables_length select").select2({minimumResultsForSearch:-1}),this.wrapper.find(".dataTables_length select").on("select2:open",(()=>{$(".select2-results__options").addClass("hide-scrollbar")})),this.coloredRowsButton&&this.setColoredButton(),this.handleResize(),this.firstRun=!1},underHeadSlot(){const e=()=>{this.underHeadSlotElement&&this.underHeadSlotElement.insertBefore($(`#${this.id}_wrapper`).find(".dt-under-header"))};if(!(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return e(),!1;setTimeout((()=>{e()}),50)},_handleSwitchPage(){$(`#${this.id}`).is(":visible")&&this.handleResize()},_drawMenuLengthForDataTable(e,t,n){let o={10:10,25:25,50:50,75:75,100:100,"-1":"All"},s={10:10,25:25,50:50,75:75,100:100},a={};if((0,i.empty)(this.dataTableOptions.lengthMenu)||(0,i.empty)(this.dataTableOptions.lengthMenu[0])||(0,i.empty)(this.dataTableOptions.lengthMenu[1]))a=t?o:s;else{let{lengthMenu:e}=this.dataTableOptions;e[0].forEach(((t,n)=>{a[t]=e[1][n]}))}$(`#${e}_length`).find("option").remove(),(0,i.isset)(a,[n])||(n=100);for(let t in a)Object.prototype.hasOwnProperty.call(a,t)&&$(`select[name=${e}_length]`).append($("<option/>",{value:t,text:a[t]}));$(`select[name=${e}_length]`).val(n)},getDataTableButtons(){let e=this.getDefaultButtons();if("string"==typeof this.modelName&&""!==this.modelName){let t=this.modelName;e.unshift({container:"#colv",className:"btn-outline-secondary btn-icon",text:'<i class="icon-ic_fluent_more_horizontal_24_regular"></i>',action:this.actionForButtonShowHideColumns(t),titleAttr:"Show/hide columns"})}return e},getDefaultButtons(){let e=this,t=default_buttons.slice(),[n]=t.keys();return t[n].buttons.forEach((t=>{"filename"in t&&(t.filename=function(){return e.getFileNameForExport()})})),t},getFileNameForExport(){return this.fileNameForExport.replaceAll("{date}",s()().format(datetime_format.replaceAll(":"," ")))},actionForButtonShowHideColumns:e=>function(){open_dialog_new(`profile--show-hide-columns?name=${e}`)},handleResize(){"function"!=typeof this.debounceFn&&(this.debounceFn=(0,i.debounce)((()=>{$(this.$refs.table).DataTable().columns.adjust().responsive.recalc()}),500)),this.debounceFn()},tableAjaxReload(){$(this.$refs.table).DataTable().ajax.reload()},setAlertHtml(e){this.getAlertElement().html(e)}},computed:{...(0,a.L8)(["serverSideConfig"]),titleOfActionColumn(){return this.actionColumnTitle?this.actionColumnTitle:this.$t("support","Actions")},buttonsBehavior(){let e={};for(let t in this.buttons){if(Object.prototype.hasOwnProperty.call(this.buttons,t)){let n=this.buttons[t];if((0,i.isset)(n,"hide_button")){e[t]=1==n.hide_button;continue}}e[t]=!1}return e},massActionInfo(){let e={progress:0,message:0};return!1===this.massAction||null===this.massAction||((0,i.isset)(this.massAction,"percent")&&(e.progress=parseInt(this.massAction.percent)),(0,i.isset)(this.massAction,"message")&&(e.message=this.massAction.message)),e},computedColumnDefs(){let{columnDefs:e}=this;return e.forEach(((t,n)=>{void 0!==t.render&&"function"!=typeof t.render&&(e[n].render=new Function(`return ${t.render}`)()),void 0!==t.type&&(e[n].type=t.type.replace(/"/g,""))})),this.chunksTable&&!(0,i.emptyObject)(this.massActions)&&e.push({orderable:!1,targets:0}),e}},watch:{title(e){$(`#${this.computedWrapperId} .table_title`).html(e)},tableOptions(e){this.localTableTagOptions={...e}}}}},79887:(e,t,n)=>{"use strict";n.d(t,{z:()=>i.A});var i=n(81971)},17190:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,W:()=>i.A});var i=n(8525);const o=i.A},65470:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,e:()=>i.default});var i=n(84781);const o=i.default},93089:(e,t,n)=>{"use strict";n.r(t),n.d(t,{XTab:()=>o.A,XTabAjax:()=>s.A,XTabs:()=>i.A,default:()=>a});var i=n(99086),o=n(45684),s=n(19252);const a=i.A},89016:(e,t,n)=>{"use strict";n.d(t,{i:()=>i.A});var i=n(15407)},13817:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,D:()=>i.Ay});var i=n(71556);const o=i.Ay},55690:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(68322),o=n(55127),s=n.n(o);const a="icon-ic_fluent_add_24_regular",r="icon-ic_fluent_save_24_regular",l=(e,t)=>{e.data("title",t)},c=(e,t)=>{e.text()&&e.text(t)},d=(e,t,n)=>{const i=`.froala-${e} [data-cmd="insertCode"]`,o=`.froala-${e} [data-cmd="insertCode"] i`,s=`.froala-${e} .froala-paste-code-input`,d=`.froala-${e} .froala-paste-code-title`;t?($(o).removeClass(a),$(o).addClass(r),l($(i),n("common","Save")),c($(i),n("common","Save")),$(d).text(n("common","Edit"))):($(d).text(n("common","Pass the code below")),$(o).removeClass(r),$(o).addClass(a),$(s).val(""),l($(i),n("common","Paste")),c($(i),n("common","Paste")))},u=(e,t)=>{const n=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(((n,i)=>{const o=`.froala-${t} .froala-paste-code-input`,s=$(`#${t}`).data("froala.editor");empty(s)&&i(),s.codeSnippet.showPopup();let a="";e&&e.parent().parent().contents().each((function(){3===this.nodeType&&(a=`${a}\n${$(this).get(0).textContent}`)})),$(o).attr("disabled",null),s.accessibility.focusPopup(s.popups.get("codeSnippet.insertPopup")),n(a.trim())}))};window.setCodeSnippetEvents=e=>{const i=$(`#${e}`).data("froala.editor");if(empty(i))return!1;i.$el.find(".froala-code-panel").remove(),i.$el.find("pre").each((function(){const e=s()("code_snippet_");$(this).attr("id",e);const t=$('<div contenteditable="false" class="froala-code-panel">\n                     <div contenteditable="false" class="froala-code-btn edit">\n                       <i contenteditable="false" class="icon-ic_fluent_edit_24_regular"></i>\n                     </div>\n                     <div contenteditable="false" class="froala-code-btn remove">\n                       <i contenteditable="false" class="icon-ic_fluent_delete_24_regular"></i>\n                     </div>\n                   </div>');t.find(".froala-code-btn.edit").attr("id",`edit-${e}`),t.find(".froala-code-btn.remove").attr("id",`remove-${e}`),$(this).append(t)}));return i.$el.find(".froala-code-btn.remove").each((function(){const e=$(`#${t}`).data("froala.editor");$(this).off("click"),$(this).on("click",(()=>{const t=$(this).parent().parent().next();"BR"===t.prop("tagName")&&t.remove(),$(this).parent().parent().remove(),e.undo.saveStep()}))})),i.$el.find(".froala-code-btn.edit").each((function(){$(this).off("click"),$(this).on("click",(()=>{n($(this)).then((e=>{d(t,!0,window.t);const n=$(`.froala-${t} .froala-paste-code-input`);n.addClass("edit"),n.val(e),$(`.froala-${t} pre#${$(this).attr("id").substring(5)}`).addClass("current-edit")}))}))})),!0},Object.assign($.FroalaEditor.POPUP_TEMPLATES,{[`${e.pluginName}.${e.popupName}`]:"[_BUTTONS_][_CUSTOM_LAYER_]"});let i=[];e.popupButtons.forEach((e=>{Object.entries(e).forEach((e=>{let[t,n]=e;"name"===t&&i.push(n)}))})),Object.assign($.FroalaEditor.DEFAULTS,{popupButtons:[...i,"popupClose"]}),$.FroalaEditor.PLUGINS[e.pluginName]=function(t){return t.popups.onShow(`${e.pluginName}.${e.popupName}`,e.onShow),t.popups.onHide(`${e.pluginName}.${e.popupName}`,e.onHide),t.events.on("initialized",(()=>{e.onInit.apply(t)}),!0),t.events.on("commands.undo",(()=>{e.onUndo.apply(t)}),!0),t.events.on("commands.redo",(()=>{e.onUndo.apply(t)}),!0),{showPopup:function(){let n=t.popups.get(`${e.pluginName}.${e.popupName}`);n||(n=function(){let n=$.FroalaEditor.POPUP_TEMPLATES[`${e.pluginName}.${e.popupName}`];"function"==typeof n&&(n=n.apply(t));let i="",o='<div class="fr-buttons code-snippet-popup-panel d-flex align-items-center justify-content-end my-8 mt-4 px-12">';if(t.opts.popupButtons.length>1){i+='<div class="fr-buttons code-snippet-popup-panel d-flex align-items-center">',i+=`<label class="froala-paste-code-title flex-grow-1 m-8">${window.t("common","Pass the code below")}</label>`;const n=$(t.button.buildList(t.opts.popupButtons)).wrap();i+='<div class="d-flex align-items-center">',n.each((function(){const n=$(this).attr("data-cmd"),s=t.opts.popupButtons.find((e=>e===n));if(s){const t=e.popupButtons.find((e=>e.name===s&&!!e.text));t&&($(this).css("width","auto"),$(this).removeClass("fr-btn"),$(this).addClass("btn btn-sm btn-outline-secondary"),$(this).text(t.text))}e.popupButtons.find((e=>e.name===s&&e.isBottom))?o+=$(this).prop("outerHTML"):i+=$(this).prop("outerHTML"),o+="</div>"})),i+="</div></div>"}return n={buttons:i,custom_layer:e.popupTemplate+o},t.popups.create(`${e.pluginName}.${e.popupName}`,n)}()),t.popups.setContainer(`${e.pluginName}.${e.popupName}`,t.$tb);const i=t.$tb.find(`.fr-command[data-cmd="${e.pluginName}"]`),o=i.offset().left+i.outerWidth()/2-100,s=i.offset().top+(t.opts.toolbarBottom?10:i.outerHeight()-10);n.find(".fr-arrow").css("margin-left","95px"),t.popups.show(`${e.pluginName}.${e.popupName}`,o,s,i.outerHeight())},hidePopup:function(){t.popups.hide(`${e.pluginName}.${e.popupName}`)}}},$.FroalaEditor.DefineIcon(e.iconName,{NAME:e.iconClass}),$.FroalaEditor.RegisterCommand(e.pluginName,{title:e.title,icon:e.iconName,undo:!1,focus:!0,popup:!0,refreshAfterCallback:!0,plugin:e.pluginName,async callback(){this.selection.save(),this.popups.isVisible(`${e.pluginName}.${e.popupName}`)?(this.$el.find(".fr-marker")&&this.events.disableBlur(),this.popups.hide(`${e.pluginName}.${e.popupName}`)):n()}}),$.FroalaEditor.DefineIcon("popupClose",{NAME:e.closeIconClass}),$.FroalaEditor.RegisterCommand("popupClose",{title:e.closeTitle,undo:!1,focus:!0,callback(){this[e.pluginName].hidePopup(e.onHide)}});const o=(e,t,n,i,o)=>{$.FroalaEditor.DefineIcon(n,{NAME:i}),$.FroalaEditor.RegisterCommand(t,{title:e,icon:n,undo:!1,focus:!0,callback(){o.apply(this)}})};e.popupButtons.forEach((e=>{o(e.title,e.name,e.iconName,e.iconClass,e.onClick)}))},p=e=>{let t=null;u({popupName:"insertPopup",title:window.t("common","Insert code snippet"),iconName:"insertCodeSnippet",iconClass:"icon-ic_fluent_clipboard_code_24_regular",closeTitle:window.t("common","Close"),closeIconClass:"icon-ic_fluent_dismiss_24_regular",popupTemplate:'\n                    <div class="input-wrap">\n                        <textarea class="m-8 mb-0 froala-paste-code-input" rows="10"></textarea>\n                    </div>\n                ',pluginName:"codeSnippet",onHide(){d(e.id,!1,window.t),$(`.froala-${e.id} .current-edit`).removeClass("current-edit");const t=`.froala-${e.id} .froala-paste-code-input`;$(t).removeClass("edit"),$(t).val(""),window.setCodeSnippetEvents(e.id)},onShow(){const t=`.froala-${e.id} .froala-paste-code-input`;$(t).hasClass("edit")?d(e.id,!0,window.t):d(e.id,!1,window.t)},onUndo(){window.setCodeSnippetEvents(e.id)},onInit(){const t=(e=>{const t=/<pre class="code-snippet" contenteditable="false">(.|\n)*?<\/pre>/gi;return t.test(e)?e.match(t):[]})(this._original_html),n=e=>{let t=(e=>{const t=/<code(.|\n)*?<\/code>/gi;if(t.test(e))return e.match(t).map((e=>e.replace(/<(?!br\s*\/?)[^>]+>/g,"")));const n=/<pre(.|\n)*?<\/pre>/gi;return n.test(e)?e.match(n).map((e=>e.replace(/<(?!br\s*\/?)[^>]+>/g,""))):[]})(e);return t.length?(this.selection.save(),`<pre contenteditable="false" class="code-snippet">${t.join("")}</pre>`):e};$(`.froala-${e.id} pre`).each((function(e){let n=t[e];"string"==typeof n&&(n=n.substring(50),n=n.substring(0,n.length-6)),$(this).html(n),$(this).attr("contenteditable","false")})),window.setCodeSnippetEvents(e.id),this.events.on("paste.afterCleanup",(e=>n(e)),!0),this.events.on("html.set",(()=>{window.setCodeSnippetEvents(e.id)})),this.events.on("contentChanged",(()=>{window.setCodeSnippetEvents(e.id)}),!0)},popupButtons:[{name:"insertCode",isBottom:!0,text:window.t("common","Paste"),title:window.t("common","Insert Code"),iconName:"insert",iconClass:a,async onClick(){this.selection.restore();const n=$(`.froala-${e.id} .froala-paste-code-input`);if(""===n.val().trim())return!1;const o=s()("code_snippet_");t=$(`<pre class="code-snippet" id="${o}" contenteditable="false"></pre>`);const a=()=>{const e=$(`<div contenteditable="false" class="froala-code-btn edit" id="edit-${t.attr("id")}">\n                                                        <i class="icon-ic_fluent_edit_24_regular"></i>\n                                                    </div>`),n=$(`<div contenteditable="false" class="froala-code-btn remove" id="remove-${t.attr("id")}">\n                                                        <i class="icon-ic_fluent_delete_24_regular"></i>\n                                                  </div>`),i=$('<div contenteditable="false" class="froala-code-panel"></div>');return i.append(e),i.append(n),i};if(n.hasClass("edit")){const o=(0,i.encode)(n.val()),s=$(`.froala-${e.id} .current-edit`);return s.html(""),s.append(o.replace(/ /g,"&nbsp;")),s.append(a()),s.attr("id",t.attr("id")),s.hasClass("current-edit")&&s.removeClass("current-edit"),this.codeSnippet.hidePopup(),this.undo.saveStep(),window.setCodeSnippetEvents(e.id),!1}t.text(n.val()),t.html(t.html().replace(/ /g,"&nbsp;")),this.selection.save(),this.html.insert(t.get(0).outerHTML),this.html.insert("<div><br></div>");$(`#${t.attr("id")}`).append(a()),n.val(""),this.codeSnippet.hidePopup(),window.setCodeSnippetEvents(e.id),this.undo.saveStep(),this.accessibility.focusEditor()}}]},e.id)};window.activeEditorSnippetPlugin=new Proxy({id:null,$t:null},{set:(e,t,n)=>(p({$t:window.t,id:n}),e.id=n,e.$t=window.t,!0)});const h=p},35674:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,m:()=>i.A});var i=n(26658);const o=i.A},32410:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c});var i=n(8974);const o=function(e){onCloseModal((t=>{e.$modals.dismiss(t)})),onShowModal("delete-logo",(t=>{e.$modals.open({name:"delete-logo",props:{confirmMessage:t.confirmMessage,title:t.title},component:()=>n.e(5386).then(n.bind(n,95386))})}))},s={name:"XConfigItemFileView",props:{meta:{type:Object,default:()=>({})},fileData:{type:String,default:""},showDeleteButton:{type:Boolean,default:!0},inputValue:{type:[File,String,Number]}},data:()=>({fileUrl:""}),mounted(){o(this),this.$nextTick((()=>{this.getFileUrl()}))},methods:{deleteFile(e){showModal(e,this.getDeletePartnerLogoParams)},action(){return this.deleteFile(this.meta.action)},getFileUrl(){if("[object File]"===Object.prototype.toString.call(this.inputValue)&&""!==this.fileData)return this.fileUrl=this.fileData,!1;let{id:e}=this.meta;this.existImage&&(e=this.inputValue),this.fileUrl=`${this.meta.url}${e}`}},computed:{getDeletePartnerLogoParams(){return{confirmMessage:""!==this.partnerId?this.$t("config","Are you sure you want to delete the logo?"):this.$t("config","Are you sure you want to delete the default logo? The logo will be deleted for all partners that use it."),title:this.$t("config","Delete")}},filePreview(){return this.firstDownload||this.existImage||this.imageUploaded||this.canceledUploading},firstDownload(){return""!==this.inputValue&&!(0,i.empty)(this.fileData)},existImage(){return""!==this.inputValue&&"number"==typeof this.inputValue},imageUploaded(){return"[object File]"===Object.prototype.toString.call(this.inputValue)&&this.firstDownload},canceledUploading(){return!(0,i.empty)(this.meta.id)&&""===this.inputValue}},watch:{inputValue(){this.getFileUrl()},fileData(){this.getFileUrl()}}};var a=n(71938);const r=(0,a.A)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-wrap mt-16"},[e.filePreview?n("div",{staticClass:"col-md-12 flex-wrap d-flex justify-content-between"},[n("img",{staticClass:"img-responsive",attrs:{src:e.fileUrl,alt:"partner logo"}}),e.showDeleteButton?n("button",{staticClass:"btn btn-danger btn-icon-text mt-12 ms-auto",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.action.apply(null,arguments)}}},[n("i",{staticClass:"icon-ic_fluent_delete_24_regular"}),n("span",[e._v(e._s(e.$t("config","Delete")))])]):e._e()]):e._e()])}),[],!1,null,null,null).exports,l={name:"XInputFile",props:{value:[File,String,FileList,Number],options:Object,buttonText:{type:String,default:""},fileName:{type:String},downloadButton:{type:Boolean,default:!1},downloadButtonTitle:{type:String,default:""},downloadButtonUrl:{type:String,default:""},customPlaceholder:{type:String,default:""},multiple:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!1},fileMeta:{type:Object,default:()=>{}},nonImage:{type:Boolean,default:!1}},data(){return{internalFileName:this.fileName,fileData:"",showDeleteButton:!0,fileIsHeic:!1,fileSizeIsLarge:!1}},methods:{getFilesNames(e){const t=e.length-2==1?this.$t("common","other"):this.$t("common","others");return(e=(e=Array.from(e).map(((n,i)=>i>2?null:2===i?`+ ${e.length-2} ${t}`:n.name))).filter((e=>!!e))).join(", ")},inputHandler(e){if(this.internalFileName=e.target.files.length>0?e.target.files[0].name:"",this.multiple)return this.internalFileName=e.target.files.length>0?this.getFilesNames(e.target.files):"",void this.$emit("input",e.target.files);this.showPreview&&this.onFileChange(e.target.files[0]),this.$emit("input",e.target.files[0])},downloadButtonHandler(){download_by_iframe(this.downloadButtonUrl)},onFileChange(e){if((0,i.empty)(e))return this.internalFileName=this.fileName,!1;if(this.fileIsHeic=e.type&&(e.type.startsWith("image/heic")||e.type.startsWith("image/heif")),e.type&&("image"===e.type.split("/")[0]||this.nonImage))if(e.size>5242880)this.fileSizeIsLarge=!0,show_error(this.$t("config","Image size is too large! Max image size is 5 MB"),5);else{this.fileSizeIsLarge=!1;let t=new FileReader,n=this;t.onload=e=>{n.fileData=e.target.result},t.readAsDataURL(e)}else show_error(this.$t("config","Invalid file type!"),5);this.showDeleteButton=!1}},watch:{fileName(){this.internalFileName=this.fileName},value(){null===this.value&&(this.internalFileName=""),"string"==typeof this.value&&(this.internalFileName=this.fileName)}},computed:{displayFileView(){return this.showPreview&&!this.fileSizeIsLarge&&!this.fileIsHeic},getButtonText(){return(0,i.empty)(this.buttonText)?this.$t("common","Browse"):this.buttonText}},components:{XFileView:r}};const c=(0,a.A)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{class:{"input-group":!0,"input-group-file":!0,"input-group-download-file":e.downloadButton}},[n("span",{staticClass:"btn btn-outline-secondary"},[e._v(" "+e._s(e.getButtonText)+" ")]),n("input",e._b({ref:"input",staticClass:"form-control input-sm",attrs:{type:"file",multiple:e.multiple},on:{change:function(t){return t.preventDefault(),t.stopPropagation(),e.inputHandler.apply(null,arguments)}}},"input",e.options,!1)),n("input",{staticClass:"form-control input-sm",attrs:{type:"text",readonly:!e.customPlaceholder,placeholder:e.customPlaceholder},domProps:{value:e.internalFileName}}),e.downloadButton?n("span",{staticClass:"btn btn-outline-secondary btn-icon",attrs:{title:e.downloadButtonTitle},on:{click:e.downloadButtonHandler}},[n("i",{staticClass:"icon-ic_fluent_arrow_download_24_regular"})]):e._e(),e._t("button")],2),e.displayFileView?n("x-file-view",{attrs:{meta:e.fileMeta,"file-data":e.fileData,"show-delete-button":e.showDeleteButton,"input-value":e.value}}):e._e(),e.fileIsHeic?n("div",{staticClass:"alert alert-danger alert-dismissible mt-16",attrs:{role:"alert"}},[e._v(" "+e._s(e.$t("common","The uploaded HEIC image cannot be displayed as a preview. It will be converted to JPG after saving."))+" ")]):e._e()],1)}),[],!1,null,null,null).exports},6139:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,p:()=>i.A});var i=n(24296);const o=i.A},26332:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,h:()=>s});const i={name:"XInputNumber",mixins:[n(66710).A],props:{options:Object,value:{type:[Number,String],default:0},maximum:{type:[Number,String],default:null},minimum:{type:[Number,String],default:0},numberType:{type:[String],default:"integer"},initThousandSeparator:{type:[String],default:null},allowEmpty:{type:[Boolean],default:!1},initDecimalSeparator:{type:[String],default:null},stepChange:{type:[Number,String],default:null},float:{type:[Number,String],default:null},stripTrailingZeros:{type:[Boolean],default:!1},stepArrows:{type:[Boolean],default:!0},submitModal:{type:[Boolean],default:!1}},data:()=>({isInit:!0}),computed:{isDisabled(){return this.options?.disabled},textNumber(e){if(this.isInit){if(this.allowEmpty&&!e.value)return"";if(!e.value)return this.validationAfter(0)}return new RealNumber(e.value,{float:this.floatDigits,decimalSeparator:this.decimalSeparator,thousandSeparator:this.thousandSeparator,stripTrailingZeros:this.stripTrailingZeros})._stringFormat},placeholderNumber(){return this.value?new RealNumber(this.value,{float:this.floatDigits,decimalSeparator:this.decimalSeparator,thousandSeparator:this.thousandSeparator,stripTrailingZeros:this.stripTrailingZeros})._stringFormat:0},attributes(){let e={...this.options};return isset(e,"class")||(e.class=""),e.class=this.addClass(e.class,["form-control","input-sm"]),e},floatDigits(){if(this.float)return this.float;switch(this.numberType){case"float":case"decimal":return parseFloat(window.spl_config.numberConfig?.decimal?.digits);default:return 0}},step(){return this.stepChange&&"integer"!==this.numberType?this.stepChange:1},decimalSeparator(){return null==this.initDecimalSeparator?window.spl_config?.numberConfig?.decimal?.separator:this.initDecimalSeparator},thousandSeparator(){return null==this.initThousandSeparator?window.spl_config?.numberConfig?.thousand?.separator:this.initThousandSeparator}},methods:{emitChange(){this.isInit=!1,this.$refs.input.value=this.validationAfter(new RealNumber(this.value,{float:this.floatDigits,decimalSeparator:this.decimalSeparator,thousandSeparator:this.thousandSeparator,stripTrailingZeros:this.stripTrailingZeros})._stringFormat)},changeByEnter(e){this.submitModal&&this.changedByKeyboard(e)},changedByKeyboard(e){this.isInit=!1;let t=this.validationAfter(new RealNumber(e.target.value,{float:this.floatDigits,decimalSeparator:this.decimalSeparator,thousandSeparator:this.thousandSeparator,stripTrailingZeros:this.stripTrailingZeros})._numberFormat);this.$emit("input",parseFloat(parseFloat(t).toFixed(this.floatDigits)))},changedByArrow(e,t,n){let i;this.isInit=!1,i=n?this.textNumber:e.target.value;let o=this.validationAfter(new RealNumber(i,{float:this.floatDigits,decimalSeparator:this.decimalSeparator,thousandSeparator:this.thousandSeparator,stripTrailingZeros:this.stripTrailingZeros})._numberFormat+t);this.$emit("input",parseFloat(parseFloat(o).toFixed(this.floatDigits)))},validationAfter(e){return Number.isNaN(parseFloat(e))?0:null!=this.maximum&&parseFloat(e)>parseFloat(this.maximum)?this.maximum:null!=this.minimum&&parseFloat(e)<parseFloat(this.minimum)?this.minimum:e}}};const o=(0,n(71938).A)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-block x-input-number"},[n("input",e._b({ref:"input",attrs:{type:"text",placeholder:e.placeholderNumber,autocomplete:"off",tabindex:"1"},domProps:{value:e.textNumber},on:{change:e.changedByKeyboard,focusout:e.emitChange,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.changedByArrow(t,-e.step)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.changedByArrow(t,e.step)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeByEnter.apply(null,arguments)}]}},"input",e.attributes,!1)),!e.isDisabled&&e.stepArrows?n("div",{ref:"arrows",staticClass:"count-control"},[n("i",{staticClass:"icon-ic_fluent_chevron_up_24_regular increase",on:{click:function(t){return e.changedByArrow(t,e.step,!0)}}}),n("i",{staticClass:"icon-ic_fluent_chevron_down_24_regular decrease",on:{click:function(t){return e.changedByArrow(t,-e.step,!0)}}})]):e._e()])}),[],!1,null,null,null).exports,s=o},45164:(e,t,n)=>{"use strict";n.d(t,{y:()=>s,A:()=>a});var i=n(8974);const o={name:"XInputRadio",mixins:[n(66710).A],model:{prop:"modelValue",event:"change"},props:{options:{type:Object,default:()=>({})},id:String,value:[String,Number],title:{type:String,default:""},modelValue:{type:[String,Boolean,Number],default:""},name:{type:String,default:""}},computed:{attributes(){let e=this.options;return(0,i.isset)(e,["class"])||(e.class=""),e.class=this.addClass(e.class,["form-check-input"]),e},isChecked(){return this.modelValue===this.value}},methods:{inputHandler(e){this.$emit("change",e.target.value)}}};const s=(0,n(71938).A)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-check"},[n("div",[n("input",e._b({attrs:{id:e.id,type:"radio",name:e.name},domProps:{checked:e.isChecked,value:e.value},on:{input:e.inputHandler}},"input",e.attributes,!1))]),""!==e.title?n("label",{staticClass:"form-check-label",attrs:{for:e.id}},[e._v(e._s(e.title))]):e._e()])}),[],!1,null,null,null).exports,a=s},55125:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,h:()=>i.A});var i=n(99826);const o=i.A},49454:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,n:()=>i.A});var i=n(29404);const o=i.A},15626:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,k:()=>i.A});var i=n(96644);const o=i.A},66710:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={methods:{addClass(e,t){let n=e.split(/\s+/);return Array.isArray(t)?t.forEach((e=>{n.includes(e)||""===e||n.push(e)})):n.includes(t)||n.push(t),n=n.filter((e=>""!==e)),n.join(" ")}}}},32908:(e,t,n)=>{"use strict";n.d(t,{B6:()=>f,Br:()=>C,DZ:()=>d,FH:()=>S,Hw:()=>y,JO:()=>o,KH:()=>g,KM:()=>m,Lj:()=>r,Od:()=>u,Oi:()=>h,Qu:()=>v,R2:()=>c,SF:()=>b,SM:()=>_,b_:()=>i,fN:()=>s,fh:()=>w,kT:()=>a,lb:()=>A,nJ:()=>E,rG:()=>l,wX:()=>p,yC:()=>T});const i="----new----",o="empty_layout",s=4,a="admin",r="portal",l="_all_",c={internet:"ServicesInternet",voice:"ServicesVoice",bundle:"ServicesBundle",recurring:"ServicesCustom"},d={success:"bg-success",pending:"bg-pending",primary:"bg-primary",dark:"bg-dark",purple:"bg-purple",danger:"bg-danger",warning:"bg-warning"},u=5242880,p={payment:"bg-success",credit_note:"bg-pending",transaction:"bg-primary",invoice:"bg-dark",recurring_invoice:"bg-dark",proforma_invoice:"bg-primary",one_time_invoice:"bg-purple",future_item:"bg-warning",default:"bg-primary"},h="not_paid",f="deleted",m="type_template",g="type_external_handler",v="type_csv",b="voice",y="recurring",w="internet",_="one-time",T="bundles",E="blocked_by_admin",S="blocked_by_system",A="YYYY-MM-DD",C="tickets, messages"},7999:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={name:"XTranslate",functional:!0,props:{tag:{type:[String,Boolean],default:!1},message:{type:String},category:{type:String,default:"common"}},render(e,t){let{data:n,parent:i,props:o,slots:s,_v:a}=t;const{$splang:r}=i;if(!r)return void console.warn("Cannot find Splang instance!");const{category:l,message:c}=o,d=s(),u=function(e,t,n,i){let o=[],s=0,a=Object.keys(t),r=0;for(;s<e.length;){let n=!1;for(let l=0;l<a.length;l++){let c=`{${a[l]}}`;if(e.substring(s,s+c.length)===c){n=!0,s>0&&o.push(i(e.substring(r,s))),t[a[l]].forEach((e=>{o.push(e)})),r=s+c.length,s+=c.length;break}}n||s++}r!==e.length&&o.push(i(e.substring(r,e.length)));return o}(r.t(l,c),d,0,a);if(!1===o.tag||"false"===o.tag)return u;return e("true"===o.tag?"span":o.tag,n,u)}}},6504:(e,t,n)=>{"use strict";n.d(t,{DQ:()=>i.isset,R8:()=>o,Tn:()=>s});var i=n(8974);function o(e,t){"undefined"!=typeof console&&console.warn(`[splang] ${e}`),t&&console.warn(t.stack)}function s(e){return"function"==typeof e}},4931:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(38252);let o=[];o=[{format:"woff2",url:n(31910)},{format:"woff",url:n(52972)},{format:"truetype",url:n(29308)}];class s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{},o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.input=$(e),this.input.attr("type","password"),this.onChangeHandler=()=>n(this.input.val(),this),this.onChangeMaskState=()=>i(this.mask,this),o&&this.identify(),this.setMaskState(t),this.input.on("input",(()=>{this.onChangeHandler()})),this.input.on("copy",(e=>{this.mask&&e.preventDefault()})),this.input.on("cut",(e=>{if(this.mask){e.preventDefault();const t=e.target.selectionStart,n=e.target.selectionEnd;e.target.value=e.target.value.substring(0,t)+e.target.value.substring(n),e.target.setSelectionRange(t,t)}})),this.checkFont(),Promise.all(s.fontPromises).then((()=>{this.checkFont()})).catch((()=>{}))}checkFont(){if(!document.fonts.check('1em "Password"'))return!1;this.input.attr("type","text")}static initAsterisksFont(){s.fontPromises=s.FORMATS.map((e=>{const t=new FontFace("Password",`url(${e.url})`,{style:"normal",weight:"400",format:e.format});return document.fonts.add(t),t.load()}))}identify(){const e=$("<div>").uniqueId();window.maskedInputs||(window.maskedInputs={}),window.maskedInputs[e.attr("id")]=this,this.input.attr("data-input-id",e.attr("id"))}setValue(e){this.input.val(e).change(),this.onChangeHandler()}toggleMaskState(){this.setMaskState(!this.mask)}setMaskState(e){this.mask=e,e?this.input.addClass(this.constructor.MASKED):this.input.removeClass(this.constructor.MASKED),this.onChangeMaskState()}}(0,i.A)(s,"MASKED","masked"),(0,i.A)(s,"fontPromises",[]),(0,i.A)(s,"FORMATS",o),s.initAsterisksFont();const a=s},51367:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=class{constructor(e,t){this.integerPart=t?.integerPart||0,this.decimalPart=t?.decimalPart||0,this.thousandSeparator=t?.thousandSeparator||"",this.decimalSeparator=t?.decimalSeparator||".",this.float=t?.float||0,this.stripTrailingZeros=t?.stripTrailingZeros||!1,null==e&&(e=0),"string"==typeof e&&(e=Number.isNaN(parseFloat(e))?0:this.removeSeparators(e)),this._stringFormat="0",this._numberFormat=0,this.splitParts(e),this.stringFormat(e),this.numberFormat()}removeSeparators(e){if(!this.float)return e.replaceAll(this.thousandSeparator,"");let t;return(e=e.split("")).forEach(((n,i)=>{/[^0-9]/.test(n)&&"-"!==n&&(e[i]="",t=i)})),t&&(e[t]="."),e.join("")}splitParts(e){this.decimalPart=(parseFloat(e)-parseInt(e)).toFixed(this.float),this.integerPart=parseInt(parseInt(e)+parseFloat(this.decimalPart)).toString()}stringFormat(e){"string"==typeof e?"0"===this.integerPart&&"-"===e[0]&&(this.integerPart="-0"):"0"===this.integerPart&&e<0&&(this.integerPart="-0");let t=parseInt(this.integerPart).toLocaleString("en-US").replaceAll(",",this.thousandSeparator),n=this.decimalPart.replace("0","");if(this.stripTrailingZeros&&(n=n.replace(/0+$/,""),n===this.decimalSeparator&&(n="")),1===parseInt(n))return this._stringFormat=t+Number(0).toFixed(this.float).replace("0.","."),!0;this._stringFormat=t+n.replace(".",this.decimalSeparator).replace("-","")}numberFormat(){parseFloat(this.decimalPart)<0&&(this.decimalPart=Math.abs(parseFloat(this.decimalPart)).toString());let e,t=parseFloat(this.integerPart+this.decimalPart);t>=0?(e=t-parseInt(t),this._numberFormat=parseFloat(parseFloat(parseInt(this.integerPart)+e).toFixed(this.float))):(e=Math.abs(t)-Math.abs(parseInt(t)),this._numberFormat=parseFloat(parseFloat(parseInt(this.integerPart)-e).toFixed(this.float)))}}},66167:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(){this.resolveData=[],this.handlersList=[],this.currentPromise=null}addToHandlers(e){return new Promise((t=>{this.handlersList.push({callback:e,resolve:t}),this.processHandlersList()}))}processHandlersList(){if(this.currentPromise||0===this.handlersList.length)return;const{callback:e,resolve:t}=this.handlersList.shift();this.currentPromise=Promise.resolve(e()).then((e=>{e&&this.resolveData.push(e),this.currentPromise=null,t(),this.processHandlersList()}))}}},8974:(e,t,n)=>{"use strict";n.r(t),n.d(t,{asteriskWithExcludeStart:()=>N,asterisksEmail:()=>F,asterisksPhone:()=>B,base64Decode:()=>D,base64Encode:()=>M,compareDays:()=>X,convertToHoursAndMinutes:()=>ee,createDeferredPromise:()=>O,debounce:()=>T,deepCopyObj:()=>S,empty:()=>r,emptyObject:()=>h,filterObjectsByValueInPath:()=>g,findJsonInText:()=>Z,format:()=>j,formatDate:()=>W,formatDateTime:()=>G,formattedRequest:()=>Y,formattedResponse:()=>q,generateParams:()=>te,getAttributeLabel:()=>se,getButton:()=>oe,getDaysToDate:()=>b,getDropdownButton:()=>ie,getTodayDate:()=>K,getUrlParam:()=>d,getUrlParams:()=>y,getValueByObjectPath:()=>m,getValueWithCurrency:()=>H,getWindowHeight:()=>_,getWindowWidth:()=>w,interceptError:()=>J,isArray:()=>A,isObject:()=>E,isset:()=>c,md5:()=>P,mergeDeep:()=>C,nl2br:()=>I,param:()=>u,parseAnonymousSwitchPage:()=>l,processingAdditionalFields:()=>k,processingRawTypes:()=>x,promisifiedAjax:()=>L,rand:()=>v,responseNotification:()=>ne,setSelectionRange:()=>R,sizeInBytesToStringValue:()=>Q,sortObjectByProperty:()=>f,supports_html5_storage:()=>a,taxFormat:()=>U,toCamelCase:()=>V,withGet:()=>p});var i=n(51367),o=n(50182),s=n.n(o);function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function r(e){let t=!1;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=e instanceof Object&&0===Object.keys(e).length),void 0===e||""===e||0===e||"0"===e||null===e||!1===e||e instanceof Array&&0===e.length||t}function l(e){let t="";return t="string"!=typeof e?`(${e.toString()})`:`(${e})`,t=t.replace("anonymous(","anonymous(...params"),t=t.replace(/(\)\s*)(;?\s*}\s*\)$)/,", ...params); })"),new Function("event","force",`const f = ${t}; f(event, force)`)}function c(e,t){let n,i;if("object"!=typeof e||null===e)return!1;if("number"==typeof t&&(t=t.toString()),"string"==typeof t||t instanceof String)i=[t];else{if(!Array.isArray(t))return!1;i=t}return n=function(e,t){let i=t.shift().toString();return null!==e&&"object"==typeof e&&void 0!==e[i]&&(t.length<=0||n(e[i],t))},n(e,i)}function d(e){return new RegExp(`[?&]${e}=([^&#]*)`).exec(window.location.href)[1]||0}function u(e,t){const n=(e,t,n)=>{let i=n?`${n}[${encodeURIComponent(e)}]`:encodeURIComponent(e);return t instanceof Date?`${i}=${encodeURIComponent(t.toISOString())}`:"object"==typeof t&&null!==t?(s=t,0===Object.keys(s).length&&s.constructor===Object||(o=t,Array.isArray(o)&&0===o.length)?"":u(t,i)):`${i}=${encodeURIComponent(t)}`;var o,s};return Object.keys(e).map((i=>n(i,e[i],t))).filter((e=>""!==e)).join("&")}function p(e,t){return h(t)?e:`${e}?${u(t)}`}function h(e){return void 0===e||Object.keys(e).length<=0}function f(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))if(n){let n=e[i];for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n=n[t[e]]);o[i]=n}else o[i]=parseInt(e[i][t]);let s=[];for(let e in o)s.push([e,o[e]]);s.sort(((e,t)=>e[1]-t[1]));let a={};i&&(a=new Map);for(let t in s)Object.prototype.hasOwnProperty.call(s,t)&&(i?a.set(s[t][0],e[s[t][0]]):a[s[t][0]]=e[s[t][0]]);return a}function m(e,t){const n=t.split(".");let i=e;for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)){if(void 0===i[n[e]])return;i=i[n[e]]}return i}function g(e,t,n){let i={};for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&m(e[o],t)===n&&(i[o]=e[o]);return i}function v(e,t){return Math.random()*(t-e)+e}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return 0;const t=moment(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD").startOf("day"),n=moment().startOf("day"),i=t.diff(n,"days");return i>0?i:0===i?0:-1}function y(e){void 0===e&&(e=window.location.href);let t=new URL(e);return new URLSearchParams(t.search)}function w(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function _(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function T(e,t,n){let i;return function(){let o=this,s=arguments,a=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(o,s)}),t),a&&e.apply(o,s)}}function E(e){return e&&"object"==typeof e&&!Array.isArray(e)}function S(e){return JSON.parse(JSON.stringify(e))}function A(e){return"object"==typeof e&&null!==e&&e.constructor===Array}function C(e,t){let n={...e};return E(e)&&E(t)&&Object.keys(t).forEach((i=>{E(t[i])?i in e?n[i]=C(e[i],t[i]):Object.assign(n,{[i]:t[i]}):Object.assign(n,{[i]:t[i]})})),n}function k(e,t){let n={};return Object.entries(t).forEach((t=>{let[i,o]=t,s=e[i];if(c(o,"ajax")&&o.ajax)if(Array.isArray(s))if("relation_multiple"===o.type){let e=[];s.forEach((t=>{e.push(t.id)})),s=e}else{let e=s[0];s="object"==typeof e?e.id:e}else"object"==typeof s&&(s=s.id);"file"===o.type?n[i]=s:n[i]=x(s)})),n}function x(e){return JSON.parse(JSON.stringify(e))}function I(e,t){if(null==e)return"";let n=t||void 0===t?"<br />":"<br>";return`${e}`.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,`$1${n}$2`)}const O=()=>{let e,t;return{promise:new Promise(((n,i)=>{e=n,t=i})),resolve:e,reject:t}};function L(e){return new Promise(((t,n)=>{$.ajax({...e,success(e){t(e)},error(e){n(e)}})}))}const R=(e,t,n)=>{if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){let i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i.select()}};function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.slice(0,t)+"*".repeat(e.substring(t).length):"*".repeat(e.length)}function D(e){try{return atob(e)}catch{return""}}function M(e){try{return btoa(e)}catch{return""}}const P=e=>e?s()("md5").update(e).digest("hex"):e;function F(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?D(e):e;if(!t)return"";let n=t.split("@"),i=n[1].split(".");return`${N(n[0],2)}@${N(i[0],1)}.${N(i[i.length-1])}`}function B(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?D(e):e;if(!t)return"";const n=function(e){return(e=e.replace(/\D/g,"").slice(-10)).replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3")}(t.replace(/\+/g,""));return n.substring(0,n.length-2).replace(/\d/g,"*")+n.slice(-2)}function H(e){let t=window.currency_format_pattern;return"string"==typeof e?t.replace("0",e.trim()):"number"==typeof e?t.replace("0",e):""}function j(e){return new i.A(e,{float:window.spl_config.numberConfig.decimal_finance.digits,thousandSeparator:window.spl_config.numberConfig.thousand_finance.separator,decimalSeparator:window.spl_config.numberConfig.decimal_finance.separator})._stringFormat}function U(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?new i.A(e,{float:window.spl_config.numberConfig.tax.digits})._stringFormat:new i.A(e,{float:window.spl_config.numberConfig.tax.digits,thousandSeparator:window.spl_config.numberConfig.thousand_finance.separator,decimalSeparator:window.spl_config.numberConfig.decimal_finance.separator})._stringFormat}function W(e){let t=window.moment(e,"YYYY-MM-DD").format(date_format);return"Invalid date"!==t?t:""}function K(){return window.moment().format(date_format)}function G(e){let t=window.moment(e,"YYYY-MM-DD HH:mm:ss").format(datetime_format);return"Invalid date"!==t?t:""}function V(e){return"string"!=typeof e?"":e.replace(/[^a-zA-Z0-9]+(.)/g,((e,t)=>t.toUpperCase()))}const z=e=>e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("_");function q(e){return"object"!=typeof e?e:Object.keys(e).reduce(((t,n)=>(t[V(n)]=e[n],t)),{})}function Y(e){return"object"!=typeof e||null===e||Object.prototype!==Object.getPrototypeOf(e)?e:Object.keys(e).reduce(((t,n)=>(t[z(n)]=e[n],t)),{})}function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=[...t].filter((e=>Number(e)>0));for(let e=0;e<i.length-1;e++){if(Number(i[e])>=Number(i[e+1]))return window.showErrors([window.t("common",'"Reminder #{number} day" should be in ascending order.',{number:e+1})],4),!0}return!1}function Q(e,t,n,i){if(void 0===e||""===e)return"";let o,s;for(void 0===t&&(t=2),void 0===n&&(n=window.spl_config.numberConfig.networking.size_of_kb),void 0===i&&(i=!1),e=parseFloat(e),o=i?["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=0;e>=n&&s<o.length-1;s++)e/=n;return`${e.toFixed(t)/1} ${o[s]}`}function Z(e){let t=[],n=0,i=-1;if("string"!=typeof e||!e)return t;for(let o=0;o<e.length;o++)if("{"===e[o])0===n&&(i=o),n++;else if("}"===e[o]&&(n--,0===n&&-1!==i)){const n=e.slice(i,o+1);try{const e=JSON.parse(n);t.push(e)}catch(e){console.error("Invalid JSON:",e)}i=-1}return t}function J(e,t,n,i){let o=e.responseJSON,s=()=>{};o||(o=Z(e.responseText)[0]),e.status>=300&&e.status<400&&"function"==typeof t&&(s=t),e.status>=400&&e.status<500&&"function"==typeof n&&(s=n),e.status>=500&&"function"==typeof i&&(s=i),2===arguments.length&&(s=t),s.apply(null,[o])}function ee(e){const t=Math.floor(e);return{hours:t,minutes:Math.round(60*(e-t))}}function te(e){let t=[];for(let n in e)t.push(`${n}=${e[n]}`);return t.join("&")}function ne(e,t,n){let{result:i,message:o}=e;i&&o?(show_success(o,4),"function"==typeof t&&t()):(show_error(o,4),"function"==typeof n&&n())}function ie(e,t){return{options:{class:"btn btn-outline-primary",...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}},title:e,events:{click:t},...arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}}}function oe(e,t,n){return{text:e,options:{disabled:arguments.length>3&&void 0!==arguments[3]&&arguments[3],class:["btn",`btn-${t}`],...arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}},click:n,...arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}}}function se(e,t){if(e){if(c(e.attributes,[t,"label"]))return e.attributes[t].label;if(c(e,[t,"label"]))return e[t].label}return t}},89749:(e,t,n)=>{n(58740),n(43838),function(){var e={};function t(e){this.eventName=e,this.named_callbacks={},this.anonymous_callbacks=[]}t.prototype.add=function(e){e.name?this.named_callbacks[e.name]=e:this.anonymous_callbacks.push(e)},t.prototype.remove=function(e){e.name?delete this.named_callbacks[e.name]:(this.named_callbacks={},this.anonymous_callbacks=[])},t.prototype.emit=function(e){this.anonymous_callbacks.length>0&&this.anonymous_callbacks.forEach((function(t){t(e)}));for(let t in this.named_callbacks)this.named_callbacks[t](e)},t.prototype.handlersCount=function(){return Object.keys(this.named_callbacks).length+this.anonymous_callbacks.length},window.init_web_events=function(){var t=io.connect("//"+location.host+"/web_events");t.on("connect",(function(){t.emit("join"),t.removeAllListeners("event_message"),t.on("event_message",(function(t){void 0!==e[t.event]&&e[t.event].emit(t.data)}))}))},window.add_socket_listener=function(n,i){if("function"!=typeof i)throw new TypeError("Param callback must be callable!");void 0===e[n]&&(e[n]=new t(n)),e[n].add(i)},window.remove_socket_listener=function(t,n){void 0!==e[t]&&(void 0!==n&&n.name?(e[t].remove(n),0===e[t].handlersCount()&&delete e[t]):delete e[t])},window.load_io=function(){io.connect("//"+location.host+"/notification").on("notification",(function(e){if("usage:::"==e.params[1]){$(".dashboard-top").is(":visible")&&splynx_event_bus.emit("dashboard-server-info-updated",{cpuUsage:e.params[2],iowait:e.params[3]})}else{var t=e.params[1],n=e.params[2]||4,i=e.params[3]||"message",o=1==e.params[4],s=e.params[5]||void 0;switch(i){case"message":show_message(t,n,o,s);break;case"success":show_success(t,n,o,s);break;case"warning":show_warning(t,n,o,s);break;case"information":show_information(t,n,o,s);break;case"error":show_error(t,n,o,s)}}}))}}()},97594:(e,n,i)=>{if(i(58740),i(43838),i(39028),window.is_need_to_reload=!1,window.logout_timer_now=window.time(),window.log_socket=null,$.fn.dataTable.ext.errMode=function(e,t,n){show_warning(`Cannot load data, please refresh page... <br>If it repeated several times, please contact the Administrator<br>${n}`,8)},window.webUiPopoverDefaultTemplate='<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><h6 class="webui-popover-title"></h6><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',window.webUiPopoverUnderModalTemplate='<div class="webui-popover under-modal"><div class="webui-arrow"></div><div class="webui-popover-inner"><h6 class="webui-popover-title"></h6><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',window.logout_timer=function(){if(!window.logout_is_enabled)return;let e=window.logout_time-(window.time()-window.logout_timer_now);(0==e||-10==e||-100==e||e<-1e3)&&logout("/admin/logout"),$("#auto_logout").html(e)},window.logout_timer_reset=function(){window.logout_timer_now=window.time()},$.ui&&$.ui.dialog&&$.ui.dialog.prototype._allowInteraction){let e=$.ui.dialog.prototype._allowInteraction;$.ui.dialog.prototype._allowInteraction=function(t){return!!$(t.target).closest(".select2-dropdown").length||e.apply(this,arguments)}}function o(e,t){const n=e.data("plugin_webuiPopover").options.placement;e.webuiPopover("hide"),e.data("plugin_webuiPopover").options.placement=t,e.webuiPopover("show"),e.data("plugin_webuiPopover").options.placement=n}function s(e){let t=document.querySelector(".search-icon")?.querySelector("i"),n=""==e.value?"icon-ic_fluent_search_24_regular":"icon-ic_fluent_dismiss_24_regular";t&&(t.removeAttribute("class"),t.className=n),""!=e.value&&$(document).on("click","div.dataTables_filter .search-icon",(t=>{t.preventDefault(),$("div.dataTables_filter input").val("").trigger("input").focus(),s(e)}))}window.logout_is_enabled&&(setInterval(window.logout_timer,1e3),$(document).ajaxStart(window.logout_timer_reset)),WebuiPopovers.setDefaultOptions({template:window.webUiPopoverDefaultTemplate});var a;$.extend($.fn.DataTable.defaults,{autoWidth:!1,responsive:!0,deferRender:!0,stateSave:!0,processing:!0,sPaginationType:"full_numbers",lengthMenu:[[10,25,50,75,100,-1],[10,25,50,75,100,"All"]],oLanguage:{oPaginate:{sFirst:"<i class='icon-ic_fluent_arrow_previous_24_regular'></i>",sPrevious:"<i class='icon-ic_fluent_chevron_left_24_regular'></i>",sNext:"<i class='icon-ic_fluent_chevron_right_24_regular'></i>",sLast:"<i class='icon-ic_fluent_arrow_next_24_regular'></i>"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",search:"_INPUT_",sSearch:"",sSearchPlaceholder:"Table search",sUrl:"",sZeroRecords:"No matching records found",oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"}},iDisplayLength:100,dom:"<'row'<'col-md-12'<'table_title table-title'>>><'row'<'col-md-12'<'dt-actions'<'dt-show-items'l><'dt-search'f><'dt-buttons-wrap'B>r>>><'row dt-under-header'>t<'row justify-content-end under-table'<'info' i>p>",fnInitComplete(e){const t=".dataTables_length select";$(t).select2({minimumResultsForSearch:-1});let n=$(t).data("select2");void 0!==n&&"$dropdown"in n&&n.$dropdown.find(".select2-results__options").addClass("select2-no-scrollbar"),window.drawMenuLengthForDataTable(e.sTableId,e.oFeatures.bServerSide,e._iDisplayLength)},drawCallback(){this.api().columns.adjust().responsive.recalc()}}),$(document).on("init.dt",(()=>{$("div.dataTables_filter .search-icon").length>0||(()=>{let e=document.querySelectorAll(".dataTables_filter");if(!e.length)return;let t=e[0].querySelector("input");if(void 0===t)return;let n=t.parentElement,i=document.createElement("button");i.setAttribute("type","button");let o=document.createElement("i");i.classList="search-icon",o.classList="icon-ic_fluent_search_24_regular",i.appendChild(o),n.appendChild(i),$(document).on("input","div.dataTables_filter input",(()=>{s(t)})),s(t)})()})),$("body").on("change","select.tariff-partner-select",(e=>{$.ajax({url:"/admin/tariffs--get-tariffs-by-partners",data:{partners:$(e.target).val(),type:$(e.target).data("tariff-type"),excludeId:$(e.target).data("exclude-id"),checkIsActive:$(e.target).data("check-is-active")}}).done((t=>{let n=$($(e.target).attr("data-tariff-target")),i=n.val(),o="";$.each(t,((e,t)=>{o+=`<option value=${e}>${t}</option>`})),n.html(o),i&&$.each(i,((e,t)=>{n.find(`option[value='${t}']`).prop("selected",!0)})),n.multipleSelect("refresh")})).fail((()=>{showErrors()}))})),$(document).on("preXhr.dt",(()=>{$(".dataTables_filter input").attr("readonly","readonly")})),$(document).on("draw.dt",(()=>{$(".dataTables_filter input").removeAttr("readonly")})),window.getColoredStateLocalStorage=function(e){let t=e.getAttribute("id"),n=localStorage.getItem(`coloredState${t}DataTable`);if(!empty(n))return window.localStateColoredButton="true"===n,window.localStateColoredButton},window.toggleColoredClasses=function(e,t){let n=document.getElementById("toggle_color_button"),i=n.closest(".dataTables_wrapper"),o=e.getAttribute("id");n.classList.toggle("active"),i.classList.toggle("table-not-colored"),e.classList.toggle("table-colored"),t=!t,window.saveColoredStateLocalStorage(o,t)},window.saveColoredStateLocalStorage=function(e,t){supports_html5_storage()&&localStorage.setItem(`coloredState${e}DataTable`,t)},window.coloredRow=function(e){let t=document.createElement("button"),n=document.createElement("i"),i=document.querySelector(".dt-buttons-wrap"),o=document.querySelector(".dataTables_wrapper"),s=e?document.getElementById(e):o.querySelector("table"),a=document.querySelector(".dt-buttons"),r=["btn","btn-outline-secondary","btn-icon","me-8","active"],l=window.getColoredStateLocalStorage(s);l?s.classList.add("table-colored"):(r.pop(),o.classList.add("table-not-colored"),s.classList.remove("table-colored")),t.setAttribute("type","button"),t.setAttribute("id","toggle_color_button"),t.setAttribute("title","Toggle colored rows according to status"),t.classList.add(...r),n.classList.add("icon-ic_fluent_color_24_regular"),t.appendChild(n),i.insertBefore(t,a),t.addEventListener("click",(e=>{e.stopPropagation(),this.toggleColoredClasses(s,l)}),!0)},window.content_id=function(e){-1!==e.indexOf("#")&&(e=e.substring(0,e.indexOf("#")));return $.each(["view","edit","admin/config/additional-fields","admin/tariffs/fup","admin/crm/leads/add","admin/tickets/create","admin/tickets/opened","admin/scheduling/tasks","admin/tariffs/internet--change-tariff-on-services","admin/tariffs/voice--change-tariff-on-services","admin/tariffs/recurring--change-tariff-on-services","admin/crm/leads/convertation","admin/crm/leads/add","admin/crm/leads/list","admin/customers/add","admin/finance/invoices","admin/inventory/items","admin/inventory/products","admin/inventory/supply/suppliers","admin/inventory/supply/supplier-invoices","admin/networking/acs/devices"],((t,n)=>{if(-1!=e.indexOf(n)&&-1!=e.indexOf("?"))return e=e.substring(0,e.indexOf("?")),!1})),"/"===e[e.length-1]&&(e=e.slice(0,-1)),e=e.replace(/[^a-z0-9 ,.!]/gi,"_")},window.createHTMLDiv=function(e){let t=window.content_id(e);0==$("#content").find(`#content${t}`).length&&$("<div/>",{id:`content${t}`,class:"content clearfix"}).appendTo("#content")},window.processHTML=function(){},window.switch_page=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"/"!==e[0]&&(e=`/${e}`),new Promise(((i,o)=>{window.closeAllDialogs();let s=()=>{splynx_event_bus.off("after_switch_page",s),i(!0)};if(splynx_event_bus.on("after_switch_page",s),window.checkIfNeedOpenLinkInNewTab(t))return window.open(e,"_blank"),void i(!0);n?xApp.$router.push({force:!0,path:e}):xApp.$router.push(e,(()=>{}),(()=>{o()}))})).catch((()=>{}))},window.checkIfNeedOpenLinkInNewTab=function(e){return e&&(e.metaKey||e.ctrlKey||1===e.button)},window.fixNumber=function(e){let{value:t}=e;if(0==t.length)return!0;let n,i=e.value.replace(",",".");if(t!=i&&(e.value=i),"-"==e.value.charAt(0)&&1==e.value.length)return!0;try{n=parseFloat(e.value,10),n!=e.value&&("NaN"==`${n}`&&(e.value=0,n=0,window.fixNumber(e)),e.value=n,0==n&&e.select())}catch(e){console.warn(`Fix number error: ${e}`)}},window.showCoursorLoadWhenAjaxCall=!0,$(document).ajaxStart((()=>{window.showCoursorLoadWhenAjaxCall&&($("body").addClass("wait"),NProgress.configure({showSpinner:!1}),NProgress.start())})).ajaxComplete((()=>{$("body").removeClass("wait"),NProgress.done()})),window.ifItIpValidateIt=function(e){if(e.length<7)return!0;if(0==/^\d+\.\d+\.\d+\.\d+$/.test(e))return!0;return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)},window.showAjaxErrors=!0,window.makePopover=function(){Array.from(document.querySelectorAll('[data-bs-toggle="popover"]')).forEach((e=>new Popover(e,{trigger:"hover focus"})))},$.prototype.popover=(a=$.prototype.popover,function(e){try{return a.call(this,e)}catch(t){if(t instanceof TypeError&&"destroy"===e)return a.call(this,"dispose")}}),$(document).on("click",".active-tooltip",(function(e){let t=$(this).data("active-tooltip");if(!t)return;if(e.stopImmediatePropagation(),$(".active-tooltip").not(this).each((function(){$(this).hasClass("active-tooltip-show")&&($(this).webuiPopover("destroy"),$(this).removeClass("active-tooltip-show"))})),$(this).hasClass("active-tooltip-show"))return $(this).webuiPopover("destroy"),void $(this).removeClass("active-tooltip-show");let n,i=this;n=window.isValidJSON($(this).attr("data-active-tooltip-params"))?JSON.parse($(this).attr("data-active-tooltip-params")):$(this).attr("data-active-tooltip-params"),$(document).trigger(t,[n,function(e){let t,n=Object.assign({type:"html",placement:"auto-bottom",trigger:"manual"},e);$(i).webuiPopover(n).webuiPopover("show"),$(i).addClass("active-tooltip-show"),function(e){const t=e.data("plugin_webuiPopover").$target;window.isElementInViewport(t)||(t.offset().left+t.width()>$(window).width()&&o(e,"left"),t.offset().left<0&&o(e,"right"),t.offset().top>$(window).height()&&o(e,"top"))}($(i)),t=function(e){$(e.target).parents(".webui-popover").length||($(document).off("click",t),$(i).webuiPopover("destroy"),$(i).removeClass("active-tooltip-show"))},$(document).on("click",t)},function(){$(i).webuiPopover("destroy"),$(i).removeClass("active-tooltip-show")}]),n=null})),window.reload_data_table_event=void 0,window.reloadLastDataTable=function(){"function"==typeof window.reload_data_table_event&&window.reload_data_table_event()},window.createReloadDataTableEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e){let t=$(e);if(!t.length)return;e=t.DataTable()}window.reload_data_table_event=function(){try{e.column(0).checkboxes.deselectAll()}catch(e){if("TypeError"===e.name)return!1}e.ajax.reload(null,t),window.reload_data_table_event=void 0}},window.massActionSuccess=function(e,t){closeLastDialog(),show_success(e,4),t.column(0).checkboxes.deselectAll(),reloadLastDataTable()},window.loadVueComponents=function(e,t,n){window.loadVueComponentsByContext("admin",e,t,n)},window.addEventListener("beforeunload",(e=>{if(isHaveUnsavedData($("#content, .splynx-dialog-content"))){let n=t("common","Are you sure that you want to leave this page?");return(e||window.event).returnValue=n,n}})),$.widget("blueimp.fileupload",$.blueimp.fileupload,{_getSingleFileInputFiles(e){let t,n;if(e=$(e),t=$.makeArray(e.prop("files")),t.length)void 0===t[0].name&&t[0].fileName&&$.each(t,((e,t)=>{t.name=t.fileName,t.size=t.fileSize}));else{if(n=e.prop("value"),!n)return $.Deferred().resolve([]).promise();t=[{name:n.replace(/^.*\\/,"")}]}return $.Deferred().resolve(t).promise()}}),window.registerOnPageAdmin=function(e,t,n){void 0!==t&&t||console.error("adminInfo is null!!!");let i,o,s,a,r,l=null,c=null,d=function(){return`spl_on_page_admins_position_${e.replace(/[^\w]/gi,"_")}`};i=function(){if(!supports_html5_storage())return;let e=d(),t=$("#spl_admins_on_page_wrapper").position(),n=`${t.left}|${t.top}`;localStorage.setItem(e,n)},o=function(){if(!supports_html5_storage())return null;let e=d(),t=localStorage.getItem(e);if(null===t)return null;let n=t.split("|");return{x:n[0],y:n[1]}};let u=function(){$("#spl_admins_on_page_wrapper").remove(),null!==l&&(l.disconnect(),l=null),$(window).off("blur",s),$(window).off("focus",a)},p=function(){l&&(l.disconnect(),l=null)},h=function(){l=io.connect(`//${window.location.host}/on_page_admins`),l.on("connect",(()=>{l.emit("open_page",{page:e,admin:t}),l.removeAllListeners("list_on_page_admins"),l.on("list_on_page_admins",(e=>{let n=e.filter((e=>e.id!==t.id&&"splynx-remote-support"!==e.login));empty(n)?$("#spl_admins_on_page_wrapper").remove():function(e){let t=$('<div id="spl_admins_on_page_wrapper">');e.forEach((e=>{let n="";n=empty(e.avatar.url)?`<span class="default_avatar_letter" title="${e.name}">${e.avatar.letter}</span>`:`<img src="${e.avatar.url}" alt="${e.name}" title="${e.name}" onload="resizeImage(this)">`,t.append(`<div class="avatar">\n                    <span class="avatar-wrap default-avatar default_color--'}${e.avatar.color}">\n                        ${n}\n                    </span>\n                </div>`)})),$("#spl_admins_on_page_wrapper").remove();let n=o();empty(n)||($(t).css("bottom","auto"),$(t).css("right","auto"),$(t).css("top",`${n.y}px`),$(t).css("left",`${n.x}px`)),$(".main").append(t),$("#spl_admins_on_page_wrapper").draggable({containment:"window",grid:[10,10],stop(){$(".main").css("overflow",""),i()},start(){$(".main").css("overflow","hidden"),$(t).css("bottom","auto"),$(t).css("right","auto")}}),r(),$(window).resize(r)}(n)}))}))};s=function(){c&&clearTimeout(c),c=setTimeout(p,12e4)},a=function(){c&&(clearTimeout(c),c=null),null===l&&h()},r=function(){let e=$("#spl_admins_on_page_wrapper");if(0===e.length)return!1;let t=$(window).width(),n=$(window).height(),i=t-e.outerWidth()<e.position().left,o=n-e.outerHeight()<e.position().top;i&&e.css({left:"",right:""}),o&&e.css({top:"",bottom:""})},h();let f=$.address.value();$.address.change((function(e){-1===e.value.indexOf(f)&&u()})),"function"==typeof n&&n(u),$(window).blur(s),$(window).focus(a)},$(document).on("click",".link-with-href",(function(){return switch_page($(this).attr("href")),!1})),$(document).on("click",".link-with-href-no-cache",(function(){return window.switch_page_without_cache($(this).attr("href")),!1})),Vue.mixin({methods:{t:(e,t,n)=>window.xApp.$t(e,t,n)}}),jQuery.fn.dataTable.Api.register("processing()",(function(e){return this.iterator("table",(t=>{t.oApi._fnProcessingDisplay(t,e)}))})),window.checkDefaultCond=function(e,t,n,i){const o={showDefault:!1,showPartner:!1};return""!==t&&e!=t&&(o.showDefault=!0),null!=n&&e!=n&&function(e){if(void 0===e)return!1;const t=e.data("partner-id");return void 0!==t&&0!==t}(i)&&(o.showPartner=!0),o},$(document).on("change",".not-default-value-label [data-default-value]",(function(){const e=$(this);let t=e.val();const n=e.data("partner-default");e.hasClass("form-check-input")&&(t=e.prop("checked")?1:0);const i=e.data().defaultValue,o=e.parents(".not-default-value-label"),s=window.checkDefaultCond(t,i,n,e);s.showDefault||s.showPartner?o.removeClass("is-default"):o.addClass("is-default")}));let r=!1;$(document).on("click",".not-default-value-label .input-group-reset",(function(){if(r)return;const e=$(this).parents(".not-default-value-label"),n=e.find("[data-default-value]");let i=n.val(),o=null;const{defaultValue:s}=n.data();let a=n[0].nodeName.toLowerCase();n.hasClass("form-check-input")&&(a="switch",i=n.prop("checked")?1:0);const l=e.find("[data-partner-default]");let c=l.length>0;c&&(o=l.data("partner-default"),c=o!=i);let d=s,u=null;c&&(u=o);let p,h,f,m=!1;switch(a){case"input":break;case"select":m=n[0].multiple,m&&(p=s.split(","),d=[],c&&(h=o.split(","),u=[])),f=$(n).find("option"),$(f).each(((e,t)=>{if(m){if(p.indexOf(t.value)>=0&&d.push(t.text),c){h.indexOf(t.value)>=0&&u.push(t.text)}}else t.value==s&&(d=t.text),c&&t.value==o&&(u=t.text)})),m&&(i=i.join(","),d=d.join(", "),c&&(u=u.join(", ")));break;case"switch":d=s?t("config","On"):t("config","Off"),c&&(u=o?t("config","On"):t("config","Off"));break;default:d=""}const g=t("config","Reset to system default"),v=t("config","Reset to partner default"),b=t("config","Cancel"),y="splynx_dialog_reset_to_default_overley",w=$("<div>").addClass("ui-widget-overlay ui-front").attr("id",y).css("z-index",90),_=window.checkDefaultCond(i,s,o,n);let T;_.showDefault&&(T=t("config",'Are you sure you want to reset to system default value "{defaultValueText}"?',{defaultValueText:d}),_.showPartner&&(T+=`</br>${t("config",'or partner default value "{partnerDefaultValueText}"',{partnerDefaultValueText:u})}`)),!_.showDefault&&_.showPartner&&(T=t("config",'Are you sure you want to reset to partner default value "{partnerDefaultValueText}"?',{partnerDefaultValueText:u}));let E={};_.showPartner&&(E[v]=function(){switch(a){case"input":case"textarea":n.val(o).trigger("change");break;case"select":if(m){const e=$(n).find("option");p=o.split(","),$(e).each(((e,t)=>{t.selected=p.indexOf(t.value)>=0})),n.multipleSelect("refresh");break}n.val(o).trigger("change");break;case"switch":n.trigger("click")}$(this).dialog("close")}),_.showDefault&&(E[g]=function(){switch(a){case"input":case"textarea":n.val(s).trigger("change");break;case"select":if(m){const e=$(n).find("option");p=s.split(","),$(e).each(((e,t)=>{t.selected=p.indexOf(t.value)>=0})),n.multipleSelect("refresh");break}n.val(s).trigger("change");break;case"switch":n.trigger("click")}$(this).dialog("close")}),E[b]=function(){$(this).dialog("close")},show_dialog(t("config","Warning!"),T,{class:"spl-dialog admin-support-tickets-messages-split-dialog",dialog:{resizable:!0,height:250,width:550,buttons:E}},(()=>{$("body").addClass("modal-open"),$("body").append(w),r=!0}),(()=>{r=!1,$(`#${y}`).remove(),$("body").removeClass("modal-open")}))})),window.deleteRow=function(e){let t=e.rows(".mark-for-delete");0===t[0].length&&($(e.table().node()).find(".dt-checkboxes:checked").closest("tr").addClass("mark-for-delete"),t=e.rows(".mark-for-delete")),e.column(0).checkboxes.deselectAll();let n=t.nodes();if(!0!==e.settings()[0].oFeatures.bServerSide)return t.remove().columns.adjust(),void e.draw(!1);n.each((e=>{$(e).removeClass("mark-for-delete").addClass("mark-deleted"),$(e).find("input").attr("disabled",!0),$(e).find("a").addClass("disabled").removeAttr("title"),$(e).find("[onclick]").removeAttr("onclick"),$(e).find("[data-url]").removeAttr("data-url"),$(e).find(".active-tooltip").removeAttr("data-active-tooltip").removeClass("active-tooltip"),$(e).off("click","a").on("click","a",(e=>(e.preventDefault(),!1))),$(e).find(".show_short_ticket").webuiPopover("destroy")}))},window.markForDelete=function(e){let t=$(e).closest("tr");t.hasClass("child")?t.prev("tr.parent").addClass("mark-for-delete"):t.addClass("mark-for-delete")},window.unmarkDelete=function(){$(".mark-for-delete").removeClass("mark-for-delete")},splynx_event_bus?.on("jq-tab-change",(()=>{$(".dataTable").each((function(){$(this).DataTable().draw()}))})),$(window).on("shown.webui.popover",(e=>{let t=()=>{let t=$(e.target);window.matchMedia("(min-width: 768px)").matches&&(t.hasClass("active-tooltip")||t.hasClass("modal-item-popover")?t.webuiPopover("destroy"):t.webuiPopover("hide"),t.hasClass("active-tooltip-show")&&t.click())};($(".ui-dialog").length||$(".vue-dialog-body").length)&&$(window).on("scroll",t),$(".splynx-dialog-content").on("scroll",t),$(window).on("resize",t),$(".vue-dialog-body").on("scroll",t)})),splynx_event_bus?.on("vue-modal-loaded",(e=>{let t=()=>{if(window.matchMedia("(max-width: 768px)").matches)return!1;$(".vue-popover").parent().click(),$(e).off("scroll.vue-modal-loaded"),setTimeout((()=>{$(e).on("scroll.vue-modal-loaded",t)}),1e3)};$(e).on("scroll.vue-modal-loaded",t)})),splynx_event_bus?.on("after_switch_page",(()=>{$(".splynx-breadcrumbs > ul").animate({scrollLeft:2*$(".splynx-breadcrumbs > ul").width()},50)})),window.switch_page_without_cache=function(e){"/"!==e[0]&&(e=`/${e}`),window.location.href=e},splynx_event_bus?.on("page-activated",(()=>{$(".table").each((function(){$.fn.dataTable.isDataTable($(this))&&$(this).DataTable().responsive.recalc()}))})),window.isValidEmail=e=>/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e),window.resetBootstrapTagInputField=()=>{$(".bootstrap-tagsinput .tt-input").each((function(){const e=$(this),t=e.closest(".bootstrap-tagsinput").parent().children("input");e.on("focusout",(()=>{const n=e.val();window.isValidEmail(n)&&t.tagsinput("add",n),setTimeout((()=>{e.val("")}),0)}))}))},window.open_dialog_for_preview_customer_document=(e,t)=>{let n=new splynx_dialog(`/admin/${e}`,{dialog:{modal:!0}},t).open();registerDialog(n)},window.reassign_messenger_chat=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"customer";"lead"!==t&&(t="customer"),window.showModal("messenger-app-re-assign-chat",{chatId:e,type:t})},window.close_messenger_chat=(e,n)=>new Promise((i=>{let o="";o="lead"!==n?"/admin/customers/communication/messengers-chat--close-chat":"/admin/crm/leads/communication/messengers-chat--close-chat",window.vue_confirm_dialog(t("messengers",'Are you sure you want to close this chat? This action will mark the chat as "Closed" and remove any current assignment.'),(async()=>{$.ajax({url:o,method:"GET",data:{chatId:e},success:e=>{let{result:t,message:n}=e;t?(window.reloadLastDataTable(),show_success(n,4)):show_error(n,4),i()}})}),(()=>i()),(()=>i()))})),window.open_messenger_chat=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};window.showModal("messenger-open-chat",{chatId:e,scrollToMessage:t,onDismiss:n,onClose:n})},window.link_messenger_chat=e=>{window.showModal("messenger-connect-chat",{chatId:e,onSubmit(){window.reloadLastDataTable()}})},window.create_from_unknown=(e,t)=>{window.showModal("messenger-create-from-unknown",{fullName:e,phoneNumber:t,onSubmit(){window.reloadLastDataTable()}})},window.start_messenger_conversation=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e.free&&"modal"===e.point_meta.type){const o={};n&&(o.customer_id=n),window.showModal("add-on-link-modal",{props:{width:500,height:320,module:e.point_meta.module,point:e.point_meta.point,pointParams:o,params:{messengerId:t,phone:i}}})}},window.restore_messenger_chat=(e,t,n,i)=>{window.start_messenger_conversation(t,i,e,n)},window.create_messenger_chat=e=>{let{messenger:t,author:n}=e;const{startConversation:i,id:o}=t;window.start_messenger_conversation(i,o,n)},window.addLabelsToTicket=e=>{window.showModal("mass-add-labels-to-ticket",{ids:e,onSubmit(){window.reloadLastDataTable()}})},$.extend($.fn.dataTable.defaults,{stateLoadParams(e,t){t.search.search=""}}),window.send_customer_message=function(e){open_dialog_new(`customers/view--send-message?id=${e}`)},window.sendLeadMessage=function(e){open_dialog_new(`crm/leads/view--send-message?id=${e}`)},(e=>{e.keepGoingGettingInvoicesExportProgress=!1,e.invoicesIdsToCheck=[],e.getInvoicesExportProgress=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";0===e.invoicesIdsToCheck.length&&e.stopGetInvoicesExportProgress(),e.keepGoingGettingInvoicesExportProgress&&(""!==n&&$(n).prop("disabled",!0),setTimeout((()=>{$.ajax({url:"/admin/finance/invoices--export-history-progress",type:"POST",data:{ids:e.invoicesIdsToCheck},dataType:"json",success(i){$.each(i,((i,o)=>{let{id:s}=o,{progress:a}=o;if("process"===o.status)$(`#admin_finance_invoices_export_progress_bar_${s}`).html(`${a}%`).width(`${a}%`);else{e.invoicesIdsToCheck=$.grep(e.invoicesIdsToCheck,(e=>e!==s)),$(`#admin_finance_invoices_export_progress_bar_${s}`).hide();const i=`<a href="${o.href.download_link}">${t("common","Download {filename}",{filename:o.href.filename})}</a>`;$(`#admin_finance_invoices_export_progress_div_${s}`).html(i),""!==n&&$(n).prop("disabled",!1)}}))},complete(){0!==e.invoicesIdsToCheck.length?e.startGetInvoicesExportProgress():e.stopGetInvoicesExportProgress()}})}),1500))},e.startGetInvoicesExportProgress=function(){e.showCoursorLoadWhenAjaxCall=!1,e.keepGoingGettingInvoicesExportProgress=!0,e.getInvoicesExportProgress()},e.stopGetInvoicesExportProgress=function(){e.showCoursorLoadWhenAjaxCall=!0,e.keepGoingGettingInvoicesExportProgress=!1,e.invoicesIdsToCheck=[]},e.open_dialog_for_export_invoice=function(t){let n=new splynx_dialog(`/admin/${t}`,{dialog:{modal:!0},customClose(){e.stopGetInvoicesExportProgress()}}).open();registerDialog(n)}})(window),(e=>{e.keepGoingGettingInvoicesChargeProgress=!1,e.invoicesForChargeIdsToCheck=[],e.getInvoicesChargeProgress=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"invoice",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;0===e.invoicesForChargeIdsToCheck.length&&e.stopGetInvoicesChargeProgress(),e.keepGoingGettingInvoicesChargeProgress&&setTimeout((()=>{$.ajax({url:`/admin/finance/invoices--charge-history-progress?type=${n}`,type:"POST",data:{ids:e.invoicesForChargeIdsToCheck},dataType:"json",success(n){$.each(n,((n,i)=>{let{id:o}=i,{progress:s}=i;"process"===i.status?$(`#${t}_bar_${o}`).html(`${s}%`).width(`${s}%`):($(`#${t}_bar_${o}`).html("100%").width("100%"),setTimeout((()=>{e.invoicesForChargeIdsToCheck=$.grep(e.invoicesForChargeIdsToCheck,(e=>e!==o)),$(`#${t}_bar_${o}`).hide(),$(`#${t}_div_${o}`).html(i.href)}),600))}))},complete(){0!==e.invoicesForChargeIdsToCheck.length?e.startGetInvoicesChargeProgress(t,n,i):(e.stopGetInvoicesChargeProgress(),"function"==typeof i&&i())}})}),1500)},e.startGetInvoicesChargeProgress=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"admin_finance_invoices_charge_progress",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"invoice",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.showCoursorLoadWhenAjaxCall=!1,e.keepGoingGettingInvoicesChargeProgress=!0,e.getInvoicesChargeProgress(t,n,i)},e.stopGetInvoicesChargeProgress=function(){e.showCoursorLoadWhenAjaxCall=!0,e.keepGoingGettingInvoicesChargeProgress=!1,e.invoicesForChargeIdsToCheck=[]},e.open_dialog_for_charge_invoice=function(t){let n=new splynx_dialog(`/admin/${t}`,{dialog:{modal:!0},customClose(){e.stopGetInvoicesChargeProgress()}}).open();registerDialog(n)}})(window)},69493:function(e,t,n){var i,o,s;n(43838),n(83646),n(89752),n(43729),n(94952),n(36407),n(49500),n(22198),o=[t,e],void 0===(s="function"==typeof(i=function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),l="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(l)&&(l=0),r()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t,o()}function i(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function o(){var t=e.style.height,n=i(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var s=e.scrollHeight+l;return 0===e.scrollHeight?void(e.style.height=t):(e.style.height=s+"px",c=e.clientWidth,n.forEach((function(e){e.node.scrollTop=e.scrollTop})),void(o&&(document.documentElement.scrollTop=o)))}function r(){o();var t=window.getComputedStyle(e,null),i=Math.round(parseFloat(t.height));if(i!==Math.round(parseFloat(e.style.height))?"visible"!==t.overflowY&&n("visible"):"hidden"!==t.overflowY&&n("hidden"),d!==i){d=i;var s=a("autosize:resized");e.dispatchEvent(s)}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var l=null,c=e.clientWidth,d=null,u=function(){e.clientWidth!==c&&r()},p=function(t){window.removeEventListener("resize",u,!1),e.removeEventListener("input",r,!1),e.removeEventListener("keyup",r,!1),e.removeEventListener("autosize:destroy",p,!1),e.removeEventListener("autosize:update",r,!1),s.delete(e),Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",p,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",r,!1),window.addEventListener("resize",u,!1),e.addEventListener("input",r,!1),e.addEventListener("autosize:update",r,!1),s.add(e),e.style.overflowX="hidden",e.style.wordWrap="break-word",t()}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=a("autosize:destroy");e.dispatchEvent(t)}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=a("autosize:update");e.dispatchEvent(t)}}var s="function"==typeof Set?new Set:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},delete:function(t){e.splice(e.indexOf(t),1)}}}(),a=function(e){return new Event(e)};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var r=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(r=function(e){return e},r.destroy=function(e){return e},r.update=function(e){return e}):(r=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return n(e,t)})),e},r.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},r.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.exports=r})?i.apply(t,o):i)||(e.exports=s)},21365:e=>{!function(){"use strict";e.exports=function(e){var t=function(t,n){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,n&&e.extend(this.colors,n),t&&(void 0!==t.toLowerCase?(t+="",this.setColor(t)):void 0!==t.h&&(this.value=t))};t.prototype={constructor:t,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:void 0!==e.toLowerCase?parseFloat(e):1},isTransparent:function(e){return!!e&&("transparent"===(e=e.toLowerCase().trim())||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(e){return 0===e.r&&0===e.g&&0===e.b&&0===e.a},setColor:function(e){(e=e.toLowerCase().trim())&&(this.isTransparent(e)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(e)||{h:0,s:0,b:0,a:1})},stringToHSB:function(t){var n;t=t.toLowerCase(),void 0!==this.colors[t]&&(t=this.colors[t],n="alias");var i=this,o=!1;return e.each(this.stringParsers,(function(e,s){var a=s.re.exec(t),r=a&&s.parse.apply(i,[a]),l=n||s.format||"rgba";return!r||(o=l.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,r)):i.RGBtoHSB.apply(i,r),i.origFormat=l,!1)})),o},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,i){var o,s,a,r,l;return e||(e=this.value.h,t=this.value.s,n=this.value.b),e=(e*=360)%360/60,o=s=a=n-(l=n*t),o+=[l,r=l*(1-Math.abs(e%2-1)),0,0,r,l][e=~~e],s+=[r,l,l,r,0,0][e],a+=[0,0,r,l,l,r][e],{r:Math.round(255*o),g:Math.round(255*s),b:Math.round(255*a),a:i||this.value.a}},toHex:function(e,t,n,i){var o=this.toRGB(e,t,n,i);return this.rgbaIsTransparent(o)?"transparent":"#"+(1<<24|parseInt(o.r)<<16|parseInt(o.g)<<8|parseInt(o.b)).toString(16).substr(1)},toHSL:function(e,t,n,i){e=e||this.value.h,t=t||this.value.s,n=n||this.value.b,i=i||this.value.a;var o=e,s=(2-t)*n,a=t*n;return a/=s>0&&1>=s?s:2-s,s/=2,a>1&&(a=1),{h:isNaN(o)?0:o,s:isNaN(a)?0:a,l:isNaN(s)?0:s,a:isNaN(i)?0:i}},toAlias:function(e,t,n,i){var o=this.toHex(e,t,n,i);for(var s in this.colors)if(this.colors[s]===o)return s;return!1},RGBtoHSB:function(e,t,n,i){var o,s,a,r;return e/=255,t/=255,n/=255,o=((o=0===(r=(a=Math.max(e,t,n))-Math.min(e,t,n))?null:a===e?(t-n)/r:a===t?(n-e)/r+2:(e-t)/r+4)+360)%6*60/360,s=0===r?0:r/a,{h:this._sanitizeNumber(o),s,b:a,a:this._sanitizeNumber(i)}},HueToRGB:function(e,t,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,i){var o;0>t&&(t=0);var s=2*n-(o=.5>=n?n*(1+t):n+t-n*t),a=e+1/3,r=e,l=e-1/3;return[Math.round(255*this.HueToRGB(s,o,a)),Math.round(255*this.HueToRGB(s,o,r)),Math.round(255*this.HueToRGB(s,o,l)),this._sanitizeNumber(i)]},toString:function(e){var t=!1;switch(e=e||"rgba"){case"rgb":return t=this.toRGB(),this.rgbaIsTransparent(t)?"transparent":"rgb("+t.r+","+t.g+","+t.b+")";case"rgba":return"rgba("+(t=this.toRGB()).r+","+t.g+","+t.b+","+t.a+")";case"hsl":return t=this.toHSL(),"hsl("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%)";case"hsla":return t=this.toHSL(),"hsla("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%,"+t.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return t}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){return void 0!==this.colors[e.toLowerCase()]&&this.colors[e.toLowerCase()]}};var n={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},i=function(i,o){if(this.element=e(i).addClass("colorpicker-element"),this.options=e.extend(!0,{},n,this.element.data(),o),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&e(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new t(!1!==this.options.color?this.options.color:this.getValue(),this.options.colorSelectors),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,this.picker=e(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format||!1===this.options.format)&&this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.options.colorSelectors){var s=this;e.each(this.options.colorSelectors,(function(t,n){var i=e("<i />").css("background-color",n).data("class",t);i.click((function(){s.setValue(e(this).css("background-color"))})),s.picker.find(".colorpicker-selectors").append(i)})),this.picker.find(".colorpicker-selectors").show()}this.picker.on("mousedown.colorpicker touchstart.colorpicker",e.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:e("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":e.proxy(this.change,this)}),!1===this.component&&this.element.on({"focus.colorpicker":e.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":e.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":e.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":e.proxy(this.show,this),"focus.colorpicker":e.proxy(this.show,this)}),this.update(),e(e.proxy((function(){this.element.trigger("create")}),this))};i.Color=t,i.prototype={constructor:i,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var e=this.container&&this.container[0]!==document.body?"position":"offset",t=this.component||this.element,n=t[e]();"right"===this.options.align&&(n.left-=this.picker.outerWidth()-t.outerWidth()),this.picker.css({top:n.top+t.outerHeight(),left:n.left})},show:function(t){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),e(window).on("resize.colorpicker",e.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!1===this.options.inline&&e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),e(window).off("resize.colorpicker",this.reposition),e(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(this.format),this.element.data("color",e),e},updateInput:function(e){if(e=e||this.color.toString(this.format),!1!==this.input){if(this.options.colorSelectors){var n=new t(e,this.options.colorSelectors).toAlias();void 0!==this.options.colorSelectors[n]&&(e=n)}this.input.prop("value",e)}return e},updatePicker:function(e){void 0!==e&&(this.color=new t(e,this.options.colorSelectors));var n=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,i=this.picker.find("i");return 0!==i.length?(!1===this.options.horizontal?(n=this.options.sliders,i.eq(1).css("top",n.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",n.alpha.maxTop*(1-this.color.value.a))):(n=this.options.slidersHorz,i.eq(1).css("left",n.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",n.alpha.maxLeft*(1-this.color.value.a))),i.eq(0).css({top:n.saturation.maxTop-this.color.value.b*n.saturation.maxTop,left:this.color.value.s*n.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),e):void 0},updateComponent:function(e){if(e=e||this.color.toString(this.format),!1!==this.component){var t=this.component.find("i").eq(0);t.length>0?t.css({backgroundColor:e}):this.component.css({backgroundColor:e})}return e},update:function(e){var t;return(!1!==this.getValue(!1)||!0===e)&&(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(e){this.color=new t(e,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:e})},getValue:function(e){var t;return e=void 0===e?"#000000":e,(void 0===(t=this.hasInput()?this.input.val():this.element.data("color"))||""===t||null===t)&&(t=e),t},hasInput:function(){return!1!==this.input},isDisabled:function(){return!!this.hasInput()&&!0===this.input.prop("disabled")},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("div"),i=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!n.is(".colorpicker")){if(n.is(".colorpicker-saturation"))this.currentSlider=e.extend({},i.saturation);else if(n.is(".colorpicker-hue"))this.currentSlider=e.extend({},i.hue);else{if(!n.is(".colorpicker-alpha"))return!1;this.currentSlider=e.extend({},i.alpha)}var o=n.offset();this.currentSlider.guide=n.find("i")[0].style,this.currentSlider.left=t.pageX-o.left,this.currentSlider.top=t.pageY-o.top,this.mousePointer={left:t.pageX,top:t.pageY},e(document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"touchmove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this),"touchend.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),n=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=n+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,n/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&!1===this.options.format&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(e){this.keyup(e)},keyup:function(e){38===e.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===e.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new t(this.input.val(),this.options.colorSelectors),this.color.origFormat&&!1===this.options.format&&(this.format=this.color.origFormat),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},e.colorpicker=i,e.fn.colorpicker=function(t){var n,o=arguments,s=this.each((function(){var s=e(this),a=s.data("colorpicker"),r="object"==typeof t?t:{};a||"string"==typeof t?"string"==typeof t&&(n=a[t].apply(a,Array.prototype.slice.call(o,1))):s.data("colorpicker",new i(this,r))}));return"getValue"===t?n:s},e.fn.colorpicker.constructor=i}(window.jQuery)}()},30635:(e,t,n)=>{n(43838),n(39028),function(e){"use strict";function t(t,n){this.isInit=!0,this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n),this.isInit=!1}function n(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}function i(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}function o(e){return e?r.text(e).html():""}function s(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}var a={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},itemTitle:function(e){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};t.prototype={constructor:t,add:function(t,n,i){var s=this;if(!(s.options.maxTags&&s.itemsArray.length>=s.options.maxTags)&&(!1===t||t)){if("string"==typeof t&&s.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!s.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(s.isSelect&&!s.multiple&&s.itemsArray.length>0&&s.remove(s.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var a=s.options.delimiterRegex?s.options.delimiterRegex:s.options.delimiter,r=t.split(a);if(r.length>1){for(var l=0;l<r.length;l++)this.add(r[l],!0);return void(n||s.pushVal())}}var c=s.options.itemValue(t),d=s.options.itemText(t),u=s.options.tagClass(t),p=s.options.itemTitle(t),h=e.grep(s.itemsArray,(function(e){return s.options.itemValue(e)===c}))[0];if(!h||s.options.allowDuplicates){if(!(s.items().toString().length+t.length+1>s.options.maxInputLength)){var f=e.Event("beforeItemAdd",{item:t,cancel:!1,options:i});if(s.$element.trigger(f),!f.cancel){s.itemsArray.push(t);var m=e('<span class="tag '+o(u)+(null!==p?'" title="'+p:"")+'">'+o(d)+'<span data-role="remove"></span></span>');m.data("item",t),s.findInputWrapper().before(m),m.after(" ");var g=e('option[value="'+encodeURIComponent(c)+'"]',s.$element).length||e('option[value="'+o(c)+'"]',s.$element).length;if(s.isSelect&&!g){var v=e("<option selected>"+o(d)+"</option>");v.data("item",t),v.attr("value",c),s.$element.append(v)}n||s.pushVal(),(s.options.maxTags===s.itemsArray.length||s.items().toString().length===s.options.maxInputLength)&&s.$container.addClass("bootstrap-tagsinput-max"),e(".typeahead, .twitter-typeahead",s.$container).length&&s.$input.typeahead("val",""),this.isInit?s.$element.trigger(e.Event("itemAddedOnInit",{item:t,options:i})):s.$element.trigger(e.Event("itemAdded",{item:t,options:i}))}}}else if(s.options.onTagExists){var b=e(".tag",s.$container).filter((function(){return e(this).data("item")===h}));s.options.onTagExists(t,b)}}}},remove:function(t,n,i){var o=this;if(o.objectItems&&(t=(t="object"==typeof t?e.grep(o.itemsArray,(function(e){return o.options.itemValue(e)==o.options.itemValue(t)})):e.grep(o.itemsArray,(function(e){return o.options.itemValue(e)==t})))[t.length-1]),t){var s=e.Event("beforeItemRemove",{item:t,cancel:!1,options:i});if(o.$element.trigger(s),s.cancel)return;e(".tag",o.$container).filter((function(){return e(this).data("item")===t})).remove(),e("option",o.$element).filter((function(){return e(this).data("item")===t})).remove(),-1!==e.inArray(t,o.itemsArray)&&o.itemsArray.splice(e.inArray(t,o.itemsArray),1)}n||o.pushVal(),o.options.maxTags>o.itemsArray.length&&o.$container.removeClass("bootstrap-tagsinput-max"),o.$element.trigger(e.Event("itemRemoved",{item:t,options:i}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each((function(){var n=e(this),i=n.data("item"),s=t.options.itemValue(i),a=t.options.itemText(i),r=t.options.tagClass(i);(n.attr("class",null),n.addClass("tag "+o(r)),n.contents().filter((function(){return 3==this.nodeType}))[0].nodeValue=o(a),t.isSelect)&&e("option",t.$element).filter((function(){return e(this).data("item")===i})).attr("value",s)}))},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),(function(e){return t.options.itemValue(e).toString()}));t.$element.val(n,!0).trigger("change")},build:function(t){var o=this;if(o.options=e.extend({},a,t),o.objectItems&&(o.options.freeInput=!1),n(o.options,"itemValue"),n(o.options,"itemText"),i(o.options,"tagClass"),o.options.typeahead){var r=o.options.typeahead||{};i(r,"source"),o.$input.typeahead(e.extend({},r,{source:function(t,n){function i(e){for(var t=[],i=0;i<e.length;i++){var a=o.options.itemText(e[i]);s[a]=e[i],t.push(a)}n(t)}this.map={};var s=this.map,a=r.source(t);e.isFunction(a.success)?a.success(i):e.isFunction(a.then)?a.then(i):e.when(a).then(i)},updater:function(e){return o.add(this.map[e]),this.map[e]},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(o.options.typeaheadjs){var l=null,c={},d=o.options.typeaheadjs;e.isArray(d)?(l=d[0],c=d[1]):c=d,o.$input.typeahead(l,c).on("typeahead:selected",e.proxy((function(e,t){c.valueKey?o.add(t[c.valueKey]):o.add(t),o.$input.typeahead("val","")}),o))}o.$container.on("click",e.proxy((function(e){o.$element.attr("disabled")||o.$input.removeAttr("disabled"),o.$input.focus()}),o)),o.options.addOnBlur&&o.options.freeInput&&o.$input.on("focusout",e.proxy((function(t){0===e(".typeahead, .twitter-typeahead",o.$container).length&&(o.add(o.$input.val()),o.$input.val(""))}),o)),o.$container.on("keydown","input",e.proxy((function(t){var n=e(t.target),i=o.findInputWrapper();if(o.$element.attr("disabled"))o.$input.attr("disabled","disabled");else{switch(t.which){case 8:if(0===s(n[0])){var a=i.prev();a.length&&o.remove(a.data("item"))}break;case 46:if(0===s(n[0])){var r=i.next();r.length&&o.remove(r.data("item"))}break;case 37:var l=i.prev();0===n.val().length&&l[0]&&(l.before(i),n.focus());break;case 39:var c=i.next();0===n.val().length&&c[0]&&(c.after(i),n.focus())}var d=n.val().length;Math.ceil(d/5),n.attr("size",Math.max(this.inputSize,n.val().length))}}),o)),o.$container.on("keypress","input",e.proxy((function(t){var n=e(t.target);if(o.$element.attr("disabled"))o.$input.attr("disabled","disabled");else{var i=n.val(),s=o.options.maxChars&&i.length>=o.options.maxChars;o.options.freeInput&&(function(t,n){var i=!1;return e.each(n,(function(e,n){if("number"==typeof n&&t.which===n)return i=!0,!1;if(t.which===n.which){var o=!n.hasOwnProperty("altKey")||t.altKey===n.altKey,s=!n.hasOwnProperty("shiftKey")||t.shiftKey===n.shiftKey,a=!n.hasOwnProperty("ctrlKey")||t.ctrlKey===n.ctrlKey;if(o&&s&&a)return i=!0,!1}})),i}(t,o.options.confirmKeys)||s)&&(0!==i.length&&(o.add(s?i.substr(0,o.options.maxChars):i),n.val("")),!1===o.options.cancelConfirmKeysOnEmpty&&t.preventDefault());var a=n.val().length;Math.ceil(a/5),n.attr("size",Math.max(this.inputSize,n.val().length))}}),o)),o.$container.on("click","[data-role=remove]",e.proxy((function(t){o.$element.attr("disabled")||o.remove(e(t.target).closest(".tag").data("item"))}),o)),o.options.itemValue===a.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):e("option",o.$element).each((function(){o.add(e(this).attr("value"),!0)})))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],n=this.$container[0];t&&t.parentNode!==n;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(n,i,o){var s=[];return this.each((function(){var a=e(this).data("tagsinput");if(a)if(n||i){if(void 0!==a[n]){if(3===a[n].length&&void 0!==o)var r=a[n](i,null,o);else r=a[n](i);void 0!==r&&s.push(r)}}else s.push(a);else a=new t(this,n),e(this).data("tagsinput",a),s.push(a),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())})),"string"==typeof n?s.length>1?s:s[0]:s},e.fn.tagsinput.Constructor=t;var r=e("<div />");e((function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()}))}(window.jQuery)},32339:function(e,t,n){n(43838),e.exports=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(e),o=n(t),s=i.default.helpers,a=function(){if("undefined"!=typeof window)return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e)}}(),r={resolveOption(e,t){var n=e.options.realtime,i=e.chart.options.plugins.streaming;return s.valueOrDefault(n[t],i[t])},startFrameRefreshTimer:function(e,t){if(!e.frameRequestID){var n=function(){t(),e.frameRequestID=s.requestAnimFrame.call(window,n)};e.frameRequestID=s.requestAnimFrame.call(window,n)}},stopFrameRefreshTimer:function(e){var t=e.frameRequestID;t&&(a.call(window,t),delete e.frameRequestID)}};function l(e,t,n){return null!=(i=t)&&("number"==typeof i?isFinite(i):i)?{value:e.getPixelForValue(t),transitionable:!0}:{value:n};var i}function c(){var e=i.default.Annotation.types.box,t=i.default.Annotation.types.line,n=e.prototype.configure,o=t.prototype.configure;e.prototype.configure=function(){var e,t,i,o,s,a,r,c,d,u,p,h,f;return s=(e=this).chartInstance,a=e.options,r=s.scales,c=s.chartArea,d=a.xScaleID,u=a.yScaleID,p=r[d],h=r[u],f=e._streaming={},p&&(t=l(p,a.xMin,c.left),i=l(p,a.xMax,c.right),o=t.value>i.value,t.transitionable&&(f[o?"right":"left"]={axisId:d}),i.transitionable&&(f[o?"left":"right"]={axisId:d})),h&&(t=l(h,a.yMin,c.top),i=l(h,a.yMax,c.bottom),o=t.value>i.value,t.transitionable&&(f[o?"bottom":"top"]={axisId:u}),i.transitionable&&(f[o?"top":"bottom"]={axisId:u})),n.call(this)},t.prototype.configure=function(){return function(e){var t=e.chartInstance,n=e.options,i=n.scaleID,o=n.value,s=t.scales[i],a=e._streaming={};if(s){var r=s.isHorizontal();l(s,o).transitionable&&(a[r?"x1":"y1"]={axisId:i},a[r?"x2":"y2"]={axisId:i},a[r?"labelX":"labelY"]={axisId:i})}}(this),o.call(this)}}var d={attachChart(e){var t=e.streaming;t.annotationPlugin||(c(),t.annotationPlugin=!0)},getElements(e){var t=e.annotation;if(t){var n=t.elements;return Object.keys(n).map((function(e){return n[e]}))}return[]},detachChart(e){delete e.streaming.annotationPlugin}},u=i.default.helpers,p=i.default.Zoom=i.default.Zoom||{};function h(e,t){if(e.scaleAxes&&e.rangeMax&&!u.isNullOrUndef(e.rangeMax[e.scaleAxes])){var n=e.rangeMax[e.scaleAxes];t>n&&(t=n)}return t}function f(e,t){if(e.scaleAxes&&e.rangeMin&&!u.isNullOrUndef(e.rangeMin[e.scaleAxes])){var n=e.rangeMin[e.scaleAxes];t<n&&(t=n)}return t}function m(e,t,n,i){var o,s,a=e.options.realtime,l=r.resolveOption(e,"duration"),c=r.resolveOption(e,"delay"),d=l*(2-t);o=e.isHorizontal()?(e.right-n.x)/(e.right-e.left):(e.bottom-n.y)/(e.bottom-e.top),s=t<1?h(i,d):f(i,d),a.duration=s,a.delay=c+o*(l-s)}function g(e,t,n){var i=e.options.realtime,o=r.resolveOption(e,"delay")+(e.getValueForPixel(t)-e.getValueForPixel(0));i.delay=t>0?h(n,o):f(n,o)}p.zoomFunctions=p.zoomFunctions||{},p.panFunctions=p.panFunctions||{};var v={attachChart(e){var t=e.streaming;t.zoomPlugin||(p.zoomFunctions.realtime=m,p.panFunctions.realtime=g,t.resetZoom=e.resetZoom,function(e){var t=e.$zoom||{_originalOptions:{}},n=e.resetZoom,i=e.update,o=function(){u.each(e.scales,(function(e){var n=e.options.realtime,i=t._originalOptions[e.id]||e.originalOptions;n&&(i?(n.duration=i.realtime.duration,n.delay=i.realtime.delay):(delete n.duration,delete n.delay))})),i.call(e,{duration:0})};e.resetZoom=function(){e.update=o,n(),e.update=i}}(e),t.zoomPlugin=!0)},detachChart(e){var t=e.streaming;t.zoomPlugin&&(e.resetZoom=t.resetZoom,delete t.resetZoom,delete t.zoomPlugin)}},b=i.default.helpers,y=b.canvas,w=i.default.scaleService,_=w.getScaleConstructor("time");w.getScaleConstructor=function(e){return"time"===e&&(e="realtime"),this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0};var T=Number.MAX_SAFE_INTEGER||9007199254740991,E={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},S=Object.keys(E),A={parse:function(e,t){return"string"==typeof e&&"string"==typeof t?e=o.default(e,t):e instanceof o.default||(e=o.default(e)),e.isValid()?e.valueOf():null},add:function(e,t,n){return o.default(e).add(t,n).valueOf()},startOf:function(e,t,n){return e=o.default(e),"isoWeek"===t?e.isoWeekday(n).valueOf():e.startOf(t).valueOf()}};function C(e,t){if(b.isNullOrUndef(t))return null;var n=e.options.time,i=function(e,t){var n=e._adapter||A,i=e.options.time,o=i.parser,s=o||i.format,a=t;return"function"==typeof o&&(a=o(a)),("number"==typeof a||a instanceof Number)&&isFinite(a)||(a="string"==typeof s?n.parse(a,s):n.parse(a)),null!==a?+a:(o||"function"!=typeof s||("number"==typeof(a=s(t))||a instanceof Number)&&isFinite(a)||(a=n.parse(a)),a)}(e,e.getRightValue(t));return null===i||n.round&&(i=+(e._adapter||A).startOf(i,n.round)),i}function k(e,t,n,i){var o,s=e._adapter||A,a=e.options,r=a.time,l=r.unit||function(e,t,n,i){var o,s,a,r=S.length;for(o=S.indexOf(e);o<r-1;++o)if(a=(s=E[S[o]]).steps?s.steps[s.steps.length-1]:T,s.common&&Math.ceil((n-t)/(a*s.size))<=i)return S[o];return S[r-1]}(r.minUnit,t,n,i),c=function(e){for(var t=S.indexOf(e)+1,n=S.length;t<n;++t)if(E[S[t]].common)return S[t]}(l),d=b.valueOrDefault(r.stepSize,r.unitStepSize),u="week"===l&&r.isoWeekday,p=a.ticks.major.enabled,h=E[l],f=t,m=n,g=[];for(d||(d=function(e,t,n,i){var o,s,a,r=t-e,l=E[n],c=l.size,d=l.steps;if(!d)return Math.ceil(r/(i*c));for(o=0,s=d.length;o<s&&(a=d[o],!(Math.ceil(r/(c*a))<=i));++o);return a}(t,n,l,i)),u&&(f=+s.startOf(f,"isoWeek",u),m=+s.startOf(m,"isoWeek",u)),f=+s.startOf(f,u?"day":l),(m=+s.startOf(m,u?"day":l))<n&&(m=+s.add(m,1,l)),o=f,p&&c&&!u&&!r.round&&(o=+s.startOf(o,c),o=+s.add(o,~~((f-o)/(h.size*d))*d,l));o<m;o=+s.add(o,d,l))g.push(+o);return g.push(+o),g}var x=["pointBackgroundColor","pointBorderColor","pointBorderWidth","pointRadius","pointRotation","pointStyle","pointHitRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointHoverRadius","backgroundColor","borderColor","borderSkipped","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","radius","rotation"];function $(e){var t=e.realtime,n=t.refreshTimerID;n&&(clearInterval(n),delete t.refreshTimerID,delete t.refreshInterval)}function I(e){var t=e.realtime,n=r.resolveOption(e,"refresh");t.refreshTimerID=setInterval((function(){var n=r.resolveOption(e,"refresh");!function(e){var t,n,i,o,s,a,l,c=e.chart,d=e.id,u=r.resolveOption(e,"duration"),p=r.resolveOption(e,"delay"),h=r.resolveOption(e,"ttl"),f=r.resolveOption(e,"pause"),m=r.resolveOption(e,"onRefresh"),g=e.max,v=Date.now()-(isNaN(h)?u+p:h);m&&m(c),b.each(c.data.datasets,(function(r,u){if(t=c.getDatasetMeta(u),d===t.xAxisID||d===t.yAxisID){if(n=r.data,i=n.length,f){for(o=0;o<i&&e._getTimeForIndex(o,u)<g;++o);s=o+2}else s=0;for(o=s;o<i&&e._getTimeForIndex(o,u)<=v;++o);a=o-s,isNaN(h)&&(a=Math.max(a-2,0)),n.splice(s,a),b.each(x,(function(e){b.isArray(r[e])&&r[e].splice(s,a)})),b.each(r.datalabels,(function(e){b.isArray(e)&&e.splice(s,a)})),"object"!=typeof n[0]&&(l={start:s,count:a})}})),l&&c.data.labels.splice(l.start,l.count),c.update({preservation:!0})}(e),t.refreshInterval===n||isNaN(n)||($(e),I(e))}),n),t.refreshInterval=n}function O(e,t,n){var i=e._start||{},o=e._view||{},s=e._model||{};b.each(e._streaming,((e,a)=>{e.axisId===t&&(i.hasOwnProperty(a)&&(i[a]-=n),o.hasOwnProperty(a)&&o!==i&&(o[a]-=n),s.hasOwnProperty(a)&&s!==o&&(s[a]-=n))}))}function L(e){var t,n,i=e.chart,o=e.realtime,s=e.id,a=r.resolveOption(e,"duration"),l=r.resolveOption(e,"delay"),c=e.isHorizontal(),u=c?e.width:e.height,p=Date.now(),h=e.options.ticks.reverse||!(c||"_reversePixels"in e),f=i.tooltip,m=d.getElements(i),g=u*(p-o.head)/a;for(c===h&&(g=-g),b.each(i.data.datasets,(function(e,o){var a=i.getDatasetMeta(o),r=a.data||[],l=a.dataset;for(t=0,n=r.length;t<n;++t)O(r[t],s,g);l&&O(l,s,g)})),t=0,n=m.length;t<n;++t)O(m[t],s,g);O(f,s,g),e.max=e._table[1].time=p-l,e.min=e._table[0].time=e.max-a,o.head=p}var R=_.extend({initialize:function(){var e=this;_.prototype.initialize.apply(e,arguments),("time"!==e.options.type||e.chart.options.plugins.streaming)&&(e.realtime=e.realtime||{},I(e))},update:function(){var e,t=this,n=t.realtime,i=t.options,o=i.bounds,s=i.distribution,a=i.offset,l=i.ticks,c=l.autoSkip,d=l.source,u=l.min,p=l.max,h=l.major,f=h.enabled;return"time"!==i.type||t.chart.options.plugins.streaming?(r.resolveOption(t,"pause")?r.stopFrameRefreshTimer(n):(r.startFrameRefreshTimer(n,(function(){L(t)})),n.head=Date.now()),i.bounds=void 0,i.distribution="linear",i.offset=!1,l.autoSkip=!1,l.source="auto"===d?"":d,l.min=-1e15,l.max=1e15,h.enabled=!0,e=_.prototype.update.apply(t,arguments),i.bounds=o,i.distribution=s,i.offset=a,l.autoSkip=c,l.source=d,l.min=u,l.max=p,h.enabled=f,e):_.prototype.update.apply(t,arguments)},buildTicks:function(){var e=this,t=e.options;if("time"===t.type&&!e.chart.options.plugins.streaming)return _.prototype.buildTicks.apply(e,arguments);var n,i=r.resolveOption(e,"duration"),o=r.resolveOption(e,"delay"),s=r.resolveOption(e,"refresh"),a=t.ticks,l=a.source,c=e._timestamps.data,d=e.realtime.head-o,u=d-i,p=[d+s,d];return""===l&&(a.source="data",e._timestamps.data=k(e,u,d+s,e.getLabelCapacity(u))),Object.defineProperty(e,"min",{get:function(){return u},set:b.noop}),Object.defineProperty(e,"max",{get:function(){return p.shift()},set:b.noop}),n=_.prototype.buildTicks.apply(e,arguments),delete e.min,delete e.max,e.min=u,e.max=d,""===l&&(a.source=l,e._timestamps.data=c),e._table=[{time:u,pos:0},{time:d,pos:1}],n},calculateTickRotation:function(){var e=this,t=e.options,n=t.ticks,i=n.maxRotation;"time"!==t.type||e.chart.options.plugins.streaming?(n.maxRotation=n.minRotation||0,_.prototype.calculateTickRotation.apply(e,arguments),n.maxRotation=i):_.prototype.calculateTickRotation.apply(e,arguments)},fit:function(){var e=this,t=e.options;_.prototype.fit.apply(e,arguments),("time"!==t.type||e.chart.options.plugins.streaming)&&t.ticks.display&&t.display&&e.isHorizontal()&&(e.paddingLeft=3,e.paddingRight=3,e.handleMargins())},draw:function(e){var t=this,n=t.chart;if("time"!==t.options.type||n.options.plugins.streaming){var i=t.ctx,o=t.isHorizontal()?{left:e.left,top:0,right:e.right,bottom:n.height}:{left:0,top:e.top,right:n.width,bottom:e.bottom};t._gridLineItems=null,t._labelItems=null,y.clipArea(i,o),_.prototype.draw.apply(t,arguments),y.unclipArea(i)}else _.prototype.draw.apply(t,arguments)},destroy:function(){var e=this;("time"!==e.options.type||e.chart.options.plugins.streaming)&&(r.stopFrameRefreshTimer(e.realtime),$(e))},_getTimeForIndex:function(e,t){var n,i=this,o=i._timestamps,s=o.datasets[t][e];return b.isNullOrUndef(s)&&(n=i.chart.data.datasets[t].data[e],s=b.isObject(n)?C(i,n):C(i,o.labels[e])),s}});w.registerScaleType("realtime",R,{position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},realtime:{},ticks:{autoSkip:!1,source:"auto",major:{enabled:!0}}});var N=i.default.helpers,D=N.canvas;function M(e,t,n){var i={};return N.each(t.x,(function(e){i[e]={axisId:n.xAxisID}})),N.each(t.y,(function(e){i[e]={axisId:n.yAxisID}})),i}i.default.defaults.global.plugins.streaming={duration:1e4,delay:0,frameRate:30,refresh:1e3,onRefresh:null,pause:!1,ttl:void 0},i.default.defaults.global.legend.onClick=function(e,t){var n=t.datasetIndex,i=this.chart,o=i.getDatasetMeta(n);o.hidden=null===o.hidden?!i.data.datasets[n].hidden:null,i.update({duration:0})};var P={x:["x","controlPointPreviousX","controlPointNextX","caretX"],y:["y","controlPointPreviousY","controlPointNextY","caretY"]};function F(e){var t,n,o,s,a,r,l=this,c=e&&e.preservation;c&&(t=l.tooltip,n=l.lastActive,o=t._lastActive,l._bufferedRender=!0,(a=l.legend)&&(r=a.update,a.update=N.noop)),i.default.prototype.update.apply(l,arguments),c&&(l._bufferedRender=!1,l._bufferedRequest=null,l.lastActive=n,t._lastActive=o,a&&(a.update=r),l.animating?i.default.animationService.animations.forEach((function(e){e.chart===l&&l.render({duration:16.66*(e.numSteps-e.currentStep)})})):l.data.datasets.forEach((function(e,t){l.getDatasetMeta(t).controller.transition(1)})),t._active&&t.update(!0),(s=l.streaming.lastMouseEvent)&&l.eventHandler(s))}function B(){var e,t=this,n=t._active&&t._active[0];return n?(e=t._chart.getDatasetMeta(n._datasetIndex),t._streaming=M(0,P,e)):t._streaming={},i.default.Tooltip.prototype.update.apply(t,arguments)}var H={id:"streaming",beforeInit:function(e){var t=e.streaming=e.streaming||{},n=t.canvas=e.canvas,i=t.mouseEventListener=function(n){var i=N.getRelativePosition(n,e);t.lastMouseEvent={type:"mousemove",chart:e,native:n,x:i.x,y:i.y}};n.addEventListener("mousedown",i),n.addEventListener("mouseup",i)},afterInit:function(e){e.update=F,e.tooltip.update=B},beforeUpdate:function(e){var t=e.options,n=t.scales;return n&&N.each(n.xAxes.concat(n.yAxes),(function(e){"realtime"!==e.type&&"time"!==e.type||(t.elements.line.capBezierPoints=!1)})),e.annotation?d.attachChart(e):d.detachChart(e),e.resetZoom?v.attachChart(e):v.detachChart(e),!0},afterUpdate:function(e){var t=e.streaming,n=!0;!function(e){N.each(e.data.datasets,(function(t,n){var i,o,s=e.getDatasetMeta(n),a=s.data||[],r=s.dataset;for(i=0,o=a.length;i<o;++i)a[i]._streaming=M(a[i],P,s);r&&(r._streaming=M(0,P,s))}))}(e),N.each(e.scales,(function(e){e instanceof R&&(n&=r.resolveOption(e,"pause"))})),n?r.stopFrameRefreshTimer(t):r.startFrameRefreshTimer(t,(function(){!function(e){var t=e.streaming,n=e.options.plugins.streaming.frameRate,i=1e3/(Math.max(n,0)||30),o=t.lastDrawn+i||0,s=Date.now(),a=t.lastMouseEvent;o<=s&&(e.animating||e.tooltip._start||e.draw(),a&&e.eventHandler(a),t.lastDrawn=o+i>s?o:s)}(e)}))},beforeDatasetDraw:function(e,t){var n=t.meta,i=e.chartArea,o={left:0,top:0,right:e.width,bottom:e.height};return n.xAxisID&&n.controller.getScaleForId(n.xAxisID)instanceof R&&(o.left=i.left,o.right=i.right),n.yAxisID&&n.controller.getScaleForId(n.yAxisID)instanceof R&&(o.top=i.top,o.bottom=i.bottom),D.clipArea(e.ctx,o),!0},afterDatasetDraw:function(e){D.unclipArea(e.ctx)},beforeEvent:function(e,t){var n=e.streaming;return"mousemove"===t.type?n.lastMouseEvent=t:"mouseout"===t.type&&delete n.lastMouseEvent,!0},destroy:function(e){var t=e.streaming,n=t.canvas,i=t.mouseEventListener;r.stopFrameRefreshTimer(t),delete e.update,delete e.tooltip.update,n.removeEventListener("mousedown",i),n.removeEventListener("mouseup",i),N.each(e.scales,(function(e){e instanceof R&&e.destroy()}))}};return i.default.helpers.streaming=r,i.default.plugins.register(H),H}(n(26695),n(14867))},19394:(e,t,n)=>{n(58740),n(43838),n(4949),n(39028),e.exports=function(){"use strict";function e(n,i){if(!(this instanceof e))return new e(n,i);this.options=i=i?No(i):{},No(zs,i,!1),h(i);var o=i.value;"string"==typeof o&&(o=new va(o,i.mode)),this.doc=o;var s=new e.inputStyles[i.inputStyle](this),a=this.display=new t(n,o,s);a.wrapper.CodeMirror=this,c(this),r(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),i.autofocus&&!Es&&a.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Co,keySeq:null,specialChars:null};var l=this;for(var d in hs&&11>fs&&setTimeout((function(){l.display.input.reset(!0)}),20),Ht(this),Vo(),bt(this),this.curOp.forceUpdate=!0,Vi(this,o),i.autofocus&&!Es||l.hasFocus()?setTimeout(Do(hn,this),20):fn(this),qs)qs.hasOwnProperty(d)&&qs[d](this,i[d],Ys);T(this),i.finishInit&&i.finishInit(this);for(var u=0;u<Js.length;++u)Js[u](this);wt(this),ms&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function t(e,t,n){var i=this;this.input=n,i.scrollbarFiller=Bo("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=Bo("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=Bo("div",null,"CodeMirror-code"),i.selectionDiv=Bo("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=Bo("div",null,"CodeMirror-cursors"),i.measure=Bo("div",null,"CodeMirror-measure"),i.lineMeasure=Bo("div",null,"CodeMirror-measure"),i.lineSpace=Bo("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=Bo("div",[Bo("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Bo("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=Bo("div",null,null,"position: absolute; height: "+ka+"px; width: 1px;"),i.gutters=Bo("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=Bo("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Bo("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),hs&&8>fs&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),ms||ds&&Es||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),i(t)}function i(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.frontier=e.doc.first,Pe(e,100),e.state.modeGen++,e.curOp&&Rt(e)}function o(e){e.options.lineWrapping?(Wa(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Ua(e.display.wrapper,"CodeMirror-wrap"),p(e)),a(e),Rt(e),st(e),setTimeout((function(){b(e)}),100)}function s(e){var t=gt(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/vt(e.display)-3);return function(o){if(bi(e.doc,o))return 0;var s=0;if(o.widgets)for(var a=0;a<o.widgets.length;a++)o.widgets[a].height&&(s+=o.widgets[a].height);return n?s+(Math.ceil(o.text.length/i)||1)*t:s+t}}function a(e){var t=e.doc,n=s(e);t.iter((function(e){var t=n(e);t!=e.height&&Xi(e,t)}))}function r(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),st(e)}function l(e){c(e),Rt(e),setTimeout((function(){_(e)}),20)}function c(e){var t=e.display.gutters,n=e.options.gutters;Ho(t);for(var i=0;i<n.length;++i){var o=n[i],s=t.appendChild(Bo("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",d(e)}function d(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function u(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=ui(i);)i=(o=t.find(0,!0)).from.line,n+=o.from.ch-o.to.ch;for(i=e;t=pi(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function p(e){var t=e.display,n=e.doc;t.maxLine=zi(n,n.first),t.maxLineLength=u(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=u(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}function h(e){var t=Io(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function f(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Ue(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Ke(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function m(e,t,n){this.cm=n;var i=this.vert=Bo("div",[Bo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=Bo("div",[Bo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(o),Ea(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),Ea(o,"scroll",(function(){o.clientWidth&&t(o.scrollLeft,"horizontal")})),this.checkedOverlay=!1,hs&&8>fs&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Ua(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Ea(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?en(t,e):Jt(t,e)}),t),t.display.scrollbars.addClass&&Wa(t.display.wrapper,t.display.scrollbars.addClass)}function b(e,t){t||(t=f(e));var n=e.display.barWidth,i=e.display.barHeight;y(e,t);for(var o=0;4>o&&n!=e.display.barWidth||i!=e.display.barHeight;o++)n!=e.display.barWidth&&e.options.lineWrapping&&O(e),y(e,f(e)),n=e.display.barWidth,i=e.display.barHeight}function y(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function w(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-je(e));var o=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,s=Zi(t,i),a=Zi(t,o);if(n&&n.ensure){var r=n.ensure.from.line,l=n.ensure.to.line;s>r?(s=r,a=Zi(t,Ji(zi(t,r))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(s=Zi(t,Ji(zi(t,l))-e.wrapper.clientHeight),a=l)}return{from:s,to:Math.max(a,s+1)}}function _(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=S(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,s=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=s);var r=n[a].alignable;if(r)for(var l=0;l<r.length;l++)r[l].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=i+o+"px")}}function T(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=E(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var o=i.measure.appendChild(Bo("div",[Bo("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=o.firstChild.offsetWidth,a=o.offsetWidth-s;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(s,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",d(e),!0}return!1}function E(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function S(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function A(e,t,n){var i=e.display;this.viewport=t,this.visible=w(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Ge(e),this.force=n,this.dims=R(e),this.events=[]}function C(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ke(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ke(e)+"px",t.scrollbarsClipped=!0)}function k(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Dt(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Bt(e))return!1;T(e)&&(Dt(e),t.dims=R(e));var o=i.first+i.size,s=Math.max(t.visible.from-e.options.viewportMargin,i.first),a=Math.min(o,t.visible.to+e.options.viewportMargin);n.viewFrom<s&&s-n.viewFrom<20&&(s=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(o,n.viewTo)),Is&&(s=gi(e.doc,s),a=vi(e.doc,a));var r=s!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Ft(e,s,a),n.viewOffset=Ji(zi(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=Bt(e);if(!r&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Uo();return l>4&&(n.lineDiv.style.display="none"),N(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,c&&Uo()!=c&&c.offsetHeight&&c.focus(),Ho(n.cursorDiv),Ho(n.selectionDiv),n.gutters.style.height=0,r&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Pe(e,400)),n.updateLineNumbers=null,!0}function x(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Ge(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Ue(e.display)-Ve(e),n.top)}),t.visible=w(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&k(e,t);i=!1){O(e);var o=f(e);Le(e),I(e,o),b(e,o)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function $(e,t){var n=new A(e,t);if(k(e,n)){O(e),x(e,n);var i=f(e);Le(e),I(e,i),b(e,i),n.finish()}}function I(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var n=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=n+"px",e.display.gutters.style.height=Math.max(n+Ke(e),t.clientHeight)+"px"}function O(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var o,s=t.view[i];if(!s.hidden){if(hs&&8>fs){var a=s.node.offsetTop+s.node.offsetHeight;o=a-n,n=a}else{var r=s.node.getBoundingClientRect();o=r.bottom-r.top}var l=s.line.height-o;if(2>o&&(o=gt(t)),(l>.001||-.001>l)&&(Xi(s.line,o),L(s.line),s.rest))for(var c=0;c<s.rest.length;c++)L(s.rest[c])}}}function L(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function R(e){for(var t=e.display,n={},i={},o=t.gutters.clientLeft,s=t.gutters.firstChild,a=0;s;s=s.nextSibling,++a)n[e.options.gutters[a]]=s.offsetLeft+s.clientLeft+o,i[e.options.gutters[a]]=s.clientWidth;return{fixedPos:S(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function N(e,t,n){function i(t){var n=t.nextSibling;return ms&&Ss&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var o=e.display,s=e.options.lineNumbers,a=o.lineDiv,r=a.firstChild,l=o.view,c=o.viewFrom,d=0;d<l.length;d++){var u=l[d];if(u.hidden);else if(u.node&&u.node.parentNode==a){for(;r!=u.node;)r=i(r);var p=s&&null!=t&&c>=t&&u.lineNumber;u.changes&&(Io(u.changes,"gutter")>-1&&(p=!1),D(e,u,c,n)),p&&(Ho(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(E(e.options,c)))),r=u.node.nextSibling}else{var h=W(e,u,c,n);a.insertBefore(h,r)}c+=u.size}for(;r;)r=i(r)}function D(e,t,n,i){for(var o=0;o<t.changes.length;o++){var s=t.changes[o];"text"==s?B(e,t):"gutter"==s?j(e,t,n,i):"class"==s?H(t):"widget"==s&&U(e,t,i)}t.changes=null}function M(e){return e.node==e.text&&(e.node=Bo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),hs&&8>fs&&(e.node.style.zIndex=2)),e.node}function P(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=M(e);e.background=n.insertBefore(Bo("div",null,t),n.firstChild)}}function F(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ni(e,t)}function B(e,t){var n=t.text.className,i=F(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,H(t)):n&&(t.text.className=n)}function H(e){P(e),e.line.wrapClass?M(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function j(e,t,n,i){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=M(t),a=t.gutter=Bo("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(Bo("div",E(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var r=0;r<e.options.gutters.length;++r){var l=e.options.gutters[r],c=o.hasOwnProperty(l)&&o[l];c&&a.appendChild(Bo("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function U(e,t,n){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild;i;i=o){var o=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}K(e,t,n)}function W(e,t,n,i){var o=F(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),H(t),j(e,t,n,i),K(e,t,i),t.node}function K(e,t,n){if(G(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)G(e,t.rest[i],t,n,!1)}function G(e,t,n,i,o){if(t.widgets)for(var s=M(n),a=0,r=t.widgets;a<r.length;++a){var l=r[a],c=Bo("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),V(l,c,n,i),e.display.input.setUneditable(c),o&&l.above?s.insertBefore(c,n.gutter||n.text):s.appendChild(c),wo(l,"redraw")}}function V(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var o=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(o-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function z(e){return Os(e.line,e.ch)}function q(e,t){return Ls(e,t)<0?t:e}function Y(e,t){return Ls(e,t)<0?e:t}function X(e){e.state.focused||(e.display.input.focus(),hn(e))}function Q(e){return e.options.readOnly||e.doc.cantEdit}function Z(e,t,n,i,o){var s=e.doc;e.display.shift=!1,i||(i=s.sel);var a=Va(t),r=null;e.state.pasteIncoming&&i.ranges.length>1&&(Rs&&Rs.join("\n")==t?r=i.ranges.length%Rs.length==0&&Oo(Rs,Va):a.length==i.ranges.length&&(r=Oo(a,(function(e){return[e]}))));for(var l=i.ranges.length-1;l>=0;l--){var c=i.ranges[l],d=c.from(),u=c.to();c.empty()&&(n&&n>0?d=Os(d.line,d.ch-n):e.state.overwrite&&!e.state.pasteIncoming&&(u=Os(u.line,Math.min(zi(s,u.line).text.length,u.ch+$o(a).length))));var p=e.curOp.updateInput,h={from:d,to:u,text:r?r[l%r.length]:a,origin:o||(e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input")};Tn(e.doc,h),wo(e,"inputRead",e,h)}t&&!e.state.pasteIncoming&&J(e,t),Nn(e),e.curOp.updateInput=p,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function J(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var o=n.ranges[i];if(!(o.head.ch>100||i&&n.ranges[i-1].head.line==o.head.line)){var s=e.getModeAt(o.head),a=!1;if(s.electricChars){for(var r=0;r<s.electricChars.length;r++)if(t.indexOf(s.electricChars.charAt(r))>-1){a=Mn(e,o.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(zi(e.doc,o.head.line).text.slice(0,o.head.ch))&&(a=Mn(e,o.head.line,"smart"));a&&wo(e,"electricInput",e,o.head.line)}}}function ee(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var o=e.doc.sel.ranges[i].head.line,s={anchor:Os(o,0),head:Os(o+1,0)};n.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:n}}function te(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function ne(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Co,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function ie(){var e=Bo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Bo("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ms?e.style.width="1000px":e.setAttribute("wrap","off"),Ts&&(e.style.border="1px solid black"),te(e),t}function oe(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Co,this.gracePeriod=!1}function se(e,t){var n=Qe(e,t.line);if(!n||n.hidden)return null;var i=zi(e.doc,t.line),o=qe(n,i,t.line),s=eo(i),a="left";s&&(a=as(s,t.ch)%2?"right":"left");var r=et(o.map,t.ch,a);return r.offset="right"==r.collapse?r.end:r.start,r}function ae(e,t){return t&&(e.bad=!0),e}function re(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return ae(e.clipPos(Os(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var s=e.display.view[o];if(s.node==i)return le(s,t,n)}}function le(e,t,n){function i(t,n,i){for(var o=-1;o<(d?d.length:0);o++)for(var s=0>o?c.map:d[o],a=0;a<s.length;a+=3){var r=s[a+2];if(r==t||r==n){var l=Qi(0>o?e.line:e.rest[o]),u=s[a]+i;return(0>i||r!=t)&&(u=s[a+(i?1:0)]),Os(l,u)}}}var o=e.text.firstChild,s=!1;if(!t||!Ba(o,t))return ae(Os(Qi(e.line),0),!0);if(t==o&&(s=!0,t=o.childNodes[n],n=0,!t)){var a=e.rest?$o(e.rest):e.line;return ae(Os(Qi(a),a.text.length),s)}var r=3==t.nodeType?t:null,l=t;for(r||1!=t.childNodes.length||3!=t.firstChild.nodeType||(r=t.firstChild,n&&(n=r.nodeValue.length));l.parentNode!=o;)l=l.parentNode;var c=e.measure,d=c.maps,u=i(r,l,n);if(u)return ae(u,s);for(var p=l.nextSibling,h=r?r.nodeValue.length-n:0;p;p=p.nextSibling){if(u=i(p,p.firstChild,0))return ae(Os(u.line,u.ch-h),s);h+=p.textContent.length}var f=l.previousSibling;for(h=n;f;f=f.previousSibling){if(u=i(f,f.firstChild,-1))return ae(Os(u.line,u.ch+h),s);h+=p.textContent.length}}function ce(e,t,n,i,o){function s(e){return function(t){return t.id==e}}function a(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/\u200b/g,"")),void(r+=n);var c,d=t.getAttribute("cm-marker");if(d){var u=e.findMarks(Os(i,0),Os(o+1,0),s(+d));return void(u.length&&(c=u[0].find())&&(r+=qi(e.doc,c.from,c.to).join("\n")))}if("false"==t.getAttribute("contenteditable"))return;for(var p=0;p<t.childNodes.length;p++)a(t.childNodes[p]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var h=t.nodeValue;if(!h)return;l&&(r+="\n",l=!1),r+=h}}for(var r="",l=!1;a(t),t!=n;)t=t.nextSibling;return r}function de(e,t){this.ranges=e,this.primIndex=t}function ue(e,t){this.anchor=e,this.head=t}function pe(e,t){var n=e[t];e.sort((function(e,t){return Ls(e.from(),t.from())})),t=Io(e,n);for(var i=1;i<e.length;i++){var o=e[i],s=e[i-1];if(Ls(s.to(),o.from())>=0){var a=Y(s.from(),o.from()),r=q(s.to(),o.to()),l=s.empty()?o.from()==o.head:s.from()==s.head;t>=i&&--t,e.splice(--i,2,new ue(l?r:a,l?a:r))}}return new de(e,t)}function he(e,t){return new de([new ue(e,t||e)],0)}function fe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return Os(e.first,0);var n=e.first+e.size-1;return t.line>n?Os(n,zi(e,n).text.length):ge(t,zi(e,t.line).text.length)}function ge(e,t){var n=e.ch;return null==n||n>t?Os(e.line,t):0>n?Os(e.line,0):e}function ve(e,t){return t>=e.first&&t<e.first+e.size}function be(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=me(e,t[i]);return n}function ye(e,t,n,i){if(e.cm&&e.cm.display.shift||e.extend){var o=t.anchor;if(i){var s=Ls(n,o)<0;s!=Ls(i,o)<0?(o=n,n=i):s!=Ls(n,i)<0&&(n=i)}return new ue(o,n)}return new ue(i||n,n)}function we(e,t,n,i){Ce(e,new de([ye(e,e.sel.primary(),t,n)],0),i)}function _e(e,t,n){for(var i=[],o=0;o<e.sel.ranges.length;o++)i[o]=ye(e,e.sel.ranges[o],t[o],null);Ce(e,pe(i,e.sel.primIndex),n)}function Te(e,t,n,i){var o=e.sel.ranges.slice(0);o[t]=n,Ce(e,pe(o,e.sel.primIndex),i)}function Ee(e,t,n,i){Ce(e,he(t,n),i)}function Se(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new ue(me(e,t[n].anchor),me(e,t[n].head))}};return Aa(e,"beforeSelectionChange",e,n),e.cm&&Aa(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?pe(n.ranges,n.ranges.length-1):t}function Ae(e,t,n){var i=e.history.done,o=$o(i);o&&o.ranges?(i[i.length-1]=t,ke(e,t,n)):Ce(e,t,n)}function Ce(e,t,n){ke(e,t,n),ro(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ke(e,t,n){(So(e,"beforeSelectionChange")||e.cm&&So(e.cm,"beforeSelectionChange"))&&(t=Se(e,t));var i=n&&n.bias||(Ls(t.primary().head,e.sel.primary().head)<0?-1:1);xe(e,Ie(e,t,i,!0)),n&&!1===n.scroll||!e.cm||Nn(e.cm)}function xe(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Eo(e.cm)),wo(e,"cursorActivity",e))}function $e(e){xe(e,Ie(e,e.sel,null,!1),$a)}function Ie(e,t,n,i){for(var o,s=0;s<t.ranges.length;s++){var a=t.ranges[s],r=Oe(e,a.anchor,n,i),l=Oe(e,a.head,n,i);(o||r!=a.anchor||l!=a.head)&&(o||(o=t.ranges.slice(0,s)),o[s]=new ue(r,l))}return o?pe(o,t.primIndex):t}function Oe(e,t,n,i){var o=!1,s=t,a=n||1;e.cantEdit=!1;e:for(;;){var r=zi(e,s.line);if(r.markedSpans)for(var l=0;l<r.markedSpans.length;++l){var c=r.markedSpans[l],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=s.ch:c.from<s.ch))&&(null==c.to||(d.inclusiveRight?c.to>=s.ch:c.to>s.ch))){if(i&&(Aa(d,"beforeCursorEnter"),d.explicitlyCleared)){if(r.markedSpans){--l;continue}break}if(!d.atomic)continue;var u=d.find(0>a?-1:1);if(0==Ls(u,s)&&(u.ch+=a,u.ch<0?u=u.line>e.first?me(e,Os(u.line-1)):null:u.ch>r.text.length&&(u=u.line<e.first+e.size-1?Os(u.line+1,0):null),!u)){if(o)return i?(e.cantEdit=!0,Os(e.first,0)):Oe(e,t,n,!0);o=!0,u=t,a=-a}s=u;continue e}}return s}}function Le(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Re(e,t){for(var n=e.doc,i={},o=i.cursors=document.createDocumentFragment(),s=i.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(!1!==t||a!=n.sel.primIndex){var r=n.sel.ranges[a],l=r.empty();(l||e.options.showCursorWhenSelecting)&&Ne(e,r,o),l||De(e,r,s)}return i}function Ne(e,t,n){var i=ut(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),o=n.appendChild(Bo("div"," ","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var s=n.appendChild(Bo("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=i.other.left+"px",s.style.top=i.other.top+"px",s.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function De(e,t,n){function i(e,t,n,i){0>t&&(t=0),t=Math.round(t),i=Math.round(i),r.appendChild(Bo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?d-e:n)+"px; height: "+(i-t)+"px"))}function o(t,n,o){function s(n,i){return dt(e,Os(t,n),"div",u,i)}var r,l,u=zi(a,t),p=u.text.length;return Qo(eo(u),n||0,null==o?p:o,(function(e,t,a){var u,h,f,m=s(e,"left");if(e==t)u=m,h=f=m.left;else{if(u=s(t-1,"right"),"rtl"==a){var g=m;m=u,u=g}h=m.left,f=u.right}null==n&&0==e&&(h=c),u.top-m.top>3&&(i(h,m.top,null,m.bottom),h=c,m.bottom<u.top&&i(h,m.bottom,null,u.top)),null==o&&t==p&&(f=d),(!r||m.top<r.top||m.top==r.top&&m.left<r.left)&&(r=m),(!l||u.bottom>l.bottom||u.bottom==l.bottom&&u.right>l.right)&&(l=u),c+1>h&&(h=c),i(h,u.top,f-h,u.bottom)})),{start:r,end:l}}var s=e.display,a=e.doc,r=document.createDocumentFragment(),l=We(e.display),c=l.left,d=Math.max(s.sizerWidth,Ge(e)-s.sizer.offsetLeft)-l.right,u=t.from(),p=t.to();if(u.line==p.line)o(u.line,u.ch,p.ch);else{var h=zi(a,u.line),f=zi(a,p.line),m=fi(h)==fi(f),g=o(u.line,u.ch,m?h.text.length+1:null).end,v=o(p.line,m?0:null,p.ch).start;m&&(g.top<v.top-2?(i(g.right,g.top,null,g.bottom),i(c,v.top,v.left,v.bottom)):i(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&i(c,g.bottom,null,v.top)}n.appendChild(r)}function Me(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Pe(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Do(Fe,e))}function Fe(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=ta(t.mode,He(e,t.frontier)),o=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),(function(s){if(t.frontier>=e.display.viewFrom){var a=s.styles,r=Ii(e,s,i,!0);s.styles=r.styles;var l=s.styleClasses,c=r.classes;c?s.styleClasses=c:l&&(s.styleClasses=null);for(var d=!a||a.length!=s.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),u=0;!d&&u<a.length;++u)d=a[u]!=s.styles[u];d&&o.push(t.frontier),s.stateAfter=ta(t.mode,i)}else Li(e,s.text,i),s.stateAfter=t.frontier%5==0?ta(t.mode,i):null;return++t.frontier,+new Date>n?(Pe(e,e.options.workDelay),!0):void 0})),o.length&&kt(e,(function(){for(var t=0;t<o.length;t++)Nt(e,o[t],"text")}))}}function Be(e,t,n){for(var i,o,s=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),r=t;r>a;--r){if(r<=s.first)return s.first;var l=zi(s,r-1);if(l.stateAfter&&(!n||r<=s.frontier))return r;var c=La(l.text,null,e.options.tabSize);(null==o||i>c)&&(o=r-1,i=c)}return o}function He(e,t,n){var i=e.doc,o=e.display;if(!i.mode.startState)return!0;var s=Be(e,t,n),a=s>i.first&&zi(i,s-1).stateAfter;return a=a?ta(i.mode,a):na(i.mode),i.iter(s,t,(function(n){Li(e,n.text,a);var r=s==t-1||s%5==0||s>=o.viewFrom&&s<o.viewTo;n.stateAfter=r?ta(i.mode,a):null,++s})),n&&(i.frontier=s),a}function je(e){return e.lineSpace.offsetTop}function Ue(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function We(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=jo(e.measure,Bo("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Ke(e){return ka-e.display.nativeBarWidth}function Ge(e){return e.display.scroller.clientWidth-Ke(e)-e.display.barWidth}function Ve(e){return e.display.scroller.clientHeight-Ke(e)-e.display.barHeight}function ze(e,t,n){var i=e.options.lineWrapping,o=i&&Ge(e);if(!t.measure.heights||i&&t.measure.width!=o){var s=t.measure.heights=[];if(i){t.measure.width=o;for(var a=t.text.firstChild.getClientRects(),r=0;r<a.length-1;r++){var l=a[r],c=a[r+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-n.top)}}s.push(n.bottom-n.top)}}function qe(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(i=0;i<e.rest.length;i++)if(Qi(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ye(e,t){var n=Qi(t=fi(t)),i=e.display.externalMeasured=new Ot(e.doc,t,n);i.lineN=n;var o=i.built=Ni(e,i);return i.text=o.pre,jo(e.display.lineMeasure,o.pre),i}function Xe(e,t,n,i){return Je(e,Ze(e,t),n,i)}function Qe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Mt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Ze(e,t){var n=Qi(t),i=Qe(e,n);i&&!i.text?i=null:i&&i.changes&&D(e,i,n,R(e)),i||(i=Ye(e,t));var o=qe(i,t,n);return{line:t,view:i,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Je(e,t,n,i,o){t.before&&(n=-1);var s,a=n+(i||"");return t.cache.hasOwnProperty(a)?s=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(ze(e,t.view,t.rect),t.hasHeights=!0),(s=tt(e,t,n,i)).bogus||(t.cache[a]=s)),{left:s.left,right:s.right,top:o?s.rtop:s.top,bottom:o?s.rbottom:s.bottom}}function et(e,t,n){for(var i,o,s,a,r=0;r<e.length;r+=3){var l=e[r],c=e[r+1];if(l>t?(o=0,s=1,a="left"):c>t?s=1+(o=t-l):(r==e.length-3||t==c&&e[r+3]>t)&&(o=(s=c-l)-1,t>=c&&(a="right")),null!=o){if(i=e[r+2],l==c&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==o)for(;r&&e[r-2]==e[r-3]&&e[r-1].insertLeft;)i=e[2+(r-=3)],a="left";if("right"==n&&o==c-l)for(;r<e.length-3&&e[r+3]==e[r+4]&&!e[r+5].insertLeft;)i=e[(r+=3)+2],a="right";break}}return{node:i,start:o,end:s,collapse:a,coverStart:l,coverEnd:c}}function tt(e,t,n,i){var o,s=et(t.map,n,i),a=s.node,r=s.start,l=s.end,c=s.collapse;if(3==a.nodeType){for(var d=0;4>d;d++){for(;r&&Fo(t.line.text.charAt(s.coverStart+r));)--r;for(;s.coverStart+l<s.coverEnd&&Fo(t.line.text.charAt(s.coverStart+l));)++l;if((o=hs&&9>fs&&0==r&&l==s.coverEnd-s.coverStart?a.parentNode.getBoundingClientRect():hs&&e.options.lineWrapping?(u=Da(a,r,l).getClientRects()).length?u["right"==i?u.length-1:0]:Ps:Da(a,r,l).getBoundingClientRect()||Ps).left||o.right||0==r)break;l=r,r-=1,c="right"}hs&&11>fs&&(o=nt(e.display.measure,o))}else{var u;r>0&&(c=i="right"),o=e.options.lineWrapping&&(u=a.getClientRects()).length>1?u["right"==i?u.length-1:0]:a.getBoundingClientRect()}if(hs&&9>fs&&!r&&(!o||!o.left&&!o.right)){var p=a.parentNode.getClientRects()[0];o=p?{left:p.left,right:p.left+vt(e.display),top:p.top,bottom:p.bottom}:Ps}var h=o.top-t.rect.top,f=o.bottom-t.rect.top,m=(h+f)/2,g=t.view.measure.heights;for(d=0;d<g.length-1&&!(m<g[d]);d++);var v=d?g[d-1]:0,b=g[d],y={left:("right"==c?o.right:o.left)-t.rect.left,right:("left"==c?o.left:o.right)-t.rect.left,top:v,bottom:b};return o.left||o.right||(y.bogus=!0),e.options.singleCursorHeightPerLine||(y.rtop=h,y.rbottom=f),y}function nt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Xo(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function it(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ot(e){e.display.externalMeasure=null,Ho(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)it(e.display.view[t])}function st(e){ot(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function at(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function rt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function lt(e,t,n,i){if(t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var s=_i(t.widgets[o]);n.top+=s,n.bottom+=s}if("line"==i)return n;i||(i="local");var a=Ji(t);if("local"==i?a+=je(e.display):a-=e.display.viewOffset,"page"==i||"window"==i){var r=e.display.lineSpace.getBoundingClientRect();a+=r.top+("window"==i?0:rt());var l=r.left+("window"==i?0:at());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function ct(e,t,n){if("div"==n)return t;var i=t.left,o=t.top;if("page"==n)i-=at(),o-=rt();else if("local"==n||!n){var s=e.display.sizer.getBoundingClientRect();i+=s.left,o+=s.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:o-a.top}}function dt(e,t,n,i,o){return i||(i=zi(e.doc,t.line)),lt(e,i,Xe(e,i,t.ch,o),n)}function ut(e,t,n,i,o,s){function a(t,a){var r=Je(e,o,t,a?"right":"left",s);return a?r.left=r.right:r.right=r.left,lt(e,i,r,n)}function r(e,t){var n=l[t],i=n.level%2;return e==Zo(n)&&t&&n.level<l[t-1].level?(e=Jo(n=l[--t])-(n.level%2?0:1),i=!0):e==Jo(n)&&t<l.length-1&&n.level<l[t+1].level&&(e=Zo(n=l[++t])-n.level%2,i=!1),i&&e==n.to&&e>n.from?a(e-1):a(e,i)}i=i||zi(e.doc,t.line),o||(o=Ze(e,i));var l=eo(i),c=t.ch;if(!l)return a(c);var d=r(c,as(l,c));return null!=Qa&&(d.other=r(c,Qa)),d}function pt(e,t){var n=0;t=me(e.doc,t),e.options.lineWrapping||(n=vt(e.display)*t.ch);var i=zi(e.doc,t.line),o=Ji(i)+je(e.display);return{left:n,right:n,top:o,bottom:o+i.height}}function ht(e,t,n,i){var o=Os(e,t);return o.xRel=i,n&&(o.outside=!0),o}function ft(e,t,n){var i=e.doc;if(0>(n+=e.display.viewOffset))return ht(i.first,0,!0,-1);var o=Zi(i,n),s=i.first+i.size-1;if(o>s)return ht(i.first+i.size-1,zi(i,s).text.length,!0,1);0>t&&(t=0);for(var a=zi(i,o);;){var r=mt(e,a,o,t,n),l=pi(a),c=l&&l.find(0,!0);if(!l||!(r.ch>c.from.ch||r.ch==c.from.ch&&r.xRel>0))return r;o=Qi(a=c.to.line)}}function mt(e,t,n,i,o){function s(i){var o=ut(e,Os(n,i),"line",t,c);return r=!0,a>o.bottom?o.left-l:a<o.top?o.left+l:(r=!1,o.left)}var a=o-Ji(t),r=!1,l=2*e.display.wrapper.clientWidth,c=Ze(e,t),d=eo(t),u=t.text.length,p=es(t),h=ts(t),f=s(p),m=r,g=s(h),v=r;if(i>g)return ht(n,h,v,1);for(;;){if(d?h==p||h==ls(t,p,1):1>=h-p){for(var b=f>i||g-i>=i-f?p:h,y=i-(b==p?f:g);Fo(t.text.charAt(b));)++b;return ht(n,b,b==p?m:v,-1>y?-1:y>1?1:0)}var w=Math.ceil(u/2),_=p+w;if(d){_=p;for(var T=0;w>T;++T)_=ls(t,_,1)}var E=s(_);E>i?(h=_,g=E,(v=r)&&(g+=1e3),u=w):(p=_,f=E,m=r,u-=w)}}function gt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ns){Ns=Bo("pre");for(var t=0;49>t;++t)Ns.appendChild(document.createTextNode("x")),Ns.appendChild(Bo("br"));Ns.appendChild(document.createTextNode("x"))}jo(e.measure,Ns);var n=Ns.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Ho(e.measure),n||1}function vt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Bo("span","xxxxxxxxxx"),n=Bo("pre",[t]);jo(e.measure,n);var i=t.getBoundingClientRect(),o=(i.right-i.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function bt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Bs},Fs?Fs.ops.push(e.curOp):e.curOp.ownsGroup=Fs={ops:[e.curOp],delayedCallbacks:[]}}function yt(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n]();for(var i=0;i<e.ops.length;i++){var o=e.ops[i];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++](o.cm)}}while(n<t.length)}function wt(e){var t=e.curOp.ownsGroup;if(t)try{yt(t)}finally{Fs=null;for(var n=0;n<t.ops.length;n++)t.ops[n].cm.curOp=null;_t(t)}}function _t(e){for(var t=e.ops,n=0;n<t.length;n++)Tt(t[n]);for(n=0;n<t.length;n++)Et(t[n]);for(n=0;n<t.length;n++)St(t[n]);for(n=0;n<t.length;n++)At(t[n]);for(n=0;n<t.length;n++)Ct(t[n])}function Tt(e){var t=e.cm,n=t.display;C(t),e.updateMaxLine&&p(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new A(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Et(e){e.updatedDisplay=e.mustUpdate&&k(e.cm,e.update)}function St(e){var t=e.cm,n=t.display;e.updatedDisplay&&O(t),e.barMeasure=f(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Xe(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ke(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Ge(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function At(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&en(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&I(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&b(t,e.barMeasure),e.selectionChanged&&Me(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),e.focus&&e.focus==Uo()&&X(e.cm)}function Ct(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&x(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(i.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(i.scrollTop),n.scroller.scrollTop=i.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(i.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-Ge(t),e.scrollLeft)),n.scrollbars.setScrollLeft(i.scrollLeft),n.scroller.scrollLeft=i.scrollLeft,_(t)),e.scrollToPos){var o=In(t,me(i,e.scrollToPos.from),me(i,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&$n(t,o)}var s=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(s)for(var r=0;r<s.length;++r)s[r].lines.length||Aa(s[r],"hide");if(a)for(r=0;r<a.length;++r)a[r].lines.length&&Aa(a[r],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Aa(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function kt(e,t){if(e.curOp)return t();bt(e);try{return t()}finally{wt(e)}}function xt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);bt(e);try{return t.apply(e,arguments)}finally{wt(e)}}}function $t(e){return function(){if(this.curOp)return e.apply(this,arguments);bt(this);try{return e.apply(this,arguments)}finally{wt(this)}}}function It(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);bt(t);try{return e.apply(this,arguments)}finally{wt(t)}}}function Ot(e,t,n){this.line=t,this.rest=mi(t),this.size=this.rest?Qi($o(this.rest))-n+1:1,this.node=this.text=null,this.hidden=bi(e,t)}function Lt(e,t,n){for(var i,o=[],s=t;n>s;s=i){var a=new Ot(e.doc,zi(e.doc,s),s);i=s+a.size,o.push(a)}return o}function Rt(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var o=e.display;if(i&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)Is&&gi(e.doc,t)<o.viewTo&&Dt(e);else if(n<=o.viewFrom)Is&&vi(e.doc,n+i)>o.viewFrom?Dt(e):(o.viewFrom+=i,o.viewTo+=i);else if(t<=o.viewFrom&&n>=o.viewTo)Dt(e);else if(t<=o.viewFrom)(s=Pt(e,n,n+i,1))?(o.view=o.view.slice(s.index),o.viewFrom=s.lineN,o.viewTo+=i):Dt(e);else if(n>=o.viewTo){var s;(s=Pt(e,t,t,-1))?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):Dt(e)}else{var a=Pt(e,t,t,-1),r=Pt(e,n,n+i,1);a&&r?(o.view=o.view.slice(0,a.index).concat(Lt(e,a.lineN,r.lineN)).concat(o.view.slice(r.index)),o.viewTo+=i):Dt(e)}var l=o.externalMeasured;l&&(n<l.lineN?l.lineN+=i:t<l.lineN+l.size&&(o.externalMeasured=null))}function Nt(e,t,n){e.curOp.viewChanged=!0;var i=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var s=i.view[Mt(e,t)];if(null!=s.node){var a=s.changes||(s.changes=[]);-1==Io(a,n)&&a.push(n)}}}function Dt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Mt(e,t){if(t>=e.display.viewTo)return null;if(0>(t-=e.display.viewFrom))return null;for(var n=e.display.view,i=0;i<n.length;i++)if(0>(t-=n[i].size))return i}function Pt(e,t,n,i){var o,s=Mt(e,t),a=e.display.view;if(!Is||n==e.doc.first+e.doc.size)return{index:s,lineN:n};for(var r=0,l=e.display.viewFrom;s>r;r++)l+=a[r].size;if(l!=t){if(i>0){if(s==a.length-1)return null;o=l+a[s].size-t,s++}else o=l-t;t+=o,n+=o}for(;gi(e.doc,n)!=n;){if(s==(0>i?0:a.length-1))return null;n+=i*a[s-(0>i?1:0)].size,s+=i}return{index:s,lineN:n}}function Ft(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Lt(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Lt(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Mt(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Lt(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Mt(e,n)))),i.viewTo=n}function Bt(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var o=t[i];o.hidden||o.node&&!o.changes||++n}return n}function Ht(e){function t(){o.activeTouch&&(s=setTimeout((function(){o.activeTouch=null}),1e3),(a=o.activeTouch).end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function i(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}var o=e.display;Ea(o.scroller,"mousedown",xt(e,Gt)),Ea(o.scroller,"dblclick",hs&&11>fs?xt(e,(function(t){if(!To(e,t)){var n=Kt(e,t);if(n&&!Xt(e,t)&&!Wt(e.display,t)){wa(t);var i=e.findWordAt(n);we(e.doc,i.anchor,i.head)}}})):function(t){To(e,t)||wa(t)}),xs||Ea(o.scroller,"contextmenu",(function(t){mn(e,t)}));var s,a={end:0};Ea(o.scroller,"touchstart",(function(e){if(!n(e)){clearTimeout(s);var t=+new Date;o.activeTouch={start:t,moved:!1,prev:t-a.end<=300?a:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}})),Ea(o.scroller,"touchmove",(function(){o.activeTouch&&(o.activeTouch.moved=!0)})),Ea(o.scroller,"touchend",(function(n){var s=o.activeTouch;if(s&&!Wt(o,n)&&null!=s.left&&!s.moved&&new Date-s.start<300){var a,r=e.coordsChar(o.activeTouch,"page");a=!s.prev||i(s,s.prev)?new ue(r,r):!s.prev.prev||i(s,s.prev.prev)?e.findWordAt(r):new ue(Os(r.line,0),me(e.doc,Os(r.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),wa(n)}t()})),Ea(o.scroller,"touchcancel",t),Ea(o.scroller,"scroll",(function(){o.scroller.clientHeight&&(Jt(e,o.scroller.scrollTop),en(e,o.scroller.scrollLeft,!0),Aa(e,"scroll",e))})),Ea(o.scroller,"mousewheel",(function(t){tn(e,t)})),Ea(o.scroller,"DOMMouseScroll",(function(t){tn(e,t)})),Ea(o.wrapper,"scroll",(function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0})),o.dragFunctions={simple:function(t){To(e,t)||Ta(t)},start:function(t){Zt(e,t)},drop:xt(e,Qt)};var r=o.input.getField();Ea(r,"keyup",(function(t){dn.call(e,t)})),Ea(r,"keydown",xt(e,ln)),Ea(r,"keypress",xt(e,un)),Ea(r,"focus",Do(hn,e)),Ea(r,"blur",Do(fn,e))}function jt(t,n,i){if(!n!=!(i&&i!=e.Init)){var o=t.display.dragFunctions,s=n?Ea:Sa;s(t.display.scroller,"dragstart",o.start),s(t.display.scroller,"dragenter",o.simple),s(t.display.scroller,"dragover",o.simple),s(t.display.scroller,"drop",o.drop)}}function Ut(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Wt(e,t){for(var n=bo(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Kt(e,t,n,i){var o=e.display;if(!n&&"true"==bo(t).getAttribute("cm-not-content"))return null;var s,a,r=o.lineSpace.getBoundingClientRect();try{s=t.clientX-r.left,a=t.clientY-r.top}catch(t){return null}var l,c=ft(e,s,a);if(i&&1==c.xRel&&(l=zi(e.doc,c.line).text).length==c.ch){var d=La(l,l.length,e.options.tabSize)-l.length;c=Os(c.line,Math.max(0,Math.round((s-We(e.display).left)/vt(e.display))-d))}return c}function Gt(e){var t=this,n=t.display;if(!(n.activeTouch&&n.input.supportsTouch()||To(t,e))){if(n.shift=e.shiftKey,Wt(n,e))return void(ms||(n.scroller.draggable=!1,setTimeout((function(){n.scroller.draggable=!0}),100)));if(!Xt(t,e)){var i=Kt(t,e);switch(window.focus(),yo(e)){case 1:i?Vt(t,e,i):bo(e)==n.scroller&&wa(e);break;case 2:ms&&(t.state.lastMiddleDown=+new Date),i&&we(t.doc,i),setTimeout((function(){n.input.focus()}),20),wa(e);break;case 3:xs?mn(t,e):pn(t)}}}}function Vt(e,t,n){hs?setTimeout(Do(X,e),0):e.curOp.focus=Uo();var i,o=+new Date;Ms&&Ms.time>o-400&&0==Ls(Ms.pos,n)?i="triple":Ds&&Ds.time>o-400&&0==Ls(Ds.pos,n)?(i="double",Ms={time:o,pos:n}):(i="single",Ds={time:o,pos:n});var s,a=e.doc.sel,r=Ss?t.metaKey:t.ctrlKey;e.options.dragDrop&&Ga&&!Q(e)&&"single"==i&&(s=a.contains(n))>-1&&!a.ranges[s].empty()?zt(e,t,n,r):qt(e,t,n,i,r)}function zt(e,t,n,i){var o=e.display,s=+new Date,a=xt(e,(function(r){ms&&(o.scroller.draggable=!1),e.state.draggingText=!1,Sa(document,"mouseup",a),Sa(o.scroller,"drop",a),Math.abs(t.clientX-r.clientX)+Math.abs(t.clientY-r.clientY)<10&&(wa(r),!i&&+new Date-200<s&&we(e.doc,n),ms||hs&&9==fs?setTimeout((function(){document.body.focus(),o.input.focus()}),20):o.input.focus())}));ms&&(o.scroller.draggable=!0),e.state.draggingText=a,o.scroller.dragDrop&&o.scroller.dragDrop(),Ea(document,"mouseup",a),Ea(o.scroller,"drop",a)}function qt(e,t,n,i,o){function s(t){if(0!=Ls(g,t))if(g=t,"rect"==i){for(var o=[],s=e.options.tabSize,a=La(zi(c,n.line).text,n.ch,s),r=La(zi(c,t.line).text,t.ch,s),l=Math.min(a,r),h=Math.max(a,r),f=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));m>=f;f++){var v=zi(c,f).text,b=ko(v,l,s);l==h?o.push(new ue(Os(f,b),Os(f,b))):v.length>b&&o.push(new ue(Os(f,b),Os(f,ko(v,h,s))))}o.length||o.push(new ue(n,n)),Ce(c,pe(p.ranges.slice(0,u).concat(o),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=d,w=y.anchor,_=t;if("single"!=i){if("double"==i)var T=e.findWordAt(t);else T=new ue(Os(t.line,0),me(c,Os(t.line+1,0)));Ls(T.anchor,w)>0?(_=T.head,w=Y(y.from(),T.anchor)):(_=T.anchor,w=q(y.to(),T.head))}(o=p.ranges.slice(0))[u]=new ue(me(c,w),_),Ce(c,pe(o,u),Ia)}}function a(t){var n=++b,o=Kt(e,t,!0,"rect"==i);if(o)if(0!=Ls(o,g)){e.curOp.focus=Uo(),s(o);var r=w(l,c);(o.line>=r.to||o.line<r.from)&&setTimeout(xt(e,(function(){b==n&&a(t)})),150)}else{var d=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;d&&setTimeout(xt(e,(function(){b==n&&(l.scroller.scrollTop+=d,a(t))})),50)}}function r(e){b=1/0,wa(e),l.input.focus(),Sa(document,"mousemove",y),Sa(document,"mouseup",_),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;wa(t);var d,u,p=c.sel,h=p.ranges;if(o&&!t.shiftKey?(u=c.sel.contains(n),d=u>-1?h[u]:new ue(n,n)):(d=c.sel.primary(),u=c.sel.primIndex),t.altKey)i="rect",o||(d=new ue(n,n)),n=Kt(e,t,!0,!0),u=-1;else if("double"==i){var f=e.findWordAt(n);d=e.display.shift||c.extend?ye(c,d,f.anchor,f.head):f}else if("triple"==i){var m=new ue(Os(n.line,0),me(c,Os(n.line+1,0)));d=e.display.shift||c.extend?ye(c,d,m.anchor,m.head):m}else d=ye(c,d,n);o?-1==u?(u=h.length,Ce(c,pe(h.concat([d]),u),{scroll:!1,origin:"*mouse"})):h.length>1&&h[u].empty()&&"single"==i&&!t.shiftKey?(Ce(c,pe(h.slice(0,u).concat(h.slice(u+1)),0)),p=c.sel):Te(c,u,d,Ia):(u=0,Ce(c,new de([d],0),Ia),p=c.sel);var g=n,v=l.wrapper.getBoundingClientRect(),b=0,y=xt(e,(function(e){yo(e)?a(e):r(e)})),_=xt(e,r);Ea(document,"mousemove",y),Ea(document,"mouseup",_)}function Yt(e,t,n,i,o){try{var s=t.clientX,a=t.clientY}catch(t){return!1}if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&wa(t);var r=e.display,l=r.lineDiv.getBoundingClientRect();if(a>l.bottom||!So(e,n))return vo(t);a-=l.top-r.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var d=r.gutters.childNodes[c];if(d&&d.getBoundingClientRect().right>=s)return o(e,n,e,Zi(e.doc,a),e.options.gutters[c],t),vo(t)}}function Xt(e,t){return Yt(e,t,"gutterClick",!0,wo)}function Qt(e){var t=this;if(!To(t,e)&&!Wt(t.display,e)){wa(e),hs&&(Hs=+new Date);var n=Kt(t,e,!0),i=e.dataTransfer.files;if(n&&!Q(t))if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,s=Array(o),a=0,r=function(e,i){var r=new FileReader;r.onload=xt(t,(function(){if(s[i]=r.result,++a==o){var e={from:n=me(t.doc,n),to:n,text:Va(s.join("\n")),origin:"paste"};Tn(t.doc,e),Ae(t.doc,he(n,Vs(e)))}})),r.readAsText(e)},l=0;o>l;++l)r(i[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){t.display.input.focus()}),20);try{if(s=e.dataTransfer.getData("Text")){if(t.state.draggingText&&!(Ss?e.altKey:e.ctrlKey))var c=t.listSelections();if(ke(t.doc,he(n,n)),c)for(l=0;l<c.length;++l)xn(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(s,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Zt(e,t){if(hs&&(!e.state.draggingText||+new Date-Hs<100))Ta(t);else if(!To(e,t)&&!Wt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!ys)){var n=Bo("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",bs&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),bs&&n.parentNode.removeChild(n)}}function Jt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,ds||$(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),ds&&$(e),Pe(e,100))}function en(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,_(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function tn(e,t){var n=Ws(t),i=n.x,o=n.y,s=e.display,a=s.scroller;if(i&&a.scrollWidth>a.clientWidth||o&&a.scrollHeight>a.clientHeight){if(o&&Ss&&ms)e:for(var r=t.target,l=s.view;r!=a;r=r.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==r){e.display.currentWheelTarget=r;break e}if(i&&!ds&&!bs&&null!=Us)return o&&Jt(e,Math.max(0,Math.min(a.scrollTop+o*Us,a.scrollHeight-a.clientHeight))),en(e,Math.max(0,Math.min(a.scrollLeft+i*Us,a.scrollWidth-a.clientWidth))),wa(t),void(s.wheelStartX=null);if(o&&null!=Us){var d=o*Us,u=e.doc.scrollTop,p=u+s.wrapper.clientHeight;0>d?u=Math.max(0,u+d-50):p=Math.min(e.doc.height,p+d+50),$(e,{top:u,bottom:p})}20>js&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(Us=(Us*js+n)/(js+1),++js)}}),200)):(s.wheelDX+=i,s.wheelDY+=o))}}function nn(e,t,n){if("string"==typeof t&&!(t=ia[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,o=!1;try{Q(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),o=t(e)!=xa}finally{e.display.shift=i,e.state.suppressEdits=!1}return o}function on(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var o=sa(t,e.state.keyMaps[i],n,e);if(o)return o}return e.options.extraKeys&&sa(t,e.options.extraKeys,n,e)||sa(t,e.options.keyMap,n,e)}function sn(e,t,n,i){var o=e.state.keySeq;if(o){if(aa(t))return"handled";Ks.set(50,(function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())})),t=o+" "+t}var s=on(e,t,i);return"multi"==s&&(e.state.keySeq=t),"handled"==s&&wo(e,"keyHandled",e,t,n),("handled"==s||"multi"==s)&&(wa(n),Me(e)),o&&!s&&/\'$/.test(t)?(wa(n),!0):!!s}function an(e,t){var n=ra(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?sn(e,"Shift-"+n,t,(function(t){return nn(e,t,!0)}))||sn(e,n,t,(function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?nn(e,t):void 0})):sn(e,n,t,(function(t){return nn(e,t)})))}function rn(e,t,n){return sn(e,"'"+n+"'",t,(function(t){return nn(e,t,!0)}))}function ln(e){var t=this;if(t.curOp.focus=Uo(),!To(t,e)){hs&&11>fs&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=an(t,e);bs&&(Gs=i?n:null,!i&&88==n&&!qa&&(Ss?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||cn(t)}}function cn(e){function t(e){18!=e.keyCode&&e.altKey||(Ua(n,"CodeMirror-crosshair"),Sa(document,"keyup",t),Sa(document,"mouseover",t))}var n=e.display.lineDiv;Wa(n,"CodeMirror-crosshair"),Ea(document,"keyup",t),Ea(document,"mouseover",t)}function dn(e){16==e.keyCode&&(this.doc.sel.shift=!1),To(this,e)}function un(e){var t=this;if(!(Wt(t.display,e)||To(t,e)||e.ctrlKey&&!e.altKey||Ss&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(bs&&n==Gs)return Gs=null,void wa(e);bs&&(!e.which||e.which<10)&&an(t,e)||rn(t,e,String.fromCharCode(null==i?n:i))||t.display.input.onKeyPress(e)}}function pn(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,fn(e))}),100)}function hn(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Aa(e,"focus",e),e.state.focused=!0,Wa(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),ms&&setTimeout((function(){e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Me(e))}function fn(e){e.state.delayingBlurEvent||(e.state.focused&&(Aa(e,"blur",e),e.state.focused=!1,Ua(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function mn(e,t){Wt(e.display,t)||gn(e,t)||e.display.input.onContextMenu(t)}function gn(e,t){return!!So(e,"gutterContextMenu")&&Yt(e,t,"gutterContextMenu",!1,Aa)}function vn(e,t){if(Ls(e,t.from)<0)return e;if(Ls(e,t.to)<=0)return Vs(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Vs(t).ch-t.to.ch),Os(n,i)}function bn(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var o=e.sel.ranges[i];n.push(new ue(vn(o.anchor,t),vn(o.head,t)))}return pe(n,e.sel.primIndex)}function yn(e,t,n){return e.line==t.line?Os(n.line,e.ch-t.ch+n.ch):Os(n.line+(e.line-t.line),e.ch)}function wn(e,t,n){for(var i=[],o=Os(e.first,0),s=o,a=0;a<t.length;a++){var r=t[a],l=yn(r.from,o,s),c=yn(Vs(r),o,s);if(o=r.to,s=c,"around"==n){var d=e.sel.ranges[a],u=Ls(d.head,d.anchor)<0;i[a]=new ue(u?c:l,u?l:c)}else i[a]=new ue(l,l)}return new de(i,e.sel.primIndex)}function _n(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(t,n,i,o){t&&(this.from=me(e,t)),n&&(this.to=me(e,n)),i&&(this.text=i),void 0!==o&&(this.origin=o)}),Aa(e,"beforeChange",e,i),e.cm&&Aa(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Tn(e,t,n){if(e.cm){if(!e.cm.curOp)return xt(e.cm,Tn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(So(e,"beforeChange")||e.cm&&So(e.cm,"beforeChange"))||(t=_n(e,t,!0))){var i=$s&&!n&&oi(e,t.from,t.to);if(i)for(var o=i.length-1;o>=0;--o)En(e,{from:i[o].from,to:i[o].to,text:o?[""]:t.text});else En(e,t)}}function En(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Ls(t.from,t.to)){var n=bn(e,t);so(e,t,n,e.cm?e.cm.curOp.id:NaN),Cn(e,t,n,ti(e,t));var i=[];Gi(e,(function(e,n){n||-1!=Io(i,e.history)||(go(e.history,t),i.push(e.history)),Cn(e,t,null,ti(e,t))}))}}function Sn(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var i,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,r="undo"==t?o.undone:o.done,l=0;l<a.length&&(i=a[l],n?!i.ranges||i.equals(e.sel):i.ranges);l++);if(l!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;(i=a.pop()).ranges;){if(lo(i,r),n&&!i.equals(e.sel))return void Ce(e,i,{clearRedo:!1});s=i}var c=[];lo(s,r),r.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;var d=So(e,"beforeChange")||e.cm&&So(e.cm,"beforeChange");for(l=i.changes.length-1;l>=0;--l){var u=i.changes[l];if(u.origin=t,d&&!_n(e,u,!1))return void(a.length=0);c.push(no(e,u));var p=l?bn(e,u):$o(a);Cn(e,u,p,ii(e,u)),!l&&e.cm&&e.cm.scrollIntoView({from:u.from,to:Vs(u)});var h=[];Gi(e,(function(e,t){t||-1!=Io(h,e.history)||(go(e.history,u),h.push(e.history)),Cn(e,u,null,ii(e,u))}))}}}}function An(e,t){if(0!=t&&(e.first+=t,e.sel=new de(Oo(e.sel.ranges,(function(e){return new ue(Os(e.anchor.line+t,e.anchor.ch),Os(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Rt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Nt(e.cm,i,"gutter")}}function Cn(e,t,n,i){if(e.cm&&!e.cm.curOp)return xt(e.cm,Cn)(e,t,n,i);if(t.to.line<e.first)An(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);An(e,o),t={from:Os(e.first,0),to:Os(t.to.line+o,t.to.ch),text:[$o(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:Os(s,zi(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=qi(e,t.from,t.to),n||(n=bn(e,t)),e.cm?kn(e.cm,t,i):Ui(e,t,i),ke(e,n,$a)}}function kn(e,t,n){var i=e.doc,o=e.display,a=t.from,r=t.to,l=!1,c=a.line;e.options.lineWrapping||(c=Qi(fi(zi(i,a.line))),i.iter(c,r.line+1,(function(e){return e==o.maxLine?(l=!0,!0):void 0}))),i.sel.contains(t.from,t.to)>-1&&Eo(e),Ui(i,t,n,s(e)),e.options.lineWrapping||(i.iter(c,a.line+t.text.length,(function(e){var t=u(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,l=!1)})),l&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,a.line),Pe(e,400);var d=t.text.length-(r.line-a.line)-1;t.full?Rt(e):a.line!=r.line||1!=t.text.length||ji(e.doc,t)?Rt(e,a.line,r.line+1,d):Nt(e,a.line,"text");var p=So(e,"changes"),h=So(e,"change");if(h||p){var f={from:a,to:r,text:t.text,removed:t.removed,origin:t.origin};h&&wo(e,"change",e,f),p&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function xn(e,t,n,i,o){if(i||(i=n),Ls(i,n)<0){var s=i;i=n,n=s}"string"==typeof t&&(t=Va(t)),Tn(e,{from:n,to:i,text:t,origin:o})}function $n(e,t){if(!To(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null;if(t.top+i.top<0?o=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!_s){var s=Bo("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-je(e.display))+"px; height: "+(t.bottom-t.top+Ke(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(o),e.display.lineSpace.removeChild(s)}}}function In(e,t,n,i){null==i&&(i=0);for(var o=0;5>o;o++){var s=!1,a=ut(e,t),r=n&&n!=t?ut(e,n):a,l=Ln(e,Math.min(a.left,r.left),Math.min(a.top,r.top)-i,Math.max(a.left,r.left),Math.max(a.bottom,r.bottom)+i),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(Jt(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(s=!0)),null!=l.scrollLeft&&(en(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return a}function On(e,t,n,i,o){var s=Ln(e,t,n,i,o);null!=s.scrollTop&&Jt(e,s.scrollTop),null!=s.scrollLeft&&en(e,s.scrollLeft)}function Ln(e,t,n,i,o){var s=e.display,a=gt(e.display);0>n&&(n=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:s.scroller.scrollTop,l=Ve(e),c={};o-n>l&&(o=n+l);var d=e.doc.height+Ue(s),u=a>n,p=o>d-a;if(r>n)c.scrollTop=u?0:n;else if(o>r+l){var h=Math.min(n,(p?d:o)-l);h!=r&&(c.scrollTop=h)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:s.scroller.scrollLeft,m=Ge(e)-(e.options.fixedGutter?s.gutters.offsetWidth:0),g=i-t>m;return g&&(i=t+m),10>t?c.scrollLeft=0:f>t?c.scrollLeft=Math.max(0,t-(g?0:10)):i>m+f-3&&(c.scrollLeft=i+(g?0:10)-m),c}function Rn(e,t,n){(null!=t||null!=n)&&Dn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Nn(e){Dn(e);var t=e.getCursor(),n=t,i=t;e.options.lineWrapping||(n=t.ch?Os(t.line,t.ch-1):t,i=Os(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function Dn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=pt(e,t.from),i=pt(e,t.to),o=Ln(e,Math.min(n.left,i.left),Math.min(n.top,i.top)-t.margin,Math.max(n.right,i.right),Math.max(n.bottom,i.bottom)+t.margin);e.scrollTo(o.scrollLeft,o.scrollTop)}}function Mn(e,t,n,i){var o,s=e.doc;null==n&&(n="add"),"smart"==n&&(s.mode.indent?o=He(e,t):n="prev");var a=e.options.tabSize,r=zi(s,t),l=La(r.text,null,a);r.stateAfter&&(r.stateAfter=null);var c,d=r.text.match(/^\s*/)[0];if(i||/\S/.test(r.text)){if("smart"==n&&((c=s.mode.indent(o,r.text.slice(d.length),r.text))==xa||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>s.first?La(zi(s,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var u="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/a);h;--h)p+=a,u+="\t";if(c>p&&(u+=xo(c-p)),u!=d)return xn(s,u,Os(t,0),Os(t,d.length),"+input"),r.stateAfter=null,!0;for(h=0;h<s.sel.ranges.length;h++){var f=s.sel.ranges[h];if(f.head.line==t&&f.head.ch<d.length){Te(s,h,new ue(p=Os(t,d.length),p));break}}}function Pn(e,t,n,i){var o=t,s=t;return"number"==typeof t?s=zi(e,fe(e,t)):o=Qi(t),null==o?null:(i(s,o)&&e.cm&&Nt(e.cm,o,n),s)}function Fn(e,t){for(var n=e.doc.sel.ranges,i=[],o=0;o<n.length;o++){for(var s=t(n[o]);i.length&&Ls(s.from,$o(i).to)<=0;){var a=i.pop();if(Ls(a.from,s.from)<0){s.from=a.from;break}}i.push(s)}kt(e,(function(){for(var t=i.length-1;t>=0;t--)xn(e.doc,"",i[t].from,i[t].to,"+delete");Nn(e)}))}function Bn(e,t,n,i,o){function s(){var t=r+n;return t<e.first||t>=e.first+e.size?u=!1:(r=t,d=zi(e,t))}function a(e){var t=(o?ls:cs)(d,l,n,!0);if(null==t){if(e||!s())return u=!1;l=o?(0>n?ts:es)(d):0>n?d.text.length:0}else l=t;return!0}var r=t.line,l=t.ch,c=n,d=zi(e,r),u=!0;if("char"==i)a();else if("column"==i)a(!0);else if("word"==i||"group"==i)for(var p=null,h="group"==i,f=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>n)||a(!m);m=!1){var g=d.text.charAt(l)||"\n",v=Mo(g,f)?"w":h&&"\n"==g?"n":!h||/\s/.test(g)?null:"p";if(!h||m||v||(v="s"),p&&p!=v){0>n&&(n=1,a());break}if(v&&(p=v),n>0&&!a(!m))break}var b=Oe(e,Os(r,l),c,!0);return u||(b.hitSide=!0),b}function Hn(e,t,n,i){var o,s=e.doc,a=t.left;if("page"==i){var r=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(r-(0>n?1.5:.5)*gt(e.display))}else"line"==i&&(o=n>0?t.bottom+3:t.top-3);for(;;){var l=ft(e,a,o);if(!l.outside)break;if(0>n?0>=o:o>=s.height){l.hitSide=!0;break}o+=5*n}return l}function jn(t,n,i,o){e.defaults[t]=n,i&&(qs[t]=o?function(e,t,n){n!=Ys&&i(e,t,n)}:i)}function Un(e){for(var t,n,i,o,s=e.split(/-(?!$)/),a=(e=s[s.length-1],0);a<s.length-1;a++){var r=s[a];if(/^(cmd|meta|m)$/i.test(r))o=!0;else if(/^a(lt)?$/i.test(r))t=!0;else if(/^(c|ctrl|control)$/i.test(r))n=!0;else{if(!/^s(hift)$/i.test(r))throw new Error("Unrecognized modifier name: "+r);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Wn(e){return"string"==typeof e?oa[e]:e}function Kn(e,t,n,i,o){if(i&&i.shared)return Gn(e,t,n,i,o);if(e.cm&&!e.cm.curOp)return xt(e.cm,Kn)(e,t,n,i,o);var s=new da(e,o),a=Ls(t,n);if(i&&No(i,s,!1),a>0||0==a&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=Bo("span",[s.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(hi(e,t.line,t,n,s)||t.line!=n.line&&hi(e,n.line,t,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");Is=!0}s.addToHistory&&so(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var r,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(e){c&&s.collapsed&&!c.options.lineWrapping&&fi(e)==c.display.maxLine&&(r=!0),s.collapsed&&l!=t.line&&Xi(e,0),Zn(e,new Yn(s,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l})),s.collapsed&&e.iter(t.line,n.line+1,(function(t){bi(e,t)&&Xi(t,0)})),s.clearOnEnter&&Ea(s,"beforeCursorEnter",(function(){s.clear()})),s.readOnly&&($s=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++ca,s.atomic=!0),c){if(r&&(c.curOp.updateMaxLine=!0),s.collapsed)Rt(c,t.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var d=t.line;d<=n.line;d++)Nt(c,d,"text");s.atomic&&$e(c.doc),wo(c,"markerAdded",c,s)}return s}function Gn(e,t,n,i,o){(i=No(i)).shared=!1;var s=[Kn(e,t,n,i,o)],a=s[0],r=i.widgetNode;return Gi(e,(function(e){r&&(i.widgetNode=r.cloneNode(!0)),s.push(Kn(e,me(e,t),me(e,n),i,o));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=$o(s)})),new ua(s,a)}function Vn(e){return e.findMarks(Os(e.first,0),e.clipPos(Os(e.lastLine())),(function(e){return e.parent}))}function zn(e,t){for(var n=0;n<t.length;n++){var i=t[n],o=i.find(),s=e.clipPos(o.from),a=e.clipPos(o.to);if(Ls(s,a)){var r=Kn(e,s,a,i.primary,i.primary.type);i.markers.push(r),r.parent=i}}}function qn(e){for(var t=0;t<e.length;t++){var n=e[t],i=[n.primary.doc];Gi(n.primary.doc,(function(e){i.push(e)}));for(var o=0;o<n.markers.length;o++){var s=n.markers[o];-1==Io(i,s.doc)&&(s.parent=null,n.markers.splice(o--,1))}}}function Yn(e,t,n){this.marker=e,this.from=t,this.to=n}function Xn(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Qn(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Zn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Jn(e,t,n){if(e)for(var i,o=0;o<e.length;++o){var s=e[o],a=s.marker;if(null==s.from||(a.inclusiveLeft?s.from<=t:s.from<t)||s.from==t&&"bookmark"==a.type&&(!n||!s.marker.insertLeft)){var r=null==s.to||(a.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push(new Yn(a,s.from,r?null:s.to))}}return i}function ei(e,t,n){if(e)for(var i,o=0;o<e.length;++o){var s=e[o],a=s.marker;if(null==s.to||(a.inclusiveRight?s.to>=t:s.to>t)||s.from==t&&"bookmark"==a.type&&(!n||s.marker.insertLeft)){var r=null==s.from||(a.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push(new Yn(a,r?null:s.from-t,null==s.to?null:s.to-t))}}return i}function ti(e,t){if(t.full)return null;var n=ve(e,t.from.line)&&zi(e,t.from.line).markedSpans,i=ve(e,t.to.line)&&zi(e,t.to.line).markedSpans;if(!n&&!i)return null;var o=t.from.ch,s=t.to.ch,a=0==Ls(t.from,t.to),r=Jn(n,o,a),l=ei(i,s,a),c=1==t.text.length,d=$o(t.text).length+(c?o:0);if(r)for(var u=0;u<r.length;++u)null==(p=r[u]).to&&((h=Xn(l,p.marker))?c&&(p.to=null==h.to?null:h.to+d):p.to=o);if(l)for(u=0;u<l.length;++u){var p,h;null!=(p=l[u]).to&&(p.to+=d),null==p.from?(h=Xn(r,p.marker))||(p.from=d,c&&(r||(r=[])).push(p)):(p.from+=d,c&&(r||(r=[])).push(p))}r&&(r=ni(r)),l&&l!=r&&(l=ni(l));var f=[r];if(!c){var m,g=t.text.length-2;if(g>0&&r)for(u=0;u<r.length;++u)null==r[u].to&&(m||(m=[])).push(new Yn(r[u].marker,null,null));for(u=0;g>u;++u)f.push(m);f.push(l)}return f}function ni(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function ii(e,t){var n=po(e,t),i=ti(e,t);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var s=n[o],a=i[o];if(s&&a)e:for(var r=0;r<a.length;++r){for(var l=a[r],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue e;s.push(l)}else a&&(n[o]=a)}return n}function oi(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=Io(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var o=[{from:t,to:n}],s=0;s<i.length;++s)for(var a=i[s],r=a.find(0),l=0;l<o.length;++l){var c=o[l];if(!(Ls(c.to,r.from)<0||Ls(c.from,r.to)>0)){var d=[l,1],u=Ls(c.from,r.from),p=Ls(c.to,r.to);(0>u||!a.inclusiveLeft&&!u)&&d.push({from:c.from,to:r.from}),(p>0||!a.inclusiveRight&&!p)&&d.push({from:r.to,to:c.to}),o.splice.apply(o,d),l+=d.length-1}}return o}function si(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function ai(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function ri(e){return e.inclusiveLeft?-1:0}function li(e){return e.inclusiveRight?1:0}function ci(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),o=t.find(),s=Ls(i.from,o.from)||ri(e)-ri(t);if(s)return-s;var a=Ls(i.to,o.to)||li(e)-li(t);return a||t.id-e.id}function di(e,t){var n,i=Is&&e.markedSpans;if(i)for(var o,s=0;s<i.length;++s)(o=i[s]).marker.collapsed&&null==(t?o.from:o.to)&&(!n||ci(n,o.marker)<0)&&(n=o.marker);return n}function ui(e){return di(e,!0)}function pi(e){return di(e,!1)}function hi(e,t,n,i,o){var s=zi(e,t),a=Is&&s.markedSpans;if(a)for(var r=0;r<a.length;++r){var l=a[r];if(l.marker.collapsed){var c=l.marker.find(0),d=Ls(c.from,n)||ri(l.marker)-ri(o),u=Ls(c.to,i)||li(l.marker)-li(o);if(!(d>=0&&0>=u||0>=d&&u>=0)&&(0>=d&&(Ls(c.to,n)>0||l.marker.inclusiveRight&&o.inclusiveLeft)||d>=0&&(Ls(c.from,i)<0||l.marker.inclusiveLeft&&o.inclusiveRight)))return!0}}}function fi(e){for(var t;t=ui(e);)e=t.find(-1,!0).line;return e}function mi(e){for(var t,n;t=pi(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function gi(e,t){var n=zi(e,t),i=fi(n);return n==i?t:Qi(i)}function vi(e,t){if(t>e.lastLine())return t;var n,i=zi(e,t);if(!bi(e,i))return t;for(;n=pi(i);)i=n.find(1,!0).line;return Qi(i)+1}function bi(e,t){var n=Is&&t.markedSpans;if(n)for(var i,o=0;o<n.length;++o)if((i=n[o]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&yi(e,t,i))return!0}}function yi(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return yi(e,i.line,Xn(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o,s=0;s<t.markedSpans.length;++s)if((o=t.markedSpans[s]).marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&yi(e,t,o))return!0}function wi(e,t,n){Ji(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Rn(e,null,n)}function _i(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ba(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),jo(t.display.measure,Bo("div",[e.node],null,n))}return e.height=e.node.offsetHeight}function Ti(e,t,n,i){var o=new pa(e,n,i),s=e.cm;return s&&o.noHScroll&&(s.display.alignWidgets=!0),Pn(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==o.insertAt?n.push(o):n.splice(Math.min(n.length-1,Math.max(0,o.insertAt)),0,o),o.line=t,s&&!bi(e,t)){var i=Ji(t)<e.scrollTop;Xi(t,t.height+_i(o)),i&&Rn(s,null,o.height),s.curOp.forceUpdate=!0}return!0})),o}function Ei(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),si(e),ai(e,n);var o=i?i(e):1;o!=e.height&&Xi(e,o)}function Si(e){e.parent=null,si(e)}function Ai(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Ci(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var i=e.innerMode(t,n);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function ki(t,n,i,o){for(var s=0;10>s;s++){o&&(o[0]=e.innerMode(t,i).mode);var a=t.token(n,i);if(n.pos>n.start)return a}throw new Error("Mode "+t.name+" failed to advance stream.")}function xi(e,t,n,i){function o(e){return{start:u.start,end:u.pos,string:u.current(),type:s||null,state:e?ta(a.mode,d):d}}var s,a=e.doc,r=a.mode;t=me(a,t);var l,c=zi(a,t.line),d=He(e,t.line,n),u=new la(c.text,e.options.tabSize);for(i&&(l=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,s=ki(r,u,d),i&&l.push(o(!0));return i?l:o()}function $i(e,t,n,i,o,s,a){var r=n.flattenSpans;null==r&&(r=e.options.flattenSpans);var l,c=0,d=null,u=new la(t,e.options.tabSize),p=e.options.addModeClass&&[null];for(""==t&&Ai(Ci(n,i),s);!u.eol();){if(u.pos>e.options.maxHighlightLength?(r=!1,a&&Li(e,t,i,u.pos),u.pos=t.length,l=null):l=Ai(ki(n,u,i,p),s),p){var h=p[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!r||d!=l){for(;c<u.start;)o(c=Math.min(u.start,c+5e4),d);d=l}u.start=u.pos}for(;c<u.pos;){var f=Math.min(u.pos,c+5e4);o(f,d),c=f}}function Ii(e,t,n,i){var o=[e.state.modeGen],s={};$i(e,t.text,e.doc.mode,n,(function(e,t){o.push(e,t)}),s,i);for(var a=0;a<e.state.overlays.length;++a){var r=e.state.overlays[a],l=1,c=0;$i(e,t.text,r.mode,!0,(function(e,t){for(var n=l;e>c;){var i=o[l];i>e&&o.splice(l,1,e,o[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(r.opaque)o.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var s=o[n+1];o[n+1]=(s?s+" ":"")+"cm-overlay "+t}}),s)}return{styles:o,classes:s.bgClass||s.textClass?s:null}}function Oi(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=Ii(e,t,t.stateAfter=He(e,Qi(t)));t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function Li(e,t,n,i){var o=e.doc.mode,s=new la(t,e.options.tabSize);for(s.start=s.pos=i||0,""==t&&Ci(o,n);!s.eol()&&s.pos<=e.options.maxHighlightLength;)ki(o,s,n),s.start=s.pos}function Ri(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?ma:fa;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ni(e,t){var n=Bo("span",null,null,ms?"padding-right: .1px":null),i={pre:Bo("pre",[n]),content:n,col:0,pos:0,cm:e,splitSpaces:(hs||ms)&&e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var s,a=o?t.rest[o-1]:t.line;i.pos=0,i.addToken=Mi,Yo(e.display.measure)&&(s=eo(a))&&(i.addToken=Fi(i.addToken,s)),i.map=[],Hi(a,i,Oi(e,a,t!=e.display.externalMeasured&&Qi(a))),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=Ko(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=Ko(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(qo(e.display.measure))),0==o?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return ms&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),Aa(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=Ko(i.pre.className,i.textClass||"")),i}function Di(e){var t=Bo("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Mi(e,t,n,i,o,s,a){if(t){var r=e.splitSpaces?t.replace(/ {3,}/g,Pi):t,l=e.cm.state.specialChars,c=!1;if(l.test(t))for(var d=document.createDocumentFragment(),u=0;;){l.lastIndex=u;var p=l.exec(t),h=p?p.index-u:t.length-u;if(h){var f=document.createTextNode(r.slice(u,u+h));d.appendChild(hs&&9>fs?Bo("span",[f]):f),e.map.push(e.pos,e.pos+h,f),e.col+=h,e.pos+=h}if(!p)break;if(u+=h+1,"\t"==p[0]){var m=e.cm.options.tabSize,g=m-e.col%m;(f=d.appendChild(Bo("span",xo(g),"cm-tab"))).setAttribute("role","presentation"),f.setAttribute("cm-text","\t"),e.col+=g}else(f=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),d.appendChild(hs&&9>fs?Bo("span",[f]):f),e.col+=1;e.map.push(e.pos,e.pos+1,f),e.pos++}else e.col+=t.length,d=document.createTextNode(r),e.map.push(e.pos,e.pos+t.length,d),hs&&9>fs&&(c=!0),e.pos+=t.length;if(n||i||o||c||a){var v=n||"";i&&(v+=i),o&&(v+=o);var b=Bo("span",[d],v,a);return s&&(b.title=s),e.content.appendChild(b)}e.content.appendChild(d)}}function Pi(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+" "}function Fi(e,t){return function(n,i,o,s,a,r,l){o=o?o+" cm-force-border":"cm-force-border";for(var c=n.pos,d=c+i.length;;){for(var u=0;u<t.length;u++){var p=t[u];if(p.to>c&&p.from<=c)break}if(p.to>=d)return e(n,i,o,s,a,r,l);e(n,i.slice(0,p.to-c),o,s,null,r,l),s=null,i=i.slice(p.to-c),c=p.to}}}function Bi(e,t,n,i){var o=!i&&n.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!i&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t}function Hi(e,t,n){var i=e.markedSpans,o=e.text,s=0;if(i)for(var a,r,l,c,d,u,p,h=o.length,f=0,m=1,g="",v=0;;){if(v==f){l=c=d=u=r="",p=null,v=1/0;for(var b=[],y=0;y<i.length;++y){var w=i[y],_=w.marker;"bookmark"==_.type&&w.from==f&&_.widgetNode?b.push(_):w.from<=f&&(null==w.to||w.to>f||_.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,c=""),_.className&&(l+=" "+_.className),_.css&&(r=_.css),_.startStyle&&w.from==f&&(d+=" "+_.startStyle),_.endStyle&&w.to==v&&(c+=" "+_.endStyle),_.title&&!u&&(u=_.title),_.collapsed&&(!p||ci(p.marker,_)<0)&&(p=w)):w.from>f&&v>w.from&&(v=w.from)}if(p&&(p.from||0)==f){if(Bi(t,(null==p.to?h+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}if(!p&&b.length)for(y=0;y<b.length;++y)Bi(t,0,b[y])}if(f>=h)break;for(var T=Math.min(h,v);;){if(g){var E=f+g.length;if(!p){var S=E>T?g.slice(0,T-f):g;t.addToken(t,S,a?a+l:l,d,f+S.length==v?c:"",u,r)}if(E>=T){g=g.slice(T-f),f=T;break}f=E,d=""}g=o.slice(s,s=n[m++]),a=Ri(n[m++],t.cm.options)}}else for(m=1;m<n.length;m+=2)t.addToken(t,o.slice(s,s=n[m]),Ri(n[m+1],t.cm.options))}function ji(e,t){return 0==t.from.ch&&0==t.to.ch&&""==$o(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ui(e,t,n,i){function o(e){return n?n[e]:null}function s(e,n,o){Ei(e,n,o,i),wo(e,"change",e,t)}function a(e,t){for(var n=e,s=[];t>n;++n)s.push(new ha(c[n],o(n),i));return s}var r=t.from,l=t.to,c=t.text,d=zi(e,r.line),u=zi(e,l.line),p=$o(c),h=o(c.length-1),f=l.line-r.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(ji(e,t)){var m=a(0,c.length-1);s(u,u.text,h),f&&e.remove(r.line,f),m.length&&e.insert(r.line,m)}else d==u?1==c.length?s(d,d.text.slice(0,r.ch)+p+d.text.slice(l.ch),h):((m=a(1,c.length-1)).push(new ha(p+d.text.slice(l.ch),h,i)),s(d,d.text.slice(0,r.ch)+c[0],o(0)),e.insert(r.line+1,m)):1==c.length?(s(d,d.text.slice(0,r.ch)+c[0]+u.text.slice(l.ch),o(0)),e.remove(r.line+1,f)):(s(d,d.text.slice(0,r.ch)+c[0],o(0)),s(u,p+u.text.slice(l.ch),h),m=a(1,c.length-1),f>1&&e.remove(r.line+1,f-1),e.insert(r.line+1,m));wo(e,"change",e,t)}function Wi(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Ki(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var o=e[i];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function Gi(e,t,n){function i(e,o,s){if(e.linked)for(var a=0;a<e.linked.length;++a){var r=e.linked[a];if(r.doc!=o){var l=s&&r.sharedHist;(!n||l)&&(t(r.doc,l),i(r.doc,e,l))}}}i(e,null,!0)}function Vi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),n(e),e.options.lineWrapping||p(e),e.options.mode=t.modeOption,Rt(e)}function zi(e,t){if(0>(t-=e.first)||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var o=n.children[i],s=o.chunkSize();if(s>t){n=o;break}t-=s}return n.lines[t]}function qi(e,t,n){var i=[],o=t.line;return e.iter(t.line,n.line+1,(function(e){var s=e.text;o==n.line&&(s=s.slice(0,n.ch)),o==t.line&&(s=s.slice(t.ch)),i.push(s),++o})),i}function Yi(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function Xi(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Qi(e){if(null==e.parent)return null;for(var t=e.parent,n=Io(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var o=0;i.children[o]!=t;++o)n+=i.children[o].chunkSize();return n+t.first}function Zi(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var o=e.children[i],s=o.height;if(s>t){e=o;continue e}t-=s,n+=o.chunkSize()}return n}while(!e.lines);for(i=0;i<e.lines.length;++i){var a=e.lines[i].height;if(a>t)break;t-=a}return n+i}function Ji(e){for(var t=0,n=(e=fi(e)).parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==e)break;t+=o.height}for(var s=n.parent;s;s=(n=s).parent)for(i=0;i<s.children.length;++i){var a=s.children[i];if(a==n)break;t+=a.height}return t}function eo(e){var t=e.order;return null==t&&(t=e.order=Za(e.text)),t}function to(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function no(e,t){var n={from:z(t.from),to:Vs(t),text:qi(e,t.from,t.to)};return co(e,n,t.from.line,t.to.line+1),Gi(e,(function(e){co(e,n,t.from.line,t.to.line+1)}),!0),n}function io(e){for(;e.length&&$o(e).ranges;)e.pop()}function oo(e,t){return t?(io(e.done),$o(e.done)):e.done.length&&!$o(e.done).ranges?$o(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),$o(e.done)):void 0}function so(e,t,n,i){var o=e.history;o.undone.length=0;var s,a=+new Date;if((o.lastOp==i||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&o.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(s=oo(o,o.lastOp==i))){var r=$o(s.changes);0==Ls(t.from,t.to)&&0==Ls(t.from,r.to)?r.to=Vs(t):s.changes.push(no(e,t))}else{var l=$o(o.done);for(l&&l.ranges||lo(e.sel,o.done),s={changes:[no(e,t)],generation:o.generation},o.done.push(s);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=a,o.lastOp=o.lastSelOp=i,o.lastOrigin=o.lastSelOrigin=t.origin,r||Aa(e,"historyAdded")}function ao(e,t,n,i){var o=t.charAt(0);return"*"==o||"+"==o&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ro(e,t,n,i){var o=e.history,s=i&&i.origin;n==o.lastSelOp||s&&o.lastSelOrigin==s&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==s||ao(e,s,$o(o.done),t))?o.done[o.done.length-1]=t:lo(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=s,o.lastSelOp=n,i&&!1!==i.clearRedo&&io(o.undone)}function lo(e,t){var n=$o(t);n&&n.ranges&&n.equals(e)||t.push(e)}function co(e,t,n,i){var o=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((o||(o=t["spans_"+e.id]={}))[s]=n.markedSpans),++s}))}function uo(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function po(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=0,o=[];i<t.text.length;++i)o.push(uo(n[i]));return o}function ho(e,t,n){for(var i=0,o=[];i<e.length;++i){var s=e[i];if(s.ranges)o.push(n?de.prototype.deepCopy.call(s):s);else{var a=s.changes,r=[];o.push({changes:r});for(var l=0;l<a.length;++l){var c,d=a[l];if(r.push({from:d.from,to:d.to,text:d.text}),t)for(var u in d)(c=u.match(/^spans_(\d+)$/))&&Io(t,Number(c[1]))>-1&&($o(r)[u]=d[u],delete d[u])}}}return o}function fo(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function mo(e,t,n,i){for(var o=0;o<e.length;++o){var s=e[o],a=!0;if(s.ranges){s.copied||((s=e[o]=s.deepCopy()).copied=!0);for(var r=0;r<s.ranges.length;r++)fo(s.ranges[r].anchor,t,n,i),fo(s.ranges[r].head,t,n,i)}else{for(r=0;r<s.changes.length;++r){var l=s.changes[r];if(n<l.from.line)l.from=Os(l.from.line+i,l.from.ch),l.to=Os(l.to.line+i,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,o+1),o=0)}}}function go(e,t){var n=t.from.line,i=t.to.line,o=t.text.length-(i-n)-1;mo(e.done,n,i,o),mo(e.undone,n,i,o)}function vo(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function bo(e){return e.target||e.srcElement}function yo(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Ss&&e.ctrlKey&&1==t&&(t=3),t}function wo(e,t){function n(e){return function(){e.apply(null,s)}}var i=e._handlers&&e._handlers[t];if(i){var o,s=Array.prototype.slice.call(arguments,2);Fs?o=Fs.delayedCallbacks:Ca?o=Ca:(o=Ca=[],setTimeout(_o,0));for(var a=0;a<i.length;++a)o.push(n(i[a]))}}function _o(){var e=Ca;Ca=null;for(var t=0;t<e.length;++t)e[t]()}function To(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Aa(e,n||t.type,e,t),vo(t)||t.codemirrorIgnore}function Eo(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==Io(n,t[i])&&n.push(t[i])}function So(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Ao(e){e.prototype.on=function(e,t){Ea(this,e,t)},e.prototype.off=function(e,t){Sa(this,e,t)}}function Co(){this.id=null}function ko(e,t,n){for(var i=0,o=0;;){var s=e.indexOf("\t",i);-1==s&&(s=e.length);var a=s-i;if(s==e.length||o+a>=t)return i+Math.min(a,t-o);if(o+=s-i,i=s+1,(o+=n-o%n)>=t)return i}}function xo(e){for(;Ra.length<=e;)Ra.push($o(Ra)+" ");return Ra[e]}function $o(e){return e[e.length-1]}function Io(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Oo(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Lo(){}function Ro(e,t){var n;return Object.create?n=Object.create(e):(Lo.prototype=e,n=new Lo),t&&No(t,n),n}function No(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function Do(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Mo(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Pa(e))||t.test(e):Pa(e)}function Po(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Fo(e){return e.charCodeAt(0)>=768&&Fa.test(e)}function Bo(e,t,n,i){var o=document.createElement(e);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)o.appendChild(t[s]);return o}function Ho(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function jo(e,t){return Ho(e).appendChild(t)}function Uo(){return document.activeElement}function Wo(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Ko(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!Wo(n[i]).test(t)&&(t+=" "+n[i]);return t}function Go(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&e(i)}}function Vo(){Ka||(zo(),Ka=!0)}function zo(){var e;Ea(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Go(Ut)}),100))})),Ea(window,"blur",(function(){Go(fn)}))}function qo(e){if(null==Ha){var t=Bo("span","​");jo(e,Bo("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ha=t.offsetWidth<=1&&t.offsetHeight>2&&!(hs&&8>fs))}var n=Ha?Bo("span","​"):Bo("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Yo(e){if(null!=ja)return ja;var t=jo(e,document.createTextNode("AخA")),n=Da(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var i=Da(t,1,2).getBoundingClientRect();return ja=i.right-n.right<3}function Xo(e){if(null!=Ya)return Ya;var t=jo(e,Bo("span","x")),n=t.getBoundingClientRect(),i=Da(t,0,1).getBoundingClientRect();return Ya=Math.abs(n.left-i.left)>1}function Qo(e,t,n,i){if(!e)return i(t,n,"ltr");for(var o=!1,s=0;s<e.length;++s){var a=e[s];(a.from<n&&a.to>t||t==n&&a.to==t)&&(i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),o=!0)}o||i(t,n,"ltr")}function Zo(e){return e.level%2?e.to:e.from}function Jo(e){return e.level%2?e.from:e.to}function es(e){var t=eo(e);return t?Zo(t[0]):0}function ts(e){var t=eo(e);return t?Jo($o(t)):e.text.length}function ns(e,t){var n=zi(e.doc,t),i=fi(n);i!=n&&(t=Qi(i));var o=eo(i),s=o?o[0].level%2?ts(i):es(i):0;return Os(t,s)}function is(e,t){for(var n,i=zi(e.doc,t);n=pi(i);)i=n.find(1,!0).line,t=null;var o=eo(i),s=o?o[0].level%2?es(i):ts(i):i.text.length;return Os(null==t?Qi(i):t,s)}function os(e,t){var n=ns(e,t.line),i=zi(e.doc,n.line),o=eo(i);if(!o||0==o[0].level){var s=Math.max(0,i.text.search(/\S/)),a=t.line==n.line&&t.ch<=s&&t.ch;return Os(n.line,a?0:s)}return n}function ss(e,t,n){var i=e[0].level;return t==i||n!=i&&n>t}function as(e,t){Qa=null;for(var n,i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;if(o.from==t||o.to==t){if(null!=n)return ss(e,o.level,e[n].level)?(o.from!=o.to&&(Qa=n),i):(o.from!=o.to&&(Qa=i),n);n=i}}return n}function rs(e,t,n,i){if(!i)return t+n;do{t+=n}while(t>0&&Fo(e.text.charAt(t)));return t}function ls(e,t,n,i){var o=eo(e);if(!o)return cs(e,t,n,i);for(var s=as(o,t),a=o[s],r=rs(e,t,a.level%2?-n:n,i);;){if(r>a.from&&r<a.to)return r;if(r==a.from||r==a.to)return as(o,r)==s?r:n>0==(a=o[s+=n]).level%2?a.to:a.from;if(!(a=o[s+=n]))return null;r=n>0==a.level%2?rs(e,a.to,-1,i):rs(e,a.from,1,i)}}function cs(e,t,n,i){var o=t+n;if(i)for(;o>0&&Fo(e.text.charAt(o));)o+=n;return 0>o||o>e.text.length?null:o}var ds=/gecko\/\d/i.test(navigator.userAgent),us=/MSIE \d/.test(navigator.userAgent),ps=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),hs=us||ps,fs=hs&&(us?document.documentMode||6:ps[1]),ms=/WebKit\//.test(navigator.userAgent),gs=ms&&/Qt\/\d+\.\d+/.test(navigator.userAgent),vs=/Chrome\//.test(navigator.userAgent),bs=/Opera\//.test(navigator.userAgent),ys=/Apple Computer/.test(navigator.vendor),ws=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),_s=/PhantomJS/.test(navigator.userAgent),Ts=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Es=Ts||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Ss=Ts||/Mac/.test(navigator.platform),As=/win/i.test(navigator.platform),Cs=bs&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Cs&&(Cs=Number(Cs[1])),Cs&&Cs>=15&&(bs=!1,ms=!0);var ks=Ss&&(gs||bs&&(null==Cs||12.11>Cs)),xs=ds||hs&&fs>=9,$s=!1,Is=!1;m.prototype=No({update:function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var o=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+s+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&e.clientHeight>0&&(0==i&&this.overlayHack(),this.checkedOverlay=!0),{right:n?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=Ss&&!ws?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,n=function(e){bo(e)!=t.vert&&bo(e)!=t.horiz&&xt(t.cm,Gt)(e)};Ea(this.vert,"mousedown",n),Ea(this.horiz,"mousedown",n)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},m.prototype),g.prototype=No({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),e.scrollbarModel={native:m,null:g},A.prototype.signal=function(e,t){So(e,t)&&this.events.push(arguments)},A.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Aa.apply(null,this.events[e])};var Os=e.Pos=function(e,t){return this instanceof Os?(this.line=e,void(this.ch=t)):new Os(e,t)},Ls=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Rs=null;ne.prototype=No({init:function(e){function t(e){if(i.somethingSelected())Rs=i.getSelections(),n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,s.value=Rs.join("\n"),Na(s));else{if(!i.options.lineWiseCopyCut)return;var t=ee(i);Rs=t.text,"cut"==e.type?i.setSelections(t.ranges,null,$a):(n.prevInput="",s.value=t.text.join("\n"),Na(s))}"cut"==e.type&&(i.state.cutIncoming=!0)}var n=this,i=this.cm,o=this.wrapper=ie(),s=this.textarea=o.firstChild;e.wrapper.insertBefore(o,e.wrapper.firstChild),Ts&&(s.style.width="0px"),Ea(s,"input",(function(){hs&&fs>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()})),Ea(s,"paste",(function(){if(ms&&!i.state.fakedLastChar&&!(new Date-i.state.lastMiddleDown<200)){var e=s.selectionStart,t=s.selectionEnd;s.value+="$",s.selectionEnd=t,s.selectionStart=e,i.state.fakedLastChar=!0}i.state.pasteIncoming=!0,n.fastPoll()})),Ea(s,"cut",t),Ea(s,"copy",t),Ea(e.scroller,"paste",(function(t){Wt(e,t)||(i.state.pasteIncoming=!0,n.focus())})),Ea(e.lineSpace,"selectstart",(function(t){Wt(e,t)||wa(t)})),Ea(s,"compositionstart",(function(){var e=i.getCursor("from");n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),Ea(s,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},prepareSelection:function(){var e=this.cm,t=e.display,n=e.doc,i=Re(e);if(e.options.moveInputWithCursor){var o=ut(e,n.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+a.top-s.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+a.left-s.left))}return i},showSelection:function(e){var t=this.cm.display;jo(t.cursorDiv,e.cursors),jo(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,n,i=this.cm,o=i.doc;if(i.somethingSelected()){this.prevInput="";var s=o.sel.primary(),a=(t=qa&&(s.to().line-s.from().line>100||(n=i.getSelection()).length>1e3))?"-":n||i.getSelection();this.textarea.value=a,i.state.focused&&Na(this.textarea),hs&&fs>=9&&(this.hasSelection=a)}else e||(this.prevInput=this.textarea.value="",hs&&fs>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Es||Uo()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},fastPoll:function(){function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(!e.state.focused||za(t)&&!n||Q(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(hs&&fs>=9&&this.hasSelection===i||Ss&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var s=0,a=Math.min(n.length,i.length);a>s&&n.charCodeAt(s)==i.charCodeAt(s);)++s;var r=this;return kt(e,(function(){Z(e,i.slice(s),n.length-s,null,r.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?t.value=r.prevInput="":r.prevInput=i,r.composing&&(r.composing.range.clear(),r.composing.range=e.markText(r.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){hs&&fs>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=a.selectionStart){var e=o.somethingSelected(),t="​"+(e?a.value:"");a.value="⇚",a.value=t,i.prevInput=e?"":"​",a.selectionStart=1,a.selectionEnd=t.length,s.selForContextMenu=o.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.position="relative",a.style.cssText=c,hs&&9>fs&&s.scrollbars.setScrollTop(s.scroller.scrollTop=l),null!=a.selectionStart){(!hs||hs&&9>fs)&&t();var e=0,n=function(){s.selForContextMenu==o.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&"​"==i.prevInput?xt(o,ia.selectAll)(o):e++<10?s.detectingSelectAll=setTimeout(n,500):s.input.reset()};s.detectingSelectAll=setTimeout(n,200)}}var i=this,o=i.cm,s=o.display,a=i.textarea,r=Kt(o,e),l=s.scroller.scrollTop;if(r&&!bs){o.options.resetSelectionOnContextMenu&&-1==o.doc.sel.contains(r)&&xt(o,Ce)(o.doc,he(r),$a);var c=a.style.cssText;if(i.wrapper.style.position="absolute",a.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(hs?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ms)var d=window.scrollY;if(s.input.focus(),ms&&window.scrollTo(null,d),s.input.reset(),o.somethingSelected()||(a.value=i.prevInput=" "),i.contextMenuPending=!0,s.selForContextMenu=o.doc.sel,clearTimeout(s.detectingSelectAll),hs&&fs>=9&&t(),xs){Ta(e);var u=function(){Sa(window,"mouseup",u),setTimeout(n,20)};Ea(window,"mouseup",u)}else setTimeout(n,50)}},setUneditable:Lo,needsContentAttribute:!1},ne.prototype),oe.prototype=No({init:function(e){function t(e){if(i.somethingSelected())Rs=i.getSelections(),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=ee(i);Rs=t.text,"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,$a),i.replaceSelection("",null,"cut")}))}if(e.clipboardData&&!Ts)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Rs.join("\n"));else{var n=ie(),o=n.firstChild;i.display.lineSpace.insertBefore(n,i.display.lineSpace.firstChild),o.value=Rs.join("\n");var s=document.activeElement;Na(o),setTimeout((function(){i.display.lineSpace.removeChild(n),s.focus()}),50)}}var n=this,i=n.cm,o=n.div=e.lineDiv;o.contentEditable="true",te(o),Ea(o,"paste",(function(e){var t=e.clipboardData&&e.clipboardData.getData("text/plain");t&&(e.preventDefault(),i.replaceSelection(t,null,"paste"))})),Ea(o,"compositionstart",(function(e){var t=e.data;if(n.composing={sel:i.doc.sel,data:t,startData:t},t){var o=i.doc.sel.primary(),s=i.getLine(o.head.line).indexOf(t,Math.max(0,o.head.ch-t.length));s>-1&&s<=o.head.ch&&(n.composing.sel=he(Os(o.head.line,s),Os(o.head.line,s+t.length)))}})),Ea(o,"compositionupdate",(function(e){n.composing.data=e.data})),Ea(o,"compositionend",(function(e){var t=n.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout((function(){t.handled||n.applyComposition(t),n.composing==t&&(n.composing=null)}),50))})),Ea(o,"touchstart",(function(){n.forceCompositionEnd()})),Ea(o,"input",(function(){n.composing||n.pollContent()||kt(n.cm,(function(){Rt(i)}))})),Ea(o,"copy",t),Ea(o,"cut",t)},prepareSelection:function(){var e=Re(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=re(this.cm,e.anchorNode,e.anchorOffset),i=re(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!i||i.bad||0!=Ls(Y(n,i),t.from())||0!=Ls(q(n,i),t.to())){var o=se(this.cm,t.from()),s=se(this.cm,t.to());if(o||s){var a=this.cm.display.view,r=e.rangeCount&&e.getRangeAt(0);if(o){if(!s){var l=a[a.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;s={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else o={node:a[0].measure.map[2],offset:0};try{var d=Da(o.node,o.offset,s.offset,s.node)}catch(e){}d&&(e.removeAllRanges(),e.addRange(d),r&&null==e.anchorNode?e.addRange(r):ds&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){e.cm.curOp.selectionChanged=!0}))}),20)},showMultipleSelections:function(e){jo(this.cm.display.cursorDiv,e.cursors),jo(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ba(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():kt(this.cm,(function(){t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=re(t,e.anchorNode,e.anchorOffset),i=re(t,e.focusNode,e.focusOffset);n&&i&&kt(t,(function(){Ce(t.doc,he(n,i),$a),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}},pollContent:function(){var e,t=this.cm,n=t.display,i=t.doc.sel.primary(),o=i.from(),s=i.to();if(o.line<n.viewFrom||s.line>n.viewTo-1)return!1;if(o.line==n.viewFrom||0==(e=Mt(t,o.line)))var a=Qi(n.view[0].line),r=n.view[0].node;else a=Qi(n.view[e].line),r=n.view[e-1].node.nextSibling;var l=Mt(t,s.line);if(l==n.view.length-1)var c=n.viewTo-1,d=n.view[l].node;else c=Qi(n.view[l+1].line)-1,d=n.view[l+1].node.previousSibling;for(var u=Va(ce(t,r,d,a,c)),p=qi(t.doc,Os(a,0),Os(c,zi(t.doc,c).text.length));u.length>1&&p.length>1;)if($o(u)==$o(p))u.pop(),p.pop(),c--;else{if(u[0]!=p[0])break;u.shift(),p.shift(),a++}for(var h=0,f=0,m=u[0],g=p[0],v=Math.min(m.length,g.length);v>h&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var b=$o(u),y=$o(p),w=Math.min(b.length-(1==u.length?h:0),y.length-(1==p.length?h:0));w>f&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;u[u.length-1]=b.slice(0,b.length-f),u[0]=u[0].slice(h);var _=Os(a,h),T=Os(c,p.length?$o(p).length-f:0);return u.length>1||u[0]||Ls(_,T)?(xn(t.doc,u,_,T,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){e.data&&e.data!=e.startData&&xt(this.cm,Z)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.setAttribute("contenteditable","false")},onKeyPress:function(e){e.preventDefault(),xt(this.cm,Z)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},onContextMenu:Lo,resetPosition:Lo,needsContentAttribute:!0},oe.prototype),e.inputStyles={textarea:ne,contenteditable:oe},de.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(0!=Ls(n.anchor,i.anchor)||0!=Ls(n.head,i.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ue(z(this.ranges[t].anchor),z(this.ranges[t].head));return new de(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(Ls(t,i.from())>=0&&Ls(e,i.to())<=0)return n}return-1}},ue.prototype={from:function(){return Y(this.anchor,this.head)},to:function(){return q(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Ns,Ds,Ms,Ps={left:0,right:0,top:0,bottom:0},Fs=null,Bs=0,Hs=0,js=0,Us=null;hs?Us=-.53:ds?Us=15:vs?Us=-.7:ys&&(Us=-1/3);var Ws=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};e.wheelEventPixels=function(e){var t=Ws(e);return t.x*=Us,t.y*=Us,t};var Ks=new Co,Gs=null,Vs=e.changeEnd=function(e){return e.text?Os(e.from.line+e.text.length-1,$o(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,i=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,qs.hasOwnProperty(e)&&xt(this,qs[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Wn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:$t((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,Rt(this)})),removeOverlay:$t((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void Rt(this)}})),indentLine:$t((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ve(this.doc,e)&&Mn(this,e,t,n)})),indentSelection:$t((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var o=t[i];if(o.empty())o.head.line>n&&(Mn(this,o.head.line,e,!0),n=o.head.line,i==this.doc.sel.primIndex&&Nn(this));else{var s=o.from(),a=o.to(),r=Math.max(n,s.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=r;n>l;++l)Mn(this,l,e);var c=this.doc.sel.ranges;0==s.ch&&t.length==c.length&&c[i].from().ch>0&&Te(this.doc,i,new ue(s,c[i].to()),$a)}}})),getTokenAt:function(e,t){return xi(this,e,t)},getLineTokens:function(e,t){return xi(this,Os(e),t,!0)},getTokenTypeAt:function(e){e=me(this.doc,e);var t,n=Oi(this,zi(this.doc,e.line)),i=0,o=(n.length-1)/2,s=e.ch;if(0==s)t=n[2];else for(;;){var a=i+o>>1;if((a?n[2*a-1]:0)>=s)o=a;else{if(!(n[2*a+1]<s)){t=n[2*a+2];break}i=a+1}}var r=t?t.indexOf("cm-overlay "):-1;return 0>r?t:0==r?null:t.slice(0,r-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!ea.hasOwnProperty(t))return n;var i=ea[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&n.push(i[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=i[o[t][s]];a&&n.push(a)}else o.helperType&&i[o.helperType]?n.push(i[o.helperType]):i[o.name]&&n.push(i[o.name]);for(s=0;s<i._global.length;s++){var r=i._global[s];r.pred(o,this)&&-1==Io(n,r.val)&&n.push(r.val)}return n},getStateAfter:function(e,t){var n=this.doc;return He(this,(e=fe(n,null==e?n.first+n.size-1:e))+1,t)},cursorCoords:function(e,t){var n=this.doc.sel.primary();return ut(this,null==e?n.head:"object"==typeof e?me(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return dt(this,me(this.doc,e),t||"page")},coordsChar:function(e,t){return ft(this,(e=ct(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=ct(this,{top:e,left:0},t||"page").top,Zi(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),n=zi(this.doc,e)}else n=e;return lt(this,n,{top:0,left:0},t||"page").top+(i?this.doc.height-Ji(n):0)},defaultTextHeight:function(){return gt(this.display)},defaultCharWidth:function(){return vt(this.display)},setGutterMarker:$t((function(e,t,n){return Pn(this.doc,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&Po(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:$t((function(e){var t=this,n=t.doc,i=n.first;n.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Nt(t,i,"gutter"),Po(n.gutterMarkers)&&(n.gutterMarkers=null)),++i}))})),lineInfo:function(e){if("number"==typeof e){if(!ve(this.doc,e))return null;var t=e;if(!(e=zi(this.doc,e)))return null}else if(null==(t=Qi(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,o){var s=this.display,a=(e=ut(this,me(this.doc,e))).bottom,r=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==i)a=e.top;else if("above"==i||"near"==i){var l=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),r+t.offsetWidth>c&&(r=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==o?(r=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?r=0:"middle"==o&&(r=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=r+"px"),n&&On(this,r,a,r+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:$t(ln),triggerOnKeyPress:$t(un),triggerOnKeyUp:dn,execCommand:function(e){return ia.hasOwnProperty(e)?ia[e](this):void 0},triggerElectric:$t((function(e){J(this,e)})),findPosH:function(e,t,n,i){var o=1;0>t&&(o=-1,t=-t);for(var s=0,a=me(this.doc,e);t>s&&!(a=Bn(this.doc,a,o,n,i)).hitSide;++s);return a},moveH:$t((function(e,t){var n=this;n.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Bn(n.doc,i.head,e,t,n.options.rtlMoveVisually):0>e?i.from():i.to()}),Oa)})),deleteH:$t((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Fn(this,(function(n){var o=Bn(i,n.head,e,t,!1);return 0>e?{from:o,to:n.head}:{from:n.head,to:o}}))})),findPosV:function(e,t,n,i){var o=1,s=i;0>t&&(o=-1,t=-t);for(var a=0,r=me(this.doc,e);t>a;++a){var l=ut(this,r,"div");if(null==s?s=l.left:l.left=s,(r=Hn(this,l,o,n)).hitSide)break}return r},moveV:$t((function(e,t){var n=this,i=this.doc,o=[],s=!n.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(a){if(s)return 0>e?a.from():a.to();var r=ut(n,a.head,"div");null!=a.goalColumn&&(r.left=a.goalColumn),o.push(r.left);var l=Hn(n,r,e,t);return"page"==t&&a==i.sel.primary()&&Rn(n,null,dt(n,l,"div").top-r.top),l}),Oa),o.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=o[a]})),findWordAt:function(e){var t=zi(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==t.length)&&n?--n:++i;for(var s=t.charAt(n),a=Mo(s,o)?function(e){return Mo(e,o)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Mo(e)};n>0&&a(t.charAt(n-1));)--n;for(;i<t.length&&a(t.charAt(i));)++i}return new ue(Os(e.line,n),Os(e.line,i))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Wa(this.display.cursorDiv,"CodeMirror-overwrite"):Ua(this.display.cursorDiv,"CodeMirror-overwrite"),Aa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Uo()},scrollTo:$t((function(e,t){(null!=e||null!=t)&&Dn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ke(this)-this.display.barHeight,width:e.scrollWidth-Ke(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:Ge(this)}},scrollIntoView:$t((function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Os(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Dn(this),this.curOp.scrollToPos=e;else{var n=Ln(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}})),setSize:$t((function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var i=this;null!=e&&(i.display.wrapper.style.width=n(e)),null!=t&&(i.display.wrapper.style.height=n(t)),i.options.lineWrapping&&ot(this);var o=i.display.viewFrom;i.doc.iter(o,i.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Nt(i,o,"widget");break}++o})),i.curOp.forceUpdate=!0,Aa(i,"refresh",this)})),operation:function(e){return kt(this,e)},refresh:$t((function(){var e=this.display.cachedTextHeight;Rt(this),this.curOp.forceUpdate=!0,st(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||Math.abs(e-gt(this.display))>.5)&&a(this),Aa(this,"refresh",this)})),swapDoc:$t((function(e){var t=this.doc;return t.cm=null,Vi(this,e),st(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,wo(this,"swapDoc",this,t),t})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ao(e);var zs=e.defaults={},qs=e.optionHandlers={},Ys=e.Init={toString:function(){return"CodeMirror.Init"}};jn("value","",(function(e,t){e.setValue(t)}),!0),jn("mode",null,(function(e,t){e.doc.modeOption=t,n(e)}),!0),jn("indentUnit",2,n,!0),jn("indentWithTabs",!1),jn("smartIndent",!0),jn("tabSize",4,(function(e){i(e),st(e),Rt(e)}),!0),jn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,(function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("\t")?"":"|\t"),"g"),i!=e.Init&&t.refresh()})),jn("specialCharPlaceholder",Di,(function(e){e.refresh()}),!0),jn("electricChars",!0),jn("inputStyle",Es?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),jn("rtlMoveVisually",!As),jn("wholeLineUpdateBefore",!0),jn("theme","default",(function(e){r(e),l(e)}),!0),jn("keyMap","default",(function(t,n,i){var o=Wn(n),s=i!=e.Init&&Wn(i);s&&s.detach&&s.detach(t,o),o.attach&&o.attach(t,s||null)})),jn("extraKeys",null),jn("lineWrapping",!1,o,!0),jn("gutters",[],(function(e){h(e.options),l(e)}),!0),jn("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?S(e.display)+"px":"0",e.refresh()}),!0),jn("coverGutterNextToScrollbar",!1,(function(e){b(e)}),!0),jn("scrollbarStyle","native",(function(e){v(e),b(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),jn("lineNumbers",!1,(function(e){h(e.options),l(e)}),!0),jn("firstLineNumber",1,l,!0),jn("lineNumberFormatter",(function(e){return e}),l,!0),jn("showCursorWhenSelecting",!1,Le,!0),jn("resetSelectionOnContextMenu",!0),jn("lineWiseCopyCut",!0),jn("readOnly",!1,(function(e,t){"nocursor"==t?(fn(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||e.display.input.reset())})),jn("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),jn("dragDrop",!0,jt),jn("cursorBlinkRate",530),jn("cursorScrollMargin",0),jn("cursorHeight",1,Le,!0),jn("singleCursorHeightPerLine",!0,Le,!0),jn("workTime",100),jn("workDelay",100),jn("flattenSpans",!0,i,!0),jn("addModeClass",!1,i,!0),jn("pollInterval",100),jn("undoDepth",200,(function(e,t){e.doc.history.undoDepth=t})),jn("historyEventDelay",1250),jn("viewportMargin",10,(function(e){e.refresh()}),!0),jn("maxHighlightLength",1e4,i,!0),jn("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),jn("tabindex",null,(function(e,t){e.display.input.getField().tabIndex=t||""})),jn("autofocus",null);var Xs=e.modes={},Qs=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Xs[t]=n},e.defineMIME=function(e,t){Qs[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Qs.hasOwnProperty(t))t=Qs[t];else if(t&&"string"==typeof t.name&&Qs.hasOwnProperty(t.name)){var n=Qs[t.name];"string"==typeof n&&(n={name:n}),(t=Ro(n,t)).name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){n=e.resolveMode(n);var i=Xs[n.name];if(!i)return e.getMode(t,"text/plain");var o=i(t,n);if(Zs.hasOwnProperty(n.name)){var s=Zs[n.name];for(var a in s)s.hasOwnProperty(a)&&(o.hasOwnProperty(a)&&(o["_"+a]=o[a]),o[a]=s[a])}if(o.name=n.name,n.helperType&&(o.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)o[a]=n.modeProps[a];return o},e.defineMode("null",(function(){return{token:function(e){e.skipToEnd()}}})),e.defineMIME("text/plain","null");var Zs=e.modeExtensions={};e.extendMode=function(e,t){No(t,Zs.hasOwnProperty(e)?Zs[e]:Zs[e]={})},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){va.prototype[e]=t},e.defineOption=jn;var Js=[];e.defineInitHook=function(e){Js.push(e)};var ea=e.helpers={};e.registerHelper=function(t,n,i){ea.hasOwnProperty(t)||(ea[t]=e[t]={_global:[]}),ea[t][n]=i},e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o),ea[t]._global.push({pred:i,val:o})};var ta=e.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var o=t[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n},na=e.startState=function(e,t,n){return!e.startState||e.startState(t,n)};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var ia=e.commands={selectAll:function(e){e.setSelection(Os(e.firstLine(),0),Os(e.lastLine()),$a)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),$a)},killLine:function(e){Fn(e,(function(t){if(t.empty()){var n=zi(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Os(t.head.line+1,0)}:{from:t.head,to:Os(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){Fn(e,(function(t){return{from:Os(t.from().line,0),to:me(e.doc,Os(t.to().line+1,0))}}))},delLineLeft:function(e){Fn(e,(function(e){return{from:Os(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){Fn(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){Fn(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(Os(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Os(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy((function(t){return ns(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy((function(t){return os(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy((function(t){return is(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy((function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),Oa)},goLineLeft:function(e){e.extendSelectionsBy((function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),Oa)},goLineLeftSmart:function(e){e.extendSelectionsBy((function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?os(e,t.head):i}),Oa)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,o=0;o<n.length;o++){var s=n[o].from(),a=La(e.getLine(s.line),s.ch,i);t.push(new Array(i-a%i+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){kt(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var o=t[i].head,s=zi(e.doc,o.line).text;if(s)if(o.ch==s.length&&(o=new Os(o.line,o.ch-1)),o.ch>0)o=new Os(o.line,o.ch+1),e.replaceRange(s.charAt(o.ch-1)+s.charAt(o.ch-2),Os(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var a=zi(e.doc,o.line-1).text;a&&e.replaceRange(s.charAt(0)+"\n"+a.charAt(a.length-1),Os(o.line-1,a.length-1),Os(o.line,1),"+transpose")}n.push(new ue(o,o))}e.setSelections(n)}))},newlineAndIndent:function(e){kt(e,(function(){for(var t=e.listSelections().length,n=0;t>n;n++){var i=e.listSelections()[n];e.replaceRange("\n",i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0),Nn(e)}}))},toggleOverwrite:function(e){e.toggleOverwrite()}},oa=e.keyMap={};oa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},oa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},oa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},oa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},oa.default=Ss?oa.macDefault:oa.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var o=Oo(n.split(" "),Un),s=0;s<o.length;s++){var a,r;s==o.length-1?(r=o.join(" "),a=i):(r=o.slice(0,s+1).join(" "),a="...");var l=t[r];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+r)}else t[r]=a}delete e[n]}for(var c in t)e[c]=t[c];return e};var sa=e.lookupKey=function(e,t,n,i){var o=(t=Wn(t)).call?t.call(e,i):t[e];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return sa(e,t.fallthrough,n,i);for(var s=0;s<t.fallthrough.length;s++){var a=sa(e,t.fallthrough[s],n,i);if(a)return a}}},aa=e.isModifierKey=function(e){var t="string"==typeof e?e:Xa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},ra=e.keyName=function(e,t){if(bs&&34==e.keyCode&&e.char)return!1;var n=Xa[e.keyCode],i=n;return null!=i&&!e.altGraphKey&&(e.altKey&&"Alt"!=n&&(i="Alt-"+i),(ks?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(i="Ctrl-"+i),(ks?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(i="Cmd-"+i),!t&&e.shiftKey&&"Shift"!=n&&(i="Shift-"+i),i)};e.fromTextArea=function(t,n){function i(){t.value=l.getValue()}if((n=n?No(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var o=Uo();n.autofocus=o==t||null!=t.getAttribute("autofocus")&&o==document.body}if(t.form&&(Ea(t.form,"submit",i),!n.leaveSubmitMethodAlone)){var s=t.form,a=s.submit;try{var r=s.submit=function(){i(),s.submit=a,s.submit(),s.submit=r}}catch(e){}}n.finishInit=function(e){e.save=i,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,i(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Sa(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=a))}},t.style.display="none";var l=e((function(e){t.parentNode.insertBefore(e,t.nextSibling)}),n);return l};var la=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};la.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=La(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?La(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return La(this.string,null,this.tabSize)-(this.lineStart?La(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var o=function(e){return n?e.toLowerCase():e};return o(this.string.substr(this.pos,e.length))==o(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var ca=0,da=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ca};Ao(da),da.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&bt(e),So(this,"clear")){var n=this.find();n&&wo(this,"clear",n.from,n.to)}for(var i=null,o=null,s=0;s<this.lines.length;++s){var a=this.lines[s],r=Xn(a.markedSpans,this);e&&!this.collapsed?Nt(e,Qi(a),"text"):e&&(null!=r.to&&(o=Qi(a)),null!=r.from&&(i=Qi(a))),a.markedSpans=Qn(a.markedSpans,r),null==r.from&&this.collapsed&&!bi(this.doc,a)&&e&&Xi(a,gt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(s=0;s<this.lines.length;++s){var l=fi(this.lines[s]),c=u(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&Rt(e,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&$e(e.doc)),e&&wo(e,"markerCleared",e,this),t&&wt(e),this.parent&&this.parent.clear()}},da.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Xn(s.markedSpans,this);if(null!=a.from&&(n=Os(t?s:Qi(s),a.from),-1==e))return n;if(null!=a.to&&(i=Os(t?s:Qi(s),a.to),1==e))return i}return n&&{from:n,to:i}},da.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&kt(n,(function(){var i=e.line,o=Qi(e.line),s=Qe(n,o);if(s&&(it(s),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!bi(t.doc,i)&&null!=t.height){var a=t.height;t.height=null;var r=_i(t)-a;r&&Xi(i,i.height+r)}}))},da.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Io(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},da.prototype.detachLine=function(e){if(this.lines.splice(Io(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ca=0;var ua=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Ao(ua),ua.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();wo(this,"clear")}},ua.prototype.find=function(e,t){return this.primary.find(e,t)};var pa=e.LineWidget=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};Ao(pa),pa.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Qi(n);if(null!=i&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(n.widgets=null);var s=_i(this);Xi(n,Math.max(0,n.height-s)),e&&kt(e,(function(){wi(e,n,-s),Nt(e,i,"widget")}))}},pa.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var i=_i(this)-e;i&&(Xi(n,n.height+i),t&&kt(t,(function(){t.curOp.forceUpdate=!0,wi(t,n,i)})))};var ha=e.Line=function(e,t,n){this.text=e,ai(this,t),this.height=n?n(this):1};Ao(ha),ha.prototype.lineNo=function(){return Qi(this)};var fa={},ma={};Wi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;i>n;++n){var o=this.lines[n];this.height-=o.height,Si(o),wo(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},Ki.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>e){var s=Math.min(t,o-e),a=i.height;if(i.removeInner(e,s),this.height-=a-i.height,o==s&&(this.children.splice(n--,1),i.parent=null),0==(t-=s))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Wi))){var r=[];this.collapse(r),this.children=[new Wi(r)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var o=this.children[i],s=o.chunkSize();if(s>=e){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=new Wi(o.lines.splice(o.lines.length-25,25));o.height-=a.height,this.children.splice(i+1,0,a),a.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Ki(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=Io(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new Ki(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var o=this.children[i],s=o.chunkSize();if(s>e){var a=Math.min(t,s-e);if(o.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=s}}};var ga=0,va=e.Doc=function(e,t,n){if(!(this instanceof va))return new va(e,t,n);null==n&&(n=0),Ki.call(this,[new Wi([new ha("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=Os(n,0);this.sel=he(i),this.history=new to(null),this.id=++ga,this.modeOption=t,"string"==typeof e&&(e=Va(e)),Ui(this,{from:i,to:i,text:e}),Ce(this,he(i),$a)};va.prototype=Ro(Ki.prototype,{constructor:va,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Yi(this,this.first,this.first+this.size);return!1===e?t:t.join(e||"\n")},setValue:It((function(e){var t=Os(this.first,0),n=this.first+this.size-1;Tn(this,{from:t,to:Os(n,zi(this,n).text.length),text:Va(e),origin:"setValue",full:!0},!0),Ce(this,he(t))})),replaceRange:function(e,t,n,i){xn(this,e,t=me(this,t),n=n?me(this,n):t,i)},getRange:function(e,t,n){var i=qi(this,me(this,e),me(this,t));return!1===n?i:i.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ve(this,e)?zi(this,e):void 0},getLineNumber:function(e){return Qi(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=zi(this,e)),fi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:It((function(e,t,n){Ee(this,me(this,"number"==typeof e?Os(e,t||0):e),null,n)})),setSelection:It((function(e,t,n){Ee(this,me(this,e),me(this,t||e),n)})),extendSelection:It((function(e,t,n){we(this,me(this,e),t&&me(this,t),n)})),extendSelections:It((function(e,t){_e(this,be(this,e,t))})),extendSelectionsBy:It((function(e,t){_e(this,Oo(this.sel.ranges,e),t)})),setSelections:It((function(e,t,n){if(e.length){for(var i=0,o=[];i<e.length;i++)o[i]=new ue(me(this,e[i].anchor),me(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ce(this,pe(o,t),n)}})),addSelection:It((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new ue(me(this,e),me(this,t||e))),Ce(this,pe(i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var o=qi(this,n[i].from(),n[i].to());t=t?t.concat(o):o}return!1===e?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var o=qi(this,n[i].from(),n[i].to());!1!==e&&(o=o.join(e||"\n")),t[i]=o}return t},replaceSelection:function(e,t,n){for(var i=[],o=0;o<this.sel.ranges.length;o++)i[o]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:It((function(e,t,n){for(var i=[],o=this.sel,s=0;s<o.ranges.length;s++){var a=o.ranges[s];i[s]={from:a.from(),to:a.to(),text:Va(e[s]),origin:n}}var r=t&&"end"!=t&&wn(this,i,t);for(s=i.length-1;s>=0;s--)Tn(this,i[s]);r?Ae(this,r):this.cm&&Nn(this.cm)})),undo:It((function(){Sn(this,"undo")})),redo:It((function(){Sn(this,"redo")})),undoSelection:It((function(){Sn(this,"undo",!0)})),redoSelection:It((function(){Sn(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new to(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:ho(this.history.done),undone:ho(this.history.undone)}},setHistory:function(e){var t=this.history=new to(this.history.maxGeneration);t.done=ho(e.done.slice(0),null,!0),t.undone=ho(e.undone.slice(0),null,!0)},addLineClass:It((function(e,t,n){return Pn(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(Wo(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:It((function(e,t,n){return Pn(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",o=e[i];if(!o)return!1;if(null==n)e[i]=null;else{var s=o.match(Wo(n));if(!s)return!1;var a=s.index+s[0].length;e[i]=o.slice(0,s.index)+(s.index&&a!=o.length?" ":"")+o.slice(a)||null}return!0}))})),addLineWidget:It((function(e,t,n){return Ti(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Kn(this,me(this,e),me(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Kn(this,e=me(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=zi(this,(e=me(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,n){e=me(this,e),t=me(this,t);var i=[],o=e.line;return this.iter(e.line,t.line+1,(function(s){var a=s.markedSpans;if(a)for(var r=0;r<a.length;r++){var l=a[r];o==e.line&&e.ch>l.to||null==l.from&&o!=e.line||o==t.line&&l.from>t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++o})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first;return this.iter((function(i){var o=i.text.length+1;return o>e?(t=e,!0):(e-=o,void++n)})),me(this,Os(n,t))},indexFromPos:function(e){var t=(e=me(this,e)).ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,(function(e){t+=e.text.length+1})),t)},copy:function(e){var t=new va(Yi(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new va(Yi(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],zn(i,Vn(this)),i},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n)if(this.linked[n].doc==t){this.linked.splice(n,1),t.unlinkDoc(this),qn(Vn(this));break}if(t.history==this.history){var i=[t.id];Gi(t,(function(e){i.push(e.id)}),!0),t.history=new to(null),t.history.done=ho(this.history.done,i),t.history.undone=ho(this.history.undone,i)}},iterLinkedDocs:function(e){Gi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),va.prototype.eachLine=va.prototype.iter;var ba="iter insert remove copy getEditor".split(" ");for(var ya in va.prototype)va.prototype.hasOwnProperty(ya)&&Io(ba,ya)<0&&(e.prototype[ya]=function(e){return function(){return e.apply(this.doc,arguments)}}(va.prototype[ya]));Ao(va);var wa=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},_a=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Ta=e.e_stop=function(e){wa(e),_a(e)},Ea=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});(i[t]||(i[t]=[])).push(n)}},Sa=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers&&e._handlers[t];if(!i)return;for(var o=0;o<i.length;++o)if(i[o]==n){i.splice(o,1);break}}},Aa=e.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)},Ca=null,ka=30,xa=e.Pass={toString:function(){return"CodeMirror.Pass"}},$a={scroll:!1},Ia={origin:"*mouse"},Oa={origin:"+move"};Co.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var La=e.countColumn=function(e,t,n,i,o){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var s=i||0,a=o||0;;){var r=e.indexOf("\t",s);if(0>r||r>=t)return a+(t-s);a+=r-s,a+=n-a%n,s=r+1}},Ra=[""],Na=function(e){e.select()};Ts?Na=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:hs&&(Na=function(e){try{e.select()}catch(e){}});var Da,Ma=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Pa=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ma.test(e))},Fa=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Da=document.createRange?function(e,t,n,i){var o=document.createRange();return o.setEnd(i||e,n),o.setStart(e,t),o}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var Ba=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};hs&&11>fs&&(Uo=function(){try{return document.activeElement}catch(e){return document.body}});var Ha,ja,Ua=e.rmClass=function(e,t){var n=e.className,i=Wo(t).exec(n);if(i){var o=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(o?i[1]+o:"")}},Wa=e.addClass=function(e,t){var n=e.className;Wo(t).test(n)||(e.className+=(n?" ":"")+t)},Ka=!1,Ga=function(){if(hs&&9>fs)return!1;var e=Bo("div");return"draggable"in e||"dragDrop"in e}(),Va=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;i>=t;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var s=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),a=s.indexOf("\r");-1!=a?(n.push(s.slice(0,a)),t+=a+1):(n.push(s),t=o+1)}return n}:function(e){return e.split(/\r\n?|\n/)},za=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},qa=function(){var e=Bo("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ya=null,Xa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Xa,function(){for(var e=0;10>e;e++)Xa[e+48]=Xa[e+96]=String(e);for(e=65;90>=e;e++)Xa[e]=String.fromCharCode(e);for(e=1;12>=e;e++)Xa[e+111]=Xa[e+63235]="F"+e}();var Qa,Za=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?i.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,s=/[stwN]/,a=/[LRr]/,r=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!o.test(n))return!1;for(var i=n.length,d=[],u=0;i>u;++u)d.push(v=e(n.charCodeAt(u)));u=0;for(var p=c;i>u;++u)"m"==(v=d[u])?d[u]=p:p=v;u=0;for(var h=c;i>u;++u)"1"==(v=d[u])&&"r"==h?d[u]="n":a.test(v)&&(h=v,"r"==v&&(d[u]="R"));for(u=1,p=d[0];i-1>u;++u)"+"==(v=d[u])&&"1"==p&&"1"==d[u+1]?d[u]="1":","!=v||p!=d[u+1]||"1"!=p&&"n"!=p||(d[u]=p),p=v;for(u=0;i>u;++u)if(","==(v=d[u]))d[u]="N";else if("%"==v){for(var f=u+1;i>f&&"%"==d[f];++f);for(var m=u&&"!"==d[u-1]||i>f&&"1"==d[f]?"1":"N",g=u;f>g;++g)d[g]=m;u=f-1}for(u=0,h=c;i>u;++u){var v=d[u];"L"==h&&"1"==v?d[u]="L":a.test(v)&&(h=v)}for(u=0;i>u;++u)if(s.test(d[u])){for(f=u+1;i>f&&s.test(d[f]);++f);var b="L"==(u?d[u-1]:c),y="L"==(i>f?d[f]:c);for(m=b||y?"L":"R",g=u;f>g;++g)d[g]=m;u=f-1}var w,_=[];for(u=0;i>u;)if(r.test(d[u])){var T=u;for(++u;i>u&&r.test(d[u]);++u);_.push(new t(0,T,u))}else{var E=u,S=_.length;for(++u;i>u&&"L"!=d[u];++u);for(g=E;u>g;)if(l.test(d[g])){g>E&&_.splice(S,0,new t(1,E,g));var A=g;for(++g;u>g&&l.test(d[g]);++g);_.splice(S,0,new t(2,A,g)),E=g}else++g;u>E&&_.splice(S,0,new t(1,E,u))}return 1==_[0].level&&(w=n.match(/^\s+/))&&(_[0].from=w[0].length,_.unshift(new t(0,0,w[0].length))),1==$o(_).level&&(w=n.match(/\s+$/))&&($o(_).to-=w[0].length,_.push(new t(0,i-w[0].length,i))),2==_[0].level&&_.unshift(new t(1,_[0].to,_[0].to)),_[0].level!=$o(_).level&&_.push(new t(_[0].level,i,i)),_}}();return e.version="5.3.0",e}()},62759:()=>{window.csrf=function(e){let t={getCsrfParam:()=>e("meta[name=csrf-param]").attr("content"),getCsrfToken:()=>e("meta[name=csrf-token]").attr("content"),setCsrfToken(t,n){e("meta[name=csrf-param]").attr("content",t),e("meta[name=csrf-token]").attr("content",n)},reloadCsrfToken(){let n=t.getCsrfToken();n&&e(`form input[name="${t.getCsrfParam()}"]`).val(n)},init(){e.ajaxPrefilter(((e,n,i)=>{!e.crossDomain&&t.getCsrfParam()&&i.setRequestHeader("X-CSRF-Token",t.getCsrfToken())}))}};return t.init(),e(document).ajaxComplete(((e,n)=>{let i=n.getResponseHeader("X-CSRF-Token");i&&t.setCsrfToken("_csrf_token",i)})),t}(jQuery),$((()=>{window.csrf.reloadCsrfToken()}))},53809:()=>{$.widget("ui.dialog",$.ui.dialog,{_on(e,t,n){let i,o=this;"boolean"!=typeof e&&(n=t,t=e,e=!1),n?(t=$(t),i=t,this.bindings=this.bindings.add(t)):(n=t,t=this.element,i=this.widget()),$.each(n,((n,s)=>{function a(){if(("focusin"!==s.name||"daterangepicker_start"!==$(this.activeElement).attr("name")&&"daterangepicker_end"!==$(this.activeElement).attr("name"))&&(e||!0!==o.options.disabled&&!$(this).hasClass("ui-state-disabled")))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid||a.guid||$.guid++,s.guid=a.guid);let r=n.match(/^([\w:-]*)\s*(.*)$/),l=r[1]+o.eventNamespace,c=r[2];c?i.on(l,c,a):t.on(l,a)}))},_createButtons(){let e=this,{buttons:t}=this.options;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),$.isEmptyObject(t)||Array.isArray(t)&&!t.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):($.each(t,((t,n)=>{let i,o;n="function"==typeof n?{click:n,text:t}:n,n=$.extend({type:"button"},n),i=n.click,o={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons;let s="btn btn-primary ms-4",a=n.text.toString().toLowerCase();"close"!==a&&"no"!==a&&"cancel"!==a||(s="btn btn-cancel ms-4"),"boolean"==typeof n.text&&delete n.text,$("<button></button>",n).button(o).addClass(s).appendTo(e.uiButtonSet).on("click",(function(){i.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))}})},19673:()=>{$.fn.customColorPicker=function(e){let t=$(this).parent();return t.colorpicker(e).on("changeColor",(function(){$(this).parent().find(".input-group-addon").css("background-color",$(this).colorpicker("getValue","#ffffff"))})),t.find("input").click((()=>{t.find(".input-group-addon").click()})),t}},55345:(e,t,n)=>{n(39028),window.CustomDatetimePicker=null,$((()=>{window.CustomDatetimePicker=function(t,n,i,o){this.element=$(t),this.value=null,this.timePickerSeconds=!1,this.timePickerIncrement=5,this.allowTimeInPast=!0,this.oneInputForTime=!0,this.showRanges=!1,this.dateTimeFormat=window.datetime_format,this.phpTimeFormat=window.php_time_format,this.jsTimeFormat=window.js_time_format,this.time24Hour=window.time_24_hour,this.ranges=$.extend(!0,{},window.daterangepicker_single_default_ranges);let s=this;"object"==typeof i&&null!==i||(i={}),"string"==typeof i.value&&i.value&&"0000-00-00 00:00:00"!==i.value?this.value=moment(i.value):this.element.is("input[type=text]")&&this.element.val()||(this.value=this.getRoundedCurrentMoment()),"boolean"==typeof i.timePickerSeconds&&(this.timePickerSeconds=i.timePickerSeconds),"number"==typeof i.timePickerIncrement&&(this.timePickerIncrement=i.timePickerIncrement),"boolean"==typeof i.allowTimeInPast&&(this.allowTimeInPast=i.allowTimeInPast),"boolean"==typeof i.oneInputForTime&&(this.oneInputForTime=i.oneInputForTime),"boolean"==typeof i.showRanges&&(this.showRanges=i.showRanges),"object"==typeof i.ranges&&(this.ranges=i.ranges),this.daterangepickerConfig=$.extend(!0,{},n),this.daterangepickerConfig.timePicker&&this.daterangepickerConfig.singleDatePicker||(this.oneInputForTime=!1),this.daterangepickerConfig.timePickerSeconds=this.timePickerSeconds,this.timePickerSeconds?(this.dateTimeFormat=this.dateTimeFormat.replace(":ss","").replace(":mm",":mm:ss"),this.jsTimeFormat=this.jsTimeFormat.replace(":ss","").replace(":mm",":mm:ss"),this.phpTimeFormat=this.phpTimeFormat.replace(":s","").replace(":i",":i:s")):(this.dateTimeFormat=this.dateTimeFormat.replace(":ss",""),this.jsTimeFormat=this.jsTimeFormat.replace(":ss",""),this.phpTimeFormat=this.phpTimeFormat.replace(":s","")),this.allowTimeInPast||(this.daterangepickerConfig.minDate=moment()),this.value&&(this.daterangepickerConfig.startDate=this.value),this.showRanges&&($.each(this.ranges,((e,t)=>{$.each(t,((t,n)=>{s.ranges[e][t]=s.roundTime(n)}))})),this.daterangepickerConfig.ranges=window.daterangepicker_single_default_ranges),this.element.daterangepicker(this.daterangepickerConfig,o),this.oneInputForTime&&function(t){e?t():$.getScript("/js/development/jquery.inputmask.min.js",(()=>{e=!0,t()}))}(this.renderTimeInput.bind(this)),this.showRanges&&this.getContainer().find(".ranges ul").show(),this.element.on("apply.daterangepicker",((e,t)=>{s.element.val(t.startDate.locale("en").format(s.dateTimeFormat)).trigger("change")})),this.oneInputForTime&&this.element.on("cancel.daterangepicker",(()=>{s.resetTimeselectValue()}));let a=this.getDatePickerData().setStartDate.bind(this.getDatePickerData());this.getDatePickerData().setStartDate=function(e,t){e=moment(e,this.locale.format);let n=s.getTimeFromTimeselect();if(!t&&n.isValid()&&e.format(s.jsTimeFormat)!==n.format(s.jsTimeFormat)&&(e.hours(n.hours()).minutes(n.minutes()).seconds(n.seconds()),e=moment(e._i,e._f)),s.resetTimeselectValue(e),a(e),!s.allowTimeInPast){let e="00:00";s.getStartDate().isSame(moment(),"day")&&(e=s.roundTime(moment()).locale("en").format(s.jsTimeFormat)),s.getContainer().find(".timeselect").timepicker("option","minTime",e)}},this.element.on("change",(function(){if(!empty($(this).val())){let e=moment($(this).val(),s.dateTimeFormat,"en");e.isValid()&&(s.getStartDate().format("LLL")===e.format("LLL")?s.resetTimeselectValue():s.setDates(e))}})),this.getContainer().on("change",".timeselect",(()=>{let e=s.getTimeFromTimeselect();if(e.isValid()){let t=s.getDatePickerData().startDate.clone();t.hours(e.hours()).minutes(e.minutes()).seconds(e.seconds()),s.setDates(t),s.getContainer().find(".ranges li.active").removeClass("active")}}))},window.CustomDatetimePicker.prototype={constructor:window.CustomDatetimePicker,getTimeFromTimeselect(){let e=this.getContainer().find(".timeselect").val();return moment(e,this.jsTimeFormat,"en")},getDatePickerData(){return this.element.data("daterangepicker")},getContainer(){return this.getDatePickerData().container},getStartDate(){return this.getDatePickerData().startDate},roundTime(e){return this.timePickerIncrement>1&&e.minute(Math.ceil(e.minute()/this.timePickerIncrement)*this.timePickerIncrement),e},getRoundedCurrentMoment(){let e=moment();return this.timePickerIncrement>1&&e.minutes(Math.round(e.minutes()/this.timePickerIncrement)*this.timePickerIncrement),e},resetDatesToNow(){this.setDates(this.getRoundedCurrentMoment())},setDates(e){this.getDatePickerData().setStartDate(e),this.getDatePickerData().setEndDate(e)},resetTimeselectValue(e){void 0===e&&(e=this.getStartDate()),this.getContainer().find(".timeselect").val(e.locale("en").format(this.jsTimeFormat))},renderTimeInput(){if(!this.getDatePickerData()){let e=this;return void setTimeout((()=>{e.renderTimeInput()}),50)}let e="00:00",t=this.time24Hour?"HH:MM":"hh:MM";this.timePickerSeconds&&(t+=":ss",e+=":00"),this.time24Hour||(t+=" TT",e+=" TM");let n=`<div class="timeselector"><div class="form-group"><div class="input-group"><span class="input-group-text">Time</span><input type="text" class="form-control input-sm timeselect" placeholder="${e}" data-original-name="from" value="00:00"></div></div></div>`,i=this.getContainer();$(n).prependTo(i.find(".ranges"));let o="00:00",s="23:55";!this.allowTimeInPast&&this.getStartDate().isSame(moment(),"day")&&(o=this.roundTime(moment()).locale("en"),s=this.roundTime(moment().endOf("day").subtract(5,"minutes")).locale("en"),o.isAfter(this.getStartDate())&&this.setDates(o),o=o.format(this.jsTimeFormat),s=s.format(this.jsTimeFormat)),this.resetTimeselectValue(),i.find(".timeselect:not(.processed)").addClass("processed").timepicker({step:this.timePickerIncrement,timeFormat:this.phpTimeFormat,minTime:o,maxTime:s}).inputmask({alias:"datetime",inputFormat:t,hourFormat:this.time24Hour?24:12,placeholder:e}),this.element.on("show.daterangepicker",((e,t)=>{$(document).on("mousedown.daterangepicker",(e=>{e.target.closest(".ui-timepicker-wrapper")&&$(t.element).trigger("click")}))})),i.find(".calendar-time").hide(),$(".ui-dialog").length>0&&($.ui.dialog.prototype._focusTabbable=function(){})}};let e=!1;$.fn.customdatetimepicker=function(e,t,n){this.each((function(){let i=$(this);i.data("customdatetimepicker")&&i.removeData("customdatetimepicker"),i.data("customdatetimepicker",new window.CustomDatetimePicker(i,e,t,n))}))}}))},88812:(e,t,n)=>{function i(){let e=$(".input-date-range:not(.dataRangePickerInitialized)"),t=$(".daterangepicker").length>0,n=()=>{e.each((function(){$(this).is(":focus")&&window.matchMedia("(min-width: 768px)").matches&&$(this).data("daterangepicker").hide()}))};$(window).on("scroll",n),$(".splynx-dialog-content").on("scroll",n),$(".vue-dialog-body").on("scroll",n),t&&$.each(e,(function(){let e=$(this);e.addClass("dataRangePickerInitialized");let t=e.data("daterangepicker");if(t){let n=t.locale.format,i=t.constructor.prototype,o=$(".cancelBtn");$(".applyBtn").removeClass("btn-sm btn-primary"),o.removeClass("btn-sm btn-default"),t.singleDatePicker||t.timePicker||e.on("show.daterangepicker",((e,i)=>{let o=t.container,s=o.find(".daterangepicker_start"),a=o.find(".daterangepicker_end");s.val(i.startDate.format(n)),a.val(i.endDate.format(n));let r=i.startDate?i.startDate.format(n):null,l=i.endDate?i.endDate.format(n):null;o.on("mouseenter.daterangepicker","td.available",(e=>{if(r=i.startDate?i.startDate.format(n):null,l=i.endDate?i.endDate.format(n):null,!$(e.target).hasClass("available"))return;let o=$(e.target).attr("data-title"),c=o.substr(1,1),d=o.substr(3,1),u=$(e.target).parents(".drp-calendar").hasClass("left")?t.leftCalendar.calendar[c][d]:t.rightCalendar.calendar[c][d];t.endDate||u.isBefore(t.startDate,"day")?s.val(u.format(n)):(!t.endDate&&u.isBefore(t.startDate),a.val(u.format(n)))})).on("mouseout","td.available",(()=>{$(".start-date").length>0&&null!=r&&s.val(r),$(".end-date").length>0&&null!=l&&a.val(l)})),o.on("mouseenter.daterangepicker",".ranges li",(e=>{r=i.startDate?i.startDate.format(n):null,l=i.endDate?i.endDate.format(n):null;let o=e.target.getAttribute("data-range-key");if(t.chosenLabel=o,o===t.locale.customRangeLabel)t.showCalendars();else{let e=t.ranges[o];s.val(e[0].format(n)),a.val(e[1].format(n))}})).on("mouseout",".ranges li",(()=>{$(".start-date").length>0&&null!=r&&s.val(r),$(".end-date").length>0&&null!=l&&a.val(l)})),s.on("input",(function(){let e=$(this).val();moment(e,n,!0).isValid()&&(t.setStartDate($(this).val()),t.updateView())})),a.on("input",(function(){let e=$(this).val();moment(e,n,!0).isValid()&&(t.setEndDate($(this).val()),t.updateView())}))})),e.on("show.daterangepicker",(()=>{t.container.addClass("show-container-daterangepicker")})),e.on("hide.daterangepicker",(()=>{t.container.removeClass("show-container-daterangepicker")})),i.move=function(){let e,t,n,i={top:0,left:0},{drops:o}=this,s=$(window).width();switch(this.parentEl.is("body")||(i={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},s=this.parentEl[0].clientWidth+this.parentEl.offset().left),o){case"auto":e=this.element.offset().top+this.element.outerHeight()-i.top,this.parentEl.is("body")?(t=$(window).scrollTop()+$(window).height(),n=e+this.container.outerHeight(),n>t?(e=this.element.offset().top-this.container.outerHeight()-i.top,o="up"):o="down"):(n=e+this.container.outerHeight(),n>=this.parentEl[0].scrollHeight?(e=this.element.offset().top-this.container.outerHeight()-i.top,o="up"):o="down");break;case"up":e=this.element.offset().top-this.container.outerHeight()-i.top;break;default:e=this.element.offset().top+this.element.outerHeight()-i.top,e+this.container.outerHeight()>=this.parentEl[0].scrollHeight-i.top&&(e=this.element.offset().top-this.container.outerHeight()-i.top,o="up")}this.container.css({top:0,left:0,right:"auto"}),this.container.toggleClass("drop-up","up"==o);let a=this.opens,r=$(window).width(),l=this.element.outerWidth(),c=this.element.offset().left,d=c+Math.ceil(l/2),u=r-d,p=this.container.find(".ranges").is(":visible")?680:500,h=Math.ceil(p/2),f=!1,m=!1,g=!1;u>=h&&u>=h&&(g=!0,a="center"),c+l>=p&&(f=!0,a="left"),$(window).width()-c>=p&&(m=!0,a="right"),!(g||m||f)||d+u<p?this.container.addClass("daterangepicker-is-small"):this.container.removeClass("daterangepicker-is-small"),$(this.container).removeClass("openscenter opensright opensleft").addClass(`opens${a}`),"left"===a?(this.container.css({top:e,right:s-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"===a?(this.container.css({top:e,left:this.element.offset().left-i.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9}),this.container.offset().left>115&&this.container.css({right:9,left:"auto"})):(this.container.css({top:e,left:this.element.offset().left-i.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},$(".daterangepicker_start, .daterangepicker_end").on("input",(function(){$(this).val($(this).val().replace(/[A-Za-zА-Яа-яЁё]/,""))}))}}))}n(39028),window.templateForDataRangePicker='<div class="daterangepicker">\n                                    <div class="drp-calendar left">\n                                        <div class="daterangepicker_input">\n                                            <input class="input-mini form-control daterangepicker_start" type="text" name="daterangepicker_start"\n                                                   value=""/>\n                                            <i class="fa fa-calendar"></i>\n                                        </div>\n                                        <div class="calendar-table"></div>\n                                    </div>\n                                    <div class="drp-calendar right">\n                                        <div class="daterangepicker_input">\n                                            <input class="input-mini form-control daterangepicker_end" type="text" name="daterangepicker_end"\n                                                   value=""/>\n                                            <i class="fa fa-calendar"></i>\n                                        </div>\n                                        <div class="calendar-table"></div>\n                                    </div>\n                                    <div class="ranges">\n                                        <div class="range_inputs drp-buttons">\n                                            <button class="cancelBtn btn btn-cancel" type="button"></button>\n                                            <button class="applyBtn btn btn-outline-primary" disabled="disabled" type="button"></button>\n                                        </div>\n                                    </div>\n                                </div>',window.templateForSingleDataRangePicker='<div class="daterangepicker">\n                                            <div class="drp-calendar left">\n                                                <div class="calendar-table"></div>\n                                            </div>\n                                            <div class="drp-calendar right">\n                                                <div class="calendar-table"></div>\n                                            </div>\n                                            <div class="ranges">\n                                                <div class="range_inputs drp-buttons">\n                                                    <button class="cancelBtn btn btn-cancel" type="button"></button>\n                                                </div>\n                                            </div>\n                                        </div>',window.templateForSingleDateTimeDataRangePicker='<div class="daterangepicker">\n                                                    <div class="drp-calendar left">\n                                                        <div class="calendar-time"><div></div></div>\n                                                        <div class="calendar-table"></div>\n                                                    </div>\n                                                    <div class="drp-calendar right">\n                                                        <div class="calendar-time"><div></div></div>\n                                                        <div class="calendar-table"></div>\n                                                    </div>\n                                                    <div class="ranges">\n                                                        <div class="range_inputs drp-buttons">\n                                                            <button class="cancelBtn btn btn-cancel" type="button"></button>\n                                                            <button class="applyBtn btn btn-outline-primary" disabled="disabled" type="button"></button>\n                                                        </div>\n                                                    </div>\n                                                </div>',window.initDaterangePicker=i,i(),$((()=>{let e=window.XMLHttpRequest;window.XMLHttpRequest=function(){let t=new e;return t.addEventListener("readystatechange",(()=>{4==t.readyState&&i()}),!1),t}}))},24456:(e,t,n)=>{function i(e,t,n){null==e&&(e=""),null==t&&(t="");let i=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?%?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,r=/^0x[0-9a-f]+$/i,l=/^0/,c=e.toString().replace(s,"")||"",d=t.toString().replace(s,"")||"";n||(c=o(c).trim(),d=o(d).trim());let u=c.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=d.replace(i,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(c.match(r),10)||1!==u.length&&c.match(a)&&Date.parse(c),f=parseInt(d.match(r),10)||h&&d.match(a)&&Date.parse(d)||null;if(f){if(h<f)return-1;if(h>f)return 1}for(let e=0,t=Math.max(u.length,p.length);e<t;e++){if(void 0===u[e]&&void 0!==p[e])return-1;if(void 0!==u[e]&&void 0===p[e])return 1;let t=!(u[e]||"").match(l)&&parseFloat(u[e],10)||u[e]||0,n=!(p[e]||"").match(l)&&parseFloat(p[e],10)||p[e]||0;if(isNaN(t)!==isNaN(n))return isNaN(t)?1:-1;if(typeof t!=typeof n&&(t+="",n+=""),t<n)return-1;if(t>n)return 1}return 0}function o(e){return $("<div />").html(e).text()}n(39028),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"natural-asc":function(e,t){return i(e,t,!0)},"natural-desc":function(e,t){return-1*i(e,t,!0)},"natural-nohtml-asc":function(e,t){return i(e,t,!1)},"natural-nohtml-desc":function(e,t){return-1*i(e,t,!1)},"natural-ci-asc":function(e,t){return i(e=e.toString().toLowerCase(),t=t.toString().toLowerCase(),!0)},"natural-ci-desc":function(e,t){return-1*i(e=e.toString().toLowerCase(),t=t.toString().toLowerCase(),!0)}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"ip-address-pre":function(e){let t,n,i,o,s,a,r;if(!e)return 0;if(s=(e=e.replace(/<[\s\S]*?>/g,"")).split(":"),i=2==s.length?s[0].split("."):e.split("."),o=e.split(":"),a="",r="",4==i.length)for(t=0;t<i.length;t++)n=i[t],1==n.length?a+=`00${n}`:2==n.length?a+=`0${n}`:a+=n;else if(o.length>0){let e=0;for(t=0;t<o.length;t++)n=o[t],t>0&&(r+=":"),0===n.length?e+=0:1==n.length?(r+=`000${n}`,e+=4):2==n.length?(r+=`00${n}`,e+=4):3==n.length?(r+=`0${n}`,e+=4):(r+=n,e+=4);o=r.split(":");let i=0;for(t=0;t<o.length;t++)if(n=o[t],0===n.length&&0===i)for(let t=0;t<32-e;t++)a+="0",i=1;else a+=n}return a},"ip-address-asc":function(e,t){return e<t?-1:e>t?1:0},"ip-address-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"num-html-pre":function(e){let t=String(e).replace(/<[\s\S]*?>/g,"");return parseFloat(t)},"num-html-asc":function(e,t){return e<t?-1:e>t?1:0},"num-html-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.fn.dataTable.ext.type.order["file-size-pre"]=function(e){if("---"===e)return-1;let t=e.replace(/[\d\.\s]/g,"").toLowerCase(),n=1;return"kb"===t?n=1e3:"mb"===t?n=1e6:"gb"===t?n=1e9:"tb"===t?n=1e12:"pb"===t&&(n=1e15),parseFloat(e)*n},jQuery.extend(jQuery.fn.dataTableExt.oSort,{"currency-pre":function(e){return"---"!==(e=o(e))&&"--"!==e&&"-"!==e&&""!==e||(e="-1"),void 0!==e&&0!==e||(e="0"),e=e.replace(",",".").replace(/[.'`](?=\d{0,3}[.])/g,"").replace(/(?!-)\D/g,""),parseFloat(e)},"currency-asc":function(e,t){return e<t?-1:e>t?1:0},"currency-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"formatted-number-pre":function(e){return"---"!==e&&"--"!==e&&"-"!==e||(e="-1"),void 0!==e&&0!==e||(e="0"),e=e.replace(",",".").replace(/[.'`](?=\d{0,3}[.])/g,"").replace(/(?!-)\D/g,""),parseFloat(e)},"formatted-number-asc":function(e,t){return e<t?-1:e>t?1:0},"formatted-number-desc":function(e,t){return e<t?1:e>t?-1:0}});let s=function(e,t,n){let i=/[+-]?((\d+(\.\d*)?)|\.\d+)([eE][+-]?[0-9]+)?/;return(e=null!==(e=e.replace(",",".").match(i))?parseFloat(e[0]):n)<(t=null!==(t=t.replace(",",".").match(i))?parseFloat(t[0]):n)?-1:e>t?1:0};jQuery.extend(jQuery.fn.dataTableExt.oSort,{"any-number-pre":function(e){return"---"!==e&&"--"!==e&&""!==e||(e="-1"),void 0!==e&&0!==e||(e="0"),e},"any-number-asc":function(e,t){return s(e,t,Number.POSITIVE_INFINITY)},"any-number-desc":function(e,t){return-1*s(e,t,Number.NEGATIVE_INFINITY)}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"system-datetime-pre":function(e){let t=moment(e,dt_datetime_format);return t.isValid()?t:0},"system-datetime-asc":function(e,t){return e<t?-1:e>t?1:0},"system-datetime-desc":function(e,t){return e<t?1:e>t?-1:0},"system-date-pre":function(e){let t=moment(e,dt_datetime_format);return t.isValid()?t:0},"system-date-asc":function(e,t){return e<t?-1:e>t?1:0},"system-date-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"html-attr-datetime-pre":function(e){let t=$(e).attr("data-date");return void 0===t&&(t=$(e).html().toString().replace(/[-]/g,"").trim()),t},"html-attr-datetime-asc":function(e,t){return e<t?-1:e>t?1:0},"html-attr-datetime-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"html-attr-data-sort-pre":function(e){let t=$(e).attr("data-sort");return void 0===t&&(t=$(e).html().toString().replace(/[-]/g,"")),parseInt(t)},"html-attr-data-sort-asc":function(e,t){return e<t?-1:e>t?1:0},"html-attr-data-sort-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"html-attr-data-sort-float-pre":function(e){let t=$(e).attr("data-sort-float");return void 0===t&&(t=$(e).html().toString().replace(/[-]/g,"")),parseFloat(t)},"html-attr-data-sort-float-asc":function(e,t){return e<t?-1:e>t?1:0},"html-attr-data-sort-float-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"phone-pre":function(e){if(""==e)return 0;let t=parseInt(e.split(",").splice(0,1).join("").replace(/\D/g,""));return Number.isNaN(t)?0:t},"phone-asc":function(e,t){return e<t?-1:e>t?1:0},"phone-desc":function(e,t){return e<t?1:e>t?-1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"duration-pre":function(e){return Number((e+="").replace(/\D/g,""))},"duration-asc":function(e,t){return e<t?1:e>t?-1:0},"duration-desc":function(e,t){return e<t?-1:e>t?1:0}}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"negativeAmountsInBracketsSorting-pre":function(e){"---"!==(e=o(e))&&"--"!==e&&"-"!==e&&""!==e||(e="-1"),void 0!==e&&0!==e||(e="0");let t=!1;e.match(/\(.*\)/)&&(t=!0,e=e.replace(/[\(\)]/g,"")),e=e.replace(",",".").replace(/[.'`](?=\d{0,3}[.])/g,"").replace(/(?!-)\D/g,"");let n=parseFloat(e);return t?-n:n},"negativeAmountsInBracketsSorting-asc":function(e,t){return e<t?-1:e>t?1:0},"negativeAmountsInBracketsSorting-desc":function(e,t){return e<t?1:e>t?-1:0}}),window.matchYearWithMonth=(e,t,n)=>{const{idx:i}=n.settings.aoColumns.find((e=>"month"===e.type))??{};if(!i)return e;const o=t[i],s=window.spl_localization_messages.date;return`${e}-${{[s.January]:"01",[s.February]:"02",[s.March]:"03",[s.April]:"04",[s.May]:"05",[s.June]:"06",[s.July]:"07",[s.August]:"08",[s.September]:"09",[s.October]:"10",[s.November]:"11",[s.December]:"12"}[o]}`}},1004:(e,t,n)=>{var i,o,s;n(58740),n(903),n(43838),n(4949),n(9225),n(14632),n(8396),n(44249),n(39028),n(10765),n(38936),n(4496),n(81339),n(67882),n(97865),n(49465),n(69431),n(704),n(16925),n(25119),n(85124),n(69740),n(37628),n(21215),n(36538),n(69565),o=[n(13886)],void 0===(s="function"==typeof(i=function(e){var t=function(n,i){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==typeof i&&i));var o=JSON.stringify(this.opts);e.FE.OPTS_MAPPING[o]=e.FE.OPTS_MAPPING[o]||this.id,this.sid=e.FE.OPTS_MAPPING[o],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(n),this.$oel.data("froala.editor",this),this.o_doc=n.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var s=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy((function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick?(this.load(e.FE.MODULES),this.$el.on("touchstart.init",(function(){e(this).data("touched",!0)})),this.$el.on("touchmove.init",(function(){e(this).removeData("touched")})),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",e.proxy((function(t){if("touchend"==t.type&&!this.$el.data("touched"))return!0;if(1===t.which||!t.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var n=t.originalEvent&&t.originalEvent.originalTarget;n&&"IMG"==n.tagName&&e(n).trigger("mousedown"),void 0===this.ul&&this.destroy(),"touchend"==t.type&&this.image&&t.originalEvent&&t.originalEvent.target&&e(t.originalEvent.target).is("img")&&setTimeout(e.proxy((function(){this.image.edit(e(t.originalEvent.target))}),this),100),this.ready=!0,this.events.trigger("initialized")}}),this)),this.events.trigger("initializationDelayed")):(this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(s),void 0===this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))}),this)),this._init()};t.DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.7.1",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName");this.$oel.closest("label").length;var n=e.proxy((function(){"TEXTAREA"!=t&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.el=this.$el.get(0),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))}),this),i=e.proxy((function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy((function(){this.events.trigger("form.submit")}),this)),this.$oel.parents("form").on("reset."+this.id,e.proxy((function(){this.events.trigger("form.reset")}),this)),n()}),this),o=e.proxy((function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")}),this),s=e.proxy((function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")}),this),a=e.proxy((function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",(function(e){e.preventDefault()})),this.$oel.trigger("froala.doInit")}),this);this.opts.editInPopup?a():"TEXTAREA"==t?i():"A"==t?o():"IMG"==t?s():"BUTTON"==t||"INPUT"==t?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,a()):n()},t.prototype.load=function(t){for(var n in t)if(t.hasOwnProperty(n)){if(this[n])continue;if(e.FE.PLUGINS[n]&&this.opts.pluginsEnabled.indexOf(n)<0)continue;if(this[n]=new t[n](this),this[n]._init&&(this[n]._init(),this.opts.initOnClick&&"core"==n))return!1}},t.prototype.destroy=function(){this.shared.count--,this.events.$off();var t=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var n in this.shared)this.shared.hasOwnProperty(n)&&(this.shared[n],e.FE.SHARED[this.sid][n]=null);e.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(t),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(n){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);if("string"==typeof n){var s=[];return this.each((function(){var t=e(this).data("froala.editor");if(t){var o,a;if(n.indexOf(".")>0&&t[n.split(".")[0]]?(t[n.split(".")[0]]&&(o=t[n.split(".")[0]]),a=n.split(".")[1]):(o=t,a=n.split(".")[0]),!o[a])return e.error("Method "+n+" does not exist in Froala Editor.");var r=o[a].apply(t,i.slice(1));void 0===r?s.push(this):0===s.length&&s.push(r)}})),1==s.length?s[0]:s}if("object"==typeof n||!n)return this.each((function(){e(this).data("froala.editor")||new t(this,n)}))},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3;var n="a-z\\u0080-\\u009f\\u00a1-\\uffff0-9";if(e.FE.LinkRegExCommon="((["+n+"])|(["+n+"](\\.|-|_))){1,}["+n+"]{1,}",e.FE.LinkRegExEnd="((:[0-9]{1,5})|)(((\\/|\\?|#)[a-z\\u00a1-\\uffff0-9@?\\|!^=%&amp;/~+#-_{}]*)|())",e.FE.LinkRegExTLD="(("+e.FE.LinkRegExCommon+")(\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))",e.FE.LinkRegExHTTP="((ftp|http|https):\\/\\/"+e.FE.LinkRegExCommon+")",e.FE.LinkRegExAuth="((ftp|http|https):\\/\\/[\\u0021-\\uffff]{1,}@"+e.FE.LinkRegExCommon+")",e.FE.LinkRegExWWW="(www\\."+e.FE.LinkRegExCommon+"\\.[a-z0-9-]{2,24})",e.FE.LinkRegEx="("+e.FE.LinkRegExTLD+"|"+e.FE.LinkRegExHTTP+"|"+e.FE.LinkRegExWWW+"|"+e.FE.LinkRegExAuth+")"+e.FE.LinkRegExEnd,e.FE.LinkProtocols=["mailto","tel","sms","notes","data"],e.FE.MAIL_REGEX=/.+@.+\..+/i,e.FE.MODULES.helpers=function(t){function n(){var e,t=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))),t}function i(){var e={},t=n();if(t>0)e.msie=!0;else{var i=navigator.userAgent.toLowerCase(),o=/(edge)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],s={browser:o[1]||"",version:o[2]||"0"};o[1]&&(e[s.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function o(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!r()}function s(){return/(Android)/g.test(navigator.userAgent)&&!r()}function a(){return/(Blackberry)/g.test(navigator.userAgent)}function r(){return/(Windows Phone)/gi.test(navigator.userAgent)}function l(){return s()||o()||a()}function c(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function d(e){return parseInt(e,10)||0}function u(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body:first"),n=d(t.css("margin-left"));return t.remove(),n}function p(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function h(t){return!!/^(https?:|ftps?:|)\/\//i.test(t)&&(t=String(t).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),new RegExp("^"+e.FE.LinkRegEx+"$","gi").test(t))}function f(t){if(/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(t))return t;if(/^(https?:|ftps?:|)\/\//i.test(t)){if(!h(t)&&!h("http:"+t))return""}else{if(new RegExp("^("+e.FE.LinkProtocols.join("|")+"):\\/\\/","i").test(t))return t;t=encodeURIComponent(t).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}")}return t}function m(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function g(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:("#"+t((e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+t(e[2])+t(e[3])).toUpperCase():""}catch(e){return null}}function v(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,n,i){return t+t+n+n+i+i}));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""}function b(n){var i=(n.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(i)<0){if(!A){var o=e('<div dir="'+("rtl"==t.opts.direction?"rtl":"auto")+'" style="text-align: '+t.$el.css("text-align")+'; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body:first").append(o);var s=o.find("#s1").get(0).getBoundingClientRect().left,a=o.find("#s2").get(0).getBoundingClientRect().left;o.remove(),A=s<a?"left":"right"}i=A}return i}function y(){return null==C&&(C=navigator.platform.toUpperCase().indexOf("MAC")>=0),C}function w(){function e(e,t){var o=e[t];e[t]=function(e){var t,s=!1,a=!1;if(e&&e.match(i)){e=e.replace(i,""),this.parentNode||(n.appendChild(this),a=!0);var r=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),s=!0),t=o.call(r,"#"+this.id+" "+e),s&&(this.id=""),a&&n.removeChild(this),t}return o.call(this,e)}}var n=t.o_doc.createElement("div");try{n.querySelectorAll(":scope *")}catch(t){var i=/^\s*:scope/gi;e(Element.prototype,"querySelector"),e(Element.prototype,"querySelectorAll"),e(HTMLElement.prototype,"querySelector"),e(HTMLElement.prototype,"querySelectorAll")}}function _(){return t.o_win.pageYOffset?t.o_win.pageYOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollTop?t.o_doc.documentElement.scrollTop:t.o_doc.body.scrollTop?t.o_doc.body.scrollTop:0}function T(){return t.o_win.pageXOffset?t.o_win.pageXOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollLeft?t.o_doc.documentElement.scrollLeft:t.o_doc.body.scrollLeft?t.o_doc.body.scrollLeft:0}function E(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this,n=this;if(!document.documentElement.contains(t))return null;do{if(n.matches(e))return n;n=n.parentElement}while(null!==n);return null})}function S(){t.browser=i(),w(),E()}var A,C=null;return{_init:S,isIOS:o,isMac:y,isAndroid:s,isBlackberry:a,isWindowsPhone:r,isMobile:l,requestAnimationFrame:c,getPX:d,screenSize:u,isTouch:p,sanitizeURL:f,isArray:m,RGBToHex:g,HEXtoRGB:v,isURL:h,getAlignment:b,scrollTop:_,scrollLeft:T}},e.FE.MODULES.events=function(t){function n(e,t,n){b(e,t,n)}function i(){n(t.$el,"cut copy paste beforepaste",(function(e){_(e.type,[e])}))}function o(){n(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",(function(e){_(e.type,[e])})),v("mousedown",(function(){for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].popups&&e.FE.INSTANCES[n].popups.areVisible()&&e.FE.INSTANCES[n].$el.find(".fr-marker").remove()}))}function s(){n(t.$el,"keydown keypress keyup input",(function(e){_(e.type,[e])}))}function a(){n(t.$win,t._mousedown,(function(e){_("window.mousedown",[e]),h()})),n(t.$win,t._mouseup,(function(e){_("window.mouseup",[e])})),n(t.$win,"cut copy keydown keyup touchmove touchend",(function(e){_("window."+e.type,[e])}))}function r(){n(t.$doc,"dragend drop",(function(e){_("document."+e.type,[e])}))}function l(n){if(void 0===n&&(n=!0),!t.$wp)return!1;if(t.helpers.isIOS()&&t.$win.get(0).focus(),!t.core.hasFocus()&&n){var i=t.$win.scrollTop();return t.browser.msie&&t.$box&&t.$box.css("position","fixed"),t.browser.msie&&t.$wp&&t.$wp.css("overflow","visible"),f(),t.$el.focus(),h(),t.browser.msie&&t.$box&&t.$box.css("position",""),t.browser.msie&&t.$wp&&t.$wp.css("overflow","auto"),i!=t.$win.scrollTop()&&t.$win.scrollTop(i),!1}if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;if(t.selection.info(t.el).atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var o=t.markers.insert();if(o&&!t.node.blockParent(o)){e(o).remove();var s=t.$el.find(t.html.blockTagsQuery()).get(0);s&&(e(s).prepend(e.FE.MARKERS),t.selection.restore())}else o&&e(o).remove()}}function c(){n(t.$el,"focus",(function(e){m()&&(l(!1),!1===x&&_(e.type,[e]))})),n(t.$el,"blur",(function(e){m()&&!0===x&&(_(e.type,[e]),h())})),v("focus",(function(){x=!0})),v("blur",(function(){x=!1}))}function d(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function u(n){var i=e(n.currentTarget);return t.edit.isDisabled()||t.node.hasClass(i.get(0),"fr-disabled")?(n.preventDefault(),!1):"mousedown"===n.type&&1!==n.which||(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===i.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),i.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[i]))}function p(n,i){var o=e(n.currentTarget);if(t.edit.isDisabled()||t.node.hasClass(o.get(0),"fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!t.node.hasClass(o.get(0),"fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!t.node.hasClass(o.get(0),"fr-selected"))return t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),!1;if(t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),o.data("dragging")||o.attr("disabled"))return o.removeData("dragging"),!1;var s=o.data("timeout");s&&(clearTimeout(s),o.removeData("timeout")),i.apply(t,[n])}else o.data("timeout")||o.data("timeout",setTimeout((function(){o.data("dragging",!0)}),100))}function h(){C=!0}function f(){C=!1}function m(){return C}function g(e,n,i){b(e,t._mousedown,n,(function(e){t.edit.isDisabled()||u(e)}),!0),b(e,t._mouseup+" "+t._move,n,(function(e){t.edit.isDisabled()||p(e,i)}),!0),b(e,"mousedown click mouseup",n,(function(e){t.edit.isDisabled()||e.stopPropagation()}),!0),v("window.mouseup",(function(){t.edit.isDisabled()||(e.find(n).removeClass("fr-selected"),h())}))}function v(e,n,i){var o,s=e.split(" ");if(s.length>1){for(var a=0;a<s.length;a++)v(s[a],n,i);return!0}void 0===i&&(i=!1),o=0!==e.indexOf("shared.")?k[e]=k[e]||[]:t.shared._events[e]=t.shared._events[e]||[],i?o.unshift(n):o.push(n)}function b(e,n,i,o,s){"function"==typeof i&&(s=o,o=i,i=!1);var a=s?t.shared.$_events:$,r=s?t.sid:t.id;i?e.on(n.split(" ").join(".ed"+r+" ")+".ed"+r,i,o):e.on(n.split(" ").join(".ed"+r+" ")+".ed"+r,o),a.push([e,n.split(" ").join(".ed"+r+" ")+".ed"+r])}function y(e){for(var t=0;t<e.length;t++)e[t][0].off(e[t][1])}function w(){y($),$=[],0===t.shared.count&&(y(t.shared.$_events),t.shared.$_events=[])}function _(n,i,o){if(!t.edit.isDisabled()||o){var s,a;if(0!==n.indexOf("shared."))s=k[n];else{if(t.shared.count>0)return!1;s=t.shared._events[n]}if(s)for(var r=0;r<s.length;r++)if(!1===(a=s[r].apply(t,i)))return!1;return!1!==(a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],i||[])))&&a}}function T(n,i,o){if(!t.edit.isDisabled()||o){var s,a;if(0!==n.indexOf("shared."))s=k[n];else{if(t.shared.count>0)return!1;s=t.shared._events[n]}if(s)for(var r=0;r<s.length;r++)void 0!==(a=s[r].apply(t,[i]))&&(i=a);return void 0!==(a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],[i])))&&(i=a),i}}function E(){for(var e in k)k.hasOwnProperty(e)&&delete k[e]}function S(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}function A(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},d(),o(),a(),r(),s(),c(),h(),i(),v("destroy",E),v("shared.destroy",S)}var C,k={},x=!1,$=[];return{_init:A,on:v,trigger:_,bindClick:g,disableBlur:f,enableBlur:h,blurActive:m,focus:l,chainTrigger:T,$on:b,$off:w}},e.FE.MODULES.node=function(t){function n(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function i(t){return!!t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0}function o(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&"a"==e.tagName.toLowerCase()}function s(o,s){if(!o)return!0;if(o.querySelector("table"))return!1;var a=n(o);1==a.length&&i(a[0])&&(a=n(a[0]));for(var r=!1,l=0;l<a.length;l++){var c=a[l];if(!(s&&t.node.hasClass(c,"fr-marker")||c.nodeType==Node.TEXT_NODE&&0===c.textContent.length)){if("BR"!=c.tagName&&(c.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(r)return!1;"BR"==c.tagName&&(r=!0)}}return!(o.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-o.querySelectorAll("br").length||o.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||o.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1||o.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))}function a(e){for(;e&&e.parentNode!==t.el&&(!e.parentNode||!t.node.hasClass(e.parentNode,"fr-inner"));)if(i(e=e.parentNode))return e;return null}function r(n,o,s){if(void 0===o&&(o=[]),void 0===s&&(s=!0),o.push(t.el),o.indexOf(n.parentNode)>=0||n.parentNode&&t.node.hasClass(n.parentNode,"fr-inner")||n.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&s)return null;for(;o.indexOf(n.parentNode)<0&&n.parentNode&&!t.node.hasClass(n.parentNode,"fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!s)&&(!i(n)||!i(n.parentNode)||!s);)n=n.parentNode;return n}function l(e){var t={},n=e.attributes;if(n)for(var i=0;i<n.length;i++){var o=n[i];t[o.nodeName]=o.value}return t}function c(e){for(var t="",n=l(e),i=Object.keys(n).sort(),o=0;o<i.length;o++){var s=i[o],a=n[s];a.indexOf("'")<0&&a.indexOf('"')>=0?t+=" "+s+"='"+a+"'":a.indexOf('"')>=0&&a.indexOf("'")>=0?t+=" "+s+'="'+(a=a.replace(/"/g,"&quot;"))+'"':t+=" "+s+'="'+a+'"'}return t}function d(e){for(var t=e.attributes,n=t.length-1;n>=0;n--){var i=t[n];e.removeAttribute(i.nodeName)}}function u(e){return"<"+e.tagName.toLowerCase()+c(e)+">"}function p(e){return"</"+e.tagName.toLowerCase()+">"}function h(e,n){void 0===n&&(n=!0);for(var i=e.previousSibling;i&&n&&t.node.hasClass(i,"fr-marker");)i=i.previousSibling;return!i||i.nodeType==Node.TEXT_NODE&&""===i.textContent&&h(i)}function f(e,n){void 0===n&&(n=!0);for(var i=e.nextSibling;i&&n&&t.node.hasClass(i,"fr-marker");)i=i.nextSibling;return!i||i.nodeType==Node.TEXT_NODE&&""===i.textContent&&f(i)}function m(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0}function g(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0}function v(e){return e===t.el}function b(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&(e.getAttribute("class")||"").indexOf("fr-deletable")>=0}function y(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(v(e)||e.type||e.href||~e.tabIndex)}function w(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}function _(t,n){return t instanceof e&&(t=t.get(0)),t&&t.classList&&t.classList.contains(n)}function T(e){return t.browser.msie?e:{acceptNode:e}}return{isBlock:i,isEmpty:s,blockParent:a,deepestParent:r,rawAttributes:l,attributes:c,clearAttributes:d,openTagString:u,closeTagString:p,isFirstSibling:h,isLastSibling:f,isList:g,isLink:o,isElement:v,contents:n,isVoid:m,hasFocus:y,isEditable:w,isDeletable:b,hasClass:_,filter:T}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function n(n,i){return e('<span class="fr-marker" data-id="'+i+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}function i(i,o,s){var a,r,l;try{var c=i.cloneRange();if(c.collapse(o),c.insertNode(n(o,s)),!0===o)for(l=(a=t.$el.find('span.fr-marker[data-type="true"][data-id="'+s+'"]').get(0)).nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=a.nextSibling;if(!0===o&&!i.collapsed){for(;!t.node.isElement(a.parentNode)&&!l;)e(a.parentNode).after(a),l=a.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){r=[l];do{l=r[0],r=t.node.contents(l)}while(r[0]&&t.node.isBlock(r[0]));e(l).prepend(e(a))}}if(!1===o&&!i.collapsed){if((l=(a=t.$el.find('span.fr-marker[data-type="false"][data-id="'+s+'"]').get(0)).previousSibling)&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){r=[l];do{l=r[r.length-1],r=t.node.contents(l)}while(r[r.length-1]&&t.node.isBlock(r[r.length-1]));e(l).append(e(a))}a.parentNode&&["TD","TH"].indexOf(a.parentNode.tagName)>=0&&a.parentNode.previousSibling&&!a.previousSibling&&e(a.parentNode.previousSibling).append(a)}var d=t.$el.find('span.fr-marker[data-type="'+o+'"][data-id="'+s+'"]').get(0);return d&&(d.style.display="none"),d}catch(e){return null}}function o(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),i=n.commonAncestorContainer;if(i!=t.el&&0===t.$el.find(i).length)return null;var o=n.cloneRange(),s=n.cloneRange();o.collapse(!0);var a=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(o.insertNode(a),a=t.$el.find("span.fr-marker").get(0)){for(var r=a.nextSibling;r&&r.nodeType===Node.TEXT_NODE&&0===r.textContent.length;)e(r).remove(),r=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(s),a}return null}catch(e){}}function s(){t.selection.isCollapsed()||t.selection.remove();var n=t.$el.find(".fr-marker").get(0);if(null==n&&(n=o()),null==n)return null;var i=t.node.deepestParent(n);if(i||(i=t.node.blockParent(n))&&"LI"!=i.tagName&&(i=null),i)if(t.node.isBlock(i)&&t.node.isEmpty(i))"LI"!=i.tagName||i.parentNode.firstElementChild!=i||t.node.isEmpty(i.parentNode)?e(i).replaceWith('<span class="fr-marker"></span>'):e(i).append('<span class="fr-marker"></span>');else if(t.cursor.isAtStart(n,i))e(i).before('<span class="fr-marker"></span>'),e(n).remove();else if(t.cursor.isAtEnd(n,i))e(i).after('<span class="fr-marker"></span>'),e(n).remove();else{var s=n,a="",r="";do{s=s.parentNode,a+=t.node.closeTagString(s),r=t.node.openTagString(s)+r}while(s!=i);e(n).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(i)+e(i).html()+t.node.closeTagString(i);l=l.replace(/<span id="fr-break"><\/span>/g,a+'<span class="fr-marker"></span>'+r),e(i).replaceWith(l)}return t.$el.find(".fr-marker").get(0)}function a(e){var n=e.clientX,i=e.clientY;r();var s,a=null;if(void 0!==t.doc.caretPositionFromPoint?(s=t.doc.caretPositionFromPoint(n,i),(a=t.doc.createRange()).setStart(s.offsetNode,s.offset),a.setEnd(s.offsetNode,s.offset)):void 0!==t.doc.caretRangeFromPoint&&(s=t.doc.caretRangeFromPoint(n,i),(a=t.doc.createRange()).setStart(s.startContainer,s.startOffset),a.setEnd(s.startContainer,s.startOffset)),null!==a&&void 0!==t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(a)}else if(void 0!==t.doc.body.createTextRange)try{(a=t.doc.body.createTextRange()).moveToPoint(n,i);var c=a.duplicate();c.moveToPoint(n,i),a.setEndPoint("EndToEnd",c),a.select()}catch(e){return!1}o()}function r(){t.$el.find(".fr-marker").remove()}return{place:i,insert:o,split:s,insertAtPoint:a,remove:r}},e.FE.MODULES.selection=function(t){function n(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function i(){return t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function o(e){var n=i(),o=[];if(n&&n.getRangeAt&&n.rangeCount){o=[];for(var s=0;s<n.rangeCount;s++)o.push(n.getRangeAt(s))}else o=t.doc.createRange?[t.doc.createRange()]:[];return void 0!==e?o[e]:o}function s(){var e=i();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(e){}}function a(){var s=i();try{if(s.rangeCount){var a,r=o(0),l=r.startContainer;if(l.nodeType==Node.TEXT_NODE&&r.startOffset==(l.textContent||"").length&&l.nextSibling&&(l=l.nextSibling),l.nodeType==Node.ELEMENT_NODE){var c=!1;if(l.childNodes.length>0&&l.childNodes[r.startOffset]){for(a=l.childNodes[r.startOffset];a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.length;)a=a.nextSibling;if(a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0),!c&&l.childNodes.length>1&&r.startOffset>0&&l.childNodes[r.startOffset-1]){for(a=l.childNodes[r.startOffset-1];a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.length;)a=a.nextSibling;a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0)}}else!r.collapsed&&l.nextSibling&&l.nextSibling.nodeType==Node.ELEMENT_NODE&&(a=l.nextSibling)&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0);!c&&l.childNodes.length>0&&e(l.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(l.childNodes[0].tagName)<0&&(l=l.childNodes[0])}for(;l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var d=l;d&&"HTML"!=d.tagName;){if(d==t.el)return l;d=e(d).parent()[0]}}}catch(e){}return t.el}function r(){var s=i();try{if(s.rangeCount){var a,r=o(0),l=r.endContainer;if(l.nodeType==Node.ELEMENT_NODE){var c=!1;l.childNodes.length>0&&l.childNodes[r.endOffset]&&e(l.childNodes[r.endOffset]).text()===n()?(l=l.childNodes[r.endOffset],c=!0):!r.collapsed&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE?(a=l.previousSibling)&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0):!r.collapsed&&l.childNodes.length>0&&l.childNodes[r.endOffset]&&(a=l.childNodes[r.endOffset].previousSibling).nodeType==Node.ELEMENT_NODE&&a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0),!c&&l.childNodes.length>0&&e(l.childNodes[l.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(l.childNodes[l.childNodes.length-1].tagName)<0&&(l=l.childNodes[l.childNodes.length-1])}for(l.nodeType==Node.TEXT_NODE&&0===r.endOffset&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE&&(l=l.previousSibling);l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var d=l;d&&"HTML"!=d.tagName;){if(d==t.el)return l;d=e(d).parent()[0]}}}catch(e){}return t.el}function l(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function c(){var n,s=[],a=i();if(w()&&a.rangeCount){var r=o();for(n=0;n<r.length;n++){var c,d=r[n],u=l(d.startContainer,d.startOffset),p=l(d.endContainer,d.endOffset);t.node.isBlock(u)&&s.indexOf(u)<0&&s.push(u),(c=t.node.blockParent(u))&&s.indexOf(c)<0&&s.push(c);for(var h=[],f=u;f!==p&&f!==t.el;)h.indexOf(f)<0&&f.children&&f.children.length?(h.push(f),f=f.children[0]):f.nextSibling?f=f.nextSibling:f.parentNode&&(f=f.parentNode,h.push(f)),t.node.isBlock(f)&&h.indexOf(f)<0&&s.indexOf(f)<0&&(f!==p||d.endOffset>0)&&s.push(f);t.node.isBlock(p)&&s.indexOf(p)<0&&d.endOffset>0&&s.push(p),(c=t.node.blockParent(p))&&s.indexOf(c)<0&&s.push(c)}}for(n=s.length-1;n>0;n--)e(s[n]).find(s).length&&("LI"!=s[n].tagName||s[n].children.length>0&&s.indexOf(s[n].children[0])>=0)&&s.splice(n,1);return s}function d(){if(t.$wp){t.markers.remove();var n,i,s=o(),a=[];for(i=0;i<s.length;i++)if(s[i].startContainer!==t.doc||t.browser.msie){var r=(n=s[i]).collapsed,l=t.markers.place(n,!0,i),c=t.markers.place(n,!1,i);void 0!==l&&l||!r||(e(".fr-marker").remove(),t.selection.setAtEnd(t.el)),t.el.normalize(),t.browser.safari&&!r&&((n=t.doc.createRange()).setStartAfter(l),n.setEndBefore(c),a.push(n))}if(t.browser.safari&&a.length)for(t.selection.clear(),i=0;i<a.length;i++)t.selection.get().addRange(a[i])}}function u(){var n,o=t.el.querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===o.length)return!1;if(t.browser.msie||t.browser.edge)for(n=0;n<o.length;n++)o[n].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),s();var a=i();for(n=0;n<o.length;n++){var r=e(o[n]).data("id"),l=o[n],c=t.doc.createRange(),d=t.$el.find('.fr-marker[data-type="false"][data-id="'+r+'"]');(t.browser.msie||t.browser.edge)&&d.css("display","inline-block");var u=null;if(d.length>0){d=d[0];try{for(var h,f=!1,m=l.nextSibling;m&&m.nodeType==Node.TEXT_NODE&&0===m.textContent.length;)h=m,m=m.nextSibling,e(h).remove();for(var g=d.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0===g.textContent.length;)h=g,g=g.nextSibling,e(h).remove();if(l.nextSibling==d||d.nextSibling==l){for(var v=l.nextSibling==d?l:d,b=v==l?d:l,y=v.previousSibling;y&&y.nodeType==Node.TEXT_NODE&&0===y.length;)h=y,y=y.previousSibling,e(h).remove();if(y&&y.nodeType==Node.TEXT_NODE)for(;y&&y.previousSibling&&y.previousSibling.nodeType==Node.TEXT_NODE;)y.previousSibling.textContent=y.previousSibling.textContent+y.textContent,y=y.previousSibling,e(y.nextSibling).remove();for(var w=b.nextSibling;w&&w.nodeType==Node.TEXT_NODE&&0===w.length;)h=w,w=w.nextSibling,e(h).remove();if(w&&w.nodeType==Node.TEXT_NODE)for(;w&&w.nextSibling&&w.nextSibling.nodeType==Node.TEXT_NODE;)w.nextSibling.textContent=w.textContent+w.nextSibling.textContent,w=w.nextSibling,e(w.previousSibling).remove();if(y&&(t.node.isVoid(y)||t.node.isBlock(y))&&(y=null),w&&(t.node.isVoid(w)||t.node.isBlock(w))&&(w=null),y&&w&&y.nodeType==Node.TEXT_NODE&&w.nodeType==Node.TEXT_NODE){e(l).remove(),e(d).remove();var _=y.textContent.length;y.textContent=y.textContent+w.textContent,e(w).remove(),t.spaces.normalize(y),c.setStart(y,_),c.setEnd(y,_),f=!0}else!y&&w&&w.nodeType==Node.TEXT_NODE?(e(l).remove(),e(d).remove(),t.spaces.normalize(w),u=e(t.doc.createTextNode("​")),e(w).before(u),c.setStart(w,0),c.setEnd(w,0),f=!0):!w&&y&&y.nodeType==Node.TEXT_NODE&&(e(l).remove(),e(d).remove(),t.spaces.normalize(y),u=e(t.doc.createTextNode("​")),e(y).after(u),c.setStart(y,y.textContent.length),c.setEnd(y,y.textContent.length),f=!0)}var T,E;f||((t.browser.chrome||t.browser.edge)&&l.nextSibling==d?(T=p(d,c,!0)||c.setStartAfter(d),E=p(l,c,!1)||c.setEndBefore(l)):(l.previousSibling==d&&(d=(l=d).nextSibling),d.nextSibling&&"BR"===d.nextSibling.tagName||!d.nextSibling&&t.node.isBlock(l.previousSibling)||l.previousSibling&&"BR"==l.previousSibling.tagName||(l.style.display="inline",d.style.display="inline",u=e(t.doc.createTextNode("​"))),T=p(l,c,!0)||e(l).before(u)&&c.setStartBefore(l),E=p(d,c,!1)||e(d).after(u)&&c.setEndAfter(d)),"function"==typeof T&&T(),"function"==typeof E&&E())}catch(e){}}u&&u.remove();try{a.addRange(c)}catch(e){}}t.markers.remove()}function p(n,i,o){var s,a=n.previousSibling,r=n.nextSibling;return a&&r&&a.nodeType==Node.TEXT_NODE&&r.nodeType==Node.TEXT_NODE?(s=a.textContent.length,o?(r.textContent=a.textContent+r.textContent,e(a).remove(),e(n).remove(),t.spaces.normalize(r),function(){i.setStart(r,s)}):(a.textContent=a.textContent+r.textContent,e(r).remove(),e(n).remove(),t.spaces.normalize(a),function(){i.setEnd(a,s)})):a&&!r&&a.nodeType==Node.TEXT_NODE?(s=a.textContent.length,o?(t.spaces.normalize(a),function(){i.setStart(a,s)}):(t.spaces.normalize(a),function(){i.setEnd(a,s)})):!(!r||a||r.nodeType!=Node.TEXT_NODE)&&(o?(t.spaces.normalize(r),function(){i.setStart(r,0)}):(t.spaces.normalize(r),function(){i.setEnd(r,0)}))}function h(){return!0}function f(){for(var e=o(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function m(e){var n,i,o=!1,s=!1;if(t.win.getSelection){var a=t.win.getSelection();a.rangeCount&&((i=(n=a.getRangeAt(0)).cloneRange()).selectNodeContents(e),i.setEnd(n.startContainer,n.startOffset),o=""===i.toString(),i.selectNodeContents(e),i.setStart(n.endContainer,n.endOffset),s=""===i.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&((i=(n=t.doc.selection.createRange()).duplicate()).moveToElementText(e),i.setEndPoint("EndToStart",n),o=""===i.text,i.moveToElementText(e),i.setEndPoint("StartToEnd",n),s=""===i.text);return{atStart:o,atEnd:s}}function g(){if(f())return!1;t.$el.find("td, th, img, br:not(:last)").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var n=!1,i=m(t.el);return i.atStart&&i.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n}function v(n,i){void 0===i&&(i=!0);var o=e(n).html();o&&o.replace(/\u200b/g,"").length!=o.length&&e(n).html(o.replace(/\u200b/g,""));for(var s=t.node.contents(n),a=0;a<s.length;a++)s[a].nodeType!=Node.ELEMENT_NODE?e(s[a]).remove():(v(s[a],0===a),0===a&&(i=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):i&&e(n).attr("data-first",!0)}function b(){return 0===e(this).find("fr-inner").length}function y(n,i){var o=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&t.node.hasClass(o[0],"fr-marker")&&n.attr("data-del-cell",!0);for(var s=0;s<o.length;s++){var a=o[s];t.node.hasClass(a,"fr-marker")?i=(i+1)%2:i?e(a).find(".fr-marker").length>0?i=y(e(a),i):["TD","TH"].indexOf(a.tagName)<0&&!t.node.hasClass(a,"fr-inner")?!t.opts.keepFormatOnDelete||t.$el.find("[data-first]").length>0?e(a).remove():v(a):t.node.hasClass(a,"fr-inner")?0===e(a).find(".fr-inner").length?e(a).html("<br>"):e(a).find(".fr-inner").filter(b).html("<br>"):(e(a).empty(),e(a).attr("data-del-cell",!0)):e(a).find(".fr-marker").length>0&&(i=y(e(a),i))}return i}function w(){try{if(!t.$wp)return!1;for(var e=o(0).commonAncestorContainer;e&&!t.node.isElement(e);)e=e.parentNode;return!!t.node.isElement(e)}catch(e){return!1}}function _(){if(f())return!0;var n;d();var i=function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var i=n;n=n.previousSibling,e(i).remove()}return n},o=function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var i=n;n=n.nextSibling,e(i).remove()}return n},s=t.$el.find('.fr-marker[data-type="true"]');for(n=0;n<s.length;n++)for(var a=s[n];!(i(a)||t.node.isBlock(a.parentNode)||t.$el.is(a.parentNode)||t.node.hasClass(a.parentNode,"fr-inner"));)e(a.parentNode).before(a);var r=t.$el.find('.fr-marker[data-type="false"]');for(n=0;n<r.length;n++){for(var l=r[n];!(o(l)||t.node.isBlock(l.parentNode)||t.$el.is(l.parentNode)||t.node.hasClass(l.parentNode,"fr-inner"));)e(l.parentNode).after(l);l.parentNode&&t.node.isBlock(l.parentNode)&&t.node.isEmpty(l.parentNode)&&!t.$el.is(l.parentNode)&&!t.node.hasClass(l.parentNode,"fr-inner")&&t.opts.keepFormatOnDelete&&e(l.parentNode).after(l)}if(h()){y(t.$el,0);var c=t.$el.find('[data-first="true"]');if(c.length)t.$el.find(".fr-marker").remove(),c.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),c.attr("data-text")&&c.replaceWith(c.html());else for(t.$el.find("table").filter((function(){return e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length})).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell"),s=t.$el.find('.fr-marker[data-type="true"]'),n=0;n<s.length;n++){var p=s[n],m=p.nextSibling,g=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(p).data("id")+'"]').get(0);if(g){if(p&&(!m||m!=g)){var v=t.node.blockParent(p),b=t.node.blockParent(g),w=!1,_=!1;if(v&&["UL","OL"].indexOf(v.tagName)>=0&&(v=null,w=!0),b&&["UL","OL"].indexOf(b.tagName)>=0&&(b=null,_=!0),e(p).after(g),v!=b)if(null!=v||w)if(null!=b||_||0!==e(v).parentsUntil(t.$el,"table").length)v&&b&&0===e(v).parentsUntil(t.$el,"table").length&&0===e(b).parentsUntil(t.$el,"table").length&&(e(v).append(e(b).html()),e(b).remove());else{for(m=v;!m.nextSibling&&m.parentNode!=t.el;)m=m.parentNode;for(m=m.nextSibling;m&&"BR"!=m.tagName;){var T=m.nextSibling;e(v).append(m),m=T}m&&"BR"==m.tagName&&e(m).remove()}else{var E=t.node.deepestParent(p);E?(e(E).after(e(b).html()),e(b).remove()):0===e(b).parentsUntil(t.$el,"table").length&&(e(p).next().after(e(b).html()),e(b).remove())}}}else g=e(p).clone().attr("data-type",!1),e(p).after(g)}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.spaces.normalize();var S=t.$el.find(".fr-marker:last").get(0),A=t.$el.find(".fr-marker:first").get(0);void 0!==S&&void 0!==A&&!S.nextSibling&&A.previousSibling&&"BR"==A.previousSibling.tagName&&t.node.isElement(S.parentNode)&&t.node.isElement(A.parentNode)&&t.$el.append("<br>"),u()}function T(n,i){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var o=n.firstChild;o&&(t.node.isBlock(o)||i&&!t.node.isVoid(o)&&o.nodeType==Node.ELEMENT_NODE);)n=o,o=o.firstChild;n.innerHTML=e.FE.MARKERS+n.innerHTML}function E(n,i){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var o=n.lastChild;o&&(t.node.isBlock(o)||i&&!t.node.isVoid(o)&&o.nodeType==Node.ELEMENT_NODE);)n=o,o=o.lastChild;var s=t.doc.createElement("SPAN");s.setAttribute("id","fr-sel-markers"),s.innerHTML=e.FE.MARKERS,n.appendChild(s);var a=n.querySelector("#fr-sel-markers");a.outerHTML=a.innerHTML}function S(n,i){void 0===i&&(i=!0);for(var o=n.previousSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.previousSibling;return o?(t.node.isBlock(o)?E(o):"BR"==o.tagName?e(o).before(e.FE.MARKERS):e(o).after(e.FE.MARKERS),!0):!!i&&(t.node.isBlock(n)?T(n):e(n).before(e.FE.MARKERS),!0)}function A(n,i){void 0===i&&(i=!0);for(var o=n.nextSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.nextSibling;return o?(t.node.isBlock(o)?T(o):e(o).before(e.FE.MARKERS),!0):!!i&&(t.node.isBlock(n)?E(n):e(n).after(e.FE.MARKERS),!0)}return{text:n,get:i,ranges:o,clear:s,element:a,endElement:r,save:d,restore:u,isCollapsed:f,isFull:g,inEditor:w,remove:_,blocks:c,info:m,setAtEnd:E,setAtStart:T,setBefore:S,setAfter:A,rangeElement:l}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){function n(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&e.getAttribute("class").indexOf("fr-marker")>=0)return!1;var i,o=t.node.contents(e),s=[];for(i=0;i<o.length;i++)o[i].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(o[i])?o[i].nodeType==Node.TEXT_NODE&&(o[i].textContent=o[i].textContent.replace(/\u200b/g,"")):o[i].textContent.replace(/\u200b/g,"").length!=o[i].textContent.length&&n(o[i]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),o=t.node.contents(e),s=e.querySelectorAll(".fr-marker"),o.length-s.length==0)){for(i=0;i<o.length;i++)if((o[i].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(i=0;i<s.length;i++)e.parentNode.insertBefore(s[i].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function i(e,n){if(e.nodeType==Node.COMMENT_NODE)return"\x3c!--"+e.nodeValue+"--\x3e";if(e.nodeType==Node.TEXT_NODE)return n?e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","NOSCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var o=document.createElement("div"),s=e.cloneNode(!0);return o.appendChild(s),o.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");var a=e.childNodes;if(0===a.length)return e.outerHTML;for(var r="",l=0;l<a.length;l++)"PRE"==e.tagName&&(n=!0),r+=i(a[l],n);return t.node.openTagString(e)+r+t.node.closeTagString(e)}function o(e){return M=[],(e=(e=(e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,(function(e){return M.push(e),"[FROALA.EDITOR.SCRIPT "+(M.length-1)+"]"}))).replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,(function(e){return M.push(e),"[FROALA.EDITOR.NOSCRIPT "+(M.length-1)+"]"}))).replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,(function(e){return"iframe".match(L)?(M.push(e),"[FROALA.EDITOR.IFRAME "+(M.length-1)+"]"):""}))).replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function s(e){return e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,(function(e,n){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":M[parseInt(n,10)]})),e=e.replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,(function(e,n){return t.opts.htmlRemoveTags.indexOf("noscript")>=0?"":M[parseInt(n,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")})),e=e.replace(/\[FROALA\.EDITOR\.IFRAME ([\d]*)\]/gi,(function(e,n){return t.opts.htmlRemoveTags.indexOf("iframe")>=0?"":M[parseInt(n,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")})),e.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function a(e){var t=e.replace(/;;/gi,";");return";"!=(t=t.replace(/^;/gi,"")).charAt(t.length)&&(t+=";"),t}function r(e){var n;for(n in e)if(e.hasOwnProperty(n)){var i=n.match(N),o=null;"style"==n&&t.opts.htmlAllowedStyleProps.length&&(o=e[n].match(D)),i&&o?e[n]=a(o.join(";")):i&&("style"!=n||o)||delete e[n]}for(var s="",r=Object.keys(e).sort(),l=0;l<r.length;l++)e[n=r[l]].indexOf('"')<0?s+=" "+n+'="'+e[n]+'"':s+=" "+n+"='"+e[n]+"'";return s}function l(e,n,i){if(t.opts.fullPage){var o=t.html.extractDoctype(i),s=r(t.html.extractNodeAttrs(i,"html"));return n=null==n?t.html.extractNode(i,"head")||"<title></title>":n,o+"<html"+s+"><head"+r(t.html.extractNodeAttrs(i,"head"))+">"+n+"</head><body"+r(t.html.extractNodeAttrs(i,"body"))+">"+e+"</body></html>"}return e}function c(n,o){var s,a=e("<div>"+n+"</div>"),r="";if(a){var l=t.node.contents(a.get(0));for(s=0;s<l.length;s++)o(l[s]);for(l=t.node.contents(a.get(0)),s=0;s<l.length;s++)r+=i(l[s])}return r}function d(e,n,i){var a=e=o(e),r=null;return t.opts.fullPage&&(a=t.html.extractNode(e,"body")||(e.indexOf("<body")>=0?"":e),i&&(r=t.html.extractNode(e,"head")||"")),a=c(a,n),r&&(r=c(r,n)),s(l(a,r,e))}function u(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,n)}function p(){var n=t.el.querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(n.length){var i=!1;t.el.querySelector(".fr-marker")||(t.selection.save(),i=!0);for(var o=0;o<n.length;o++)""===t.node.attributes(n[o])&&e(n[o]).replaceWith("<"+e.FE.HTML5Map[n[o].tagName]+">"+n[o].innerHTML+"</"+e.FE.HTML5Map[n[o].tagName]+">");i&&t.selection.restore()}}function h(e){var n=t.doc.createElement("DIV");return n.innerText=e,n.textContent}function f(n){if("SPAN"==n.tagName&&(n.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;if("PRE"==n.tagName&&g(n),n.nodeType==Node.ELEMENT_NODE&&(n.getAttribute("data-fr-src")&&0!==n.getAttribute("data-fr-src").indexOf("blob:")&&n.setAttribute("data-fr-src",t.helpers.sanitizeURL(h(n.getAttribute("data-fr-src")))),n.getAttribute("href")&&n.setAttribute("href",t.helpers.sanitizeURL(h(n.getAttribute("href")))),n.getAttribute("src")&&n.setAttribute("src",t.helpers.sanitizeURL(h(n.getAttribute("src")))),["TABLE","TBODY","TFOOT","TR"].indexOf(n.tagName)>=0&&(n.innerHTML=n.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&n.nodeType==Node.ELEMENT_NODE&&"IMG"==n.tagName&&n.getAttribute("data-fr-src")&&0===n.getAttribute("data-fr-src").indexOf("file://"))return n.parentNode.removeChild(n),!1;if(n.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[n.tagName]&&""===t.node.attributes(n)){var i=e.FE.HTML5Map[n.tagName],o="<"+i+">"+n.innerHTML+"</"+i+">";n.insertAdjacentHTML("beforebegin",o),(n=n.previousSibling).parentNode.removeChild(n.nextSibling)}if(t.opts.htmlAllowComments||n.nodeType!=Node.COMMENT_NODE)if(n.tagName&&n.tagName.match(R))n.parentNode.removeChild(n);else if(n.tagName&&!n.tagName.match(L))"svg"===n.tagName?n.parentNode.removeChild(n):t.browser.safari&&"path"==n.tagName&&n.parentNode&&"svg"==n.parentNode.tagName||(n.outerHTML=n.innerHTML);else{var s=n.attributes;if(s)for(var r=s.length-1;r>=0;r--){var l=s[r],c=l.nodeName.match(N),d=null;"style"==l.nodeName&&t.opts.htmlAllowedStyleProps.length&&(d=l.value.match(D)),c&&d?l.value=a(d.join(";")):c&&("style"!=l.nodeName||d)||n.removeAttribute(l.nodeName)}}else 0!==n.data.indexOf("[FROALA.EDITOR")&&n.parentNode.removeChild(n)}function m(e){for(var n=t.node.contents(e),i=0;i<n.length;i++)n[i].nodeType!=Node.TEXT_NODE&&m(n[i]);f(e)}function g(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function v(n,i,o,s){void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===s&&(s=!1),n=n.replace(/<br> */g,"<br>");var a,r=e.merge([],t.opts.htmlAllowedTags);for(a=0;a<i.length;a++)r.indexOf(i[a])>=0&&r.splice(r.indexOf(i[a]),1);var l=e.merge([],t.opts.htmlAllowedAttrs);for(a=0;a<o.length;a++)l.indexOf(o[a])>=0&&l.splice(l.indexOf(o[a]),1);return l.push("data-fr-.*"),l.push("fr-.*"),L=new RegExp("^"+r.join("$|^")+"$","gi"),N=new RegExp("^"+l.join("$|^")+"$","gi"),R=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),D=t.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+t.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,d(n,m,!0)}function b(){for(var n=t.el.querySelectorAll("blockquote + blockquote"),i=0;i<n.length;i++){var o=n[i];t.node.attributes(o)==t.node.attributes(o.previousSibling)&&(e(o).prev().append(e(o).html()),e(o).remove())}}function y(){for(var e=t.el.querySelectorAll("tr"),n=0;n<e.length;n++){for(var i=e[n].children,o=!0,s=0;s<i.length;s++)if("TH"!=i[s].tagName){o=!1;break}if(!1!==o&&0!==i.length){for(var a=e[n];a&&"TABLE"!=a.tagName&&"THEAD"!=a.tagName;)a=a.parentNode;var r=a;"THEAD"!=r.tagName&&(r=t.doc.createElement("THEAD"),a.insertBefore(r,a.firstChild)),r.appendChild(e[n])}}}function w(){var n=t.html.defaultTag();if(n)for(var i=t.el.querySelectorAll("td > "+n+", th > "+n),o=0;o<i.length;o++)""===t.node.attributes(i[o])&&e(i[o]).replaceWith(i[o].innerHTML+"<br>")}function _(){y(),w()}function T(){var e=[],n=function(e){return!t.node.isList(e.parentNode)};do{if(e.length){var i=e[0],o=t.doc.createElement("ul");i.parentNode.insertBefore(o,i);do{var s=i;i=i.nextSibling,o.appendChild(s)}while(i&&"LI"==i.tagName)}e=[];for(var a=t.el.querySelectorAll("li"),r=0;r<a.length;r++)n(a[r])&&e.push(a[r])}while(e.length>0)}function E(){for(var e=t.el.querySelectorAll("ol + ol, ul + ul"),n=0;n<e.length;n++){var i=e[n];if(t.node.isList(i.previousSibling)&&t.node.openTagString(i)==t.node.openTagString(i.previousSibling)){for(var o=t.node.contents(i),s=0;s<o.length;s++)i.previousSibling.appendChild(o[s]);i.parentNode.removeChild(i)}}}function S(){var e,n,i=function(e){e.querySelector("LI")||(n=!0,e.parentNode.removeChild(e))};do{n=!1;var o=t.el.querySelectorAll("li:empty");for(e=0;e<o.length;e++)o[e].parentNode.removeChild(o[e]);var s=t.el.querySelectorAll("ul, ol");for(e=0;e<s.length;e++)i(s[e])}while(!0===n)}function A(){for(var n=t.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),i=0;i<n.length;i++){var o=n[i],s=o.previousSibling;s&&("LI"==s.tagName?s.appendChild(o):e(o).wrap("<li></li>"))}}function C(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),i=0;i<n.length;i++){var o=n[i];if(o.nextSibling){var s=o.nextSibling,a=e("<li>");e(o.parentNode).after(a);do{var r=s;s=s.nextSibling,a.append(r)}while(s)}}}function k(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),i=0;i<n.length;i++){var o=n[i];if(t.node.isFirstSibling(o))e(o).before("<br/>");else if(o.previousSibling&&"BR"==o.previousSibling.tagName){for(var s=o.previousSibling.previousSibling;s&&t.node.hasClass(s,"fr-marker");)s=s.previousSibling;s&&"BR"!=s.tagName&&e(o.previousSibling).remove()}}}function x(){for(var n=t.el.querySelectorAll("li:empty"),i=0;i<n.length;i++)e(n[i]).remove()}function $(){for(var n=t.el.querySelectorAll("ul, ol"),i=0;i<n.length;i++)for(var o=t.node.contents(n[i]),s=null,a=o.length-1;a>=0;a--)"LI"!=o[a].tagName?(s||(s=e("<li>")).insertBefore(o[a]),s.prepend(o[a])):s=null}function I(){T(),E(),$(),S(),A(),C(),k(),x()}function O(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var L,R,N,D,M=[];return{_init:O,html:v,toHTML5:p,tables:_,lists:I,quotes:b,invisibleSpaces:u,exec:d}},e.FE.MODULES.spaces=function(t){function n(n,i){var o=n.previousSibling,s=n.nextSibling,a=n.textContent,r=n.parentNode;if(!t.html.isPreformatted(r)){i&&(a=a.replace(/[\f\n\r\t\v ]{2,}/g," "),s&&"BR"!==s.tagName&&!t.node.isBlock(s)||!t.node.isBlock(r)&&!t.node.isLink(r)||(a=a.replace(/[\f\n\r\t\v ]{1,}$/g,"")),o&&"BR"!==o.tagName&&!t.node.isBlock(o)||!t.node.isBlock(r)&&!t.node.isLink(r)||(a=a.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===a&&(o&&o.nodeType!=Node.TEXT_NODE||s&&s.nodeType!=Node.TEXT_NODE)&&(a="")),a=a.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var l="",c=0;c<a.length;c++)32!=a.charCodeAt(c)||0!==c&&32!=l.charCodeAt(c-1)?l+=a[c]:l+=e.FE.UNICODE_NBSP;(!s||s&&t.node.isBlock(s)||s&&s.nodeType==Node.ELEMENT_NODE&&t.win.getComputedStyle(s)&&"block"==t.win.getComputedStyle(s).display)&&(l=l.replace(/ $/,e.FE.UNICODE_NBSP)),!o||t.node.isVoid(o)||t.node.isBlock(o)||1!==(l=l.replace(/^\u00A0([^ $])/," $1")).length||160!==l.charCodeAt(0)||!s||t.node.isVoid(s)||t.node.isBlock(s)||(l=" "),l=l.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=l&&(n.textContent=l)}}function i(e,i){if(void 0!==e&&e||(e=t.el),void 0===i&&(i=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)n(e,i);else if(e.nodeType==Node.ELEMENT_NODE)for(var o=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter((function(e){for(var n=e.parentNode;n&&n!==t.el;){if("STYLE"==n.tagName||"IFRAME"==n.tagName)return!1;if("PRE"===n.tagName)return!1;n=n.parentNode}return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!t.node.hasClass(e.parentNode,"fr-marker")})),!1);o.nextNode();)n(o.currentNode,i)}function o(){for(var e=[],n=t.el.querySelectorAll(".fr-marker"),o=0;o<n.length;o++){for(var s=null,a=(s=t.node.blockParent(n[o])||n[o]).nextSibling,r=s.previousSibling;a&&"BR"==a.tagName;)a=a.nextSibling;for(;r&&"BR"==r.tagName;)r=r.previousSibling;s&&e.indexOf(s)<0&&e.push(s),r&&e.indexOf(r)<0&&e.push(r),a&&e.indexOf(a)<0&&e.push(a)}for(var l=0;l<e.length;l++)i(e[l])}return{normalize:i,normalizeAroundCursor:o}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon",".fr-inner"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),e.FE.MODULES.html=function(t){function n(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function i(e,n){return!(!e||e===t.el)&&(n?-1!=["PRE","SCRIPT","STYLE"].indexOf(e.tagName)||i(e.parentNode,n):-1!=["PRE","SCRIPT","STYLE"].indexOf(e.tagName))}function o(n){var i,o=[],s=[];if(n){var r=t.el.querySelectorAll(".fr-marker");for(i=0;i<r.length;i++){var l=t.node.blockParent(r[i])||r[i];if(l){var c=l.nextSibling,d=l.previousSibling;l&&s.indexOf(l)<0&&t.node.isBlock(l)&&s.push(l),d&&t.node.isBlock(d)&&s.indexOf(d)<0&&s.push(d),c&&t.node.isBlock(c)&&s.indexOf(c)<0&&s.push(c)}}}else s=t.el.querySelectorAll(a());var u=a();for(u+=","+e.FE.VOID_ELEMENTS.join(","),u+=", .fr-inner",u+=","+t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",i=s.length-1;i>=0;i--)if(!(s[i].textContent&&s[i].textContent.replace(/\u200B|\n/g,"").length>0||s[i].querySelectorAll(u).length>0)){for(var p=t.node.contents(s[i]),h=!1,f=0;f<p.length;f++)if(p[f].nodeType!=Node.COMMENT_NODE&&p[f].textContent&&p[f].textContent.replace(/\u200B|\n/g,"").length>0){h=!0;break}h||o.push(s[i])}return o}function s(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function a(){return e.FE.BLOCK_TAGS.join(", ")}function r(n){var i,o,s=e.merge([],e.FE.VOID_ELEMENTS);s=e.merge(s,t.opts.htmlAllowedEmptyTags),void 0===n&&(s=e.merge(s,e.FE.BLOCK_TAGS)),i=t.el.querySelectorAll("*:empty:not("+s.join("):not(")+"):not(.fr-marker)");do{o=!1;for(var a=0;a<i.length;a++)0!==i[a].attributes.length&&void 0===i[a].getAttribute("href")||(i[a].parentNode.removeChild(i[a]),o=!0);i=t.el.querySelectorAll("*:empty:not("+s.join("):not(")+"):not(.fr-marker)")}while(i.length&&o)}function l(e,i){var o=n();if(i&&(o="div"),o){for(var s=t.doc.createDocumentFragment(),a=null,r=!1,l=e.firstChild,c=!1;l;){var d=l.nextSibling;if(l.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(l)||t.opts.htmlDoNotWrapTags.indexOf(l.tagName.toLowerCase())>=0&&!t.node.hasClass(l,"fr-marker")))a=null,s.appendChild(l.cloneNode(!0));else if(l.nodeType!=Node.ELEMENT_NODE&&l.nodeType!=Node.TEXT_NODE)a=null,s.appendChild(l.cloneNode(!0));else if("BR"==l.tagName)null==a?(a=t.doc.createElement(o),i&&a.setAttribute("class","fr-temp-div"),a.setAttribute("data-empty",!0),a.appendChild(l.cloneNode(!0)),s.appendChild(a),c=!0):!1===r&&(a.appendChild(t.doc.createElement("br")),i&&a.setAttribute("class","fr-temp-div"),a.setAttribute("data-empty",!0)),a=null;else{var u=l.textContent;l.nodeType==Node.TEXT_NODE&&0===u.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==a&&(a=t.doc.createElement(o),i&&a.setAttribute("class","fr-temp-div"),s.appendChild(a),r=!1,c=!0),a.appendChild(l.cloneNode(!0)),r||t.node.hasClass(l,"fr-marker")||l.nodeType==Node.TEXT_NODE&&0===u.replace(/ /g,"").length||(r=!0))}l=d}c&&(e.innerHTML="",e.appendChild(s))}}function c(e,t){for(var n=0;n<e.length;n++)l(e[n],t)}function d(e,n,i,o){if(!t.$wp)return!1;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===o&&(o=!1);var s=t.$wp.scrollTop();l(t.el,e),o&&c(t.el.querySelectorAll(".fr-inner"),e),n&&c(t.el.querySelectorAll("td, th"),e),i&&c(t.el.querySelectorAll("blockquote"),e),s!=t.$wp.scrollTop()&&t.$wp.scrollTop(s)}function u(){t.$el.find("div.fr-temp-div").each((function(){e(this).attr("data-empty")||["LI"].indexOf(this.parentNode.tagName)>=0||t.node.isBlock(this.nextSibling)&&!e(this.nextSibling).hasClass("fr-temp-div")?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")})),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter((function(){return""===e(this).attr("class")})).removeAttr("class")}function p(n){for(var i=o(n),s=0;s<i.length;s++){var a=i[s];"false"===a.getAttribute("contenteditable")||a.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||t.node.isVoid(a)||"TABLE"!=a.tagName&&"TBODY"!=a.tagName&&"TR"!=a.tagName&&"UL"!=a.tagName&&"OL"!=a.tagName&&a.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var r=t.node.contents(t.el);r.length&&r[r.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}}function h(){return t.$el.get(0).querySelectorAll(a())}function f(e){if(void 0===e&&(e=t.el),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter((function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)})),!1);n.nextNode();){var o=n.currentNode;if(!i(o.parentNode,!0)){var s=t.node.isBlock(o.parentNode)||t.node.isElement(o.parentNode),a=o.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(s){var r=o.previousSibling,l=o.nextSibling;r&&l&&" "==a?a=t.node.isBlock(r)&&t.node.isBlock(l)?"":"\n":(r||(a=a.replace(/^ */,"")),l||(a=a.replace(/ *$/,"")))}o.textContent=a}}}function m(e,t,n){var i=new RegExp(t,"gi").exec(e);return i?i[n]:null}function g(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function v(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function b(n,i){var o=n.parentNode;if(o&&(t.node.isBlock(o)||t.node.isElement(o))&&["TD","TH"].indexOf(o.tagName)<0){for(var s=n.previousSibling,a=n.nextSibling;s&&s.nodeType==Node.TEXT_NODE&&0===s.textContent.replace(/\n|\r/g,"").length;)s=s.previousSibling;s&&o&&"BR"!=s.tagName&&!t.node.isBlock(s)&&!a&&o.textContent.replace(/\u200B/g,"").length>0&&s.textContent.length>0&&!t.node.hasClass(s,"fr-marker")&&(t.el==o&&!a&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(i&&t.selection.save(),n.parentNode.removeChild(n),i&&t.selection.restore()))}else!o||t.node.isBlock(o)||t.node.isElement(o)||n.previousSibling||n.nextSibling||b(n.parentNode,i)}function y(){var e,n,i=t.selection.element(),o=[];if(e=t.node.isBlock(i)?i:t.node.blockParent(i)){var s=e.nextSibling,a=e.previousSibling;e&&o.indexOf(e)<0&&o.push(e),a&&t.node.isBlock(a)&&o.indexOf(a)<0&&o.push(a),s&&t.node.isBlock(s)&&o.indexOf(s)<0&&o.push(s)}var r=[];for(n=0;n<o.length;n++)for(var l=o[n].querySelectorAll("br"),c=0;c<l.length;c++)r.indexOf(l[c])<0&&r.push(l[c]);if(i.parentNode==t.el){var d=t.el.children;for(n=0;n<d.length;n++)"BR"==d[n].tagName&&r.indexOf(d[n])<0&&r.push(d[n])}return r}function w(e,n){var i,o=null;if(e)for(o=y(),i=0;i<o.length;i++)b(o[i],n);else for(o=t.el.getElementsByTagName("br"),i=0;i<o.length;i++)b(o[i],n)}function _(){t.opts.htmlUntouched||(r(),d()),f(),t.opts.htmlUntouched||(t.spaces.normalize(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.html.cleanBRs()),t.selection.restore(),T(),t.placeholder.refresh()}function T(){t.core.isEmpty()&&(null!=n()?t.el.querySelector(a())||t.el.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FE.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):t.el.querySelector("*:not(.fr-marker):not(br)")||(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function E(e,t){return m(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function S(n,i){var o=e("<div "+(m(n,"<"+i+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(o.get(0))}function A(e){return m(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function C(e,n){t.opts.htmlExecuteScripts?e.html(n):e.get(0).innerHTML=n}function k(n){var i=t.clean.html(n||"",[],[],t.opts.fullPage);if(t.opts.fullPage){var o=E(i,"body")||(i.indexOf("<body")>=0?"":i),s=S(i,"body"),a=E(i,"head")||"<title></title>",r=S(i,"head"),l=e("<div>").append(a).contents().each((function(){(this.nodeType==Node.COMMENT_NODE||["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0)&&this.parentNode.removeChild(this)})).end().html().trim();a=e("<div>").append(a).contents().map((function(){return this.nodeType==Node.COMMENT_NODE?"\x3c!--"+this.nodeValue+"--\x3e":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0?this.outerHTML:""})).toArray().join("");var c=A(i),d=S(i,"html");C(t.$el,l+"\n"+o),t.node.clearAttributes(t.el),t.$el.attr(s),t.$el.addClass("fr-view"),t.$el.attr("spellcheck",t.opts.spellcheck),t.$el.attr("dir",t.opts.direction),C(t.$head,a),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(r),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(d),t.iframe_document.doctype.parentNode.replaceChild(g(c,t.iframe_document),t.iframe_document.doctype)}else C(t.$el,i);var u=t.edit.isDisabled();t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),_(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each((function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")})),t.$el.find("[fr-original-style]").each((function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")}))),u&&t.edit.off(),t.events.trigger("html.set")}function x(e){var t=/(#[^\s\+>~\.\[:]+)/g,n=/(\[[^\]]+\])/g,i=/(\.[^\s\+>~\.\[:]+)/g,o=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,s=/(:[\w-]+\([^\)]*\))/gi,a=/(:[^\s\+>~\.\[:]+)/g,r=/([^\s\+>~\.\[:]+)/g;return function(){var t=/:not\(([^\)]*)\)/g;t.test(e)&&(e=e.replace(t,"     $1 "))}(),100*(e.match(t)||[]).length+10*(e.match(n)||[]).length+10*(e.match(i)||[]).length+10*(e.match(s)||[]).length+10*(e.match(a)||[]).length+(e.match(o)||[]).length+((e=(e=e.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).match(r)||[]).length}function $(e){if(t.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""===e.getAttribute("class")&&e.removeAttribute("class"),e&&e.getAttribute&&""===e.getAttribute("style")&&e.removeAttribute("style"),e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll('[class=""],[style=""]'),i=0;i<n.length;i++){var o=n[i];""===o.getAttribute("class")&&o.removeAttribute("class"),""===o.getAttribute("style")&&o.removeAttribute("style")}}function I(e,t){return e[3]-t[3]}function O(e,n){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var i="";t.events.trigger("html.beforeGet");var o,s,a=[],r={},l=[];if(!t.opts.useClasses&&!n){var c=new RegExp("^"+t.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(o=0;o<t.doc.styleSheets.length;o++){var d,u=0;try{d=t.doc.styleSheets[o].cssRules,t.doc.styleSheets[o].ownerNode&&"STYLE"==t.doc.styleSheets[o].ownerNode.nodeType&&(u=1)}catch(e){}if(d)for(var p=0,h=d.length;p<h;p++)if(d[p].selectorText&&d[p].style.cssText.length>0){var f,m=d[p].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{f=t.el.querySelectorAll(m)}catch(e){f=[]}for(s=0;s<f.length;s++){!f[s].getAttribute("fr-original-style")&&f[s].getAttribute("style")?(f[s].setAttribute("fr-original-style",f[s].getAttribute("style")),a.push(f[s])):f[s].getAttribute("fr-original-style")||a.push(f[s]),r[f[s]]||(r[f[s]]={});for(var g=1e3*u+x(d[p].selectorText),b=d[p].style.cssText.split(";"),y=0;y<b.length;y++){var w=b[y].trim().split(":")[0];w.match(c)||(r[f[s]][w]||(r[f[s]][w]=0,(f[s].getAttribute("fr-original-style")||"").indexOf(w+":")>=0&&(r[f[s]][w]=1e4)),g>=r[f[s]][w]&&(r[f[s]][w]=g,b[y].trim().length&&l.push([f[s],w.trim(),b[y].trim().split(":")[1].trim(),g])))}}}}for(l.sort(I),o=0;o<l.length;o++){var _=l[o];_[0].style[_[1]]=_[2]}for(o=0;o<a.length;o++)if(a[o].getAttribute("class")&&(a[o].setAttribute("fr-original-class",a[o].getAttribute("class")),a[o].removeAttribute("class")),(a[o].getAttribute("fr-original-style")||"").trim().length>0){var T=a[o].getAttribute("fr-original-style").split(";");for(s=0;s<T.length;s++)T[s].indexOf(":")>0&&(a[o].style[T[s].split(":")[0].trim()]=T[s].split(":")[1].trim())}}if(t.core.isEmpty()?t.opts.fullPage&&(i=v(t.iframe_document),i+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.find("head").get(0).outerHTML+"<body></body></html>"):(void 0===e&&(e=!1),t.opts.fullPage?(i=v(t.iframe_document),t.$el.removeClass("fr-view"),i+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>",t.$el.addClass("fr-view")):i=t.$el.html()),!t.opts.useClasses&&!n)for(o=0;o<a.length;o++)a[o].getAttribute("fr-original-class")&&(a[o].setAttribute("class",a[o].getAttribute("fr-original-class")),a[o].removeAttribute("fr-original-class")),a[o].getAttribute("fr-original-style")?(a[o].setAttribute("style",a[o].getAttribute("fr-original-style")),a[o].removeAttribute("fr-original-style")):a[o].removeAttribute("style");t.opts.fullPage&&(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,"")).replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,"")).replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,"")).replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")).replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>')).replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(i=i.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(i=i.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),i=t.clean.invisibleSpaces(i),i=t.clean.exec(i,$);var E=t.events.chainTrigger("html.get",i);return"string"==typeof E&&(i=E),i.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,(function(e){return e.replace(/<br>/g,"\n")}))}function L(){var n=function(n,i){for(;i&&(i.nodeType==Node.TEXT_NODE||!t.node.isBlock(i))&&!t.node.isElement(i);)i&&i.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(i)+t.node.closeTagString(i)),i=i.parentNode;i&&n.innerHTML==i.innerHTML&&(n.innerHTML=i.outerHTML)},i=function(){var n,i=null;return t.win.getSelection?(n=t.win.getSelection())&&n.rangeCount&&(i=n.getRangeAt(0).commonAncestorContainer).nodeType!=Node.ELEMENT_NODE&&(i=i.parentNode):(n=t.doc.selection)&&"Control"!=n.type&&(i=n.createRange().parentElement()),null!=i&&(e.inArray(t.el,e(i).parents())>=0||i==t.el)?i:null},o="";if(void 0!==t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var s=t.selection.ranges(),a=0;a<s.length;a++){var r=document.createElement("div");r.appendChild(s[a].cloneContents());var l=r.children;if(l.length){var c=l[l.length-1];("P"==c.tagName&&t.opts.enter==e.FroalaEditor.ENTER_P||"DIV"==c.tagName&&t.opts.enter==e.FroalaEditor.ENTER_DIV)&&t.node.isEmpty(c)&&r.removeChild(c)}n(r,i()),e(r).find(".fr-element").length>0&&(r=t.el),o+=r.innerHTML}}else void 0!==t.doc.selection&&"Text"==t.doc.selection.type&&(o=t.doc.selection.createRange().htmlText);return o}function R(e){var n=t.doc.createElement("div");return n.innerHTML=e,null!==n.querySelector(a())}function N(e){var n=t.doc.createElement("div");return n.innerHTML=e,t.selection.setAtEnd(n),n.innerHTML}function D(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function M(n){if(!t.html.defaultTag())return n;var i=t.doc.createElement("div");i.innerHTML=n;for(var o=i.querySelectorAll(":scope > "+t.html.defaultTag()),s=o.length-1;s>=0;s--){var a=o[s];t.node.isBlock(a.previousSibling)||(a.previousSibling&&!t.node.isEmpty(a)&&e("<br>").insertAfter(a.previousSibling),a.outerHTML=a.innerHTML)}return i.innerHTML}function P(n,i,o){var s;if(t.selection.isCollapsed()||t.selection.remove(),s=(s=i?n:t.clean.html(n)).replace(/\r|\n/g," "),n.indexOf('class="fr-marker"')<0&&(s=N(s)),t.core.isEmpty()&&!t.opts.keepFormatOnDelete&&R(s))t.el.innerHTML=s;else{var a=t.markers.insert();if(a){t.node.isLastSibling(a)&&e(a).parent().hasClass("fr-deletable")&&e(a).insertAfter(e(a).parent());var r=t.node.blockParent(a);if((R(s)||o)&&(t.node.deepestParent(a)||r&&"LI"==r.tagName)){if(r&&"LI"==r.tagName&&(s=M(s)),!(a=t.markers.split()))return!1;a.outerHTML=s}else a.outerHTML=s}else t.el.innerHTML=t.el.innerHTML+s}_(),t.keys.positionCaret(),t.events.trigger("html.inserted")}function F(n){var i=null;if(void 0===n&&(i=t.selection.element()),t.opts.keepFormatOnDelete)return!1;var o,s,a=i?(i.textContent.match(/\u200B/g)||[]).length-i.querySelectorAll(".fr-marker").length:0;if((t.el.textContent.match(/\u200B/g)||[]).length-t.el.querySelectorAll(".fr-marker").length==a)return!1;do{s=!1,o=t.el.querySelectorAll("*:not(.fr-marker)");for(var r=0;r<o.length;r++){var l=o[r];if(i!=l){var c=l.textContent;0===l.children.length&&1===c.length&&8203==c.charCodeAt(0)&&"TD"!==l.tagName&&(e(l).remove(),s=!0)}}}while(s)}function B(){if(t.$wp){var e=function(){F(),t.placeholder&&setTimeout(t.placeholder.refresh,0)};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",T)}}return{defaultTag:n,isPreformatted:i,emptyBlocks:o,emptyBlockTagsQuery:s,blockTagsQuery:a,fillEmptyBlocks:p,cleanEmptyTags:r,cleanWhiteTags:F,cleanBlankSpaces:f,blocks:h,getDoctype:v,set:k,get:O,getSelected:L,insert:P,wrap:d,unwrap:u,escapeEntities:D,checkIfEmpty:T,extractNode:E,extractNodeAttrs:S,extractDoctype:A,cleanBRs:w,_init:B}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){n(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$wp.css("overflow","auto"),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom")))):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function i(){if(!e.$wp)return!1;n(),e.$iframe&&(e.events.on("keyup keydown",(function(){setTimeout(t,0)}),!0),e.events.on("commands.after html.set init initialized paste.after",t))}return{_init:i,syncIframe:t,refresh:n}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){function n(e){return o&&o.translation[e]&&o.translation[e].length?o.translation[e]:e}function i(){e.FE.LANGUAGE&&(o=e.FE.LANGUAGE[t.opts.language]),o&&o.direction&&(t.opts.direction=o.direction)}var o;return{_init:i,translate:n}},e.extend(e.FE.DEFAULTS,{placeholderText:"Type something"}),e.FE.MODULES.placeholder=function(t){function n(){t.$placeholder||a();var n=t.opts.iframe?t.$iframe.prev().outerHeight(!0):t.$el.prev().outerHeight(!0),i=0,o=0,s=0,r=0,l=0,c=0,d=t.node.contents(t.el),u=e(t.selection.element()).css("text-align");if(d.length&&d[0].nodeType==Node.ELEMENT_NODE){var p=e(d[0]);(!t.opts.toolbarInline||t.$el.prev().length>0)&&t.ready&&(i=t.helpers.getPX(p.css("margin-top")),r=t.helpers.getPX(p.css("padding-top")),o=t.helpers.getPX(p.css("margin-left")),s=t.helpers.getPX(p.css("margin-right")),l=t.helpers.getPX(p.css("padding-left")),c=t.helpers.getPX(p.css("padding-right"))),t.$placeholder.css("font-size",p.css("font-size")),t.$placeholder.css("line-height",p.css("line-height"))}else t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"));t.$wp.addClass("show-placeholder"),t.$placeholder.css({marginTop:Math.max(t.helpers.getPX(t.$el.css("margin-top")),i)+n,paddingTop:Math.max(t.helpers.getPX(t.$el.css("padding-top")),r),paddingLeft:Math.max(t.helpers.getPX(t.$el.css("padding-left")),l),marginLeft:Math.max(t.helpers.getPX(t.$el.css("margin-left")),o),paddingRight:Math.max(t.helpers.getPX(t.$el.css("padding-right")),c),marginRight:Math.max(t.helpers.getPX(t.$el.css("margin-right")),s),textAlign:u}).text(t.language.translate(t.opts.placeholderText||t.$oel.attr("placeholder")||"")),t.$placeholder.html(t.$placeholder.text().replace(/\n/g,"<br>"))}function i(){t.$wp.removeClass("show-placeholder")}function o(){return!t.$wp||t.node.hasClass(t.$wp.get(0),"show-placeholder")}function s(){if(!t.$wp)return!1;t.core.isEmpty()?n():i()}function a(){t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder)}function r(){if(!t.$wp)return!1;t.events.on("init input keydown keyup contentChanged initialized",s)}return{_init:r,show:n,hide:i,refresh:s,isVisible:o}},e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",(function(e){return e.preventDefault(),!1}))}catch(e){}}function n(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),a=!1}function i(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),a=!0}function o(){return a}function s(){e.events.on("focus",(function(){o()?e.edit.off():e.edit.on()}))}var a=!1;return{_init:s,on:n,off:i,disableDesign:t,isDisabled:o}},e.extend(e.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){function n(n){if(t.opts.iframe){t.$head.find("style[data-fr-style], link[data-fr-style]").remove(),t.$head.append('<style data-fr-style="true">'+n+"</style>");for(var i=0;i<t.opts.iframeStyleFiles.length;i++){var o=e('<link data-fr-style="true" rel="stylesheet" href="'+t.opts.iframeStyleFiles[i]+'">');o.get(0).addEventListener("load",t.size.syncIframe),t.$head.append(o)}}}function i(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function o(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),i(),t.opts.iframe){t.$iframe.addClass("fr-iframe"),t.$el.addClass("fr-view");for(var e=0;e<t.o_doc.styleSheets.length;e++){var n;try{n=t.o_doc.styleSheets[e].cssRules}catch(e){}if(n)for(var o=0,s=n.length;o<s;o++)!n[o].selectorText||0!==n[o].selectorText.indexOf(".fr-view")&&0!==n[o].selectorText.indexOf(".fr-element")||n[o].style.cssText.length>0&&(0===n[o].selectorText.indexOf(".fr-view")?t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-view/g,"body")+"{"+n[o].style.cssText+"}":t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-element/g,"body")+"{"+n[o].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"),t.opts.tabIndex=t.opts.tabIndex||t.$oel.attr("tabIndex"),t.opts.tabIndex&&t.$el.attr("tabIndex",t.opts.tabIndex)}function s(){return t.node.isEmpty(t.el)}function a(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.win.FormData,progress:"upload"in new XMLHttpRequest}}function r(e,n){var i=new XMLHttpRequest;for(var o in i.open(n,e,!0),t.opts.requestWithCredentials&&(i.withCredentials=!0),t.opts.requestHeaders)t.opts.requestHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,t.opts.requestHeaders[o]);return i}function l(e){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(e),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$el.html(""),t.$wp.html(""),t.$box.replaceWith(t.$oel),t.$oel.show()):(t.$wp.replaceWith(e),t.$el.html(""),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function c(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.el)||t.$el.find("*:focus").length>0}function d(e){if(!e)return!1;var n=e.data("instance");return!!n&&n.id==t.id}function u(){if(e.FE.INSTANCES.push(t),a(),t.$wp){o(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",(function(e){if(2==e.button)return!1}));try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(e){}}"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",(function(){t.$oel.val(t.html.get())})),t.events.on("form.submit",(function(){t.$oel.val(t.html.get())})),t.events.on("form.reset",(function(){t.html.set(t._original_html)})),t.$oel.val(t.html.get())),t.helpers.isIOS()&&t.events.$on(t.$doc,"selectionchange",(function(){t.$doc.get(0).hasFocus()||t.$win.get(0).focus()})),t.events.trigger("init")}return{_init:u,destroy:l,isEmpty:s,getXHR:r,injectStyle:n,hasFocus:c,sameInstance:d}},e.FE.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function i(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}function o(o){var s,a=n(o),r=a.nextSibling,l=a.previousSibling,c=t.html.defaultTag();if(t.node.isEmpty(a,!0)&&r){for(var d="",u="",p=o.parentNode;!t.node.isList(p)&&p.parentNode&&"LI"!==p.parentNode.tagName;)d=t.node.openTagString(p)+d,u+=t.node.closeTagString(p),p=p.parentNode;d=t.node.openTagString(p)+d,u+=t.node.closeTagString(p);var h="";for(h=p.parentNode&&"LI"==p.parentNode.tagName?u+"<li>"+e.FE.MARKERS+"<br>"+d:c?u+"<"+c+">"+e.FE.MARKERS+"<br></"+c+">"+d:u+e.FE.MARKERS+"<br>"+d,e(a).html('<span id="fr-break"></span>');["UL","OL"].indexOf(p.tagName)<0||p.parentNode&&"LI"===p.parentNode.tagName;)p=p.parentNode;var f=t.node.openTagString(p)+e(p).html()+t.node.closeTagString(p);f=f.replace(/<span id="fr-break"><\/span>/g,h),e(p).replaceWith(f),t.$el.find("li:empty").remove()}else if(l&&r||!t.node.isEmpty(a,!0)){for(var m="<br>",g=o.parentNode;g&&"LI"!=g.tagName;)m=t.node.openTagString(g)+m+t.node.closeTagString(g),g=g.parentNode;e(a).before("<li>"+m+"</li>"),e(o).remove()}else if(l){s=i(a);for(var v=e.FE.MARKERS+"<br>",b=o.parentNode;b&&"LI"!=b.tagName;)v=t.node.openTagString(b)+v+t.node.closeTagString(b),b=b.parentNode;s.parentNode&&"LI"==s.parentNode.tagName?e(s.parentNode).after("<li>"+v+"</li>"):c?e(s).after("<"+c+">"+v+"</"+c+">"):e(s).after(v),e(a).remove()}else(s=i(a)).parentNode&&"LI"==s.parentNode.tagName?r?e(s.parentNode).before(t.node.openTagString(a)+e.FE.MARKERS+"<br></li>"):e(s.parentNode).after(t.node.openTagString(a)+e.FE.MARKERS+"<br></li>"):c?e(s).before("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(s).before(e.FE.MARKERS+"<br>"),e(a).remove()}function s(i){for(var o=n(i),s="",a=i,r="",l="";a!=o;){var c="A"==(a=a.parentNode).tagName&&t.cursor.isAtEnd(i,a)?"fr-to-remove":"";r=t.node.openTagString(e(a).clone().addClass(c).get(0))+r,l=t.node.closeTagString(a)+l}s=l+s+r+e.FE.MARKERS,e(i).replaceWith('<span id="fr-break"></span>');var d=t.node.openTagString(o)+e(o).html()+t.node.closeTagString(o);d=d.replace(/<span id="fr-break"><\/span>/g,s),e(o).replaceWith(d)}function a(i){for(var o=n(i),s=e.FE.MARKERS,a="",r=i,l=!1;r!=o;){var c="A"==(r=r.parentNode).tagName&&t.cursor.isAtEnd(i,r)?"fr-to-remove":"";l||r==o||t.node.isBlock(r)||(l=!0,a+=e.FE.INVISIBLE_SPACE),a=t.node.openTagString(e(r).clone().addClass(c).get(0))+a,s+=t.node.closeTagString(r)}var d=a+s;e(i).remove(),e(o).after(d)}function r(o){var s=n(o),a=s.previousSibling;if(a){a=e(a).find(t.html.blockTagsQuery()).get(-1)||a,e(o).replaceWith(e.FE.MARKERS);var r=t.node.contents(a);r.length&&"BR"==r[r.length-1].tagName&&e(r[r.length-1]).remove(),e(s).find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==s&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}));for(var l,c=t.node.contents(s)[0];c&&!t.node.isList(c);)l=c.nextSibling,e(a).append(c),c=l;for(a=s.previousSibling;c;)l=c.nextSibling,e(a).append(c),c=l;e(s).remove()}else{var d=i(s);if(e(o).replaceWith(e.FE.MARKERS),d.parentNode&&"LI"==d.parentNode.tagName){var u=d.previousSibling;t.node.isBlock(u)?(e(s).find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==s&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))})),e(u).append(e(s).html())):e(d).before(e(s).html())}else{var p=t.html.defaultTag();p&&0===e(s).find(t.html.blockTagsQuery()).length?e(d).before("<"+p+">"+e(s).html()+"</"+p+">"):(e(d).before(e(s).html()),t.html.wrap())}e(s).remove(),0===e(d).find("li").length&&e(d).remove()}}function l(i){var o,s=n(i),a=s.nextSibling;if(a){(o=t.node.contents(a)).length&&"BR"==o[0].tagName&&e(o[0]).remove(),e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}));for(var r,l=i,c=t.node.contents(a)[0];c&&!t.node.isList(c);)r=c.nextSibling,e(l).after(c),l=c,c=r;for(;c;)r=c.nextSibling,e(s).append(c),c=r;e(i).replaceWith(e.FE.MARKERS),e(a).remove()}else{for(var d=s;!d.nextSibling&&d!=t.el;)d=d.parentNode;if(d==t.el)return!1;if(d=d.nextSibling,t.node.isBlock(d))e.FE.NO_DELETE_TAGS.indexOf(d.tagName)<0&&(e(i).replaceWith(e.FE.MARKERS),(o=t.node.contents(s)).length&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),e(s).append(e(d).html()),e(d).remove());else for((o=t.node.contents(s)).length&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),e(i).replaceWith(e.FE.MARKERS);d&&!t.node.isBlock(d)&&"BR"!=d.tagName;)e(s).append(e(d)),d=d.nextSibling}}return{_startEnter:o,_middleEnter:s,_endEnter:a,_backspace:r,_del:l}},e.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function n(e){return!!e&&(!!t.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?n(e.nextSibling):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&n(e.parentNode)))}function i(e){return!!e&&(!!t.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?i(e.previousSibling):!e.previousSibling&&(!(e.previousSibling||!t.node.hasClass(e.parentNode,"fr-inner"))||i(e.parentNode))))}function o(e,n){return!!e&&e!=t.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?o(e.previousSibling,n):!e.previousSibling&&(e.parentNode==n||o(e.parentNode,n)))}function s(e,n){return!!e&&e!=t.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?s(e.nextSibling,n):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&(e.parentNode==n||s(e.parentNode,n)))}function a(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function r(e,t){var n=new RegExp("([\\uD83C-\\uDBFF\\uDC00-\\uDFFF\\u200D]+)"+(t?"":"$"),"i"),i=e.match(n);return i?i[0].length:1}function l(n){var i=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,o=t.node.deepestParent(n,[],!i);if(o&&"BLOCKQUOTE"==o.tagName){var s=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);s&&s.previousSibling&&(o=s)}if(null!==o){var a,r=o.previousSibling;if(t.node.isBlock(o)&&t.node.isEditable(o)&&r&&e.FE.NO_DELETE_TAGS.indexOf(r.tagName)<0)if(t.node.isDeletable(r))e(r).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isEditable(r))if(t.node.isBlock(r))if(t.node.isEmpty(r)&&!t.node.isList(r))e(r).remove(),e(n).after(t.opts.keepFormatOnDelete?e.FE.INVISIBLE_SPACE:"");else{if(t.node.isList(r)&&(r=e(r).find("li:last").get(0)),(a=t.node.contents(r)).length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),"BLOCKQUOTE"==r.tagName&&"BLOCKQUOTE"!=o.tagName)for(a=t.node.contents(r);a.length&&t.node.isBlock(a[a.length-1]);)r=a[a.length-1],a=t.node.contents(r);else if("BLOCKQUOTE"!=r.tagName&&"BLOCKQUOTE"==o.tagName)for(a=t.node.contents(o);a.length&&t.node.isBlock(a[0]);)o=a[0],a=t.node.contents(o);t.node.isEmpty(o)?(e(n).remove(),t.selection.setAtEnd(r,t.opts.keepFormatOnDelete)):(e(n).replaceWith(e.FE.MARKERS),e(r).append(o.innerHTML)),e(o).remove()}else e(n).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==o.tagName&&r.nodeType==Node.ELEMENT_NODE?e(r).remove():(e(r).after(t.node.isEmpty(o)?"":e(o).html()),e(o).remove(),"BR"==r.tagName&&e(r).remove())}}function c(n){for(var i=n;!i.previousSibling;)if(i=i.parentNode,t.node.isElement(i))return!1;var o;if(i=i.previousSibling,!t.node.isBlock(i)&&t.node.isEditable(i)){for(o=t.node.contents(i);i.nodeType!=Node.TEXT_NODE&&!t.node.isDeletable(i)&&o.length&&t.node.isEditable(i);)i=o[o.length-1],o=t.node.contents(i);if(i.nodeType==Node.TEXT_NODE){var s=i.textContent,a=s.length;t.opts.tabSpaces&&s.length>=t.opts.tabSpaces&&0===s.substr(s.length-t.opts.tabSpaces,s.length-1).replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(a=s.length-t.opts.tabSpaces),i.textContent=s.substring(0,a-r(s));var l=s.length!=i.textContent.length;0===i.textContent.length?l&&t.opts.keepFormatOnDelete?e(i).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS):(2!=i.parentNode.childNodes.length||i.parentNode!=n.parentNode)&&1!=i.parentNode.childNodes.length||t.node.isBlock(i.parentNode)||t.node.isElement(i.parentNode)?(e(i).after(e.FE.MARKERS),t.node.isElement(i.parentNode)&&!n.nextSibling&&i.previousSibling&&"BR"==i.previousSibling.tagName&&e(n).after("<br>"),i.parentNode.removeChild(i)):(e(i.parentNode).after(e.FE.MARKERS),e(i.parentNode).remove()):e(i).after(e.FE.MARKERS)}else t.node.isDeletable(i)?(e(i).after(e.FE.MARKERS),e(i).remove()):n.nextSibling&&"BR"==n.nextSibling.tagName&&t.node.isVoid(i)&&"BR"!=i.tagName?(e(n.nextSibling).remove(),e(n).replaceWith(e.FE.MARKERS)):!1!==t.events.trigger("node.remove",[e(i)])&&(e(i).after(e.FE.MARKERS),e(i).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0&&(t.node.isEditable(i)||t.node.isDeletable(i)))if(t.node.isDeletable(i))e(n).replaceWith(e.FE.MARKERS),e(i).remove();else if(t.node.isEmpty(i)&&!t.node.isList(i))e(i).remove(),e(n).replaceWith(e.FE.MARKERS);else{for(t.node.isList(i)&&(i=e(i).find("li:last").get(0)),(o=t.node.contents(i))&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),o=t.node.contents(i);o&&t.node.isBlock(o[o.length-1]);)i=o[o.length-1],o=t.node.contents(i);e(i).append(e.FE.MARKERS);for(var c=n;!c.previousSibling;)c=c.parentNode;for(;c&&"BR"!==c.tagName&&!t.node.isBlock(c);){var d=c;c=c.nextSibling,e(i).append(d)}c&&"BR"==c.tagName&&e(c).remove(),e(n).remove()}else n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove()}function d(){var s=!1,d=t.markers.insert();if(!d)return!0;for(var u=d.parentNode;u&&!t.node.isElement(u);){if("false"===u.getAttribute("contenteditable"))return e(d).replaceWith(e.FE.MARKERS),t.selection.restore(),!1;if("true"===u.getAttribute("contenteditable"))break;u=u.parentNode}t.el.normalize();var p=d.previousSibling;if(p){var h=p.textContent;h&&h.length&&8203==h.charCodeAt(h.length-1)&&(1==h.length?e(p).remove():p.textContent=p.textContent.substr(0,h.length-r(h)))}return n(d)?s=c(d):i(d)?a(d)&&o(d,e(d).parents("li:first").get(0))?t.cursorLists._backspace(d):l(d):s=c(d),e(d).remove(),f(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore(),s}function u(n){var i=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,o=t.node.deepestParent(n,[],!i);if(o&&"BLOCKQUOTE"==o.tagName){var s=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);s&&s.nextSibling&&(o=s)}if(null!==o){var a,r=o.nextSibling;if(t.node.isBlock(o)&&(t.node.isEditable(o)||t.node.isDeletable(o))&&r&&e.FE.NO_DELETE_TAGS.indexOf(r.tagName)<0)if(t.node.isDeletable(r))e(r).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isBlock(r)&&t.node.isEditable(r))if(t.node.isList(r))if(t.node.isEmpty(o,!0))e(o).remove(),e(r).find("li:first").prepend(e.FE.MARKERS);else{var l=e(r).find("li:first");"BLOCKQUOTE"==o.tagName&&(a=t.node.contents(o)).length&&t.node.isBlock(a[a.length-1])&&(o=a[a.length-1]),0===l.find("ul, ol").length&&(e(n).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each((function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))})),e(o).append(t.node.contents(l.get(0))),l.remove(),0===e(r).find("li").length&&e(r).remove())}else{if((a=t.node.contents(r)).length&&"BR"==a[0].tagName&&e(a[0]).remove(),"BLOCKQUOTE"!=r.tagName&&"BLOCKQUOTE"==o.tagName)for(a=t.node.contents(o);a.length&&t.node.isBlock(a[a.length-1]);)o=a[a.length-1],a=t.node.contents(o);else if("BLOCKQUOTE"==r.tagName&&"BLOCKQUOTE"!=o.tagName)for(a=t.node.contents(r);a.length&&t.node.isBlock(a[0]);)r=a[0],a=t.node.contents(r);e(n).replaceWith(e.FE.MARKERS),e(o).append(r.innerHTML),e(r).remove()}else{for(e(n).replaceWith(e.FE.MARKERS);r&&"BR"!==r.tagName&&!t.node.isBlock(r)&&t.node.isEditable(r);){var c=r;r=r.nextSibling,e(o).append(c)}r&&"BR"==r.tagName&&t.node.isEditable(r)&&e(r).remove()}}}function p(i){for(var o=i;!o.nextSibling;)if(o=o.parentNode,t.node.isElement(o))return!1;if("BR"==(o=o.nextSibling).tagName&&t.node.isEditable(o))if(o.nextSibling){if(t.node.isBlock(o.nextSibling)&&t.node.isEditable(o.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(o.nextSibling.tagName)<0))return void e(o).remove();o=o.nextSibling,e(o.previousSibling).remove()}}else if(n(o))return void(a(i)?t.cursorLists._del(i):t.node.deepestParent(o)&&((!t.node.isEmpty(t.node.blockParent(o))||(t.node.blockParent(o).nextSibling&&e.FE.NO_DELETE_TAGS.indexOf(t.node.blockParent(o).nextSibling.tagName))<0)&&e(o).remove(),u(i)));var s;if(!t.node.isBlock(o)&&t.node.isEditable(o)){for(s=t.node.contents(o);o.nodeType!=Node.TEXT_NODE&&s.length&&!t.node.isDeletable(o)&&t.node.isEditable(o);)o=s[0],s=t.node.contents(o);o.nodeType==Node.TEXT_NODE?(e(o).before(e.FE.MARKERS),o.textContent.length&&(o.textContent=o.textContent.substring(r(o.textContent,!0),o.textContent.length))):(t.node.isDeletable(o)||!1!==t.events.trigger("node.remove",[e(o)]))&&(e(o).before(e.FE.MARKERS),e(o).remove()),e(i).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(o.tagName)<0&&(t.node.isEditable(o)||t.node.isDeletable(o)))if(t.node.isDeletable(o))e(i).replaceWith(e.FE.MARKERS),e(o).remove();else if(t.node.isList(o))i.previousSibling?(e(o).find("li:first").prepend(i),t.cursorLists._backspace(i)):(e(o).find("li:first").prepend(e.FE.MARKERS),e(i).remove());else if((s=t.node.contents(o))&&"BR"==s[0].tagName&&e(s[0]).remove(),s&&"BLOCKQUOTE"==o.tagName){var l=s[0];for(e(i).before(e.FE.MARKERS);l&&"BR"!=l.tagName;){var c=l;l=l.nextSibling,e(i).before(c)}l&&"BR"==l.tagName&&e(l).remove()}else e(i).after(e(o).html()).after(e.FE.MARKERS),e(o).remove()}function h(){var o=t.markers.insert();if(!o)return!1;if(t.el.normalize(),n(o))if(a(o))if(0===e(o).parents("li:first").find("ul, ol").length)t.cursorLists._del(o);else{var s=e(o).parents("li:first").find("ul:first, ol:first").find("li:first");(s=s.find(t.html.blockTagsQuery()).get(-1)||s).prepend(o),t.cursorLists._backspace(o)}else u(o);else p((i(o),o));e(o).remove(),f(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}function f(){for(var e=t.el.querySelectorAll("blockquote:empty"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}function m(){t.$el.find(".fr-to-remove").each((function(){for(var n=t.node.contents(this),i=0;i<n.length;i++)n[i].nodeType==Node.TEXT_NODE&&(n[i].textContent=n[i].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)}))}function g(n,i,o){var a,r=t.node.deepestParent(n,[],!o);if(r&&"BLOCKQUOTE"==r.tagName)return s(n,r)?((a=t.html.defaultTag())?e(r).after("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(r).after(e.FE.MARKERS+"<br>"),e(n).remove(),!1):(b(n,i,o),!1);if(null==r)(a=t.html.defaultTag())&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):!n.previousSibling||e(n.previousSibling).is("br")||n.nextSibling?e(n).replaceWith("<br>"+e.FE.MARKERS):e(n).replaceWith("<br>"+e.FE.MARKERS+"<br>");else{var l=n,c="";t.node.isBlock(r)&&!i||(c="<br/>");var d,u="",p="",h="",f="";(a=t.html.defaultTag())&&t.node.isBlock(r)&&(h="<"+a+">",f="</"+a+">",r.tagName==a.toUpperCase()&&(h=t.node.openTagString(e(r).clone().removeAttr("id").get(0))));do{if(l=l.parentNode,!i||l!=r||i&&!t.node.isBlock(r))if(u+=t.node.closeTagString(l),l==r&&t.node.isBlock(r))p=h+p;else{var m="A"==l.tagName&&s(n,l)?"fr-to-remove":"";p=t.node.openTagString(e(l).clone().addClass(m).get(0))+p}}while(l!=r);c=u+c+p+(n.parentNode==r&&t.node.isBlock(r)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(r)&&!e(r).find("*:last").is("br")&&e(r).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),r.nextSibling&&!t.node.isBlock(r.nextSibling)||t.node.isBlock(r)||e(r).after("<br>"),d=(d=!i&&t.node.isBlock(r)?t.node.openTagString(r)+e(r).html()+f:t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r)).replace(/<span id="fr-break"><\/span>/g,c),e(r).replaceWith(d)}}function v(n,i,a){var r,l=t.node.deepestParent(n,[],!a);if(l&&"TABLE"==l.tagName)return e(l).find("td:first, th:first").prepend(n),v(n,i,a);if(l&&"BLOCKQUOTE"==l.tagName){if(o(n,l))return(r=t.html.defaultTag())?e(l).before("<"+r+">"+e.FE.MARKERS+"<br></"+r+">"):e(l).before(e.FE.MARKERS+"<br>"),e(n).remove(),!1;s(n,l)?g(n,i,!0):b(n,i,!0)}if(null==l)(r=t.html.defaultTag())&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+r+">"+e.FE.MARKERS+"<br></"+r+">"):e(n).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(l))if(i)e(n).remove(),e(l).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(l,!0))return g(n,i,a);if(t.opts.keepFormatOnDelete){for(var c=n,d=e.FE.INVISIBLE_SPACE;c!=l&&!t.node.isElement(c);)c=c.parentNode,d=t.node.openTagString(c)+d+t.node.closeTagString(c);e(l).before(d)}else e(l).before(t.node.openTagString(e(l).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(n).remove()}}function b(n,i,a){var r=t.node.deepestParent(n,[],!a);if(null==r)t.html.defaultTag()&&n.parentNode===t.el?e(n).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):(n.nextSibling&&!t.node.isBlock(n.nextSibling)||e(n).after("<br>"),e(n).replaceWith("<br>"+e.FE.MARKERS));else{var l=n,c="";"PRE"==r.tagName&&(i=!0),t.node.isBlock(r)&&!i||(c="<br>");var d="",u="";do{var p=l;if(l=l.parentNode,"BLOCKQUOTE"==r.tagName&&t.node.isEmpty(p)&&!t.node.hasClass(p,"fr-marker")&&e(p).find(n).length>0&&e(p).after(n),("BLOCKQUOTE"!=r.tagName||!s(n,l)&&!o(n,l))&&(!i||l!=r||i&&!t.node.isBlock(r))){d+=t.node.closeTagString(l);var h="A"==l.tagName&&s(n,l)?"fr-to-remove":"";u=t.node.openTagString(e(l).clone().addClass(h).removeAttr("id").get(0))+u}}while(l!=r);var f=r==n.parentNode&&t.node.isBlock(r)||n.nextSibling;if("BLOCKQUOTE"==r.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var m=t.html.defaultTag();c=d+c+(m?"<"+m+">":"")+e.FE.MARKERS+"<br>"+(m?"</"+m+">":"")+u}else c=d+c+u+(f?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var g=t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r);g=g.replace(/<span id="fr-break"><\/span>/g,c),e(r).replaceWith(g)}}function y(o){var s=t.markers.insert();if(!s)return!0;t.el.normalize();var r=!1;e(s).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(o=!1,r=!0),e(s).parentsUntil(t.$el,"TD, TH").length&&(r=!1),n(s)?!a(s)||o||r?g(s,o,r):t.cursorLists._endEnter(s):i(s)?!a(s)||o||r?v(s,o,r):t.cursorLists._startEnter(s):!a(s)||o||r?b(s,o,r):t.cursorLists._middleEnter(s),m(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}return{enter:y,backspace:d,del:h,isAtEnd:s,isAtStart:o}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,IME:229},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){function n(e){L=null,t.opts.multiLine?t.helpers.isIOS()?L=t.snapshot.get():(e.preventDefault(),e.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function i(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function o(){setTimeout((function(){t.events.disableBlur(),t.events.focus()}),0)}function s(e){L=null,t.selection.isCollapsed()?t.helpers.isIOS()?L=t.snapshot.get():(t.cursor.backspace(),e.preventDefault(),e.stopPropagation()):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks()),t.placeholder.refresh()}function a(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function r(n){var i=t.selection.element();if(!t.helpers.isMobile()&&i&&"A"==i.tagName){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove();var o=t.markers.insert();if(o){var s=o.previousSibling;!o.nextSibling&&o.parentNode&&"A"==o.parentNode.tagName?(o.parentNode.insertAdjacentHTML("afterend","&nbsp;"+e.FE.MARKERS),o.parentNode.removeChild(o)):(s&&s.nodeType==Node.TEXT_NODE&&1==s.textContent.length&&160==s.textContent.charCodeAt(0)?s.textContent=s.textContent+" ":o.insertAdjacentHTML("beforebegin","&nbsp;"),o.outerHTML=e.FE.MARKERS),t.selection.restore()}}}function l(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!O){var e=t.selection.ranges(0),n=e.startContainer,i=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&i<=n.textContent.length&&i>0&&32==n.textContent.charCodeAt(i-1)&&(t.selection.save(),t.spaces.normalize(),t.selection.restore())}}function c(){t.selection.isFull()&&setTimeout((function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FE.MARKERS+"<br/></"+n+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()}),0)}function d(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){t.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var n="",i=0;i<t.opts.tabSpaces;i++)n+="&nbsp;";t.html.insert(n),t.placeholder.refresh(),t.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function u(){O=!1}function p(){O=!1}function h(){return O}function f(l){t.events.disableBlur();var c=l.which;if(16===c)return!0;if(c===e.FE.KEYCODE.IME)return O=!0,!0;O=!1;var u=_(c)&&!y(l),p=c==e.FE.KEYCODE.BACKSPACE||c==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!t.placeholder.isVisible()||p&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete)&&(u||p)){var h=t.html.defaultTag();if(h?t.$el.html("<"+h+">"+e.FE.MARKERS+"<br/></"+h+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),!_(c))return l.preventDefault(),!0}c==e.FE.KEYCODE.ENTER?l.shiftKey?i(l):n(l):c===e.FE.KEYCODE.BACKSPACE&&(l.metaKey||l.ctrlKey)?o():c!=e.FE.KEYCODE.BACKSPACE||y(l)||l.altKey?c!=e.FE.KEYCODE.DELETE||y(l)||l.altKey||l.shiftKey?c==e.FE.KEYCODE.SPACE?r(l):c==e.FE.KEYCODE.TAB?d(l):y(l)||!_(l.which)||t.selection.isCollapsed()||l.ctrlKey||t.selection.remove():t.placeholder.isVisible()?(l.preventDefault(),l.stopPropagation()):a(l):t.placeholder.isVisible()?(l.preventDefault(),l.stopPropagation()):s(l),t.events.enableBlur()}function m(e){for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter((function(e){return/\u200B/gi.test(e.textContent)})),!1);n.nextNode();){var i=n.currentNode;i.textContent=i.textContent.replace(/\u200B/gi,"")}}function g(){if(!t.$wp)return!0;var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,(t.helpers.isIOS()||t.helpers.isAndroid())&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.$wp.offset().top-t.helpers.scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+t.helpers.scrollTop()+20)):(n=t.position.getBoundingRect().top,t.opts.toolbarBottom&&(n+=t.opts.toolbarStickyOffset),(t.helpers.isIOS()||t.helpers.isAndroid())&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top,n-=t.helpers.scrollTop()),(n+=t.opts.toolbarStickyOffset)>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.o_win.innerHeight+20),n=t.position.getBoundingRect().top,t.opts.toolbarBottom||(n-=t.opts.toolbarStickyOffset),(t.helpers.isIOS()||t.helpers.isAndroid())&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top,n-=t.helpers.scrollTop()),n<t.$tb.height()+20&&n>=0&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.$tb.height()-20))}function v(){var n=t.selection.element(),i=t.node.blockParent(n);if(i&&"DIV"==i.tagName&&t.selection.info(i).atStart){var o=t.html.defaultTag();i.previousSibling&&"DIV"!=i.previousSibling.tagName&&o&&"div"!=o&&(t.selection.save(),e(i).replaceWith("<"+o+">"+i.innerHTML+"</"+o+">"),t.selection.restore())}}function b(n){if(t.helpers.isIOS()&&n&&L)if(n.which==e.FE.KEYCODE.ENTER)t.snapshot.restore(L),t.cursor.enter();else if(n.which==e.FE.KEYCODE.BACKSPACE){var i=t.snapshot.get();t.snapshot.restore(L),t.cursor.backspace(),t.el.innerHTML!==i.html&&t.snapshot.restore(i)}if(t.helpers.isAndroid()&&t.browser.mozilla)return!0;if(O)return!1;if(!t.selection.isCollapsed())return!0;if(n&&(n.which===e.FE.KEYCODE.META||n.which==e.FE.KEYCODE.CTRL))return!0;if(n&&w(n.which))return!0;n&&n.which==e.FE.KEYCODE.ENTER&&t.helpers.isIOS()&&v(),n&&(n.which==e.FE.KEYCODE.ENTER||n.which==e.FE.KEYCODE.BACKSPACE||n.which>=37&&n.which<=40&&!t.browser.msie)&&g(),t.html.cleanBRs(!0,!0);var o=function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(t)&&t.replace(/\u200B/gi,"").length>0)},s=function(e){var n=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!t.helpers.isIOS()||0===((e.textContent||"").match(n)||[]).length},a=t.selection.element();o(a)&&!t.node.hasClass(a,"fr-marker")&&"IFRAME"!=a.tagName&&s(a)&&(t.selection.save(),m(a),t.selection.restore())}function y(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function w(t){if(t>=e.FE.KEYCODE.ARROW_LEFT&&t<=e.FE.KEYCODE.ARROW_DOWN)return!0}function _(n){if(n>=e.FE.KEYCODE.ZERO&&n<=e.FE.KEYCODE.NINE)return!0;if(n>=e.FE.KEYCODE.NUM_ZERO&&n<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FE.KEYCODE.A&&n<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function T(n){var i=n.which;if(y(n)||i>=37&&i<=40||!_(i)&&i!=e.FE.KEYCODE.DELETE&&i!=e.FE.KEYCODE.BACKSPACE&&i!=e.FE.KEYCODE.ENTER&&i!=e.FE.KEYCODE.IME)return!0;$||(I=t.snapshot.get(),t.undo.canDo()||t.undo.saveStep()),clearTimeout($),$=setTimeout((function(){$=null,t.undo.saveStep()}),Math.max(250,t.opts.typingTimer))}function E(e){var n=e.which;if(y(e)||n>=37&&n<=40)return!0;I&&$?(t.undo.saveStep(I),I=null):void 0!==n&&0!==n||I||$||t.undo.saveStep()}function S(){$&&(clearTimeout($),t.undo.saveStep(),I=null)}function A(t){var n=t.which;return y(t)||n==e.FE.KEYCODE.F5}function C(e){return(!e||"BR"!=e.tagName)&&0===(e.textContent||"").length&&e.querySelector&&!e.querySelector(":scope > br")}function k(n){var i=t.el.childNodes,o=t.html.defaultTag();return!(!n.target||n.target===t.el)||0===i.length||void(t.$el.outerHeight()-n.offsetY<=10?C(i[i.length-1])&&(o?t.$el.append("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):t.$el.append(e.FE.MARKERS+"<br>"),t.selection.restore(),g()):n.offsetY<=10&&C(i[0])&&(o?t.$el.prepend("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):t.$el.prepend(e.FE.MARKERS+"<br>"),t.selection.restore(),g()))}function x(){if(t.events.on("keydown",T),t.events.on("input",l),t.events.on("mousedown",p),t.events.on("keyup input",E),t.events.on("keypress",u),t.events.on("keydown",f),t.events.on("keyup",b),t.events.on("html.inserted",b),t.events.on("cut",c),t.events.on("click",k),!t.browser.edge&&t.el.msGetInputContext)try{t.el.msGetInputContext().addEventListener("MSCandidateWindowShow",(function(){O=!0})),t.el.msGetInputContext().addEventListener("MSCandidateWindowHide",(function(){O=!1,b()}))}catch(e){}}var $,I,O=!1,L=null;return{_init:x,ctrlKey:y,isCharacter:_,isArrow:w,forceUndo:S,isIME:h,isBrowserAction:A,positionCaret:g}},e.FE.MODULES.accessibility=function(t){function n(e){e&&e.length&&(e.data("blur-event-set")||e.parents(".fr-popup").length||(t.events.$on(e,"blur",(function(){var n=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;n.events.blurActive()&&n.events.trigger("blur"),n.events.enableBlur()}),!0),e.data("blur-event-set",!0)),(e.parents(".fr-toolbar, .fr-popup").data("instance")||t).events.disableBlur(),e.focus(),t.shared.$f_el=e)}function i(e,t){var i=t?"last":"first",o=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[i]();if(o.length)return n(o),!0}function o(e){return e.is("input, textarea")&&a(),t.events.disableBlur(),e.focus(),!0}function s(e,n){var i=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(n?":last":":first");if(i.length)return o(i);if(t.shared.with_kb){var s=e.find(".fr-active-item:visible:first");if(s.length)return o(s);var a=e.find("[tabIndex]:visible:first");if(a.length)return o(a)}}function a(){0===t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save()}function r(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function l(e){var n=e.children().not(".fr-buttons");n.data("mouseenter-event-set")||(t.events.$on(n,"mouseenter","[tabIndex]",(function(i){var o=e.data("instance")||t;if(!O)return i.stopPropagation(),void i.preventDefault();var s=n.find(":focus:first");s.length&&!s.is("input, button, textarea")&&(o.events.disableBlur(),s.blur(),o.events.disableBlur(),o.events.focus())})),n.data("mouseenter-event-set",!0)),!s(n)&&t.shared.with_kb&&i(e.find(".fr-buttons"))}function c(e){t.core.hasFocus()||(t.events.disableBlur(),t.events.focus()),t.accessibility.saveSelection(),t.events.disableBlur(),t.$el.blur(),t.selection.clear(),t.events.disableBlur(),t.shared.with_kb?e.find(".fr-command[tabIndex], [tabIndex]").first().focus():e.find("[tabIndex]:first").focus()}function d(){var e=t.popups.areVisible();if(e){var n=e.find(".fr-buttons");return n.find("button:focus, .fr-group span:focus").length?!i(e.data("instance").$tb):!i(n)}return!i(t.$tb)}function u(){var e=null;return t.shared.$f_el.is(".fr-dropdown.fr-active")?e=t.shared.$f_el:t.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=t.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function p(o,a,r){if(t.shared.$f_el){var l=u();l&&(t.button.click(l),t.shared.$f_el=l);var c,d=o.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),p=d.index(t.shared.$f_el);return 0===p&&!r||p==d.length-1&&r?(a&&(o.parent().is(".fr-popup")&&(c=!s(o.parent().children().not(".fr-buttons"),!r)),!1===c&&(t.shared.$f_el=null)),a&&!1===c||i(o,!r)):n(e(d.get(p+(r?1:-1)))),!1}}function h(e,t){return p(e,t,!0)}function f(e,t){return p(e,t)}function m(e){if(t.shared.$f_el){var i;if(t.shared.$f_el.is(".fr-dropdown.fr-active"))return n(i=e?t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last()),!1;if(t.shared.$f_el.is("a.fr-command"))return(i=e?t.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first()).length||(i=e?t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),n(i),!1}}function g(){return t.shared.$f_el&&t.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?b():m(!0)}function v(){return m()}function b(){if(t.shared.$f_el){if(t.shared.$f_el.hasClass("fr-dropdown"))t.button.click(t.shared.$f_el);else if(t.shared.$f_el.is("button.fr-back")){t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus());var e=t.popups.areVisible(t);e&&(t.shared.with_kb=!1),t.button.click(t.shared.$f_el),A(e)}else{if(t.events.disableBlur(),t.button.click(t.shared.$f_el),t.shared.$f_el.attr("data-popup")){var n=t.popups.areVisible(t);n&&n.data("popup-button",t.shared.$f_el)}else if(t.shared.$f_el.attr("data-modal")){var i=t.modals.areVisible(t);i&&i.data("modal-button",t.shared.$f_el)}t.shared.$f_el=null}return!1}}function y(){t.shared.$f_el&&(t.events.disableBlur(),t.shared.$f_el.blur(),t.shared.$f_el=null),!1!==t.events.trigger("toolbar.focusEditor")&&(t.events.disableBlur(),t.events.focus())}function w(e){if(t.shared.$f_el){var i=u();return i?(t.button.click(i),n(i)):e.parent().find(".fr-back:visible").length?(t.shared.with_kb=!1,t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(e.parent().find(".fr-back:visible:first")),A(e.parent())):t.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(r(t),t.shared.$f_el=null,!1!==t.events.trigger("toolbar.esc")&&(t.popups.hide(e.parent()),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),A(e.parent()))):y()),!1}}function _(n,i){var o=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,s=n.which,a=!1;return s!=e.FE.KEYCODE.TAB||o||n.shiftKey||n.altKey?s!=e.FE.KEYCODE.ARROW_RIGHT||o||n.shiftKey||n.altKey?s!=e.FE.KEYCODE.TAB||o||!n.shiftKey||n.altKey?s!=e.FE.KEYCODE.ARROW_LEFT||o||n.shiftKey||n.altKey?s!=e.FE.KEYCODE.ARROW_UP||o||n.shiftKey||n.altKey?s!=e.FE.KEYCODE.ARROW_DOWN||o||n.shiftKey||n.altKey?s!=e.FE.KEYCODE.ENTER||o||n.shiftKey||n.altKey?s!=e.FE.KEYCODE.ESC||o||n.shiftKey||n.altKey?s!=e.FE.KEYCODE.F10||o||n.shiftKey||!n.altKey||(a=d()):a=w(i):a=b():a=g():a=v():a=f(i):a=f(i,!0):a=h(i):a=h(i,!0),t.shared.$f_el||void 0!==a||(a=!0),!a&&t.keys.isBrowserAction(n)&&(a=!0),!!a||(n.preventDefault(),n.stopPropagation(),!1)}function T(n){n&&n.length&&(t.events.$on(n,"keydown",(function(i){if(!e(i.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var o=n.parents(".fr-popup").data("instance")||n.data("instance")||t;t.shared.with_kb=!0;var s=o.accessibility.exec(i,n);return t.shared.with_kb=!1,s}),!0),t.events.$on(n,"mouseenter","[tabIndex]",(function(i){var o=n.parents(".fr-popup").data("instance")||n.data("instance")||t;if(!O)return i.stopPropagation(),void i.preventDefault();var s=e(i.currentTarget);o.shared.$f_el&&o.shared.$f_el.not(s)&&o.accessibility.focusEditor()}),!0))}function E(e){var n=t.popups.get(e),i=S(e);T(n.find(".fr-buttons")),t.events.$on(n,"mouseenter","tabIndex",i._tiMouseenter,!0),t.events.$on(n.children().not(".fr-buttons"),"keydown","[tabIndex]",i._tiKeydown,!0),t.popups.onHide(e,(function(){r(n.data("instance")||t)})),t.popups.onShow(e,(function(){O=!1,setTimeout((function(){O=!0}),0)}))}function S(n){var o=t.popups.get(n);return{_tiKeydown:function(a){var l=o.data("instance")||t;if(!1===l.events.trigger("popup.tab",[a]))return!1;var c=a.which,d=o.find(":focus:first");if(e.FE.KEYCODE.TAB==c){a.preventDefault();var u=o.children().not(".fr-buttons"),p=u.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),h=p.indexOf(this)+(a.shiftKey?-1:1);if(0<=h&&h<p.length)return l.events.disableBlur(),e(p[h]).focus(),a.stopPropagation(),!1;var f=o.find(".fr-buttons");if(f.length&&i(f,!!a.shiftKey))return a.stopPropagation(),!1;if(s(u))return a.stopPropagation(),!1}else{if(e.FE.KEYCODE.ENTER!=c)return e.FE.KEYCODE.ESC==c?(a.preventDefault(),a.stopPropagation(),r(l),l.popups.isVisible(n)&&o.find(".fr-back:visible").length?(l.opts.toolbarInline&&(l.events.disableBlur(),l.events.focus()),l.button.exec(o.find(".fr-back:visible:first")),A(o)):l.popups.isVisible(n)&&o.find(".fr-dismiss:visible").length?l.button.exec(o.find(".fr-dismiss:visible:first")):(l.popups.hide(n),l.opts.toolbarInline&&l.toolbar.showInline(null,!0),A(o)),!1):e.FE.KEYCODE.SPACE==c&&(d.is(".fr-submit")||d.is(".fr-dismiss"))?(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(d),!0):l.keys.isBrowserAction(a)||d.is("input[type=text], textarea")||e.FE.KEYCODE.SPACE==c&&(d.is(".fr-link-attr")||d.is("input[type=file]"))?void a.stopPropagation():(a.stopPropagation(),a.preventDefault(),!1);var m=null;o.find(".fr-submit:visible").length>0?m=o.find(".fr-submit:visible:first"):o.find(".fr-dismiss:visible").length&&(m=o.find(".fr-dismiss:visible:first")),m&&(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(m))}},_tiMouseenter:function(){x(o.data("instance")||t)}}}function A(e){var t=e.data("popup-button");t&&setTimeout((function(){n(t),e.data("popup-button",null)}),0)}function C(e){var t=e.data("modal-button");t&&setTimeout((function(){n(t),e.data("modal-button",null)}),0)}function k(){return null!=t.shared.$f_el}function x(e){var n=t.popups.areVisible(e);n&&n.data("popup-button",null)}function $(n){var i=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if(n.which==e.FE.KEYCODE.F10&&!i&&!n.shiftKey&&n.altKey){t.shared.with_kb=!0;var o=t.popups.areVisible(t),a=!1;return o&&(a=s(o.children().not(".fr-buttons"))),a||d(),t.shared.with_kb=!1,n.preventDefault(),n.stopPropagation(),!1}return!0}function I(){t.$wp?t.events.on("keydown",$,!0):t.events.$on(t.$win,"keydown",$,!0),t.events.on("mousedown",(function(e){x(t),t.shared.$f_el&&(r(t),e.stopPropagation(),t.events.disableBlur(),t.shared.$f_el=null)}),!0),t.events.on("blur",(function(){t.shared.$f_el=null,x(t)}),!0)}var O=!0;return{_init:I,registerPopup:E,registerToolbar:T,focusToolbarElement:n,focusToolbar:i,focusContent:s,focusPopup:l,focusModal:c,focusEditor:y,focusPopupButton:A,focusModalButton:C,hasFocus:k,exec:_,saveSelection:a,restoreSelection:r}},e.FE.MODULES.format=function(t){function n(e,t){var n="<"+e;for(var i in t)t.hasOwnProperty(i)&&(n+=" "+i+'="'+t[i]+'"');return n+">"}function i(e){return"</"+e+">"}function o(e,t){var n=e;for(var i in t)t.hasOwnProperty(i)&&(n+="id"==i?"#"+t[i]:"class"==i?"."+t[i]:"["+i+'="'+t[i]+'"]');return n}function s(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function a(i,o,s){if(i){if(t.node.isBlock(i))return a(i.firstChild,o,s),!1;for(var r=e(n(o,s)).insertBefore(i),l=i;l&&!e(l).is(".fr-marker")&&0===e(l).find(".fr-marker").length&&"UL"!=l.tagName&&"OL"!=l.tagName;){var c=l;l=l.nextSibling,r.append(c)}if(l)(e(l).find(".fr-marker").length||"UL"==l.tagName||"OL"==l.tagName)&&a(l.firstChild,o,s);else{for(var d=r.get(0).parentNode;d&&!d.nextSibling&&!t.node.isElement(d);)d=d.parentNode;if(d){var u=d.nextSibling;u&&(t.node.isBlock(u)?a(u.firstChild,o,s):a(u,o,s))}}r.is(":empty")&&r.remove()}}function r(r,l){var c;if(void 0===l&&(l={}),l.style&&delete l.style,t.selection.isCollapsed())t.markers.insert(),t.$el.find(".fr-marker").replaceWith(n(r,l)+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+i(r)),t.selection.restore();else{var d;t.selection.save(),a(t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,r,l);do{for(d=t.$el.find(o(r,l)+" > "+o(r,l)),c=0;c<d.length;c++)d[c].outerHTML=d[c].innerHTML}while(d.length);t.el.normalize();var u=t.el.querySelectorAll(".fr-marker");for(c=0;c<u.length;c++){var p=e(u[c]);!0===p.data("type")?s(p.get(0).nextSibling,o(r,l))&&p.next().prepend(p):s(p.get(0).previousSibling,o(r,l))&&p.prev().append(p)}t.selection.restore()}}function l(e,n,i,a){if(!a){var r=!1;if(!0===e.data("type"))for(;t.node.isFirstSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().before(e),r=!0;else if(!1===e.data("type"))for(;t.node.isLastSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().after(e),r=!0;if(r)return!0}if(e.parents(n).length||void 0===n){var l="",c="",d=e.parent();if(d.is(t.$el)||t.node.isBlock(d.get(0)))return!1;for(;!t.node.isBlock(d.parent().get(0))&&(void 0===n||void 0!==n&&!s(d.get(0),o(n,i)));)l+=t.node.closeTagString(d.get(0)),c=t.node.openTagString(d.get(0))+c,d=d.parent();var u=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var p=d.html().replace(/<span id="mark"><\/span>/,l+t.node.closeTagString(d.get(0))+c+u+l+t.node.openTagString(d.get(0))+c);return d.replaceWith(t.node.openTagString(d.get(0))+p+t.node.closeTagString(d.get(0))),!0}return!1}function c(n,i,a,r){for(var l=t.node.contents(n.get(0)),d=0;d<l.length;d++){var u=l[d];if(t.node.hasClass(u,"fr-marker"))i=(i+1)%2;else if(i)if(e(u).find(".fr-marker").length>0)i=c(e(u),i,a,r);else{for(var p=e(u).find(a||"*"),h=p.length-1;h>=0;h--){var f=p[h];t.node.isBlock(f)||t.node.isVoid(f)||void 0!==a&&!s(f,o(a,r))||(f.outerHTML=f.innerHTML)}void 0===a&&u.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(u)&&!t.node.isBlock(u)||s(u,o(a,r))?e(u).replaceWith(u.innerHTML):void 0===a&&u.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(u)&&t.node.clearAttributes(u)}else e(u).find(".fr-marker").length>0&&(i=c(e(u),i,a,r))}return i}function d(n,i){void 0===i&&(i={}),i.style&&delete i.style;var o=t.selection.isCollapsed();t.selection.save();for(var s=!0;s;){s=!1;for(var a=t.$el.find(".fr-marker"),r=0;r<a.length;r++){var d=e(a[r]),u=null;if(d.attr("data-cloned")||o||(u=d.clone().removeClass("fr-marker").addClass("fr-clone"),!0===d.data("type")?d.attr("data-cloned",!0).after(u):d.attr("data-cloned",!0).before(u)),l(d,n,i,o)){s=!0;break}}}c(t.$el,0,n,i),o||(t.$el.find(".fr-marker").remove(),t.$el.find(".fr-clone").removeClass("fr-clone").addClass("fr-marker")),o&&t.$el.find(".fr-marker").before(e.FE.INVISIBLE_SPACE).after(e.FE.INVISIBLE_SPACE),t.html.cleanEmptyTags(),t.el.normalize(),t.selection.restore()}function u(e,t){g(e,t)?d(e,t):r(e,t)}function p(t,n){var i=e(t);i.css(n,""),""===i.attr("style")&&i.replaceWith(i.html())}function h(t,n){return 0===e(t).attr("style").indexOf(n+":")||e(t).attr("style").indexOf(";"+n+":")>=0||e(t).attr("style").indexOf("; "+n+":")>=0}function f(n,i){var o,s;if(t.selection.isCollapsed()){t.markers.insert();var r=(s=t.$el.find(".fr-marker")).parent();if(t.node.openTagString(r.get(0))=='<span style="'+n+": "+r.css(n)+';">'){if(t.node.isEmpty(r.get(0)))r.replaceWith('<span style="'+n+": "+i+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");else{var c={};c[n]=i,l(s,"span",c,!0),s=t.$el.find(".fr-marker"),i?s.replaceWith('<span style="'+n+": "+i+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>"):s.replaceWith(e.FE.INVISIBLE_SPACE+e.FE.MARKERS)}t.html.cleanEmptyTags()}else t.node.isEmpty(r.get(0))&&r.is("span")?(s.replaceWith(e.FE.MARKERS),r.css(n,i)):s.replaceWith('<span style="'+n+": "+i+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");t.selection.restore()}else{if(t.selection.save(),null==i||"color"==n&&t.$el.find(".fr-marker").parents("u, a").length>0){var d=t.$el.find(".fr-marker");for(o=0;o<d.length;o++)if(!0===(s=e(d[o])).data("type"))for(;t.node.isFirstSibling(s.get(0))&&!s.parent().is(t.$el)&&!t.node.isElement(s.parent().get(0))&&!t.node.isBlock(s.parent().get(0));)s.parent().before(s);else for(;t.node.isLastSibling(s.get(0))&&!s.parent().is(t.$el)&&!t.node.isElement(s.parent().get(0))&&!t.node.isBlock(s.parent().get(0));)s.parent().after(s)}var u=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,f={class:"fr-unprocessed"};for(i&&(f.style=n+": "+i+";"),a(u,"span",f),t.$el.find(".fr-marker + .fr-unprocessed").each((function(){e(this).prepend(e(this).prev())})),t.$el.find(".fr-unprocessed + .fr-marker").each((function(){e(this).prev().append(this)})),(i||"").match(/\dem$/)&&t.$el.find("span.fr-unprocessed").removeClass("fr-unprocessed");t.$el.find("span.fr-unprocessed").length>0;){var m=t.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(m.parent().get(0).normalize(),m.parent().is("span")&&1==m.parent().get(0).childNodes.length){m.parent().css(n,i);var g=m;m=m.parent(),g.replaceWith(g.html())}var v=m.find("span");for(o=v.length-1;o>=0;o--)p(v[o],n);var b=m.parentsUntil(t.$el,"span[style]"),y=[];for(o=b.length-1;o>=0;o--)h(b[o],n)||y.push(b[o]);if((b=b.not(y)).length){var w="",_="",T="",E="",S=m.get(0);do{S=S.parentNode,e(S).addClass("fr-split"),w+=t.node.closeTagString(S),_=t.node.openTagString(e(S).clone().addClass("fr-split").get(0))+_,b.get(0)!=S&&(T+=t.node.closeTagString(S),E=t.node.openTagString(e(S).clone().addClass("fr-split").get(0))+E)}while(b.get(0)!=S);var A=w+t.node.openTagString(e(b.get(0)).clone().css(n,i||"").get(0))+E+m.css(n,"").get(0).outerHTML+T+"</span>"+_;m.replaceWith('<span id="fr-break"></span>');var C=b.get(0).outerHTML;e(b.get(0)).replaceWith(C.replace(/<span id="fr-break"><\/span>/g,A))}}for(;t.$el.find(".fr-split:empty").length>0;)t.$el.find(".fr-split:empty").remove();t.$el.find(".fr-split").removeClass("fr-split"),t.$el.find('span[style=""]').removeAttr("style"),t.$el.find('span[class=""]').removeAttr("class"),t.html.cleanEmptyTags(),e(t.$el.find("span").get().reverse()).each((function(){this.attributes&&0!==this.attributes.length||e(this).replaceWith(this.innerHTML)})),t.el.normalize();var k=t.$el.find("span[style] + span[style]");for(o=0;o<k.length;o++){var x=e(k[o]),$=e(k[o]).prev();x.get(0).previousSibling==$.get(0)&&t.node.openTagString(x.get(0))==t.node.openTagString($.get(0))&&(x.prepend($.html()),$.remove())}t.$el.find("span[style] span[style]").each((function(){if(e(this).attr("style").indexOf("font-size")>=0){var t=e(this).parents("span[style]");t.attr("style").indexOf("background-color")>=0&&(e(this).attr("style",e(this).attr("style")+";"+t.attr("style")),l(e(this),"span[style]",{},!1))}})),t.el.normalize(),t.selection.restore()}}function m(e){f(e,null)}function g(e,n){void 0===n&&(n={}),n.style&&delete n.style;var i=t.selection.ranges(0),a=i.startContainer;if(a.nodeType==Node.ELEMENT_NODE&&a.childNodes.length>0&&a.childNodes[i.startOffset]&&(a=a.childNodes[i.startOffset]),!i.collapsed&&a.nodeType==Node.TEXT_NODE&&i.startOffset==(a.textContent||"").length){for(;!t.node.isBlock(a.parentNode)&&!a.nextSibling;)a=a.parentNode;a.nextSibling&&(a=a.nextSibling)}for(var r=a;r&&r.nodeType==Node.ELEMENT_NODE&&!s(r,o(e,n));)r=r.firstChild;if(r&&r.nodeType==Node.ELEMENT_NODE&&s(r,o(e,n)))return!0;var l=a;for(l&&l.nodeType!=Node.ELEMENT_NODE&&(l=l.parentNode);l&&l.nodeType==Node.ELEMENT_NODE&&l!=t.el&&!s(l,o(e,n));)l=l.parentNode;return!(!l||l.nodeType!=Node.ELEMENT_NODE||l==t.el||!s(l,o(e,n)))}return{is:g,toggle:u,apply:r,remove:d,applyStyle:f,removeStyle:m}},e.extend(e.FE.DEFAULTS,{indentMargin:20}),e.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,n){e.FE.COMMANDS[t]=n},e.FE.MODULES.commands=function(t){function n(e){return t.html.defaultTag()&&(e="<"+t.html.defaultTag()+">"+e+"</"+t.html.defaultTag()+">"),e}function i(n,i){if(!1!==t.events.trigger("commands.before",e.merge([n],i||[]))){var o=e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].callback||l[n],s=!0,a=!1;e.FE.COMMANDS[n]&&(void 0!==e.FE.COMMANDS[n].focus&&(s=e.FE.COMMANDS[n].focus),void 0!==e.FE.COMMANDS[n].accessibilityFocus&&(a=e.FE.COMMANDS[n].accessibilityFocus)),(!t.core.hasFocus()&&s&&!t.popups.areVisible()||!t.core.hasFocus()&&a&&t.accessibility.hasFocus())&&t.events.focus(!0),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&(t.$el.find(".fr-marker").length&&(t.events.disableBlur(),t.selection.restore()),t.undo.saveStep()),o&&o.apply(t,e.merge([n],i||[])),t.events.trigger("commands.after",e.merge([n],i||[])),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&t.undo.saveStep()}}function o(e,n){t.format.toggle(n)}function s(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var i=t.selection.blocks(),o=0;o<i.length;o++)if("LI"!=i[o].tagName&&"LI"!=i[o].parentNode.tagName){var s=e(i[o]),a="rtl"==t.opts.direction||"rtl"==s.css("direction")?"margin-right":"margin-left",r=t.helpers.getPX(s.css(a));s.css(a,Math.max(r+n*t.opts.indentMargin,0)||""),s.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function a(e){return function(){i(e)}}function r(){t.events.on("keydown",(function(e){var n=t.selection.element();if(n&&"HR"==n.tagName&&!t.keys.isArrow(e.which))return e.preventDefault(),!1})),t.events.on("keyup",(function(n){var i=t.selection.element();if(i&&"HR"==i.tagName)if(n.which==e.FE.KEYCODE.ARROW_LEFT||n.which==e.FE.KEYCODE.ARROW_UP){if(i.previousSibling)return t.node.isBlock(i.previousSibling)?t.selection.setAtEnd(i.previousSibling):e(i).before(e.FE.MARKERS),t.selection.restore(),!1}else if((n.which==e.FE.KEYCODE.ARROW_RIGHT||n.which==e.FE.KEYCODE.ARROW_DOWN)&&i.nextSibling)return t.node.isBlock(i.nextSibling)?t.selection.setAtStart(i.nextSibling):e(i).after(e.FE.MARKERS),t.selection.restore(),!1})),t.events.on("mousedown",(function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1})),t.events.on("mouseup",(function(){var n=t.selection.element();n==t.selection.endElement()&&n&&"HR"==n.tagName&&(n.nextSibling&&(t.node.isBlock(n.nextSibling)?t.selection.setAtStart(n.nextSibling):e(n).after(e.FE.MARKERS)),t.selection.restore())}))}var l={bold:function(){o("bold","strong")},subscript:function(){t.format.is("sup")&&t.format.remove("sup"),o("subscript","sub")},superscript:function(){t.format.is("sub")&&t.format.remove("sub"),o("superscript","sup")},italic:function(){o("italic","em")},strikeThrough:function(){o("strikeThrough","s")},underline:function(){o("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){s(1)},outdent:function(){s(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove();var i="";t.core.isEmpty()&&(i=n(i="<br>")),t.html.insert('<hr id="fr-just">'+i);var o,s=t.$el.find("hr#fr-just");if(s.removeAttr("id"),0===s.next().length){var a=t.html.defaultTag();a?s.after(e("<"+a+">").append("<br>")):s.after("<br>")}s.prev().is("hr")?o=t.selection.setAfter(s.get(0),!1):s.next().is("hr")?o=t.selection.setBefore(s.get(0),!1):t.selection.setAfter(s.get(0),!1)||t.selection.setBefore(s.get(0),!1),o||void 0===o||(i=n(i=e.FE.MARKERS+"<br>"),s.after(i)),t.selection.restore()},clearFormatting:function(){t.format.remove()},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}},c={};for(var d in l)l.hasOwnProperty(d)&&(c[d]=a(d));return e.extend(c,{exec:i,_init:r})},e.FE.MODULES.data=function(e){function t(e){return e}function n(e){if(!e)return e;for(var n="",s=t("charCodeAt"),a=t("fromCharCode"),r=u.indexOf(e[0]),l=1;l<e.length-2;l++){for(var c=i(++r),d=e[s](l),p="";/[0-9-]/.test(e[l+1]);)p+=e[++l];d=o(d,c,p=parseInt(p,10)||0),d^=r-1&31,n+=String[a](d)}return n}function i(e){for(var t=e.toString(),n=0,i=0;i<t.length;i++)n+=parseInt(t.charAt(i),10);return n>10?n%9+1:n}function o(e,t,n){for(var i=Math.abs(n);i-- >0;)e-=t;return n<0&&(e+=123),e}function s(e){return!(!e||"block"===e.css("display")||(e.remove(),0))}function a(){return s(c)||s(d)}function r(){if(f>10&&e.destroy(),!e.$box)return!1;e.$wp.prepend(h(t(h("NCKB1zwtPA9tqzajXC2c2A7B-16VD3spzJ1C9C3D5oOF2OB1NB1LD7VA5QF4TE3gytXB2A4C-8VA2AC4E1D3GB2EB2KC3KD1MF1juuSB1A8C6yfbmd1B2a1A5qdsdB2tivbC3CB1KC1CH1eLA2sTF1B4I4H-7B-21UB6b1F5bzzzyAB4JC3MG2hjdKC1JE6C1E1cj1pD-16pUE5B4prra2B5ZB3D3C3pxj1EA6A3rnJA2C-7I-7JD9D1E1wYH1F3sTB5TA2G4H4ZA22qZA5BB3mjcvcCC3JB1xillavC-21VE6PC5SI4YC5C8mb1A3WC3BD2B5aoDA2qqAE3A5D-17fOD1D5RD4WC10tE6OAZC3nF-7b1C4A4D3qCF2fgmapcromlHA2QA6a1E1D3e1A6C2bie2F4iddnIA7B2mvnwcIB5OA1DB2OLQA3PB10WC7WC5d1E3uI-7b1D5D6b1E4D2arlAA4EA1F-11srxI-7MB1D7PF1E5B4adB-21YD5vrZH3D3xAC4E1A2GF2CF2J-7yNC2JE1MI2hH-7QB1C6B5B-9bA-7XB13a1B5VievwpKB4LA3NF-10H-9I-8hhaC-16nqPG4wsleTD5zqYF3h1G2B7B4yvGE2Pi1H-7C-21OE6B1uLD1kI4WC1E7C5g1D-8fue1C8C6c1D4D3Hpi1CC4kvGC2E1legallyXB4axVA11rsA4A-9nkdtlmzBA2GD3A13A6CB1dabE1lezrUE6RD5TB4A-7f1C8c1B5d1D4D3tyfCD5C2D2==")))),c=e.$wp.find("> div:first"),d=c.find("> a"),"rtl"==e.opts.direction&&c.css("left","auto").css("right",0).setAttribute("direction","rtl"),f++}function l(){var n=e.o_win.FEK;try{n=n||localStorage&&localStorage.FEK}catch(e){}n=n||e.opts.key||[""];var i=h(t("ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9=="));"string"==typeof n&&(n=[n]),e.ul=!0;for(var o=0;o<n.length;o++){var s=h(n[o])||"";if(!(s!==h(t(h("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&s.indexOf(p,s.length-p.length)<0&&[h("9qqG-7amjlwq=="),h("KA3B3C2A6D1D5H5H1A3=="),h("QzbzvxyB2yA-9m=="),h("ji1kacwmgG5bc=="),h("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(p)<0)){e.ul=!1;break}}var l=new Image;!0===e.ul&&(r(),l.src=t(h(i))+"u"),e.events.on("contentChanged",(function(){!0===e.ul&&a()&&r()})),e.events.on("destroy",(function(){c&&c.length&&c.remove()}),!0)}var c,d,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",p=function(){for(var e=0,t=document.domain,n=t.split("."),i="_gd"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),h=t(n),f=0;return{_init:l}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){function n(e,n){try{t.win.localStorage.setItem("fr-copied-html",e),t.win.localStorage.setItem("fr-copied-text",n)}catch(e){}}function i(i){var o=t.html.getSelected();n(o,e("<div>").html(o).text()),"cut"==i.type&&(t.undo.saveStep(),setTimeout((function(){t.selection.save(),t.html.wrap(),t.selection.restore(),t.events.focus(),t.undo.saveStep()}),0))}function o(e){if(w)return!1;if(e.originalEvent&&(e=e.originalEvent),!1===t.events.trigger("paste.before",[e]))return e.preventDefault(),!1;if(t.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var n="",i=e.clipboardData.types;if(t.helpers.isArray(i))for(var o=0;o<i.length;o++)n+=i[o]+";";else n=i;if(g="",/text\/rtf/.test(n)&&(v=e.clipboardData.getData("text/rtf")),/text\/html/.test(n)?g=e.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&t.browser.safari?g=v:/text\/plain/.test(n)&&!t.browser.mozilla&&(g=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==g)return c(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;g=null}return a(),!1}function s(n){if(n.originalEvent&&(n=n.originalEvent),n&&n.dataTransfer&&n.dataTransfer.getData){var i="",o=n.dataTransfer.types;if(t.helpers.isArray(o))for(var s=0;s<o.length;s++)i+=o[s]+";";else i=o;if(g="",/text\/rtf/.test(i)&&(v=n.dataTransfer.getData("text/rtf")),/text\/html/.test(i)?g=n.dataTransfer.getData("text/html"):/text\/rtf/.test(i)&&t.browser.safari?g=v:/text\/plain/.test(i)&&!this.browser.mozilla&&(g=t.html.escapeEntities(n.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==g){if(t.keys.forceUndo(),y=t.snapshot.get(),t.selection.remove(),!1!==t.markers.insertAtPoint(n)){var a=t.el.querySelector(".fr-marker");return e(a).replaceWith(e.FE.MARKERS),c(),n.preventDefault&&(n.stopPropagation(),n.preventDefault()),!1}}else g=null}}function a(){t.selection.save(),t.events.disableBlur(),g=null,b?(b.html(""),t.browser.edge&&t.opts.iframe&&t.$el.append(b)):(b=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%;" tabIndex="-1"></div>'),t.browser.safari?(b.css("top",t.$sc.scrollTop()),t.$el.after(b)):t.browser.edge&&t.opts.iframe?t.$el.append(b):t.$box.after(b),t.events.on("destroy",(function(){b.remove()}))),b.focus(),t.win.setTimeout(c,1)}function r(e){var n;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>")).replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>")).replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>")).replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span")).replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,"")).replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,"")).replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," ")).replace(/<!--[\s\S]*?-->/gi,"")).replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var i,o=["style","script","applet","embed","noframes","noscript"];for(n=0;n<o.length;n++){var s=new RegExp("<"+o[n]+".*?"+o[n]+"(.*?)>","gi");e=e.replace(s,"")}e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>")).replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");do{i=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")}while(e!=i);e=(e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>')).replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=(e=(e=t.clean.html(e,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs)).replace(/<a>(.[^<]+)<\/a>/gi,"$1")).replace(/<br> */g,"<br>");var a=t.o_doc.createElement("div");a.innerHTML=e;var r=a.querySelectorAll("li[data-indent]");for(n=0;n<r.length;n++){var l=r[n],c=l.previousElementSibling;if(c&&"LI"==c.tagName){var d=c.querySelector(":scope > ul, :scope > ol");d||(d=document.createElement("ul"),c.appendChild(d)),d.appendChild(l)}else l.removeAttribute("data-indent")}return t.html.cleanBlankSpaces(a),a.innerHTML}function l(e){var n,i=null,o=t.doc.createElement("div");o.innerHTML=e;var s=o.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(n=0;n<s.length;n++)(i=s[n]).outerHTML="<"+(t.html.defaultTag()||"DIV")+">"+i.innerHTML+"</"+(t.html.defaultTag()||"DIV")+">";for(n=(s=o.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")")).length-1;n>=0;n--)(i=s[n]).outerHTML=i.innerHTML;var a=function(e){for(var n=t.node.contents(e),i=0;i<n.length;i++)n[i].nodeType!=Node.TEXT_NODE&&n[i].nodeType!=Node.ELEMENT_NODE?n[i].parentNode.removeChild(n[i]):a(n[i])};return a(o),o.innerHTML}function c(){t.browser.edge&&t.opts.iframe&&t.$box.after(b),y||(t.keys.forceUndo(),y=t.snapshot.get()),null===g&&(g=b.get(0).innerHTML,t.selection.restore(),t.events.enableBlur());var e=g.match(/(class=\"?Mso|class=\'?Mso|class="?Xl|class='?Xl|class=Xl|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),n=t.events.chainTrigger("paste.beforeCleanup",g);n&&"string"==typeof n&&(g=n),(!e||e&&!1!==t.events.trigger("paste.wordPaste",[g]))&&d(g,e)}function d(n,i,o){var s,a=null,c=null;n.toLowerCase().indexOf("<body")>=0&&(n=(n=n.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1")).replace(/ \n/g," ").replace(/\n /g," ").replace(/([^>])\n([^<])/g,"$1 $2"));var d=!1;if(n.indexOf('id="docs-internal-guid')>=0&&(n=n.replace(/^[\w\W\s\S]* id="docs-internal-guid[^>]*>([\w\W\s\S]*)<\/b>[\w\W\s\S]*$/g,"$1"),d=!0),!i){var p=t.opts.htmlAllowedStyleProps;t.opts.htmlAllowedStyleProps=t.opts.pasteAllowedStyleProps,t.opts.htmlAllowComments=!1,n=t.clean.html(n,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowedStyleProps=p,t.opts.htmlAllowComments=!0,n=(n=h(n)).replace(/\r|\n|\t/g,"");var f=t.doc.createElement("div");f.innerHTML=n;var m=null,g=null;try{m=t.win.localStorage.getItem("fr-copied-html"),g=t.win.localStorage.getItem("fr-copied-text")}catch(e){}g&&f.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==g.replace(/(\u00A0)/gi," ").replace(/(\r|\n)+([ ]+[\r\n]+)*/gi," ")&&(n=m),n=n.replace(/^ */g,"").replace(/ *$/g,"")}!i||t.wordPaste&&o||(0===(n=n.replace(/^\n*/g,"").replace(/^ /g,"")).indexOf("<colgroup>")&&(n="<table>"+n+"</table>"),n=h(n=r(n))),t.opts.pastePlain&&(n=l(n));var v=t.events.chainTrigger("paste.afterCleanup",n);if("string"==typeof v&&(n=v),""!==n){var b=t.o_doc.createElement("div");b.innerHTML=n,t.spaces.normalize(b);var w=b.getElementsByTagName("span");for(s=w.length-1;s>=0;s--){var _=w[s];0===_.attributes.length&&(_.outerHTML=_.innerHTML)}var T=t.selection.element(),E=!1;if(T&&e(T).parentsUntil(t.el,"ul, ol").length&&(E=!0),E){var S=b.children;1==S.length&&["OL","UL"].indexOf(S[0].tagName)>=0&&(S[0].outerHTML=S[0].innerHTML)}if(!d){var A=b.getElementsByTagName("br");for(s=A.length-1;s>=0;s--){var C=A[s];t.node.isBlock(C.previousSibling)&&C.parentNode.removeChild(C)}}if(t.opts.enter==e.FE.ENTER_BR)for(s=(a=b.querySelectorAll("p, div")).length-1;s>=0;s--)0===(c=a[s]).attributes.length&&(c.outerHTML=c.innerHTML+(c.nextSibling&&!t.node.isEmpty(c)?"<br>":""));else if(t.opts.enter==e.FE.ENTER_DIV)for(s=(a=b.getElementsByTagName("p")).length-1;s>=0;s--)(c=a[s]).outerHTML="<div>"+c.innerHTML+"</div>";else t.opts.enter==e.FE.ENTER_P&&b.childNodes.length&&"P"==b.childNodes[0].tagName&&(b.childNodes[0].outerHTML=b.childNodes[0].innerHTML);n=b.innerHTML,t.html.insert(n,!0)}u(),t.undo.saveStep(y),y=null,t.undo.saveStep()}function u(){t.events.trigger("paste.after")}function p(){return v}function h(n){var i,o=t.o_doc.createElement("div");o.innerHTML=n;for(var s=o.querySelectorAll("*:empty:not(td):not(th):not(iframe):not(svg):not("+e.FE.VOID_ELEMENTS.join("):not(")+")");s.length;){for(i=0;i<s.length;i++)s[i].parentNode.removeChild(s[i]);s=o.querySelectorAll("*:empty:not(td):not(th):not(iframe):not(svg):not("+e.FE.VOID_ELEMENTS.join("):not(")+")")}for(var a=o.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])");a.length;){var r=a[a.length-1];if(t.html.defaultTag()&&"div"!=t.html.defaultTag())r.querySelector(t.html.blockTagsQuery())?r.outerHTML=r.innerHTML:r.outerHTML="<"+t.html.defaultTag()+">"+r.innerHTML+"</"+t.html.defaultTag()+">";else{var l=r.querySelectorAll("*");!l.length||"BR"!==l[l.length-1].tagName&&0===r.innerText.length?r.outerHTML=r.innerHTML+"<br>":r.outerHTML=r.innerHTML}a=o.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")}for(a=o.querySelectorAll("div:not([style])");a.length;){for(i=0;i<a.length;i++){var c=a[i],d=c.innerHTML.replace(/\u0009/gi,"").trim();c.outerHTML=d}a=o.querySelectorAll("div:not([style])")}return o.innerHTML}function f(){t.el.addEventListener("copy",i),t.el.addEventListener("cut",i),t.el.addEventListener("paste",o,{capture:!0}),t.events.on("drop",s),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",(function(e){2==e.button&&(setTimeout((function(){w=!1}),50),w=!0)}),!0),t.events.on("beforepaste",o)),t.events.on("destroy",m)}function m(){t.el.removeEventListener("copy",i),t.el.removeEventListener("cut",i),t.el.removeEventListener("paste",o)}var g,v,b,y,w=!1;return{_init:f,removeEmptyTags:h,getRtfClipboard:p,saveCopiedText:n,clean:d}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),e.FE.SHORTCUTS_MAP={},e.FE.RegisterShortcut=function(t,n,i,o,s,a){e.FE.SHORTCUTS_MAP[(s?"^":"")+(a?"@":"")+t]={cmd:n,val:i,letter:o,shift:s,option:a},e.FE.DEFAULTS.shortcutsEnabled.push(n)},e.FE.RegisterShortcut(e.FE.KEYCODE.E,"show",null,"E",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.B,"bold",null,"B",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.I,"italic",null,"I",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.U,"underline",null,"U",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),e.FE.MODULES.shortcuts=function(t){function n(n){if(!t.opts.shortcutsHint)return null;if(!s)for(var i in s={},e.FE.SHORTCUTS_MAP)e.FE.SHORTCUTS_MAP.hasOwnProperty(i)&&t.opts.shortcutsEnabled.indexOf(e.FE.SHORTCUTS_MAP[i].cmd)>=0&&(s[e.FE.SHORTCUTS_MAP[i].cmd+"."+(e.FE.SHORTCUTS_MAP[i].val||"")]={shift:e.FE.SHORTCUTS_MAP[i].shift,option:e.FE.SHORTCUTS_MAP[i].option,letter:e.FE.SHORTCUTS_MAP[i].letter});var o=s[n];return o?(t.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(o.shift?t.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(o.option?t.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+o.letter:null}function i(n){if(!t.core.hasFocus())return!0;var i=n.which,o=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if("keyup"==n.type&&a&&i!=e.FE.KEYCODE.META)return a=!1,!1;"keydown"==n.type&&(a=!1);var s=(n.shiftKey?"^":"")+(n.altKey?"@":"")+i;if(o&&e.FE.SHORTCUTS_MAP[s]){var r=e.FE.SHORTCUTS_MAP[s].cmd;if(r&&t.opts.shortcutsEnabled.indexOf(r)>=0){var l,c=e.FE.SHORTCUTS_MAP[s].val;if(r&&!c?l=t.$tb.find('.fr-command[data-cmd="'+r+'"]'):r&&c&&(l=t.$tb.find('.fr-command[data-cmd="'+r+'"][data-param1="'+c+'"]')),l.length)return n.preventDefault(),n.stopPropagation(),l.parents(".fr-toolbar").data("instance",t),"keydown"==n.type&&(t.button.exec(l),a=!0),!1;if(r&&t.commands[r])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&(t.commands[r](),a=!0),!1}}}function o(){t.events.on("keydown",i,!0),t.events.on("keyup",i,!0)}var s=null,a=!1;return{_init:o,get:n}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,i=null,o=0;o<t.length;o++){if(i){var s=t[o].nodeType===Node.TEXT_NODE&&""===t[o].textContent,a=i.nodeType===Node.TEXT_NODE&&t[o].nodeType===Node.TEXT_NODE;s||a||n++}if(t[o]==e)return n;i=t[o]}}function n(n){var i=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)i.push(t(n)),n=n.parentNode;return i.reverse()}function i(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function o(e){return{scLoc:n(e.startContainer),scOffset:i(e.startContainer,e.startOffset),ecLoc:n(e.endContainer),ecOffset:i(e.endContainer,e.endOffset)}}function s(){var t={};if(e.events.trigger("snapshot.before"),t.html=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,""),t.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var n=e.selection.ranges(),i=0;i<n.length;i++)t.ranges.push(o(n[i]));return e.events.trigger("snapshot.after",[t]),t}function a(t){for(var n=e.el,i=0;i<t.length;i++)n=n.childNodes[t[i]];return n}function r(t,n){try{var i=a(n.scLoc),o=n.scOffset,s=a(n.ecLoc),r=n.ecOffset,l=e.doc.createRange();l.setStart(i,o),l.setEnd(s,r),t.addRange(l)}catch(e){}}function l(t){e.$el.html()!=t.html&&(e.opts.htmlExecuteScripts?e.$el.html(t.html):e.el.innerHTML=t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var i=0;i<t.ranges.length;i++)r(n,t.ranges[i])}function c(t,n){return t.html==n.html&&(!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(n.ranges))}return{get:s,restore:l,equal:c}},e.FE.MODULES.undo=function(e){function t(t){var n=t.which;e.keys.ctrlKey(t)&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}function n(){return!(0===e.undo_stack.length||e.undo_index<=1)}function i(){return e.undo_index!=e.undo_stack.length}function o(t){if(!e.undo_stack||e.undoing||e.el.querySelector(".fr-marker"))return!1;void 0===t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(s(),e.undo_stack.push(t),e.undo_index++,t.html!=u&&(e.events.trigger("contentChanged"),u=t.html))):(s(),e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++))}function s(){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function a(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),u=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}}function r(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),u=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}}function l(){e.undo_index=0,e.undo_stack=[]}function c(){e.undo_stack=[]}function d(){l(),e.events.on("initialized",(function(){u=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,"")})),e.events.on("blur",(function(){e.el.querySelector(".fr-dragging")||e.undo.saveStep()})),e.events.on("keydown",t),e.events.on("destroy",c)}var u=null;return{_init:d,run:a,redo:r,canDo:n,canRedo:i,dropRedo:s,reset:l,saveStep:o}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,n){e.FE.ICON_TEMPLATES[t]=n},e.FE.DefineIcon=function(t,n){e.FE.ICONS[t]=n},e.FE.MODULES.icon=function(){function t(t){var n=null,i=e.FE.ICONS[t];if(void 0!==i){var o=i.template||e.FE.ICON_DEFAULT_TEMPLATE;o&&(o=e.FE.ICON_TEMPLATES[o])&&(n=o.replace(/\[([a-zA-Z]*)\]/g,(function(e,n){return"NAME"==n?i[n]||t:i[n]})))}return n||t}function n(t){var n=e.FE.ICONS[t],i=e.FE.ICON_DEFAULT_TEMPLATE;return void 0!==n?i=n.template||e.FE.ICON_DEFAULT_TEMPLATE:i}return{create:t,getTemplate:n}},e.extend(e.FE.DEFAULTS,{tooltips:!0}),e.FE.MODULES.tooltip=function(t){function n(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function i(n,i){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;t.$tooltip||s(),n.removeAttr("title"),t.$tooltip.text(t.language.translate(n.data("title"))),t.$tooltip.addClass("fr-visible");var o=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;o<0&&(o=0),o+t.$tooltip.outerWidth()>e(t.o_win).width()&&(o=e(t.o_win).width()-t.$tooltip.outerWidth()),void 0===i&&(i=t.opts.toolbarBottom);var a=i?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight();t.$tooltip.css("position",""),t.$tooltip.css("left",o),t.$tooltip.css("top",Math.ceil(a)),"static"!=e(t.o_doc).find("body:first").css("position")?(t.$tooltip.css("margin-left",-e(t.o_doc).find("body:first").offset().left),t.$tooltip.css("margin-top",-e(t.o_doc).find("body:first").offset().top)):(t.$tooltip.css("margin-left",""),t.$tooltip.css("margin-top",""))}function o(o,s,a){t.opts.tooltips&&!t.helpers.isMobile()&&(t.events.$on(o,"mouseenter",s,(function(n){t.node.hasClass(n.currentTarget,"fr-disabled")||t.edit.isDisabled()||i(e(n.currentTarget),a)}),!0),t.events.$on(o,"mouseleave "+t._mousedown+" "+t._mouseup,s,(function(){n()}),!0))}function s(){t.opts.tooltips&&!t.helpers.isMobile()&&(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.o_doc).find("body:first").append(t.$tooltip)),t.events.on("shared.destroy",(function(){t.$tooltip.html("").removeData().remove(),t.$tooltip=null}),!0))}return{hide:n,to:i,bind:o}},e.FE.MODULES.button=function(t){function n(t,n,i){for(var o=e(),s=0;s<t.length;s++){var a=e(t[s]);if(a.is(n)&&(o=o.add(a)),i&&a.is(".fr-dropdown")){var r=a.next().find(n);o=o.add(r)}}return o}function i(i,o){var s,a=e();if(!i)return a;for(s in a=(a=a.add(n(T,i,o))).add(n(E,i,o)),t.shared.popups)if(t.shared.popups.hasOwnProperty(s)){var r=t.shared.popups[s].children().find(i);a=a.add(r)}for(s in t.shared.modals)if(t.shared.modals.hasOwnProperty(s)){var l=t.shared.modals[s].$modal.find(i);a=a.add(l)}return a}function o(n){var o=n.next(),s=t.node.hasClass(n.get(0),"fr-active"),a=i(".fr-dropdown.fr-active").not(n),r=n.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(r.helpers.isIOS()&&!r.el.querySelector(".fr-marker")&&(r.selection.save(),r.selection.clear(),r.selection.restore()),!s){var l=n.data("cmd");o.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),e.FE.COMMANDS[l]&&e.FE.COMMANDS[l].refreshOnShow&&e.FE.COMMANDS[l].refreshOnShow.apply(r,[n,o]),o.css("left",n.offset().left-n.parent().offset().left-("rtl"==t.opts.direction?o.width()-n.outerWidth():0)),o.addClass("test-height");var c=o.outerHeight();o.removeClass("test-height"),o.css("top","").css("bottom",""),!t.opts.toolbarBottom&&o.offset().top+n.outerHeight()+c<e(t.o_doc).height()?o.css("top",n.position().top+n.outerHeight()):o.css("bottom",t.$tb.height()-n.position().top)}n.addClass("fr-blink").toggleClass("fr-active"),n.hasClass("fr-active")?(o.attr("aria-hidden",!1),n.attr("aria-expanded",!0)):(o.attr("aria-hidden",!0),n.attr("aria-expanded",!1)),setTimeout((function(){n.removeClass("fr-blink")}),300),o.css("margin-left",""),o.offset().left+o.outerWidth()>t.$sc.offset().left+t.$sc.width()&&o.css("margin-left",-(o.offset().left+o.outerWidth()-t.$sc.offset().left-t.$sc.width())),a.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),a.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!==n.parents(".fr-popup").length||t.opts.toolbarInline||(t.node.hasClass(n.get(0),"fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""));var d=o.find("a.fr-command.fr-active:first");t.helpers.isMobile()||(d.length?t.accessibility.focusToolbarElement(d):t.accessibility.focusToolbarElement(n))}function s(e){e.addClass("fr-blink"),setTimeout((function(){e.removeClass("fr-blink")}),500);for(var t=e.data("cmd"),n=[];void 0!==e.data("param"+(n.length+1));)n.push(e.data("param"+(n.length+1)));var o=i(".fr-dropdown.fr-active");o.length&&(o.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),o.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),e.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(t,n)}function a(e){s(e)}function r(n){var i=n.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==n.parents(".fr-popup").length||n.data("popup")||i.popups.hideAll(),i.popups.areVisible()&&!i.popups.areVisible(i)){for(var s=0;s<e.FE.INSTANCES.length;s++)e.FE.INSTANCES[s]!=i&&e.FE.INSTANCES[s].popups&&e.FE.INSTANCES[s].popups.areVisible()&&e.FE.INSTANCES[s].$el.find(".fr-marker").remove();i.popups.hideAll()}t.node.hasClass(n.get(0),"fr-dropdown")?o(n):(a(n),e.FE.COMMANDS[n.data("cmd")]&&!1!==e.FE.COMMANDS[n.data("cmd")].refreshAfterCallback&&i.button.bulkRefresh())}function l(t){r(e(t.currentTarget))}function c(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function d(e){e.preventDefault(),e.stopPropagation()}function u(e){if(e.stopPropagation(),!t.helpers.isMobile())return!1}function p(n,i){t.events.bindClick(n,".fr-command:not(.fr-disabled)",l),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",d,!0),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",u,!0);var o=n.get(0).ownerDocument,s="defaultView"in o?o.defaultView:o.parentWindow,a=function(i){(!i||i.type==t._mouseup&&i.target!=e("html").get(0)||"keydown"==i.type&&(t.keys.isCharacter(i.which)&&!t.keys.ctrlKey(i)||i.which==e.FE.KEYCODE.ESC))&&c(n)};t.events.$on(e(s),t._mouseup+" resize keydown",a,!0),t.opts.iframe&&t.events.$on(t.$win,t._mouseup,a,!0),t.node.hasClass(n.get(0),"fr-popup")?e.merge(E,n.find(".fr-btn").toArray()):e.merge(T,n.find(".fr-btn").toArray()),t.tooltip.bind(n,".fr-btn, .fr-title",i)}function h(e,n){var i="";if(n.html)"function"==typeof n.html?i+=n.html.call(t):i+=n.html;else{var o=n.options;for(var s in"function"==typeof o&&(o=o()),i+='<ul class="fr-dropdown-list" role="presentation">',o)if(o.hasOwnProperty(s)){var a=t.shortcuts.get(e+"."+s);a=a?'<span class="fr-shortcut">'+a+"</span>":"",i+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+s+'" title="'+o[s]+'">'+t.language.translate(o[s])+"</a></li>"}i+="</ul>"}return i}function f(e,n,i){if(t.helpers.isMobile()&&!1===n.showOnMobile)return"";var o,s=n.displaySelection;if("function"==typeof s&&(s=s(t)),s){var a="function"==typeof n.defaultSelection?n.defaultSelection(t):n.defaultSelection;o='<span style="width:'+(n.displaySelectionWidth||100)+'px">'+t.language.translate(a||n.title)+"</span>"}else o=t.icon.create(n.icon||e),o+='<span class="fr-sr-only">'+(t.language.translate(n.title)||"")+"</span>";var r=n.popup?' data-popup="true"':"",l=n.modal?' data-modal="true"':"",c=t.shortcuts.get(e+".");c=c?" ("+c+")":"";var d=e+"-"+t.id,u="dropdown-menu-"+d,p='<button id="'+d+'"type="button" tabIndex="-1" role="button"'+(n.toggle?' aria-pressed="false"':"")+("dropdown"==n.type?' aria-controls="'+u+'" aria-expanded="false" aria-haspopup="true"':"")+(n.disabled?' aria-disabled="true"':"")+' title="'+(t.language.translate(n.title)||"")+c+'" class="fr-command fr-btn'+("dropdown"==n.type?" fr-dropdown":"")+" fr-btn-"+t.icon.getTemplate(n.icon)+(n.displaySelection?" fr-selection":"")+(n.back?" fr-back":"")+(n.disabled?" fr-disabled":"")+(i?"":" fr-hidden")+'" data-cmd="'+e+'"'+r+l+">"+o+"</button>";if("dropdown"==n.type){var f='<div id="'+u+'" class="fr-dropdown-menu" role="listbox" aria-labelledby="'+d+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';f+=h(e,n),p+=f+="</div></div></div>"}return p}function m(n,i){for(var o="",s=0;s<n.length;s++){var a=n[s],r=e.FE.COMMANDS[a];r&&void 0!==r.plugin&&t.opts.pluginsEnabled.indexOf(r.plugin)<0||(r?o+=f(a,r,void 0===i||i.indexOf(a)>=0):"|"==a?o+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==a&&(o+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>'))}return o}function g(n){var i,o=n.parents(".fr-popup, .fr-toolbar").data("instance")||t,s=n.data("cmd");t.node.hasClass(n.get(0),"fr-dropdown")?i=n.next():(n.removeClass("fr-active"),n.attr("aria-pressed")&&n.attr("aria-pressed",!1)),e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].refresh?e.FE.COMMANDS[s].refresh.apply(o,[n,i]):t.refresh[s]&&o.refresh[s](n,i)}function v(n){var i=t.$tb&&t.$tb.data("instance")||t;if(!1===t.events.trigger("buttons.refresh"))return!0;setTimeout((function(){for(var o=i.selection.inEditor()&&i.core.hasFocus(),s=0;s<n.length;s++){var a=e(n[s]),r=a.data("cmd");0===a.parents(".fr-popup").length?o||e.FE.COMMANDS[r]&&e.FE.COMMANDS[r].forcedRefresh?i.button.refresh(a):t.node.hasClass(a.get(0),"fr-dropdown")||(a.removeClass("fr-active"),a.attr("aria-pressed")&&a.attr("aria-pressed",!1)):a.parents(".fr-popup").is(":visible")&&i.button.refresh(a)}}),0)}function b(){v(T),v(E)}function y(){T=[],E=[]}function w(){clearTimeout(S),S=setTimeout(b,50)}function _(){t.opts.toolbarInline?t.events.on("toolbar.show",b):(t.events.on("mouseup",w),t.events.on("keyup",w),t.events.on("blur",w),t.events.on("focus",w),t.events.on("contentChanged",w),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",b)),t.events.on("shared.destroy",y)}var T=[];(t.opts.toolbarInline||t.opts.toolbarContainer)&&(t.shared.buttons||(t.shared.buttons=[]),T=t.shared.buttons);var E=[];t.shared.popup_buttons||(t.shared.popup_buttons=[]),E=t.shared.popup_buttons;var S=null;return{_init:_,buildList:m,bindCommands:p,refresh:g,bulkRefresh:b,exec:s,click:r,hideActiveDropdowns:c,getButtons:i}},e.FE.MODULES.modals=function(t){function n(e){return h[e]}function i(n,i){var o='<div tabIndex="-1" class="fr-modal'+(t.opts.theme?" "+t.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">';return o+='<div class="fr-modal-head">'+n+'<i title="'+t.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i></div>',o+='<div tabIndex="-1" class="fr-modal-body">'+i+"</div>",e(o+="</div></div>")}function o(n,o,s){if(t.shared.$overlay||(t.shared.$overlay=e('<div class="fr-overlay">').appendTo("body:first")),p=t.shared.$overlay,t.opts.theme&&p.addClass(t.opts.theme+"-theme"),!h[n]){var a=i(o,s);h[n]={$modal:a,$head:a.find(".fr-modal-head"),$body:a.find(".fr-modal-body")},t.helpers.isMobile()||a.addClass("fr-desktop"),a.appendTo("body:first"),t.events.bindClick(a,"i.fr-modal-close",(function(){r(n)})),h[n].$body.css("margin-top",h[n].$head.outerHeight()),t.events.$on(a,"keydown",(function(i){var o=i.which;return o==e.FE.KEYCODE.ESC?(r(n),t.accessibility.focusModalButton(a),!1):!(!e(i.currentTarget).is("input[type=text], textarea")&&o!=e.FE.KEYCODE.ARROW_UP&&o!=e.FE.KEYCODE.ARROW_DOWN&&!t.keys.isBrowserAction(i)&&(i.preventDefault(),i.stopPropagation(),1))}),!0),r(n,!0)}return h[n]}function s(){for(var e in h){var t=h[e];t&&t.$modal&&t.$modal.removeData().remove()}p&&p.removeData().remove(),h={}}function a(n){if(h[n]){var i=h[n].$modal;i.data("instance",t),i.show(),p.show(),e(t.o_doc).find("body:first").addClass("prevent-scroll"),t.helpers.isMobile()&&e(t.o_doc).find("body:first").addClass("fr-mobile"),i.addClass("fr-active"),t.accessibility.focusModal(i)}}function r(n,i){if(h[n]){var o=h[n].$modal,s=o.data("instance")||t;s.events.enableBlur(),o.hide(),p.hide(),e(s.o_doc).find("body:first").removeClass("prevent-scroll fr-mobile"),o.removeClass("fr-active"),i||(t.accessibility.restoreSelection(s),t.events.trigger("modals.hide"))}}function l(n){if(h[n]){var i=h[n],o=i.$modal,s=i.$body,a=e(t.o_win).height(),r=o.find(".fr-modal-wrapper"),l=a-r.outerHeight(!0)+(r.height()-(s.outerHeight(!0)-s.height())),c="auto";s.get(0).scrollHeight>l&&(c=l),s.height(c)}}function c(e){var n;if("string"==typeof e){if(!h[e])return;n=h[e].$modal}else n=e;return n&&t.node.hasClass(n,"fr-active")&&t.core.sameInstance(n)||!1}function d(e){for(var t in h)if(h.hasOwnProperty(t)&&c(t)&&(void 0===e||h[t].$modal.data("instance")==e))return h[t].$modal;return!1}function u(){t.events.on("shared.destroy",s,!0)}t.shared.modals||(t.shared.modals={});var p,h=t.shared.modals;return{_init:u,get:n,create:o,show:a,hide:r,resize:l,isVisible:c,areVisible:d}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,n){e.FE.POPUP_TEMPLATES[t]=n},e.FE.MODULES.popups=function(t){function n(e,n){n.is(":visible")||(n=t.$sc),n.is(E[e].data("container"))||(E[e].data("container",n),n.append(E[e]))}function i(e,i,o,r){if(s(e)||(a()&&t.$el.find(".fr-marker").length>0?(t.events.disableBlur(),t.selection.restore()):(t.events.disableBlur(),t.events.focus(),t.events.enableBlur())),p([e]),!E[e])return!1;var l=t.button.getButtons(".fr-dropdown.fr-active");l.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),l.next().attr("aria-hidden",!0),E[e].data("instance",t),t.$tb&&t.$tb.data("instance",t);var c=E[e].outerWidth(),d=s(e);E[e].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var u=E[e].data("container");t.opts.toolbarInline&&u&&t.$tb&&u.get(0)==t.$tb.get(0)&&(n(e,t.$sc),o=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top")),i=t.$tb.offset().left+t.$tb.outerWidth()/2+(parseFloat(t.$tb.find(".fr-arrow").css("margin-left"))||0)+t.$tb.find(".fr-arrow").outerWidth()/2,t.node.hasClass(t.$tb.get(0),"fr-above")&&o&&(o+=t.$tb.outerHeight()),r=0),u=E[e].data("container"),!t.opts.iframe||r||d||(i&&(i-=t.$iframe.offset().left),o&&(o-=t.$iframe.offset().top)),u.is(t.$tb)?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):E[e].css("zIndex",(t.opts.zIndex||1)+4),i&&(i-=c/2),t.opts.toolbarBottom&&u&&t.$tb&&u.get(0)==t.$tb.get(0)&&(E[e].addClass("fr-above"),o&&(o-=E[e].outerHeight())),E[e].removeClass("fr-active"),t.position.at(i,o,E[e],r||0),E[e].addClass("fr-active"),d||t.accessibility.focusPopup(E[e]),t.opts.toolbarInline&&t.toolbar.hide(),t.events.trigger("popups.show."+e),b(e)._repositionPopup(),f()}function o(e,n){t.events.on("popups.show."+e,n)}function s(e){return E[e]&&t.node.hasClass(E[e],"fr-active")&&t.core.sameInstance(E[e])||!1}function a(e){for(var t in E)if(E.hasOwnProperty(t)&&s(t)&&(void 0===e||E[t].data("instance")==e))return E[t];return!1}function r(e){var n=null;(n="string"!=typeof e?e:E[e])&&t.node.hasClass(n,"fr-active")&&(n.removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),n.find("input, textarea, button").filter(":focus").blur(),n.find("input, textarea").attr("disabled","disabled"))}function l(e,n){t.events.on("popups.hide."+e,n)}function c(e){var n=E[e];return n&&!n.data("inst"+t.id)&&y(b(e),e),n}function d(e,n){t.events.on("popups.refresh."+e,n)}function u(n){E[n].data("instance",t),t.events.trigger("popups.refresh."+n);for(var i=E[n].find(".fr-command"),o=0;o<i.length;o++){var s=e(i[o]);0===s.parents(".fr-dropdown-menu").length&&t.button.refresh(s)}}function p(e){for(var t in void 0===e&&(e=[]),E)E.hasOwnProperty(t)&&e.indexOf(t)<0&&r(t)}function h(){t.shared.exit_flag=!0}function f(){t.shared.exit_flag=!1}function m(){return t.shared.exit_flag}function g(n,i){var o=e.FE.POPUP_TEMPLATES[n];for(var s in"function"==typeof o&&(o=o.apply(t)),i)i.hasOwnProperty(s)&&(o=o.replace("[_"+s.toUpperCase()+"_]",i[s]));return o}function v(n,i){var o=g(n,i),s=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+o+"</div>");t.opts.theme&&s.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&s.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),s.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var a=e("body:first");return a.append(s),s.data("container",a),E[n]=s,t.button.bindCommands(s,!1),s}function b(n){var i=E[n];return{_windowResize:function(){var e=i.data("instance")||t;!e.helpers.isMobile()&&i.is(":visible")&&(e.events.disableBlur(),e.popups.hide(n),e.events.enableBlur())},_inputFocus:function(n){var o=i.data("instance")||t,s=e(n.currentTarget);if(s.is("input:file")&&s.closest(".fr-layer").addClass("fr-input-focus"),n.preventDefault(),n.stopPropagation(),setTimeout((function(){o.events.enableBlur()}),100),o.helpers.isMobile()){var a=e(o.o_win).scrollTop();setTimeout((function(){e(o.o_win).scrollTop(a)}),0)}},_inputBlur:function(n){var o=i.data("instance")||t,s=e(n.currentTarget);s.is("input:file")&&s.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&e(this).is(":visible")&&(o.events.blurActive()&&o.events.trigger("blur"),o.events.enableBlur())},_editorKeydown:function(o){var a=i.data("instance")||t;a.keys.ctrlKey(o)||o.which==e.FE.KEYCODE.ALT||o.which==e.FE.KEYCODE.ESC||(s(n)&&i.find(".fr-back:visible").length?a.button.exec(i.find(".fr-back:visible:first")):o.which!=e.FE.KEYCODE.ALT&&a.popups.hide(n))},_preventFocus:function(n){var o=i.data("instance")||t,s=n.originalEvent?n.originalEvent.target||n.originalEvent.originalTarget:null;"mouseup"==n.type||e(s).is(":focus")||o.events.disableBlur(),"mouseup"!=n.type||e(s).hasClass("fr-command")||e(s).parents(".fr-command").length>0||t.button.hideActiveDropdowns(i),(t.browser.safari||t.browser.mozilla)&&"mousedown"==n.type&&e(s).is("input[type=file]")&&o.events.disableBlur();var a="input, textarea, button, select, label, .fr-command";if(s&&!e(s).is(a)&&0===e(s).parents(a).length)return n.stopPropagation(),!1;s&&e(s).is(a)&&n.stopPropagation(),f()},_editorMouseup:function(){i.is(":visible")&&m()&&i.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(i))return!0;var o=i.data("instance")||t;i.is(":visible")&&m()&&(e.stopPropagation(),o.markers.remove(),o.popups.hide(n),f())},_windowKeydown:function(o){if(!t.core.sameInstance(i))return!0;var s=i.data("instance")||t,a=o.which;if(e.FE.KEYCODE.ESC==a){if(s.popups.isVisible(n)&&s.opts.toolbarInline)return o.stopPropagation(),s.popups.isVisible(n)&&(i.find(".fr-back:visible").length?(s.button.exec(i.find(".fr-back:visible:first")),s.accessibility.focusPopupButton(i)):i.find(".fr-dismiss:visible").length?s.button.exec(i.find(".fr-dismiss:visible:first")):(s.popups.hide(n),s.toolbar.showInline(null,!0),s.accessibility.FocusPopupButton(i))),!1;if(s.popups.isVisible(n))return i.find(".fr-back:visible").length?(s.button.exec(i.find(".fr-back:visible:first")),s.accessibility.focusPopupButton(i)):i.find(".fr-dismiss:visible").length?s.button.exec(i.find(".fr-dismiss:visible:first")):(s.popups.hide(n),s.accessibility.focusPopupButton(i)),!1}},_doPlaceholder:function(){0===e(this).next().length&&e(this).attr("placeholder")&&e(this).after('<label for="'+e(this).attr("id")+'">'+e(this).attr("placeholder")+"</label>"),e(this).toggleClass("fr-not-empty",""!==e(this).val())},_repositionPopup:function(){if(!t.opts.height&&!t.opts.heightMax||t.opts.toolbarInline)return!0;if(t.$wp&&s(n)&&i.parent().get(0)==t.$sc.get(0)){var e=i.offset().top-t.$wp.offset().top,o=t.$wp.outerHeight();t.node.hasClass(i.get(0),"fr-above")&&(e+=i.outerHeight()),e>o||e<0?i.addClass("fr-hidden"):i.removeClass("fr-hidden")}}}}function y(e,n){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",(function(){a()&&t.markers.remove(),p()})),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+n,e._repositionPopup),t.events.on("window.mouseup",e._windowMouseup,!0),t.events.on("window.keydown",e._windowKeydown,!0),E[n].data("inst"+t.id,!0),t.events.on("destroy",(function(){t.core.sameInstance(E[n])&&E[n].removeClass("fr-active").appendTo("body:first")}),!0)}function w(n,i){var o=v(n,i),s=b(n);return y(s,n),t.events.$on(o,"mousedown mouseup touchstart touchend touch","*",s._preventFocus,!0),t.events.$on(o,"focus","input, textarea, button, select",s._inputFocus,!0),t.events.$on(o,"blur","input, textarea, button, select",s._inputBlur,!0),t.accessibility.registerPopup(n),t.events.$on(o,"keydown keyup change input","input, textarea",s._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(o,"touchend","label",(function(){e("#"+e(this).attr("for")).prop("checked",(function(e,t){return!t}))}),!0),t.events.$on(e(t.o_win),"resize",s._windowResize,!0),o}function _(){for(var e in E)if(E.hasOwnProperty(e)){var t=E[e];t&&(t.html("").removeData().remove(),E[e]=null)}E=[]}function T(){t.events.on("shared.destroy",_,!0),t.events.on("window.mousedown",h),t.events.on("window.touchmove",f),t.events.on("mousedown",(function(e){a()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),h(),t.events.disableBlur())}))}t.shared.popups||(t.shared.popups={});var E=t.shared.popups;return t.shared.exit_flag=!1,{_init:T,create:w,get:c,show:i,hide:r,onHide:l,hideAll:p,setContainer:n,refresh:u,onRefresh:d,onShow:o,isVisible:s,areVisible:a}},e.FE.MODULES.position=function(t){function n(){var e=t.selection.ranges(0).getBoundingClientRect();if(0===e.top&&0===e.left&&0===e.width||0===e.height){var n=!1;0===t.$el.find(".fr-marker").length&&(t.selection.save(),n=!0);var i=t.$el.find(".fr-marker:first");i.css("display","inline"),i.css("line-height","");var o=i.offset(),s=i.outerHeight();i.css("display","none"),i.css("line-height",0),(e={}).left=o.left,e.width=0,e.height=s,e.top=o.top-(t.helpers.isMobile()?0:t.helpers.scrollTop()),e.right=1,e.bottom=1,e.ok=!0,n&&t.selection.restore()}return e}function i(e,n,i){var o=e.outerHeight(!0);if(!t.helpers.isMobile()&&t.$tb&&e.parent().get(0)!=t.$tb.get(0)){var s=e.parent().offset().top,a=n-o-(i||0);e.parent().get(0)==t.$sc.get(0)&&(s-=e.parent().position().top);var r=t.$sc.get(0).scrollHeight;s+n+o>t.$sc.offset().top+r&&e.parent().offset().top+a>0&&a>0?(n=a,e.addClass("fr-above")):e.removeClass("fr-above")}return n}function o(e,n){var i=e.outerWidth(!0);return e.parent().offset().left+n+i>t.$sc.get(0).clientWidth-t.$sc.position().left-10&&(n=t.$sc.get(0).clientWidth-e.parent().offset().left-i-10),n<0&&(n=10),n}function s(e){var i=n();e.css({top:0,left:0});var o=i.top+i.height,s=i.left+i.width/2-e.get(0).offsetWidth/2+t.helpers.scrollLeft();t.opts.iframe||(o+=t.helpers.scrollTop()),a(s,o,e,i.height)}function a(e,n,s,a){var r=s.data("container");!r||"BODY"===r.get(0).tagName&&"static"==r.css("position")||(e&&(e-=r.offset().left),n&&(n-=r.offset().top),"BODY"!=r.get(0).tagName?(e&&(e+=r.get(0).scrollLeft),n&&(n+=r.get(0).scrollTop)):"absolute"==r.css("position")&&(e&&(e+=r.position().left),n&&(n+=r.position().top))),t.opts.iframe&&r&&t.$tb&&r.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),n&&(n+=t.$iframe.offset().top));var l=o(s,e);if(e){s.css("left",l);var c=s.data("fr-arrow");c||(c=s.find(".fr-arrow"),s.data("fr-arrow",c)),c.data("margin-left")||c.data("margin-left",t.helpers.getPX(c.css("margin-left"))),c.css("margin-left",e-l+c.data("margin-left"))}n&&s.css("top",i(s,n,a))}function r(n){var i=e(n),o=i.is(".fr-sticky-on"),s=i.data("sticky-top"),a=i.data("sticky-scheduled");if(void 0===s){i.data("sticky-top",0);var r=e('<div class="fr-sticky-dummy" style="height: '+i.outerHeight()+'px;"></div>');t.$box.prepend(r)}else t.$box.find(".fr-sticky-dummy").css("height",i.outerHeight());if(t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var l=t.helpers.scrollTop(),c=Math.min(Math.max(l-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-i.outerHeight());c!=s&&c!=a&&(clearTimeout(i.data("sticky-timeout")),i.data("sticky-scheduled",c),i.outerHeight()<l-t.$tb.parent().offset().top&&i.addClass("fr-opacity-0"),i.data("sticky-timeout",setTimeout((function(){var e=t.helpers.scrollTop(),n=Math.min(Math.max(e-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-i.outerHeight());n>0&&"BODY"==t.$tb.parent().get(0).tagName&&(n+=t.$tb.parent().position().top),n!=s&&(i.css("top",Math.max(n,0)),i.data("sticky-top",n),i.data("sticky-scheduled",n)),i.removeClass("fr-opacity-0")}),100))),o||(i.css("top","0"),i.width(t.$tb.parent().width()),i.addClass("fr-sticky-on"),t.$box.addClass("fr-sticky-box"))}else clearTimeout(e(n).css("sticky-timeout")),i.css("top","0"),i.css("position",""),i.width(""),i.data("sticky-top",0),i.removeClass("fr-sticky-on"),t.$box.removeClass("fr-sticky-box")}function l(n){if(n.offsetWidth){var i,o,s=e(n),a=s.outerHeight(),r=s.data("sticky-position"),l=e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer).outerHeight(),c=0,d=0;"body"!==t.opts.scrollableContainer&&(c=t.$sc.offset().top,d=e(t.o_win).outerHeight()-c-l);var u="body"==t.opts.scrollableContainer?t.helpers.scrollTop():c,p=s.is(".fr-sticky-on");s.data("sticky-parent")||s.data("sticky-parent",s.parent());var h=s.data("sticky-parent"),f=h.offset().top,m=h.outerHeight();if(s.data("sticky-offset")||(s.data("sticky-offset",!0),s.after('<div class="fr-sticky-dummy" style="height: '+a+'px;"></div>')),!r){var g="auto"!==s.css("top")||"auto"!==s.css("bottom");g||s.css("position","fixed"),r={top:t.node.hasClass(s.get(0),"fr-top"),bottom:t.node.hasClass(s.get(0),"fr-bottom")},g||s.css("position",""),s.data("sticky-position",r),s.data("top",t.node.hasClass(s.get(0),"fr-top")?s.css("top"):"auto"),s.data("bottom",t.node.hasClass(s.get(0),"fr-bottom")?s.css("bottom"):"auto")}var v=function(){return f<u+i&&f+m-a>=u+i},b=function(){return f+a<u+l-o&&f+m>u+l-o};i=t.helpers.getPX(s.data("top")),o=t.helpers.getPX(s.data("bottom"));var y=r.top&&v(),w=r.bottom&&b();y||w?(s.css("width",h.get(0).getBoundingClientRect().width+"px"),p||(s.addClass("fr-sticky-on"),s.removeClass("fr-sticky-off"),s.css("top")&&("auto"!=s.data("top")?s.css("top",t.helpers.getPX(s.data("top"))+c):s.data("top","auto")),s.css("bottom")&&("auto"!=s.data("bottom")?s.css("bottom",t.helpers.getPX(s.data("bottom"))+d):s.css("bottom","auto")))):t.node.hasClass(s.get(0),"fr-sticky-off")||(s.width(""),s.removeClass("fr-sticky-on"),s.addClass("fr-sticky-off"),s.css("top")&&"auto"!=s.data("top")&&r.top&&s.css("top",0),s.css("bottom")&&"auto"!=s.data("bottom")&&r.bottom&&s.css("bottom",0))}}function c(){var e=document.createElement("test").style;return e.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==e.position.indexOf("sticky")&&!t.helpers.isIOS()&&!t.helpers.isAndroid()&&!t.browser.chrome}function d(){if(!c())if(t._stickyElements=[],t.helpers.isIOS()){var n=function(){t.helpers.requestAnimationFrame()(n);for(var e=0;e<t._stickyElements.length;e++)r(t._stickyElements[e])};n(),t.events.$on(e(t.o_win),"scroll",(function(){if(t.core.hasFocus())for(var n=0;n<t._stickyElements.length;n++){var i=e(t._stickyElements[n]),o=i.parent(),s=t.helpers.scrollTop();i.outerHeight()<s-o.offset().top&&(i.addClass("fr-opacity-0"),i.data("sticky-top",-1),i.data("sticky-scheduled",-1))}}),!0)}else t.events.$on(e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer),"scroll",u,!0),t.events.$on(e(t.o_win),"resize",u,!0),t.events.on("initialized",u),t.events.on("focus",u),t.events.$on(e(t.o_win),"resize","textarea",u,!0);t.events.on("destroy",(function(){t._stickyElements=[]}))}function u(){if(t._stickyElements)for(var e=0;e<t._stickyElements.length;e++)l(t._stickyElements[e])}function p(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),c()||(e.removeClass("fr-sticky"),t._stickyElements.push(e.get(0)))}function h(){d()}return{_init:h,forSelection:s,addSticky:p,refresh:u,at:a,getBoundingRect:n}},e.FE.MODULES.refresh=function(t){function n(e){a(e,!t.undo.canDo())}function i(e){a(e,!t.undo.canRedo())}function o(e){if(t.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var n=t.selection.blocks(),i=0;i<n.length;i++){for(var o=n[i].previousSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.previousSibling;if("LI"!=n[i].tagName||o)return a(e,!1),!0;a(e,!0)}}function s(n){if(t.node.hasClass(n.get(0),"fr-no-refresh"))return!1;for(var i=t.selection.blocks(),o=0;o<i.length;o++){var s="rtl"==t.opts.direction||"rtl"==e(i[o]).css("direction")?"margin-right":"margin-left";if("LI"==i[o].tagName||"LI"==i[o].parentNode.tagName)return a(n,!1),!0;if(t.helpers.getPX(e(i[o]).css(s))>0)return a(n,!1),!0}a(n,!0)}function a(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:n,redo:i,outdent:s,indent:o}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.FE.MODULES.textEdit=function(e){function t(){var t={edit:'<div id="fr-text-edit-'+e.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+e.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+e.language.translate("Update")+"</button></div></div>"};e.popups.create("text.edit",t)}function n(){var t,n=e.popups.get("text.edit");t="INPUT"===e.$el.prop("tagName")?e.$el.attr("placeholder"):e.$el.text(),n.find("input").val(t).trigger("change"),e.popups.setContainer("text.edit",e.$sc),e.popups.show("text.edit",e.$el.offset().left+e.$el.outerWidth()/2,e.$el.offset().top+e.$el.outerHeight(),e.$el.outerHeight())}function i(){e.events.$on(e.$el,e._mouseup,(function(){setTimeout((function(){n()}),10)}))}function o(){var t=e.popups.get("text.edit").find("input").val();0===t.length&&(t=e.opts.placeholderText),"INPUT"===e.$el.prop("tagName")?e.$el.attr("placeholder",t):e.$el.text(t),e.events.trigger("contentChanged"),e.popups.hide("text.edit")}function s(){e.opts.editInPopup&&(t(),i())}return{_init:s,update:o}},e.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","embedly","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:null,toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){function n(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function i(){var i=e.merge([],o());n(i,t.opts.toolbarButtonsXS||[]),n(i,t.opts.toolbarButtonsSM||[]),n(i,t.opts.toolbarButtonsMD||[]),n(i,t.opts.toolbarButtons);for(var s=i.length-1;s>=0;s--)"-"!=i[s]&&"|"!=i[s]&&i.indexOf(i[s])<s&&i.splice(s,1);var a=t.button.buildList(i,o());t.$tb.append(a),t.button.bindCommands(t.$tb)}function o(){var e=t.helpers.screenSize();return w[e]}function s(){var e=o();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var n=0;n<e.length;n++)if("|"==e[n]||"-"==e[n])t.$tb.append(t.button.buildList([e[n]]));else{var i=t.$tb.find('> .fr-command[data-cmd="'+e[n]+'"]'),s=null;t.node.hasClass(i.next().get(0),"fr-dropdown-menu")&&(s=i.next()),i.removeClass("fr-hidden").appendTo(t.$tb),s&&s.appendTo(t.$tb)}}function a(){t.events.$on(e(t.o_win),"resize",s),t.events.$on(e(t.o_win),"orientationchange",s)}function r(n,i){setTimeout((function(){if((!n||n.which!=e.FE.KEYCODE.ESC)&&t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection||!t.selection.isCollapsed()&&!t.keys.isIME()||i)){if(t.$tb.data("instance",t),!1===t.events.trigger("toolbar.show",[n]))return!1;t.$tb.show(),t.opts.toolbarContainer||t.position.forSelection(t.$tb),t.opts.zIndex>1?t.$tb.css("z-index",t.opts.zIndex+1):t.$tb.css("z-index",null)}}),0)}function l(e){return!(!e||"keydown"!==e.type||!t.keys.ctrlKey(e))||!!t.button.getButtons(".fr-dropdown.fr-active").next().find(t.o_doc.activeElement).length||void(!1!==t.events.trigger("toolbar.hide")&&t.$tb.hide())}function c(){if(!1===t.events.trigger("toolbar.show"))return!1;t.$tb.show()}function d(n){clearTimeout(_),n&&n.which==e.FE.KEYCODE.ESC||(_=setTimeout(r,t.opts.typingTimer))}function u(){t.events.on("window.mousedown",l),t.events.on("keydown",l),t.events.on("blur",l),t.events.on("window.mouseup",r),t.helpers.isMobile()?t.helpers.isIOS()||(t.events.on("window.touchend",r),t.browser.mozilla&&setInterval(r,200)):t.events.on("window.keyup",d),t.events.on("keydown",(function(t){t&&t.which==e.FE.KEYCODE.ESC&&l()})),t.events.on("keydown",(function(t){if(t.which==e.FE.KEYCODE.ALT)return t.stopPropagation(),!1}),!0),t.events.$on(t.$wp,"scroll.toolbar",r),t.events.on("commands.after",r),t.helpers.isMobile()&&(t.events.$on(t.$doc,"selectionchange",d),t.events.$on(t.$doc,"orientationchange",r))}function p(){t.opts.toolbarInline?(t.$sc.append(t.$tb),t.$tb.data("container",t.$sc),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),u(),t.opts.toolbarBottom=!1):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function h(){t.$tb.html("").removeData().remove(),t.$tb=null}function f(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function m(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarContainer?(t.opts.toolbarInline&&(u(),l()),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top")):p(),"defaultView"in(y=t.$tb.get(0).ownerDocument)?y.defaultView:y.parentWindow,i(),a(),t.accessibility.registerToolbar(t.$tb),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,(function(e){var n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(n&&"INPUT"!=n.tagName&&!t.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1}),!0)}function g(){if(t.$sc=e(t.opts.scrollableContainer).first(),!t.$wp)return!1;t.opts.toolbarContainer?(t.shared.$tb?(t.$tb=t.shared.$tb,t.opts.toolbarInline&&u()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),m(),t.$tb.data("instance",t)),t.opts.toolbarInline?t.$box.addClass("fr-inline"):t.$box.addClass("fr-basic"),t.events.on("focus",(function(){t.$tb.data("instance",t)}),!0),t.opts.toolbarInline=!1):t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.shared.$tb?(t.$tb=t.shared.$tb,u()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,m())):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),m(),t.$tb.data("instance",t)),t.events.on("destroy",f,!0),t.events.on(t.opts.toolbarInline||t.opts.toolbarContainer?"shared.destroy":"destroy",h,!0)}function v(){!T&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),T=!0)}function b(){T&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),T=!1),t.button.bulkRefresh()}var y,w=[];w[e.FE.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,w[e.FE.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,w[e.FE.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,w[e.FE.LG]=t.opts.toolbarButtons;var _=null,T=!1;return{_init:g,hide:l,show:c,showInline:r,disable:v,enable:b}},e.FE.PLUGINS.align=function(t){function n(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var i=t.selection.blocks(),o=0;o<i.length;o++)t.helpers.getAlignment(e(i[o].parentNode))==n?e(i[o]).css("text-align","").removeClass("fr-temp-div"):e(i[o]).css("text-align",n).removeClass("fr-temp-div"),""===e(i[o]).attr("class")&&e(i[o]).removeAttr("class"),""===e(i[o]).attr("style")&&e(i[o]).removeAttr("style");t.selection.save(),t.html.unwrap(),t.selection.restore()}function i(n){var i=t.selection.blocks();if(i.length){var o=t.helpers.getAlignment(e(i[0]));n.find("> *:first").replaceWith(t.icon.create("align-"+o))}}function o(n,i){var o=t.selection.blocks();if(o.length){var s=t.helpers.getAlignment(e(o[0]));i.find('a.fr-command[data-param1="'+s+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:n,refresh:i,refreshOnShow:o}},e.FE.DefineIcon("align",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.align.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("align-"+i)+'<span class="fr-sr-only">'+this.language.translate(n[i])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"}),e.extend(e.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),e.FE.PLUGINS.charCounter=function(t){function n(){return t.el.textContent.length}function i(i){if(t.opts.charCounterMax<0)return!0;if(n()<t.opts.charCounterMax)return!0;var o=i.which;return!(!t.keys.ctrlKey(i)&&t.keys.isCharacter(o)||o===e.FE.KEYCODE.IME)||(i.preventDefault(),i.stopPropagation(),t.events.trigger("charCounter.exceeded"),!1)}function o(i){return t.opts.charCounterMax<0||e("<div>").html(i).text().length+n()<=t.opts.charCounterMax?i:(t.events.trigger("charCounter.exceeded"),"")}function s(){if(t.opts.charCounterCount){var e=n()+(t.opts.charCounterMax>0?"/"+t.opts.charCounterMax:"");r.text(e),t.opts.toolbarBottom&&r.css("margin-bottom",t.$tb.outerHeight(!0));var i=t.$wp.get(0).offsetWidth-t.$wp.get(0).clientWidth;i>=0&&("rtl"==t.opts.direction?r.css("margin-left",i):r.css("margin-right",i))}}function a(){return!!t.$wp&&!!t.opts.charCounterCount&&((r=e('<span class="fr-counter"></span>')).css("bottom",t.$wp.css("border-bottom-width")),t.$box.append(r),t.events.on("keydown",i,!0),t.events.on("paste.afterCleanup",o),t.events.on("keyup contentChanged input",(function(){t.events.trigger("charCounter.update")})),t.events.on("charCounter.update",s),t.events.trigger("charCounter.update"),void t.events.on("destroy",(function(){e(t.o_win).off("resize.char"+t.id),r.removeData().remove(),r=null})))}var r;return{_init:a,count:n}},e.FE.PLUGINS.codeBeautifier=function(){function e(e,n){function i(e){return e.replace(/^\s+/g,"")}function o(e){return e.replace(/\s+$/g,"")}function a(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=l,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:w,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;e++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)f&&"\n"==e&&this.newlines<=m&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(g){var n=this.input.substr(this.pos,3);if("{{#"==n||"{{/"==n)break;if("{{!"==n)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var i=n.exec(this.input),o=i?i.index:this.input.length;return this.pos<o&&(t=this.input.substring(this.pos,o),this.pos=o),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,i="",o=[],s="",a=!1,r=!0,l=this.pos,c=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=l,this.line_char_count=c),o.length?o.join(""):["","TK_EOF"];if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace))a=!0;else{if("'"!=i&&'"'!=i||(i+=this.get_unformatted(i),a=!0),"="==i&&(a=!1),o.length&&"="!=o[o.length-1]&&">"!=i&&a){if(this.space_or_wrap(o),a=!1,!r&&"force"==v&&"/"!=i){this.print_newline(!0,o),this.print_indentation(o);for(var u=0;u<b;u++)o.push(d)}for(var p=0;p<o.length;p++)if(" "==o[p]){r=!1;break}}if(g&&"<"==n&&i+this.input.charAt(this.pos)=="{{"&&(i+=this.get_unformatted("}}"),o.length&&" "!=o[o.length-1]&&"<"!=o[o.length-1]&&(i=" "+i),a=!0),"<"!=i||n||(t=this.pos-1,n="<"),g&&!n&&o.length>=2&&"{"==o[o.length-1]&&"{"==o[o.length-2]&&(t="#"==i||"/"==i||"!"==i?this.pos-3:this.pos-2,n="{"),this.line_char_count++,o.push(i),o[1]&&("!"==o[1]||"?"==o[1]||"%"==o[1])){o=[this.get_comment(t)];break}if(g&&o[1]&&"{"==o[1]&&o[2]&&"!"==o[2]){o=[this.get_comment(t)];break}if(g&&"{"==n&&o.length>2&&"}"==o[o.length-2]&&"}"==o[o.length-1])break}}while(">"!=i);var f,m,y=o.join("");f=-1!=y.indexOf(" ")?y.indexOf(" "):"{"==y[0]?y.indexOf("}"):y.indexOf(">"),m="<"!=y[0]&&g?"#"==y[2]?3:2:1;var w=y.substring(m,f).toLowerCase();return"/"==y.charAt(y.length-2)||this.Utils.in_array(w,this.Utils.single_token)?e||(this.tag_type="SINGLE"):g&&"{"==y[0]&&"else"==w?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(w,h)?(s=this.get_unformatted("</"+w+">",y),o.push(s),this.pos,this.tag_type="SINGLE"):"script"==w&&(-1==y.search("type")||y.search("type")>-1&&y.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?e||(this.record_tag(w),this.tag_type="SCRIPT"):"style"==w&&(-1==y.search("type")||y.search("type")>-1&&y.search("text/css")>-1)?e||(this.record_tag(w),this.tag_type="STYLE"):"!"==w.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"==w.charAt(0)?(this.retrieve_tag(w.substring(1)),this.tag_type="END"):(this.record_tag(w),"html"!=w.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(o),this.Utils.in_array(w,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=l,this.line_char_count=c),o.join("")},this.get_comment=function(e){var t="",n=">",i=!1;this.pos=e;var o=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&((t+=o)[t.length-1]!=n[n.length-1]||-1==t.indexOf(n));)!i&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",i=!0):0===t.indexOf("<![cdata[")?(n="]]>",i=!0):0===t.indexOf("<![")?(n="]>",i=!0):0===t.indexOf("\x3c!--")?(n="--\x3e",i=!0):0===t.indexOf("{{!")?(n="}}",i=!0):0===t.indexOf("<?")?(n="?>",i=!0):0===t.indexOf("<%")&&(n="%>",i=!0)),o=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var n="",i="",o=0,s=!0;do{if(this.pos>=this.input.length)return i;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!s){this.line_char_count--;continue}if("\n"==n||"\r"==n){i+="\n",this.line_char_count=0;continue}}i+=n,this.line_char_count++,s=!0,g&&"{"==n&&i.length&&"{"==i[i.length-2]&&(o=(i+=this.get_unformatted("}}")).length)}while(-1==i.toLowerCase().indexOf(e,o));return i},this.get_token=function(){var e;if("TK_TAG_SCRIPT"==this.last_token||"TK_TAG_STYLE"==this.last_token){var t=this.last_token.substr(7);return"string"!=typeof(e=this.get_contents_to(t))?e:[e,"TK_"+t]}return"CONTENT"==this.current_mode?"string"!=typeof(e=this.get_content())?e:[e,"TK_CONTENT"]:"TAG"==this.current_mode?"string"!=typeof(e=this.get_tag())?e:[e,"TK_TAG_"+this.tag_type]:void 0},this.get_full_indent=function(e){return(e=this.indent_level+e||0)<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(n&&!this.Utils.in_array(n,t))},this.printer=function(e,t,n,s,a){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=a,this.indent_level=0,this.wrap_line_length=s,this.line_char_count=0;for(var r=0;r<this.indent_size;r++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=o(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),e=i(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=o(e)),e&&""!==e&&(e.length>1&&"\n"==e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var r,l,c,d,u,p,h,f,m,g,v,b,y,w;for(void 0!==(n=n||{}).wrap_line_length&&0!==parseInt(n.wrap_line_length,10)||void 0===n.max_char||0===parseInt(n.max_char,10)||(n.wrap_line_length=n.max_char),l=void 0!==n.indent_inner_html&&n.indent_inner_html,c=void 0===n.indent_size?4:parseInt(n.indent_size,10),d=void 0===n.indent_char?" ":n.indent_char,p=void 0===n.brace_style?"collapse":n.brace_style,u=0===parseInt(n.wrap_line_length,10)?32786:parseInt(n.wrap_line_length||250,10),h=n.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],f=void 0===n.preserve_newlines||n.preserve_newlines,m=f?isNaN(parseInt(n.max_preserve_newlines,10))?32786:parseInt(n.max_preserve_newlines,10):0,g=void 0!==n.indent_handlebars&&n.indent_handlebars,v=void 0===n.wrap_attributes?"auto":n.wrap_attributes,b=void 0===n.wrap_attributes_indent_size?c:parseInt(n.wrap_attributes_indent_size,10)||c,y=void 0!==n.end_with_newline&&n.end_with_newline,w=Array.isArray(n.extra_liners)?n.extra_liners.concat():"string"==typeof n.extra_liners?n.extra_liners.split(","):"head,body,/html".split(","),n.indent_with_tabs&&(d="\t",c=1),(r=new a).printer(e,d,c,u,p);;){var _=r.get_token();if(r.token_text=_[0],r.token_type=_[1],"TK_EOF"==r.token_type)break;switch(r.token_type){case"TK_TAG_START":r.print_newline(!1,r.output),r.print_token(r.token_text),r.indent_content&&(r.indent(),r.indent_content=!1),r.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":r.print_newline(!1,r.output),r.print_token(r.token_text),r.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==r.last_token&&""===r.last_text){var T=r.token_text.match(/\w+/)[0],E=null;r.output.length&&(E=r.output[r.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==E||E[1]!=T&&!r.Utils.in_array(E[1],h))&&r.print_newline(!1,r.output)}r.print_token(r.token_text),r.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var S=r.token_text.match(/^\s*<([a-z-]+)/i);S&&r.Utils.in_array(S[1],h)||r.print_newline(!1,r.output),r.print_token(r.token_text),r.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":r.print_token(r.token_text),r.indent_content&&(r.indent(),r.indent_content=!1),r.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":case"TK_CONTENT":r.print_token(r.token_text),r.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==r.token_text){r.print_newline(!1,r.output);var A,C=r.token_text,k=1;"TK_SCRIPT"==r.token_type?A="function"==typeof s&&s:"TK_STYLE"==r.token_type&&(A="function"==typeof t&&t),"keep"==n.indent_scripts?k=0:"separate"==n.indent_scripts&&(k=-r.indent_level);var x=r.get_full_indent(k);if(A)C=A(C.replace(/^\s*/,x),n);else{var $=C.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(r.indent_string).length-1,I=r.get_full_indent(k-$);C=C.replace(/^\s*/,x).replace(/\r\n|\r|\n/g,"\n"+I).replace(/\s+$/,"")}C&&(r.print_token_raw(C),r.print_newline(!0,r.output))}r.current_mode="TAG";break;default:""!==r.token_text&&r.print_token(r.token_text)}r.last_token=r.token_type,r.last_text=r.token_text}var O=r.output.join("").replace(/[\r\n\t ]+$/,"");return y&&(O+="\n"),O}function t(e,t){function n(){return(_=e.charAt(++E))||""}function i(t){var i="",o=E;return t&&a(),i=e.charAt(E+1)||"",E=o-1,n(),i}function o(t){for(var i=E;n();)if("\\"===_)n();else{if(-1!==t.indexOf(_))break;if("\n"===_)break}return e.substring(i,E+1)}function s(e){var t=E,i=o(e);return E=t-1,n(),i}function a(){for(var e="";T.test(i());)n(),e+=_;return e}function r(){var e="";for(_&&T.test(_)&&(e=_);T.test(n());)e+=_;return e}function l(t){var o=E;for(t="/"===i(),n();n();){if(!t&&"*"===_&&"/"===i()){n();break}if(t&&"\n"===_)return e.substring(o,E)}return e.substring(o,E)+_}function c(t){return e.substring(E-t.length,E).toLowerCase()===t}function d(){for(var t=0,n=E+1;n<e.length;n++){var i=e.charAt(n);if("{"===i)return!0;if("("===i)t+=1;else if(")"===i){if(0==t)return!1;t-=1}else if(";"===i||"}"===i)return!1}return!1}function u(){k++,A+=C}function p(){k--,A=A.slice(0,-m)}var h={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},f={"@media":!0,"@supports":!0,"@document":!0};t=t||{},e=(e=e||"").replace(/\r\n|[\r\u2028\u2029]/g,"\n");var m=t.indent_size||4,g=t.indent_char||" ",v=void 0===t.selector_separator_newline||t.selector_separator_newline,b=void 0!==t.end_with_newline&&t.end_with_newline,y=void 0===t.newline_between_rules||t.newline_between_rules,w=t.eol?t.eol:"\n";"string"==typeof m&&(m=parseInt(m,10)),t.indent_with_tabs&&(g="\t",m=1),w=w.replace(/\\r/,"\r").replace(/\\n/,"\n");for(var _,T=/^\s+$/,E=-1,S=0,A=e.match(/^[\t ]*/)[0],C=new Array(m+1).join(g),k=0,x=0,$={"{":function(e){$.singleSpace(),I.push(e),$.newLine()},"}":function(e){$.newLine(),I.push(e),$.newLine()},_lastCharWhitespace:function(){return T.test(I[I.length-1])},newLine:function(e){I.length&&(e||"\n"===I[I.length-1]||$.trim(),I.push("\n"),A&&I.push(A))},singleSpace:function(){I.length&&!$._lastCharWhitespace()&&I.push(" ")},preserveSingleSpace:function(){P&&$.singleSpace()},trim:function(){for(;$._lastCharWhitespace();)I.pop()}},I=[],O=!1,L=!1,R=!1,N="",D="";;){var M=r(),P=""!==M,F=-1!==M.indexOf("\n");if(D=N,N=_,!_)break;if("/"===_&&"*"===i()){var B=0===k;(F||B)&&$.newLine(),I.push(l()),$.newLine(),B&&$.newLine(!0)}else if("/"===_&&"/"===i())F||"{"===D||$.trim(),$.singleSpace(),I.push(l()),$.newLine();else if("@"===_){$.preserveSingleSpace(),I.push(_);var H=s(": ,;{}()[]/='\"");H.match(/[ :]$/)&&(n(),H=o(": ").replace(/\s$/,""),I.push(H),$.singleSpace()),(H=H.replace(/\s$/,""))in h&&(x+=1,H in f&&(R=!0))}else"#"===_&&"{"===i()?($.preserveSingleSpace(),I.push(o("}"))):"{"===_?"}"===i(!0)?(a(),n(),$.singleSpace(),I.push("{}"),$.newLine(),y&&0===k&&$.newLine(!0)):(u(),$["{"](_),R?(R=!1,O=k>x):O=k>=x):"}"===_?(p(),$["}"](_),O=!1,L=!1,x&&x--,y&&0===k&&$.newLine(!0)):":"===_?(a(),!O&&!R||c("&")||d()?":"===i()?(n(),I.push("::")):I.push(":"):(L=!0,I.push(":"),$.singleSpace())):'"'===_||"'"===_?($.preserveSingleSpace(),I.push(o(_))):";"===_?(L=!1,I.push(_),$.newLine()):"("===_?c("url")?(I.push(_),a(),n()&&(")"!==_&&'"'!==_&&"'"!==_?I.push(o(")")):E--)):(S++,$.preserveSingleSpace(),I.push(_),a()):")"===_?(I.push(_),S--):","===_?(I.push(_),a(),v&&!L&&S<1?$.newLine():$.singleSpace()):"]"===_?I.push(_):"["===_?($.preserveSingleSpace(),I.push(_)):"="===_?(a(),_="=",I.push(_)):($.preserveSingleSpace(),I.push(_))}var j="";return A&&(j+=A),j+=I.join("").replace(/[\r\n\t ]+$/,""),b&&(j+="\n"),"\n"!=w&&(j=j.replace(/[\n]/g,w)),j}function n(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function i(e){return e.replace(/^\s+|\s+$/g,"")}function o(e){return e.replace(/^\s+/g,"")}function s(e,t){return new a(e,t).beautify()}function a(e,t){function s(e,t){var n=0;return e&&(n=e.indentation_level,!W.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:W.get_line_number(),ternary_depth:0}}function a(e){var t=e.newlines;if(te.keep_array_indentation&&y(X.mode))for(n=0;n<t;n+=1)h(n>0);else if(te.max_preserve_newlines&&t>te.max_preserve_newlines&&(t=te.max_preserve_newlines),te.preserve_newlines&&e.newlines>1){h();for(var n=1;n<t;n+=1)h(!0)}ee[(V=e).type]()}function r(e){for(var t=[],n=(e=e.replace(/\x0d/g,"")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}function p(e){e=void 0!==e&&e,W.just_added_newline()||(te.preserve_newlines&&V.wanted_newline||e||te.wrap_line_length&&W.current_line.get_character_count()+V.text.length+(W.space_before_token?1:0)>=te.wrap_line_length)&&h(!1,!0)}function h(e,t){if(!t&&";"!==X.last_text&&","!==X.last_text&&"="!==X.last_text&&"TK_OPERATOR"!==z)for(;X.mode===u.Statement&&!X.if_block&&!X.do_block;)_();W.add_new_line(e)&&(X.multiline_frame=!0)}function f(){W.just_added_newline()&&(te.keep_array_indentation&&y(X.mode)&&V.wanted_newline?(W.current_line.push(V.whitespace_before),W.space_before_token=!1):W.set_indent(X.indentation_level)&&(X.line_indent_level=X.indentation_level))}function m(e){W.raw?W.add_raw_token(V):(te.comma_first&&"TK_COMMA"===z&&W.just_added_newline()&&","===W.previous_line.last()&&(W.previous_line.pop(),f(),W.add_token(","),W.space_before_token=!0),e=e||V.text,f(),W.add_token(e))}function g(){X.indentation_level+=1}function v(){X.indentation_level>0&&(!X.parent||X.indentation_level>X.parent.indentation_level)&&(X.indentation_level-=1)}function b(e){X?(Z.push(X),Q=X):Q=s(null,e),X=s(Q,e)}function y(e){return e===u.ArrayLiteral}function w(e){return n(e,[u.Expression,u.ForInitializer,u.Conditional])}function _(){Z.length>0&&(Q=X,X=Z.pop(),Q.mode===u.Statement&&W.remove_redundant_indentation(Q))}function T(){return X.parent.mode===u.ObjectLiteral&&X.mode===u.Statement&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===z&&n(X.last_text,["get","set"]))}function E(){return!!("TK_RESERVED"===z&&n(X.last_text,["var","let","const"])&&"TK_WORD"===V.type||"TK_RESERVED"===z&&"do"===X.last_text||"TK_RESERVED"===z&&"return"===X.last_text&&!V.wanted_newline||"TK_RESERVED"===z&&"else"===X.last_text&&("TK_RESERVED"!==V.type||"if"!==V.text)||"TK_END_EXPR"===z&&(Q.mode===u.ForInitializer||Q.mode===u.Conditional)||"TK_WORD"===z&&X.mode===u.BlockStatement&&!X.in_case&&"--"!==V.text&&"++"!==V.text&&"function"!==q&&"TK_WORD"!==V.type&&"TK_RESERVED"!==V.type||X.mode===u.ObjectLiteral&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===z&&n(X.last_text,["get","set"])))&&(b(u.Statement),g(),"TK_RESERVED"===z&&n(X.last_text,["var","let","const"])&&"TK_WORD"===V.type&&(X.declaration_statement=!0),T()||p("TK_RESERVED"===V.type&&n(V.text,["do","for","if","while"])),!0)}function S(e,t){for(var n=0;n<e.length;n++)if(i(e[n]).charAt(0)!==t)return!1;return!0}function A(e,t){for(var n,i=0,o=e.length;i<o;i++)if((n=e[i])&&0!==n.indexOf(t))return!1;return!0}function C(e){return n(e,["case","return","do","if","throw","else"])}function k(e){var t=K+(e||0);return t<0||t>=ne.length?null:ne[t]}function x(){E();var e=u.Expression;if("["===V.text){if("TK_WORD"===z||")"===X.last_text)return"TK_RESERVED"===z&&n(X.last_text,G.line_starters)&&(W.space_before_token=!0),b(e),m(),g(),void(te.space_in_paren&&(W.space_before_token=!0));e=u.ArrayLiteral,y(X.mode)&&("["!==X.last_text&&(","!==X.last_text||"]"!==q&&"}"!==q)||te.keep_array_indentation||h())}else"TK_RESERVED"===z&&"for"===X.last_text?e=u.ForInitializer:"TK_RESERVED"===z&&n(X.last_text,["if","while"])&&(e=u.Conditional);";"===X.last_text||"TK_START_BLOCK"===z?h():"TK_END_EXPR"===z||"TK_START_EXPR"===z||"TK_END_BLOCK"===z||"."===X.last_text?p(V.wanted_newline):"TK_RESERVED"===z&&"("===V.text||"TK_WORD"===z||"TK_OPERATOR"===z?"TK_RESERVED"===z&&("function"===X.last_word||"typeof"===X.last_word)||"*"===X.last_text&&"function"===q?te.space_after_anon_function&&(W.space_before_token=!0):"TK_RESERVED"!==z||!n(X.last_text,G.line_starters)&&"catch"!==X.last_text||te.space_before_conditional&&(W.space_before_token=!0):W.space_before_token=!0,"("===V.text&&"TK_RESERVED"===z&&"await"===X.last_word&&(W.space_before_token=!0),"("===V.text&&("TK_EQUALS"!==z&&"TK_OPERATOR"!==z||T()||p()),b(e),m(),te.space_in_paren&&(W.space_before_token=!0),g()}function $(){for(;X.mode===u.Statement;)_();X.multiline_frame&&p("]"===V.text&&y(X.mode)&&!te.keep_array_indentation),te.space_in_paren&&("TK_START_EXPR"!==z||te.space_in_empty_paren?W.space_before_token=!0:(W.trim(),W.space_before_token=!1)),"]"===V.text&&te.keep_array_indentation?(m(),_()):(_(),m()),W.remove_redundant_indentation(Q),X.do_while&&Q.mode===u.Conditional&&(Q.mode=u.Expression,X.do_block=!1,X.do_while=!1)}function I(){var e=k(1),t=k(2);b(t&&(":"===t.text&&n(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||n(e.text,["get","set"])&&n(t.type,["TK_WORD","TK_RESERVED"]))?n(q,["class","interface"])?u.BlockStatement:u.ObjectLiteral:u.BlockStatement);var i=!e.comments_before.length&&"}"===e.text&&"function"===X.last_word&&"TK_END_EXPR"===z;"expand"===te.brace_style||"none"===te.brace_style&&V.wanted_newline?"TK_OPERATOR"!==z&&(i||"TK_EQUALS"===z||"TK_RESERVED"===z&&C(X.last_text)&&"else"!==X.last_text)?W.space_before_token=!0:h(!1,!0):"TK_OPERATOR"!==z&&"TK_START_EXPR"!==z?"TK_START_BLOCK"===z?h():W.space_before_token=!0:y(Q.mode)&&","===X.last_text&&("}"===q?W.space_before_token=!0:h()),m(),g()}function O(){for(;X.mode===u.Statement;)_();var e="TK_START_BLOCK"===z;"expand"===te.brace_style?e||h():e||(y(X.mode)&&te.keep_array_indentation?(te.keep_array_indentation=!1,h(),te.keep_array_indentation=!0):h()),_(),m()}function L(){if("TK_RESERVED"===V.type&&X.mode!==u.ObjectLiteral&&n(V.text,["set","get"])&&(V.type="TK_WORD"),"TK_RESERVED"===V.type&&X.mode===u.ObjectLiteral&&":"==k(1).text&&(V.type="TK_WORD"),E()||!V.wanted_newline||w(X.mode)||"TK_OPERATOR"===z&&"--"!==X.last_text&&"++"!==X.last_text||"TK_EQUALS"===z||!te.preserve_newlines&&"TK_RESERVED"===z&&n(X.last_text,["var","let","const","set","get"])||h(),X.do_block&&!X.do_while){if("TK_RESERVED"===V.type&&"while"===V.text)return W.space_before_token=!0,m(),W.space_before_token=!0,void(X.do_while=!0);h(),X.do_block=!1}if(X.if_block)if(X.else_block||"TK_RESERVED"!==V.type||"else"!==V.text){for(;X.mode===u.Statement;)_();X.if_block=!1,X.else_block=!1}else X.else_block=!0;return"TK_RESERVED"===V.type&&("case"===V.text||"default"===V.text&&X.in_case_statement)?(h(),(X.case_body||te.jslint_happy)&&(v(),X.case_body=!1),m(),X.in_case=!0,void(X.in_case_statement=!0)):("TK_RESERVED"===V.type&&"function"===V.text&&((n(X.last_text,["}",";"])||W.just_added_newline()&&!n(X.last_text,["[","{",":","=",","]))&&(W.just_added_blankline()||V.comments_before.length||(h(),h(!0))),"TK_RESERVED"===z||"TK_WORD"===z?"TK_RESERVED"===z&&n(X.last_text,["get","set","new","return","export","async"])||"TK_RESERVED"===z&&"default"===X.last_text&&"export"===q?W.space_before_token=!0:h():"TK_OPERATOR"===z||"="===X.last_text?W.space_before_token=!0:(X.multiline_frame||!w(X.mode)&&!y(X.mode))&&h()),"TK_COMMA"!==z&&"TK_START_EXPR"!==z&&"TK_EQUALS"!==z&&"TK_OPERATOR"!==z||T()||p(),"TK_RESERVED"===V.type&&n(V.text,["function","get","set"])?(m(),void(X.last_word=V.text)):(J="NONE","TK_END_BLOCK"===z?"TK_RESERVED"===V.type&&n(V.text,["else","catch","finally"])?"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&V.wanted_newline?J="NEWLINE":(J="SPACE",W.space_before_token=!0):J="NEWLINE":"TK_SEMICOLON"===z&&X.mode===u.BlockStatement?J="NEWLINE":"TK_SEMICOLON"===z&&w(X.mode)?J="SPACE":"TK_STRING"===z?J="NEWLINE":"TK_RESERVED"===z||"TK_WORD"===z||"*"===X.last_text&&"function"===q?J="SPACE":"TK_START_BLOCK"===z?J="NEWLINE":"TK_END_EXPR"===z&&(W.space_before_token=!0,J="NEWLINE"),"TK_RESERVED"===V.type&&n(V.text,G.line_starters)&&")"!==X.last_text&&(J="else"===X.last_text||"export"===X.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===V.type&&n(V.text,["else","catch","finally"])?"TK_END_BLOCK"!==z||"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&V.wanted_newline?h():(W.trim(!0),"}"!==W.current_line.last()&&h(),W.space_before_token=!0):"NEWLINE"===J?"TK_RESERVED"===z&&C(X.last_text)?W.space_before_token=!0:"TK_END_EXPR"!==z?"TK_START_EXPR"===z&&"TK_RESERVED"===V.type&&n(V.text,["var","let","const"])||":"===X.last_text||("TK_RESERVED"===V.type&&"if"===V.text&&"else"===X.last_text?W.space_before_token=!0:h()):"TK_RESERVED"===V.type&&n(V.text,G.line_starters)&&")"!==X.last_text&&h():X.multiline_frame&&y(X.mode)&&","===X.last_text&&"}"===q?h():"SPACE"===J&&(W.space_before_token=!0),m(),X.last_word=V.text,"TK_RESERVED"===V.type&&"do"===V.text&&(X.do_block=!0),void("TK_RESERVED"===V.type&&"if"===V.text&&(X.if_block=!0))))}function R(){for(E()&&(W.space_before_token=!1);X.mode===u.Statement&&!X.if_block&&!X.do_block;)_();m()}function N(){E()||"TK_RESERVED"===z||"TK_WORD"===z?W.space_before_token=!0:"TK_COMMA"===z||"TK_START_EXPR"===z||"TK_EQUALS"===z||"TK_OPERATOR"===z?T()||p():h(),m()}function D(){E(),X.declaration_statement&&(X.declaration_assignment=!0),W.space_before_token=!0,m(),W.space_before_token=!0}function M(){if(X.declaration_statement)return w(X.parent.mode)&&(X.declaration_assignment=!1),m(),void(X.declaration_assignment?(X.declaration_assignment=!1,h(!1,!0)):(W.space_before_token=!0,te.comma_first&&p()));m(),X.mode===u.ObjectLiteral||X.mode===u.Statement&&X.parent.mode===u.ObjectLiteral?(X.mode===u.Statement&&_(),h()):(W.space_before_token=!0,te.comma_first&&p())}function P(){if(E(),"TK_RESERVED"===z&&C(X.last_text))return W.space_before_token=!0,void m();if("*"!==V.text||"TK_DOT"!==z){if(":"===V.text&&X.in_case)return X.case_body=!0,g(),m(),h(),void(X.in_case=!1);if("::"!==V.text){"TK_OPERATOR"===z&&p();var e=!0,t=!0;n(V.text,["--","++","!","~"])||n(V.text,["-","+"])&&(n(z,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||n(X.last_text,G.line_starters)||","===X.last_text)?(e=!1,t=!1,!V.wanted_newline||"--"!==V.text&&"++"!==V.text||h(!1,!0),";"===X.last_text&&w(X.mode)&&(e=!0),"TK_RESERVED"===z?e=!0:"TK_END_EXPR"===z?e=!("]"===X.last_text&&("--"===V.text||"++"===V.text)):"TK_OPERATOR"===z&&(e=n(V.text,["--","-","++","+"])&&n(X.last_text,["--","-","++","+"]),n(V.text,["+","-"])&&n(X.last_text,["--","++"])&&(t=!0)),X.mode!==u.BlockStatement&&X.mode!==u.Statement||"{"!==X.last_text&&";"!==X.last_text||h()):":"===V.text?0===X.ternary_depth?e=!1:X.ternary_depth-=1:"?"===V.text?X.ternary_depth+=1:"*"===V.text&&"TK_RESERVED"===z&&"function"===X.last_text&&(e=!1,t=!1),W.space_before_token=W.space_before_token||e,m(),W.space_before_token=t}else m()}else m()}function F(){if(W.raw)return W.add_raw_token(V),void(V.directives&&"end"===V.directives.preserve&&(te.test_output_raw||(W.raw=!1)));if(V.directives)return h(!1,!0),m(),"start"===V.directives.preserve&&(W.raw=!0),void h(!1,!0);if(!d.newline.test(V.text)&&!V.wanted_newline)return W.space_before_token=!0,m(),void(W.space_before_token=!0);var e,t=r(V.text),n=!1,i=!1,s=V.whitespace_before,a=s.length;for(h(!1,!0),t.length>1&&(S(t.slice(1),"*")?n=!0:A(t.slice(1),s)&&(i=!0)),m(t[0]),e=1;e<t.length;e++)h(!1,!0),n?m(" "+o(t[e])):i&&t[e].length>a?m(t[e].substring(a)):W.add_token(t[e]);h(!1,!0)}function B(){V.wanted_newline?h(!1,!0):W.trim(!0),W.space_before_token=!0,m(),h(!1,!0)}function H(){E(),"TK_RESERVED"===z&&C(X.last_text)?W.space_before_token=!0:p(")"===X.last_text&&te.break_chained_methods),m()}function j(){m(),"\n"===V.text[V.text.length-1]&&h()}function U(){for(;X.mode===u.Statement;)_()}var W,K,G,V,z,q,Y,X,Q,Z,J,ee,te,ne=[],ie="";for(ee={TK_START_EXPR:x,TK_END_EXPR:$,TK_START_BLOCK:I,TK_END_BLOCK:O,TK_WORD:L,TK_RESERVED:L,TK_SEMICOLON:R,TK_STRING:N,TK_EQUALS:D,TK_OPERATOR:P,TK_COMMA:M,TK_BLOCK_COMMENT:F,TK_COMMENT:B,TK_DOT:H,TK_UNKNOWN:j,TK_EOF:U},te={},void 0!==(t=t||{}).braces_on_own_line&&(te.brace_style=t.braces_on_own_line?"expand":"collapse"),te.brace_style=t.brace_style?t.brace_style:te.brace_style?te.brace_style:"collapse","expand-strict"===te.brace_style&&(te.brace_style="expand"),te.indent_size=t.indent_size?parseInt(t.indent_size,10):4,te.indent_char=t.indent_char?t.indent_char:" ",te.eol=t.eol?t.eol:"\n",te.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,te.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,te.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),te.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,te.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,te.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,te.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,te.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,te.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,te.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,te.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),te.e4x=void 0!==t.e4x&&t.e4x,te.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,te.comma_first=void 0!==t.comma_first&&t.comma_first,te.test_output_raw=void 0!==t.test_output_raw&&t.test_output_raw,te.jslint_happy&&(te.space_after_anon_function=!0),t.indent_with_tabs&&(te.indent_char="\t",te.indent_size=1),te.eol=te.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),Y="";te.indent_size>0;)Y+=te.indent_char,te.indent_size-=1;var oe=0;if(e&&e.length){for(;" "===e.charAt(oe)||"\t"===e.charAt(oe);)ie+=e.charAt(oe),oe+=1;e=e.substring(oe)}z="TK_START_BLOCK",q="",(W=new l(Y,ie)).raw=te.test_output_raw,Z=[],b(u.BlockStatement),this.beautify=function(){var t,n;for(G=new c(e,te,Y),ne=G.tokenize(),K=0;t=k();){for(var i=0;i<t.comments_before.length;i++)a(t.comments_before[i]);a(t),q=X.last_text,z=t.type,X.last_text=t.text,K+=1}return n=W.get_code(),te.end_with_newline&&(n+="\n"),"\n"!=te.eol&&(n=n.replace(/[\n]/g,te.eol)),n}}function r(e){var t=0,n=-1,i=[],o=!0;this.set_indent=function(i){t=e.baseIndentLength+i*e.indent_length,n=i},this.get_character_count=function(){return t},this.is_empty=function(){return o},this.last=function(){return this._empty?null:i[i.length-1]},this.push=function(e){i.push(e),t+=e.length,o=!1},this.pop=function(){var e=null;return o||(e=i.pop(),t-=e.length,o=0===i.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)i.pop(),t-=1;o=0===i.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=i.join("")),t}}function l(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new r(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){return n.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==u.ForInitializer&&e.mode!==u.Conditional)for(var t=e.start_line_index,i=n.length;t<i;)n[t].remove_indent(),t++},this.trim=function(i){for(i=void 0!==i&&i,this.current_line.trim(e,t);i&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){return!!this.just_added_newline()&&(1===n.length||n[n.length-2].is_empty())}}function c(e,t,o){function s(e){if(!e.match(S))return null;var t={};A.lastIndex=0;for(var n=A.exec(e);n;)t[n[1]]=n[2],n=A.exec(e);return t}function a(){var o,a,S=[];if(m=0,g="",y>=w)return["","TK_EOF"];a=b.length?b[b.length-1]:new p("TK_START_BLOCK","{");var A=e.charAt(y);for(y+=1;n(A,l);){if(d.newline.test(A)?"\n"===A&&"\r"===e.charAt(y-2)||(m+=1,S=[]):S.push(A),y>=w)return["","TK_EOF"];A=e.charAt(y),y+=1}if(S.length&&(g=S.join("")),c.test(A)){var x=!0,$=!0,I=c;for("0"===A&&y<w&&/[Xxo]/.test(e.charAt(y))?(x=!1,$=!1,A+=e.charAt(y),y+=1,I=/[o]/.test(e.charAt(y))?u:h):(A="",y-=1);y<w&&I.test(e.charAt(y));)A+=e.charAt(y),y+=1,x&&y<w&&"."===e.charAt(y)&&(A+=e.charAt(y),y+=1,x=!1),$&&y<w&&/[Ee]/.test(e.charAt(y))&&(A+=e.charAt(y),(y+=1)<w&&/[+-]/.test(e.charAt(y))&&(A+=e.charAt(y),y+=1),$=!1,x=!1);return[A,"TK_WORD"]}if(d.isIdentifierStart(e.charCodeAt(y-1))){if(y<w)for(;d.isIdentifierChar(e.charCodeAt(y))&&(A+=e.charAt(y),(y+=1)!==w););return"TK_DOT"===a.type||"TK_RESERVED"===a.type&&n(a.text,["set","get"])||!n(A,_)?[A,"TK_WORD"]:"in"===A?[A,"TK_OPERATOR"]:[A,"TK_RESERVED"]}if("("===A||"["===A)return[A,"TK_START_EXPR"];if(")"===A||"]"===A)return[A,"TK_END_EXPR"];if("{"===A)return[A,"TK_START_BLOCK"];if("}"===A)return[A,"TK_END_BLOCK"];if(";"===A)return[A,"TK_SEMICOLON"];if("/"===A){var O="";if("*"===e.charAt(y)){var L;y+=1,T.lastIndex=y,O="/*"+(L=T.exec(e))[0],y+=L[0].length;var R=s(O);return R&&"start"===R.ignore&&(C.lastIndex=y,O+=(L=C.exec(e))[0],y+=L[0].length),[O=O.replace(d.lineBreak,"\n"),"TK_BLOCK_COMMENT",R]}if("/"===e.charAt(y))return y+=1,E.lastIndex=y,O="//"+(L=E.exec(e))[0],y+=L[0].length,[O,"TK_COMMENT"]}if("`"===A||"'"===A||'"'===A||("/"===A||t.e4x&&"<"===A&&e.slice(y-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===a.type&&n(a.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===a.type&&")"===a.text&&a.parent&&"TK_RESERVED"===a.parent.type&&n(a.parent.text,["if","while","for"])||n(a.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var N=A,D=!1,M=!1;if(o=A,"/"===N)for(var P=!1;y<w&&(D||P||e.charAt(y)!==N)&&!d.newline.test(e.charAt(y));)o+=e.charAt(y),D?D=!1:(D="\\"===e.charAt(y),"["===e.charAt(y)?P=!0:"]"===e.charAt(y)&&(P=!1)),y+=1;else if(t.e4x&&"<"===N){var F=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,B=e.slice(y-1),H=F.exec(B);if(H&&0===H.index){for(var j=H[2],U=0;H;){var W=!!H[1],K=H[2],G=!!H[H.length-1]||"![CDATA["===K.slice(0,8);if(K!==j||G||(W?--U:++U),U<=0)break;H=F.exec(B)}var V=H?H.index+H[0].length:B.length;return B=B.slice(0,V),y+=V-1,[B=B.replace(d.lineBreak,"\n"),"TK_STRING"]}}else for(;y<w&&(D||e.charAt(y)!==N&&("`"===N||!d.newline.test(e.charAt(y))));)(D||"`"===N)&&d.newline.test(e.charAt(y))?("\r"===e.charAt(y)&&"\n"===e.charAt(y+1)&&(y+=1),o+="\n"):o+=e.charAt(y),D?("x"!==e.charAt(y)&&"u"!==e.charAt(y)||(M=!0),D=!1):D="\\"===e.charAt(y),y+=1;if(M&&t.unescape_strings&&(o=r(o)),y<w&&e.charAt(y)===N&&(o+=N,y+=1,"/"===N))for(;y<w&&d.isIdentifierStart(e.charCodeAt(y));)o+=e.charAt(y),y+=1;return[o,"TK_STRING"]}if("#"===A){if(0===b.length&&"!"===e.charAt(y)){for(o=A;y<w&&"\n"!==A;)o+=A=e.charAt(y),y+=1;return[i(o)+"\n","TK_UNKNOWN"]}var z="#";if(y<w&&c.test(e.charAt(y))){do{z+=A=e.charAt(y),y+=1}while(y<w&&"#"!==A&&"="!==A);return"#"===A||("["===e.charAt(y)&&"]"===e.charAt(y+1)?(z+="[]",y+=2):"{"===e.charAt(y)&&"}"===e.charAt(y+1)&&(z+="{}",y+=2)),[z,"TK_WORD"]}}if("<"===A&&("?"===e.charAt(y)||"%"===e.charAt(y))){k.lastIndex=y-1;var q=k.exec(e);if(q)return A=q[0],y+=A.length-1,[A=A.replace(d.lineBreak,"\n"),"TK_STRING"]}if("<"===A&&"\x3c!--"===e.substring(y-1,y+3)){for(y+=3,A="\x3c!--";!d.newline.test(e.charAt(y))&&y<w;)A+=e.charAt(y),y++;return v=!0,[A,"TK_COMMENT"]}if("-"===A&&v&&"--\x3e"===e.substring(y-1,y+2))return v=!1,y+=2,["--\x3e","TK_COMMENT"];if("."===A)return[A,"TK_DOT"];if(n(A,f)){for(;y<w&&n(A+e.charAt(y),f)&&(A+=e.charAt(y),!((y+=1)>=w)););return","===A?[A,"TK_COMMA"]:"="===A?[A,"TK_EQUALS"]:[A,"TK_OPERATOR"]}return[A,"TK_UNKNOWN"]}function r(e){for(var t,n=!1,i="",o=0,s="",a=0;n||o<e.length;)if(t=e.charAt(o),o++,n){if(n=!1,"x"===t)s=e.substr(o,2),o+=2;else{if("u"!==t){i+="\\"+t;continue}s=e.substr(o,4),o+=4}if(!s.match(/^[0123456789abcdefABCDEF]+$/))return e;if((a=parseInt(s,16))>=0&&a<32){i+="x"===t?"\\x"+s:"\\u"+s;continue}if(34===a||39===a||92===a)i+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&a<=255)return e;i+=String.fromCharCode(a)}}else"\\"===t?n=!0:i+=t;return i}var l="\n\r\t ".split(""),c=/[0-9]/,u=/[01234567]/,h=/[0123456789abcdefABCDEF]/,f="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var m,g,v,b,y,w,_=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),T=/([\s\S]*?)((?:\*\/)|$)/g,E=/([^\n\r\u2028\u2029]*)/g,S=/\/\* beautify( \w+[:]\w+)+ \*\//g,A=/ (\w+)[:](\w+)/g,C=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,k=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){w=e.length,y=0,v=!1,b=[];for(var t,n,i,o=null,s=[],r=[];!n||"TK_EOF"!==n.type;){for(i=a(),t=new p(i[1],i[0],m,g);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=i[2]),r.push(t),i=a(),t=new p(i[1],i[0],m,g);r.length&&(t.comments_before=r,r=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=n,s.push(o),o=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&o&&("]"===t.text&&"["===o.text||")"===t.text&&"("===o.text||"}"===t.text&&"{"===o.text)&&(t.parent=o.parent,o=s.pop()),b.push(t),n=t}return b}}var d={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",i=new RegExp("["+t+"]"),o=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||e>=170&&i.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&o.test(String.fromCharCode(e))))}}(d);var u={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},p=function(e,t,n,i,o,s){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=i||"",this.parent=null,this.directives=null};return{run:e}},e.extend(e.FE.DEFAULTS,{codeMirror:window.CodeMirror,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),e.FE.PLUGINS.codeView=function(t){function n(){return t.$box.hasClass("fr-code-view")}function i(){return u?u.getValue():d.val()}function o(e){var n=i();t.html.set(n),t.$el.blur(),t.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled",!1),e.removeClass("fr-active").attr("aria-pressed",!1),t.events.focus(!0),t.placeholder.refresh(),t.undo.saveStep()}function s(n){d||(l(),!u&&t.opts.codeMirror?u=t.opts.codeMirror.fromTextArea(d.get(0),t.opts.codeMirrorOptions):t.events.$on(d,"keydown keyup change input",(function(){t.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height=this.scrollHeight+"px")}))),t.undo.saveStep(),t.html.cleanEmptyTags(),t.html.cleanWhiteTags(!0),t.core.hasFocus()&&(t.core.isEmpty()||(t.selection.save(),t.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),t.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var i,o,s=t.html.get(!1,!0);if(t.$el.find("span.fr-tmp").remove(),t.$box.toggleClass("fr-code-view",!0),t.core.hasFocus()&&t.$el.blur(),s=(s=s.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),t.codeBeautifier&&(s=t.codeBeautifier.run(s,t.opts.codeBeautifierOptions)),u){(i=s.indexOf("FROALA-SM"))>(o=s.indexOf("FROALA-EM"))?i=o:o-=9;var a=(s=s.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).substring(0,i).length-s.substring(0,i).replace(/\n/g,"").length,r=s.substring(0,o).length-s.substring(0,o).replace(/\n/g,"").length;i=s.substring(0,i).length-s.substring(0,s.substring(0,i).lastIndexOf("\n")+1).length,o=s.substring(0,o).length-s.substring(0,s.substring(0,o).lastIndexOf("\n")+1).length,u.setSize(null,t.opts.height?t.opts.height:"auto"),t.opts.heightMin&&t.$box.find(".CodeMirror-scroll").css("min-height",t.opts.heightMin),u.setValue(s),u.focus(),u.setSelection({line:a,ch:i},{line:r,ch:o}),u.refresh(),u.clearHistory()}else{i=s.indexOf("FROALA-SM"),o=s.indexOf("FROALA-EM")-9,t.opts.heightMin&&d.css("min-height",t.opts.heightMin),t.opts.height&&d.css("height",t.opts.height),t.opts.heightMax&&d.css("max-height",t.opts.height||t.opts.heightMax),d.val(s.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var c=e(t.o_doc).scrollTop();d.focus(),d.get(0).setSelectionRange(i,o),e(t.o_doc).scrollTop(c)}t.$tb.find(" > .fr-command").not(n).filter((function(){return t.opts.codeViewKeepActiveButtons.indexOf(e(this).data("cmd"))<0})).addClass("fr-disabled").attr("aria-disabled",!0),n.addClass("fr-active").attr("aria-pressed",!0),!t.helpers.isMobile()&&t.opts.toolbarInline&&t.toolbar.hide()}function a(e){void 0===e&&(e=!n());var i=t.$tb.find('.fr-command[data-cmd="html"]');e?(t.popups.hideAll(),s(i)):(t.$box.toggleClass("fr-code-view",!1),o(i))}function r(){n()&&a(!1),u&&u.toTextArea(),d.val("").removeData().remove(),d=null,p&&(p.remove(),p=null)}function l(){d=e('<textarea class="fr-code" tabIndex="-1">'),t.$wp.append(d),d.attr("dir",t.opts.direction),t.$box.hasClass("fr-basic")||(p=e('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(t.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),t.$box.append(p),t.events.bindClick(t.$box,"a.html-switch",(function(){a(!1)})));var o=function(){return!n()};t.events.on("buttons.refresh",o),t.events.on("copy",o,!0),t.events.on("cut",o,!0),t.events.on("paste",o,!0),t.events.on("destroy",r,!0),t.events.on("html.set",(function(){n()&&a(!0)})),t.events.on("form.submit",(function(){n()&&(t.html.set(i()),t.events.trigger("contentChanged",[],!0))}),!0)}function c(){if(!t.$wp)return!1}var d,u,p;return{_init:c,toggle:a,isActive:n,get:i}},e.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.FE.DefineIcon("html",{NAME:"code"}),e.extend(e.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),e.extend(e.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),e.FE.PLUGINS.colors=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="color"]'),n=t.popups.get("colors.picker");if(n||(n=o()),!n.hasClass("fr-active"))if(t.popups.setContainer("colors.picker",t.$tb),l(n.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("colors.picker",i,s,e.outerHeight())}else t.position.forSelection(n),t.popups.show("colors.picker")}function i(){t.popups.hide("colors.picker")}function o(){var e='<div class="fr-buttons fr-colors-buttons">';t.opts.toolbarInline&&t.opts.colorsButtons.length>0&&(e+=t.button.buildList(t.opts.colorsButtons)),e+=s()+"</div>";var n="";t.opts.colorsHEXInput&&(n='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer-'+t.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-color-hex-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="customColor" tabIndex="2" role="button">'+t.language.translate("OK")+"</button></div></div>");var i={buttons:e,text_colors:a("text"),background_colors:a("background"),custom_color:n},o=t.popups.create("colors.picker",i);return r(o),o}function s(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=t.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+t.language.translate("Text")+'">'+t.language.translate("Text")+"</span>",(e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==t.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+t.language.translate("Background")+'">'+t.language.translate("Background")+"</span>")+"</div>"}function a(e){for(var n="text"==e?t.opts.colorsText:t.opts.colorsBackground,i='<div class="fr-color-set fr-'+e+"-color"+(t.opts.colorsDefaultTab==e||"text"!=t.opts.colorsDefaultTab&&"background"!=t.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',o=0;o<n.length;o++)0!==o&&o%t.opts.colorsStep==0&&(i+="<br>"),"REMOVE"!=n[o]?i+='<span class="fr-command fr-select-color" style="background: '+n[o]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+n[o]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+n[o]+"&nbsp;&nbsp;&nbsp;</span></span>":i+='<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("remove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return i+"</div>"}function r(n){t.events.on("popup.tab",(function(i){var o=e(i.currentTarget);if(!t.popups.isVisible("colors.picker")||!o.is("span"))return!0;var s=i.which,a=!0;if(e.FE.KEYCODE.TAB==s){var r=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(r,!!i.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==s||e.FE.KEYCODE.ARROW_DOWN==s||e.FE.KEYCODE.ARROW_LEFT==s||e.FE.KEYCODE.ARROW_RIGHT==s){if(o.is("span.fr-select-color")){var l=o.parent().find("span.fr-select-color"),c=l.index(o),d=t.opts.colorsStep,u=Math.floor(l.length/d),p=c%d,h=Math.floor(c/d)*d+p,f=u*d;e.FE.KEYCODE.ARROW_UP==s?h=((h-d)%f+f)%f:e.FE.KEYCODE.ARROW_DOWN==s?h=(h+d)%f:e.FE.KEYCODE.ARROW_LEFT==s?h=((h-1)%f+f)%f:e.FE.KEYCODE.ARROW_RIGHT==s&&(h=(h+1)%f);var m=e(l.get(h));t.events.disableBlur(),m.focus(),a=!1}}else e.FE.KEYCODE.ENTER==s&&(t.button.exec(o),a=!1);return!1===a&&(i.preventDefault(),i.stopPropagation()),a}),!0)}function l(n){var i,o=t.popups.get("colors.picker"),s=e(t.selection.element());i="background"==n?"background-color":"color";var a=o.find(".fr-"+n+"-color .fr-select-color");for(a.find(".fr-selected-color").remove(),a.removeClass("fr-active-item"),a.not('[data-param1="REMOVE"]').attr("aria-selected",!1);s.get(0)!=t.el;){if("transparent"!=s.css(i)&&"rgba(0, 0, 0, 0)"!=s.css(i)){var r=o.find(".fr-"+n+'-color .fr-select-color[data-param1="'+t.helpers.RGBToHex(s.css(i))+'"]');r.append('<span class="fr-selected-color" aria-hidden="true"></span>'),r.addClass("fr-active-item").attr("aria-selected",!0);break}s=s.parent()}var l=o.find(".fr-color-hex-layer input");l.length&&l.val(t.helpers.RGBToHex(s.css(i))).trigger("change")}function c(e,n){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+n+"-color").addClass("fr-selected-set"),l(n)),t.accessibility.focusPopup(e.parents(".fr-popup"))}function d(e){"REMOVE"!=e?t.format.applyStyle("background-color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("background-color"),i()}function u(e){"REMOVE"!=e?t.format.applyStyle("color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("color"),i()}function p(){t.popups.hide("colors.picker"),t.toolbar.showInline()}function h(){var e=t.popups.get("colors.picker"),n=e.find(".fr-color-hex-layer input");if(n.length){var i=n.val();"background"==e.find(".fr-selected-tab").attr("data-param1")?d(i):u(i)}}return{showColorsPopup:n,hideColorsPopup:i,changeSet:c,background:d,customColor:h,text:u,back:p}},e.FE.DefineIcon("colors",{NAME:"tint"}),e.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),e.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var n=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(n,t)}}),e.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),e.FE.RegisterCommand("customColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor()}}),e.FE.DefineIcon("remove",{NAME:"eraser"}),e.extend(e.FE.DEFAULTS,{dragInline:!0}),e.FE.PLUGINS.draggable=function(t){function n(n){return!(!n.originalEvent||!n.originalEvent.target||n.originalEvent.target.nodeType!=Node.TEXT_NODE)||(n.target&&"A"==n.target.tagName&&1==n.target.childNodes.length&&"IMG"==n.target.childNodes[0].tagName&&(n.target=n.target.childNodes[0]),e(n.target).hasClass("fr-draggable")?(t.undo.canDo()||t.undo.saveStep(),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),e(n.target).addClass("fr-dragging"),t.browser.msie||t.browser.edge||t.selection.clear(),void n.originalEvent.dataTransfer.setData("text","Froala")):(n.preventDefault(),!1))}function i(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||t.node.isElement(e)))}function o(e,n,i){t.opts.iframe&&(e+=t.$iframe.offset().top,n+=t.$iframe.offset().left),h.offset().top!=e&&h.css("top",e),h.offset().left!=n&&h.css("left",n),h.width()!=i&&h.css("width",i)}function s(n){var s=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset);if(!i(s)){for(var a=0,r=s;!i(r)&&r==s&&n.originalEvent.pageY-t.win.pageYOffset-a>0;)a++,r=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset-a);(!i(r)||h&&0===t.$el.find(r).length&&r!=h.get(0))&&(r=null);for(var l=0,c=s;!i(c)&&c==s&&n.originalEvent.pageY-t.win.pageYOffset+l<e(t.doc).height();)l++,c=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset+l);(!i(c)||h&&0===t.$el.find(c).length&&c!=h.get(0))&&(c=null),s=null==c&&r?r:c&&null==r?c:c&&r?a<l?r:c:null}if(e(s).hasClass("fr-drag-helper"))return!1;if(s&&!t.node.isBlock(s)&&(s=t.node.blockParent(s)),s&&["TD","TH","TR","THEAD","TBODY"].indexOf(s.tagName)>=0&&(s=e(s).parents("table").get(0)),s&&["LI"].indexOf(s.tagName)>=0&&(s=e(s).parents("UL, OL").get(0)),s&&!e(s).hasClass("fr-drag-helper")){var d;h||(e.FE.$draggable_helper||(e.FE.$draggable_helper=e('<div class="fr-drag-helper"></div>')),h=e.FE.$draggable_helper,t.events.on("shared.destroy",(function(){h.html("").removeData().remove(),h=null}),!0)),d=n.originalEvent.pageY<e(s).offset().top+e(s).outerHeight()/2;var u=e(s),p=0;d||0!==u.next().length?(d||(u=u.next()),"before"==h.data("fr-position")&&u.is(h.data("fr-tag"))||(u.prev().length>0&&(p=parseFloat(u.prev().css("margin-bottom"))||0),p=Math.max(p,parseFloat(u.css("margin-top"))||0),o(u.offset().top-p/2-t.$box.offset().top,u.offset().left-t.win.pageXOffset-t.$box.offset().left,u.width()),h.data("fr-position","before"))):"after"==h.data("fr-position")&&u.is(h.data("fr-tag"))||(p=parseFloat(u.css("margin-bottom"))||0,o(u.offset().top+e(s).height()+p/2-t.$box.offset().top,u.offset().left-t.win.pageXOffset-t.$box.offset().left,u.width()),h.data("fr-position","after")),h.data("fr-tag",u),h.addClass("fr-visible"),h.appendTo(t.$box)}else h&&t.$box.find(h).length>0&&h.removeClass("fr-visible")}function a(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline?c()||!t.browser.msie&&!t.browser.edge||e.preventDefault():(e.preventDefault(),s(e))}function r(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function l(e){t.$el.attr("contenteditable",!0);var n=t.$el.find(".fr-dragging");h&&h.hasClass("fr-visible")&&t.$box.find(h).length?d(e):n.length&&(e.preventDefault(),e.stopPropagation()),h&&t.$box.find(h).length&&h.removeClass("fr-visible"),n.removeClass("fr-dragging")}function c(){for(var t=null,n=0;n<e.FE.INSTANCES.length;n++)if((t=e.FE.INSTANCES[n].$el.find(".fr-dragging")).length)return t.get(0)}function d(n){for(var i,o,s=0;s<e.FE.INSTANCES.length;s++)if((i=e.FE.INSTANCES[s].$el.find(".fr-dragging")).length){o=e.FE.INSTANCES[s];break}if(i.length){if(n.preventDefault(),n.stopPropagation(),h&&h.hasClass("fr-visible")&&t.$box.find(h).length)h.data("fr-tag")[h.data("fr-position")]('<span class="fr-marker"></span>'),h.removeClass("fr-visible");else if(!1===t.markers.insertAtPoint(n.originalEvent))return!1;if(!1===(i=t.events.chainTrigger("element.beforeDrop",i)))return!1;i.removeClass("fr-dragging");var a=i;if(i.parent().is("A")&&(a=i.parent()),t.core.isEmpty()?t.events.focus():(t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.selection.restore()),o==t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(a);else{var r=t.markers.insert();0===a.find(r).length?e(r).replaceWith(a):e(r).replaceWith(i),i.after(e.FE.MARKERS),t.selection.restore()}return t.popups.hideAll(),t.selection.save(),t.$el.find(t.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),t.html.wrap(),t.html.fillEmptyBlocks(),t.selection.restore(),t.undo.saveStep(),t.opts.iframe&&t.size.syncIframe(),o!=t&&(o.popups.hideAll(),o.$el.find(o.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),o.html.wrap(),o.html.fillEmptyBlocks(),o.undo.saveStep(),o.events.trigger("element.dropped"),o.opts.iframe&&o.size.syncIframe()),t.events.trigger("element.dropped",[a]),!1}h&&h.removeClass("fr-visible"),t.undo.canDo()||t.undo.saveStep(),setTimeout((function(){t.undo.saveStep()}),0)}function u(e){if(e&&"DIV"==e.tagName&&t.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("div.fr-drag-helper"),i=0;i<n.length;i++)n[i].parentNode.removeChild(n[i])}function p(){t.opts.enter==e.FE.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",n,!0),t.events.on("dragover",a,!0),t.events.on("dragenter",r,!0),t.events.on("document.dragend",l,!0),t.events.on("document.drop",l,!0),t.events.on("drop",d,!0),t.events.on("html.processGet",u)}var h;return{_init:p}},e.extend(e.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),e.extend(e.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),e.FE.PLUGINS.emoticons=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="emoticons"]'),n=t.popups.get("emoticons");if(n||(n=o()),!n.hasClass("fr-active")){t.popups.refresh("emoticons"),t.popups.setContainer("emoticons",t.$tb);var i=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("emoticons",i,s,e.outerHeight())}}function i(){t.popups.hide("emoticons")}function o(){var e="";t.opts.toolbarInline&&t.opts.emoticonsButtons.length>0&&(e='<div class="fr-buttons fr-emoticons-buttons">'+t.button.buildList(t.opts.emoticonsButtons)+"</div>");var n={buttons:e,emoticons:a()},i=t.popups.create("emoticons",n);return t.tooltip.bind(i,".fr-emoticon"),r(i),i}function s(){if(!t.selection.isCollapsed())return!1;var e=t.selection.element(),n=t.selection.endElement();if(e&&t.node.hasClass(e,"fr-emoticon"))return e;if(n&&t.node.hasClass(n,"fr-emoticon"))return n;var i=t.selection.ranges(0),o=i.startContainer;if(o.nodeType==Node.ELEMENT_NODE&&o.childNodes.length>0&&i.startOffset>0){var s=o.childNodes[i.startOffset-1];if(t.node.hasClass(s,"fr-emoticon"))return s}return!1}function a(){for(var e='<div style="text-align: center">',n=0;n<t.opts.emoticonsSet.length;n++)0!==n&&n%t.opts.emoticonsStep==0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+t.language.translate(t.opts.emoticonsSet[n].desc)+'" role="button" data-param1="'+t.opts.emoticonsSet[n].code+'">'+(t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+t.opts.emoticonsSet[n].code+'.svg"/>':"&#x"+t.opts.emoticonsSet[n].code+";")+'<span class="fr-sr-only">'+t.language.translate(t.opts.emoticonsSet[n].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return t.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+"</div>"}function r(n){t.events.on("popup.tab",(function(i){var o=e(i.currentTarget);if(!t.popups.isVisible("emoticons")||!o.is("span, a"))return!0;var s,a,r,l=i.which;if(e.FE.KEYCODE.TAB==l){if(o.is("span.fr-emoticon")&&i.shiftKey||o.is("a")&&!i.shiftKey){var c=n.find(".fr-buttons");s=!t.accessibility.focusToolbar(c,!!i.shiftKey)}if(!1!==s){var d=n.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");o.is("span.fr-emoticon")&&(d=d.not("span.fr-emoticon:not(:focus)")),a=d.index(o),a=i.shiftKey?((a-1)%d.length+d.length)%d.length:(a+1)%d.length,r=d.get(a),t.events.disableBlur(),r.focus(),s=!1}}else if(e.FE.KEYCODE.ARROW_UP==l||e.FE.KEYCODE.ARROW_DOWN==l||e.FE.KEYCODE.ARROW_LEFT==l||e.FE.KEYCODE.ARROW_RIGHT==l){if(o.is("span.fr-emoticon")){var u=o.parent().find("span.fr-emoticon");a=u.index(o);var p=t.opts.emoticonsStep,h=Math.floor(u.length/p),f=a%p,m=Math.floor(a/p)*p+f,g=h*p;e.FE.KEYCODE.ARROW_UP==l?m=((m-p)%g+g)%g:e.FE.KEYCODE.ARROW_DOWN==l?m=(m+p)%g:e.FE.KEYCODE.ARROW_LEFT==l?m=((m-1)%g+g)%g:e.FE.KEYCODE.ARROW_RIGHT==l&&(m=(m+1)%g),r=e(u.get(m)),t.events.disableBlur(),r.focus(),s=!1}}else e.FE.KEYCODE.ENTER==l&&(o.is("a")?o[0].click():t.button.exec(o),s=!1);return!1===s&&(i.preventDefault(),i.stopPropagation()),s}),!0)}function l(n,i){var o=s(),a=t.selection.ranges(0);o?(0===a.startOffset&&t.selection.element()===o?e(o).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):a.startOffset>0&&t.selection.element()===o&&a.commonAncestorContainer.parentNode.classList.contains("fr-emoticon")&&e(o).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore(),t.html.insert('<span class="fr-emoticon fr-deletable'+(i?" fr-emoticon-img":"")+'"'+(i?' style="background: url('+i+');"':"")+">"+(i?"&nbsp;":n)+"</span>&nbsp;"+e.FE.MARKERS,!0)):t.html.insert('<span class="fr-emoticon fr-deletable'+(i?" fr-emoticon-img":"")+'"'+(i?' style="background: url('+i+');"':"")+">"+(i?"&nbsp;":n)+"</span>&nbsp;",!0)}function c(){t.popups.hide("emoticons"),t.toolbar.showInline()}function d(){var n=function(){for(var e=t.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),n=0;n<e.length;n++)e[n].className+=" fr-deletable"};n(),t.events.on("html.set",n),t.events.on("keydown",(function(n){if(t.keys.isCharacter(n.which)&&t.selection.inEditor()){var i=t.selection.ranges(0),o=s();t.node.hasClass(o,"fr-emoticon-img")&&o&&(0===i.startOffset&&t.selection.element()===o?e(o).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):e(o).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore())}})),t.events.on("keyup",(function(n){for(var i=t.el.querySelectorAll(".fr-emoticon"),o=0;o<i.length;o++)void 0!==i[o].textContent&&0===i[o].textContent.replace(/\u200B/gi,"").length&&e(i[o]).remove();if(!(n.which>=e.FE.KEYCODE.ARROW_LEFT&&n.which<=e.FE.KEYCODE.ARROW_DOWN)){var a=s();t.node.hasClass(a,"fr-emoticon-img")&&(e(a).append(e.FE.MARKERS),t.selection.restore())}}))}return{_init:d,insert:l,showEmoticonsPopup:n,hideEmoticonsPopup:i,back:c}},e.FE.DefineIcon("emoticons",{NAME:"smile-o"}),e.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),e.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),e.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}}),e.extend(e.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),e.FE.PLUGINS.entities=function(t){function n(e){var t=e.textContent;if(t.match(a)){for(var n="",i=0;i<t.length;i++)r[t[i]]?n+=r[t[i]]:n+=t[i];e.textContent=n}}function i(e){if(e&&["STYLE","SCRIPT","svg","IFRAME"].indexOf(e.tagName)>=0)return!0;for(var o=t.node.contents(e),s=0;s<o.length;s++)o[s].nodeType==Node.TEXT_NODE?n(o[s]):i(o[s]);e.nodeType==Node.TEXT_NODE&&n(e)}function o(e){return 0===e.length?"":t.clean.exec(e,i).replace(/\&amp;/g,"&")}function s(){t.opts.htmlSimpleAmpersand||(t.opts.entities=t.opts.entities+"&amp;");var n=e("<div>").html(t.opts.entities).text(),i=t.opts.entities.split(";");r={},a="";for(var s=0;s<n.length;s++){var l=n.charAt(s);r[l]=i[s]+";",a+="\\"+l+(s<n.length-1?"|":"")}a=new RegExp("("+a+")","g"),t.events.on("html.get",o,!0)}var a,r;return{_init:s}},e.extend(e.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),e.extend(e.FE.DEFAULTS,{fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),e.FE.PLUGINS.file=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertFile"]'),n=t.popups.get("file.insert");if(n||(n=b()),o(),!n.hasClass("fr-active"))if(t.popups.refresh("file.insert"),t.popups.setContainer("file.insert",t.$tb),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("file.insert",i,s,e.outerHeight())}else t.position.forSelection(n),t.popups.show("file.insert")}function i(){var e=t.popups.get("file.insert");e||(e=b()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),s(t.language.translate("Uploading"),0)}function o(e){var n=t.popups.get("file.insert");n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-file-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e&&(t.events.focus(),t.popups.hide("file.insert")))}function s(e,n){var i=t.popups.get("file.insert");if(i){var o=i.find(".fr-file-progress-bar-layer");o.find("h3").text(e+(n?" "+n+"%":"")),o.removeClass("fr-error"),n?(o.find("div").removeClass("fr-indeterminate"),o.find("div > span").css("width",n+"%")):o.find("div").addClass("fr-indeterminate")}}function a(e){i();var n=t.popups.get("file.insert").find(".fr-file-progress-bar-layer");n.addClass("fr-error");var o=n.find("h3");o.text(e),t.events.disableBlur(),o.focus()}function r(e,n,i){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.opts.fileUseSelectedText&&t.selection.text().length&&(n=t.selection.text()),t.html.insert('<a href="'+e+'" id="fr-inserted-file" class="fr-file">'+n+"</a>");var o=t.$el.find("#fr-inserted-file");o.removeAttr("id"),t.popups.hide("file.insert"),t.undo.saveStep(),E(),t.events.trigger("file.inserted",[o,i])}function l(e){try{if(!1===t.events.trigger("file.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(h(C,e),!1)}catch(t){return h(x,e),!1}}function c(n){try{var i=e(n).find("Location").text(),o=e(n).find("Key").text();return!1===t.events.trigger("file.uploadedToS3",[i,o,n],!0)?(t.edit.on(),!1):i}catch(e){return h(x,n),!1}}function d(e){var n=this.status,i=this.response,o=this.responseXML,s=this.responseText;try{if(t.opts.fileUploadToS3)if(201==n){var a=c(o);a&&r(a,e,i||o)}else h(x,i||o);else if(n>=200&&n<300){var d=l(s);d&&r(d.link,e,i||s)}else h(k,i||s)}catch(e){h(x,i||s)}}function u(){h(x,this.response||this.responseText||this.responseXML)}function p(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;s(t.language.translate("Uploading"),n)}}function h(e,n){t.edit.on(),a(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("file.error",[{code:e,message:O[e]},n])}function f(){t.edit.on(),o(!0)}function m(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("file.beforeUpload",[e]))return!1;var n,o=e[0];if(o.size>t.opts.fileMaxSize)return h($),!1;if(t.opts.fileAllowedTypes.indexOf("*")<0&&t.opts.fileAllowedTypes.indexOf(o.type.replace(/file\//g,""))<0)return h(I),!1;if(t.drag_support.formdata&&(n=t.drag_support.formdata?new FormData:null),n){var s;if(!1!==t.opts.fileUploadToS3)for(s in n.append("key",t.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(o.name||"untitled")),n.append("success_action_status","201"),n.append("X-Requested-With","xhr"),n.append("Content-Type",o.type),t.opts.fileUploadToS3.params)t.opts.fileUploadToS3.params.hasOwnProperty(s)&&n.append(s,t.opts.fileUploadToS3.params[s]);for(s in t.opts.fileUploadParams)t.opts.fileUploadParams.hasOwnProperty(s)&&n.append(s,t.opts.fileUploadParams[s]);n.append(t.opts.fileUploadParam,o);var a=t.opts.fileUploadURL;t.opts.fileUploadToS3&&(a=t.opts.fileUploadToS3.uploadURL?t.opts.fileUploadToS3.uploadURL:"https://"+t.opts.fileUploadToS3.region+".amazonaws.com/"+t.opts.fileUploadToS3.bucket);var r=t.core.getXHR(a,t.opts.fileUploadMethod);r.onload=function(){d.call(r,o.name)},r.onerror=u,r.upload.onprogress=p,r.onabort=f,i(),t.edit.off();var l=t.popups.get("file.insert");l&&l.off("abortUpload").on("abortUpload",(function(){4!=r.readyState&&r.abort()})),r.send(n)}}}function g(n){t.events.$on(n,"dragover dragenter",".fr-file-upload-layer",(function(){return e(this).addClass("fr-drop"),!1}),!0),t.events.$on(n,"dragleave dragend",".fr-file-upload-layer",(function(){return e(this).removeClass("fr-drop"),!1}),!0),t.events.$on(n,"drop",".fr-file-upload-layer",(function(i){i.preventDefault(),i.stopPropagation(),e(this).removeClass("fr-drop");var o=i.originalEvent.dataTransfer;o&&o.files&&(n.data("instance")||t).file.upload(o.files)}),!0),t.helpers.isIOS()&&t.events.$on(n,"touchstart",'.fr-file-upload-layer input[type="file"]',(function(){e(this).trigger("click")})),t.events.$on(n,"change",'.fr-file-upload-layer input[type="file"]',(function(){this.files&&(n.data("instance")||t).file.upload(this.files),e(this).val("")}),!0)}function v(){o()}function b(e){if(e)return t.popups.onHide("file.insert",v),!0;var n="";t.opts.fileUpload||t.opts.fileInsertButtons.splice(t.opts.fileInsertButtons.indexOf("fileUpload"),1),n='<div class="fr-buttons">'+t.button.buildList(t.opts.fileInsertButtons)+"</div>";var i="";t.opts.fileUpload&&(i='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop file")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+t.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+t.id+'" role="button"></div></div>');var o={buttons:n,upload_layer:i,progress_bar:'<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>'},s=t.popups.create("file.insert",o);return g(s),s}function y(e){t.node.hasClass(e,"fr-file")}function w(n){var o=n.originalEvent.dataTransfer;if(o&&o.files&&o.files.length){var s=o.files[0];if(s&&void 0!==s.type&&s.type.indexOf("image")<0&&(t.opts.fileAllowedTypes.indexOf(s.type)>=0||t.opts.fileAllowedTypes.indexOf("*")>=0)){if(!t.opts.fileUpload)return n.preventDefault(),n.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var a=t.popups.get("file.insert");return a||(a=b()),t.popups.setContainer("file.insert",t.$sc),t.popups.show("file.insert",n.originalEvent.pageX,n.originalEvent.pageY),i(),m(o.files),n.preventDefault(),n.stopPropagation(),!1}}}function _(){t.events.on("drop",w),t.events.$on(t.$win,"keydown",(function(n){var i=n.which,o=t.popups.get("file.insert");o&&i==e.FE.KEYCODE.ESC&&o.trigger("abortUpload")})),t.events.on("destroy",(function(){var e=t.popups.get("file.insert");e&&e.trigger("abortUpload")}))}function T(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("file.insert"),t.toolbar.showInline()}function E(){var e,n=Array.prototype.slice.call(t.el.querySelectorAll("a.fr-file")),i=[];for(e=0;e<n.length;e++)i.push(n[e].getAttribute("href"));if(A)for(e=0;e<A.length;e++)i.indexOf(A[e].getAttribute("href"))<0&&t.events.trigger("file.unlink",[A[e]]);A=n}function S(){_(),t.events.on("link.beforeRemove",y),t.$wp&&(E(),t.events.on("contentChanged",E)),b(!0)}var A,C=2,k=3,x=4,$=5,I=6,O={1:"File cannot be loaded from the passed link."};return O[C]="No link in upload response.",O[k]="Error during file upload.",O[x]="Parsing response failed.",O[$]="File is too large.",O[I]="File file type is invalid.",O[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",{_init:S,showInsertPopup:n,upload:m,insert:r,back:T,hideProgressBar:o}},e.FE.DefineIcon("insertFile",{NAME:"file-o"}),e.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),e.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}}),e.extend(e.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif,-webkit-standard":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.FE.PLUGINS.fontFamily=function(t){function n(e){t.format.applyStyle("font-family",e)}function i(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+a()+'"]').addClass("fr-active").attr("aria-selected",!0);var n=t.find(".fr-dropdown-list"),i=t.find(".fr-active").parent();i.length?n.parent().scrollTop(i.offset().top-n.offset().top-(n.parent().outerHeight()/2-i.outerHeight()/2)):n.parent().scrollTop(0)}function o(t){var n=t.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return e.grep(n,(function(e){return e.length>0}))}function s(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)if(e[n]==t[i])return[n,i];return null}function a(){var n=o(e(t.selection.element()).css("font-family")),i=[];for(var a in t.opts.fontFamily)if(t.opts.fontFamily.hasOwnProperty(a)){var r=s(n,o(a));r&&i.push([a,r])}return 0===i.length?null:(i.sort((function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n})),i[0][0])}function r(n){if(t.opts.fontFamilySelection){var i=e(t.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");n.find("> span").text(t.opts.fontFamily[a()]||i[0]||t.language.translate(t.opts.fontFamilyDefaultSelection))}}return{apply:n,refreshOnShow:i,refresh:r}},e.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+n+'" style="font-family: '+n+'" title="'+t[n]+'">'+t[n]+"</a></li>");return e+"</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.FE.DefineIcon("fontFamily",{NAME:"font"}),e.extend(e.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),e.FE.PLUGINS.fontSize=function(t){function n(e){t.format.applyStyle("font-size",e)}function i(n,i){var o=e(t.selection.element()).css("font-size");i.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),i.find('.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0);var s=i.find(".fr-dropdown-list"),a=i.find(".fr-active").parent();a.length?s.parent().scrollTop(a.offset().top-s.offset().top-(s.parent().outerHeight()/2-a.outerHeight()/2)):s.parent().scrollTop(0)}function o(n){if(t.opts.fontSizeSelection){var i=t.helpers.getPX(e(t.selection.element()).css("font-size"));n.find("> span").text(i)}}return{apply:n,refreshOnShow:i,refresh:o}},e.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,n=0;n<t.length;n++){var i=t[n];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+i+'px" title="'+i+'">'+i+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.FE.DefineIcon("fontSize",{NAME:"text-height"}),e.extend(e.FE.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),e.FE.PLUGINS.forms=function(t){function n(n){n.preventDefault(),t.selection.clear(),e(this).data("mousedown",!0)}function i(t){e(this).data("mousedown")&&(t.stopPropagation(),e(this).removeData("mousedown"),b=this,c(this)),t.preventDefault()}function o(){t.$el.find("input, textarea, button").removeData("mousedown")}function s(){e(this).removeData("mousedown")}function a(){t.events.$on(t.$el,t._mousedown,"input, textarea, button",n),t.events.$on(t.$el,t._mouseup,"input, textarea, button",i),t.events.$on(t.$el,"touchmove","input, textarea, button",s),t.events.$on(t.$el,t._mouseup,o),t.events.$on(t.$win,t._mouseup,o),p(!0)}function r(){return b||null}function l(){var e="";t.opts.formEditButtons.length>0&&(e='<div class="fr-buttons">'+t.button.buildList(t.opts.formEditButtons)+"</div>");var n={buttons:e},i=t.popups.create("forms.edit",n);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",(function(){r()&&t.popups.isVisible("forms.edit")&&c(r())})),i}function c(n){var i=t.popups.get("forms.edit");i||(i=l()),b=n;var o=e(n);t.popups.refresh("forms.edit"),t.popups.setContainer("forms.edit",t.$sc);var s=o.offset().left+o.outerWidth()/2,a=o.offset().top+o.outerHeight();t.popups.show("forms.edit",s,a,o.outerHeight())}function d(){var n=t.popups.get("forms.update"),i=r();if(i){var o=e(i);o.is("button")?n.find('input[type="text"][name="text"]').val(o.text()):n.find('input[type="text"][name="text"]').val(o.attr("placeholder"))}n.find('input[type="text"][name="text"]').trigger("change")}function u(){b=null}function p(e){if(e)return t.popups.onRefresh("forms.update",d),t.popups.onHide("forms.update",u),!0;var n="";t.opts.formUpdateButtons.length>=1&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.formUpdateButtons)+"</div>");var i="",o=0;i='<div class="fr-forms-text-layer fr-layer fr-active">',i+='<div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex="'+ ++o+'"></div>';var s={buttons:n,text_layer:i+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="'+ ++o+'" type="button">'+t.language.translate("Update")+"</button></div></div>"};return t.popups.create("forms.update",s)}function h(){var n=r();if(n){var i=e(n),o=t.popups.get("forms.update");o||(o=p()),t.popups.isVisible("forms.update")||t.popups.refresh("forms.update"),t.popups.setContainer("forms.update",t.$sc);var s=i.offset().left+i.outerWidth()/2,a=i.offset().top+i.outerHeight();t.popups.show("forms.update",s,a,i.outerHeight())}}function f(n,i,o){void 0===i&&(i=t.opts.formStyles),void 0===o&&(o=t.opts.formMultipleStyles);var s=r();if(!s)return!1;if(!o){var a=Object.keys(i);a.splice(a.indexOf(n),1),e(s).removeClass(a.join(" "))}e(s).toggleClass(n)}function m(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var e=r();e&&t.$wp&&("BUTTON"==e.tagName&&t.selection.restore(),c(e))}function g(){var n=t.popups.get("forms.update"),i=r();if(i){var o=e(i),s=n.find('input[type="text"][name="text"]').val()||"";s.length&&(o.is("button")?o.text(s):o.attr("placeholder",s)),t.popups.hide("forms.update"),c(i)}}function v(){a(),t.events.$on(t.$el,"submit","form",(function(e){return e.preventDefault(),!1}))}var b;return{_init:v,updateInput:g,getInput:r,applyStyle:f,showUpdatePopup:h,showEditPopup:c,back:m}},e.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.FE.DefineIcon("inputStyle",{NAME:"magic"}),e.FE.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.formStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){var n=this.forms.getInput();n&&(this.forms.applyStyle(t),this.forms.showEditPopup(n))},refreshOnShow:function(t,n){var i=this.forms.getInput();if(i){var o=e(i);n.find(".fr-command").each((function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",o.hasClass(t))}))}}}),e.FE.DefineIcon("inputEdit",{NAME:"edit"}),e.FE.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),e.FE.DefineIcon("inputBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),e.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.FE.PLUGINS.fullscreen=function(t){function n(){return t.$box.hasClass("fr-fullscreen")}function i(){l=t.helpers.scrollTop(),t.$box.toggleClass("fr-fullscreen"),e("body:first").toggleClass("fr-fullscreen"),c=e('<div style="display: none;"></div>'),t.$box.after(c),t.helpers.isMobile()&&(t.$tb.data("parent",t.$tb.parent()),t.$tb.prependTo(t.$box),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy"))),d=t.opts.height,u=t.opts.heightMax,p=t.opts.zIndex,t.opts.height=t.o_win.innerHeight-(t.opts.toolbarInline?0:t.$tb.outerHeight()),t.opts.zIndex=2147483641,t.opts.heightMax=null,t.size.refresh(),t.opts.toolbarInline&&t.toolbar.showInline();for(var n=t.$box.parent();!n.is("body:first");)n.data("z-index",n.css("z-index")).data("overflow",n.css("overflow")).css("z-index","2147483640").css("overflow","visible"),n=n.parent();t.events.trigger("charCounter.update"),t.$win.trigger("scroll")}function o(){t.$box.toggleClass("fr-fullscreen"),e("body:first").toggleClass("fr-fullscreen"),t.$tb.prependTo(t.$tb.data("parent")),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy")),t.opts.height=d,t.opts.heightMax=u,t.opts.zIndex=p,t.size.refresh(),e(t.o_win).scrollTop(l),t.opts.toolbarInline&&t.toolbar.showInline(),t.events.trigger("charCounter.update"),t.opts.toolbarSticky&&t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset).data("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset).data("top",t.opts.toolbarStickyOffset));for(var n=t.$box.parent();!n.is("body:first");)n.data("z-index")&&(n.css("z-index",""),n.css("z-index")!=n.data("z-index")&&n.css("z-index",n.data("z-index")),n.removeData("z-index")),n.data("overflow")?(n.css("overflow",""),n.css("overflow")!=n.data("overflow")&&n.css("overflow",n.data("overflow")),n.removeData("overflow")):(n.css("overflow",""),n.removeData("overflow")),n=n.parent();t.$win.trigger("scroll")}function s(){n()?o():i(),a(t.$tb.find('.fr-command[data-cmd="fullscreen"]'))}function a(e){var i=n();e.toggleClass("fr-active",i).attr("aria-pressed",i),e.find("> *:not(.fr-sr-only)").replaceWith(i?t.icon.create("fullscreenCompress"):t.icon.create("fullscreen"))}function r(){if(!t.$wp)return!1;t.events.$on(e(t.o_win),"resize",(function(){n()&&(o(),i())})),t.events.on("toolbar.hide",(function(){if(n()&&t.helpers.isMobile())return!1})),t.events.on("destroy",(function(){n()&&o()}),!0)}var l,c,d,u,p;return{_init:r,toggle:s,refresh:a,isActive:n}},e.FE.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),e.FE.DefineIcon("fullscreen",{NAME:"expand"}),e.FE.DefineIcon("fullscreenCompress",{NAME:"compress"}),e.extend(e.FE.DEFAULTS,{helpSets:[{title:"Inline Editor",commands:[{val:"OSkeyE",desc:"Show the editor"}]},{title:"Common actions",commands:[{val:"OSkeyC",desc:"Copy"},{val:"OSkeyX",desc:"Cut"},{val:"OSkeyV",desc:"Paste"},{val:"OSkeyZ",desc:"Undo"},{val:"OSkeyShift+Z",desc:"Redo"},{val:"OSkeyK",desc:"Insert Link"},{val:"OSkeyP",desc:"Insert Image"}]},{title:"Basic Formatting",commands:[{val:"OSkeyA",desc:"Select All"},{val:"OSkeyB",desc:"Bold"},{val:"OSkeyI",desc:"Italic"},{val:"OSkeyU",desc:"Underline"},{val:"OSkeyS",desc:"Strikethrough"},{val:"OSkey]",desc:"Increase Indent"},{val:"OSkey[",desc:"Decrease Indent"}]},{title:"Quote",commands:[{val:"OSkey'",desc:"Increase quote level"},{val:"OSkeyShift+'",desc:"Decrease quote level"}]},{title:"Image / Video",commands:[{val:"OSkey+",desc:"Resize larger"},{val:"OSkey-",desc:"Resize smaller"}]},{title:"Table",commands:[{val:"Alt+Space",desc:"Select table cell"},{val:"Shift+Left/Right arrow",desc:"Extend selection one cell"},{val:"Shift+Up/Down arrow",desc:"Extend selection one row"}]},{title:"Navigation",commands:[{val:"OSkey/",desc:"Shortcuts"},{val:"Alt+F10",desc:"Focus popup / toolbar"},{val:"Esc",desc:"Return focus to previous position"}]}]}),e.FE.PLUGINS.help=function(t){function n(){}function i(){for(var n='<div class="fr-help-modal">',i=0;i<e.FE.DEFAULTS.helpSets.length;i++){var o=e.FE.DEFAULTS.helpSets[i],s="<table>";s+="<thead><tr><th>"+t.language.translate(o.title)+"</th></tr></thead>",s+="<tbody>";for(var a=0;a<o.commands.length;a++){var r=o.commands[a];s+="<tr>",s+="<td>"+t.language.translate(r.desc)+"</td>",s+="<td>"+r.val.replace("OSkey",t.helpers.isMac()?"&#8984;":"Ctrl+")+"</td>",s+="</tr>"}n+=s+="</tbody></table>"}return n+"</div>"}function o(){if(!a){var n="<h4>"+t.language.translate("Shortcuts")+"</h4>",o=i(),s=t.modals.create(r,n,o);a=s.$modal,s.$head,s.$body,t.events.$on(e(t.o_win),"resize",(function(){t.modals.resize(r)}))}t.modals.show(r),t.modals.resize(r)}function s(){t.modals.hide(r)}var a,r="help";return{_init:n,show:o,hide:s}},e.FroalaEditor.DefineIcon("help",{NAME:"question"}),e.FE.RegisterShortcut(e.FE.KEYCODE.SLASH,"help",null,"/"),e.FE.RegisterCommand("help",{title:"Help",icon:"help",undo:!1,focus:!1,modal:!0,callback:function(){this.help.show()},plugin:"help",showOnMobile:!1}),e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,imageUploadURL:"https://i.froala.com/upload",imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),e.FE.PLUGINS.image=function(t){function n(){var e=t.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),$e&&e.val($e.attr("src")),e.trigger("change")}function i(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),n=t.popups.get("image.insert");if(n||(n=F()),b(),!n.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",i,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("image.insert")}function o(){var e=t.popups.get("image.edit");if(e||(e=g()),e){var n=Ae();ke()&&(n=n.find(".fr-img-wrap")),t.popups.setContainer("image.edit",t.$sc),t.popups.refresh("image.edit");var i=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.edit",i,o,n.outerHeight())}}function s(){b()}function a(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+me(e)[0]),e.addClass("fr-di"+ge(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function r(e){he(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":me(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function l(){for(var n="IMG"==t.el.tagName?[t.el]:t.el.querySelectorAll("img"),i=0;i<n.length;i++){var o=e(n[i]);!t.opts.htmlUntouched&&t.opts.useClasses?((t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&a(o),t.opts.imageTextNear||o.removeClass("fr-dii").addClass("fr-dib")):t.opts.htmlUntouched||t.opts.useClasses||(t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&r(o),t.opts.iframe&&o.on("load",t.size.syncIframe)}}function c(n){void 0===n&&(n=!0);var i,o=Array.prototype.slice.call(t.el.querySelectorAll("img")),s=[];for(i=0;i<o.length;i++)s.push(o[i].getAttribute("src")),e(o[i]).toggleClass("fr-draggable",t.opts.imageMove),""===o[i].getAttribute("class")&&o[i].removeAttribute("class"),""===o[i].getAttribute("style")&&o[i].removeAttribute("style");if(Ue)for(i=0;i<Ue.length;i++)s.indexOf(Ue[i].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Ue[i])]);if(Ue&&n){var a=[];for(i=0;i<Ue.length;i++)a.push(Ue[i].getAttribute("src"));for(i=0;i<o.length;i++)a.indexOf(o[i].getAttribute("src"))<0&&t.events.trigger("image.loaded",[e(o[i])])}Ue=o}function d(){if(Ie||Q(),!$e)return!1;var e=t.$wp||t.$sc;e.append(Ie),Ie.data("instance",t);var n=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),i=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);i-=t.helpers.getPX(e.css("border-left-width")),n-=t.helpers.getPX(e.css("border-top-width")),t.$el.is("img")&&t.$sc.is("body")&&(n=0,i=0);var o=Ae();ke()&&(o=o.find(".fr-img-wrap")),Ie.css("top",(t.opts.iframe?o.offset().top:o.offset().top+n)-1).css("left",(t.opts.iframe?o.offset().left:o.offset().left+i)-1).css("width",o.get(0).getBoundingClientRect().width).css("height",o.get(0).getBoundingClientRect().height).addClass("fr-active")}function u(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function p(n){if(!t.core.sameInstance(Ie))return!0;if(n.preventDefault(),n.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep();var i=n.pageX||n.originalEvent.touches[0].pageX;if("mousedown"==n.type){var o=t.$oel.get(0).ownerDocument,s=o.defaultView||o.parentWindow,a=!1;try{a=s.location!=s.parent.location&&!(s.$&&s.$.FE)}catch(e){}a&&s.frameElement&&(i+=t.helpers.getPX(e(s.frameElement).offset().left)+s.frameElement.clientLeft)}(Oe=e(this)).data("start-x",i),Oe.data("start-width",$e.width()),Oe.data("start-height",$e.height());var r=$e.width();if(t.opts.imageResizeWithPercent){var l=$e.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;$e.css("width",(r/e(l).outerWidth()*100).toFixed(2)+"%")}else $e.css("width",r);Le.show(),t.popups.hideAll(),ue()}function h(n){if(!t.core.sameInstance(Ie))return!0;var i;if(Oe&&$e){if(n.preventDefault(),t.$el.find("img.fr-error").left)return!1;var o=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null);if(!o)return!1;var s=o-Oe.data("start-x"),a=Oe.data("start-width");if((Oe.hasClass("fr-hnw")||Oe.hasClass("fr-hsw"))&&(s=0-s),t.opts.imageResizeWithPercent){var r=$e.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;a=((a+s)/e(r).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(a=Math.round(a)),$e.css("width",a+"%"),(i=(t.helpers.getPX($e.css("width"))/e(r).outerWidth()*100).toFixed(2))!==a&&$e.css("width",i+"%"),$e.css("height","").removeAttr("height")}else a+s>=t.opts.imageMinWidth&&(ke()&&$e.parent().css("width",a+s),$e.css("width",a+s)),(i=t.helpers.getPX($e.css("width")))!==a+s&&$e.css("width",i),($e.attr("style")||"").match(/(^height:)|(; *height:)/)&&$e.css("height",Oe.data("start-height")*$e.width()/Oe.data("start-width"));d(),t.events.trigger("image.resize",[Se()])}}function f(e){if(!t.core.sameInstance(Ie))return!0;if(Oe&&$e){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;Oe=null,Le.hide(),d(),o(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[Se()])}}function m(e,n,i){t.edit.on(),$e&&$e.addClass("fr-error"),w(t.language.translate("Something went wrong. Please try again.")),!$e&&i&&Z(i),t.events.trigger("image.error",[{code:e,message:je[e]},n,i])}function g(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",(function(){$e&&t.popups.isVisible("image.edit")&&(t.events.disableBlur(),T($e))})),!0;var n="";if(t.opts.imageEditButtons.length>0){n+='<div class="fr-buttons">',n+=t.button.buildList(t.opts.imageEditButtons);var i={buttons:n+="</div>"};return t.popups.create("image.edit",i)}return!1}function v(e){var n=t.popups.get("image.insert");if(n||(n=F()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),$e){var i=Ae();t.popups.setContainer("image.insert",t.$sc);var o=i.offset().left+i.width()/2,s=i.offset().top+i.height();t.popups.show("image.insert",o,s,i.outerHeight())}void 0===e&&y(t.language.translate("Uploading"),0)}function b(e){var n=t.popups.get("image.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("img.fr-error").length)){if(t.events.focus(),t.$el.find("img.fr-error").length&&(t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&$e){var i=$e;ce(!0),t.selection.setAfter(i.get(0)),t.selection.restore()}t.popups.hide("image.insert")}}function y(e,n){var i=t.popups.get("image.insert");if(i){var o=i.find(".fr-image-progress-bar-layer");o.find("h3").text(e+(n?" "+n+"%":"")),o.removeClass("fr-error"),n?(o.find("div").removeClass("fr-indeterminate"),o.find("div > span").css("width",n+"%")):o.find("div").addClass("fr-indeterminate")}}function w(e){v();var n=t.popups.get("image.insert").find(".fr-image-progress-bar-layer");n.addClass("fr-error");var i=n.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function _(){var e=t.popups.get("image.insert").find(".fr-image-by-url-layer input");if(e.val().length>0){if(v(),y(t.language.translate("Loading image")),t.opts.imageUploadRemoteUrls&&t.opts.imageCORSProxy){var n=new XMLHttpRequest;n.open("GET",t.opts.imageCORSProxy+"/"+e.val(),!0),n.responseType="blob",n.onload=function(){200==this.status&&R([new Blob([this.response],{type:"image/png"})],$e)},n.send()}else S(e.val(),!0,[],$e);e.val(""),e.blur()}}function T(e){le.call(e.get(0))}function E(){var n=e(this);t.popups.hide("image.insert"),n.removeClass("fr-uploading"),n.next().is("br")&&n.next().remove(),T(n),t.events.trigger("image.loaded",[n])}function S(e,n,i,o,s){t.edit.off(),y(t.language.translate("Loading image")),n&&(e=t.helpers.sanitizeURL(e));var a=new Image;a.onload=function(){var n,a;if(o){t.undo.canDo()||o.hasClass("fr-uploading")||t.undo.saveStep();var r=o.data("fr-old-src");o.data("fr-image-pasted")&&(r=null),t.$wp?((n=o.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),r&&o.attr("src",r),o.replaceWith(n)):n=o;for(var l=n.get(0).attributes,d=0;d<l.length;d++){var u=l[d];0===u.nodeName.indexOf("data-")&&n.removeAttr(u.nodeName)}if(void 0!==i)for(a in i)i.hasOwnProperty(a)&&"link"!=a&&n.attr("data-"+a,i[a]);n.on("load",E),n.attr("src",e),t.edit.on(),c(!1),t.undo.saveStep(),t.$el.blur(),t.events.trigger(r?"image.replaced":"image.inserted",[n,s])}else n=I(e,i,E),c(!1),t.undo.saveStep(),t.$el.blur(),t.events.trigger("image.inserted",[n,s])},a.onerror=function(){m(Ne)},v(t.language.translate("Loading image")),a.src=e}function A(e){try{if(!1===t.events.trigger("image.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(m(De,e),!1)}catch(t){return m(Pe,e),!1}}function C(n){try{var i=e(n).find("Location").text(),o=e(n).find("Key").text();return!1===t.events.trigger("image.uploadedToS3",[i,o,n],!0)?(t.edit.on(),!1):i}catch(e){return m(Pe,n),!1}}function k(e){y(t.language.translate("Loading image"));var n=this.status,i=this.response,o=this.responseXML,s=this.responseText;try{if(t.opts.imageUploadToS3)if(201==n){var a=C(o);a&&S(a,!1,[],e,i||o)}else m(Pe,i||o,e);else if(n>=200&&n<300){var r=A(s);r&&S(r.link,!1,r,e,i||s)}else m(Me,i||s,e)}catch(t){m(Pe,i||s,e)}}function x(){m(Pe,this.response||this.responseText||this.responseXML)}function $(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;y(t.language.translate("Uploading"),n)}}function I(n,i,o){var s,a="";if(i&&void 0!==i)for(s in i)i.hasOwnProperty(s)&&"link"!=s&&(a+=" data-"+s+'="'+i[s]+'"');var r=t.opts.imageDefaultWidth;r&&"auto"!=r&&(r+=t.opts.imageResizeWithPercent?"%":"px");var l=e('<img src="'+n+'"'+a+(r?' style="width: '+r+';"':"")+">");he(l,t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign),l.on("load",o),l.on("error",(function(){m(He)})),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert(),t.html.wrap();var c=t.$el.find(".fr-marker");return c.length?(c.parent().is("hr")&&c.parent().after(c),t.node.isLastSibling(c)&&c.parent().hasClass("fr-deletable")&&c.insertAfter(c.parent()),c.replaceWith(l)):t.$el.append(l),t.selection.clear(),l}function O(){t.edit.on(),b(!0)}function L(n,i,o,s){function a(){var o=e(this);o.off("load"),o.addClass("fr-uploading"),o.next().is("br")&&o.next().remove(),t.placeholder.refresh(),T(o),d(),v(),t.edit.off(),n.onload=function(){k.call(n,o)},n.onerror=x,n.upload.onprogress=$,n.onabort=O,o.off("abortUpload").on("abortUpload",(function(){4!=n.readyState&&n.abort()})),n.send(i)}var r=new FileReader;r.addEventListener("load",(function(){var e=r.result;if(r.result.indexOf("svg+xml")<0){for(var n=atob(r.result.split(",")[1]),i=[],o=0;o<n.length;o++)i.push(n.charCodeAt(o));e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:"image/jpeg"}))}s?(s.on("load",a),s.one("error",(function(){s.off("load"),s.attr("src",s.data("fr-old-src")),m(He)})),t.edit.on(),t.undo.saveStep(),s.data("fr-old-src",s.attr("src")),s.attr("src",e)):I(e,null,a)}),!1),r.readAsDataURL(o)}function R(e,n){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("image.beforeUpload",[e,n]))return!1;var i,o=e[0];if(o.name||(o.name=(new Date).getTime()+".jpg"),o.size>t.opts.imageMaxSize)return m(Fe),!1;if(t.opts.imageAllowedTypes.indexOf(o.type.replace(/image\//g,""))<0)return m(Be),!1;if(t.drag_support.formdata&&(i=t.drag_support.formdata?new FormData:null),i){var s;if(!1!==t.opts.imageUploadToS3)for(s in i.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(o.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",o.type),t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(s)&&i.append(s,t.opts.imageUploadToS3.params[s]);for(s in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(s)&&i.append(s,t.opts.imageUploadParams[s]);i.append(t.opts.imageUploadParam,o,o.name);var a=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(a=t.opts.imageUploadToS3.uploadURL?t.opts.imageUploadToS3.uploadURL:"https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket),L(t.core.getXHR(a,t.opts.imageUploadMethod),i,o,n||$e)}}}function N(n){t.events.$on(n,"dragover dragenter",".fr-image-upload-layer",(function(){return e(this).addClass("fr-drop"),!1}),!0),t.events.$on(n,"dragleave dragend",".fr-image-upload-layer",(function(){return e(this).removeClass("fr-drop"),!1}),!0),t.events.$on(n,"drop",".fr-image-upload-layer",(function(i){i.preventDefault(),i.stopPropagation(),e(this).removeClass("fr-drop");var o=i.originalEvent.dataTransfer;if(o&&o.files){var s=n.data("instance")||t;s.events.disableBlur(),s.image.upload(o.files),s.events.enableBlur()}}),!0),t.helpers.isIOS()&&t.events.$on(n,"touchstart",'.fr-image-upload-layer input[type="file"]',(function(){e(this).trigger("click")}),!0),t.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',(function(){if(this.files){var i=n.data("instance")||t;i.events.disableBlur(),n.find("input:focus").blur(),i.events.enableBlur(),i.image.upload(this.files,$e)}e(this).val("")}),!0)}function D(e){if(e.is("img")&&e.parents(".fr-img-caption").length>0)return e.parents(".fr-img-caption")}function M(n){var i=n.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var o=i.files[0];if(o&&o.type&&-1!==o.type.indexOf("image")){if(!t.opts.imageUpload)return n.preventDefault(),n.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),0===t.$el.find(".fr-marker").length&&t.selection.setAtEnd(t.el),t.popups.hideAll();var s=t.popups.get("image.insert");s||(s=F()),t.popups.setContainer("image.insert",t.$sc);var a=n.originalEvent.pageX,r=n.originalEvent.pageY;return t.opts.iframe&&(r+=t.$iframe.offset().top,a+=t.$iframe.offset().left),t.popups.show("image.insert",a,r),v(),t.opts.imageAllowedTypes.indexOf(o.type.replace(/image\//g,""))>=0?(ce(!0),R(i.files)):m(Be),n.preventDefault(),n.stopPropagation(),!1}}}function P(){t.events.$on(t.$el,t._mousedown,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',(function(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;t.helpers.isMobile()||t.selection.clear(),Re=!0,t.popups.areVisible()&&t.events.disableBlur(),t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||"touchstart"==n.type||n.preventDefault(),n.stopPropagation()})),t.events.$on(t.$el,t._mouseup,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',(function(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;Re&&(Re=!1,n.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur()))})),t.events.on("keyup",(function(n){if(n.shiftKey&&""===t.selection.text().replace(/\n/g,"")&&t.keys.isArrow(n.which)){var i=t.selection.element(),o=t.selection.endElement();i&&"IMG"==i.tagName?T(e(i)):o&&"IMG"==o.tagName&&T(e(o))}}),!0),t.events.on("drop",M),t.events.on("element.beforeDrop",D),t.events.on("mousedown window.mousedown",de),t.events.on("window.touchmove",ue),t.events.on("mouseup window.mouseup",(function(){if($e)return ce(),!1;ue()})),t.events.on("commands.mousedown",(function(e){e.parents(".fr-toolbar").length>0&&ce()})),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",(function(){Re=!1,ce(!0)})),t.events.on("modals.hide",(function(){$e&&(Te(),t.selection.clear())}))}function F(e){if(e)return t.popups.onRefresh("image.insert",n),t.popups.onHide("image.insert",s),!0;var i,o="";t.opts.imageUpload||t.opts.imageInsertButtons.splice(t.opts.imageInsertButtons.indexOf("imageUpload"),1),t.opts.imageInsertButtons.length>1&&(o='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var a=t.opts.imageInsertButtons.indexOf("imageUpload"),r=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";a>=0&&(i=" fr-active",r>=0&&a>r&&(i=""),l='<div class="fr-image-upload-layer'+i+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+t.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+t.id+'" role="button"></div></div>');var c="";r>=0&&(i=" fr-active",a>=0&&r>a&&(i=""),c='<div class="fr-image-by-url-layer'+i+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d={buttons:o,upload_layer:l,by_url_layer:c,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},u=t.popups.create("image.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll",(function(){$e&&t.popups.isVisible("image.insert")&&_e()})),N(u),u}function B(){$e&&t.popups.get("image.alt").find("input").val($e.attr("alt")||"").trigger("change")}function H(){var e=t.popups.get("image.alt");e||(e=j()),b(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",t.$sc);var n=Ae();ke()&&(n=n.find(".fr-img-wrap"));var i=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.alt",i,o,n.outerHeight())}function j(e){if(e)return t.popups.onRefresh("image.alt",B),!0;var n={buttons:'<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>",alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>"},i=t.popups.create("image.alt",n);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",(function(){$e&&t.popups.isVisible("image.alt")&&H()})),i}function U(e){if($e){var n=t.popups.get("image.alt");$e.attr("alt",e||n.find("input").val()||""),n.find("input:focus").blur(),T($e)}}function W(){if($e){var e=t.popups.get("image.size");e.find('input[name="width"]').val($e.get(0).style.width).trigger("change"),e.find('input[name="height"]').val($e.get(0).style.height).trigger("change")}}function K(){var e=t.popups.get("image.size");e||(e=G()),b(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",t.$sc);var n=Ae();ke()&&(n=n.find(".fr-img-wrap"));var i=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.size",i,o,n.outerHeight())}function G(e){if(e)return t.popups.onRefresh("image.size",W),!0;var n={buttons:'<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>",size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>"},i=t.popups.create("image.size",n);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",(function(){$e&&t.popups.isVisible("image.size")&&K()})),i}function V(e,n){if($e){var i=t.popups.get("image.size");e=e||i.find('input[name="width"]').val()||"",n=n||i.find('input[name="height"]').val()||"";var o=/^[\d]+((px)|%)*$/g;e.match(o)?$e.css("width",e):$e.css("width",""),n.match(o)?$e.css("height",n):$e.css("height",""),ke()&&(e.match(o)?$e.parent().css("width",e):$e.parent().css("width",""),n.match(o)?$e.parent().css("height",n):$e.parent().css("height","")),i.find("input:focus").blur(),T($e)}}function z(e){var n,i,o=t.popups.get("image.insert");if($e||t.opts.toolbarInline){if($e){var s=Ae();ke()&&(s=s.find(".fr-img-wrap")),i=s.offset().top+s.outerHeight(),n=s.offset().left+s.outerWidth()/2}}else{var a=t.$tb.find('.fr-command[data-cmd="insertImage"]');n=a.offset().left+a.outerWidth()/2,i=a.offset().top+(t.opts.toolbarBottom?10:a.outerHeight()-10)}!$e&&t.opts.toolbarInline&&(i=o.offset().top-t.helpers.getPX(o.css("margin-top")),o.hasClass("fr-above")&&(i+=o.outerHeight())),o.find(".fr-layer").removeClass("fr-active"),o.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",n,i,$e?$e.outerHeight():0),t.accessibility.focusPopup(o)}function q(e){t.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function Y(e){t.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function X(e,t,n,i){return e.pageX=t,p.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,i)),h.call(this,e),f.call(this,e),++i}function Q(){var n;if(t.shared.$image_resizer?(Ie=t.shared.$image_resizer,Le=t.shared.$img_overlay,t.events.on("destroy",(function(){Ie.removeClass("fr-active").appendTo(e("body:first"))}),!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),Ie=t.shared.$image_resizer,t.events.$on(Ie,"mousedown",(function(e){e.stopPropagation()}),!0),t.opts.imageResize&&(Ie.append(u("nw")+u("ne")+u("sw")+u("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),Le=t.shared.$img_overlay,n=Ie.get(0).ownerDocument,e(n).find("body:first").append(Le))),t.events.on("shared.destroy",(function(){Ie.html("").removeData().remove(),Ie=null,t.opts.imageResize&&(Le.remove(),Le=null)}),!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",(function(){$e&&!$e.hasClass("fr-uploading")?ce(!0):$e&&(d(),_e(),v(!1))})),t.opts.imageResize){n=Ie.get(0).ownerDocument,t.events.$on(Ie,t._mousedown,".fr-handler",p),t.events.$on(e(n),t._mousemove,h),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,f),t.events.$on(Le,"mouseleave",f);var i=1,o=null,s=0;t.events.on("keydown",(function(n){if($e){var a=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,r=n.which;(r!==o||n.timeStamp-s>200)&&(i=1),(r==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&r==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?i=X.call(this,n,1,1,i):(r==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&r==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey?i=X.call(this,n,2,-1,i):t.keys.ctrlKey(n)||r!=e.FE.KEYCODE.ENTER||($e.before("<br>"),T($e)),o=r,s=n.timeStamp}}),!0),t.events.on("keyup",(function(){i=1}))}}function Z(n){(n=n||Ae())&&!1!==t.events.trigger("image.beforeRemove",[n])&&(t.popups.hideAll(),Te(),ce(!0),t.undo.canDo()||t.undo.saveStep(),n.get(0)==t.el?n.removeAttr("src"):("A"==n.get(0).parentNode.tagName?(t.selection.setBefore(n.get(0).parentNode)||t.selection.setAfter(n.get(0).parentNode)||n.parent().after(e.FE.MARKERS),e(n.get(0).parentNode).remove()):(t.selection.setBefore(n.get(0))||t.selection.setAfter(n.get(0))||n.after(e.FE.MARKERS),n.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function J(n){var i=n.which;if($e&&(i==e.FE.KEYCODE.BACKSPACE||i==e.FE.KEYCODE.DELETE))return n.preventDefault(),n.stopPropagation(),Z(),!1;if($e&&i==e.FE.KEYCODE.ESC){var o=$e;return ce(!0),t.selection.setAfter(o.get(0)),t.selection.restore(),n.preventDefault(),!1}if($e&&(i==e.FE.KEYCODE.ARROW_LEFT||i==e.FE.KEYCODE.ARROW_RIGHT)){var s=$e.get(0);return ce(!0),i==e.FE.KEYCODE.ARROW_LEFT?t.selection.setBefore(s):t.selection.setAfter(s),t.selection.restore(),n.preventDefault(),!1}return $e&&i!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),n.stopPropagation(),!1):void 0}function ee(e){if(e&&"IMG"==e.tagName)t.node.hasClass(e,"fr-uploading")||t.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):t.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),i=0;i<n.length;i++)ee(n[i])}function te(){var n;P(),"IMG"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',le),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',(function(){We=!1})),t.events.$on(t.$el,"touchmove",(function(){We=!0}))),t.$wp?(t.events.on("window.keydown keydown",J,!0),t.events.on("keyup",(function(t){if($e&&t.which==e.FE.KEYCODE.ENTER)return!1}),!0)):t.events.$on(t.$win,"keydown",J),t.events.on("toolbar.esc",(function(){if($e){if(t.$wp)t.events.disableBlur(),t.events.focus();else{var e=$e;ce(!0),t.selection.setAfter(e.get(0)),t.selection.restore()}return!1}}),!0),t.events.on("toolbar.focusEditor",(function(){if($e)return!1}),!0),t.events.on("window.cut window.copy",(function(e){$e&&t.popups.isVisible("image.edit")&&!t.popups.get("image.edit").find(":focus").length&&(Te(),t.paste.saveCopiedText($e.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout((function(){T($e)})):(ce(!0),t.undo.saveStep(),setTimeout((function(){t.undo.saveStep()}),0)))}),!0),t.browser.msie&&t.events.on("keydown",(function(n){if(!t.selection.isCollapsed()||!$e)return!0;var i=n.which;i==e.FE.KEYCODE.C&&t.keys.ctrlKey(n)?t.events.trigger("window.copy"):i==e.FE.KEYCODE.X&&t.keys.ctrlKey(n)&&t.events.trigger("window.cut")})),t.events.$on(e(t.o_win),"keydown",(function(t){var n=t.which;if($e&&n==e.FE.KEYCODE.BACKSPACE)return t.preventDefault(),!1})),t.events.$on(t.$win,"keydown",(function(t){var n=t.which;$e&&$e.hasClass("fr-uploading")&&n==e.FE.KEYCODE.ESC&&$e.trigger("abortUpload")})),t.events.on("destroy",(function(){$e&&$e.hasClass("fr-uploading")&&$e.trigger("abortUpload")})),t.events.on("paste.before",ae),t.events.on("paste.beforeCleanup",re),t.events.on("paste.after",ie),t.events.on("html.set",l),t.events.on("html.inserted",l),l(),t.events.on("destroy",(function(){Ue=[]})),t.events.on("html.processGet",ee),t.opts.imageOutputSize&&t.events.on("html.beforeGet",(function(){n=t.el.querySelectorAll("img");for(var i=0;i<n.length;i++){var o=n[i].style.width||e(n[i]).width(),s=n[i].style.height||e(n[i]).height();o&&n[i].setAttribute("width",(""+o).replace(/px/,"")),s&&n[i].setAttribute("height",(""+s).replace(/px/,""))}})),t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(c(),t.events.on("contentChanged",c)),t.events.$on(e(t.o_win),"orientationchange.image",(function(){setTimeout((function(){$e&&T($e)}),100)})),g(!0),F(!0),G(!0),j(!0),t.events.on("node.remove",(function(e){if("IMG"==e.get(0).tagName)return Z(e),!1}))}function ne(n){if(!1===t.events.trigger("image.beforePasteUpload",[n]))return!1;$e=e(n),d(),o(),_e(),v();for(var i=atob(e(n).attr("src").split(",")[1]),s=[],a=0;a<i.length;a++)s.push(i.charCodeAt(a));R([new Blob([new Uint8Array(s)],{type:"image/jpeg"})],$e)}function ie(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each((function(n,i){if(t.opts.imagePasteProcess){var o=t.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=t.opts.imageResizeWithPercent?"%":"px"),e(i).css("width",o).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:""))}if(0===i.src.indexOf("data:"))ne(i);else if(0===i.src.indexOf("blob:")||0===i.src.indexOf("http")&&t.opts.imageUploadRemoteUrls&&t.opts.imageCORSProxy){var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var e=t.o_doc.createElement("CANVAS"),n=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,n.drawImage(this,0,0),i.src=e.toDataURL("image/png"),ne(i)},s.src=(0===i.src.indexOf("blob:")?"":t.opts.imageCORSProxy+"/")+i.src}else 0!==i.src.indexOf("http")||0===i.src.indexOf("https://mail.google.com/mail")?(t.selection.save(),e(i).remove(),t.selection.restore()):e(i).removeAttr("data-fr-image-pasted")})):t.$el.find("img[data-fr-image-pasted]").remove()}function oe(e){var n=e.target.result,i=t.opts.imageDefaultWidth;i&&"auto"!=i&&(i+=t.opts.imageResizeWithPercent?"%":"px"),t.html.insert('<img data-fr-image-pasted="true" class="'+(t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+n+'"'+(i?' style="width: '+i+';"':"")+">"),t.events.trigger("paste.after")}function se(e){var t=new FileReader;t.onload=oe,t.readAsDataURL(e)}function ae(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var n=0;n<e.clipboardData.items.length&&!(t=e.clipboardData.items[n].getAsFile());n++);if(t)return se(t),!1}}function re(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function le(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(n&&"touchend"==n.type&&We)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=t&&e.FE.INSTANCES[i].events.trigger("image.hideResizer");t.toolbar.disable(),n&&(n.stopPropagation(),n.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),$e=e(this),t.browser.msie||Te(),d(),o(),t.browser.msie||t.selection.clear(),t.helpers.isIOS()&&(t.events.disableBlur(),t.$el.blur()),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function ce(e){$e&&(pe()||!0===e)&&(t.toolbar.enable(),Ie.removeClass("fr-active"),t.popups.hide("image.edit"),$e=null,ue())}function de(){Ke=!0}function ue(){Ke=!1}function pe(){return Ke}function he(e,n,i){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),i&&e.addClass("fr-fi"+i[0]),n&&e.addClass("fr-di"+n[0])):"inline"==n?(e.css({display:"inline-block",verticalAlign:"bottom",margin:t.opts.imageDefaultMargin}),"center"==i?e.css({float:"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*t.opts.imageDefaultMargin+"px)"}):"left"==i?e.css({float:"left",marginLeft:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"}):e.css({float:"right",marginRight:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"})):"block"==n&&(e.css({display:"block",float:"none",verticalAlign:"top",margin:t.opts.imageDefaultMargin+"px auto"}),"left"==i?e.css({marginLeft:0}):"right"==i&&e.css({marginRight:0}))}function fe(e){var n=Ae();n.removeClass("fr-fir fr-fil"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?n.addClass("fr-fil"):"right"==e&&n.addClass("fr-fir"):he(n,ge(),e),Te(),d(),o(),t.selection.clear()}function me(e){if(void 0===e&&(e=Ae()),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ge(e){void 0===e&&(e=Ae());var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ve(e){$e&&e.find("> *:first").replaceWith(t.icon.create("image-align-"+me()))}function be(e,t){$e&&t.find('.fr-command[data-param1="'+me()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ye(e){var n=Ae();n.removeClass("fr-dii fr-dib"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?n.addClass("fr-dii"):"block"==e&&n.addClass("fr-dib"):he(n,e,me()),Te(),d(),o(),t.selection.clear()}function we(e,t){$e&&t.find('.fr-command[data-param1="'+ge()+'"]').addClass("fr-active").attr("aria-selected",!0)}function _e(){var e=t.popups.get("image.insert");e||(e=F()),t.popups.isVisible("image.insert")||(b(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$sc));var n=Ae();ke()&&(n=n.find(".fr-img-wrap"));var i=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.insert",i,o,n.outerHeight(!0))}function Te(){if($e){t.events.disableBlur(),t.selection.clear();var e=t.doc.createRange();e.selectNode($e.get(0)),t.selection.get().addRange(e),t.events.enableBlur()}}function Ee(){$e?(t.events.disableBlur(),e(".fr-popup input:focus").blur(),T($e)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())}function Se(){return $e}function Ae(){return ke()?$e.parents(".fr-img-caption:first"):$e}function Ce(e,n,i){if(void 0===n&&(n=t.opts.imageStyles),void 0===i&&(i=t.opts.imageMultipleStyles),!$e)return!1;if(!i){var o=Object.keys(n);o.splice(o.indexOf(e),1),$e.removeClass(o.join(" "))}"object"==typeof n[e]?($e.removeAttr("style"),$e.css(n[e].style)):$e.toggleClass(e),T($e)}function ke(){return!!$e&&$e.parents(".fr-img-caption").length>0}function xe(){var n;$e&&!ke()?(n=$e,$e.parent().is("a")&&(n=$e.parent()),n.wrap('<span contenteditable="false" class="fr-img-caption '+$e.attr("class")+'" draggable="false"></span>'),n.wrap('<span class="fr-img-wrap"></span>'),n.after('<span class="fr-inner" contenteditable="true">'+e.FE.START_MARKER+"Image caption"+e.FE.END_MARKER+"</span>"),$e.removeAttr("class"),$e.parent().css("width",$e.width()),ce(!0),t.selection.restore()):(n=Ae(),$e.insertAfter(n),$e.attr("class",n.attr("class").replace("fr-img-caption","")),n.remove(),T($e))}var $e,Ie,Oe,Le,Re=!1,Ne=1,De=2,Me=3,Pe=4,Fe=5,Be=6,He=8,je={};je[Ne]="Image cannot be loaded from the passed link.",je[De]="No link in upload response.",je[Me]="Error during file upload.",je[Pe]="Parsing response failed.",je[Fe]="File is too large.",je[Be]="Image file type is invalid.",je[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",je[He]="Image file is corrupted.";var Ue,We,Ke=!1;return{_init:te,showInsertPopup:i,showLayer:z,refreshUploadButton:q,refreshByURLButton:Y,upload:R,insertByURL:_,align:fe,refreshAlign:ve,refreshAlignOnShow:be,display:ye,refreshDisplayOnShow:we,replace:_e,back:Ee,get:Se,getEl:Ae,insert:S,showProgressBar:v,remove:Z,hideProgressBar:b,applyStyle:Ce,showAltPopup:H,showSizePopup:K,setAlt:U,setSize:V,toggleCaption:xe,hasCaption:ke,exitEdit:ce,edit:T}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("image-align",{NAME:"align-left"}),e.FE.DefineIcon("image-align-left",{NAME:"align-left"}),e.FE.DefineIcon("image-align-right",{NAME:"align-right"}),e.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.imageAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("image-align-"+i)+'<span class="fr-sr-only">'+this.language.translate(n[i])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"object"==typeof i&&(i=i.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(i)+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,n){var i=this.image.get();i&&n.find(".fr-command").each((function(){var t=e(this).data("param1"),n=i.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)}))}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),e.FE.DefineIcon("imageCaption",{NAME:"commenting"}),e.FE.RegisterCommand("imageCaption",{undo:!0,focus:!1,title:"Image Caption",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(e){this.image.get()&&e.toggleClass("fr-active",this.image.hasCaption())}}),e.extend(e.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:"",imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),e.FE.PLUGINS.imageManager=function(t){function n(){if(!A){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+t.sid+'" title="'+t.language.translate("Tags")+'"></i><h4 data-text="true">'+t.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var n='<img class="fr-preloader" id="fr-preloader" alt="'+t.language.translate("Loading")+'.." src="'+t.opts.imageManagerPreloader+'" style="display: none;">';n+='<div class="fr-image-list" id="fr-image-list"></div>';var i=t.modals.create(M,e,n);A=i.$modal,C=i.$head,k=i.$body}A.data("current-image",t.image.get()),t.modals.show(M),x||E(),a()}function i(){t.modals.hide(M)}function o(){var t=e(window).outerWidth();return t<768?2:t<1200?3:4}function s(){$.empty();for(var e=0;e<D;e++)$.append('<div class="fr-list-column"></div>')}function a(){x.show(),$.find(".fr-list-column").empty(),t.opts.imageManagerLoadURL?e.ajax({url:t.opts.imageManagerLoadURL,method:t.opts.imageManagerLoadMethod,data:t.opts.imageManagerLoadParams,dataType:"json",crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done((function(e,n,i){t.events.trigger("imageManager.imagesLoaded",[e]),r(e,i.response),x.hide()})).fail((function(){var e=this.xhr();b(F,e.response||e.responseText)})):b(B)}function r(e,t){try{$.find(".fr-list-column").empty(),L=0,R=0,N=0,O=e,l()}catch(e){b(H,t)}}function l(){if(R<O.length&&($.outerHeight()<=k.outerHeight()+t.opts.imageManagerScrollOffset||k.scrollTop()+t.opts.imageManagerScrollOffset>$.outerHeight()-k.outerHeight())){L++;for(var e=t.opts.imageManagerPageSize*(L-1);e<Math.min(O.length,t.opts.imageManagerPageSize*L);e++)c(O[e])}}function c(n){var i=new Image,o=e('<div class="fr-image-container fr-empty fr-image-'+N+++'" data-loading="'+t.language.translate("Loading")+'.." data-deleting="'+t.language.translate("Deleting")+'..">');h(!1),i.onload=function(){o.height(Math.floor(o.width()/i.width*i.height));var s=e("<img/>");if(n.thumb)s.attr("src",n.thumb);else{if(b(j,n),!n.url)return b(U,n),!1;s.attr("src",n.url)}if(n.url&&s.attr("data-url",n.url),n.tag)if(C.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),C.find(".fr-modal-tags").show(),n.tag.indexOf(",")>=0){for(var a=n.tag.split(","),r=0;r<a.length;r++)a[r]=a[r].trim(),0===I.find('a[title="'+a[r]+'"]').length&&I.append('<a role="button" title="'+a[r]+'">'+a[r]+"</a>");s.attr("data-tag",a.join())}else 0===I.find('a[title="'+n.tag.trim()+'"]').length&&I.append('<a role="button" title="'+n.tag.trim()+'">'+n.tag.trim()+"</a>"),s.attr("data-tag",n.tag.trim());for(var c in n.name&&s.attr("alt",n.name),n)n.hasOwnProperty(c)&&"thumb"!=c&&"url"!=c&&"tag"!=c&&s.attr("data-"+c,n[c]);o.append(s).append(e(t.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",t.language.translate("Delete"))).append(e(t.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",t.language.translate("Insert"))),I.find(".fr-selected-tag").each((function(e,t){T(s,t.text)||o.hide()})),s.on("load",(function(){o.removeClass("fr-empty"),o.height("auto"),R++,p(u(parseInt(s.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1)),h(!1),R%t.opts.imageManagerPageSize==0&&l()})),t.events.trigger("imageManager.imageLoaded",[s])},i.onerror=function(){R++,o.remove(),p(u(parseInt(o.attr("class").match(/fr-image-(\d+)/)[1],10)+1)),b(P,n),R%t.opts.imageManagerPageSize==0&&l()},i.src=n.thumb||n.url,d().append(o)}function d(){var t,n;return $.find(".fr-list-column").each((function(i,o){var s=e(o);(0===i||s.outerHeight()<n)&&(n=s.outerHeight(),t=s)})),t}function u(t){void 0===t&&(t=0);for(var n=[],i=N-1;i>=t;i--){var o=$.find(".fr-image-"+i);o.length&&(n.push(o),e('<div id="fr-image-hidden-container">').append(o),$.find(".fr-image-"+i).remove())}return n}function p(e){for(var t=e.length-1;t>=0;t--)d().append(e[t])}function h(e){if(void 0===e&&(e=!0),!A.is(":visible"))return!0;var n=o();if(n!=D){D=n;var i=u();s(),p(i)}t.modals.resize(M),e&&l()}function f(e){var t={},n=e.data();for(var i in n)n.hasOwnProperty(i)&&"url"!=i&&"tag"!=i&&(t[i]=n[i]);return t}function m(n){var i=e(n.currentTarget).siblings("img"),o=A.data("instance")||t,s=A.data("current-image");if(t.modals.hide(M),o.image.showProgressBar(),s)s.data("fr-old-src",s.attr("src")),s.trigger("click");else{o.events.focus(!0),o.selection.restore();var a=o.position.getBoundingRect(),r=a.left+a.width/2+e(t.doc).scrollLeft(),l=a.top+a.height+e(t.doc).scrollTop();o.popups.setContainer("image.insert",t.$sc),o.popups.show("image.insert",r,l)}o.image.insert(i.data("url"),!1,f(i),s)}function g(){A.find("#fr-modal-tags > a").each((function(){0===A.find('#fr-image-list [data-tag*="'+e(this).text()+'"]').length&&e(this).removeClass("fr-selected-tag").hide()})),w()}function v(n){var i=e(n.currentTarget).siblings("img"),o=t.language.translate("Are you sure? Image will be deleted.");confirm(o)&&(t.opts.imageManagerDeleteURL?!1!==t.events.trigger("imageManager.beforeDeleteImage",[i])&&(i.parent().addClass("fr-image-deleting"),e.ajax({method:t.opts.imageManagerDeleteMethod,url:t.opts.imageManagerDeleteURL,data:e.extend(e.extend({src:i.attr("src")},f(i)),t.opts.imageManagerDeleteParams),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done((function(e){t.events.trigger("imageManager.imageDeleted",[e]);var n=u(parseInt(i.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);i.parent().remove(),p(n),g(),h(!0)})).fail((function(){var e=this.xhr();b(W,e.response||e.responseText)}))):b(K))}function b(n,i){10<=n&&n<20?x.hide():20<=n&&n<30&&e(".fr-image-deleting").removeClass("fr-image-deleting"),t.events.trigger("imageManager.error",[{code:n,message:G[n]},i])}function y(){var e=C.find(".fr-modal-head-line").outerHeight(),t=I.outerHeight();C.toggleClass("fr-show-tags"),C.hasClass("fr-show-tags")?(C.css("height",e+t),I.find("a").css("opacity",1)):(C.css("height",e),I.find("a").css("opacity",0))}function w(){var t=I.find(".fr-selected-tag");t.length>0?($.find("img").parent().show(),t.each((function(t,n){$.find("img").each((function(t,i){var o=e(i);T(o,n.text)||o.parent().hide()}))}))):$.find("img").parent().show(),p(u()),l()}function _(n){n.preventDefault();var i=e(n.currentTarget);i.toggleClass("fr-selected-tag"),t.opts.imageManagerToggleTags&&i.siblings("a").removeClass("fr-selected-tag"),w()}function T(e,t){for(var n=(e.attr("data-tag")||"").split(","),i=0;i<n.length;i++)if(n[i]==t)return!0;return!1}function E(){x=A.find("#fr-preloader"),$=A.find("#fr-image-list"),I=A.find("#fr-modal-tags"),D=o(),s(),C.css("height",C.find(".fr-modal-head-line").outerHeight()),t.events.$on(e(t.o_win),"resize",(function(){h(!!O)})),t.helpers.isMobile()&&(t.events.bindClick($,"div.fr-image-container",(function(t){A.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),e(t.currentTarget).addClass("fr-mobile-selected")})),A.on(t._mousedown,(function(){A.find(".fr-mobile-selected").removeClass("fr-mobile-selected")}))),t.events.bindClick($,".fr-insert-img",m),t.events.bindClick($,".fr-delete-img",v),A.on(t._mousedown+" "+t._mouseup,(function(e){e.stopPropagation()})),A.on(t._mousedown,"*",(function(){t.events.disableBlur()})),k.on("scroll",l),t.events.bindClick(A,"i#fr-modal-more-"+t.sid,y),t.events.bindClick(I,"a",_)}function S(){if(!t.$wp&&"IMG"!=t.el.tagName)return!1}var A,C,k,x,$,I,O,L,R,N,D,M="image_manager",P=10,F=11,B=12,H=13,j=14,U=15,W=21,K=22,G={};return G[P]="Image cannot be loaded from the passed link.",G[F]="Error during load images request.",G[B]="Missing imageManagerLoadURL option.",G[H]="Parsing load response failed.",G[j]="Missing image thumb.",G[U]="Missing image URL.",G[W]="Error during delete image request.",G[K]="Missing imageManagerDeleteURL option.",{require:["image"],_init:S,show:n,hide:i}},!e.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");e.FE.DEFAULTS.imageInsertButtons.push("imageManager"),e.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),e.FE.DefineIcon("imageManager",{NAME:"folder"}),e.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),e.FE.DefineIcon("imageManagerDelete",{NAME:"trash"}),e.extend(e.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),e.FE.PLUGINS.inlineStyle=function(t){function n(n){""!==t.selection.text()?t.html.insert(e.FE.START_MARKER+'<span style="'+n+'">'+t.selection.text()+"</span>"+e.FE.END_MARKER):t.html.insert('<span style="'+n+'">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}return{apply:n}},e.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><span style="'+t[n]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[n]+'" title="'+this.language.translate(n)+'">'+this.language.translate(n)+"</a></span></li>");return e+"</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),e.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"}),e.extend(e.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video",".fr-embedly",".fr-img-caption"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),e.FE.PLUGINS.lineBreaker=function(t){function n(e,n){var i,o,s,a,r,l,c,d;if(null==e)r=(a=n.parent()).offset().top,i=(c=n.offset().top)-Math.min((c-r)/2,t.opts.lineBreakerOffset),s=a.outerWidth(),o=a.offset().left;else if(null==n)l=(a=e.parent()).offset().top+a.outerHeight(),i=(d=e.offset().top+e.outerHeight())+Math.min((l-d)/2,t.opts.lineBreakerOffset),s=a.outerWidth(),o=a.offset().left;else{a=e.parent();var u=e.offset().top+e.height(),p=n.offset().top;if(u>p)return!1;i=(u+p)/2,s=a.outerWidth(),o=a.offset().left}t.opts.iframe&&(o+=t.$iframe.offset().left-t.helpers.scrollLeft(),i+=t.$iframe.offset().top-t.helpers.scrollTop()),t.$box.append(v),v.css("top",i-t.win.pageYOffset),v.css("left",o-t.win.pageXOffset),v.css("width",s),v.data("tag1",e),v.data("tag2",n),v.addClass("fr-visible").data("instance",t)}function i(e,i){var s,a,r=e.offset().top,l=e.offset().top+e.outerHeight();if(Math.abs(l-i)<=t.opts.lineBreakerOffset||Math.abs(i-r)<=t.opts.lineBreakerOffset)if(Math.abs(l-i)<Math.abs(i-r)){for(var c=(a=e.get(0)).nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;)c=c.nextSibling;if(!c)return n(e,null),!0;if(s=o(c))return n(e,s),!0}else{if(!(a=e.get(0)).previousSibling)return n(null,e),!0;if(s=o(a.previousSibling))return n(s,e),!0}v.removeClass("fr-visible").removeData("instance")}function o(n){if(n){var i=e(n);if(0===t.$el.find(i).length)return null;if(n.nodeType!=Node.TEXT_NODE&&i.is(t.opts.lineBreakerTags.join(",")))return i;if(i.parents(t.opts.lineBreakerTags.join(",")).length>0)return n=i.parents(t.opts.lineBreakerTags.join(",")).get(0),0!==t.$el.find(n).length&&e(n).is(t.opts.lineBreakerTags.join(","))?e(n):null}return null}function s(e){if(void 0!==e.inFroalaWrapper)return e.inFroalaWrapper;for(var n=e;e.parentNode&&e.parentNode!==t.$wp.get(0);)e=e.parentNode;return n.inFroalaWrapper=e.parentNode==t.$wp.get(0),n.inFroalaWrapper}function a(e,n){var i=t.doc.elementFromPoint(e,n);return i&&!i.closest(".fr-line-breaker")&&!t.node.isElement(i)&&i!=t.$wp.get(0)&&s(i)?i:null}function r(e,n,i){for(var o=i,s=null;o<=t.opts.lineBreakerOffset&&!s;)(s=a(e,n-o))||(s=a(e,n+o)),o+=i;return s}function l(e,n,i){for(var o=null,s=100;!o&&e>t.$box.offset().left&&e<t.$box.offset().left+t.$box.outerWidth()&&s>0;)(o=a(e,n))||(o=r(e,n,5)),"left"==i?e-=t.opts.lineBreakerHorizontalOffset:e+=t.opts.lineBreakerHorizontalOffset,s-=t.opts.lineBreakerHorizontalOffset;return o}function c(e){y=null;var n=null,s=null,a=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);a&&("HTML"==a.tagName||"BODY"==a.tagName||t.node.isElement(a)||(a.getAttribute("class")||"").indexOf("fr-line-breaker")>=0)?((s=r(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset,1))||(s=l(e.pageX-t.win.pageXOffset-t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"left")),s||(s=l(e.pageX-t.win.pageXOffset+t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"right")),n=o(s)):n=o(a),n?i(n,e.pageY):t.core.sameInstance(v)&&v.removeClass("fr-visible").removeData("instance")}function d(e){return!(v.hasClass("fr-visible")&&!t.core.sameInstance(v))&&(t.popups.areVisible()||t.el.querySelector(".fr-selected-cell")?(v.removeClass("fr-visible"),!0):void(!1!==b||t.edit.isDisabled()||(y&&clearTimeout(y),y=setTimeout(c,30,e))))}function u(){y&&clearTimeout(y),v.hasClass("fr-visible")&&v.removeClass("fr-visible").removeData("instance")}function p(){b=!0,u()}function h(){b=!1}function f(n){if(!t.core.sameInstance(v))return!0;n.preventDefault(),v.removeClass("fr-visible").removeData("instance");var i=v.data("tag1"),o=v.data("tag2"),s=t.html.defaultTag();null==i?s&&"TD"!=o.parent().get(0).tagName&&0===o.parents(s).length?o.before("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):o.before(e.FE.MARKERS+"<br>"):s&&"TD"!=i.parent().get(0).tagName&&0===i.parents(s).length?i.after("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):i.after(e.FE.MARKERS+"<br>"),t.selection.restore()}function m(){t.shared.$line_breaker||(t.shared.$line_breaker=e('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),v=t.shared.$line_breaker,t.events.on("shared.destroy",(function(){v.html("").removeData().remove(),v=null}),!0),t.events.on("destroy",(function(){v.removeData("instance").removeClass("fr-visible").appendTo("body:first"),clearTimeout(y)}),!0),t.events.$on(v,"mousemove",(function(e){e.stopPropagation()}),!0),t.events.$on(v,"mousedown","a",(function(e){e.stopPropagation()}),!0),t.events.$on(v,"click","a",f,!0)}function g(){if(!t.$wp)return!1;m(),b=!1,t.events.$on(t.$win,"mousemove",d),t.events.$on(e(t.win),"scroll",u),t.events.on("popups.show.table.edit",u),t.events.on("commands.after",u),t.events.$on(e(t.win),"mousedown",p),t.events.$on(e(t.win),"mouseup",h)}var v,b,y;return{_init:g}},e.extend(e.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FE.PLUGINS.link=function(t){function n(){var n=t.image?t.image.get():null;if(!n&&t.$wp){var i=t.selection.ranges(0).commonAncestorContainer;if(i&&(i.contains&&i.contains(t.el)||!t.el.contains(i)||t.el==i)&&(i=null),i&&"A"===i.tagName)return i;var o=t.selection.element(),s=t.selection.endElement();return"A"==o.tagName||t.node.isElement(o)||(o=e(o).parentsUntil(t.$el,"a:first").get(0)),"A"==s.tagName||t.node.isElement(s)||(s=e(s).parentsUntil(t.$el,"a:first").get(0)),s&&(s.contains&&s.contains(t.el)||!t.el.contains(s)||t.el==s)&&(s=null),o&&(o.contains&&o.contains(t.el)||!t.el.contains(o)||t.el==o)&&(o=null),s&&s==o&&"A"==s.tagName?o:null}return"A"==t.el.tagName?t.el:n&&n.get(0).parentNode&&"A"==n.get(0).parentNode.tagName?n.get(0).parentNode:void 0}function i(){var e,n,i,o,s=t.image?t.image.get():null,a=[];if(s)"A"==s.get(0).parentNode.tagName&&a.push(s.get(0).parentNode);else if(t.win.getSelection){var r=t.win.getSelection();if(r.getRangeAt&&r.rangeCount){o=t.doc.createRange();for(var l=0;l<r.rangeCount;++l)if((n=(e=r.getRangeAt(l)).commonAncestorContainer)&&1!=n.nodeType&&(n=n.parentNode),n&&"a"==n.nodeName.toLowerCase())a.push(n);else{i=n.getElementsByTagName("a");for(var c=0;c<i.length;++c)o.selectNodeContents(i[c]),o.compareBoundaryPoints(e.END_TO_START,e)<1&&o.compareBoundaryPoints(e.START_TO_END,e)>-1&&a.push(i[c])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if("a"==(n=(e=t.doc.selection.createRange()).parentElement()).nodeName.toLowerCase())a.push(n);else{i=n.getElementsByTagName("a"),o=t.doc.body.createTextRange();for(var d=0;d<i.length;++d)o.moveToElementText(i[d]),o.compareEndPoints("StartToEnd",e)>-1&&o.compareEndPoints("EndToStart",e)<1&&a.push(i[d])}return a}function o(i){if(t.core.hasFocus()){if(a(),i&&"keyup"===i.type&&(i.altKey||i.which==e.FE.KEYCODE.ALT))return!0;setTimeout((function(){if(!i||i&&(1==i.which||"mouseup"!=i.type)){var o=n(),a=t.image?t.image.get():null;if(o&&!a){if(t.image){var r=t.node.contents(o);if(1==r.length&&"IMG"==r[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?e(o).before(e.FE.MARKERS):e(o).after(e.FE.MARKERS),t.selection.restore(),!1}}i&&i.stopPropagation(),s(o)}}}),t.helpers.isIOS()?100:0)}}function s(n){var i=t.popups.get("link.edit");i||(i=r());var o=e(n);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",t.$sc);var s=o.offset().left+e(n).outerWidth()/2,a=o.offset().top+o.outerHeight();t.popups.show("link.edit",s,a,o.outerHeight())}function a(){t.popups.hide("link.edit")}function r(){var e="";t.opts.linkEditButtons.length>1&&("A"==t.el.tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var i={buttons:e},o=t.popups.create("link.edit",i);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",(function(){n()&&t.popups.isVisible("link.edit")&&s(n())})),o}function l(){}function c(){var i=t.popups.get("link.insert"),o=n();if(o){var s,a,r=e(o),l=i.find('input.fr-link-attr[type="text"]'),c=i.find('input.fr-link-attr[type="checkbox"]');for(s=0;s<l.length;s++)(a=e(l[s])).val(r.attr(a.attr("name")||""));for(c.prop("checked",!1),s=0;s<c.length;s++)a=e(c[s]),r.attr(a.attr("name"))==a.data("checked")&&a.prop("checked",!0);i.find('input.fr-link-attr[type="text"][name="text"]').val(r.text())}else i.find('input.fr-link-attr[type="text"]').val(""),i.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),i.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());i.find("input.fr-link-attr").trigger("change"),t.image&&t.image.get()?i.find('.fr-link-attr[name="text"]').parent().hide():i.find('.fr-link-attr[name="text"]').parent().show()}function d(){var e=t.$tb.find('.fr-command[data-cmd="insertLink"]'),n=t.popups.get("link.insert");if(n||(n=u()),!n.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||t.$sc),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("link.insert",i,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("link.insert")}function u(e){if(e)return t.popups.onRefresh("link.insert",c),t.popups.onHide("link.insert",l),!0;var i="";t.opts.linkInsertButtons.length>=1&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var o='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',s="",a=0;for(var r in s='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',s+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+t.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++a+'"></div>',t.opts.linkText&&(s+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+t.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++a+'"></div>'),t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(r)){var d=t.opts.linkAttributes[r];s+='<div class="fr-input-line"><input name="'+r+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(d)+'" tabIndex="'+ ++a+'"></div>'}t.opts.linkAlwaysBlank||(s+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++a+'"><span>'+o+'</span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>");var u={buttons:i,input_layer:s+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++a+'" type="button">'+t.language.translate("Insert")+"</button></div></div>"},p=t.popups.create("link.insert",u);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",(function(){(t.image?t.image.get():null)&&t.popups.isVisible("link.insert")&&w(),n&&t.popups.isVisible("link.insert")&&b()})),p}function p(){var i=n(),o=t.image?t.image.get():null;if(!1===t.events.trigger("link.beforeRemove",[i]))return!1;o&&i?(o.unwrap(),t.image.edit(o)):i&&(t.selection.save(),e(i).replaceWith(e(i).html()),t.selection.restore(),a())}function h(){t.events.on("keyup",(function(t){t.which!=e.FE.KEYCODE.ESC&&o(t)})),t.events.on("window.mouseup",o),t.events.$on(t.$el,"click","a",(function(e){t.edit.isDisabled()&&e.preventDefault()})),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",o),u(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",(function(){if(t.popups.isVisible("link.edit"))return t.events.disableBlur(),t.events.focus(),!1}),!0)}function f(n){var i,o,s=t.opts.linkList[n],a=t.popups.get("link.insert"),r=a.find('input.fr-link-attr[type="text"]'),l=a.find('input.fr-link-attr[type="checkbox"]');for(o=0;o<r.length;o++)s[(i=e(r[o])).attr("name")]?i.val(s[i.attr("name")]):"text"!=i.attr("name")&&i.val("");for(o=0;o<l.length;o++)(i=e(l[o])).prop("checked",i.data("checked")==s[i.attr("name")]);t.accessibility.focusPopup(a)}function m(){var n,i,o=t.popups.get("link.insert"),s=o.find('input.fr-link-attr[type="text"]'),a=o.find('input.fr-link-attr[type="checkbox"]'),r=s.filter('[name="href"]').val(),l=s.filter('[name="text"]').val(),c={};for(i=0;i<s.length;i++)n=e(s[i]),["href","text"].indexOf(n.attr("name"))<0&&(c[n.attr("name")]=n.val());for(i=0;i<a.length;i++)(n=e(a[i])).is(":checked")?c[n.attr("name")]=n.data("checked"):c[n.attr("name")]=n.data("unchecked")||null;var d=t.helpers.scrollTop();v(r,l,c),e(t.o_win).scrollTop(d)}function g(){if(!t.selection.isCollapsed()){t.selection.save();for(var n=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();n.length;){var i=e(n.pop());i.removeClass("fr-unprocessed");var o=t.node.deepestParent(i.get(0));if(o){var s=i.get(0),a="",r="";do{s=s.parentNode,t.node.isBlock(s)||(a+=t.node.closeTagString(s),r=t.node.openTagString(s)+r)}while(s!=o);var l=t.node.openTagString(i.get(0))+i.html()+t.node.closeTagString(i.get(0));i.replaceWith('<span id="fr-break"></span>');var c=o.outerHTML;c=c.replace(/<span id="fr-break"><\/span>/g,a+l+r),o.outerHTML=c}n=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.html.cleanEmptyTags(),t.selection.restore()}}function v(s,a,r){if(void 0===r&&(r={}),!1===t.events.trigger("link.beforeInsert",[s,a,r]))return!1;var l=t.image?t.image.get():null;l||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var c=s;t.opts.linkConvertEmailAddress&&e.FE.MAIL_REGEX.test(s)&&!/^mailto:.*/i.test(s)&&(s="mailto:"+s);var d=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===t.opts.linkAutoPrefix||new RegExp("^("+e.FE.LinkProtocols.join("|")+"):.","i").test(s)||/^data:image.*/i.test(s)||/^(https?:|ftps?:|file:|)\/\//i.test(s)||d.test(s)||["/","{","[","#","("].indexOf((s||"")[0])<0&&(s=t.opts.linkAutoPrefix+s),s=t.helpers.sanitizeURL(s),t.opts.linkAlwaysBlank&&(r.target="_blank"),t.opts.linkAlwaysNoFollow&&(r.rel="nofollow"),"_blank"==r.target?r.rel?r.rel+=" noopener noreferrer":r.rel="noopener noreferrer":null==r.target&&(r.rel?r.rel=r.rel.replace(/noopener/,"").replace(/noreferrer/,""):r.rel=null),a=a||"",s===t.opts.linkAutoPrefix)return t.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[c]),!1;var u,p=n();if(p)(u=e(p)).attr("href",s),a.length>0&&u.text()!=a&&!l&&u.text(a),l||u.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),u.attr(r),l||t.selection.restore();else{l?l.wrap('<a href="'+s+'"></a>'):(t.format.remove("a"),t.selection.isCollapsed()?(a=0===a.length?c:a,t.html.insert('<a href="'+s+'">'+e.FE.START_MARKER+a+e.FE.END_MARKER+"</a>"),t.selection.restore()):a.length>0&&a!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'+s+'">'+e.FE.START_MARKER+a+e.FE.END_MARKER+"</a>"),t.selection.restore()):(g(),t.format.apply("a",{href:s})));for(var h=i(),f=0;f<h.length;f++)(u=e(h[f])).attr(r),u.removeAttr("_moz_dirty");1==h.length&&t.$wp&&!l&&(e(h[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),t.selection.restore())}if(l){var m=t.popups.get("link.insert");m&&m.find("input:focus").blur(),t.image.edit(l)}else o()}function b(){a();var i=n();if(i){var o=t.popups.get("link.insert");o||(o=u()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",t.$sc);var s=(t.image?t.image.get():null)||e(i),r=s.offset().left+s.outerWidth()/2,l=s.offset().top+s.outerHeight();t.popups.show("link.insert",r,l,s.outerHeight())}}function y(){t.image&&t.image.get()?t.image.back():(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),n()&&t.$wp?(t.selection.restore(),a(),o()):"A"==t.el.tagName?(t.$el.focus(),o()):(t.popups.hide("link.insert"),t.toolbar.showInline()))}function w(){var e=t.image?t.image.getEl():null;if(e){var n=t.popups.get("link.insert");t.image.hasCaption()&&(e=e.find(".fr-img-wrap")),n||(n=u()),c(!0),t.popups.setContainer("link.insert",t.$sc);var i=e.offset().left+e.outerWidth(!0)/2,o=e.offset().top+e.outerHeight(!0);t.popups.show("link.insert",i,o,e.outerHeight())}}function _(i,s,a){void 0===a&&(a=t.opts.linkMultipleStyles),void 0===s&&(s=t.opts.linkStyles);var r=n();if(!r)return!1;if(!a){var l=Object.keys(s);l.splice(l.indexOf(i),1),e(r).removeClass(l.join(" "))}e(r).toggleClass(i),o()}return{_init:h,remove:p,showInsertPopup:d,usePredefined:f,insertCallback:m,insert:v,update:b,get:n,allSelected:i,back:y,imageLink:w,applyStyle:_}},e.FE.DefineIcon("insertLink",{NAME:"link"}),e.FE.RegisterShortcut(e.FE.KEYCODE.K,"insertLink",null,"K"),e.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FE.DefineIcon("linkOpen",{NAME:"external-link"}),e.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)},plugin:"link"}),e.FE.DefineIcon("linkEdit",{NAME:"edit"}),e.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.FE.DefineIcon("linkRemove",{NAME:"unlink"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();this.image&&this.image.get()||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))},plugin:"link"}),e.FE.DefineIcon("linkList",{NAME:"search"}),e.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+"</ul>"},callback:function(e,t){this.link.usePredefined(t)},plugin:"link"}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))},plugin:"link"}),e.FE.DefineIcon("imageLink",{NAME:"link"}),e.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?((t=e.prev()).hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):((t=e.prev()).hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))},plugin:"link"}),e.FE.DefineIcon("linkStyle",{NAME:"magic"}),e.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,n){var i=this.link.get();if(i){var o=e(i);n.find(".fr-command").each((function(){var t=e(this).data("param1"),n=o.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)}))}},plugin:"link"}),e.FE.PLUGINS.lists=function(t){function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function i(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function o(t,n){for(var i=[],o=0;o<t.length;o++){var s=t[o].parentNode;"LI"==t[o].tagName&&s.tagName!=n&&i.indexOf(s)<0&&i.push(s)}for(o=i.length-1;o>=0;o--){var a=e(i[o]);a.replaceWith("<"+n.toLowerCase()+">"+a.html()+"</"+n.toLowerCase()+">")}}function s(n,i){o(n,i);var s,a=t.html.defaultTag(),r=null;n.length&&(s="rtl"==t.opts.direction||"rtl"==e(n[0]).css("direction")?"margin-right":"margin-left");for(var l=0;l<n.length;l++)if("LI"!=n[l].tagName){var c=t.helpers.getPX(e(n[l]).css(s))||0;n[l].style.marginLeft=null,null===r&&(r=c);var d=r>0?"<"+i+' style="'+s+": "+r+'px;">':"<"+i+">",u="</"+i+">";for(c-=r;c/t.opts.indentMargin>0;)d+="<"+i+">",u+=u,c-=t.opts.indentMargin;a&&n[l].tagName.toLowerCase()==a?e(n[l]).replaceWith(d+"<li"+t.node.attributes(n[l])+">"+e(n[l]).html()+"</li>"+u):e(n[l]).wrap(d+"<li></li>"+u)}t.clean.lists()}function a(o){var s,a;for(s=o.length-1;s>=0;s--)for(a=s-1;a>=0;a--)if(e(o[a]).find(o[s]).length||o[a]==o[s]){o.splice(s,1);break}var r=[];for(s=0;s<o.length;s++){var l=e(o[s]),c=o[s].parentNode,d=l.attr("class");if(l.before(i(c.tagName)),"LI"==c.parentNode.tagName)l.before(i("LI")),l.after(n("LI"));else{var u="";d&&(u+=' class="'+d+'"');var p="rtl"==t.opts.direction||"rtl"==l.css("direction")?"margin-right":"margin-left";t.helpers.getPX(e(c).css(p))&&(u+=' style="'+p+":"+t.helpers.getPX(e(c).css(p))+'px;"'),u&&l.wrapInner("<"+t.html.defaultTag()+u+"></"+t.html.defaultTag()+">"),t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(n("LI")),l.prepend(i("LI"))}l.after(n(c.tagName)),"LI"==c.parentNode.tagName&&(c=c.parentNode.parentNode),r.indexOf(c)<0&&r.push(c)}for(s=0;s<r.length;s++){var h=e(r[s]),f=h.html();f=(f=f.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),h.replaceWith(t.node.openTagString(h.get(0))+f+t.node.closeTagString(h.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function r(e,t){for(var n=!0,i=0;i<e.length;i++){if("LI"!=e[i].tagName)return!1;e[i].parentNode.tagName!=t&&(n=!1)}return n}function l(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var n=t.selection.blocks(),i=0;i<n.length;i++)"LI"!=n[i].tagName&&"LI"==n[i].parentNode.tagName&&(n[i]=n[i].parentNode);t.selection.save(),r(n,e)?a(n):s(n,e),t.html.unwrap(),t.selection.restore()}function c(n,i){var o=e(t.selection.element());if(o.get(0)!=t.el){var s=o.get(0);(s="LI"!=s.tagName&&s.firstElementChild&&"LI"!=s.firstElementChild.tagName?o.parents("li").get(0):"LI"==s.tagName||s.firstElementChild?s.firstElementChild&&"LI"==s.firstElementChild.tagName?o.get(0).firstChild:o.get(0):o.parents("li").get(0))&&s.parentNode.tagName==i&&t.el.contains(s.parentNode)&&n.addClass("fr-active")}}function d(n){t.selection.save();for(var i=0;i<n.length;i++){var o=n[i].previousSibling;if(o){var s=e(n[i]).find("> ul, > ol").last().get(0);if(s){for(var a=e("<li>").prependTo(e(s)),r=t.node.contents(n[i])[0];r&&!t.node.isList(r);){var l=r.nextSibling;a.append(r),r=l}e(o).append(e(s)),e(n[i]).remove()}else{var c=e(o).find("> ul, > ol").last().get(0);if(c)e(c).append(e(n[i]));else{var d=e("<"+n[i].parentNode.tagName+">");e(o).append(d),d.append(e(n[i]))}}}}t.clean.lists(),t.selection.restore()}function u(e){t.selection.save(),a(e),t.selection.restore()}function p(e){if("indent"==e||"outdent"==e){for(var n=!1,i=t.selection.blocks(),o=[],s=0;s<i.length;s++)"LI"==i[s].tagName?(n=!0,o.push(i[s])):"LI"==i[s].parentNode.tagName&&(n=!0,o.push(i[s].parentNode));n&&("indent"==e?d(o):u(o))}}function h(){t.events.on("commands.after",p),t.events.on("keydown",(function(n){if(n.which==e.FE.KEYCODE.TAB){for(var i=t.selection.blocks(),o=[],s=0;s<i.length;s++)"LI"==i[s].tagName?o.push(i[s]):"LI"==i[s].parentNode.tagName&&o.push(i[s].parentNode);if(o.length>1||o.length&&(t.selection.info(o[0]).atStart||t.node.isEmpty(o[0])))return n.preventDefault(),n.stopPropagation(),n.shiftKey?u(o):d(o),!1}}),!0)}return{_init:h,format:l,refresh:c}},e.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),e.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),e.FE.DefineIcon("formatUL",{NAME:"list-ul"}),e.FE.DefineIcon("formatOL",{NAME:"list-ol"}),e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),e.FE.PLUGINS.paragraphFormat=function(t){function n(n,i){var o=t.html.defaultTag();if(i&&i.toLowerCase()!=o)if(n.find("ul, ol").length>0){var s=e("<"+i+">");n.prepend(s);for(var a=t.node.contents(n.get(0))[0];a&&["UL","OL"].indexOf(a.tagName)<0;){var r=a.nextSibling;s.append(a),a=r}}else n.html("<"+i+">"+n.html()+"</"+i+">")}function i(n,i){var o=t.html.defaultTag();i||(i='div class="fr-temp-div" data-empty="true"'),i.toLowerCase()==o?n.replaceWith(n.html()):n.replaceWith(e("<"+i+">").html(n.html()))}function o(n,i){var o=t.html.defaultTag();i||(i='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),i.toLowerCase()==o?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),n.replaceWith(n.html())):n.replaceWith(e("<"+i+">").html(n.html()))}function s(n,i){i||(i='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),n.replaceWith(e("<"+i+" "+t.node.attributes(n.get(0))+">").html(n.html()).removeAttr("data-empty"))}function a(a){"N"==a&&(a=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var r=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<r.length;l++)if(r[l].tagName!=a&&!t.node.isList(r[l])){var c=e(r[l]);"LI"==r[l].tagName?n(c,a):"LI"==r[l].parentNode.tagName&&r[l]?i(c,a):["TD","TH"].indexOf(r[l].parentNode.tagName)>=0?o(c,a):s(c,a)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each((function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()})),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()}function r(e,n){var i=t.selection.blocks();if(i.length){var o=i[0],s="N",a=t.html.defaultTag();o.tagName.toLowerCase()!=a&&o!=t.el&&(s=o.tagName),n.find('.fr-command[data-param1="'+s+'"]').addClass("fr-active").attr("aria-selected",!0)}else n.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function l(e){if(t.opts.paragraphFormatSelection){var n=t.selection.blocks();if(n.length){var i=n[0],o="N",s=t.html.defaultTag();i.tagName.toLowerCase()!=s&&i!=t.el&&(o=i.tagName),["LI","TD","TH"].indexOf(o)>=0&&(o="N"),e.find("> span").text(t.language.translate(t.opts.paragraphFormat[o]))}else e.find("> span").text(t.language.translate(t.opts.paragraphFormat.N))}}return{apply:a,refreshOnShow:r,refresh:l}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var n in t)if(t.hasOwnProperty(n)){var i=this.shortcuts.get("paragraphFormat."+n);i=i?'<span class="fr-shortcut">'+i+"</span>":"",e+='<li role="presentation"><'+("N"==n?this.html.defaultTag()||"DIV":n)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+("N"==n?this.html.defaultTag()||"DIV":n)+"></li>"}return e+"</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"}),e.extend(e.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),e.FE.PLUGINS.paragraphStyle=function(t){function n(n,i,o){void 0===i&&(i=t.opts.paragraphStyles),void 0===o&&(o=t.opts.paragraphMultipleStyles);var s="";o||((s=Object.keys(i)).splice(s.indexOf(n),1),s=s.join(" ")),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var a=t.selection.blocks();t.selection.save();for(var r=e(a[0]).hasClass(n),l=0;l<a.length;l++)e(a[l]).removeClass(s).toggleClass(n,!r),e(a[l]).hasClass("fr-temp-div")&&e(a[l]).removeClass("fr-temp-div"),""===e(a[l]).attr("class")&&e(a[l]).removeAttr("class");t.html.unwrap(),t.selection.restore()}function i(n,i){var o=t.selection.blocks();if(o.length){var s=e(o[0]);i.find(".fr-command").each((function(){var t=e(this).data("param1"),n=s.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)}))}}function o(){}return{_init:o,apply:n,refreshOnShow:i}},e.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command '+n+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),e.FE.DefineIcon("paragraphStyle",{NAME:"magic"}),e.FE.PLUGINS.print=function(e){function t(){var t=e.$el.html(),n=null;e.shared.print_iframe?n=e.shared.print_iframe:((n=document.createElement("iframe")).name="fr-print",n.style.position="fixed",n.style.top="0",n.style.left="-9999px",n.style.height="100%",n.style.width="0",n.style.overflow="hidden",n.style["z-index"]="2147483647",n.style.tabIndex="-1",document.body.appendChild(n),n.onload=function(){setTimeout((function(){e.events.disableBlur(),window.frames["fr-print"].focus(),window.frames["fr-print"].print(),e.$win.get(0).focus(),e.events.disableBlur(),e.events.focus()}),0)},e.events.on("shared.destroy",(function(){n.remove()})),e.shared.print_iframe=n);var i=n.contentWindow;i.document.open(),i.document.write("<!DOCTYPE html><html><head><title>"+document.title+"</title>"),Array.prototype.forEach.call(document.querySelectorAll("style"),(function(e){e=e.cloneNode(!0),i.document.write(e.outerHTML)}));var o=document.querySelectorAll("link[rel=stylesheet]");Array.prototype.forEach.call(o,(function(e){var t=document.createElement("link");t.rel=e.rel,t.href=e.href,t.media="print",t.type="text/css",t.media="all",i.document.write(t.outerHTML)})),i.document.write('</head><body style="text-align: '+("rtl"==e.opts.direction?"right":"left")+"; direction: "+e.opts.direction+';"><div class="fr-view">'),i.document.write(t),i.document.write("</div></body></html>"),i.document.close()}return{run:t}},e.FE.DefineIcon("print",{NAME:"print"}),e.FE.RegisterCommand("print",{title:"Print",undo:!1,focus:!1,plugin:"print",callback:function(){this.print.run()}}),e.extend(e.FE.DEFAULTS,{quickInsertButtons:["image","video","embedly","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),e.FE.QUICK_INSERT_BUTTONS={},e.FE.DefineIcon("quickInsert",{PATH:'<path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/>',template:"svg"}),e.FE.RegisterQuickInsertButton=function(t,n){e.FE.QUICK_INSERT_BUTTONS[t]=e.extend({undo:!0},n)},e.FE.RegisterQuickInsertButton("image",{icon:"insertImage",requiredPlugin:"image",title:"Insert Image",undo:!1,callback:function(){var t=this;t.shared.$qi_image_input||(t.shared.$qi_image_input=e('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),e("body:first").append(t.shared.$qi_image_input),t.events.$on(t.shared.$qi_image_input,"change",(function(){var t=e(this).data("inst");this.files&&(t.quickInsert.hide(),t.image.upload(this.files)),e(this).val("")}),!0)),t.$qi_image_input=t.shared.$qi_image_input,t.helpers.isMobile()&&t.selection.save(),t.$qi_image_input.data("inst",t).trigger("click")}}),e.FE.RegisterQuickInsertButton("video",{icon:"insertVideo",requiredPlugin:"video",title:"Insert Video",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of the video you want to insert."));e&&this.video.insertByURL(e)}}),e.FE.RegisterQuickInsertButton("embedly",{icon:"embedly",requiredPlugin:"embedly",title:"Embed URL",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of any web content you want to insert."));e&&this.embedly.add(e)}}),e.FE.RegisterQuickInsertButton("table",{icon:"insertTable",requiredPlugin:"table",title:"Insert Table",callback:function(){this.table.insert(2,2)}}),e.FE.RegisterQuickInsertButton("ol",{icon:"formatOL",requiredPlugin:"lists",title:"Ordered List",callback:function(){this.lists.format("OL")}}),e.FE.RegisterQuickInsertButton("ul",{icon:"formatUL",requiredPlugin:"lists",title:"Unordered List",callback:function(){this.lists.format("UL")}}),e.FE.RegisterQuickInsertButton("hr",{icon:"insertHR",title:"Insert Horizontal Line",callback:function(){this.commands.insertHR()}}),e.FE.PLUGINS.quickInsert=function(t){function n(e){var n,i,o;n=e.offset().top-t.$box.offset().top,i=0-d.outerWidth(),o=(d.outerHeight()-e.outerHeight())/2,t.opts.iframe&&(n+=t.$iframe.offset().top-t.helpers.scrollTop()),d.hasClass("fr-on")&&n>=0&&u.css("top",n-o),n>=0&&n-o<=t.$box.outerHeight()-e.outerHeight()?(d.hasClass("fr-hidden")&&(d.hasClass("fr-on")&&a(),d.removeClass("fr-hidden")),d.css("top",n-o)):d.hasClass("fr-visible")&&(d.addClass("fr-hidden"),r()),d.css("left",i)}function i(e){d||l(),d.hasClass("fr-on")&&r(),t.$box.append(d),n(e),d.data("tag",e),d.addClass("fr-visible")}function o(){if(t.core.hasFocus()){var n=t.selection.element();t.node.isBlock(n)||(n=t.node.blockParent(n)),n&&t.node.isEmpty(n)&&t.node.isElement(n.parentNode)&&t.opts.quickInsertTags.indexOf(n.tagName.toLowerCase())>=0?d&&d.data("tag").is(e(n))&&d.hasClass("fr-on")?r():t.selection.isCollapsed()&&i(e(n)):s()}}function s(){d&&(t.html.checkIfEmpty(),d.hasClass("fr-on")&&r(),d.removeClass("fr-visible fr-on"),d.css("left",-9999).css("top",-9999))}function a(n){if(n&&n.preventDefault(),d.hasClass("fr-on")&&!d.hasClass("fr-hidden"))r();else{if(!t.shared.$qi_helper){for(var i=t.opts.quickInsertButtons,o='<div class="fr-qi-helper">',s=0,a=0;a<i.length;a++){var l=e.FE.QUICK_INSERT_BUTTONS[i[a]];l&&(!l.requiredPlugin||e.FE.PLUGINS[l.requiredPlugin]&&t.opts.pluginsEnabled.indexOf(l.requiredPlugin)>=0)&&(o+='<a class="fr-btn fr-floating-btn" role="button" title="'+t.language.translate(l.title)+'" tabIndex="-1" data-cmd="'+i[a]+'" style="transition-delay: '+.025*s+++'s;">'+t.icon.create(l.icon)+"</a>")}o+="</div>",t.shared.$qi_helper=e(o),t.tooltip.bind(t.shared.$qi_helper,"> a.fr-btn")}(u=t.shared.$qi_helper).appendTo(t.$box),setTimeout((function(){u.css("top",parseFloat(d.css("top"))),u.css("left",parseFloat(d.css("left"))+d.outerWidth()),u.find("a").addClass("fr-size-1"),d.addClass("fr-on")}),10)}}function r(){var e=t.$box.find(".fr-qi-helper");e.length&&(e.find("a").removeClass("fr-size-1"),e.css("left",-9999),d.hasClass("fr-hidden")||d.removeClass("fr-on"))}function l(){t.shared.$quick_insert||(t.shared.$quick_insert=e('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Quick Insert")+'">'+t.icon.create("quickInsert")+"</a></div>")),d=t.shared.$quick_insert,t.tooltip.bind(t.$box,".fr-quick-insert > a.fr-floating-btn"),t.events.on("destroy",(function(){d.removeClass("fr-on").appendTo(e("body:first")).css("left",-9999).css("top",-9999),u&&(r(),u.appendTo(e("body:first")))}),!0),t.events.on("shared.destroy",(function(){d.html("").removeData().remove(),d=null,u&&(u.html("").removeData().remove(),u=null)}),!0),t.events.on("commands.before",s),t.events.on("commands.after",(function(){t.popups.areVisible()||o()})),t.events.bindClick(t.$box,".fr-quick-insert > a",a),t.events.bindClick(t.$box,".fr-qi-helper > a.fr-btn",(function(n){var i=e(n.currentTarget).data("cmd");e.FE.QUICK_INSERT_BUTTONS[i].callback.apply(t,[n.currentTarget]),e.FE.QUICK_INSERT_BUTTONS[i].undo&&t.undo.saveStep(),t.quickInsert.hide()})),t.events.$on(t.$wp,"scroll",(function(){d.hasClass("fr-visible")&&n(d.data("tag"))}))}function c(){if(!t.$wp)return!1;t.opts.iframe&&t.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),t.popups.onShow("image.edit",s),t.events.on("mouseup",o),t.helpers.isMobile()&&t.events.$on(e(t.o_doc),"selectionchange",o),t.events.on("blur",s),t.events.on("keyup",o),t.events.on("keydown",(function(){setTimeout((function(){o()}),0)}))}var d,u;return{_init:c,hide:s}},e.FE.PLUGINS.quote=function(t){function n(e){for(;e.parentNode&&e.parentNode!=t.el;)e=e.parentNode;return e}function i(){var i,o=t.selection.blocks();for(i=0;i<o.length;i++)o[i]=n(o[i]);t.selection.save();var s=e("<blockquote>");for(s.insertBefore(o[0]),i=0;i<o.length;i++)s.append(o[i]);t.html.unwrap(),t.selection.restore()}function o(){var n,i=t.selection.blocks();for(n=0;n<i.length;n++)"BLOCKQUOTE"!=i[n].tagName&&(i[n]=e(i[n]).parentsUntil(t.$el,"BLOCKQUOTE").get(0));for(t.selection.save(),n=0;n<i.length;n++)i[n]&&e(i[n]).replaceWith(i[n].innerHTML);t.html.unwrap(),t.selection.restore()}function s(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore(),"increase"==e?i():"decrease"==e&&o()}return{apply:s}},e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),e.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),e.FE.DefineIcon("quote",{NAME:"quote-left"}),e.extend(e.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.FE.PLUGINS.save=function(t){function n(e,n){t.events.trigger("save.error",[{code:e,message:h[e]},n])}function i(i){if(void 0===i&&(i=t.html.get()),!1===t.events.trigger("save.before"))return!1;if(t.opts.saveURL){var o={};for(var s in t.opts.saveParams)if(t.opts.saveParams.hasOwnProperty(s)){var a=t.opts.saveParams[s];o[s]="function"==typeof a?a.call(this):a}var r={};r[t.opts.saveParam]=i,e.ajax({type:t.opts.saveMethod,url:t.opts.saveURL,data:e.extend(r,o),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done((function(e){c=i,t.events.trigger("save.after",[e])})).fail((function(e){n(p,e.response||e.responseText)}))}else n(u)}function o(){clearTimeout(l),l=setTimeout((function(){var e=t.html.get();(c!=e||d)&&(c=e,d=!1,i(e))}),t.opts.saveInterval)}function s(){o(),d=!1}function a(){d=!0}function r(){t.opts.saveInterval&&(c=t.html.get(),t.events.on("contentChanged",o),t.events.on("keydown destroy",(function(){clearTimeout(l)})))}var l=null,c=null,d=!1,u=1,p=2,h={};return h[u]="Missing saveURL option.",h[p]="Something went wrong during save.",{_init:r,save:i,reset:s,force:a}},e.FE.DefineIcon("save",{NAME:"floppy-o"}),e.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"}),e.extend(e.FE.DEFAULTS,{specialCharactersSets:[{title:"Latin",list:[{char:"&iexcl;",desc:"INVERTED EXCLAMATION MARK"},{char:"&cent;",desc:"CENT SIGN"},{char:"&pound;",desc:"POUND SIGN"},{char:"&curren;",desc:"CURRENCY SIGN"},{char:"&yen;",desc:"YEN SIGN"},{char:"&brvbar;",desc:"BROKEN BAR"},{char:"&sect;",desc:"SECTION SIGN"},{char:"&uml;",desc:"DIAERESIS"},{char:"&copy;",desc:"COPYRIGHT SIGN"},{char:"&trade;",desc:"TRADEMARK SIGN"},{char:"&ordf;",desc:"FEMININE ORDINAL INDICATOR"},{char:"&laquo;",desc:"LEFT-POINTING DOUBLE ANGLE QUOTATION MARK"},{char:"&not;",desc:"NOT SIGN"},{char:"&reg;",desc:"REGISTERED SIGN"},{char:"&macr;",desc:"MACRON"},{char:"&deg;",desc:"DEGREE SIGN"},{char:"&plusmn;",desc:"PLUS-MINUS SIGN"},{char:"&sup2;",desc:"SUPERSCRIPT TWO"},{char:"&sup3;",desc:"SUPERSCRIPT THREE"},{char:"&acute;",desc:"ACUTE ACCENT"},{char:"&micro;",desc:"MICRO SIGN"},{char:"&para;",desc:"PILCROW SIGN"},{char:"&middot;",desc:"MIDDLE DOT"},{char:"&cedil;",desc:"CEDILLA"},{char:"&sup1;",desc:"SUPERSCRIPT ONE"},{char:"&ordm;",desc:"MASCULINE ORDINAL INDICATOR"},{char:"&raquo;",desc:"RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK"},{char:"&frac14;",desc:"VULGAR FRACTION ONE QUARTER"},{char:"&frac12;",desc:"VULGAR FRACTION ONE HALF"},{char:"&frac34;",desc:"VULGAR FRACTION THREE QUARTERS"},{char:"&iquest;",desc:"INVERTED QUESTION MARK"},{char:"&Agrave;",desc:"LATIN CAPITAL LETTER A WITH GRAVE"},{char:"&Aacute;",desc:"LATIN CAPITAL LETTER A WITH ACUTE"},{char:"&Acirc;",desc:"LATIN CAPITAL LETTER A WITH CIRCUMFLEX"},{char:"&Atilde;",desc:"LATIN CAPITAL LETTER A WITH TILDE"},{char:"&Auml;",desc:"LATIN CAPITAL LETTER A WITH DIAERESIS "},{char:"&Aring;",desc:"LATIN CAPITAL LETTER A WITH RING ABOVE"},{char:"&AElig;",desc:"LATIN CAPITAL LETTER AE"},{char:"&Ccedil;",desc:"LATIN CAPITAL LETTER C WITH CEDILLA"},{char:"&Egrave;",desc:"LATIN CAPITAL LETTER E WITH GRAVE"},{char:"&Eacute;",desc:"LATIN CAPITAL LETTER E WITH ACUTE"},{char:"&Ecirc;",desc:"LATIN CAPITAL LETTER E WITH CIRCUMFLEX"},{char:"&Euml;",desc:"LATIN CAPITAL LETTER E WITH DIAERESIS"},{char:"&Igrave;",desc:"LATIN CAPITAL LETTER I WITH GRAVE"},{char:"&Iacute;",desc:"LATIN CAPITAL LETTER I WITH ACUTE"},{char:"&Icirc;",desc:"LATIN CAPITAL LETTER I WITH CIRCUMFLEX"},{char:"&Iuml;",desc:"LATIN CAPITAL LETTER I WITH DIAERESIS"},{char:"&ETH;",desc:"LATIN CAPITAL LETTER ETH"},{char:"&Ntilde;",desc:"LATIN CAPITAL LETTER N WITH TILDE"},{char:"&Ograve;",desc:"LATIN CAPITAL LETTER O WITH GRAVE"},{char:"&Oacute;",desc:"LATIN CAPITAL LETTER O WITH ACUTE"},{char:"&Ocirc;",desc:"LATIN CAPITAL LETTER O WITH CIRCUMFLEX"},{char:"&Otilde;",desc:"LATIN CAPITAL LETTER O WITH TILDE"},{char:"&Ouml;",desc:"LATIN CAPITAL LETTER O WITH DIAERESIS"},{char:"&times;",desc:"MULTIPLICATION SIGN"},{char:"&Oslash;",desc:"LATIN CAPITAL LETTER O WITH STROKE"},{char:"&Ugrave;",desc:"LATIN CAPITAL LETTER U WITH GRAVE"},{char:"&Uacute;",desc:"LATIN CAPITAL LETTER U WITH ACUTE"},{char:"&Ucirc;",desc:"LATIN CAPITAL LETTER U WITH CIRCUMFLEX"},{char:"&Uuml;",desc:"LATIN CAPITAL LETTER U WITH DIAERESIS"},{char:"&Yacute;",desc:"LATIN CAPITAL LETTER Y WITH ACUTE"},{char:"&THORN;",desc:"LATIN CAPITAL LETTER THORN"},{char:"&szlig;",desc:"LATIN SMALL LETTER SHARP S"},{char:"&agrave;",desc:"LATIN SMALL LETTER A WITH GRAVE"},{char:"&aacute;",desc:"LATIN SMALL LETTER A WITH ACUTE "},{char:"&acirc;",desc:"LATIN SMALL LETTER A WITH CIRCUMFLEX"},{char:"&atilde;",desc:"LATIN SMALL LETTER A WITH TILDE"},{char:"&auml;",desc:"LATIN SMALL LETTER A WITH DIAERESIS"},{char:"&aring;",desc:"LATIN SMALL LETTER A WITH RING ABOVE"},{char:"&aelig;",desc:"LATIN SMALL LETTER AE"},{char:"&ccedil;",desc:"LATIN SMALL LETTER C WITH CEDILLA"},{char:"&egrave;",desc:"LATIN SMALL LETTER E WITH GRAVE"},{char:"&eacute;",desc:"LATIN SMALL LETTER E WITH ACUTE"},{char:"&ecirc;",desc:"LATIN SMALL LETTER E WITH CIRCUMFLEX"},{char:"&euml;",desc:"LATIN SMALL LETTER E WITH DIAERESIS"},{char:"&igrave;",desc:"LATIN SMALL LETTER I WITH GRAVE"},{char:"&iacute;",desc:"LATIN SMALL LETTER I WITH ACUTE"},{char:"&icirc;",desc:"LATIN SMALL LETTER I WITH CIRCUMFLEX"},{char:"&iuml;",desc:"LATIN SMALL LETTER I WITH DIAERESIS"},{char:"&eth;",desc:"LATIN SMALL LETTER ETH"},{char:"&ntilde;",desc:"LATIN SMALL LETTER N WITH TILDE"},{char:"&ograve;",desc:"LATIN SMALL LETTER O WITH GRAVE"},{char:"&oacute;",desc:"LATIN SMALL LETTER O WITH ACUTE"},{char:"&ocirc;",desc:"LATIN SMALL LETTER O WITH CIRCUMFLEX"},{char:"&otilde;",desc:"LATIN SMALL LETTER O WITH TILDE"},{char:"&ouml;",desc:"LATIN SMALL LETTER O WITH DIAERESIS"},{char:"&divide;",desc:"DIVISION SIGN"},{char:"&oslash;",desc:"LATIN SMALL LETTER O WITH STROKE"},{char:"&ugrave;",desc:"LATIN SMALL LETTER U WITH GRAVE"},{char:"&uacute;",desc:"LATIN SMALL LETTER U WITH ACUTE"},{char:"&ucirc;",desc:"LATIN SMALL LETTER U WITH CIRCUMFLEX"},{char:"&uuml;",desc:"LATIN SMALL LETTER U WITH DIAERESIS"},{char:"&yacute;",desc:"LATIN SMALL LETTER Y WITH ACUTE"},{char:"&thorn;",desc:"LATIN SMALL LETTER THORN"},{char:"&yuml;",desc:"LATIN SMALL LETTER Y WITH DIAERESIS"}]},{title:"Greek",list:[{char:"&Alpha;",desc:"GREEK CAPITAL LETTER ALPHA"},{char:"&Beta;",desc:"GREEK CAPITAL LETTER BETA"},{char:"&Gamma;",desc:"GREEK CAPITAL LETTER GAMMA"},{char:"&Delta;",desc:"GREEK CAPITAL LETTER DELTA"},{char:"&Epsilon;",desc:"GREEK CAPITAL LETTER EPSILON"},{char:"&Zeta;",desc:"GREEK CAPITAL LETTER ZETA"},{char:"&Eta;",desc:"GREEK CAPITAL LETTER ETA"},{char:"&Theta;",desc:"GREEK CAPITAL LETTER THETA"},{char:"&Iota;",desc:"GREEK CAPITAL LETTER IOTA"},{char:"&Kappa;",desc:"GREEK CAPITAL LETTER KAPPA"},{char:"&Lambda;",desc:"GREEK CAPITAL LETTER LAMBDA"},{char:"&Mu;",desc:"GREEK CAPITAL LETTER MU"},{char:"&Nu;",desc:"GREEK CAPITAL LETTER NU"},{char:"&Xi;",desc:"GREEK CAPITAL LETTER XI"},{char:"&Omicron;",desc:"GREEK CAPITAL LETTER OMICRON"},{char:"&Pi;",desc:"GREEK CAPITAL LETTER PI"},{char:"&Rho;",desc:"GREEK CAPITAL LETTER RHO"},{char:"&Sigma;",desc:"GREEK CAPITAL LETTER SIGMA"},{char:"&Tau;",desc:"GREEK CAPITAL LETTER TAU"},{char:"&Upsilon;",desc:"GREEK CAPITAL LETTER UPSILON"},{char:"&Phi;",desc:"GREEK CAPITAL LETTER PHI"},{char:"&Chi;",desc:"GREEK CAPITAL LETTER CHI"},{char:"&Psi;",desc:"GREEK CAPITAL LETTER PSI"},{char:"&Omega;",desc:"GREEK CAPITAL LETTER OMEGA"},{char:"&alpha;",desc:"GREEK SMALL LETTER ALPHA"},{char:"&beta;",desc:"GREEK SMALL LETTER BETA"},{char:"&gamma;",desc:"GREEK SMALL LETTER GAMMA"},{char:"&delta;",desc:"GREEK SMALL LETTER DELTA"},{char:"&epsilon;",desc:"GREEK SMALL LETTER EPSILON"},{char:"&zeta;",desc:"GREEK SMALL LETTER ZETA"},{char:"&eta;",desc:"GREEK SMALL LETTER ETA"},{char:"&theta;",desc:"GREEK SMALL LETTER THETA"},{char:"&iota;",desc:"GREEK SMALL LETTER IOTA"},{char:"&kappa;",desc:"GREEK SMALL LETTER KAPPA"},{char:"&lambda;",desc:"GREEK SMALL LETTER LAMBDA"},{char:"&mu;",desc:"GREEK SMALL LETTER MU"},{char:"&nu;",desc:"GREEK SMALL LETTER NU"},{char:"&xi;",desc:"GREEK SMALL LETTER XI"},{char:"&omicron;",desc:"GREEK SMALL LETTER OMICRON"},{char:"&pi;",desc:"GREEK SMALL LETTER PI"},{char:"&rho;",desc:"GREEK SMALL LETTER RHO"},{char:"&sigmaf;",desc:"GREEK SMALL LETTER FINAL SIGMA"},{char:"&sigma;",desc:"GREEK SMALL LETTER SIGMA"},{char:"&tau;",desc:"GREEK SMALL LETTER TAU"},{char:"&upsilon;",desc:"GREEK SMALL LETTER UPSILON"},{char:"&phi;",desc:"GREEK SMALL LETTER PHI"},{char:"&chi;",desc:"GREEK SMALL LETTER CHI"},{char:"&psi;",desc:"GREEK SMALL LETTER PSI"},{char:"&omega;",desc:"GREEK SMALL LETTER OMEGA"},{char:"&thetasym;",desc:"GREEK THETA SYMBOL"},{char:"&upsih;",desc:"GREEK UPSILON WITH HOOK SYMBOL"},{char:"&straightphi;",desc:"GREEK PHI SYMBOL"},{char:"&piv;",desc:"GREEK PI SYMBOL"},{char:"&Gammad;",desc:"GREEK LETTER DIGAMMA"},{char:"&gammad;",desc:"GREEK SMALL LETTER DIGAMMA"},{char:"&varkappa;",desc:"GREEK KAPPA SYMBOL"},{char:"&varrho;",desc:"GREEK RHO SYMBOL"},{char:"&straightepsilon;",desc:"GREEK LUNATE EPSILON SYMBOL"},{char:"&backepsilon;",desc:"GREEK REVERSED LUNATE EPSILON SYMBOL"}]},{title:"Cyrillic",list:[{char:"&#x400",desc:"CYRILLIC CAPITAL LETTER IE WITH GRAVE"},{char:"&#x401",desc:"CYRILLIC CAPITAL LETTER IO"},{char:"&#x402",desc:"CYRILLIC CAPITAL LETTER DJE"},{char:"&#x403",desc:"CYRILLIC CAPITAL LETTER GJE"},{char:"&#x404",desc:"CYRILLIC CAPITAL LETTER UKRAINIAN IE"},{char:"&#x405",desc:"CYRILLIC CAPITAL LETTER DZE"},{char:"&#x406",desc:"CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I"},{char:"&#x407",desc:"CYRILLIC CAPITAL LETTER YI"},{char:"&#x408",desc:"CYRILLIC CAPITAL LETTER JE"},{char:"&#x409",desc:"CYRILLIC CAPITAL LETTER LJE"},{char:"&#x40A",desc:"CYRILLIC CAPITAL LETTER NJE"},{char:"&#x40B",desc:"CYRILLIC CAPITAL LETTER TSHE"},{char:"&#x40C",desc:"CYRILLIC CAPITAL LETTER KJE"},{char:"&#x40D",desc:"CYRILLIC CAPITAL LETTER I WITH GRAVE"},{char:"&#x40E",desc:"CYRILLIC CAPITAL LETTER SHORT U"},{char:"&#x40F",desc:"CYRILLIC CAPITAL LETTER DZHE"},{char:"&#x410",desc:"CYRILLIC CAPITAL LETTER A"},{char:"&#x411",desc:"CYRILLIC CAPITAL LETTER BE"},{char:"&#x412",desc:"CYRILLIC CAPITAL LETTER VE"},{char:"&#x413",desc:"CYRILLIC CAPITAL LETTER GHE"},{char:"&#x414",desc:"CYRILLIC CAPITAL LETTER DE"},{char:"&#x415",desc:"CYRILLIC CAPITAL LETTER IE"},{char:"&#x416",desc:"CYRILLIC CAPITAL LETTER ZHE"},{char:"&#x417",desc:"CYRILLIC CAPITAL LETTER ZE"},{char:"&#x418",desc:"CYRILLIC CAPITAL LETTER I"},{char:"&#x419",desc:"CYRILLIC CAPITAL LETTER SHORT I"},{char:"&#x41A",desc:"CYRILLIC CAPITAL LETTER KA"},{char:"&#x41B",desc:"CYRILLIC CAPITAL LETTER EL"},{char:"&#x41C",desc:"CYRILLIC CAPITAL LETTER EM"},{char:"&#x41D",desc:"CYRILLIC CAPITAL LETTER EN"},{char:"&#x41E",desc:"CYRILLIC CAPITAL LETTER O"},{char:"&#x41F",desc:"CYRILLIC CAPITAL LETTER PE"},{char:"&#x420",desc:"CYRILLIC CAPITAL LETTER ER"},{char:"&#x421",desc:"CYRILLIC CAPITAL LETTER ES"},{char:"&#x422",desc:"CYRILLIC CAPITAL LETTER TE"},{char:"&#x423",desc:"CYRILLIC CAPITAL LETTER U"},{char:"&#x424",desc:"CYRILLIC CAPITAL LETTER EF"},{char:"&#x425",desc:"CYRILLIC CAPITAL LETTER HA"},{char:"&#x426",desc:"CYRILLIC CAPITAL LETTER TSE"},{char:"&#x427",desc:"CYRILLIC CAPITAL LETTER CHE"},{char:"&#x428",desc:"CYRILLIC CAPITAL LETTER SHA"},{char:"&#x429",desc:"CYRILLIC CAPITAL LETTER SHCHA"},{char:"&#x42A",desc:"CYRILLIC CAPITAL LETTER HARD SIGN"},{char:"&#x42B",desc:"CYRILLIC CAPITAL LETTER YERU"},{char:"&#x42C",desc:"CYRILLIC CAPITAL LETTER SOFT SIGN"},{char:"&#x42D",desc:"CYRILLIC CAPITAL LETTER E"},{char:"&#x42E",desc:"CYRILLIC CAPITAL LETTER YU"},{char:"&#x42F",desc:"CYRILLIC CAPITAL LETTER YA"},{char:"&#x430",desc:"CYRILLIC SMALL LETTER A"},{char:"&#x431",desc:"CYRILLIC SMALL LETTER BE"},{char:"&#x432",desc:"CYRILLIC SMALL LETTER VE"},{char:"&#x433",desc:"CYRILLIC SMALL LETTER GHE"},{char:"&#x434",desc:"CYRILLIC SMALL LETTER DE"},{char:"&#x435",desc:"CYRILLIC SMALL LETTER IE"},{char:"&#x436",desc:"CYRILLIC SMALL LETTER ZHE"},{char:"&#x437",desc:"CYRILLIC SMALL LETTER ZE"},{char:"&#x438",desc:"CYRILLIC SMALL LETTER I"},{char:"&#x439",desc:"CYRILLIC SMALL LETTER SHORT I"},{char:"&#x43A",desc:"CYRILLIC SMALL LETTER KA"},{char:"&#x43B",desc:"CYRILLIC SMALL LETTER EL"},{char:"&#x43C",desc:"CYRILLIC SMALL LETTER EM"},{char:"&#x43D",desc:"CYRILLIC SMALL LETTER EN"},{char:"&#x43E",desc:"CYRILLIC SMALL LETTER O"},{char:"&#x43F",desc:"CYRILLIC SMALL LETTER PE"},{char:"&#x440",desc:"CYRILLIC SMALL LETTER ER"},{char:"&#x441",desc:"CYRILLIC SMALL LETTER ES"},{char:"&#x442",desc:"CYRILLIC SMALL LETTER TE"},{char:"&#x443",desc:"CYRILLIC SMALL LETTER U"},{char:"&#x444",desc:"CYRILLIC SMALL LETTER EF"},{char:"&#x445",desc:"CYRILLIC SMALL LETTER HA"},{char:"&#x446",desc:"CYRILLIC SMALL LETTER TSE"},{char:"&#x447",desc:"CYRILLIC SMALL LETTER CHE"},{char:"&#x448",desc:"CYRILLIC SMALL LETTER SHA"},{char:"&#x449",desc:"CYRILLIC SMALL LETTER SHCHA"},{char:"&#x44A",desc:"CYRILLIC SMALL LETTER HARD SIGN"},{char:"&#x44B",desc:"CYRILLIC SMALL LETTER YERU"},{char:"&#x44C",desc:"CYRILLIC SMALL LETTER SOFT SIGN"},{char:"&#x44D",desc:"CYRILLIC SMALL LETTER E"},{char:"&#x44E",desc:"CYRILLIC SMALL LETTER YU"},{char:"&#x44F",desc:"CYRILLIC SMALL LETTER YA"},{char:"&#x450",desc:"CYRILLIC SMALL LETTER IE WITH GRAVE"},{char:"&#x451",desc:"CYRILLIC SMALL LETTER IO"},{char:"&#x452",desc:"CYRILLIC SMALL LETTER DJE"},{char:"&#x453",desc:"CYRILLIC SMALL LETTER GJE"},{char:"&#x454",desc:"CYRILLIC SMALL LETTER UKRAINIAN IE"},{char:"&#x455",desc:"CYRILLIC SMALL LETTER DZE"},{char:"&#x456",desc:"CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I"},{char:"&#x457",desc:"CYRILLIC SMALL LETTER YI"},{char:"&#x458",desc:"CYRILLIC SMALL LETTER JE"},{char:"&#x459",desc:"CYRILLIC SMALL LETTER LJE"},{char:"&#x45A",desc:"CYRILLIC SMALL LETTER NJE"},{char:"&#x45B",desc:"CYRILLIC SMALL LETTER TSHE"},{char:"&#x45C",desc:"CYRILLIC SMALL LETTER KJE"},{char:"&#x45D",desc:"CYRILLIC SMALL LETTER I WITH GRAVE"},{char:"&#x45E",desc:"CYRILLIC SMALL LETTER SHORT U"},{char:"&#x45F",desc:"CYRILLIC SMALL LETTER DZHE"}]},{title:"Punctuation",list:[{char:"&ndash;",desc:"EN DASH"},{char:"&mdash;",desc:"EM DASH"},{char:"&lsquo;",desc:"LEFT SINGLE QUOTATION MARK"},{char:"&rsquo;",desc:"RIGHT SINGLE QUOTATION MARK"},{char:"&sbquo;",desc:"SINGLE LOW-9 QUOTATION MARK"},{char:"&ldquo;",desc:"LEFT DOUBLE QUOTATION MARK"},{char:"&rdquo;",desc:"RIGHT DOUBLE QUOTATION MARK"},{char:"&bdquo;",desc:"DOUBLE LOW-9 QUOTATION MARK"},{char:"&dagger;",desc:"DAGGER"},{char:"&Dagger;",desc:"DOUBLE DAGGER"},{char:"&bull;",desc:"BULLET"},{char:"&hellip;",desc:"HORIZONTAL ELLIPSIS"},{char:"&permil;",desc:"PER MILLE SIGN"},{char:"&prime;",desc:"PRIME"},{char:"&Prime;",desc:"DOUBLE PRIME"},{char:"&lsaquo;",desc:"SINGLE LEFT-POINTING ANGLE QUOTATION MARK"},{char:"&rsaquo;",desc:"SINGLE RIGHT-POINTING ANGLE QUOTATION MARK"},{char:"&oline;",desc:"OVERLINE"},{char:"&frasl;",desc:"FRACTION SLASH"}]},{title:"Currency",list:[{char:"&#x20A0",desc:"EURO-CURRENCY SIGN"},{char:"&#x20A1",desc:"COLON SIGN"},{char:"&#x20A2",desc:"CRUZEIRO SIGN"},{char:"&#x20A3",desc:"FRENCH FRANC SIGN"},{char:"&#x20A4",desc:"LIRA SIGN"},{char:"&#x20A5",desc:"MILL SIGN"},{char:"&#x20A6",desc:"NAIRA SIGN"},{char:"&#x20A7",desc:"PESETA SIGN"},{char:"&#x20A8",desc:"RUPEE SIGN"},{char:"&#x20A9",desc:"WON SIGN"},{char:"&#x20AA",desc:"NEW SHEQEL SIGN"},{char:"&#x20AB",desc:"DONG SIGN"},{char:"&#x20AC",desc:"EURO SIGN"},{char:"&#x20AD",desc:"KIP SIGN"},{char:"&#x20AE",desc:"TUGRIK SIGN"},{char:"&#x20AF",desc:"DRACHMA SIGN"},{char:"&#x20B0",desc:"GERMAN PENNY SYMBOL"},{char:"&#x20B1",desc:"PESO SIGN"},{char:"&#x20B2",desc:"GUARANI SIGN"},{char:"&#x20B3",desc:"AUSTRAL SIGN"},{char:"&#x20B4",desc:"HRYVNIA SIGN"},{char:"&#x20B5",desc:"CEDI SIGN"},{char:"&#x20B6",desc:"LIVRE TOURNOIS SIGN"},{char:"&#x20B7",desc:"SPESMILO SIGN"},{char:"&#x20B8",desc:"TENGE SIGN"},{char:"&#x20B9",desc:"INDIAN RUPEE SIGN"}]},{title:"Arrows",list:[{char:"&#x2190",desc:"LEFTWARDS ARROW"},{char:"&#x2191",desc:"UPWARDS ARROW"},{char:"&#x2192",desc:"RIGHTWARDS ARROW"},{char:"&#x2193",desc:"DOWNWARDS ARROW"},{char:"&#x2194",desc:"LEFT RIGHT ARROW"},{char:"&#x2195",desc:"UP DOWN ARROW"},{char:"&#x2196",desc:"NORTH WEST ARROW"},{char:"&#x2197",desc:"NORTH EAST ARROW"},{char:"&#x2198",desc:"SOUTH EAST ARROW"},{char:"&#x2199",desc:"SOUTH WEST ARROW"},{char:"&#x219A",desc:"LEFTWARDS ARROW WITH STROKE"},{char:"&#x219B",desc:"RIGHTWARDS ARROW WITH STROKE"},{char:"&#x219C",desc:"LEFTWARDS WAVE ARROW"},{char:"&#x219D",desc:"RIGHTWARDS WAVE ARROW"},{char:"&#x219E",desc:"LEFTWARDS TWO HEADED ARROW"},{char:"&#x219F",desc:"UPWARDS TWO HEADED ARROW"},{char:"&#x21A0",desc:"RIGHTWARDS TWO HEADED ARROW"},{char:"&#x21A1",desc:"DOWNWARDS TWO HEADED ARROW"},{char:"&#x21A2",desc:"LEFTWARDS ARROW WITH TAIL"},{char:"&#x21A3",desc:"RIGHTWARDS ARROW WITH TAIL"},{char:"&#x21A4",desc:"LEFTWARDS ARROW FROM BAR"},{char:"&#x21A5",desc:"UPWARDS ARROW FROM BAR"},{char:"&#x21A6",desc:"RIGHTWARDS ARROW FROM BAR"},{char:"&#x21A7",desc:"DOWNWARDS ARROW FROM BAR"},{char:"&#x21A8",desc:"UP DOWN ARROW WITH BASE"},{char:"&#x21A9",desc:"LEFTWARDS ARROW WITH HOOK"},{char:"&#x21AA",desc:"RIGHTWARDS ARROW WITH HOOK"},{char:"&#x21AB",desc:"LEFTWARDS ARROW WITH LOOP"},{char:"&#x21AC",desc:"RIGHTWARDS ARROW WITH LOOP"},{char:"&#x21AD",desc:"LEFT RIGHT WAVE ARROW"},{char:"&#x21AE",desc:"LEFT RIGHT ARROW WITH STROKE"},{char:"&#x21AF",desc:"DOWNWARDS ZIGZAG ARROW"},{char:"&#x21B0",desc:"UPWARDS ARROW WITH TIP LEFTWARDS"},{char:"&#x21B1",desc:"UPWARDS ARROW WITH TIP RIGHTWARDS"},{char:"&#x21B2",desc:"DOWNWARDS ARROW WITH TIP LEFTWARDS"},{char:"&#x21B3",desc:"DOWNWARDS ARROW WITH TIP RIGHTWARDS"},{char:"&#x21B4",desc:"RIGHTWARDS ARROW WITH CORNER DOWNWARDS"},{char:"&#x21B5",desc:"DOWNWARDS ARROW WITH CORNER LEFTWARDS"},{char:"&#x21B6",desc:"ANTICLOCKWISE TOP SEMICIRCLE ARROW"},{char:"&#x21B7",desc:"CLOCKWISE TOP SEMICIRCLE ARROW"},{char:"&#x21B8",desc:"NORTH WEST ARROW TO LONG BAR"},{char:"&#x21B9",desc:"LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR"},{char:"&#x21BA",desc:"ANTICLOCKWISE OPEN CIRCLE ARROW"},{char:"&#x21BB",desc:"CLOCKWISE OPEN CIRCLE ARROW"},{char:"&#x21BC",desc:"LEFTWARDS HARPOON WITH BARB UPWARDS"},{char:"&#x21BD",desc:"LEFTWARDS HARPOON WITH BARB DOWNWARDS"},{char:"&#x21BE",desc:"UPWARDS HARPOON WITH BARB RIGHTWARDS"},{char:"&#x21BF",desc:"UPWARDS HARPOON WITH BARB LEFTWARDS"},{char:"&#x21C0",desc:"RIGHTWARDS HARPOON WITH BARB UPWARDS"},{char:"&#x21C1",desc:"RIGHTWARDS HARPOON WITH BARB DOWNWARDS"},{char:"&#x21C2",desc:"DOWNWARDS HARPOON WITH BARB RIGHTWARDS"},{char:"&#x21C3",desc:"DOWNWARDS HARPOON WITH BARB LEFTWARDS"},{char:"&#x21C4",desc:"RIGHTWARDS ARROW OVER LEFTWARDS ARROW"},{char:"&#x21C5",desc:"UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW"},{char:"&#x21C6",desc:"LEFTWARDS ARROW OVER RIGHTWARDS ARROW"},{char:"&#x21C7",desc:"LEFTWARDS PAIRED ARROWS"},{char:"&#x21C8",desc:"UPWARDS PAIRED ARROWS"},{char:"&#x21C9",desc:"RIGHTWARDS PAIRED ARROWS"},{char:"&#x21CA",desc:"DOWNWARDS PAIRED ARROWS"},{char:"&#x21CB",desc:"LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON"},{char:"&#x21CC",desc:"RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON"},{char:"&#x21CD",desc:"LEFTWARDS DOUBLE ARROW WITH STROKE"},{char:"&#x21CE",desc:"LEFT RIGHT DOUBLE ARROW WITH STROKE"},{char:"&#x21CF",desc:"RIGHTWARDS DOUBLE ARROW WITH STROKE"},{char:"&#x21D0",desc:"LEFTWARDS DOUBLE ARROW"},{char:"&#x21D1",desc:"UPWARDS DOUBLE ARROW"},{char:"&#x21D2",desc:"RIGHTWARDS DOUBLE ARROW"},{char:"&#x21D3",desc:"DOWNWARDS DOUBLE ARROW"},{char:"&#x21D4",desc:"LEFT RIGHT DOUBLE ARROW"},{char:"&#x21D5",desc:"UP DOWN DOUBLE ARROW"},{char:"&#x21D6",desc:"NORTH WEST DOUBLE ARROW"},{char:"&#x21D7",desc:"NORTH EAST DOUBLE ARROW"},{char:"&#x21D8",desc:"SOUTH EAST DOUBLE ARROW"},{char:"&#x21D9",desc:"SOUTH WEST DOUBLE ARROW"},{char:"&#x21DA",desc:"LEFTWARDS TRIPLE ARROW"},{char:"&#x21DB",desc:"RIGHTWARDS TRIPLE ARROW"},{char:"&#x21DC",desc:"LEFTWARDS SQUIGGLE ARROW"},{char:"&#x21DD",desc:"RIGHTWARDS SQUIGGLE ARROW"},{char:"&#x21DE",desc:"UPWARDS ARROW WITH DOUBLE STROKE"},{char:"&#x21DF",desc:"DOWNWARDS ARROW WITH DOUBLE STROKE"},{char:"&#x21E0",desc:"LEFTWARDS DASHED ARROW"},{char:"&#x21E1",desc:"UPWARDS DASHED ARROW"},{char:"&#x21E2",desc:"RIGHTWARDS DASHED ARROW"},{char:"&#x21E3",desc:"DOWNWARDS DASHED ARROW"},{char:"&#x21E4",desc:"LEFTWARDS ARROW TO BAR"},{char:"&#x21E5",desc:"RIGHTWARDS ARROW TO BAR"},{char:"&#x21E6",desc:"LEFTWARDS WHITE ARROW"},{char:"&#x21E7",desc:"UPWARDS WHITE ARROW"},{char:"&#x21E8",desc:"RIGHTWARDS WHITE ARROW"},{char:"&#x21E9",desc:"DOWNWARDS WHITE ARROW"},{char:"&#x21EA",desc:"UPWARDS WHITE ARROW FROM BAR"},{char:"&#x21EB",desc:"UPWARDS WHITE ARROW ON PEDESTAL"},{char:"&#x21EC",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR"},{char:"&#x21ED",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR"},{char:"&#x21EE",desc:"UPWARDS WHITE DOUBLE ARROW"},{char:"&#x21EF",desc:"UPWARDS WHITE DOUBLE ARROW ON PEDESTAL"},{char:"&#x21F0",desc:"RIGHTWARDS WHITE ARROW FROM WALL"},{char:"&#x21F1",desc:"NORTH WEST ARROW TO CORNER"},{char:"&#x21F2",desc:"SOUTH EAST ARROW TO CORNER"},{char:"&#x21F3",desc:"UP DOWN WHITE ARROW"},{char:"&#x21F4",desc:"RIGHT ARROW WITH SMALL CIRCLE"},{char:"&#x21F5",desc:"DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW"},{char:"&#x21F6",desc:"THREE RIGHTWARDS ARROWS"},{char:"&#x21F7",desc:"LEFTWARDS ARROW WITH VERTICAL STROKE"},{char:"&#x21F8",desc:"RIGHTWARDS ARROW WITH VERTICAL STROKE"},{char:"&#x21F9",desc:"LEFT RIGHT ARROW WITH VERTICAL STROKE"},{char:"&#x21FA",desc:"LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FB",desc:"RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FC",desc:"LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FD",desc:"LEFTWARDS OPEN-HEADED ARROW"},{char:"&#x21FE",desc:"RIGHTWARDS OPEN-HEADED ARROW"},{char:"&#x21FF",desc:"LEFT RIGHT OPEN-HEADED ARROW"}]},{title:"Math",list:[{char:"&forall;",desc:"FOR ALL"},{char:"&part;",desc:"PARTIAL DIFFERENTIAL"},{char:"&exist;",desc:"THERE EXISTS"},{char:"&empty;",desc:"EMPTY SET"},{char:"&nabla;",desc:"NABLA"},{char:"&isin;",desc:"ELEMENT OF"},{char:"&notin;",desc:"NOT AN ELEMENT OF"},{char:"&ni;",desc:"CONTAINS AS MEMBER"},{char:"&prod;",desc:"N-ARY PRODUCT"},{char:"&sum;",desc:"N-ARY SUMMATION"},{char:"&minus;",desc:"MINUS SIGN"},{char:"&lowast;",desc:"ASTERISK OPERATOR"},{char:"&radic;",desc:"SQUARE ROOT"},{char:"&prop;",desc:"PROPORTIONAL TO"},{char:"&infin;",desc:"INFINITY"},{char:"&ang;",desc:"ANGLE"},{char:"&and;",desc:"LOGICAL AND"},{char:"&or;",desc:"LOGICAL OR"},{char:"&cap;",desc:"INTERSECTION"},{char:"&cup;",desc:"UNION"},{char:"&int;",desc:"INTEGRAL"},{char:"&there4;",desc:"THEREFORE"},{char:"&sim;",desc:"TILDE OPERATOR"},{char:"&cong;",desc:"APPROXIMATELY EQUAL TO"},{char:"&asymp;",desc:"ALMOST EQUAL TO"},{char:"&ne;",desc:"NOT EQUAL TO"},{char:"&equiv;",desc:"IDENTICAL TO"},{char:"&le;",desc:"LESS-THAN OR EQUAL TO"},{char:"&ge;",desc:"GREATER-THAN OR EQUAL TO"},{char:"&sub;",desc:"SUBSET OF"},{char:"&sup;",desc:"SUPERSET OF"},{char:"&nsub;",desc:"NOT A SUBSET OF"},{char:"&sube;",desc:"SUBSET OF OR EQUAL TO"},{char:"&supe;",desc:"SUPERSET OF OR EQUAL TO"},{char:"&oplus;",desc:"CIRCLED PLUS"},{char:"&otimes;",desc:"CIRCLED TIMES"},{char:"&perp;",desc:"UP TACK"}]},{title:"Misc",list:[{char:"&spades;",desc:"BLACK SPADE SUIT"},{char:"&clubs;",desc:"BLACK CLUB SUIT"},{char:"&hearts;",desc:"BLACK HEART SUIT"},{char:"&diams;",desc:"BLACK DIAMOND SUIT"},{char:"&#x2669",desc:"QUARTER NOTE"},{char:"&#x266A",desc:"EIGHTH NOTE"},{char:"&#x266B",desc:"BEAMED EIGHTH NOTES"},{char:"&#x266C",desc:"BEAMED SIXTEENTH NOTES"},{char:"&#x266D",desc:"MUSIC FLAT SIGN"},{char:"&#x266E",desc:"MUSIC NATURAL SIGN"},{char:"&#x2600",desc:"BLACK SUN WITH RAYS"},{char:"&#x2601",desc:"CLOUD"},{char:"&#x2602",desc:"UMBRELLA"},{char:"&#x2603",desc:"SNOWMAN"},{char:"&#x2615",desc:"HOT BEVERAGE"},{char:"&#x2618",desc:"SHAMROCK"},{char:"&#x262F",desc:"YIN YANG"},{char:"&#x2714",desc:"HEAVY CHECK MARK"},{char:"&#x2716",desc:"HEAVY MULTIPLICATION X"},{char:"&#x2744",desc:"SNOWFLAKE"},{char:"&#x275B",desc:"HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275C",desc:"HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275D",desc:"HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275E",desc:"HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT"},{char:"&#x2764",desc:"HEAVY BLACK HEART"}]}]}),e.FE.PLUGINS.specialCharacters=function(t){function n(){}function i(){for(var n='<div class="fr-special-characters-modal">',i=0;i<e.FE.DEFAULTS.specialCharactersSets.length;i++){for(var o=e.FE.DEFAULTS.specialCharactersSets[i],s=o.list,a='<div class="fr-special-characters-list"><p class="fr-special-characters-title">'+t.language.translate(o.title)+"</p>",r=0;r<s.length;r++){var l=s[r];a+='<span class="fr-command fr-special-character" tabIndex="-1" role="button" value="'+l.char+'" title="'+l.desc+'">'+l.char+'<span class="fr-sr-only">'+t.language.translate(l.desc)+"&nbsp;&nbsp;&nbsp;</span></span>"}n+=a+"</div>"}return n+"</div>"}function o(e,n){t.events.disableBlur(),e.focus(),n.preventDefault(),n.stopPropagation()}function s(){t.events.$on(d,"keydown",(function(n){var i=n.which,s=d.find("span.fr-special-character:focus:first");if(!(s.length||i!=e.FE.KEYCODE.F10||t.keys.ctrlKey(n)||n.shiftKey)&&n.altKey)return o(d.find("span.fr-special-character:first"),n),!1;if(i==e.FE.KEYCODE.TAB||i==e.FE.KEYCODE.ARROW_LEFT||i==e.FE.KEYCODE.ARROW_RIGHT){var a=null,r=null,l=!1;return i==e.FE.KEYCODE.ARROW_LEFT||i==e.FE.KEYCODE.ARROW_RIGHT?(r=i==e.FE.KEYCODE.ARROW_RIGHT,l=!0):r=!n.shiftKey,s.length?(l&&(a=r?s.nextAll("span.fr-special-character:first"):s.prevAll("span.fr-special-character:first")),a&&a.length||(a=r?s.parent().next().find("span.fr-special-character:first"):s.parent().prev().find("span.fr-special-character:"+(l?"last":"first"))).length||(a=d.find("span.fr-special-character:"+(r?"first":"last")))):a=d.find("span.fr-special-character:"+(r?"first":"last")),o(a,n),!1}if(i!=e.FE.KEYCODE.ENTER||!s.length)return!0;(c.data("instance")||t).specialCharacters.insert(s)}),!0)}function a(){if(!c){var n="<h4>"+t.language.translate("Special Characters")+"</h4>",o=i(),a=t.modals.create(u,n,o);c=a.$modal,a.$head,d=a.$body,t.events.$on(e(t.o_win),"resize",(function(){(c.data("instance")||t).modals.resize(u)})),t.events.bindClick(d,".fr-special-character",(function(n){var i=c.data("instance")||t,o=e(n.currentTarget);i.specialCharacters.insert(o)})),s()}t.modals.show(u),t.modals.resize(u)}function r(){t.modals.hide(u)}function l(e){t.specialCharacters.hide(),t.undo.saveStep(),t.html.insert(e.attr("value"),!0),t.undo.saveStep()}var c,d,u="special_characters";return{_init:n,show:a,hide:r,insert:l}},e.FroalaEditor.DefineIcon("specialCharacters",{template:"text",NAME:"&#937;"}),e.FE.RegisterCommand("specialCharacters",{title:"Special Characters",icon:"specialCharacters",undo:!1,focus:!1,modal:!0,callback:function(){this.specialCharacters.show()},plugin:"specialCharacters",showOnMobile:!1}),e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),n=t.popups.get("table.insert");if(n||(n=a()),!n.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",i,o,e.outerHeight())}}function i(){var e=N();if(e){var n=t.popups.get("table.edit");if(n||(n=d()),n){t.popups.setContainer("table.edit",t.$sc);var i=U(e),o=(i.left+i.right)/2,s=i.bottom;t.popups.show("table.edit",o,s,i.bottom-i.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.selection.restore())}}}function o(){var e=N();if(e){var n=t.popups.get("table.colors");n||(n=u()),t.popups.setContainer("table.colors",t.$sc);var i=U(e),o=(i.left+i.right)/2,s=i.bottom;f(),t.popups.show("table.colors",o,s,i.bottom-i.top)}}function s(){0===be().length&&t.toolbar.enable()}function a(n){if(n)return t.popups.onHide("table.insert",(function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")})),!0;var i="";t.opts.tableInsertButtons.length>0&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var o={buttons:i,rows_columns:l()},s=t.popups.create("table.insert",o);return t.events.$on(s,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",(function(t){r(e(t.currentTarget))}),!0),c(s),s}function r(e){var n=e.data("row"),i=e.data("col"),o=e.parent();o.siblings(".fr-table-size-info").html(n+" &times; "+i),o.find("> span").removeClass("hover fr-active-item");for(var s=1;s<=t.opts.tableInsertMaxSize;s++)for(var a=0;a<=t.opts.tableInsertMaxSize;a++){var r=o.find('> span[data-row="'+s+'"][data-col="'+a+'"]');s<=n&&a<=i?r.addClass("hover"):s<=n+1||s<=2&&!t.helpers.isMobile()?r.css("display","inline-block"):s>2&&!t.helpers.isMobile()&&r.css("display","none")}e.addClass("fr-active-item")}function l(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',n=1;n<=t.opts.tableInsertMaxSize;n++){for(var i=1;i<=t.opts.tableInsertMaxSize;i++){var o="inline-block";n>2&&!t.helpers.isMobile()&&(o="none");var s="fr-table-cell ";1==n&&1==i&&(s+=" hover"),e+='<span class="fr-command '+s+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+n+'" data-col="'+i+'" data-param1="'+n+'" data-param2="'+i+'" style="display: '+o+';" role="button"><span></span><span class="fr-sr-only">'+n+" &times; "+i+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+"</div></div>"}function c(n){t.events.$on(n,"focus","[tabIndex]",(function(t){r(e(t.currentTarget))})),t.events.on("popup.tab",(function(n){var i=e(n.currentTarget);if(!t.popups.isVisible("table.insert")||!i.is("span, a"))return!0;var o,s=n.which;if(e.FE.KEYCODE.ARROW_UP==s||e.FE.KEYCODE.ARROW_DOWN==s||e.FE.KEYCODE.ARROW_LEFT==s||e.FE.KEYCODE.ARROW_RIGHT==s){if(i.is("span.fr-table-cell")){var a=i.parent().find("span.fr-table-cell"),l=a.index(i),c=t.opts.tableInsertMaxSize,d=l%c,u=Math.floor(l/c);e.FE.KEYCODE.ARROW_UP==s?u=Math.max(0,u-1):e.FE.KEYCODE.ARROW_DOWN==s?u=Math.min(t.opts.tableInsertMaxSize-1,u+1):e.FE.KEYCODE.ARROW_LEFT==s?d=Math.max(0,d-1):e.FE.KEYCODE.ARROW_RIGHT==s&&(d=Math.min(t.opts.tableInsertMaxSize-1,d+1));var p=u*c+d,h=e(a.get(p));r(h),t.events.disableBlur(),h.focus(),o=!1}}else e.FE.KEYCODE.ENTER==s&&(t.button.exec(i),o=!1);return!1===o&&(n.preventDefault(),n.stopPropagation()),o}),!0)}function d(e){if(e)return t.popups.onHide("table.edit",s),!0;if(t.opts.tableEditButtons.length>0){var n={buttons:'<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>"},o=t.popups.create("table.edit",n);return t.events.$on(t.$wp,"scroll.table-edit",(function(){t.popups.isVisible("table.edit")&&i()})),o}return!1}function u(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var n={buttons:e,colors:p()},i=t.popups.create("table.colors",n);return t.events.$on(t.$wp,"scroll.table-colors",(function(){t.popups.isVisible("table.colors")&&o()})),h(i),i}function p(){for(var e='<div class="fr-table-colors">',n=0;n<t.opts.tableColors.length;n++)0!==n&&n%t.opts.tableColorsStep==0&&(e+="<br>"),"REMOVE"!=t.opts.tableColors[n]?e+='<span class="fr-command" style="background: '+t.opts.tableColors[n]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[n]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+t.opts.tableColors[n]+"&nbsp;&nbsp;&nbsp;</span></span>":e+='<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("tableColorRemove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return e+"</div>"}function h(n){t.events.on("popup.tab",(function(i){var o=e(i.currentTarget);if(!t.popups.isVisible("table.colors")||!o.is("span"))return!0;var s=i.which,a=!0;if(e.FE.KEYCODE.TAB==s){var r=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(r,!!i.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==s||e.FE.KEYCODE.ARROW_DOWN==s||e.FE.KEYCODE.ARROW_LEFT==s||e.FE.KEYCODE.ARROW_RIGHT==s){var l=o.parent().find("span.fr-command"),c=l.index(o),d=t.opts.colorsStep,u=Math.floor(l.length/d),p=c%d,h=Math.floor(c/d)*d+p,f=u*d;e.FE.KEYCODE.ARROW_UP==s?h=((h-d)%f+f)%f:e.FE.KEYCODE.ARROW_DOWN==s?h=(h+d)%f:e.FE.KEYCODE.ARROW_LEFT==s?h=((h-1)%f+f)%f:e.FE.KEYCODE.ARROW_RIGHT==s&&(h=(h+1)%f);var m=e(l.get(h));t.events.disableBlur(),m.focus(),a=!1}else e.FE.KEYCODE.ENTER==s&&(t.button.exec(o),a=!1);return!1===a&&(i.preventDefault(),i.stopPropagation()),a}),!0)}function f(){var e=t.popups.get("table.colors"),n=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+t.helpers.RGBToHex(n.css("background-color"))+'"]').addClass("fr-selected-color fr-active-item")}function m(n,i){var o,s,a='<table style="width: 100%;" class="fr-inserted-table"><tbody>',r=100/i;for(o=0;o<n;o++){for(a+="<tr>",s=0;s<i;s++)a+='<td style="width: '+r.toFixed(4)+'%;">',0===o&&0===s&&(a+=e.FE.MARKERS),a+="<br></td>";a+="</tr>"}a+="</tbody></table>",t.html.insert(a),t.selection.restore();var l=t.$el.find(".fr-inserted-table");l.removeClass("fr-inserted-table"),t.events.trigger("table.inserted",[l.get(0)])}function g(){if(be().length>0){var e=ye();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function v(){var t=ye();if(t.length>0&&0===t.find("th").length){var n,o="<thead><tr>",s=0;for(t.find("tr:first > td").each((function(){var t=e(this);s+=parseInt(t.attr("colspan"),10)||1})),n=0;n<s;n++)o+="<th><br></th>";o+="</tr></thead>",t.prepend(o),i()}}function b(){var e=ye(),n=e.find("thead");if(n.length>0)if(0===e.find("tbody tr").length)g();else if(n.remove(),be().length>0)i();else{t.popups.hide("table.edit");var o=e.find("tbody tr:first td:first").get(0);o&&(t.selection.setAtEnd(o),t.selection.restore())}}function y(n){var o=ye();if(o.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==n)return;var s,a,r,l=N(),c=H(l);a="above"==n?c.min_i:c.max_i;var d="<tr>";for(s=0;s<l[a].length;s++)if("below"==n&&a<l.length-1&&l[a][s]==l[a+1][s]||"above"==n&&a>0&&l[a][s]==l[a-1][s]){if(0===s||s>0&&l[a][s]!=l[a][s-1]){var u=e(l[a][s]);u.attr("rowspan",parseInt(u.attr("rowspan"),10)+1)}}else d+="<td><br></td>";d+="</tr>",r=e(t.$el.find("th.fr-selected-cell").length>0&&"below"==n?o.find("tbody").not(o.find("table tbody")):o.find("tr").not(o.find("table tr")).get(a)),"below"==n?"TBODY"==r.prop("tagName")?r.prepend(d):r.after(d):"above"==n&&(r.before(d),t.popups.isVisible("table.edit")&&i())}}function w(){var n=ye();if(n.length>0){var i,o,s,a=N(),r=H(a);if(0===r.min_i&&r.max_i==a.length-1)g();else{for(i=r.max_i;i>=r.min_i;i--){for(s=e(n.find("tr").not(n.find("table tr")).get(i)),o=0;o<a[i].length;o++)if(0===o||a[i][o]!=a[i][o-1]){var l=e(a[i][o]);if(parseInt(l.attr("rowspan"),10)>1){var c=parseInt(l.attr("rowspan"),10)-1;1==c?l.removeAttr("rowspan"):l.attr("rowspan",c)}if(i<a.length-1&&a[i][o]==a[i+1][o]&&(0===i||a[i][o]!=a[i-1][o])){for(var d=a[i][o],u=o;u>0&&a[i][u]==a[i][u-1];)u--;0===u?e(n.find("tr").not(n.find("table tr")).get(i+1)).prepend(d):e(a[i+1][u-1]).after(d)}}var p=s.parent();s.remove(),0===p.find("tr").length&&p.remove(),a=N(n)}C(0,a.length-1,0,a[0].length-1,n),r.min_i>0?t.selection.setAtEnd(a[r.min_i-1][0]):t.selection.setAtEnd(a[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function _(n){var o=ye();if(o.length>0){var s,a=N(),r=H(a);s="before"==n?r.min_j:r.max_j;var l,c=100/a[0].length,d=100/(a[0].length+1);o.find("th, td").each((function(){(l=e(this)).data("old-width",l.outerWidth()/o.outerWidth()*100)})),o.find("tr").not(o.find("table tr")).each((function(t){for(var i,o=e(this),r=0,l=0;r-1<s;){if(!(i=o.find("> th, > td").get(l))){i=null;break}i==a[t][r]?(r+=parseInt(e(i).attr("colspan"),10)||1,l++):(r+=parseInt(e(a[t][r]).attr("colspan"),10)||1,"after"==n&&(i=0===l?-1:o.find("> th, > td").get(l-1)))}var u,p=e(i);if("after"==n&&r-1>s||"before"==n&&s>0&&a[t][s]==a[t][s-1]){if(0===t||t>0&&a[t][s]!=a[t-1][s]){var h=parseInt(p.attr("colspan"),10)+1;p.attr("colspan",h),p.css("width",(p.data("old-width")*d/c+d).toFixed(4)+"%"),p.removeData("old-width")}}else u=o.find("th").length>0?'<th style="width: '+d.toFixed(4)+'%;"><br></th>':'<td style="width: '+d.toFixed(4)+'%;"><br></td>',-1==i?o.prepend(u):null==i?o.append(u):"before"==n?p.before(u):"after"==n&&p.after(u)})),o.find("th, td").each((function(){(l=e(this)).data("old-width")&&(l.css("width",(l.data("old-width")*d/c).toFixed(4)+"%"),l.removeData("old-width"))})),t.popups.isVisible("table.edit")&&i()}}function T(){var n=ye();if(n.length>0){var i,o,s,a=N(),r=H(a);if(0===r.min_j&&r.max_j==a[0].length-1)g();else{var l=100/a[0].length,c=100/(a[0].length-r.max_j+r.min_j-1);for(n.find("th, td").each((function(){(s=e(this)).hasClass("fr-selected-cell")||s.data("old-width",s.outerWidth()/n.outerWidth()*100)})),o=r.max_j;o>=r.min_j;o--)for(i=0;i<a.length;i++)if(0===i||a[i][o]!=a[i-1][o])if(s=e(a[i][o]),(parseInt(s.attr("colspan"),10)||1)>1){var d=parseInt(s.attr("colspan"),10)-1;1==d?s.removeAttr("colspan"):s.attr("colspan",d),s.css("width",((s.data("old-width")-de(o,a))*c/l).toFixed(4)+"%"),s.removeData("old-width")}else{var u=e(s.parent().get(0));s.remove(),0===u.find("> th, > td").length&&(0===u.prev().length||0===u.next().length||u.prev().find("> th[rowspan], > td[rowspan]").length<u.prev().find("> th, > td").length)&&u.remove()}C(0,a.length-1,0,a[0].length-1,n),r.min_j>0?t.selection.setAtEnd(a[r.min_i][r.min_j-1]):t.selection.setAtEnd(a[r.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),n.find("th, td").each((function(){(s=e(this)).data("old-width")&&(s.css("width",(s.data("old-width")*c/l).toFixed(4)+"%"),s.removeData("old-width"))}))}}}function E(e,t,n){var i,o,s,a,r,l=0,c=N(n);for(t=Math.min(t,c[0].length-1),o=e;o<=t;o++)if(!(o>e&&c[0][o]==c[0][o-1])&&(a=parseInt(c[0][o].getAttribute("colspan"),10)||1)>1&&c[0][o]==c[0][o+1])for(l=a-1,i=1;i<c.length;i++)if(c[i][o]!=c[i-1][o]){for(s=o;s<o+a;s++)if((r=parseInt(c[i][s].getAttribute("colspan"),10)||1)>1&&c[i][s]==c[i][s+1])s+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&A(c,l,"colspan",0,c.length-1,e,t)}function S(e,t,n){var i,o,s,a,r,l=0,c=N(n);for(t=Math.min(t,c.length-1),i=e;i<=t;i++)if(!(i>e&&c[i][0]==c[i-1][0])&&(a=parseInt(c[i][0].getAttribute("rowspan"),10)||1)>1&&c[i][0]==c[i+1][0])for(l=a-1,o=1;o<c[0].length;o++)if(c[i][o]!=c[i][o-1]){for(s=i;s<i+a;s++)if((r=parseInt(c[s][o].getAttribute("rowspan"),10)||1)>1&&c[s][o]==c[s+1][o])s+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&A(c,l,"rowspan",e,t,0,c[0].length-1)}function A(e,t,n,i,o,s,a){var r,l,c;for(r=i;r<=o;r++)for(l=s;l<=a;l++)r>i&&e[r][l]==e[r-1][l]||l>s&&e[r][l]==e[r][l-1]||(c=parseInt(e[r][l].getAttribute(n),10)||1)>1&&(c-t>1?e[r][l].setAttribute(n,c-t):e[r][l].removeAttribute(n))}function C(e,t,n,i,o){S(e,t,o),E(n,i,o)}function k(){if(be().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){P();var n,o,s=H(N()),a=t.$el.find(".fr-selected-cell"),r=e(a[0]),l=r.parent().find(".fr-selected-cell"),c=r.closest("table"),d=r.html(),u=0;for(n=0;n<l.length;n++)u+=e(l[n]).outerWidth();for(r.css("width",(u/c.outerWidth()*100).toFixed(4)+"%"),s.min_j<s.max_j&&r.attr("colspan",s.max_j-s.min_j+1),s.min_i<s.max_i&&r.attr("rowspan",s.max_i-s.min_i+1),n=1;n<a.length;n++)"<br>"!=(o=e(a[n])).html()&&""!==o.html()&&(d+="<br>"+o.html()),o.remove();r.html(d),t.selection.setAtEnd(r.get(0)),t.selection.restore(),t.toolbar.enable(),S(s.min_i,s.max_i,c);var p=c.find("tr:empty");for(n=p.length-1;n>=0;n--)e(p[n]).remove();E(s.min_j,s.max_j,c),i()}}function x(){if(1==be().length){var n=t.$el.find(".fr-selected-cell"),i=n.parent(),o=n.closest("table"),s=parseInt(n.attr("rowspan"),10),a=N(),r=D(n.get(0),a),l=n.clone().html("<br>");if(s>1){var c=Math.ceil(s/2);c>1?n.attr("rowspan",c):n.removeAttr("rowspan"),s-c>1?l.attr("rowspan",s-c):l.removeAttr("rowspan");for(var d=r.row+c,u=0===r.col?r.col:r.col-1;u>=0&&(a[d][u]==a[d][u-1]||d>0&&a[d][u]==a[d-1][u]);)u--;-1==u?e(o.find("tr").not(o.find("table tr")).get(d)).prepend(l):e(a[d][u]).after(l)}else{var p,h=e("<tr>").append(l);for(p=0;p<a[0].length;p++)if(0===p||a[r.row][p]!=a[r.row][p-1]){var f=e(a[r.row][p]);f.is(n)||f.attr("rowspan",(parseInt(f.attr("rowspan"),10)||1)+1)}i.after(h)}F(),t.popups.hide("table.edit")}}function $(){if(1==be().length){var n=t.$el.find(".fr-selected-cell"),i=parseInt(n.attr("colspan"),10)||1,o=n.parent().outerWidth(),s=n.outerWidth(),a=n.clone().html("<br>"),r=N(),l=D(n.get(0),r);if(i>1){var c=Math.ceil(i/2);s=ue(l.col,l.col+c-1,r)/o*100;var d=ue(l.col+c,l.col+i-1,r)/o*100;c>1?n.attr("colspan",c):n.removeAttr("colspan"),i-c>1?a.attr("colspan",i-c):a.removeAttr("colspan"),n.css("width",s.toFixed(4)+"%"),a.css("width",d.toFixed(4)+"%")}else{var u;for(u=0;u<r.length;u++)if(0===u||r[u][l.col]!=r[u-1][l.col]){var p=e(r[u][l.col]);if(!p.is(n)){var h=(parseInt(p.attr("colspan"),10)||1)+1;p.attr("colspan",h)}}s=s/o*100/2,n.css("width",s.toFixed(4)+"%"),a.css("width",s.toFixed(4)+"%")}n.after(a),F(),t.popups.hide("table.edit")}}function I(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")}function O(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function L(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function R(e,t,n,i){if(t.length>0){if(!n){var o=Object.keys(i);o.splice(o.indexOf(e),1),t.removeClass(o.join(" "))}t.toggleClass(e)}}function N(t){var n=[];if(null==(t=t||null)&&be().length>0&&(t=ye()),t)return t.find("tr").not(t.find("table tr")).each((function(t,i){var o=e(i),s=0;o.find("> th, > td").each((function(i,o){for(var a=e(o),r=parseInt(a.attr("colspan"),10)||1,l=parseInt(a.attr("rowspan"),10)||1,c=t;c<t+l;c++)for(var d=s;d<s+r;d++)n[c]||(n[c]=[]),n[c][d]?s++:n[c][d]=o;s+=r}))})),n}function D(e,t){for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)if(t[n][i]==e)return{row:n,col:i}}function M(e,t,n){for(var i=e+1,o=t+1;i<n.length;){if(n[i][t]!=n[e][t]){i--;break}i++}for(i==n.length&&i--;o<n[e].length;){if(n[e][o]!=n[e][t]){o--;break}o++}return o==n[e].length&&o--,{row:i,col:o}}function P(){t.el.querySelector(".fr-cell-fixed")&&t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler")&&t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function F(){var n=t.$el.find(".fr-selected-cell");n.length>0&&n.each((function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")})),P()}function B(){setTimeout((function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur()}),0)}function H(e){var n=t.$el.find(".fr-selected-cell");if(n.length>0){var i,o=e.length,s=0,a=e[0].length,r=0;for(i=0;i<n.length;i++){var l=D(n[i],e),c=M(l.row,l.col,e);o=Math.min(l.row,o),s=Math.max(c.row,s),a=Math.min(l.col,a),r=Math.max(c.col,r)}return{min_i:o,max_i:s,min_j:a,max_j:r}}return null}function j(t,n,i,o,s){var a,r,l,c,d=t,u=n,p=i,h=o;for(a=d;a<=u;a++)((parseInt(e(s[a][p]).attr("rowspan"),10)||1)>1||(parseInt(e(s[a][p]).attr("colspan"),10)||1)>1)&&(c=M((l=D(s[a][p],s)).row,l.col,s),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),h=Math.max(c.col,h)),((parseInt(e(s[a][h]).attr("rowspan"),10)||1)>1||(parseInt(e(s[a][h]).attr("colspan"),10)||1)>1)&&(c=M((l=D(s[a][h],s)).row,l.col,s),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),h=Math.max(c.col,h));for(r=p;r<=h;r++)((parseInt(e(s[d][r]).attr("rowspan"),10)||1)>1||(parseInt(e(s[d][r]).attr("colspan"),10)||1)>1)&&(c=M((l=D(s[d][r],s)).row,l.col,s),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),h=Math.max(c.col,h)),((parseInt(e(s[u][r]).attr("rowspan"),10)||1)>1||(parseInt(e(s[u][r]).attr("colspan"),10)||1)>1)&&(c=M((l=D(s[u][r],s)).row,l.col,s),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),h=Math.max(c.col,h));return d==t&&u==n&&p==i&&h==o?{min_i:t,max_i:n,min_j:i,max_j:o}:j(d,u,p,h,s)}function U(t){var n=H(t),i=e(t[n.min_i][n.min_j]),o=e(t[n.min_i][n.max_j]),s=e(t[n.max_i][n.min_j]);return{left:i.offset().left,right:o.offset().left+o.outerWidth(),top:i.offset().top,bottom:s.offset().top+s.outerHeight()}}function W(n,i){if(e(n).is(i))F(),t.edit.on(),e(n).addClass("fr-selected-cell");else{B(),t.edit.off();var o=N(),s=D(n,o),a=D(i,o),r=j(Math.min(s.row,a.row),Math.max(s.row,a.row),Math.min(s.col,a.col),Math.max(s.col,a.col),o);F(),n.classList.add("fr-cell-fixed"),i.classList.add("fr-cell-handler");for(var l=r.min_i;l<=r.max_i;l++)for(var c=r.min_j;c<=r.max_j;c++)e(o[l][c]).addClass("fr-selected-cell")}}function K(n){var i=null,o=e(n.target);return"TD"==n.target.tagName||"TH"==n.target.tagName?i=n.target:o.closest("td").length>0?i=o.closest("td").get(0):o.closest("th").length>0&&(i=o.closest("th").get(0)),0===t.$el.find(i).length?null:i}function G(){F(),t.popups.hide("table.edit")}function V(n){var i=K(n);if(be().length>0&&!i&&G(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)(3==n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)&&i&&G();else if(Ce=!0,i){be().length>0&&!n.shiftKey&&G(),n.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),Ae=!0;var o=i.tagName.toLowerCase();n.shiftKey&&t.$el.find(o+".fr-selected-cell").length>0?e(t.$el.find(o+".fr-selected-cell").closest("table")).is(e(i).closest("table"))?W(ke,i):B():((t.keys.ctrlKey(n)||n.shiftKey)&&(be().length>1||0===e(i).find(t.selection.element()).length&&!e(i).is(t.selection.element()))&&B(),W(ke=i,ke))}}function z(n){if(Ae||t.$tb.is(n.target)||t.$tb.is(e(n.target).closest(t.$tb.get(0)))||(be().length>0&&t.toolbar.enable(),F()),!(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)&&(Ce=!1,Ae&&(Ae=!1,K(n)||1!=be().length?be().length>0&&(t.selection.isCollapsed()?i():F()):F()),$e)){$e=!1,Ee.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var o=parseFloat(Ee.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(o-=t.$iframe.offset().left),Ee.data("release-position",o),Ee.removeData("max-left"),Ee.removeData("max-right"),ce(n),te()}}function q(n){if(!0===Ae){if(e(n.currentTarget).closest("table").is(ye())){if("TD"==n.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void W(ke,n.currentTarget);if("TH"==n.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void W(ke,n.currentTarget)}B()}}function Y(n,i){for(var o=n;o&&"TABLE"!=o.tagName&&o.parentNode!=t.el;)o=o.parentNode;if(o&&"TABLE"==o.tagName){var s=N(e(o));"up"==i?Q(D(n,s),o,s):"down"==i&&Z(D(n,s),o,s)}}function X(e,n,i,o){for(var s,a=n;a!=t.el&&"TD"!=a.tagName&&"TH"!=a.tagName&&("up"==o?s=a.previousElementSibling:"down"==o&&(s=a.nextElementSibling),!s);)a=a.parentNode;"TD"==a.tagName||"TH"==a.tagName?Y(a,o):s&&("up"==o&&t.selection.setAtEnd(s),"down"==o&&t.selection.setAtStart(s))}function Q(e,n,i){e.row>0?t.selection.setAtEnd(i[e.row-1][e.col]):X(e,n,i,"up")}function Z(e,n,i){var o=parseInt(i[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<i.length-o?t.selection.setAtStart(i[e.row+o][e.col]):X(e,n,i,"down")}function J(n){var i=n.which,o=t.selection.blocks();if(o.length&&("TD"==(o=o[0]).tagName||"TH"==o.tagName)){for(var s=o;s&&"TABLE"!=s.tagName&&s.parentNode!=t.el;)s=s.parentNode;if(s&&"TABLE"==s.tagName&&(e.FE.KEYCODE.ARROW_LEFT==i||e.FE.KEYCODE.ARROW_UP==i||e.FE.KEYCODE.ARROW_RIGHT==i||e.FE.KEYCODE.ARROW_DOWN==i)&&(be().length>0&&G(),t.browser.webkit&&(e.FE.KEYCODE.ARROW_UP==i||e.FE.KEYCODE.ARROW_DOWN==i))){var a=t.selection.ranges(0).startContainer;if(a.nodeType==Node.TEXT_NODE&&(e.FE.KEYCODE.ARROW_UP==i&&a.previousSibling||e.FE.KEYCODE.ARROW_DOWN==i&&a.nextSibling))return;n.preventDefault(),n.stopPropagation();var r=N(e(s)),l=D(o,r);return e.FE.KEYCODE.ARROW_UP==i?Q(l,s,r):e.FE.KEYCODE.ARROW_DOWN==i&&Z(l,s,r),t.selection.restore(),!1}}}function ee(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),Ee=t.shared.$table_resizer,t.events.$on(Ee,"mousedown",(function(e){return!t.core.sameInstance(Ee)||(be().length>0&&G(),1==e.which?(t.selection.save(),$e=!0,Ee.addClass("fr-moving"),B(),t.edit.off(),Ee.find("div").css("opacity",1),!1):void 0)})),t.events.$on(Ee,"mousemove",(function(e){if(!t.core.sameInstance(Ee))return!0;$e&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),pe(e))})),t.events.on("shared.destroy",(function(){Ee.html("").removeData().remove(),Ee=null}),!0),t.events.on("destroy",(function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),Ee.hide().appendTo(e("body:first"))}),!0)}function te(){Ee&&(Ee.find("div").css("opacity",0),Ee.css("top",0),Ee.css("left",0),Ee.css("height",0),Ee.find("div").css("height",0),Ee.hide())}function ne(){Se&&Se.removeClass("fr-visible").css("left","-9999px")}function ie(n,i){var o=e(i),s=o.closest("table"),a=s.parent();if(i&&"TD"!=i.tagName&&"TH"!=i.tagName&&(o.closest("td").length>0?i=o.closest("td"):o.closest("th").length>0&&(i=o.closest("th"))),!i||"TD"!=i.tagName&&"TH"!=i.tagName)Ee&&o.get(0)!=Ee.get(0)&&o.parent().get(0)!=Ee.get(0)&&t.core.sameInstance(Ee)&&te();else{if(o=e(i),0===t.$el.find(o).length)return!1;var r=o.offset().left-1,l=r+o.outerWidth();if(Math.abs(n.pageX-r)<=t.opts.tableResizerOffset||Math.abs(l-n.pageX)<=t.opts.tableResizerOffset){var c,d,u,p,h,f=N(s),m=D(i,f),g=M(m.row,m.col,f),v=s.offset().top,b=s.outerHeight()-1;"rtl"!=t.opts.direction?n.pageX-r<=t.opts.tableResizerOffset?(u=r,m.col>0?(p=r-de(m.col-1,f)+t.opts.tableResizingLimit,h=r+de(m.col,f)-t.opts.tableResizingLimit,c=m.col-1,d=m.col):(c=null,d=0,p=s.offset().left-1-parseInt(s.css("margin-left"),10),h=s.offset().left-1+s.width()-f[0].length*t.opts.tableResizingLimit)):l-n.pageX<=t.opts.tableResizerOffset&&(u=l,g.col<f[g.row].length&&f[g.row][g.col+1]?(p=l-de(g.col,f)+t.opts.tableResizingLimit,h=l+de(g.col+1,f)-t.opts.tableResizingLimit,c=g.col,d=g.col+1):(c=g.col,d=null,p=s.offset().left-1+f[0].length*t.opts.tableResizingLimit,h=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):l-n.pageX<=t.opts.tableResizerOffset?(u=l,m.col>0?(p=l-de(m.col,f)+t.opts.tableResizingLimit,h=l+de(m.col-1,f)-t.opts.tableResizingLimit,c=m.col,d=m.col-1):(c=null,d=0,p=s.offset().left+f[0].length*t.opts.tableResizingLimit,h=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):n.pageX-r<=t.opts.tableResizerOffset&&(u=r,g.col<f[g.row].length&&f[g.row][g.col+1]?(p=r-de(g.col+1,f)+t.opts.tableResizingLimit,h=r+de(g.col,f)-t.opts.tableResizingLimit,c=g.col+1,d=g.col):(c=g.col,d=null,p=a.offset().left+parseFloat(a.css("padding-left")),h=s.offset().left-1+s.width()-f[0].length*t.opts.tableResizingLimit)),Ee||ee(),Ee.data("table",s),Ee.data("first",c),Ee.data("second",d),Ee.data("instance",t),t.$wp.append(Ee);var y=u-t.win.pageXOffset-t.opts.tableResizerOffset,w=v-t.win.pageYOffset;t.opts.iframe&&(y+=t.$iframe.offset().left-t.helpers.scrollLeft(),w+=t.$iframe.offset().top-t.helpers.scrollTop(),p+=t.$iframe.offset().left,h+=t.$iframe.offset().left),Ee.data("max-left",p),Ee.data("max-right",h),Ee.data("origin",u-t.win.pageXOffset),Ee.css("top",w),Ee.css("left",y),Ee.css("height",b),Ee.find("div").css("height",b),Ee.css("padding-left",t.opts.tableResizerOffset),Ee.css("padding-right",t.opts.tableResizerOffset),Ee.show()}else t.core.sameInstance(Ee)&&te()}}function oe(n,i){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Se||me(),t.$box.append(Se),Se.data("instance",t);var o,s=e(i).find("tr:first"),a=n.pageX,r=0,l=0;t.opts.iframe&&(r+=t.$iframe.offset().left-t.helpers.scrollLeft(),l+=t.$iframe.offset().top-t.helpers.scrollTop()),s.find("th, td").each((function(){var n=e(this);return n.offset().left<=a&&a<n.offset().left+n.outerWidth()/2?(o=parseInt(Se.find("a").css("width"),10),Se.css("top",l+n.offset().top-t.win.pageYOffset-o-5),Se.css("left",r+n.offset().left-t.win.pageXOffset-o/2),Se.data("selected-cell",n),Se.data("position","before"),Se.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=a&&a<n.offset().left+n.outerWidth()?(o=parseInt(Se.find("a").css("width"),10),Se.css("top",l+n.offset().top-t.win.pageYOffset-o-5),Se.css("left",r+n.offset().left+n.outerWidth()-t.win.pageXOffset-o/2),Se.data("selected-cell",n),Se.data("position","after"),Se.addClass("fr-visible"),!1):void 0}))}function se(n,i){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Se||me(),t.$box.append(Se),Se.data("instance",t);var o,s=e(i),a=n.pageY,r=0,l=0;t.opts.iframe&&(r+=t.$iframe.offset().left-t.helpers.scrollLeft(),l+=t.$iframe.offset().top-t.helpers.scrollTop()),s.find("tr").each((function(){var n=e(this);return n.offset().top<=a&&a<n.offset().top+n.outerHeight()/2?(o=parseInt(Se.find("a").css("width"),10),Se.css("top",l+n.offset().top-t.win.pageYOffset-o/2),Se.css("left",r+n.offset().left-t.win.pageXOffset-o-5),Se.data("selected-cell",n.find("td:first")),Se.data("position","above"),Se.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=a&&a<n.offset().top+n.outerHeight()?(o=parseInt(Se.find("a").css("width"),10),Se.css("top",l+n.offset().top+n.outerHeight()-t.win.pageYOffset-o/2),Se.css("left",r+n.offset().left-t.win.pageXOffset-o-5),Se.data("selected-cell",n.find("td:first")),Se.data("position","below"),Se.addClass("fr-visible"),!1):void 0}))}function ae(n,i){if(0===be().length){var o,s,a;if(i&&("HTML"==i.tagName||"BODY"==i.tagName||t.node.isElement(i)))for(o=1;o<=t.opts.tableInsertHelperOffset;o++){if(s=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+o),e(s).hasClass("fr-tooltip"))return!0;if(s&&("TH"==s.tagName||"TD"==s.tagName||"TABLE"==s.tagName)&&(e(s).parents(".fr-wrapper").length||t.opts.iframe))return oe(n,e(s).closest("table")),!0;if(a=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset+o,n.pageY-t.win.pageYOffset),e(a).hasClass("fr-tooltip"))return!0;if(a&&("TH"==a.tagName||"TD"==a.tagName||"TABLE"==a.tagName)&&(e(a).parents(".fr-wrapper").length||t.opts.iframe))return se(n,e(a).closest("table")),!0}t.core.sameInstance(Se)&&ne()}}function re(e){xe=null;var n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&ie(e,n),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||ae(e,n)}function le(){if($e){var e=Ee.data("table").offset().top-t.win.pageYOffset;t.opts.iframe&&(e+=t.$iframe.offset().top-t.helpers.scrollTop()),Ee.css("top",e)}}function ce(){var n=Ee.data("origin"),i=Ee.data("release-position");if(n!==i){var o=Ee.data("first"),s=Ee.data("second"),a=Ee.data("table"),r=a.outerWidth();if(t.undo.canDo()||t.undo.saveStep(),null!==o&&null!==s){var l,c,d,u=N(a),p=[],h=[],f=[],m=[];for(l=0;l<u.length;l++)c=e(u[l][o]),d=e(u[l][s]),p[l]=c.outerWidth(),f[l]=d.outerWidth(),h[l]=p[l]/r*100,m[l]=f[l]/r*100;for(l=0;l<u.length;l++){c=e(u[l][o]),d=e(u[l][s]);var g=(h[l]*(p[l]+i-n)/p[l]).toFixed(4);c.css("width",g+"%"),d.css("width",(h[l]+m[l]-g).toFixed(4)+"%")}}else{var v,b=a.parent(),y=r/b.width()*100,w=(parseInt(a.css("margin-left"),10)||0)/b.width()*100,_=(parseInt(a.css("margin-right"),10)||0)/b.width()*100;"rtl"==t.opts.direction&&0===s||"rtl"!=t.opts.direction&&0!==s?(v=(r+i-n)/r*y,a.css("margin-right","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(w).toFixed(4)+"%)")):("rtl"==t.opts.direction&&0!==s||"rtl"!=t.opts.direction&&0===s)&&(v=(r-i+n)/r*y,a.css("margin-left","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(_).toFixed(4)+"%)")),a.css("width",Math.round(v).toFixed(4)+"%")}t.selection.restore(),t.undo.saveStep()}Ee.removeData("origin"),Ee.removeData("release-position"),Ee.removeData("first"),Ee.removeData("second"),Ee.removeData("table")}function de(t,n){var i,o=e(n[0][t]).outerWidth();for(i=1;i<n.length;i++)o=Math.min(o,e(n[i][t]).outerWidth());return o}function ue(e,t,n){var i,o=0;for(i=e;i<=t;i++)o+=de(i,n);return o}function pe(e){if(be().length>1&&Ce&&B(),!1===Ce&&!1===Ae&&!1===$e)xe&&clearTimeout(xe),t.edit.isDisabled()&&!t.popups.isVisible("table.edit")||(xe=setTimeout(re,30,e));else if($e){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var i=Ee.data("max-left"),o=Ee.data("max-right");n>=i&&n<=o?Ee.css("left",n-t.opts.tableResizerOffset):n<i&&parseFloat(Ee.css("left"),10)>i-t.opts.tableResizerOffset?Ee.css("left",i-t.opts.tableResizerOffset):n>o&&parseFloat(Ee.css("left"),10)<o-t.opts.tableResizerOffset&&Ee.css("left",o-t.opts.tableResizerOffset)}else Ce&&ne()}function he(n){t.node.isEmpty(n.get(0))?n.prepend(e.FE.MARKERS):n.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function fe(n){if(n.which==e.FE.KEYCODE.TAB){var i;if(be().length>0)i=t.$el.find(".fr-selected-cell:last");else{var o=t.selection.element();"TD"==o.tagName||"TH"==o.tagName?i=e(o):o!=t.el&&(e(o).parentsUntil(t.$el,"td").length>0?i=e(o).parents("td:first"):e(o).parentsUntil(t.$el,"th").length>0&&(i=e(o).parents("th:first")))}if(i)return n.preventDefault(),e(t.selection.element()).parents("ol, ul").length>0||(G(),n.shiftKey?i.prev().length>0?he(i.prev()):i.closest("tr").length>0&&i.closest("tr").prev().length>0?he(i.closest("tr").prev().find("td:last")):i.closest("tbody").length>0&&i.closest("table").find("thead tr").length>0&&he(i.closest("table").find("thead tr th:last")):i.next().length>0?he(i.next()):i.closest("tr").length>0&&i.closest("tr").next().length>0?he(i.closest("tr").next().find("td:first")):i.closest("thead").length>0&&i.closest("table").find("tbody tr").length>0?he(i.closest("table").find("tbody tr td:first")):(i.addClass("fr-selected-cell"),y("below"),F(),he(i.closest("tr").next().find("td:first"))),t.selection.restore(),!1)}}function me(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",(function(){var e=Se.data("selected-cell"),n=Se.data("position"),i=Se.data("instance")||t;"before"==n||"after"==n?(t.undo.saveStep(),e.addClass("fr-selected-cell"),i.table.insertColumn(n),e.removeClass("fr-selected-cell"),t.undo.saveStep()):("above"==n||"below"==n)&&(t.undo.saveStep(),e.addClass("fr-selected-cell"),i.table.insertRow(n),e.removeClass("fr-selected-cell"),t.undo.saveStep()),ne()})),t.events.on("shared.destroy",(function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null}),!0),t.events.$on(t.shared.$ti_helper,"mousemove",(function(e){e.stopPropagation()}),!0),t.events.$on(e(t.o_win),"scroll",(function(){ne()}),!0),t.events.$on(t.$wp,"scroll",(function(){ne()}),!0)),Se=t.shared.$ti_helper,t.events.on("destroy",(function(){Se=null})),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function ge(){ke=null,clearTimeout(xe)}function ve(){be().length>0?i():(t.popups.hide("table.insert"),t.toolbar.showInline())}function be(){return t.el.querySelectorAll(".fr-selected-cell")}function ye(){var n=be();if(n.length){for(var i=n[0];i&&"TABLE"!=i.tagName&&i.parentNode!=t.el;)i=i.parentNode;return e(i&&"TABLE"==i.tagName?i:[])}return e([])}function we(n){if(n.altKey&&n.which==e.FE.KEYCODE.SPACE){var o,s=t.selection.element();if("TD"==s.tagName||"TH"==s.tagName?o=s:e(s).closest("td").length>0?o=e(s).closest("td").get(0):e(s).closest("th").length>0&&(o=e(s).closest("th").get(0)),o)return n.preventDefault(),W(o,o),i(),!1}}function _e(n){var i=be();if(i.length>0){var o,s,a=N(),r=n.which;1==i.length?s=o=i[0]:(o=t.el.querySelector(".fr-cell-fixed"),s=t.el.querySelector(".fr-cell-handler"));var l=D(s,a);if(e.FE.KEYCODE.ARROW_RIGHT==r){if(l.col<a[0].length-1)return W(o,a[l.row][l.col+1]),!1}else if(e.FE.KEYCODE.ARROW_DOWN==r){if(l.row<a.length-1)return W(o,a[l.row+1][l.col]),!1}else if(e.FE.KEYCODE.ARROW_LEFT==r){if(l.col>0)return W(o,a[l.row][l.col-1]),!1}else if(e.FE.KEYCODE.ARROW_UP==r&&l.row>0)return W(o,a[l.row-1][l.col]),!1}}function Te(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){Ce=!1,Ae=!1,$e=!1,t.events.$on(t.$el,"mousedown",V),t.popups.onShow("image.edit",(function(){F(),Ce=!1,Ae=!1})),t.popups.onShow("link.edit",(function(){F(),Ce=!1,Ae=!1})),t.events.on("commands.mousedown",(function(e){e.parents(".fr-toolbar").length>0&&F()})),t.events.$on(t.$el,"mouseenter","th, td",q),t.events.$on(t.$win,"mouseup",z),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",z),t.events.$on(t.$win,"mousemove",pe),t.events.$on(e(t.o_win),"scroll",le),t.events.on("contentChanged",(function(){be().length>0&&(i(),t.$el.find("img").on("load.selected-cells",(function(){e(this).off("load.selected-cells"),be().length>0&&i()})))})),t.events.$on(e(t.o_win),"resize",(function(){F()})),t.events.on("toolbar.esc",(function(){if(be().length>0)return t.events.disableBlur(),t.events.focus(),!1}),!0),t.events.$on(t.$el,"keydown",(function(e){e.shiftKey?!1===_e(e)&&setTimeout((function(){i()}),0):J(e)})),t.events.on("keydown",(function(n){if(!1===fe(n))return!1;var i=be();if(i.length>0){if(i.length>0&&t.keys.ctrlKey(n)&&n.which==e.FE.KEYCODE.A)return F(),t.popups.isVisible("table.edit")&&t.popups.hide("table.edit"),i=[],!0;if(n.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return F(),t.popups.hide("table.edit"),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),i=[],!1;if(i.length>1&&n.which==e.FE.KEYCODE.BACKSPACE){t.undo.saveStep();for(var o=0;o<i.length;o++)e(i[o]).html("<br>"),o==i.length-1&&e(i[o]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),i=[],!1}if(i.length>1&&n.which!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n))return n.preventDefault(),i=[],!1}else if(i=[],!1===we(n))return!1}),!0);var n=[];t.events.on("html.beforeGet",(function(){n=be();for(var e=0;e<n.length;e++)n[e].className=(n[e].className||"").replace(/fr-selected-cell/g,"")})),t.events.on("html.afterGet",(function(){for(var e=0;e<n.length;e++)n[e].className=(n[e].className?n[e].className.trim()+" ":"")+"fr-selected-cell";n=[]})),a(!0),d(!0)}t.events.on("destroy",ge)}var Ee,Se,Ae,Ce,ke,xe,$e;return{_init:Te,insert:m,remove:g,insertRow:y,deleteRow:w,insertColumn:_,deleteColumn:T,mergeCells:k,splitCellVertically:$,splitCellHorizontally:x,addHeader:v,removeHeader:b,setBackground:I,showInsertPopup:n,showEditPopup:i,showColorsPopup:o,back:ve,verticalAlign:O,horizontalAlign:L,applyStyle:R,selectedTable:ye,selectedCells:be}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below",delete:"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableRows.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+"</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after",delete:"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableColumns.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+"</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCells.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+"</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,n){var i=this.$el.find(".fr-selected-cell").closest("table");i&&n.find(".fr-command").each((function(){var t=e(this).data("param1"),n=i.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)}))}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+i.toLowerCase()+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(i)+"</a></li>");return t+"</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("align-"+i)+'<span class="fr-sr-only">'+this.language.translate(n[i])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var n=this.table.selectedCells();n.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(n[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,n){var i=this.$el.find(".fr-selected-cell:first");i&&n.find(".fr-command").each((function(){var t=e(this).data("param1"),n=i.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)}))}}),e.FE.DefineIcon("tableColorRemove",{NAME:"eraser"}),e.FE.URLRegEx="(^| |\\u00A0)("+e.FE.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}))$",e.FE.PLUGINS.url=function(t){function n(n,i,o){for(var s="";o.length&&"."==o[o.length-1];)s+=".",o=o.substring(0,o.length-1);var a=o;return t.opts.linkConvertEmailAddress&&e.FE.MAIL_REGEX.test(a)&&!/^mailto:.*/i.test(a)&&(a="mailto:"+a),/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(a)||(a="//"+a),(i||"")+"<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(c?' rel="'+c+'"':"")+' href="'+a+'">'+o.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"+s}function i(){return new RegExp(e.FE.URLRegEx,"gi")}function o(e){return t.opts.linkAlwaysNoFollow&&(c="nofollow"),t.opts.linkAlwaysBlank&&(c?c+=" noopener noreferrer":c="noopener noreferrer"),e.replace(i(),n)}function s(e){return!!e&&("A"===e.tagName||!(!e.parentNode||e.parentNode==t.el)&&s(e.parentNode))}function a(e){var t=e.split(" ");return t[t.length-1]}function r(){var n=t.selection.ranges(0).startContainer;if(!n||n.nodeType!==Node.TEXT_NODE)return!1;if(s(n))return!1;if(i().test(a(n.textContent)))e(n).before(o(n.textContent)),n.parentNode.removeChild(n);else if(n.previousSibling&&"A"===n.previousSibling.tagName){var r=n.previousSibling.innerText+n.textContent;i().test(a(r))&&(e(n.previousSibling).replaceWith(o(r)),n.parentNode.removeChild(n))}}function l(){t.events.on("paste.afterCleanup",(function(n){var i=t.doc.createElement("div");i.innerHTML=n;for(var s=t.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,t.node.filter((function(t){return new RegExp(e.FE.URLRegEx,"gi").test(t.textContent)})),!1),a=[];s.nextNode();){var r=s.currentNode;a.push(r)}for(var l=0;l<a.length;l++){var c=a[l];e(c).after(o(c.textContent)).remove()}return i.innerHTML})),t.events.on("keydown",(function(n){var i=n.which;!t.selection.isCollapsed()||i!=e.FE.KEYCODE.ENTER&&i!=e.FE.KEYCODE.SPACE&&i!=e.FE.KEYCODE.PERIOD||r()}),!0)}var c=null;return{_init:l}},e.extend(e.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUpload:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),e.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/g,url_text:"//play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],e.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,e.FE.PLUGINS.video=function(t){function n(){var e=t.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change");var n=e.find(".fr-video-embed-layer textarea");n.val("").trigger("change"),(n=e.find(".fr-video-upload-layer input")).val("").trigger("change")}function i(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),n=t.popups.get("video.insert");if(n||(n=s()),f(),!n.hasClass("fr-active")){t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb);var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("video.insert",i,o,e.outerHeight())}}function o(){var e=t.popups.get("video.edit");if(e||(e=G()),e){t.popups.setContainer("video.edit",t.$sc),t.popups.refresh("video.edit");var n=ve.find("iframe, embed, video"),i=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("video.edit",i,o,n.outerHeight())}}function s(e){if(e)return t.popups.onRefresh("video.insert",n),t.popups.onHide("image.insert",oe),!0;var i="";t.opts.videoUpload||t.opts.videoInsertButtons.splice(t.opts.videoInsertButtons.indexOf("videoUpload"),1),t.opts.videoInsertButtons.length>1&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.videoInsertButtons)+"</div>");var o,s="",a=t.opts.videoInsertButtons.indexOf("videoUpload"),r=t.opts.videoInsertButtons.indexOf("videoByURL"),l=t.opts.videoInsertButtons.indexOf("videoEmbed");r>=0&&(o=" fr-active",(r>a&&a>=0||r>l&&l>=0)&&(o=""),s='<div class="fr-video-by-url-layer fr-layer'+o+'" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Paste in a video URL")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var c="";l>=0&&(o=" fr-active",(l>a&&a>=0||l>r&&r>=0)&&(o=""),c='<div class="fr-video-embed-layer fr-layer'+o+'" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+t.id+'" type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d="";a>=0&&(o=" fr-active",(a>l&&l>=0||a>r&&r>=0)&&(o=""),d='<div class="fr-video-upload-layer fr-layer'+o+'" id="fr-video-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop video")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+t.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+t.id+'" role="button"></div></div>');var u={buttons:i,by_url_layer:s,embed_layer:c,upload_layer:d,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},p=t.popups.create("video.insert",u);return U(p),p}function a(e){var n,i,o=t.popups.get("video.insert");if(!ve&&!t.opts.toolbarInline){var s=t.$tb.find('.fr-command[data-cmd="insertVideo"]');n=s.offset().left+s.outerWidth()/2,i=s.offset().top+(t.opts.toolbarBottom?10:s.outerHeight()-10)}t.opts.toolbarInline&&(i=o.offset().top-t.helpers.getPX(o.css("margin-top")),o.hasClass("fr-above")&&(i+=o.outerHeight())),o.find(".fr-layer").removeClass("fr-active"),o.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",n,i,0),t.accessibility.focusPopup(o)}function r(e){t.popups.get("video.insert").find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function l(e){t.popups.get("video.insert").find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function c(e){t.popups.get("video.insert").find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function d(e){t.events.focus(!0),t.selection.restore();var n=!1;ve&&(ie(),n=!0),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var i=t.$el.find(".fr-jiv");i.removeClass("fr-jiv"),se(i,t.opts.videoDefaultDisplay,t.opts.videoDefaultAlign),i.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger(n?"video.replaced":"video.inserted",[i])}function u(){var n=e(this);t.popups.hide("video.insert"),n.removeClass("fr-uploading"),n.parent().next().is("br")&&n.parent().next().remove(),y(n.parent()),t.events.trigger("video.loaded",[n.parent()])}function p(e,n,i,o,s){t.edit.off(),m("Loading video"),n&&(e=t.helpers.sanitizeURL(e));var a=function(){var n,a;if(o){t.undo.canDo()||o.find("video").hasClass("fr-uploading")||t.undo.saveStep();var r=o.find("video").data("fr-old-src"),l=o.data("fr-replaced");o.data("fr-replaced",!1),t.$wp?((n=o.clone()).find("video").removeData("fr-old-src").removeClass("fr-uploading"),n.find("video").off("canplay"),r&&o.find("video").attr("src",r),o.replaceWith(n)):n=o;for(var c=n.find("video").get(0).attributes,d=0;d<c.length;d++){var p=c[d];0===p.nodeName.indexOf("data-")&&n.find("video").removeAttr(p.nodeName)}if(void 0!==i)for(a in i)i.hasOwnProperty(a)&&"link"!=a&&n.find("video").attr("data-"+a,i[a]);n.find("video").on("canplay",u),n.find("video").attr("src",e),t.edit.on(),R(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(l?"video.replaced":"video.inserted",[n,s])}else n=C(e,i,u),R(),t.undo.saveStep(),t.events.trigger("video.inserted",[n,s])};h("Loading video"),a()}function h(e){var n=t.popups.get("video.insert");if(n||(n=s()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),ve){var i=ve.find("video");t.popups.setContainer("video.insert",t.$sc);var o=i.offset().left+i.width()/2,a=i.offset().top+i.height();t.popups.show("video.insert",o,a,i.outerHeight())}void 0===e&&m(t.language.translate("Uploading"),0)}function f(e){var n=t.popups.get("video.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("video.fr-error").length)){if(t.events.focus(),t.$el.find("video.fr-error").length&&(t.$el.find("video.fr-error").parent().remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&ve){var i=ve;M(!0),t.selection.setAfter(i.find("video").get(0)),t.selection.restore()}t.popups.hide("video.insert")}}function m(e,n){var i=t.popups.get("video.insert");if(i){var o=i.find(".fr-video-progress-bar-layer");o.find("h3").text(e+(n?" "+n+"%":"")),o.removeClass("fr-error"),n?(o.find("div").removeClass("fr-indeterminate"),o.find("div > span").css("width",n+"%")):o.find("div").addClass("fr-indeterminate")}}function g(e){h();var n=t.popups.get("video.insert").find(".fr-video-progress-bar-layer");n.addClass("fr-error");var i=n.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function v(n){void 0===n&&(n=t.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"");var i=null;if(/^http/.test(n)||(n="https://"+n),t.helpers.isURL(n))for(var o=0;o<e.FE.VIDEO_PROVIDERS.length;o++){var s=e.FE.VIDEO_PROVIDERS[o];if(s.test_regex.test(n)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(s.provider)){i=n.replace(s.url_regex,s.url_text),i=s.html.replace(/\{url\}/,i);break}}i?d(i):t.events.trigger("video.linkError",[n])}function b(n){void 0===n&&(n=t.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""),0!==n.length&&e.FE.VIDEO_EMBED_REGEX.test(n)?d(n):t.events.trigger("video.codeError",[n])}function y(e){D.call(e.get(0))}function w(e){try{if(!1===t.events.trigger("video.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(K(we,e),!1)}catch(t){return K(Te,e),!1}}function _(n){try{var i=e(n).find("Location").text(),o=e(n).find("Key").text();return!1===t.events.trigger("video.uploadedToS3",[i,o,n],!0)?(t.edit.on(),!1):i}catch(e){return K(Te,n),!1}}function T(e){m("Loading video");var n=this.status,i=this.response,o=this.responseXML,s=this.responseText;try{if(t.opts.videoUploadToS3)if(201==n){var a=_(o);a&&p(a,!1,[],e,i||o)}else K(Te,i||o);else if(n>=200&&n<300){var r=w(s);r&&p(r.link,!1,r,e,i||s)}else K(_e,i||s)}catch(e){K(Te,i||s)}}function E(){K(Te,this.response||this.responseText||this.responseXML)}function S(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;m(t.language.translate("Uploading"),n)}}function A(){t.edit.on(),f(!0)}function C(n,i,o){var s,a="";if(i&&void 0!==i)for(s in i)i.hasOwnProperty(s)&&"link"!=s&&(a+=" data-"+s+'="'+i[s]+'"');var r=t.opts.videoDefaultWidth;r&&"auto"!=r&&(r+="px");var l=e('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")+'"><video src="'+n+'" '+a+(r?' style="width: '+r+';" ':"")+" controls>"+t.language.translate("Your browser does not support HTML5 video.")+"</video></span>");l.toggleClass("fr-draggable",t.opts.videoMove),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.videoSplitHTML?t.markers.split():t.markers.insert(),t.html.wrap();var c=t.$el.find(".fr-marker");return t.node.isLastSibling(c)&&c.parent().hasClass("fr-deletable")&&c.insertAfter(c.parent()),c.replaceWith(l),t.selection.clear(),l.find("video").get(0).readyState>l.find("video").get(0).HAVE_FUTURE_DATA||t.helpers.isIOS()?o.call(l.find("video").get(0)):l.find("video").on("canplaythrough load",o),l}function k(n){if(!t.core.sameInstance(ge))return!0;n.preventDefault(),n.stopPropagation();var i=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null),o=n.pageY||(n.originalEvent.touches?n.originalEvent.touches[0].pageY:null);if(!i||!o)return!1;if("mousedown"==n.type){var s=t.$oel.get(0).ownerDocument,a=s.defaultView||s.parentWindow,r=!1;try{r=a.location!=a.parent.location&&!(a.$&&a.$.FE)}catch(e){}r&&a.frameElement&&(i+=t.helpers.getPX(e(a.frameElement).offset().left)+a.frameElement.clientLeft,o=n.clientY+t.helpers.getPX(e(a.frameElement).offset().top)+a.frameElement.clientTop)}t.undo.canDo()||t.undo.saveStep(),(me=e(this)).data("start-x",i),me.data("start-y",o),fe.show(),t.popups.hideAll(),F()}function x(e){if(!t.core.sameInstance(ge))return!0;if(me){e.preventDefault();var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!n||!i)return!1;var o=me.data("start-x"),s=me.data("start-y");me.data("start-x",n),me.data("start-y",i);var a=n-o,r=i-s,l=ve.find("iframe, embed, video"),c=l.width(),d=l.height();(me.hasClass("fr-hnw")||me.hasClass("fr-hsw"))&&(a=0-a),(me.hasClass("fr-hnw")||me.hasClass("fr-hne"))&&(r=0-r),l.css("width",c+a),l.css("height",d+r),l.removeAttr("width"),l.removeAttr("height"),N()}}function $(e){if(!t.core.sameInstance(ge))return!0;me&&ve&&(e&&e.stopPropagation(),me=null,fe.hide(),N(),o(),t.undo.saveStep())}function I(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function O(e,t,n,i){return e.pageX=t,e.pageY=t,k.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,i)),e.pageY=e.pageY+n*Math.floor(Math.pow(1.1,i)),x.call(this,e),$.call(this,e),++i}function L(){var n;if(t.shared.$video_resizer?(ge=t.shared.$video_resizer,fe=t.shared.$vid_overlay,t.events.on("destroy",(function(){ge.removeClass("fr-active").appendTo(e("body:first"))}),!0)):(t.shared.$video_resizer=e('<div class="fr-video-resizer"></div>'),ge=t.shared.$video_resizer,t.events.$on(ge,"mousedown",(function(e){e.stopPropagation()}),!0),t.opts.videoResize&&(ge.append(I("nw")+I("ne")+I("sw")+I("se")),t.shared.$vid_overlay=e('<div class="fr-video-overlay"></div>'),fe=t.shared.$vid_overlay,n=ge.get(0).ownerDocument,e(n).find("body:first").append(fe))),t.events.on("shared.destroy",(function(){ge.html("").removeData().remove(),ge=null,t.opts.videoResize&&(fe.remove(),fe=null)}),!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize.video",(function(){M(!0)})),t.opts.videoResize){n=ge.get(0).ownerDocument,t.events.$on(ge,t._mousedown,".fr-handler",k),t.events.$on(e(n),t._mousemove,x),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,$),t.events.$on(fe,"mouseleave",$);var i=1,o=null,s=0;t.events.on("keydown",(function(n){if(ve){var a=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,r=n.which;(r!==o||n.timeStamp-s>200)&&(i=1),(r==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&r==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?i=O.call(this,n,1,1,i):(r==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&r==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey&&(i=O.call(this,n,2,-1,i)),o=r,s=n.timeStamp}})),t.events.on("keyup",(function(){i=1}))}}function R(){var n,i=Array.prototype.slice.call(t.el.querySelectorAll("video")),o=[];for(n=0;n<i.length;n++)o.push(i[n].getAttribute("src")),e(i[n]).toggleClass("fr-draggable",t.opts.videoMove),""===i[n].getAttribute("class")&&i[n].removeAttribute("class"),""===i[n].getAttribute("style")&&i[n].removeAttribute("style");if(be)for(n=0;n<be.length;n++)o.indexOf(be[n].getAttribute("src"))<0&&t.events.trigger("video.removed",[e(be[n])]);be=i}function N(){ge||L(),(t.$wp||t.$sc).append(ge),ge.data("instance",t);var e=ve.find("iframe, embed, video");ge.css("top",(t.opts.iframe?e.offset().top-1:e.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?e.offset().left-1:e.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",e.outerWidth()).css("height",e.height()).addClass("fr-active")}function D(n){if(n&&"touchend"==n.type&&ye)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;if(t.edit.isDisabled())return!1;for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=t&&e.FE.INSTANCES[i].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),ve=e(this),e(this).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),de(),N(),o(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function M(e){ve&&(B()||!0===e)&&(ge.removeClass("fr-active"),t.toolbar.enable(),ve.removeClass("fr-active"),ve=null,F())}function P(){t.shared.vid_exit_flag=!0}function F(){t.shared.vid_exit_flag=!1}function B(){return t.shared.vid_exit_flag}function H(n){var i=n.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var o=i.files[0];if(o&&o.type&&-1!==o.type.indexOf("video")){if(!t.opts.videoUpload)return n.preventDefault(),n.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var a=t.popups.get("video.insert");return a||(a=s()),t.popups.setContainer("video.insert",t.$sc),t.popups.show("video.insert",n.originalEvent.pageX,n.originalEvent.pageY),h(),t.opts.videoAllowedTypes.indexOf(o.type.replace(/video\//g,""))>=0?j(i.files):K(Se),n.preventDefault(),n.stopPropagation(),!1}}}function j(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("video.beforeUpload",[e]))return!1;var n,i=e[0];if(i.size>t.opts.videoMaxSize)return K(Ee),!1;if(t.opts.videoAllowedTypes.indexOf(i.type.replace(/video\//g,""))<0)return K(Se),!1;if(t.drag_support.formdata&&(n=t.drag_support.formdata?new FormData:null),n){var o;if(!1!==t.opts.videoUploadToS3)for(o in n.append("key",t.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),n.append("success_action_status","201"),n.append("X-Requested-With","xhr"),n.append("Content-Type",i.type),t.opts.videoUploadToS3.params)t.opts.videoUploadToS3.params.hasOwnProperty(o)&&n.append(o,t.opts.videoUploadToS3.params[o]);for(o in t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(o)&&n.append(o,t.opts.videoUploadParams[o]);n.append(t.opts.videoUploadParam,i);var s=t.opts.videoUploadURL;t.opts.videoUploadToS3&&(s=t.opts.videoUploadToS3.uploadURL?t.opts.videoUploadToS3.uploadURL:"https://"+t.opts.videoUploadToS3.region+".amazonaws.com/"+t.opts.videoUploadToS3.bucket);var a=t.core.getXHR(s,t.opts.videoUploadMethod);a.onload=function(){T.call(a,ve)},a.onerror=E,a.upload.onprogress=S,a.onabort=A,h(),t.events.disableBlur(),t.edit.off(),t.events.enableBlur();var r=t.popups.get("video.insert");r&&r.off("abortUpload").on("abortUpload",(function(){4!=a.readyState&&a.abort()})),a.send(n)}}}function U(n){t.events.$on(n,"dragover dragenter",".fr-video-upload-layer",(function(){return e(this).addClass("fr-drop"),!1}),!0),t.events.$on(n,"dragleave dragend",".fr-video-upload-layer",(function(){return e(this).removeClass("fr-drop"),!1}),!0),t.events.$on(n,"drop",".fr-video-upload-layer",(function(i){i.preventDefault(),i.stopPropagation(),e(this).removeClass("fr-drop");var o=i.originalEvent.dataTransfer;if(o&&o.files){var s=n.data("instance")||t;s.events.disableBlur(),s.video.upload(o.files),s.events.enableBlur()}}),!0),t.helpers.isIOS()&&t.events.$on(n,"touchstart",'.fr-video-upload-layer input[type="file"]',(function(){e(this).trigger("click")}),!0),t.events.$on(n,"change",'.fr-video-upload-layer input[type="file"]',(function(){if(this.files){var i=n.data("instance")||t;i.events.disableBlur(),n.find("input:focus").blur(),i.events.enableBlur(),i.video.upload(this.files)}e(this).val("")}),!0)}function W(){t.events.on("drop",H,!0),t.events.on("mousedown window.mousedown",P),t.events.on("window.touchmove",F),t.events.on("mouseup window.mouseup",M),t.events.on("commands.mousedown",(function(e){e.parents(".fr-toolbar").length>0&&M()})),t.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",(function(){M(!0)}))}function K(e,n){t.edit.on(),ve&&ve.find("video").addClass("fr-error"),g(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.error",[{code:e,message:Ae[e]},n])}function G(){var e="";if(t.opts.videoEditButtons.length>0){e+='<div class="fr-buttons">',e+=t.button.buildList(t.opts.videoEditButtons);var n={buttons:e+="</div>"},i=t.popups.create("video.edit",n);return t.events.$on(t.$wp,"scroll.video-edit",(function(){ve&&t.popups.isVisible("video.edit")&&(t.events.disableBlur(),y(ve))})),i}return!1}function V(){if(ve){var e=t.popups.get("video.size"),n=ve.find("iframe, embed, video");e.find('input[name="width"]').val(n.get(0).style.width||n.attr("width")).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height||n.attr("height")).trigger("change")}}function z(){var e=t.popups.get("video.size");e||(e=q()),f(),t.popups.refresh("video.size"),t.popups.setContainer("video.size",t.$sc);var n=ve.find("iframe, embed, video"),i=n.offset().left+n.width()/2,o=n.offset().top+n.height();t.popups.show("video.size",i,o,n.height())}function q(e){if(e)return t.popups.onRefresh("video.size",V),!0;var n={buttons:'<div class="fr-buttons">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>",size_layer:'<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>"},i=t.popups.create("video.size",n);return t.events.$on(t.$wp,"scroll",(function(){ve&&t.popups.isVisible("video.size")&&(t.events.disableBlur(),y(ve))})),i}function Y(e){if(void 0===e&&(e=ve),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function X(e){ve.removeClass("fr-fvr fr-fvl"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?ve.addClass("fr-fvl"):"right"==e&&ve.addClass("fr-fvr"):se(ve,J(),e),de(),N(),o(),t.selection.clear()}function Q(e){if(!ve)return!1;e.find("> *:first").replaceWith(t.icon.create("video-align-"+Y()))}function Z(e,t){ve&&t.find('.fr-command[data-param1="'+Y()+'"]').addClass("fr-active").attr("aria-selected",!0)}function J(e){void 0===e&&(e=ve);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ee(e){ve.removeClass("fr-dvi fr-dvb"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?ve.addClass("fr-dvi"):"block"==e&&ve.addClass("fr-dvb"):se(ve,e,Y()),de(),N(),o(),t.selection.clear()}function te(e,t){ve&&t.find('.fr-command[data-param1="'+J()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ne(){var e=t.popups.get("video.insert");e||(e=s()),t.popups.isVisible("video.insert")||(f(),t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$sc));var n=ve.offset().left+ve.width()/2,i=ve.offset().top+ve.height();t.popups.show("video.insert",n,i,ve.outerHeight())}function ie(){if(ve&&!1!==t.events.trigger("video.beforeRemove",[ve])){var e=ve;t.popups.hideAll(),M(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks(),t.events.trigger("video.removed",[e])}}function oe(){f()}function se(e,n,i){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+i[0]+" fr-dv"+n[0])):"inline"==n?(e.css({display:"inline-block"}),"center"==i?e.css({float:"none"}):"left"==i?e.css({float:"left"}):e.css({float:"right"})):(e.css({display:"block",clear:"both"}),"left"==i?e.css({textAlign:"left"}):"right"==i?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function ae(e){e.hasClass("fr-dvi")||e.hasClass("fr-dvb")||(e.addClass("fr-fv"+Y(e)[0]),e.addClass("fr-dv"+J(e)[0]))}function re(e){se(e,e.hasClass("fr-dvb")?"block":e.hasClass("fr-dvi")?"inline":null,e.hasClass("fr-fvl")?"left":e.hasClass("fr-fvr")?"right":Y(e)),e.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function le(){t.$el.find("video").filter((function(){return 0===e(this).parents("span.fr-video").length})).wrap('<span class="fr-video" contenteditable="false"></span>'),t.$el.find("embed, iframe").filter((function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),e(this).parents("span.fr-video").length>0)return!1;for(var n=e(this).attr("src"),i=0;i<e.FE.VIDEO_PROVIDERS.length;i++){var o=e.FE.VIDEO_PROVIDERS[i];if(o.test_regex.test(n)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(o.provider))return!0}return!1})).map((function(){return 0===e(this).parents("object").length?this:e(this).parents("object").get(0)})).wrap('<span class="fr-video" contenteditable="false"></span>');for(var n=t.$el.find("span.fr-video, video"),i=0;i<n.length;i++){var o=e(n[i]);!t.opts.htmlUntouched&&t.opts.useClasses?(ae(o),t.opts.videoTextNear||o.removeClass("fr-dvi").addClass("fr-dvb")):t.opts.htmlUntouched||t.opts.useClasses||re(o)}n.toggleClass("fr-draggable",t.opts.videoMove)}function ce(){W(),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",(function(){ye=!1})),t.events.$on(t.$el,"touchmove",(function(){ye=!0}))),t.events.on("html.set",le),le(),t.events.$on(t.$el,"mousedown","span.fr-video",(function(e){e.stopPropagation()})),t.events.$on(t.$el,"click touchend","span.fr-video",D),t.events.on("keydown",(function(n){var i=n.which;return!ve||i!=e.FE.KEYCODE.BACKSPACE&&i!=e.FE.KEYCODE.DELETE?ve&&i==e.FE.KEYCODE.ESC?(M(!0),n.preventDefault(),!1):ve&&i!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),!1):void 0:(n.preventDefault(),ie(),t.undo.saveStep(),!1)}),!0),t.events.on("toolbar.esc",(function(){if(ve)return t.events.disableBlur(),t.events.focus(),!1}),!0),t.events.on("toolbar.focusEditor",(function(){if(ve)return!1}),!0),t.events.on("keydown",(function(){t.$el.find("span.fr-video:empty").remove()})),s(!0),q(!0)}function de(){if(ve){t.selection.clear();var e=t.doc.createRange();e.selectNode(ve.get(0)),t.selection.get().addRange(e)}}function ue(){ve?(t.events.disableBlur(),ve.trigger("click")):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())}function pe(e,n){if(ve){var i=t.popups.get("video.size"),o=ve.find("iframe, embed, video");o.css("width",e||i.find('input[name="width"]').val()),o.css("height",n||i.find('input[name="height"]').val()),o.get(0).style.width&&o.removeAttr("width"),o.get(0).style.height&&o.removeAttr("height"),i.find("input:focus").blur(),setTimeout((function(){ve.trigger("click")}),t.helpers.isAndroid()?50:0)}}function he(){return ve}var fe,me,ge,ve,be,ye,we=2,_e=3,Te=4,Ee=5,Se=6,Ae={1:"Video cannot be loaded from the passed link."};return Ae[we]="No link in upload response.",Ae[_e]="Error during file upload.",Ae[Te]="Parsing response failed.",Ae[Ee]="File is too large.",Ae[Se]="Video file type is invalid.",Ae[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",t.shared.vid_exit_flag=!1,{_init:ce,showInsertPopup:i,showLayer:a,refreshByURLButton:r,refreshEmbedButton:l,refreshUploadButton:c,upload:j,insertByURL:v,insertEmbed:b,insert:d,align:X,refreshAlign:Q,refreshAlignOnShow:Z,display:ee,refreshDisplayOnShow:te,remove:ie,hideProgressBar:f,showSizePopup:z,replace:ne,back:ue,setSize:pe,get:he}},e.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),e.FE.DefineIcon("videoByURL",{NAME:"link"}),e.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.FE.DefineIcon("videoEmbed",{NAME:"code"}),e.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.FE.DefineIcon("videoUpload",{NAME:"upload"}),e.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),e.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.FE.DefineIcon("videoDisplay",{NAME:"star"}),e.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("video-align",{NAME:"align-left"}),e.FE.DefineIcon("video-align-left",{NAME:"align-left"}),e.FE.DefineIcon("video-align-right",{NAME:"align-right"}),e.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("videoAlign",{NAME:"align-center"}),e.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.videoAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("video-align-"+i)+'<span class="fr-sr-only">'+this.language.translate(n[i])+"</span></a></li>");return t+"</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("videoReplace",{NAME:"exchange"}),e.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),e.FE.DefineIcon("videoRemove",{NAME:"trash"}),e.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),e.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}}),e.extend(e.FE.DEFAULTS,{wordDeniedTags:[],wordDeniedAttrs:[],wordAllowedStyleProps:["font-family","font-size","background","color","width","text-align","vertical-align","background-color","padding","margin","height","margin-top","margin-left","margin-right","margin-bottom","text-decoration","font-weight","font-style"],wordPasteModal:!0}),e.FE.PLUGINS.wordPaste=function(t){function n(){t.events.on("paste.wordPaste",(function(e){return C=e,t.opts.wordPasteModal?o():a(!0),!1}))}function i(){var e='<div class="fr-word-paste-modal" style="padding: 20px 20px 10px 20px;">';return e+='<p style="text-align: left;">'+t.language.translate("The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?")+"</p>",(e+='<div style="text-align: right; margin-top: 50px;"><button class="fr-remove-word fr-command">'+t.language.translate("Clean")+'</button> <button class="fr-keep-word fr-command">'+t.language.translate("Keep")+"</button></div>")+"</div>"}function o(){if(!A){var n='<h4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.95 73.23" style="height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class="a" d="M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z" transform="translate(-575.97 -827.22)"/><path class="b" d="M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z" transform="translate(-575.97 -827.22)"/></svg> '+t.language.translate("Word Paste Detected")+"</h4>",o=i(),s=t.modals.create(k,n,o),a=s.$body;A=s.$modal,s.$modal.addClass("fr-middle"),t.events.bindClick(a,"button.fr-remove-word",(function(){(A.data("instance")||t).wordPaste.clean()})),t.events.bindClick(a,"button.fr-keep-word",(function(){(A.data("instance")||t).wordPaste.clean(!0)})),t.events.$on(e(t.o_win),"resize",(function(){t.modals.resize(k)}))}t.modals.show(k),t.modals.resize(k)}function s(){t.modals.hide(k)}function a(e){var n=t.opts.wordAllowedStyleProps;e||(t.opts.wordAllowedStyleProps=[]),0===(C=(C=(C=C.replace(/^[\n\r]*/g,"").replace(/^ /g,"")).replace(/[\r\n]* {2,}/g," ").replace(/ {2,}[\r\n]*/g," ")).replace(/>[ \n\r]*</g,"><")).indexOf("<colgroup>")&&(C="<table>"+C+"</table>"),C=S(C,t.paste.getRtfClipboard()),C=t.paste.removeEmptyTags(C),s(),t.paste.clean(C,!0,!0),t.opts.wordAllowedStyleProps=n}function r(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e,t){if(t(e))for(var n=e.firstChild;n;){var i=n,o=n.previousSibling;n=n.nextSibling,l(i,t),i.previousSibling||i.nextSibling||i.parentNode||!n||o==n.previousSibling||!n.parentNode?i.previousSibling||i.nextSibling||i.parentNode||!n||n.previousSibling||n.nextSibling||n.parentNode||(o?n=o.nextSibling?o.nextSibling.nextSibling:null:e.firstChild&&(n=e.firstChild.nextSibling)):n=o?o.nextSibling:e.firstChild}}function c(e){if(!e.getAttribute("style")||!/mso-list:[\s]*l/gi.test(e.getAttribute("style").replace(/\n/gi,"")))return!1;try{if(!e.querySelector('[style="mso-list:Ignore"]'))return!1}catch(e){return!1}return!0}function d(e){return e.getAttribute("style").replace(/\n/gi,"").replace(/.*level([0-9]+?).*/gi,"$1")}function u(e,t){var n=e.cloneNode(!0);if(n.firstElementChild&&"A"==n.firstElementChild.tagName&&(n=n.firstElementChild),-1!=["H1","H2","H3","H4","H5","H6"].indexOf(e.tagName)){var i=document.createElement(e.tagName.toLowerCase());i.setAttribute("style",e.getAttribute("style")),i.innerHTML=n.innerHTML,n.innerHTML=i.outerHTML}l(n,(function(e){return e.nodeType==Node.ELEMENT_NODE&&("mso-list:Ignore"==e.getAttribute("style")&&e.parentNode.removeChild(e),_(e,t)),!0}));var o=n.innerHTML;return o.replace(/<!--[\s\S]*?-->/gi,"")}function p(e,t){var n=/[0-9a-zA-Z]./gi,i=!1;e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstChild&&!(i=i||n.test(e.firstElementChild.firstElementChild.firstChild.data||""))&&e.firstElementChild.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstElementChild.firstChild&&(i=i||n.test(e.firstElementChild.firstElementChild.firstElementChild.firstChild.data||""));var o=i?"ol":"ul",s=d(e),a="<"+o+"><li>"+u(e,t),l=e.nextElementSibling,h=e.parentNode;for(r(e),e=null;l&&c(l);){var f=l.previousElementSibling,m=d(l);if(m>s)a+=p(l,t).outerHTML;else{if(m<s)break;a+="</li><li>"+u(l,t)}if(s=m,l.previousElementSibling||l.nextElementSibling||l.parentNode){var g=l;l=l.nextElementSibling,r(g),g=null}else l=f?f.nextElementSibling:h.firstElementChild}a+="</li></"+o+">";var v=document.createElement("div");return v.innerHTML=a,v.firstElementChild}function h(e,t){for(var n=document.createElement(t),i=0;i<e.attributes.length;i++){var o=e.attributes[i].name;n.setAttribute(o,e.getAttribute(o))}return n.innerHTML=e.innerHTML,e.parentNode.replaceChild(n,e),n}function f(n,i){t.node.clearAttributes(n);for(var o=n.firstElementChild,s=0,a=!1,l=null;o;){o.firstElementChild&&-1!=o.firstElementChild.tagName.indexOf("W:")&&(o.innerHTML=o.firstElementChild.innerHTML),(l=o.getAttribute("width"))||a||(a=!0),s+=parseInt(l,10),(!o.firstChild||o.firstChild&&o.firstChild.data==e.FE.UNICODE_NBSP)&&(o.firstChild&&r(o.firstChild),o.innerHTML="<br>");for(var d=o.firstElementChild,u=1==o.children.length;d;)"P"!=d.tagName||c(d)||u&&m(d),d=d.nextElementSibling;if(i){var p=o.getAttribute("class");if(p){var h=(p=g(p)).match(/xl[0-9]+/gi);if(h){var f="."+h[0];i[f]&&v(o,i[f])}}i.td&&v(o,i.td)}var b=o.getAttribute("style");b&&(b=g(b))&&";"!=b.slice(-1)&&(b+=";");var y=o.getAttribute("valign");if(!y&&b){var w=b.match(/vertical-align:.+?[; "]{1,1}/gi);w&&(y=w[w.length-1].replace(/vertical-align:(.+?)[; "]{1,1}/gi,"$1"))}var _=null;if(b){var T=b.match(/text-align:.+?[; "]{1,1}/gi);T&&(_=T[T.length-1].replace(/text-align:(.+?)[; "]{1,1}/gi,"$1")),"general"==_&&(_=null)}var E=null;if(b){var S=b.match(/background:.+?[; "]{1,1}/gi);S&&(E=S[S.length-1].replace(/background:(.+?)[; "]{1,1}/gi,"$1"))}var A=o.getAttribute("colspan"),C=o.getAttribute("rowspan");A&&o.setAttribute("colspan",A),C&&o.setAttribute("rowspan",C),y&&(o.style["vertical-align"]=y),_&&(o.style["text-align"]=_),E&&(o.style["background-color"]=E),l&&o.setAttribute("width",l),o=o.nextElementSibling}for(o=n.firstElementChild;o;)l=o.getAttribute("width"),a?o.removeAttribute("width"):o.setAttribute("width",100*parseInt(l,10)/s+"%"),o=o.nextElementSibling}function m(e){var t=e.parentNode,n=e.getAttribute("align");n&&(t&&"TD"==t.tagName?(t.setAttribute("style",t.getAttribute("style")+"text-align:"+n+";"),e.removeAttribute("align")):(e.style["text-align"]=n,e.removeAttribute("align")))}function g(e){return e.replace(/\n|\r|\n\r|&quot;/g,"")}function v(e,t,n){if(t){var i=e.getAttribute("style");i&&";"!=i.slice(-1)&&(i+=";"),t&&";"!=t.slice(-1)&&(t+=";"),t=t.replace(/\n/gi,"");var o=null;o=n?(i||"")+t:t+(i||""),e.setAttribute("style",o)}}function b(e){var t=e.getAttribute("style");if(t){(t=g(t))&&";"!=t.slice(-1)&&(t+=";");var n=t.match(/(^|\S+?):.+?;{1,1}/gi);if(n){for(var i={},o=0;o<n.length;o++){var s=n[o].split(":");2==s.length&&("text-align"==s[0]&&"SPAN"==e.tagName||(i[s[0]]=s[1]))}var a="";for(var r in i)if(i.hasOwnProperty(r)){if("font-size"==r&&"pt;"==i[r].slice(-3)){var l=null;try{l=parseFloat(i[r].slice(0,-3),10)}catch(e){}l&&(l=Math.round(1.33*l),i[r]=l+"px;")}a+=r+":"+i[r]}a&&e.setAttribute("style",a)}}}function y(e){for(var t=e.match(/[0-9a-f]{2}/gi),n=[],i=0;i<t.length;i++)n.push(String.fromCharCode(parseInt(t[i],16)));var o=n.join("");return btoa(o)}function w(t,n){if(n){var i;if("IMG"==t.tagName){var o=t.getAttribute("src");if(!o||-1==o.indexOf("file://"))return;i=x[t.getAttribute("v:shapes")]}else i=t.parentNode.getAttribute("o:spid");if(i){var s="hplid"+i.substring(8),a=n.split(s);if(!a||2==a.length){var r=a[1].split("bliptag");if(!(r&&r.length<2)){var l=null;if(-1!=r[0].indexOf("pngblip")?l="image/png":-1!=r[0].indexOf("jpegblip")&&(l="image/jpeg"),l){var c=r[1].split("}");if(!(c&&c.length<2)){var d;if(c.length>2&&-1!=c[0].indexOf("blipuid"))d=c[1].split(" ");else{if((d=c[0].split(" "))&&d.length<2)return;d.shift()}var u="data:"+l+";base64,"+y(d.join(""));"IMG"===t.tagName?(t.src=u,t.setAttribute("data-fr-image-pasted",!0)):e(t.parentNode).before('<img data-fr-image-pasted="true" src="'+u+'" style="'+t.parentNode.getAttribute("style")+'">').remove()}}}}}}}function _(t,n){var i=t.tagName,o=i.toLowerCase();if(t.firstElementChild&&("I"==t.firstElementChild.tagName?h(t.firstElementChild,"em"):"B"==t.firstElementChild.tagName&&h(t.firstElementChild,"strong")),-1!=["SCRIPT","APPLET","EMBED","NOFRAMES","NOSCRIPT"].indexOf(i))return r(t),!1;"O:P"==i&&"&nbsp;"==t.innerHTML&&(t.innerHTML=e.FE.INVISIBLE_SPACE);var s=-1,a=["META","LINK","XML","ST1:","O:","W:","FONT"];for(s=0;s<a.length;s++)if(-1!=i.indexOf(a[s]))return t.innerHTML?(t.outerHTML=t.innerHTML,r(t),!1):(r(t),!1);if("TD"!=i){var l=t.getAttribute("class");if(n&&l){var c=(l=g(l)).split(" ");for(s=0;s<c.length;s++){var d=[],u="."+c[s];d.push(u),u=o+u,d.push(u);for(var p=0;p<d.length;p++)n[d[p]]&&v(t,n[d[p]])}t.removeAttribute("class")}n&&n[o]&&v(t,n[o])}if(-1!=["P","H1","H2","H3","H4","H5","H6","PRE"].indexOf(i)){var b=t.getAttribute("class");if(b&&(n&&n[i.toLowerCase()+"."+b]&&v(t,n[i.toLowerCase()+"."+b]),-1!=b.toLowerCase().indexOf("mso"))){var y=g(b);(y=y.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi,""))?t.setAttribute("class",y):t.removeAttribute("class")}var w=t.getAttribute("style");if(w){var _=w.match(/text-align:.+?[; "]{1,1}/gi);_&&_[_.length-1].replace(/(text-align:.+?[; "]{1,1})/gi,"$1")}m(t)}if("TR"==i&&f(t,n),"A"==i&&!t.attributes.getNamedItem("href")&&t.innerHTML&&(t.outerHTML=t.innerHTML),"TD"!=i&&"TH"!=i||t.innerHTML||(t.innerHTML="<br>"),"TABLE"==i&&(t.style.width="100%"),t.getAttribute("lang")&&t.removeAttribute("lang"),t.getAttribute("style")&&-1!=t.getAttribute("style").toLowerCase().indexOf("mso")){var T=g(t.getAttribute("style"));(T=T.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi,""))?t.setAttribute("style",T):t.removeAttribute("style")}return!0}function T(e){var t={},n=e.getElementsByTagName("style");if(n.length){var i=n[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi);if(i)for(var o=0;o<i.length;o++){var s=i[o],a=s.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),r=s.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");a=a.replace(/^[\s]|[\s]$/gm,""),r=r.replace(/^[\s]|[\s]$/gm,""),a=a.replace(/\n|\r|\n\r/g,""),r=r.replace(/\n|\r|\n\r/g,"");for(var l=a.split(", "),c=0;c<l.length;c++)t[l[c]]=r}}return t}function E(e){for(var t=e.split("v:shape"),n=1;n<t.length;n++){var i=t[n],o=i.split(' id="')[1];if(o&&o.length>1){o=o.split('"')[0];var s=i.split(' o:spid="')[1];s&&s.length>1&&(s=s.split('"')[0],x[o]=s)}}}function S(n,i){E(n=n.replace(/[.\s\S\w\W<>]*(<html[^>]*>[.\s\S\w\W<>]*<\/html>)[.\s\S\w\W<>]*/gi,"$1"));var o=(new DOMParser).parseFromString(n,"text/html"),s=o.head,a=o.body,d=T(s);l(a,(function(t){if(t.nodeType==Node.TEXT_NODE&&/\n|\u00a0/.test(t.data)){if(!/\S| /.test(t.data))return t.data==e.FE.UNICODE_NBSP?(t.data="​",!0):(r(t),!1);t.data=t.data.replace(/\n/gi," ")}return!0})),l(a,(function(e){return e.nodeType!=Node.ELEMENT_NODE||"V:IMAGEDATA"!=e.tagName&&"IMG"!=e.tagName||w(e,i),!0})),l(a,(function(e){if(e.nodeType==Node.TEXT_NODE)return e.data=e.data.replace(/<br>(\n|\r)/gi,"<br>"),!1;if(e.nodeType==Node.ELEMENT_NODE){if(c(e)){var t=e.parentNode,n=e.previousSibling,i=p(e,d),o=null;return(o=n?n.nextSibling:t.firstChild)?t.insertBefore(i,o):t.appendChild(i),!1}return _(e,d)}return e.nodeType!=Node.COMMENT_NODE||(r(e),!1)})),l(a,(function(e){if(e.nodeType==Node.ELEMENT_NODE){var t=e.tagName;if(!e.innerHTML&&-1==["BR","IMG"].indexOf(t)){for(var n=e.parentNode;n&&(r(e),!(e=n).innerHTML);)n=e.parentNode;return!1}b(e)}return!0}));var u=a.outerHTML,h=t.opts.htmlAllowedStyleProps;return t.opts.htmlAllowedStyleProps=t.opts.wordAllowedStyleProps,u=t.clean.html(u,t.opts.wordDeniedTags,t.opts.wordDeniedAttrs,!1),t.opts.htmlAllowedStyleProps=h,u}var A,C,k="word_paste",x={};return{_init:n,clean:a}}})?i.apply(t,o):i)||(e.exports=s)},23548:(e,t,n)=>{n(39028);let i=$.FE.MODULES.helpers;$.FE.MODULES.helpers=function(e){let t=i(e);return t.sanitizeURL=function(e){return e},t}},51620:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__(43838),__webpack_require__(4949),__webpack_require__(39028),window.last_dialog_id={close(){closeLastDialog()}},window.last_addon_dialog_id={close(){window.closeLastAddonDialog()}},window.splynxDialogs=[],window.splynxAddonDialogs=[],window.password_window_id=0,window.is_animate=!1,window.decimals_separator=".",window.globalEditor=null,window.tributeAttached=!1,window.disableEditorReinit=!1,window.mentionsList=null,window.mentionsNeedsUpdating=!1,window.getMentionsIsRun=!1,window.vueACSComponentsMixins={methods:{humanizeACSAttributeName(e){if(empty(e))return"";return humanizeString(e.replace(/^(X_(.*)_)/,""))}}},window.vueHelpersMixins={methods:{empty:e=>empty(e)}},window.load_dt_language=function(e,t){$.ajax({dataType:"json",url:`/js/locale/datatable/${e}.json`,success(e){$.extend(e,t),$.extend($.fn.DataTable.defaults,{language:e})}})},window.time=function(){return Math.round((new Date).getTime()/1e3)},window.downloadURL=function(e){window.$idown?window.$idown.attr("src",e):window.$idown=$("<iframe>",{id:"idown",src:e}).hide().appendTo("body")},window.download_iframe=null,window.download_by_iframe=function(e){const t=()=>{if(window.download_iframe)return window.download_iframe.attr("src",e),!1;window.download_iframe=$("<iframe>",{id:"idown",src:e}).hide().appendTo("body")};if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return $.ajax({type:"GET",url:e,success(e){"Not found!"===e?show_error(e,4):t()}}),!1;t()},window.show_error=function(e,t,n,i){show_notify("error",e,t,n,null,null,i)},window.showErrors=function(e){e?.forEach((e=>{window.show_error(e,5)}))},window.show_message=function(e,t,n,i){show_notify("info",e,t,n,null,null,i)},window.show_success=function(e,t,n,i){show_notify("success",e,t,n,null,null,i)},window.show_warning=function(e,t,n,i){show_notify("warning",e,t,n,null,null,i)},window.show_information=function(e,t,n,i){show_notify("info",e,t,n,null,null,i)},window.show_simple_notify=function(e,t){window.xApp.$store.dispatch("global_notifications_store/showSimpleNotify",{message:e,timeout:t})},window.getNotyClasses=function(e){switch(e){case"success":return{colorClass:"text-success",iconClass:"fa-check"};case"info":case"message":default:return{colorClass:"",iconClass:"fa-info"};case"error":return{colorClass:"text-light",iconClass:"fa-ban"};case"warning":return{colorClass:"text-warning",iconClass:"fa-exclamation-triangle"}}},window.close_notify=function(){window.xApp.$store.dispatch("global_notifications_store/cleanNotifications")},window.show_notify=function(e,t,n,i,o,s){if(!window.xApp){let{iconClass:i,colorClass:o}=window.getNotyClasses(e);return noty({text:`<div class="activity-item"><i class="fa ${i} ${o}"></i> <div class="activity ${o}">${t}<span>&nbsp;</span></div> </div>`,layout:"topRight",timeout:1e3*n,type:e}),!1}if("string"!=typeof t&&t?.length)return t?.forEach((t=>{window.show_notify(e,t,n,i,o,s)})),!0;window.xApp.$store.dispatch("global_notifications_store/showNotify",{type:e,message:t,timeout:n,to_manager:i,action_button:o,close_button:s})},window.isValidEmail=function(e){return e.indexOf(".")>2&&e.indexOf("@")>0},window.isValidMobile=function(e){return 13==e.length&&"+"==e.charAt(0)},window.isValidPhone=function(e){return 0==e.length||7==e.length},window.makeSelect2=function(e){let t;t=$(e).length?$(e).find("select.select2"):$("select.select2"),t.each((function(){void 0===$(this).data("select2")&&$(this).select2({width:"resolve"}),empty($(this).data("select2"))&&$(window).on("resize",(()=>{document.querySelectorAll(".select2.select2-container").forEach((e=>{e.removeAttribute("style")}))}))})),window.setGlobalSelects(t),window.autosize($("textarea"))},window.makeMultileSelect=function(e,t){let n;void 0===t&&(t={}),n=$(e).length?$(e).find("select[multiple='multiple']"):$("select[multiple='multiple']"),n.each((function(){if(!empty($(this).data("multipleSelect")))return;let e=this,n=!1,i=5,o=e.style.width;if(null!=$("optgroup",e).length&&$("optgroup",e).length>0&&(n=!0,i=0),$(this).attr("data-check-all")){let e=[];$(this).find("option").each((function(){e.push($(this).val())})),$(this).val(e)}""==o&&(o="100%");let s="";$(".ui-dialog").length&&(s=".splynx-isp");let a={displayValues:n,minimumCountSelected:i,width:o,container:s,filter:!0,placeholder:$(this).attr("placeholder")||"",onOpen(){window.fixDropDownPosition(e),$(window).on("scroll",(()=>{window.fixDropDownPosition(e)}));let t,n,i,o,s,a=$(e).data("multipleSelect"),r={};if($(e).closest(".ui-dialog").length>0){$(".splynx-dialog-content").css({overflow:"hidden"}),t=$(e).closest(".ui-dialog-content"),n=a.$drop,i=$(t).height(),o=$(e).outerWidth(),n.css({bottom:"unset"}),s=n.height(),r={width:o,position:"fixed",bottom:"unset"};let l=$(e).parent().find(".ms-parent").offset().top,c=$(window).scrollTop(),d=$(e).parent().find(".ms-parent").height();n.hasClass("top")?r.top=l-c-s:r.top=l-c+d,s>0&&(r.height=s),n.css(r);let u=$(n).offset().top-$(t).offset().top+$(t).scrollTop();u+$(n).find("ul").height()>i&&$(t).scrollTop(u),$(n).find("ul").css("max-height",`${this.maxHeight}px`),$(document).ready((()=>{$(document).off("focusin"),$(".ui-dialog ~ .ms-drop").css("height","auto"),$(".ms-drop .input-ms-search").each((function(){$(this).is(":visible")&&$(this).get(0).focus()}))}))}$(e).next(".ms-parent").find(".ms-choice").addClass("multipleselect-opened"),$(window).on("resize",(()=>{let i=$(".ui-dialog-content .ms-parent").offset()?.top;null===i&&(i=0);let o=i-$(window).scrollTop()+$(".ms-parent").height();o&&$(n).css("top",o),$(n).css("left",$(e).offset().left),$(n).css("width",$(t).find(".ms-choice").width())}))},onClose(){$(window).off("scroll"),$(".splynx-dialog-content").css({"overflow-x":"hidden","overflow-y":"auto"}),$(e).next(".ms-parent").find(".ms-choice").removeClass("multipleselect-opened")},onClick(){let t=document.createEvent("CustomEvent");t.initEvent("change-multiple-select",!0,!0),t.eventName="change-multiple-select",t.multipleSelectSelectedValues=$(e).val(),e.dispatchEvent(t)},...t};$(this).multipleSelect(a),$(this).next(".ms-parent").find(".ms-search input").addClass("input-ms-search"),$(this).attr("readonly")&&$(this).multipleSelect("disable")})),window.setGlobalSelects(n)},window.setGlobalSelects=e=>{window.allSelects&&window.allSelects.length?window.allSelects.push(...e):window.allSelects=[...e]},window.makeDatepicker=function(e){let t;t=$(e).length?$(e).find("input.datepicker_auto"):$("input.datepicker_auto"),t.daterangepicker(window.daterangepicker_default_config),$(e).length?($(e).find("input.daterangepicker_single_auto").daterangepicker(window.daterangepicker_single_default_config),$(e).find("input.daterangepicker_single_datetime_auto").daterangepicker(window.daterangepicker_single_datetime_default_config)):($("input.daterangepicker_single_auto").daterangepicker(window.daterangepicker_single_default_config),$("input.daterangepicker_single_datetime_auto").daterangepicker(window.daterangepicker_single_datetime_default_config))},window.makeDecimalInput=function(e){function t(e){let t=$(e).attr("decimals")??window.spl_config.numberConfig.decimal.digits;$(e).number(!0,Number(t),window.decimals_separator,"")}$(e).length?($(e).find("input.decimal").on("keyup",(function(){$(e).find("input.decimal").each((function(){t(this)})),$(e).find("input.decimal_finance").number(!0,Number(window.spl_config.numberConfig.decimal_finance.digits),window.decimals_separator,""),window.fixNumber(this)})),$(e).find("input.tax_input").number(!0,window.tax_decimals,window.decimals_separator,"")):($("input.decimal").each((function(){t(this)})),$("input.decimal_finance").number(!0,Number(window.spl_config.numberConfig.decimal_finance.digits),window.decimals_separator,""),$("input.decimal").on("keyup",(function(){window.fixNumber(this)})),$("input.tax_input").number(!0,window.tax_decimals,window.decimals_separator,""))},window.small_dialog=function(e,t,n,i,o){let s=this,a={class:"splynx-msg",dialog:{height:"250",width:"450",title:e,autoOpen:!1,resizable:!1,buttons:{Ok(){$(this).dialog("close")}}}};this.opts=jQuery.extend(!0,a,n,{dialog:{autoOpen:!1,close(){s.close(),"function"==typeof o&&o()},dialogClass:"spl-dialog"}}),n&&n.dialog&&n.dialog.buttons&&"object"==typeof n.dialog.buttons&&(this.opts.dialog.buttons=n.dialog.buttons),this.dialog=jQuery("<div />").addClass(this.opts.class).dialog(this.opts.dialog),this.content=jQuery('<div class="splynx-dialog-content" />').appendTo(this.dialog),this.option=function(e,t){return this.dialog.dialog("option",e,t)};let r=$(".ui-dialog-titlebar-close");r.empty(),r.append('<i class="icon-ic_fluent_dismiss_24_regular"></i>'),this.open=function(){return this.dialog.attr("unselectable","on").dialog("open"),$("body").append($("<div>").addClass("ui-widget-overlay ui-front").css("z-index","90")),this.content.html(t),"function"==typeof i&&i(),this},this.close=function(){this.dialog.dialog("destroy").remove(),$(".ui-widget-overlay").remove(),"function"==typeof o&&o()},"function"==typeof o&&r.on("click",(()=>{o()}))},window.isHaveUnsavedData=function(e){let t;return t=$(e).find("form").length<=0?$(e).closest("form[data-form-changed]:visible:not([data-silent-form])"):$(e).find("form[data-form-changed]:visible:not([data-silent-form])"),t.length>0},window.forgetUnsavedData=function(e){let t;t=$(e).find("form").length<=0?$(e).closest("form[data-form-changed]:visible:not([data-silent-form])"):$(e).find("form[data-form-changed]:visible:not([data-silent-form])"),t.removeAttr("data-form-changed")},window.showUnsavedDataDialog=function(e,n,i,o){void 0===o&&(o=t("common","Are you sure that you want to leave page? All unsaved data will be lost!")),window.vue_confirm_dialog(o,(()=>{forgetUnsavedData($(e)),n()}),i)},window.checkUnsavedDataBeforeLeavePage=function(e,t,n,i){void 0===n&&(n="#content, .splynx-dialog-content, .vue-dialog-body"),isHaveUnsavedData(n)?window.showUnsavedDataDialog(n,e,t,i):e()},window.checkUnsavedDataBeforeLeaveTab=function(e,n,i){checkUnsavedDataBeforeLeavePage(n,i,e,t("common","Are you sure that you want to leave tab? All unsaved data will be lost!"))},window.checkUnsavedDataBeforeCloseDialog=function(e,n,i){return!!isHaveUnsavedData(e)&&(window.vue_confirm_dialog(t("common","Are you sure that you want to close dialog? All unsaved data will be lost!"),n,i),!0)},window.vue_confirm_dialog=function(e,t,n,i){showModal("confirm-forget-unsaved-data-modal",{onSubmit:t,onDismiss:function(){"function"==typeof n&&n()},onClose:function(){"function"==typeof i&&n()},text:e})},window.splynx_dialog=function(url,o,data){let self=this,defaults={class:"splynx-msg",dialog:{height:"250",title:"Loading...",autoOpen:!1,resizable:!0,dialogClass:"spl-dialog"}};this.opts=$.extend(!0,defaults,o,{dialog:{autoOpen:!1}}),o&&o.dialog&&o.dialog.buttons&&"object"==typeof o.dialog.buttons&&(this.opts.dialog.buttons=o.dialog.buttons),this.dialog=$("<div />").addClass(this.opts.class).dialog(this.opts.dialog),this.content=$('<div class="splynx-dialog-content" />').appendTo(this.dialog),this.option=function(e,t){return this.dialog.dialog("option",e,t)},$(this.dialog).on("dialogopen",(function(){$("body").addClass("modal-open");let e=$(this.dialog);$(window).resize((function(){let t=Math.floor(window.innerWidth/2),n=Math.floor(window.innerHeight/2),i=$(".ui-dialog").outerWidth()/2,o=$(".ui-dialog").outerHeight()/2;if($(".ui-dialog").css({top:n-o,left:t-i}),$(window).width()<=1024){let t=e.parent().width(),n=$(this).outerWidth()-$(this).width();$(".splynx-msg").css("minHeight","300px"),$(this.dialog).width(t-n)}}))}));const closeFloatElementsInside=()=>{window.allSelects&&window.allSelects.forEach((e=>{$(e).length&&($(e).data("select2")?$(e).select2("close"):$(document).click())}))};this.close_confirmed=!1,$(this.dialog).on("dialogbeforeclose",(()=>{if("function"==typeof window.beforeCloseCallback&&!window.beforeCloseCallback(self.dialog))return!1;let e=self.close_confirmed||!checkUnsavedDataBeforeCloseDialog(self.dialog,(()=>{self.close_confirmed=!0,self.dialog.dialog("close")}));return self.close_confirmed=!1,e})),$(this.dialog).on("dialogclose",(function(){self.enableScrollingAfterClose&&$("body").removeClass("modal-open"),window.removeDatepicker(this.dialog),$(".webui-popover").detach(),$(".tipswift").detach(),null!=window.log_socket&&window.log_socket.disconnect(),self.dialog.remove(),window.destroyDialog(self),o&&o.customClose&&"function"==typeof o.customClose&&o.customClose()})),$(this.dialog).on("dialogdrag",((e,t)=>{$(window).scrollTop(self.startScrollPosition),t.position.top=Math.max(t.position.top,0),t.position.top=Math.min(t.position.top,$(window).height()-$(e.target).parent().height()),closeFloatElementsInside()})),$(this.dialog).on("dialogresizestop",(function(){let e=$(this).parent().height(),t=$(this).parent().width(),n=$(this).prev(".ui-dialog-titlebar").outerHeight(),i=$(this).parent().find(".ui-dialog-buttonpane").outerHeight(),o=$(this).outerHeight()-$(this).height(),s=$(this).outerWidth()-$(this).width();$(this).height(e-n-i-o),$(this).width(t-s)})),this.open=function(callbacks){let xhr;$(this.dialog).parent().css("position","fixed"),this.startScrollPosition=$(window).scrollTop(),this.enableScrollingAfterClose=!0,$(".ui-dialog.ui-widget").length>1&&(this.enableScrollingAfterClose=!1),this.dialog.attr("unselectable","on").dialog("open"),this.content.html('<br><div id="dialog_loader"></div>'),$("#dialog_loader").LJS({left:100}),$(this.dialog).parent().attr("id",window.urlToId(url,"dialog")),$(this.dialog).parent().data("url_model",url);let closeButton=$(this.dialog).closest(".spl-dialog").find(".ui-dialog-titlebar-close");closeButton.empty(),closeButton.append('<i class="fa fa-close icon-ic_fluent_dismiss_24_regular"></i>');let abortXhr=function(){xhr&&"function"==typeof xhr.abort&&xhr.abort()},self=this;return xhr=$.ajax({url,dataType:"json",data,type:void 0===data?"GET":"POST",beforeSend(){self.dialog.on("dialogclose",abortXhr)},complete(){self.dialog.off("dialogclose",abortXhr)},success(data){if($("#dialog_loader").LJS("Stop"),!isset(data,"dialog"))return isset(data,"message")?Array.isArray(data.message)?show_error(data.message[0],5):show_error(data.message,5):show_error("Can't open dialog - invalid dialog data!",5),void self.close();$.each(data.dialog,((e,t)=>{"height"==e&&(t+=45)>$(window).height()&&(t=$(window).height()),"id"===e&&$(self.dialog).parent().attr("id",t),self.option(e,t)}));let customContentButtons=[];if(data.button){let btn=[];$.each(data.button,((n,v)=>{"object"==typeof v?(empty(v.customContent)||customContentButtons.push({id:v.id,content:v.customContent}),btn.push({text:n,id:v.id,click(){eval(v.click)}})):btn.push({text:n,click(){eval(v)}})})),self.option("buttons",btn)}self.content.html(data.content),makeSelect2(),makeMultileSelect(),makeDatepicker(),makeDecimalInput(),processPasswords(),processValidationgInputs(),null!=data.script&&(0,eval)(data.script),null!=callbacks&&null!=callbacks.success&&"function"==typeof callbacks.success&&callbacks.success(),$.each(customContentButtons,((e,t)=>{$(`#${t.id}`).replaceWith(t.content)}))},error(e){let t=e.responseText;self.close(),"abort"!==e.statusText&&(-1!==t.indexOf("top.location.href")?document.location.reload():show_error("Error",5))}}),this},this.close=function(){this.dialog.dialog("instance")&&this.dialog.dialog("close")},splynx_event_bus.reinitEvent("before_switch_page",(()=>{this.close()}))},window.downloadAllFiles=function(){window.location.href=window.location.origin+$("#ticket_download_all").val()},window.confirm_dialog=function(e,n,i){return void 0===n&&(n=t("common","Confirm action")),new Promise(((o,s)=>{let a={};a[t("common","Yes")]=function(){$(this).dialog("close"),o()},a[t("common","No")]=function(){$(this).dialog("close"),s()},show_dialog(n,e,{dialog:{modal:!0,buttons:a,height:null!=i?i:"250",width:"350"}})}))},window.closeLastDialog=function(){window._closeLastDialogInArray(window.splynxDialogs)},window.closeLastAddonDialog=function(){window._closeLastDialogInArray(window.splynxAddonDialogs)},window._closeLastDialogInArray=function(e){if(empty(e))return;let t=e.length-1,n=e[t];n.close(),e.splice(t,1),$(document).trigger("dialog-closed",n)},window.closeAllDialogs=function(){window._closeDialogs(window.splynxDialogs)},window.closeAllVueDialogs=function(){window.xApp.$children[0].$refs&&window.xApp.$children[0].$refs?.modalWrapper?window.xApp.$children[0].$refs?.modalWrapper?.modals?.forEach((e=>{window.xApp.$modals.dismiss(e.name)})):window.xApp.$children[0].$children[0].$refs?.modalWrapper?.modals?.forEach((e=>{window.xApp.$modals.dismiss(e.name)}))},window.closeAllAddonDialogs=function(){window._closeDialogs(window.splynxAddonDialogs)},window._closeDialogs=function(e){if(empty(e))return;let t=e.length;for(let n=0;n<t;n++){let t=e.pop();"function"==typeof t.close&&(t.close(),$(document).trigger("dialog-closed",t))}},window.getLastDialog=function(){return window._getLastDialogFromArray(window.splynxDialogs)},window.getLastAddonDialog=function(){return window._getLastDialogFromArray(window.splynxAddonDialogs)},window._getLastDialogFromArray=function(e){return empty(e)?null:e[e.length-1]},window.registerDialog=function(e){window.splynxDialogs.push(e)},window.registerAddonDialog=function(e){window.splynxAddonDialogs.push(e)},window.destroyDialog=function(e){window._destroyDialogFromArray(window.splynxDialogs,e),window._destroyDialogFromArray(window.splynxAddonDialogs,e)},window._destroyDialogFromArray=function(e,t){if(!empty(e))for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),void $(document).trigger("dialog-closed",t)},window.closeDatepicker=function(e){(void 0!==e?$(e):$(".content.active")).find(":data(daterangepicker)").each(((e,t)=>{"function"==typeof $(t).data("daterangepicker").hide&&$(t).data("daterangepicker").hide()}))},window.closeSelects=function(e){(void 0!==e?$(e):$(".content.active")).find("select.select2, select.async-select").each(((e,t)=>{$(t).data("select2")&&$(t).select2("close")}))},window.closeMultipleSelects=function(e){(void 0!==e?$(e):$(".content.active")).find('select[multiple="multiple"]').each(((e,t)=>{$(t).multipleSelect("close")}))},window.removeDatepicker=function(e){$(e).find(":data(daterangepicker)").each(((e,t)=>{"function"==typeof $(t).data("daterangepicker").remove&&$(t).data("daterangepicker").remove()}))},window.removeWebuiPopover=function(){$("body").find(".webui-popover.in, .webui-popover.out").each((function(){$(this).remove()}))},window.urlToId=function(e,t,n){if(null==e)return null;null==t&&(t=""),null==n&&(n="-");let i=document.createElement("a");i.href=e;let o=i.pathname.replace(/^\/+|\/+$/g,"").replace(/\/+|-+/g,n);return t?t+n+o:o},window.processDT=function(){$("#content .active .dataTables_wrapper").each((function(){let e=$(this).attr("id");if($(this).is(":visible")){if(null==e)return;let t=e.replace("_wrapper",""),n=$(`#${t}`),i=n.DataTable();$(`#${t}`).css("width","100%"),i.columns.adjust(),i.responsive.recalc();let o=!0;-1!==["admin_support_tickets_opened_list","admin_support_tickets_closed_list","admin_support_tickets_trash_list","admin_customers_online_list_table","customers_list_table","admin_finance_invoice_list"].indexOf(t)&&(o=!1),n.attr("data-server-side")&&!0===o&&(o="true"===n.attr("data-server-side")),o&&i.draw()}}))},window.loadUI=function(){$(".loader").show(),$(".loader").stop(),$(".loader").css({left:($(document).width()-18)/2,opacity:"0.2",backgroundColor:"#FFFFFF"}).fadeTo(300,.4)},window.unloadUI=function(){window.is_animate=!1,$(".loader").fadeTo(300,0,(()=>{$(".loader").hide(),$(".loader").stop(!0,!1)}))},$((()=>{$(".loader").fadeTo(0,0),window.registerLogoutHandler()})),window.show_dialog=function(e,t,n,i,o){new window.small_dialog(e,t,n,i,o).open()},window.open_dialog=function(e,t,n){null==t&&(t="");let i=null;i=null==n?new splynx_dialog(`/admin/${e}/${t}`,{dialog:{modal:!0}}).open():new splynx_dialog(`/admin/${e}/${t}/${n}`,{dialog:{modal:!0}}).open(),registerDialog(i)},function(e){e.fn.deSubmit=function(){return this.each((function(){let t=e(this);t.off("submit"),t.submit((()=>!1)),e("#tiptip_holder").fadeOut(0)}))}}(jQuery),window.open_dialog_new=function(e,t){let n=new splynx_dialog(`/admin/${e}`,{dialog:{modal:!0}},t).open();window.registerDialog(n)},window.open_addon_dialog=function(e,t){let n=new splynx_dialog(`/admin/${e}`,{dialog:{modal:!0}},t).open();window.registerAddonDialog(n)},window.open_password_window=function(e,t){window.password_window_id=new splynx_dialog(`/admin/${e}`,{dialog:{modal:!0}},t).open(),window.registerDialog(window.password_window_id)},window.open_image_window=function(e,t){window.image_window_id=new splynx_dialog(`/admin/${e}`,{dialog:{modal:!0}},t).open(),window.registerDialog(window.image_window_id)},window.open_portal_dialog=function(e,t){let n=new splynx_dialog(`/portal/${e}`,{dialog:{modal:!0}},t).open();window.registerDialog(n)},window.open_dialog_for_save_template=function(e,t){window.dialog_for_save_template_id=new splynx_dialog(`/admin/${e}`,{dialog:{modal:!0}},t).open(),window.registerDialog(window.dialog_for_save_template_id)},window.processPasswords=function(){$(".password_input:not([processed])").each((function(){$(this).attr("name",$(this).next(".password_input[type=hidden]").attr("name")),$(this).nextAll(".password_input[type=hidden]").remove(),$(this).off();let e=$(this).clone();$(e).attr("type","hidden"),$(e).removeClass("password_input"),$(e).off(),$(this).removeAttr("name"),$(this).removeAttr("id"),$(this).after(e),function(e){const n=$(e),i=n.nextAll('input[type="hidden"]'),o=new window.MaskedInput(n,!0,(e=>{$(i).val(e).change()}),(n=>{const i=$(e).prev(".toggle-password"),o=i.find("i");n?(i.attr("title",t("common","Show password")),o.removeClass("icon-ic_fluent_eye_off_24_regular"),o.addClass("icon-ic_fluent_eye_24_regular")):(i.attr("title",t("common","Hide password")),o.addClass("icon-ic_fluent_eye_off_24_regular"),o.removeClass("icon-ic_fluent_eye_24_regular"))}));$(e).prev(".toggle-password").click((function(){$(this).toggleClass("visible"),o.toggleMaskState()}))}(this),$(this).attr("processed","1")}))},window.setSelectionRange=(e,t,n)=>{if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){let i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i.select()}},window.setCaretToPosition=(e,t)=>{window.setSelectionRange(e,t,t)},jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",`${Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())}px`),this.css("left",`${Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())}px`),this},window.toggleMobileMenu=function(){$(".menu-bar").closest(".splynx-wrapper").toggleClass("mobile-menu-open")},window.supports_html5_storage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},window.address_reload=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if($(".ui-dialog").is(":visible")){let e=$(".ui-dialog").data("url_model");return closeLastDialog(),void open_dialog_new(e.replace("/admin/",""))}let n=function(){if("undefined"!=typeof xApp)return t?void xApp.$router.go(xApp.$router.currentRoute):void xApp.refreshRoute();$.ajax({cache:!1,complete:window.processHTML,url:$.address.value()})};e?checkUnsavedDataBeforeLeavePage((()=>{n()})):n()},window.isDateEq=function(e,t){return e.getFullYear()==t.getFullYear()&&(e.getMonth()==t.getMonth()&&e.getDate()==t.getDate())},window.addDays=function(e,t){let n=new Date(e);return n.setDate(n.getDate()+parseInt(t)),n},window.resetForm=function(e){e.find("input:text, input:password, input:file, textarea").val(""),e.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected"),e.find("textarea").froalaEditor("html.set",""),e.find("select").each(((e,t)=>{let n=$(t).find("option");if(Array.isArray(n)&&void 0!==n[0]){let e=$(t).find("option")[0].value;$(t).val(e).trigger("change")}}))},window.formatTicketStatus=function(e){return $(`<span class="badge bg-${e.id}">${e.text}</span>`)},window.formatCustomerStatuses=function(e){const t={new:"bg-primary",active:"bg-info",blocked:"bg-danger",disabled:"bg-default"};let n=t[e.id]?`badge ${t[e.id]}`:"";return $(`<span class="${n}">${e.text}</span>`)},window.formatOptionsWithBadge=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e?.badge?`<span class="badge ${e.badge.background}">${e.badge.text}</span>`:"",i=`<span><span class="me-4">${e.text}</span>${n}</span>`;return t?$(i):i},window.generatePasswordForAf=function(e,n){let i=$(e).closest("div").find(".password_input"),o=$(i).next('input[type="hidden"]');if(0===i.length||0===o.length||""!==o.val()&&!1===window.confirm(t("config","Are you sure you want to generate a random password?")))return;let s=$(o).attr("name").match(/^(.*?)\[(.*?)\]\[(.*?)\]+$/i);$.ajax({type:"GET",url:`/${n}/tools--generate-password-for-af?module=${s[1]}&field=${s[3]}`,dataType:"json",success(e){const t=window.maskedInputs[i.attr("data-input-id")];t.setMaskState(!1),t.setValue(e.string)}})},window.generatePassword=function(e,t){t=t||"admin";let n=$(e).closest("div").find(".password_input");$.ajax({type:"GET",url:`/${t}/tools--generate-password`,dataType:"json",success(e){const t=window.maskedInputs[n.attr("data-input-id")];t.setMaskState(!1),t.setValue(e.string)}})},window.showPassword=function(e){$(e).closest("div").find(".password_input").focus(),this.changePasswordIcon($(e).closest("div"))},window.changePasswordIcon=function(e){(e.find(".icon-ic_fluent_eye_24_regular").length||e.find(".icon-ic_fluent_eye_off_24_regular").length)&&(e.find(".icon-ic_fluent_eye_24_regular").removeClass("icon-ic_fluent_eye_24_regular").addClass("icon-ic_fluent_eye_off_24_regular"),e.find(".password_input").on("focus",(()=>{e.find(".icon-ic_fluent_eye_24_regular").removeClass("icon-ic_fluent_eye_24_regular").addClass("icon-ic_fluent_eye_off_24_regular")})))},window.decodeURIComponentExtended=function(e){let t,n,i,o="",s=0;for(t=e.split(/(%(?:D0|D1)%.{2})/),n=t.length;s<n;s++){try{i=decodeURIComponent(t[s])}catch(e){i=t[s]}o+=i}return o},window.manageVisibilityForCustomerInfoInputs=function(e){let t=$(e).val(),n=function(e){$(e).each((function(){$(this).closest(".row").show(200),$(this).prop("disabled",!1)}))},i=function(e){$(e).each((function(){$(this).closest(".row").hide(200),$(this).prop("disabled",!0)}))};"company"==t?(i($(".inputs-for-person-category")),n($(".inputs-for-company-category"))):"person"==t?(i($(".inputs-for-company-category")),n($(".inputs-for-person-category"))):i($(".inputs-for-person-category, .inputs-for-company-category"))},window.decodeHtml=function(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value},window.registerLogoutHandler=function(){$(".fa-sign-out").parent().each((function(){let e=this.href;this.href="#",$(this).on("click",(t=>(t.preventDefault(),logout(e),!1)))}))},window.logout=function(e){void 0!==window.logout_listener&&window.remove_socket_listener(window.logout_listener),$.ajax({url:e,type:"POST",success(e){$("body").append(e)}})},window.blockquoteHandler=function(){$(".message-with-blockquote").find("blockquote").first().each(((e,n)=>{if(!$(n).hasClass("is-added")){$(`<label class="badge bg-info show-blockquote" title="${t("support","Show trimmed content")}">...</label>`).insertBefore($(n)).click((function(){$(this).next().toggle(),$(this).next().is(":visible")?$(this).attr("title",t("support","Hide trimmed content")):$(this).attr("title",t("support","Show trimmed content"))}))}$(n).addClass("is-added"),$(n).hide()}))},window.randomString=function(e,t){(Number.isNaN(e)||e<=0)&&(e=16),"string"!=typeof t&&(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");let n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},window.open_dialog_by_url=function(e){let t=new splynx_dialog(e,{dialog:{modal:!0}}).open();return registerDialog(t),t},window.empty=function(e){return null==e||""===e||0===e||"0"===e||null===e||!1===e||e instanceof Array&&0===e.length||e instanceof Object&&0===Object.keys(e).length},window.disableInputsInBlock=function(e){$(e).find("input,select").each((function(){$(this).prop("disabled",!0).addClass("disabled")}))},window.enableInputsInBlock=function(e){$(e).find("input,select").each((function(){$(this).prop("disabled",!1).removeClass("disabled")}))},window.disableInput=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{e.prop("disabled","1").addClass("disabled")}))},window.enableInput=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{e.prop("disabled",!1).removeClass("disabled")}))},window.isCheckedInput=function(e){let t=e.prop("checked");return void 0!==t&&!1!==t},window.changePosition=function(e,t){($(e).is(":checked")&&0==t||!$(e).is(":checked")&&1==t)&&$(e).trigger("click")},window.drawMenuLengthForDataTable=function(e,t,n){let i=t?{10:10,25:25,50:50,75:75,100:100,"-1":"All"}:{10:10,25:25,50:50,75:75,100:100};isset(i,[n])||(n=100),$(`#${e}_length`).find("option").remove();for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&$(`select[name=${e}_length]`).append($("<option/>",{value:t,text:i[t]}));$(`select[name=${e}_length]`).val(n)},window.open_help_dialog=function(e){let t=JSON.parse(window.spl_config.documentationConfig),{api_url:n,lang:i,version:o}=t;const[s,a]=e.split("#");let r=`${n}/api/pages/by-path/${encodeURIComponent(s)}?lang=${i}&version=${o}`;$.ajax({url:r,method:"GET",dataType:"json",success(e){showModal("help-documentation-modal",window.formattedResponseWithHash(e,a))},error(e){show_error(window.t("common","Something went wrong!"),4),console.error(`Open page , ${r} failed with response:`,e)}})},window.formattedResponse=function(e){return"object"!=typeof e?e:Object.keys(e).reduce(((t,n)=>(t[window.toCamelCase(n)]=e[n],t)),{})},window.formattedResponseWithHash=function(e,t){return{...window.formattedResponse(e),hash:t}},window.toCamelCase=function(e){return"string"!=typeof e?"":e.replace(/[^a-zA-Z0-9]+(.)/g,((e,t)=>t.toUpperCase()))},window._exportTextarea=$("<textarea/>")[0],window.buttonCommon={exportOptions:{orthogonal:"export",format:{body:e=>"string"!=typeof e?e:(e=(e=(e=(e=(e=e.replace(/<span.*display:.*none.*>.*<\/span>/gm,"")).replace(/<div class='avatar-holder.*>.*<div class='avatar-letter.*>.*<\/div><\/div>/gm,"")).replace(/<[^>]*>/g,"")).replace(/^\s+|\s+$/g,"")).replace(/\n/g," "),window._exportTextarea.innerHTML=e,window._exportTextarea.value)}}},window.default_buttons=[{extend:"collection",text:'<i class="icon-ic_fluent_arrow_export_ltr_24_regular"></i>',titleAttr:"Export to",background:!1,container:"#colvis",className:"btn-outline-secondary btn-icon",dropup:!0,buttons:[$.extend(!0,{},window.buttonCommon,{extend:"print"}),$.extend(!0,{},window.buttonCommon,{extend:"copyHtml5"}),$.extend(!0,{},window.buttonCommon,{extend:"excelHtml5",filename:"*"}),$.extend(!0,{},window.buttonCommon,{extend:"csvHtml5",fieldSeparator:"\t",extension:".csv",filename:"*"}),$.extend(!0,{},window.buttonCommon,{extend:"pdfHtml5",filename:"*",available:()=>void 0!==window.FileReader,action(e,t,n,i){void 0===window.pdfMake?(show_success(window.t("common","Please wait. Download will start automatically"),4),$.getScript("/js/development/pdfmake/pdfmake.min.js",(()=>{$.getScript("/js/development/pdfmake/vfs_fonts.js",(()=>{$.fn.DataTable.ext.buttons.pdfHtml5.action.call(this,e,t,n,i)}))}))):$.fn.DataTable.ext.buttons.pdfHtml5.action.call(this,e,t,n,i)}})]}],window.getDataTableButtons=function(e){let t=window.getDefaultButtons(),n=window.getShowHideButton(e);return n&&t.unshift(n),t},window.getDefaultButtons=function(){return default_buttons.slice()},window.getShowHideButton=function(e){return e?[{container:"#colv",className:"btn-outline-secondary btn-icon",text:'<i class="icon-ic_fluent_more_horizontal_24_regular"></i>',action(){open_dialog_new(`profile--show-hide-columns?name=${e}`)},titleAttr:"Show/hide columns"}]:[]},window.imageEnlarging=function(e){$(e).click((function(e){e.preventDefault(),$(".img-enlarge-modal").remove();let t=$(this).clone();if(t.attr("width",""),t.attr("height",""),t.css("width",""),t.css("max-width","100%"),t.css("height",""),t.css("display","inline-block"),t.removeClass(),t.addClass("img-responsive center-block"),$("body").append('<div class="modal fade modal-profile img-enlarge-modal" tabindex="-1" role="dialog" aria-labelledby="modalProfile" aria-hidden="true" style="visibility: hidden;">    <div class="modal-dialog modal-lg" style="margin: 0 auto;width: fit-content;width: -moz-max-content;width: -webkit-max-content;min-width: 200px;min-height:150px;max-width: 100%;">        <div class="modal-content">            <div class="modal-header empty-header">                <button class="btn-close" type="button" data-bs-dismiss="modal"><span aria-hidden="true"></span></button>            </div>            <div class="modal-body" style="text-align: center;">            </div>        </div>    </div></div>'),$(".img-enlarge-modal .modal-body").append(t),$(t).data("download")){let e=`<div class="modal-footer">\n                <a\n                    href="${$(t).data("download")}"\n                    class="btn btn-primary"\n                    download\n                >\n                    Download\n             </a></div>`;$(".img-enlarge-modal .modal-content").append(e)}setTimeout((()=>{let e=$(".img-enlarge-modal").find(".modal-dialog").outerHeight(!0),n=$(".img-enlarge-modal").outerHeight(!0)-$(".img-enlarge-modal").outerHeight(),i=e-t.outerHeight()+n;t.css("max-height",`calc(100vh - ${i}px)`),$(".img-enlarge-modal").css("visibility","visible")}),200),$(".img-enlarge-modal").modal("show"),$(".img-enlarge-modal .modal-body img").on("click",(()=>{$(".img-enlarge-modal").modal("hide")})),$(".img-enlarge-modal").on("hidden.bs.modal",(function(){$(this).remove()}))}))},window.setModalForTicketImages=function(){$(".ticket-messages").find(".message-with-blockquote img").each(((e,t)=>{$(t).css("cursor","pointer"),imageEnlarging(t)}))},window.collapsePanel=function(e,t,n,i){void 0===t&&(t=!0),void 0===i&&(i=!0),$(e).find(".card-header, .card-block-header").removeClass("dropup"),t?$(e).find(".card-body, .card-block-body").hide("fast",n):($(e).find(".card-body, .card-block-body").hide(),"function"==typeof n&&n()),i&&window.savePanelState(e,SPL_PANEL_STATE_HIDDEN)},window.expandPanel=function(e,t,n){void 0===t&&(t=!0),$(e).find(".card-header, .card-block-header").addClass("dropup"),t?$(e).find(".card-body, .card-block-body").show("fast",n):($(e).find(".card-body, .card-block-body").show(),"function"==typeof n&&n()),window.savePanelState(e,SPL_PANEL_STATE_VISIBLE),$(document).trigger("panel-expanded")};const SPL_PANEL_STATE_KEY_PREFIX="spl_panel_states_",SPL_PANEL_STATE_HIDDEN="hidden",SPL_PANEL_STATE_VISIBLE="visible";window.savePanelState=function(e,t){let n=$(e).attr("id");if(void 0===n||n.length<=0)return;if(!supports_html5_storage())return;let i=SPL_PANEL_STATE_KEY_PREFIX+n;localStorage.setItem(i,t)},window.collapsePanelClickHandler=function(e){if(e.target!==this&&!window.isCollapseItem(e))return;let t=$(this).closest(".spl-collapsed-panel"),n=t.find(".card-body, .card-block-body");t.data("toggle-in-progress")||(n.is(":visible")?(t.data("toggle-in-progress",!0),$(t).trigger("collapse"),window.collapsePanel(t,!0,(()=>{t.data("toggle-in-progress",!1),$(t).trigger("collapsed")}))):(t.data("toggle-in-progress",!0),$(t).trigger("expand"),window.expandPanel(t,!0,(()=>{t.data("toggle-in-progress",!1),$(t).trigger("expanded")}))))},window.isCollapseItem=function(e){let t=!1;return $(e.currentTarget).find("i.icon, span.close-card-btn, strong").each(((n,i)=>{e.target==i&&(t=!0)})),t},window.processCollapsedPanels=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0===e&&(e=$("body")),$(e).find(".spl-collapsed-panel > .card-header, .spl-collapsed-panel > .card-block-header").unbind("click",window.collapsePanelClickHandler),$(e).find(".spl-collapsed-panel > .card-header, .spl-collapsed-panel > .card-block-header").on("click",window.collapsePanelClickHandler),t||$(e).find(".spl-collapsed-panel").each(((e,t)=>{window._processCollapsedPanelState(t)}))},window.processCollapsedPanel=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(e).find(".card-header, .card-block-header").unbind("click",window.collapsePanelClickHandler),$(e).find(".card-header, .card-block-header").on("click",window.collapsePanelClickHandler),t||window._processCollapsedPanelState(e)},window._processCollapsedPanelState=function(e){let t=$(e).attr("id"),n=$(e).data("collapsed"),i=$(e).data("hidden");if(void 0===t||t.length<=0)return void console.error("Collapsed panel",e,"must have `id` attribute! Id attribute used as key for saving panel state!");if(!supports_html5_storage())return;let o=localStorage.getItem(SPL_PANEL_STATE_KEY_PREFIX+t);o===SPL_PANEL_STATE_HIDDEN||1==n||!o&&i?window.collapsePanel(e,!1):window.expandPanel(e,!1)},window.is_gMap_loading=!1,window.is_OpenstreetMap_loading=!1,window.loadGoogleMapJs=function(e,t){window.is_gMap_loading?t():(window.is_gMap_loading=!0,$.getScript(`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=drawing`,(()=>{$.getScript("/js/development/oms.min.js?spiderfier_callback",t)})))},window.loadOpenstreetMapJs=function(e){window.is_OpenstreetMap_loading?e():(window.is_OpenstreetMap_loading=!0,$.getScript("/js/development/openLayersNew/ol.js",e))},window.processValidationgInputs=function(){window.removeRequiredFromHiddenInputs(),window.addRequiredToVisibleInputs(),$("input,select,textarea").off("invalid",window.processInvalidInputs),$("input,select,textarea").on("invalid",window.processInvalidInputs)},window.processInvalidInputs=function(e){let t=$(e.target).closest(".form-group");t.length<=0&&(t=$(e.target).parent()),t.addClass("has-error"),window.splynx_event_bus.emit("input-has-error",t),$(e.target).off("change",window.processChangeInvalidInput),$(e.target).on("change",window.processChangeInvalidInput)},window.processChangeInvalidInput=function(){$(this).closest(".has-error").removeClass("has-error")},window.removeRequiredFromHiddenInputs=function(e){let t;t=void 0!==e?$(e).find("input[required]:hidden,select[required]:hidden,textarea[required]:hidden"):$("input[required]:hidden,select[required]:hidden,textarea[required]:hidden"),t.attr("hidden-required","1").removeAttr("required")},window.addRequiredToVisibleInputs=function(e){let t;t=void 0!==e?$(e).find("input[hidden-required]:visible,select[hidden-required]:visible,textarea[hidden-required]:visible"):$("input[hidden-required]:visible,select[hidden-required]:visible,textarea[hidden-required]:visible"),t.attr("required","1").removeAttr("hidden-required")},window.fixSelectEmptyValue=function(e){let t;t=void 0!==e?$(e).find("select[required]:not([data-skip-fix-select])"):$("select[required]:not([data-skip-fix-select])"),t.each(((e,t)=>{"0"==$(t).val()&&$(t).val("")}))},window.initReportValidityBeforeSubmitForm=function(){var e;$.fn.submit=(e=$.fn.submit,function(){return window.removeRequiredFromHiddenInputs(this),window.addRequiredToVisibleInputs(this),window.fixSelectEmptyValue(this),!(void 0===$(this).get(0)||!$(this).get(0).reportValidity())&&e.apply(this,arguments)})},window.addBeforeSubmitValidation=function(){$(".content.active").find("form").on("submit",(function(){window.removeRequiredFromHiddenInputs(this),window.addRequiredToVisibleInputs(this),window.fixSelectEmptyValue(this)}))},window.loadVueComponentsByContext=function(e,t,n,i){let o="";if($.each(t,((e,t)=>{0===$(`#${t}`).length&&(o+=`${t},`)})),o=o.substring(0,o.length-1),""==o)return void("function"==typeof i&&i());let s=$("#custom_components");$.ajax({url:`/${e}/vue-components?componentNames=${o}`,success(e){!0===e.result?(s.append($("<div>").html(e.data)),"function"==typeof i&&i()):!1===e.result&&e.message&&console.error("Failed load components",e.message)}})},window.imageTicketEnlarging=function(e){let t=`\n        <div class="modal fade modal-profile img-enlarge-modal" tabindex="-1" role="dialog" aria-labelledby="modalProfile" aria-hidden="true" style="visibility: hidden; margin: 20px;">\n            <div class="modal-dialog modal-lg" style="margin: 0 auto;width: fit-content;width: -moz-max-content;width: -webkit-max-content;min-width: 200px;min-height:150px;max-width: 100%;">\n               <div class="modal-content">\n                    <div class="modal-header empty-header">\n                        <button class="btn-close" type="button" data-dismiss="modal">×</button>\n                    </div>\n                    <div class="modal-body" style="text-align: center;">\n                    </div>\n                    <div class="modal-footer">\n                       <a href="${$(e).data("download")}" class="btn btn-primary" download>Download</a>\n                    </div>\n               </div>\n            </div>\n        </div>`;$(".img-enlarge-modal").remove(),$("body").append(t);let n=$(e).clone();n.attr("width",""),n.attr("height",""),n.css("width",""),n.css("max-width","100%"),n.css("height",""),n.css("display","inline-block"),n.removeClass(),n.addClass("img-responsive center-block"),$(".img-enlarge-modal .modal-body").append(n),setTimeout((()=>{let e=$(".img-enlarge-modal").find(".modal-dialog").outerHeight(!0),t=$(".img-enlarge-modal").outerHeight(!0)-$(".img-enlarge-modal").outerHeight(),i=e-n.outerHeight()+t;n.css("max-height",`calc(100vh - ${i}px)`),$(".img-enlarge-modal").css("visibility","visible")}),200),$(".img-enlarge-modal").modal("show"),$(".img-enlarge-modal").on("hidden.bs.modal",(function(){$(this).remove(),$(".ui-dialog").focus()}))},$(document).on("shown.bs.dropdown",".dropdown",(function(){let e=$(this).children(".dropdown-menu"),t=$(this).children(".dropdown-toggle"),n=e.offset(),i=n.top-t.height()-e.height()-$(window).scrollTop(),o=$(window).scrollTop()+$(window).height()-(n.top+e.height());o<0&&(i>=0||i>o)&&$(this).addClass("dropup")})).on("hidden.bs.dropdown",".dropdown",(function(){$(this).removeClass("dropup")}));let lastKeyUp=0;function humanizeString(e){if(void 0===e)return"";"string"!=typeof e&&(e=e.toString());let t=e.match(/([A-Z]+)v([0-9]+)|([A-Z][a-z]*)|[0-9]/g);function n(e){return/^-?\d+$/.test(e)}function i(e){return 1===e.length&&e===e.toUpperCase()}let o="",s="";for(let e in t){if(n(t[e]))n(s)?o+=t[e]:o+=` ${t[e]}`;else{if(!Object.prototype.hasOwnProperty.call(t,e))continue;i(t[e])&&i(s)?o+=t[e]:o+=` ${t[e]}`}s=t[e]}return o.trim()}$(window).keyup((e=>{lastKeyUp=e.keyCode?e.keyCode:e.which})),$(document).on("focus","input:not(.tt-input):not(.input-ms-search)",(function(){if($("body#splynx-signup-widget"))return!1;$(this).is(":hover")||9==lastKeyUp||16==lastKeyUp||(lastKeyUp=0,$(this).off("focus"))})),window.resizeImage=function(e){let t=$(e);t.width()>=t.height()?t.height("100%"):t.width("100%")},$(document).on("click",".ticket-message-footer a.file_image",(function(e){e.preventDefault(),window.imageTicketEnlarging($(this).find("img"))})),window.numbersToRanges=function(e){e=(e=e.filter(((e,t,n)=>n.indexOf(e)===t))).sort(((e,t)=>e-t));let t,n,i=[];for(let o=0;o<e.length;o++){for(t=e[o],n=t;e[o+1]-e[o]==1;)n=e[o+1],o++;i.push(t===n?t:[t,n])}return i},window.rangesToNumbers=function(e){const t=JSON.parse(e),n=[];return t.forEach((e=>{if(Array.isArray(e)){const t=parseInt(e[0]),i=parseInt(e[1]);for(let e=t;e<=i;e++)n.push(e)}else n.push(parseInt(e))})),n},window.calculatePopoverPlacement=function(e,t){let n=t.getBoundingClientRect();return window.innerHeight-n.bottom<420?"auto-top":"auto-bottom"},window.preventDubleClick=function(e){return{status:!0,start(){return!1!==this.status&&(this.status=!1,void 0!==e&&$(e).attr("disabled","disabled"),!0)},end(){this.status=!0,void 0!==e&&$(e).removeAttr("disabled")}}},function(){let e={},t=function(t,n){return function(){!(arguments[2].url in e)&&arguments[2].type&&"post"===arguments[2].type.toLowerCase()&&(e[arguments[2].url]="string"==typeof n?window.preventDubleClick(n):window.preventDubleClick());let i=e[arguments[2].url];if(this.preventDbUrl=arguments[2].url,!i.start())return!1;let o=t.apply(this,arguments);return!1===o&&i.end(),o}},n=function(t){return function(n,i,o){e[this.preventDbUrl].end();let s=n.responseJSON;return isset(s,"result")&&!1===s.result&&$(o).attr("data-form-changed","1"),t.apply(this,arguments)}};var i;$.fn.ajaxForm=(i=$.fn.ajaxForm,function(){return!1!==arguments[0].preventDb&&(null==arguments[0].beforeSubmit?arguments[0].beforeSubmit=t((()=>{}),arguments[0].preventDb):arguments[0].beforeSubmit=t(arguments[0].beforeSubmit,arguments[0].preventDb),null==arguments[0].complete?arguments[0].complete=n((()=>{})):arguments[0].complete=n(arguments[0].complete)),i.apply(this,arguments)})}(),window.splynxDebounceFn=function(e,t,n){let i;return function(){let o=this,s=arguments,a=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(o,s)}),t),a&&e.apply(o,s)}},window.t=function(e,t,n){if(void 0!==window.spl_translations_messages&&e in window.spl_translations_messages&&t in window.spl_translations_messages[e]&&(t=window.spl_translations_messages[e][t]),!empty(n))for(let e in n)t=t.replaceAll(`{${e}}`,n[e]);return t},window.go_address=function(e,t){return new Promise(((n,i)=>{checkUnsavedDataBeforeLeavePage((()=>{void 0===t?$.address.value(e):$.address.value(`${e}#${t}`),n()}),(()=>{i()}))}))},window.addConfirmForUnsavedDataToSelect=function(e,t){$(e).on("select2:selecting",(n=>{isHaveUnsavedData(t)&&(n.preventDefault(),$(e).select2("close"),window.showUnsavedDataDialog(t,(()=>{$(e).val(n.params.args.data.id).trigger("change")})))}))},window.isset=function(e,t){let n,i;if("object"!=typeof e||null===e)return!1;if("number"==typeof t&&(t=t.toString()),"string"==typeof t||t instanceof String)i=[t];else{if(!Array.isArray(t))return!1;i=t}return n=function(e,t){let i=t.shift().toString();return null!==e&&"object"==typeof e&&void 0!==e[i]&&(t.length<=0||n(e[i],t))},n(e,i)},window.formatFileSize=function(e,t,n,i){let o,s;for(void 0===t&&(t=2),void 0===n&&(n=window.spl_config.numberConfig.networking.size_of_kb),void 0===i&&(i=!1),e=parseFloat(e),o=i?["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=0;e>=n&&s<o.length-1;s++)e/=n;return`${e.toFixed(t)/1} ${o[s]}`},window.formatInternetSpeed=function(e,t,n,i){return`${window.formatFileSize(e,t,n,i)}ps`},window.removeSpaces=e=>e.replace(/\s+/g," ").trim(),window.initMentions=function(e,t,n){let i=function(){window.deleteMention(t);let i=function(e){return"team"===e.original.type?e.original.name:`${e.original.name} - ${e.original.email} (${e.original.login})`},o=new Tribute({menuContainer:document.body,values:t,lookup:e=>e.search.replace(/ +(?= )/g,"").trim(),selectTemplate:e=>window.removeSpaces(`<span class="fr-deletable fr-tribute"><a href="#"\n                               class="froala-mention-inserted"\n                               title="${i(e).trim()}"\n                               data-id="${String(e.original.id).trim()}"\n                               data-type=${e.original.type.trim()}\n                            >${e.original.name.trim()}</a></span>`),menuItemTemplate(e){let t=`<span class="item-type">${e.original.type_label}</span>`;return`${i(e)} ${t}`}});window.editorTribute=o,window.tributeAttached&&o.detach(e),o.attach(e),window.tributeAttached=!0,window.mentionsNeedsUpdating=!1,n.on("keydown",(e=>{if(13===e.which&&o.isActive)return!1}),!0),e.on("tribute-replaced",(()=>{window.disableEditorReinit=!0}))};"undefined"==typeof Tribute?$.getScript("/js/development/tribute.min.js",i):i()},window.updateMentions=function(e,t){if(!window.editorTribute)return!1;window.editorTribute.detach(e.$el),setTimeout((()=>{window.initMentions(e.$el,t,e.events)}),250)},window.getMentions=function(e,t){window.getMentionsIsRun||(window.getMentionsIsRun=!0,$.ajax({dataType:"json",url:e,data:t,success(e){window.mentionsList=e,window.mentionsNeedsUpdating=!0,window.getMentionsIsRun=!1,window.updateMentions(window.globalEditor,window.mentionsList)}}))},window.deleteMention=function(e){let t=window.globalEditor.$el,n=[...e];t.find(".froala-mention-inserted").each((function(){let e=$(this).data("id"),t=$(this).data("type"),i=!1;n.forEach((n=>{if(n.id==e&&n.type==t)return i=!0,!0})),i||$(this).remove()})),window.globalEditor.selection.save();let i="#customers_view_tabs > ul > li.x-tab.active.active-tab-item > a.active_tab.tabs__link";if($(i).length>0&&$(i)[0].hasChildNodes()){let e=$(i)[0].childNodes;if(e.length>1){let t=[];for(let n=0;n<e.length;++n)t.push(e[n].nodeValue);$(i).text(t.join(""))}}window.globalEditor.html.set(t.html())},window.initResponsiveTable=function(e){$(`#${e}_wrapper .dataTables_scrollHead`).css({"overflow-x":"auto"}).on("scroll",(function(){$(this).parent().find(".dataTables_scrollBody").get(0).scrollLeft=this.scrollLeft})),setTimeout((()=>{$(`#${e}`).dataTable().api().draw()}),0),$(window).resize((()=>{$(`#${e}`).dataTable().api().draw()}));let t=function(){setTimeout((()=>{$(`#${e}`).dataTable().api().draw()}),0)};$(".select-column-input").off("change",t).change(t),$(`#${e}`).on("draw.dt",(()=>{setTimeout((()=>{$(`#${e}_wrapper .dataTables_scrollBody .select-column-input`).remove()}),0)}))},window.updateSelect2Items=function(e,t){let n=[];for(let e in t)if("object"==typeof t[e]){let i={text:e,children:[]};for(let n in t[e])i.children.push({id:n,text:t[e][n]});n.push(i)}else n.push({id:e,text:t[e]});$(`#${e}`).html("").select2({data:n}).trigger("change")},window.rgbaToRgb=function(e){let t=e.split(","),n=parseInt(t[0].replace(/rgba\(/,""),10),i=parseInt(t[1],10),o=parseInt(t[2],10),s=t[3].replace(/\)/,"").trim(),a=1-s;return n=Math.round(255*(s*(n/255)+a)),i=Math.round(255*(s*(i/255)+a)),o=Math.round(255*(s*(o/255)+a)),window.rgbToHex(n,i,o)},window.rgbToHSL=function(e){3==(e=e.replace(/^\s*#|\s*$/g,"")).length&&(e=e.replace(/(.)/g,"$1$1"));let t=parseInt(e.substr(0,2),16)/255,n=parseInt(e.substr(2,2),16)/255,i=parseInt(e.substr(4,2),16)/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=o-s,r=(o+s)/2,l=0,c=0;return l=0==a?0:o==t?(n-i)/a%6*60:o==n?60*((i-t)/a+2):60*((t-n)/a+4),c=0==a?0:a/(1-Math.abs(2*r-1)),{h:l,s:c,l:r}},window.hslToRGB=function(e){let t,n,i,{h:o}=e,{s}=e,{l:a}=e,r=(1-Math.abs(2*a-1))*s,l=r*(1-Math.abs(o/60%2-1)),c=a-r/2;return o<60?(t=r,n=l,i=0):o<120?(t=l,n=r,i=0):o<180?(t=0,n=r,i=l):o<240?(t=0,n=l,i=r):o<300?(t=l,n=0,i=r):(t=r,n=0,i=l),t=window.normalize_rgb_value(t,c),n=window.normalize_rgb_value(n,c),i=window.normalize_rgb_value(i,c),window.rgbToHex(t,n,i)},window.normalize_rgb_value=function(e,t){return(e=Math.floor(255*(e+t)))<0&&(e=0),e},window.rgbToHex=function(e,t,n){return`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`},window.lightenDarkenColor=function(e,t){let n=window.rgbToHSL(e),i=n.l+t/100;return i>1?i=1:i<=0&&(i=0),n.l=i,window.hslToRGB(n)},window.makeColorContrast=function(e,t,n){return"#"===e.slice(0,1)&&(e=e.slice(1)),3===e.length&&(e=e.split("").map((e=>e+e)).join("")),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?t:n},$(document).on("change",".input-group-file :file",(function(){let e=$(this),t=e.get(0).files?e.get(0).files.length:1,n=e.val().replace(/\\/g,"/").replace(/.*\//,""),i=$(this).parents(".input-group").find(":text"),o=t>1?`${t} files selected`:n;i.length&&i.val(o)})),window.formatSelect2Data=function(e){let t=[];return $.each(e,((e,n)=>{if("string"==typeof n)t.push({text:n,id:e});else{let i=[];$.each(n,((e,t)=>{i.push({text:t,id:e})})),t.push({text:e,id:0,children:i})}})),t},window.arrayIncludes=function(e,t){for(let n in e)if(e[n]===t)return!0;return!1},window.jsonStringify=function(e){let t=[],n=JSON.stringify(e,((e,n)=>{if("object"==typeof n&&null!==n){if(window.arrayIncludes(t,n))return;t.push(n)}return n}));return t=null,n},window.saveDataInCodeEditor=function(e,t,n){if("html"==n&&t.codeView.isActive()){t.$box.find(".CodeMirror")[0].CodeMirror.on("change",(()=>{window.codeEditorHtml=t.codeView.get()}))}},$(document).on("click",".froala-mention-inserted",(e=>{e.preventDefault()})),window.actionsOnView=function(e){return{refresh:()=>{splynx_event_bus.emit(`refresh-view-actions-${e}`)},close:()=>{splynx_event_bus.emit(`close-view-modal-${e}`)}}},$(document).on("paste",".tt-input",(function(){let e=$(this);setTimeout((()=>{e.trigger("keypress")}),0)})),window.openTab=function(e,t){$(`#${e} li`).each((function(n){$(this).attr("data-id")==t&&$(`#${e}`).tabs("option","active",n)}))},window.scrollToComment=function(e){if((e=$(e)).length){$(".focused-comment").removeClass("focused-comment"),e.addClass("focused-comment");let t=e.parent(),n=e.offset().top-t.offset().top+t.scrollTop()-parseInt(e.css("margin-top")),i=e.closest("div[role=tabpanel]").offset().top;window.matchMedia("(min-width: 813px)").matches&&(i-=$(".spl-sticky-sidebar").height()),$("html, body").animate({scrollTop:i},"slow"),t.animate({scrollTop:n},"slow")}},$(document).on("click",".copy-to-clipboard",(function(){let input=$(this).closest(".clipboard-copy-wrapper").find(".for-copy");input.select(),document.execCommand("copy"),show_success($(this).data("success"),5),$(this).data("callback")&&eval($(this).data("callback"))})),window.filterWidget=function(e){let n;(e=$.extend(!0,{name:"",advanced:!1,advancedEl:"",buttons:{},filters:{},advancedFilters:{},requestAdditionalParams:{},dtId:"",url:"",method:"GET",initDTByEvent:!1,reloadAfterChange:!1,remindFilters:!1,customApply:null,applyAtInit:!1,mounted:null,watchUrlFilters:!1,beforeWatchUrlCallback:null,destroyed:null},e)).advanced&&(n=new Vue({el:e.advancedEl,render:t=>t("dt-advanced-filter",{ref:"app",props:{name:e.name,filters:e.advancedFilters}})}));let i="function"==typeof e.buttons?e.buttons():e.buttons,o="function"==typeof e.filters?e.filters():e.filters,s={show:{text:t("common","Show"),submit:!0}};i=!1!==i?$.extend(!0,s,i):{};let a={addDataToDTRequest(e){return this.$refs.app.addDataToDTRequest(e)},beforeWatchUrlCallback(){let t=this;return n=>"function"==typeof e.beforeWatchUrlCallback?e.beforeWatchUrlCallback.call(this,t,n):n}};return void 0!==e.methods&&(a=Object.assign(e.methods,a)),{app:new Vue({el:e.el,data:()=>({buttons:i,filters:o,dtId:e.dtId,url:e.url}),mounted(){null!==e.mounted&&"function"==typeof e.mounted&&e.mounted.call(this)},destroyed(){null!==e.destroyed&&"function"==typeof e.destroyed&&e.destroyed.call(this)},methods:a,render(t){return t("dt-filter",{ref:"app",props:{name:e.name,filters:this.filters,buttons:this.buttons,dtId:this.dtId,url:this.url,method:e.method,initDTByEvent:e.initDTByEvent,reloadAfterChange:e.reloadAfterChange,remindFilters:e.remindFilters,advanced:e.advanced,advancedVm:e.advanced?n:null,customApply:e.customApply,requestAdditionalParams:e.requestAdditionalParams,applyAtInit:e.applyAtInit,watchUrlFilters:e.watchUrlFilters,beforeWatchUrlCallback:this.beforeWatchUrlCallback()}})}}),advanced:void 0!==n?n:null}},window.modifyDTRequestData=function(e){return t=>void 0!==e?e.addDataToDTRequest(t):t},window.initPhotoSwiper=function(){"undefined"==typeof makePhotoSwiper?$.getScript("/js/development/head.min.js",(()=>{head.load(["/js/development/splynx_photo_swiper.min.js"],(()=>{window.makePhotoSwiper()}))})):window.makePhotoSwiper()},window.analysisReminderDay=function(e,n,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=[Number(e),Number(n),Number(i)];for(let e=0;e<3;e++){let e=s.indexOf(0);-1!=e&&s.splice(e,1)}let a=[];for(let e in s)a[e]=s[e];if(a=a.sort(((e,t)=>e-t)).filter(((e,t,n)=>!t||e!=n[t-1])),a.length==s.length&&a.every(((e,t)=>e===s[t])))return 0!=o.length&&o.prop("disabled",!1),!0;showErrors([t("common",'"Reminder #N day" should be in ascending order.')],4),0!=o.length&&o.prop("disabled",!0)},window.isElementInBottom=e=>{const t=window.innerHeight,n=window.scrollY+t-e.offset().top;return Math.round(n/((t+32)/100))<35},window.isElementInViewport=e=>{"function"==typeof jQuery&&e instanceof jQuery&&(e=e.get(0));let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=$(window).height()&&t.right<=$(window).width()},window.fixDropDownPosition=function(e){let t=$(e).data().multipleSelect,n=t.$choice,i=t.$drop;window.isElementInBottom($(n))?(i.removeClass("bottom"),i.addClass("top")):(i.removeClass("top"),i.addClass("bottom"))},window.removeWebUiPopovers=function(){let e=document.querySelectorAll(".webui-popover.out, .webui-popover.in, .popover.show");e?.forEach((e=>{e.remove()}))},$(document).on("click",".partially-hidden-block .show-all",(e=>{$(e.target).parent().parent().removeClass("partially-hidden-block"),$(e.target).remove()})),window.floatElementsRemover=()=>{void 0!==window.splynx_event_bus&&splynx_event_bus.on("before_switch_page",(()=>{Array.from(document.body.children).forEach((e=>{(e=>e.classList.contains("webui-popover")||"dialog"===e.getAttribute("role")&&"pswp"!==e.getAttribute("class"))(e)&&(e.outerHTML="")}))}))},window.floatElementsRemover(),window.RealNumber=class{constructor(e,t){this.integerPart=t?.integerPart||0,this.decimalPart=t?.decimalPart||0,this.thousandSeparator=t?.thousandSeparator||"",this.decimalSeparator=t?.decimalSeparator||".",this.float=t?.float||0,this.stripTrailingZeros=t?.stripTrailingZeros||!1,null==e&&(e=0),"string"==typeof e&&(e=Number.isNaN(parseFloat(e))?0:this.removeSeparators(e)),this._stringFormat="0",this._numberFormat=0,this.splitParts(e),this.stringFormat(e),this.numberFormat()}removeSeparators(e){if(!this.float)return e.replaceAll(this.thousandSeparator,"");let t;return(e=e.split("")).forEach(((n,i)=>{/[^0-9]/.test(n)&&"-"!==n&&(e[i]="",t=i)})),t&&(e[t]="."),e.join("")}splitParts(e){this.decimalPart=(parseFloat(e)-parseInt(e)).toFixed(this.float),this.integerPart=parseInt(parseInt(e)+parseFloat(this.decimalPart)).toString()}stringFormat(e){"string"==typeof e?"0"===this.integerPart&&"-"===e[0]&&(this.integerPart="-0"):"0"===this.integerPart&&e<0&&(this.integerPart="-0");let t=parseInt(this.integerPart).toLocaleString("en-US").replaceAll(",",this.thousandSeparator),n=this.decimalPart.replace("0","");if(this.stripTrailingZeros&&(n=n.replace(/0+$/,""),n===this.decimalSeparator&&(n="")),1===parseInt(n))return this._stringFormat=t+Number(0).toFixed(this.float).replace("0.","."),!0;this._stringFormat=t+n.replace(".",this.decimalSeparator).replace("-","")}numberFormat(){parseFloat(this.decimalPart)<0&&(this.decimalPart=Math.abs(parseFloat(this.decimalPart)).toString());let e,t=parseFloat(this.integerPart+this.decimalPart);t>=0?(e=t-parseInt(t),this._numberFormat=parseFloat(parseFloat(parseInt(this.integerPart)+e).toFixed(this.float))):(e=Math.abs(t)-Math.abs(parseInt(t)),this._numberFormat=parseFloat(parseFloat(parseInt(this.integerPart)-e).toFixed(this.float)))}},window.stripTagsFromString=e=>{e=`<div>${e}</div>`;let t="";return $(e).contents().each((function(){t+=`${$(this).text()} `,$(this).text()||(t+=" ")})),t.replace(/ +(?= )/g,"")},String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)}),window.isValidJSON=e=>{try{JSON.parse(e)}catch(e){return!1}return!0},window.clearAllTimeouts=function(){let e=window.setTimeout((()=>{}),0);for(;e--;)window.clearTimeout(e)},window.closeAllWebuiPopoverByCustomClass=function(e){$(`.webui-popover-${e}`).each((function(){$(this).data("trigger-element").webuiPopover("destroy")}))},window.initTabs=function(e){let n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.prototype.hasOwnProperty.call(o,"create")&&(n=o.create,delete o.create),Object.prototype.hasOwnProperty.call(o,"beforeActivate")&&(i=o.beforeActivate,delete o.beforeActivate),$(e).tabs({create:(i,s)=>{if($(`${e}>ul>li`).each(((n,i)=>{let o=$(i).find("a"),s=o.attr("href");if(void 0!==s&&"#"!==s[0]){let n=o.text().toLowerCase().replace(/[^a-zA-Z0-9]/g,"_").replace(/_{2,}/g,"_");o.attr("href",`#${n}`),$(`#${$(i).attr("aria-controls")}`).remove(),$(e).append(`<div id='${n}' data-href='${s}' data-loaded='false'><div class='main-tab-holder ps-20 pe-20'>${t("common","Loading...")}</div></div>`),"true"===$(i).attr("aria-selected")&&window.loadTab($(`#${n}`))}else $(`#${$(i).attr("aria-controls")}`).data("loaded",!0)})),$(e).tabs("refresh"),!Object.prototype.hasOwnProperty.call(o,"active")&&window.location.hash){let t=$(`${e}>div`).index($(window.location.hash));$(e).tabs("option","active",t>0?t:0)}"function"==typeof n&&n(i,s)},beforeActivate:(e,t)=>{window.loadTab(t.newPanel),"function"==typeof i&&i(e,t)},...o})},window.loadTab=e=>{e.data("loaded")||$.get(e.data("href")).done((t=>{e.html(t),e.data("loaded",!0)})).fail((()=>{e.html(`<div class="main-tab-holder ps-20 pe-20">${t("common","Couldn't load!")}</div>`)}))},$(window).on("select2:open",(()=>{setTimeout((()=>{let e=$(".select2-search--dropdown input.select2-search__field");e.length&&e.get(0).focus()}),0)})),window.getElementOffsets=e=>{let t=$(e).offset().left;return{left:t,right:t+$(e).width()}},window.isElementVisibleInScrollableArea=(e,t)=>{let n=window.getElementOffsets($(t)),i=window.getElementOffsets($(e));return n.left>i.left&&n.right<i.right},window.scrollAreaToElement=(e,t)=>{let n=window.getElementOffsets($(t)),i=window.getElementOffsets($(e)),o=0;o=n.right>i.right?n.right-i.right+$(e).scrollLeft()+10:n.left-i.left+$(e).scrollLeft()-10,$(e).animate({scrollLeft:o},50)},window.toggleCustomersInfoBlock=(e,t)=>{let n=$(`#admin_tickets_customer_info_show_all_${e}_${t}`);n.hasClass("collapsed")?($(`#admin_tickets_customer_info_show_all_${e}_block_${t}`).removeClass("d-none"),n.removeClass("collapsed")):($(`#admin_tickets_customer_info_show_all_${e}_block_${t}`).addClass("d-none"),n.addClass("collapsed"))},window.domReplace=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=$(e);n?i.clone(!0).prependTo($(t)):i.clone(!0).appendTo($(t)),i.remove()},window.initWidgets=()=>{makeSelect2(),makeMultileSelect(),makeDatepicker(),makeDecimalInput(),processPasswords(),processDT(),processCollapsedPanels(),processValidationgInputs(),initReportValidityBeforeSubmitForm(),addBeforeSubmitValidation(),makePopover()},window.setSeparators=()=>{if(empty(window.spl_config))return!1;const e=window.spl_config.numberConfig;if(empty(e))return!1;switch(e.thousand_finance.separator){case"0":default:e.thousand_finance.separator="";break;case"1":e.thousand_finance.separator="'";break;case"2":e.thousand_finance.separator=",";break;case"3":e.thousand_finance.separator="."}switch(e.decimal_finance.separator){case"0":default:e.decimal_finance.separator=".";break;case"1":e.decimal_finance.separator=","}window.spl_config.numberConfig=e},window.setSeparators(),window.formLink=e=>!!e&&(e.length>0&&e),window.linkHandler=(e,t)=>{let n="event.preventDefault(); ";t&&(n="");try{return new Function("event",n.concat(e)).toString()}catch{return"function() {}"}},window.objectMap=function(e,t){return Object.keys(e).reduce(((n,i)=>(n[i]=t(e[i]),n)),{})},window.snakeCase=e=>e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((e=>e.toLowerCase())).join("_"),window.copyElementToClipboardAsImageById=e=>{if("undefined"==typeof ClipboardItem)return;let n=document.getElementById(e);window.html2canvas(n,{onclone:t=>{t.getElementById(e).parentElement.style.width=`${t.getElementById(e).scrollWidth}px`},scale:1.5}).then((e=>{e.toBlob((e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})]))),window.show_success(`${t("common","Result image copied to clipboard!")}`,3)}))},window.copyTextToClipboardById=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=$(e);""!==i.val().trim()&&(i.prop("disabled",!1),i.select(),document.execCommand("copy"),window.show_information(`${t("common","Coordinated copied to clipboard")}`,3),n&&i.prop("disabled",!0))},window.remindIn=(e,t)=>{const n=JSON.parse(localStorage.getItem("dashboard_snooze_reminders_array"))||[],i=n.find((e=>e.id===t));if(i){let o;switch(e){case"day":o=864e5;break;case"week":o=6048e5;break;case"month":o=2592e6;break;default:return}const s=(new Date).getTime();i.remind_in=s+o,i.visible=!1,localStorage.setItem(`dashboard_snooze_reminder_alert_${t}`,JSON.stringify(i)),localStorage.setItem("dashboard_snooze_reminder_stored_alerts",JSON.stringify(n))}},window.showNotifications=()=>{(JSON.parse(localStorage.getItem("dashboard_snooze_reminder_stored_alerts"))||[]).forEach((e=>{(new Date).getTime()>e.remind_in&&(e.visible=!0,localStorage.setItem(`dashboard_snooze_reminder_alert_${e.id}`,JSON.stringify(e)))}))},window.initializeNotifications=e=>{localStorage.setItem("dashboard_snooze_reminders_array",JSON.stringify(e));return e.map((e=>JSON.parse(localStorage.getItem(`dashboard_snooze_reminder_alert_${e.id}`))||e))},window.formatDateTime=e=>{let t=window.moment(e,"YYYY-MM-DD HH:mm").format(datetime_format);return"Invalid date-time"!==t?t:""},window.setFroalaIcons=e=>{$.FE.DefineIcon("bold",{NAME:"icon-ic_fluent_text_bold_24_regular"}),$.FE.DefineIcon("italic",{NAME:"icon-ic_fluent_text_italic_24_regular"}),$.FE.DefineIcon("underline",{NAME:"icon-ic_fluent_text_underline_24_regular"}),$.FE.DefineIcon("formatUL",{NAME:"icon-ic_fluent_apps_list_24_regular"}),$.FE.DefineIcon("formatOL",{NAME:"icon-ic_fluent_text_number_list_ltr_24_regular"}),$.FE.DefineIcon("insertLink",{NAME:"icon-ic_fluent_link_square_24_regular"}),$.FE.DefineIcon("linkList",{NAME:"icon-ic_fluent_search_24_regular"}),$.FE.DefineIcon("color",{NAME:"icon-ic_fluent_color_24_regular"}),$.FE.DefineIcon("insertTable",{NAME:"icon-ic_fluent_table_24_regular"}),$.FE.DefineIcon("insertImage",{NAME:"icon-ic_fluent_image_add_24_regular"}),$.FE.DefineIcon("clearFormatting",{NAME:"icon-ic_fluent_eraser_24_regular"}),$.FE.DefineIcon("remove",{NAME:"icon-ic_fluent_eraser_24_regular"}),$.FE.DefineIcon("html",{NAME:"icon-ic_fluent_code_24_regular"}),$.FE.DefineIcon("buttonIcon",{NAME:"icon-ic_fluent_comment_checkmark_24_regular"}),$.FroalaEditor.ICON_DEFAULT_TEMPLATE=e},window.checkFroalaEmptyContent=e=>!e.replace(/<(?:"[^"]br"['"]div|'[^']br'['"]div|[^'">])+>|&nbsp;|\s+/g,""),window.fixFroalaHeight=function(){$(".froala").froalaEditor("size.syncIframe"),$(".froala").froalaEditor("size.refresh")}},6514:()=>{var e=1e3;window.minToHm=function(e,t){let n,i=e%60,o=Math.floor(e/60);return i=(i<10?"0":"")+i,o=(o<10?"0":"")+o,n="",`${o}:${i}${n}`},window.HmToMin=function(e){return e=e.split(":"),60*parseInt(e[0],10)+parseInt(e[1],10)},window.showInNM=function(t){return function(t,n){if(0==t)return"0 Byte";let i=e,o=n||3,s=Math.floor(Math.log(t)/Math.log(i));return`${parseFloat((t/i**s).toFixed(o))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`}(t*e,2)},window.convertToBytes=function(t){return Math.round(t)*e}},64733:(e,t,n)=>{n(43838),n(39028),function(e,t){"use strict";function n(e){S[S.length]=e}function i(e){var t=new RegExp(" ?\\b"+e+"\\b");E.className=E.className.replace(t,"")}function o(e,t){for(var n=0,i=e.length;n<i;n++)t.call(e,e[n],n)}function s(){var t,i,s,a;E.className=E.className.replace(/ (w-|eq-|gt-|gte-|lt-|lte-|portrait|no-portrait|landscape|no-landscape)\d+/g,""),t=e.innerWidth||E.clientWidth,i=e.outerWidth||e.screen.width,l.screen.innerWidth=t,l.screen.outerWidth=i,n("w-"+t),o(A.screens,(function(e){t>e?(A.screensCss.gt&&n("gt-"+e),A.screensCss.gte&&n("gte-"+e)):t<e?(A.screensCss.lt&&n("lt-"+e),A.screensCss.lte&&n("lte-"+e)):t===e&&(A.screensCss.lte&&n("lte-"+e),A.screensCss.eq&&n("e-q"+e),A.screensCss.gte&&n("gte-"+e))})),s=e.innerHeight||E.clientHeight,a=e.outerHeight||e.screen.height,l.screen.innerHeight=s,l.screen.outerHeight=a,l.feature("portrait",s>t),l.feature("landscape",s<t)}function a(){e.clearTimeout(y),y=e.setTimeout(s,50)}var r,l,c,d,u,p,h,f,m,g,v,b,y,w=e.document,_=e.navigator,T=e.location,E=w.documentElement,S=[],A={screens:[240,320,480,640,768,800,1024,1280,1440,1680,1920],screensCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!1},browsers:[{ie:{min:6,max:11}}],browserCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!0},html5:!0,page:"-page",section:"-section",head:"head"};if(e.head_conf)for(r in e.head_conf)e.head_conf[r]!==t&&(A[r]=e.head_conf[r]);switch(l=e[A.head]=function(){l.ready.apply(null,arguments)},l.feature=function(e,t,o){return e?("[object Function]"===Object.prototype.toString.call(t)&&(t=t.call()),n((t?"":"no-")+e),l[e]=!!t,o||(i("no-"+e),i(e),l.feature()),l):(E.className+=" "+S.join(" "),S=[],l)},l.feature("js",!0),c=_.userAgent.toLowerCase(),d=/mobile|android|kindle|silk|midp|phone|(windows .+arm|touch)/.test(c),l.feature("mobile",d,!0),l.feature("desktop",!d,!0),u=(c=/(chrome|firefox)[ \/]([\w.]+)/.exec(c)||/(iphone|ipad|ipod)(?:.*version)?[ \/]([\w.]+)/.exec(c)||/(android)(?:.*version)?[ \/]([\w.]+)/.exec(c)||/(webkit|opera)(?:.*version)?[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||/(trident).+rv:(\w.)+/.exec(c)||[])[1],p=parseFloat(c[2]),u){case"msie":case"trident":u="ie",p=w.documentMode||p;break;case"firefox":u="ff";break;case"ipod":case"ipad":case"iphone":u="ios";break;case"webkit":u="safari"}for(l.browser={name:u,version:p},l.browser[u]=!0,h=0,f=A.browsers.length;h<f;h++)for(m in A.browsers[h])if(u===m)for(n(m),g=A.browsers[h][m].min,v=A.browsers[h][m].max,b=g;b<=v;b++)p>b?(A.browserCss.gt&&n("gt-"+m+b),A.browserCss.gte&&n("gte-"+m+b)):p<b?(A.browserCss.lt&&n("lt-"+m+b),A.browserCss.lte&&n("lte-"+m+b)):p===b&&(A.browserCss.lte&&n("lte-"+m+b),A.browserCss.eq&&n("eq-"+m+b),A.browserCss.gte&&n("gte-"+m+b));else n("no-"+m);n(u),n(u+parseInt(p,10)),A.html5&&"ie"===u&&p<9&&o("abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|progress|section|summary|time|video".split("|"),(function(e){w.createElement(e)})),o(T.pathname.split("/"),(function(e,i){if(this.length>2&&this[i+1]!==t)i&&n(this.slice(i,i+1).join("-").toLowerCase()+A.section);else{var o=e||"index",s=o.indexOf(".");s>0&&(o=o.substring(0,s)),E.id=o.toLowerCase()+A.page,i||n("root"+A.section)}})),l.screen={height:e.screen.height,width:e.screen.width},s(),y=0,e.addEventListener?e.addEventListener("resize",a,!1):e.attachEvent("onresize",a)}(window),function(e){"use strict";function t(e){for(var t in e)if(undefined!==o[e[t]])return!0;return!1}function n(e){var n=e.charAt(0).toUpperCase()+e.substr(1);return!!t((e+" "+a.join(n+" ")+n).split(" "))}var i=e.document.createElement("i"),o=i.style,s=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),a="Webkit Moz O ms Khtml".split(" "),r=e.head_conf&&e.head_conf.head||"head",l=e[r],c={gradient:function(){var e="background-image:";return o.cssText=(e+s.join("gradient(linear,left top,right bottom,from(#9f9),to(#fff));"+e)+s.join("linear-gradient(left top,#eee,#fff);"+e)).slice(0,-17),!!o.backgroundImage},rgba:function(){return o.cssText="background-color:rgba(0,0,0,0.5)",!!o.backgroundColor},opacity:function(){return""===i.style.opacity},textshadow:function(){return""===o.textShadow},multiplebgs:function(){o.cssText="background:url(https://),url(https://),red url(https://)";var e=(o.background||"").match(/url/g);return"[object Array]"===Object.prototype.toString.call(e)&&3===e.length},boxshadow:function(){return n("boxShadow")},borderimage:function(){return n("borderImage")},borderradius:function(){return n("borderRadius")},cssreflections:function(){return n("boxReflect")},csstransforms:function(){return n("transform")},csstransitions:function(){return n("transition")},touch:function(){return"ontouchstart"in e},retina:function(){return e.devicePixelRatio>1},fontface:function(){var e=l.browser.name,t=l.browser.version;switch(e){case"ie":return t>=9;case"chrome":return t>=13;case"ff":return t>=6;case"ios":return t>=5;case"android":default:return!1;case"webkit":return t>=5.1;case"opera":return t>=10}}};for(var d in c)c[d]&&l.feature(d,c[d].call(),!0);l.feature()}(window),function(e,t){"use strict";function n(){}function i(e,t){if(e){"object"==typeof e&&(e=[].slice.call(e));for(var n=0,i=e.length;n<i;n++)t.call(e,e[n],n)}}function o(e,n){var i=Object.prototype.toString.call(n).slice(8,-1);return n!==t&&null!==n&&i===e}function s(e){return o("Function",e)}function a(e){return o("Array",e)}function r(e){var t=e.split("/"),n=t[t.length-1],i=n.indexOf("?");return-1!==i?n.substring(0,i):n}function l(e){(e=e||n)._done||(e(),e._done=1)}function c(e){var t,n,i={};if("object"==typeof e)for(t in e)!e[t]||(i={name:t,url:e[t]});else i={name:r(e),url:e};return(n=_[i.name])&&n.url===i.url?n:(_[i.name]=i,i)}function d(e){for(var t in e=e||_)if(e.hasOwnProperty(t)&&e[t].state!==x)return!1;return!0}function u(e){e.state===t&&(e.state=A,e.onpreload=[],h({url:e.url,type:"cache"},(function(){!function(e){e.state=C,i(e.onpreload,(function(e){e.call()}))}(e)})))}function p(e,t){t=t||n,e.state!==x?e.state!==k?e.state!==A?(e.state=k,h(e,(function(){e.state=x,t(),i(w[e.name],(function(e){l(e)})),g&&d()&&i(w.ALL,(function(e){l(e)}))}))):e.onpreload.push((function(){p(e,t)})):S.ready(e.name,t):t()}function h(t,i){function o(t){t=t||e.event,a.onload=a.onreadystatechange=a.onerror=null,i()}function s(n){("load"===(n=n||e.event).type||/loaded|complete/.test(a.readyState)&&(!b.documentMode||b.documentMode<9))&&(e.clearTimeout(t.errorTimeout),e.clearTimeout(t.cssTimeout),a.onload=a.onreadystatechange=a.onerror=null,i())}var a,r,l;i=i||n,r=function(e){var t=(e=e||"").split("?")[0].split(".");return t[t.length-1].toLowerCase()}(t.url),"css"===r?((a=b.createElement("link")).type="text/"+(t.type||"css"),a.rel="stylesheet",a.href=t.url,t.cssRetries=0,t.cssTimeout=e.setTimeout((function n(){if(t.state!==x&&t.cssRetries<=20){for(var i=0,o=b.styleSheets.length;i<o;i++)if(b.styleSheets[i].href===a.href)return void s({type:"load"});t.cssRetries++,t.cssTimeout=e.setTimeout(n,250)}}),500)):((a=b.createElement("script")).type="text/"+(t.type||"javascript"),a.src=t.url),a.onload=a.onreadystatechange=s,a.onerror=o,a.async=!1,a.defer=!1,t.errorTimeout=e.setTimeout((function(){o({type:"timeout"})}),7e3),(l=b.head||b.getElementsByTagName("head")[0]).insertBefore(a,l.lastChild)}function f(){if(!b.body)return e.clearTimeout(S.readyTimeout),void(S.readyTimeout=e.setTimeout(f,50));g||(g=!0,function(){for(var e,t=b.getElementsByTagName("script"),n=0,i=t.length;n<i;n++)if(e=t[n].getAttribute("data-headjs-load"))return void S.load(e)}(),i(y,(function(e){l(e)})))}function m(){b.addEventListener?(b.removeEventListener("DOMContentLoaded",m,!1),f()):"complete"===b.readyState&&(b.detachEvent("onreadystatechange",m),f())}var g,v,b=e.document,y=[],w={},_={},T="async"in b.createElement("script")||"MozAppearance"in b.documentElement.style||e.opera,E=e.head_conf&&e.head_conf.head||"head",S=e[E]=e[E]||function(){S.ready.apply(null,arguments)},A=1,C=2,k=3,x=4;if("complete"===b.readyState)f();else if(b.addEventListener)b.addEventListener("DOMContentLoaded",m,!1),e.addEventListener("load",f,!1);else{b.attachEvent("onreadystatechange",m),e.attachEvent("onload",f),v=!1;try{v=!e.frameElement&&b.documentElement}catch(e){}v&&v.doScroll&&function t(){if(!g){try{v.doScroll("left")}catch(n){return e.clearTimeout(S.readyTimeout),void(S.readyTimeout=e.setTimeout(t,50))}f()}}()}S.load=S.js=T?function(){var e=arguments,t=e[e.length-1],n={};return s(t)||(t=null),a(e[0])?(e[0].push(t),S.load.apply(null,e[0]),S):(i(e,(function(e){e!==t&&(e=c(e),n[e.name]=e)})),i(e,(function(e){e!==t&&p(e=c(e),(function(){d(n)&&l(t)}))})),S)}:function(){var e=arguments,t=e[e.length-1],n=[].slice.call(e,1),o=n[0];return s(t)||(t=null),a(e[0])?(e[0].push(t),S.load.apply(null,e[0]),S):(o?(i(n,(function(e){s(e)||!e||u(c(e))})),p(c(e[0]),s(o)?o:function(){S.load.apply(null,n)})):p(c(e[0])),S)},S.test=function(e,t,i,o){var s="object"==typeof e?e:{test:e,success:!!t&&(a(t)?t:[t]),failure:!!i&&(a(i)?i:[i]),callback:o||n},r=!!s.test;return r&&s.success?(s.success.push(s.callback),S.load.apply(null,s.success)):r||!s.failure?o():(s.failure.push(s.callback),S.load.apply(null,s.failure)),S},S.ready=function(e,t){var n,o,r;return e===b?(g?l(t):y.push(t),S):(s(e)&&(t=e,e="ALL"),a(e)?(n={},i(e,(function(e){n[e]=_[e],S.ready(e,(function(){d(n)&&l(t)}))})),S):"string"==typeof e&&s(t)?(o=_[e])&&o.state===x||"ALL"===e&&d()&&g?(l(t),S):((r=w[e])?r.push(t):r=w[e]=[t],S):S)},S.ready(b,(function(){d()&&i(w.ALL,(function(e){l(e)})),S.feature&&S.feature("domloaded",!0)}))}(window)},56555:(e,t,n)=>{n(43838),n(39028),function(e){e.fn.address=function(t){return e(this).each((function(n){e(this).data("address")||e(this).on("click",(function(n){if(n.shiftKey||n.ctrlKey||n.metaKey||2==n.which)return!0;var i=n.currentTarget;if(e(i).is("a")){n.preventDefault();var o=t?t.call(i):/address:/.test(e(i).attr("rel"))?e(i).attr("rel").split("address:")[1].split(" ")[0]:void 0===e.address.state()||/^\/?$/.test(e.address.state())?e(i).attr("href").replace(/^(#\!?|\.)/,""):e(i).attr("href").replace(new RegExp("^(.*"+e.address.state()+"|\\.)"),"");e.address.value(o)}})).on("submit",(function(n){var i=n.currentTarget;if(e(i).is("form")){n.preventDefault();var o=e(i).attr("action"),s=t?t.call(i):(-1!=o.indexOf("?")?o.replace(/&$/,""):o+"?")+e(i).serialize();e.address.value(s)}})).data("address",!0)})),this},e.address=function(){var t,n,i,o,s=function(t){var n=e.extend(e.Event(t),function(){for(var t={},n=e.address.parameterNames(),i=0,o=n.length;i<o;i++)t[n[i]]=e.address.parameter(n[i]);return{value:e.address.value(),path:e.address.path(),pathNames:e.address.pathNames(),parameterNames:n,parameters:t,queryString:e.address.queryString()}}.call(e.address));return e(e.address).trigger(n),n},a=function(e){return Array.prototype.slice.call(e)},r=function(t,n,i){return e().bind.apply(e(e.address),Array.prototype.slice.call(arguments)),e.address},l=function(t,n){return e().unbind.apply(e(e.address),Array.prototype.slice.call(arguments)),e.address},c=function(){return F.pushState&&O.state!==t},d=function(){return("/"+B.pathname.replace(new RegExp(O.state),"")+B.search+(u()?"#"+u():"")).replace(U,"/")},u=function(){var e=B.href.indexOf("#");return-1!=e?B.href.substr(e+1):""},p=function(){return c()?d():u()},h=function(){try{return top.document!==t&&top.document.title!==t&&top.jQuery!==t&&top.jQuery.address!==t&&!1!==top.jQuery.address.frames()?top:window}catch(e){return window}},f=function(e){return e=e.toString(),(O.strict&&"/"!=e.substr(0,1)?"/":"")+e},m=function(e,t){return parseInt(e.css(t),10)},g=function(){if(!q){var e=p();decodeURI(Z)!=decodeURI(e)&&(D&&R<7?B.reload():(D&&!K&&O.history&&j(y,50),Z=e,v(I)))}},v=function(e){return j(b,10),s(C).isDefaultPrevented()||s(e?k:x).isDefaultPrevented()},b=function(){if("null"!==O.tracker&&O.tracker!==T){var n=e.isFunction(O.tracker)?O.tracker:M[O.tracker],i=(B.pathname+B.search+(e.address&&!c()?e.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");e.isFunction(n)?n(i):(e.isFunction(M.urchinTracker)&&M.urchinTracker(i),M.pageTracker!==t&&e.isFunction(M.pageTracker._trackPageview)&&M.pageTracker._trackPageview(i),M._gaq!==t&&e.isFunction(M._gaq.push)&&M._gaq.push(["_trackPageview",decodeURI(i)]),e.isFunction(M.ga)&&M.ga("send","pageview",i))}},y=function(){var e="javascript:"+I+";document.open();document.writeln('<html><head><title>"+P.title.replace(/\'/g,"\\'")+"</title><script>var "+E+' = "'+encodeURIComponent(p()).replace(/\'/g,"\\'")+(P.domain!=B.hostname?'";document.domain="'+P.domain:"")+"\";<\/script></head></html>');document.close();";R<7?n.src=e:n.contentWindow.location.replace(e)},w=function(){if(G&&-1!=V){var e,t,n=G.substr(V+1).split("&");for(e=0;e<n.length;e++)t=n[e].split("="),/^(autoUpdate|history|strict|wrap)$/.test(t[0])&&(O[t[0]]=isNaN(t[1])?/^(true|yes)$/i.test(t[1]):0!==parseInt(t[1],10)),/^(state|tracker)$/.test(t[0])&&(O[t[0]]=t[1]);G=T}Z=p()},_=function(){if(!Y){if(Y=$,w(),e('a[rel*="address:"]').address(),O.wrap){var i=e("body");e("body > *").wrapAll('<div style="padding:'+(m(i,"marginTop")+m(i,"paddingTop"))+"px "+(m(i,"marginRight")+m(i,"paddingRight"))+"px "+(m(i,"marginBottom")+m(i,"paddingBottom"))+"px "+(m(i,"marginLeft")+m(i,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+E+'" style="height:100%;overflow:auto;position:relative;'+(N&&!window.statusbar.visible?"resize:both;":"")+'" />');e("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"}),N&&e('<style type="text/css" />').appendTo("head").text("#"+E+"::-webkit-resizer { background-color: #fff; }")}if(D&&!K){var o=P.getElementsByTagName("frameset")[0];(n=P.createElement((o?"":"i")+"frame")).src="javascript:"+I,o?(o.insertAdjacentElement("beforeEnd",n),o[o.cols?"cols":"rows"]+=",0",n.noResize=$,n.frameBorder=n.frameSpacing=0):(n.style.display="none",n.style.width=n.style.height=0,n.tabIndex=-1,P.body.insertAdjacentElement("afterBegin",n)),j((function(){e(n).bind("load",(function(){var e=n.contentWindow;(Z=e[E]!==t?e[E]:"")!=p()&&(v(I),B.hash=Z)})),n.contentWindow[E]===t&&y()}),50)}j((function(){s("init"),v(I)}),1),c()||(D&&R>7||!D&&K?M.addEventListener?M.addEventListener(S,g,I):M.attachEvent&&M.attachEvent("on"+S,g):H(g,50)),"state"in window.history&&e(window).trigger("popstate")}},T=null,E="jQueryAddress",S="hashchange",A="init",C="change",k="internalChange",x="externalChange",$=!0,I=!1,O={autoUpdate:$,history:$,strict:$,frames:$,wrap:I},L=(i={},(o=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent)).browser&&(i[o.browser]=!0,i.version=o.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),i),R=parseFloat(L.version),N=L.webkit||L.safari,D=L.msie,M=h(),P=M.document,F=M.history,B=M.location,H=setInterval,j=setTimeout,U=/\/{2,9}/g,W=navigator.userAgent,K="on"+S in M,G=e("script:last").attr("src"),V=G?G.indexOf("?"):-1,z=P.title,q=I,Y=I,X=$,Q=I,Z=p();if(D){R=parseFloat(W.substr(W.indexOf("MSIE")+4)),P.documentMode&&P.documentMode!=R&&(R=8!=P.documentMode?7:8);var J=P.onpropertychange;P.onpropertychange=function(){J&&J.call(P),P.title!=z&&-1!=P.title.indexOf("#"+p())&&(P.title=z)}}if(F.navigationMode&&(F.navigationMode="compatible"),"complete"==document.readyState)var ee=setInterval((function(){e.address&&(_(),clearInterval(ee))}),50);else w(),e(_);return e(window).bind("popstate",(function(){decodeURI(Z)!=decodeURI(p())&&(Z=p(),v(I))})).bind("unload",(function(){M.removeEventListener?M.removeEventListener(S,g,I):M.detachEvent&&M.detachEvent("on"+S,g)})),{bind:function(e,t,n){return r.apply(this,a(arguments))},unbind:function(e,t){return l.apply(this,a(arguments))},init:function(e,t){return r.apply(this,[A].concat(a(arguments)))},change:function(e,t){return r.apply(this,[C].concat(a(arguments)))},internalChange:function(e,t){return r.apply(this,[k].concat(a(arguments)))},externalChange:function(e,t){return r.apply(this,[x].concat(a(arguments)))},baseURL:function(){var e=B.href;return-1!=e.indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),/\/$/.test(e)&&(e=e.substr(0,e.length-1)),e},autoUpdate:function(e){return e!==t?(O.autoUpdate=e,this):O.autoUpdate},history:function(e){return e!==t?(O.history=e,this):O.history},state:function(e){if(e!==t){O.state=e;var n=d();return O.state!==t&&(F.pushState?"/#/"==n.substr(0,3)&&B.replace(O.state.replace(/^\/$/,"")+n.substr(2)):"/"!=n&&n.replace(/^\/#/,"")!=u()&&j((function(){B.replace(O.state.replace(/^\/$/,"")+"/#"+n)}),1)),this}return O.state},frames:function(e){return e!==t?(O.frames=e,M=h(),this):O.frames},strict:function(e){return e!==t?(O.strict=e,this):O.strict},tracker:function(e){return e!==t?(O.tracker=e,this):O.tracker},wrap:function(e){return e!==t?(O.wrap=e,this):O.wrap},update:function(){return Q=$,this.value(Z),Q=I,this},title:function(e){return e!==t?(j((function(){z=P.title=e,X&&n&&n.contentWindow&&n.contentWindow.document&&(n.contentWindow.document.title=e,X=I)}),50),this):P.title},value:function(e){if(e!==t){if("/"==(e=f(e))&&(e=""),Z==e&&!Q)return;if(Z=e,O.autoUpdate||Q){if(v($))return this;c()?F[O.history?"pushState":"replaceState"]({},"",O.state.replace(/\/$/,"")+(""===Z?"/":Z)):(q=$,(N||Z!=p())&&(O.history?B.hash="#"+Z:B.replace("#"+Z)),D&&!K&&O.history&&j(y,50),N?j((function(){q=I}),1):q=I)}return this}return f(Z)},path:function(e){if(e!==t){var n=this.queryString(),i=this.hash();return this.value(e+(n?"?"+n:"")+(i?"#"+i:"")),this}return f(Z).split("#")[0].split("?")[0]},pathNames:function(){var e=this.path(),t=e.replace(U,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||t.splice(0,1),"/"==e.substr(e.length-1,1)&&t.splice(t.length-1,1),t},queryString:function(e){if(e!==t){var n=this.hash();return this.value(this.path()+(e?"?"+e:"")+(n?"#"+n:"")),this}var i=Z.split("?");return i.slice(1,i.length).join("?").split("#")[0]},parameter:function(n,i,o){var s,a;if(i!==t){var r=this.parameterNames();for(a=[],i=i===t||i===T?"":i.toString(),s=0;s<r.length;s++){var l=r[s],c=this.parameter(l);"string"==typeof c&&(c=[c]),l==n&&(c=i===T||""===i?[]:o?c.concat([i]):[i]);for(var d=0;d<c.length;d++)a.push(l+"="+c[d])}return-1==e.inArray(n,r)&&i!==T&&""!==i&&a.push(n+"="+i),this.queryString(a.join("&")),this}if(i=this.queryString()){var u=[];for(a=i.split("&"),s=0;s<a.length;s++){var p=a[s].split("=");p[0]==n&&u.push(p.slice(1).join("="))}if(0!==u.length)return 1!=u.length?u:u[0]}},parameterNames:function(){var t=this.queryString(),n=[];if(t&&-1!=t.indexOf("="))for(var i=t.split("&"),o=0;o<i.length;o++){var s=i[o].split("=")[0];-1==e.inArray(s,n)&&n.push(s)}return n},hash:function(e){if(e!==t)return this.value(Z.split("#")[0]+(e?"#"+e:"")),this;var n=Z.split("#");return n.slice(1,n.length).join("#")}}}()}(jQuery)},67722:(e,t,n)=>{var i,o,s;!function(){"use strict";function a(e){e.fn._fadeIn=e.fn.fadeIn;var t=e.noop||function(){},n=/MSIE/.test(navigator.userAgent),i=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),o=(document.documentMode,e.isFunction(document.createElement("div").style.setExpression));e.blockUI=function(e){r(window,e)},e.unblockUI=function(e){l(window,e)},e.growlUI=function(t,n,i,o){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),n&&s.append("<h2>"+n+"</h2>"),void 0===i&&(i=3e3);var a=function(t){t=t||{},e.blockUI({message:s,fadeIn:void 0!==t.fadeIn?t.fadeIn:700,fadeOut:void 0!==t.fadeOut?t.fadeOut:1e3,timeout:void 0!==t.timeout?t.timeout:i,centerY:!1,showOverlay:!1,onUnblock:o,css:e.blockUI.defaults.growlCSS})};a();s.css("opacity");s.mouseover((function(){a({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)})).mouseout((function(){e(".blockMsg").fadeOut(1e3)}))},e.fn.block=function(t){if(this[0]===window)return e.blockUI(t),this;var n=e.extend({},e.blockUI.defaults,t||{});return this.each((function(){var t=e(this);n.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})})),this.each((function(){"static"==e.css(this,"position")&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,r(this,t)}))},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each((function(){l(this,t)}))},e.blockUI.version=2.7,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var s=null,a=[];function r(r,c){var u,f,m=r==window,g=c&&void 0!==c.message?c.message:void 0;if(!(c=e.extend({},e.blockUI.defaults,c||{})).ignoreIfBlocked||!e(r).data("blockUI.isBlocked")){if(c.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,c.overlayCSS||{}),u=e.extend({},e.blockUI.defaults.css,c.css||{}),c.onOverlayClick&&(c.overlayCSS.cursor="pointer"),f=e.extend({},e.blockUI.defaults.themedCSS,c.themedCSS||{}),g=void 0===g?c.message:g,m&&s&&l(window,{fadeOut:0}),g&&"string"!=typeof g&&(g.parentNode||g.jquery)){var v=g.jquery?g[0]:g,b={};e(r).data("blockUI.history",b),b.el=v,b.parent=v.parentNode,b.display=v.style.display,b.position=v.style.position,b.parent&&b.parent.removeChild(v)}e(r).data("blockUI.onUnblock",c.onUnblock);var y,w,_,T,E=c.baseZ;y=n||c.forceIframe?e('<iframe class="blockUI" style="z-index:'+E+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+c.iframeSrc+'"></iframe>'):e('<div class="blockUI" style="display:none"></div>'),w=c.theme?e('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+E+++';display:none"></div>'):e('<div class="blockUI blockOverlay" style="z-index:'+E+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),c.theme&&m?(T='<div class="blockUI '+c.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(E+10)+';display:none;position:fixed">',c.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(c.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):c.theme?(T='<div class="blockUI '+c.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(E+10)+';display:none;position:absolute">',c.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(c.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):T=m?'<div class="blockUI '+c.blockMsgClass+' blockPage" style="z-index:'+(E+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+c.blockMsgClass+' blockElement" style="z-index:'+(E+10)+';display:none;position:absolute"></div>',_=e(T),g&&(c.theme?(_.css(f),_.addClass("ui-widget-content")):_.css(u)),c.theme||w.css(c.overlayCSS),w.css("position",m?"fixed":"absolute"),(n||c.forceIframe)&&y.css("opacity",0);var S=[y,w,_],A=e(m?"body":r);e.each(S,(function(){this.appendTo(A)})),c.theme&&c.draggable&&e.fn.draggable&&_.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var C=o&&(!e.support.boxModel||e("object,embed",m?null:r).length>0);if(i||C){if(m&&c.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%"),(i||!e.support.boxModel)&&!m)var k=h(r,"borderTopWidth"),x=h(r,"borderLeftWidth"),$=k?"(0 - "+k+")":0,I=x?"(0 - "+x+")":0;e.each(S,(function(e,t){var n=t[0].style;if(n.position="absolute",e<2)m?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+c.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),m?n.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),I&&n.setExpression("left",I),$&&n.setExpression("top",$);else if(c.centerY)m&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!c.centerY&&m){var i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(c.css&&c.css.top?parseInt(c.css.top,10):0)+') + "px"';n.setExpression("top",i)}}))}if(g&&(c.theme?_.find(".ui-widget-content").append(g):_.append(g),(g.jquery||g.nodeType)&&e(g).show()),(n||c.forceIframe)&&c.showOverlay&&y.show(),c.fadeIn){var O=c.onBlock?c.onBlock:t,L=c.showOverlay&&!g?O:t,R=g?O:t;c.showOverlay&&w._fadeIn(c.fadeIn,L),g&&_._fadeIn(c.fadeIn,R)}else c.showOverlay&&w.show(),g&&_.show(),c.onBlock&&c.onBlock.bind(_)();if(d(1,r,c),m?(s=_[0],a=e(c.focusableElements,s),c.focusInput&&setTimeout(p,20)):function(e,t,n){var i=e.parentNode,o=e.style,s=(i.offsetWidth-e.offsetWidth)/2-h(i,"borderLeftWidth"),a=(i.offsetHeight-e.offsetHeight)/2-h(i,"borderTopWidth");t&&(o.left=s>0?s+"px":"0");n&&(o.top=a>0?a+"px":"0")}(_[0],c.centerX,c.centerY),c.timeout){var N=setTimeout((function(){m?e.unblockUI(c):e(r).unblock(c)}),c.timeout);e(r).data("blockUI.timeout",N)}}}function l(t,n){var i,o,r=t==window,l=e(t),u=l.data("blockUI.history"),p=l.data("blockUI.timeout");p&&(clearTimeout(p),l.removeData("blockUI.timeout")),n=e.extend({},e.blockUI.defaults,n||{}),d(0,t,n),null===n.onUnblock&&(n.onUnblock=l.data("blockUI.onUnblock"),l.removeData("blockUI.onUnblock")),o=r?e("body").children().filter(".blockUI").add("body > .blockUI"):l.find(">.blockUI"),n.cursorReset&&(o.length>1&&(o[1].style.cursor=n.cursorReset),o.length>2&&(o[2].style.cursor=n.cursorReset)),r&&(s=a=null),n.fadeOut?(i=o.length,o.stop().fadeOut(n.fadeOut,(function(){0==--i&&c(o,u,n,t)}))):c(o,u,n,t)}function c(t,n,i,o){var s=e(o);if(!s.data("blockUI.isBlocked")){t.each((function(e,t){this.parentNode&&this.parentNode.removeChild(this)})),n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.el.style.cursor="default",n.parent&&n.parent.appendChild(n.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),"function"==typeof i.onUnblock&&i.onUnblock(o,i);var a=e(document.body),r=a.width(),l=a[0].style.width;a.width(r-1).width(r),a[0].style.width=l}}function d(t,n,i){var o=n==window,a=e(n);if((t||(!o||s)&&(o||a.data("blockUI.isBlocked")))&&(a.data("blockUI.isBlocked",t),o&&i.bindEvents&&(!t||i.showOverlay))){var r="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(r,i,u):e(document).unbind(r,u)}}function u(t){if("keydown"===t.type&&t.keyCode&&9==t.keyCode&&s&&t.data.constrainTabKey){var n=a,i=!t.shiftKey&&t.target===n[n.length-1],o=t.shiftKey&&t.target===n[0];if(i||o)return setTimeout((function(){p(o)}),10),!1}var r=t.data,l=e(t.target);return l.hasClass("blockOverlay")&&r.onOverlayClick&&r.onOverlayClick(t),l.parents("div."+r.blockMsgClass).length>0||0===l.parents().children().filter("div.blockUI").length}function p(e){if(a){var t=a[!0===e?a.length-1:0];t&&t.focus()}}function h(t,n){return parseInt(e.css(t,n),10)||0}}n.amdO.jQuery?(o=[n(13886)],void 0===(s="function"==typeof(i=a)?i.apply(t,o):i)||(e.exports=s)):a(jQuery)}()},68635:(e,t,n)=>{var i,o,s;n(39028),o=[n(13886)],void 0===(s="function"==typeof(i=function(e){var t=/\+/g;function n(e){return r.raw?e:encodeURIComponent(e)}function i(e){return r.raw?e:decodeURIComponent(e)}function o(e){return n(r.json?JSON.stringify(e):String(e))}function s(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),r.json?JSON.parse(e):e}catch(e){}}function a(t,n){var i=r.raw?t:s(t);return e.isFunction(n)?n(i):i}var r=e.cookie=function(t,s,l){if(arguments.length>1&&!e.isFunction(s)){if("number"==typeof(l=e.extend({},r.defaults,l)).expires){var c=l.expires,d=l.expires=new Date;d.setTime(+d+864e5*c)}return document.cookie=[n(t),"=",o(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=t?void 0:{},p=document.cookie?document.cookie.split("; "):[],h=0,f=p.length;h<f;h++){var m=p[h].split("="),g=i(m.shift()),v=m.join("=");if(t&&t===g){u=a(v,s);break}t||void 0===(v=a(v))||(u[g]=v)}return u};r.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}})?i.apply(t,o):i)||(e.exports=s)},49314:(e,t,n)=>{var i,o,s;n(43838),n(39028),o=[n(13886),n(69229)],void 0===(s="function"==typeof(i=function(e){function t(t){var n="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var o=i.dataTransfer;o&&-1!==e.inArray("Files",o.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:i}))&&(i.preventDefault(),n&&(o.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file"/>').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,uniqueFilenames:void 0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,(function(e,n){t=t.replace("{"+e+"}",n)})),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||!1!==n.autoUpload&&e(this).fileupload("option","autoUpload"))&&n.process().done((function(){n.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,(function(e,t){n.push({name:e,value:t})})),n):[]},_getTotal:function(t){var n=0;return e.each(t,(function(e,t){n+=t.size||1})),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)Object.prototype.hasOwnProperty.call(e._response,t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,o=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&o-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=o,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(o,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",(function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)})),t.xhr=function(){return i})},_deinitProgressListener:function(t){var n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&e(n.upload).unbind("progress")},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_getUniqueFilename:function(e,t){return t[e=String(e)]?(e=e.replace(/(?: \(([\d]+)\))?(\.[^.]+)?$/,(function(e,t,n){return" ("+(t?Number(t)+1:1)+")"+(n||"")})),this._getUniqueFilename(e,t)):(t[e]=!0,e)},_initXHRData:function(t){var n,i=this,o=t.files[0],s=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",o)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.uploadName||o.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:a,value:t.blob}):e.each(t.files,(function(i,o){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||a,value:o})}))):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),(function(e,t){n.append(t.name,t.value)}))),t.blob?n.append(a,t.blob,o.uploadName||o.name):e.each(t.files,(function(o,s){if(i._isInstanceOf("File",s)||i._isInstanceOf("Blob",s)){var r=s.uploadName||s.name;t.uniqueFilenames&&(r=i._getUniqueFilename(r,t.uniqueFilenames)),n.append("array"===e.type(t.paramName)&&t.paramName[o]||a,s,r)}}))),t.data=n):(t.contentType=o.type||"application/octet-stream",t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each((function(){for(var t=e(this),n=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)i.push(n),o-=1})),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var o=e.Deferred(),s=o.promise();return n=n||this.options.context||s,!0===t?o.resolveWith(n,i):!1===t&&o.rejectWith(n,i),s.abort=o.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var i=this,o=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,s){return(t||s)&&(n._processQueue=this._processQueue=(this._processQueue||o([this])).then((function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():o(arguments)})).then(t,s)),this._processQueue||o([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=!1!==i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,o,s=this,a=t.files[0],r=a.size,l=t.uploadedBytes,c=t.maxChunkSize||r,d=this._blobSlice,u=e.Deferred(),p=u.promise();return!(!(this._isXHRUpload(t)&&d&&(l||("function"===e.type(c)?c(t):c)<r))||t.data)&&(!!n||(l>=r?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(o=function(){var n=e.extend({},t),p=n._progress.loaded;n.blob=d.call(a,l,l+("function"===e.type(c)?c(n):c),a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+r,s._trigger("chunkbeforesend",null,n),s._initXHRData(n),s._initProgressListener(n),i=(!1!==s._trigger("chunksend",null,n)&&e.ajax(n)||s._getXHRPromise(!1,n.context)).done((function(i,a,c){l=s._getUploadedBytes(c)||l+n.chunkSize,p+n.chunkSize-n._progress.loaded&&s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=a,n.jqXHR=c,s._trigger("chunkdone",null,n),s._trigger("chunkalways",null,n),l<r?o():u.resolveWith(n.context,[i,a,c])})).fail((function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,s._trigger("chunkfail",null,n),s._trigger("chunkalways",null,n),u.rejectWith(n.context,[e,t,i])})).always((function(){s._deinitProgressListener(n)}))},this._enhancePromise(p),p.abort=function(){return i.abort()},o(),p)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,o){var s=o._progress.total,a=o._response;o._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),o),a.result=o.result=t,a.textStatus=o.textStatus=n,a.jqXHR=o.jqXHR=i,this._trigger("done",null,o)},_onFail:function(e,t,n,i){var o=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),o.jqXHR=i.jqXHR=e,o.textStatus=i.textStatus=t,o.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,o,s,a,r=this,l=r._getAJAXSettings(n),c=function(){return r._sending+=1,l._bitrateTimer=new r._BitrateTimer,i=i||((o||!1===r._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&r._getXHRPromise(!1,l.context,o)||r._chunkedUpload(l)||e.ajax(l)).done((function(e,t,n){r._onDone(e,t,n,l)})).fail((function(e,t,n){r._onFail(e,t,n,l)})).always((function(e,t,n){if(r._deinitProgressListener(l),r._onAlways(e,t,n,l),r._sending-=1,r._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>r._sending)for(var i=r._slots.shift();i;){if("pending"===r._getDeferredState(i)){i.resolve();break}i=r._slots.shift()}0===r._active&&r._trigger("stop")}))};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),a=s.then(c)):(this._sequence=this._sequence.then(c,c),a=this._sequence),a.abort=function(){return o=[void 0,"abort","abort"],i?i.abort():(s&&s.rejectWith(l.context,o),c())},this._enhancePromise(a)):c()},_onAdd:function(t,n){var i,o,s,a,r=this,l=!0,c=e.extend({},this.options,n),d=n.files,u=d.length,p=c.limitMultiFileUploads,h=c.limitMultiFileUploadSize,f=c.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(c),v=0;if(!u)return!1;if(h&&void 0===d[0].size&&(h=void 0),(c.singleFileUploads||p||h)&&this._isXHRUpload(c))if(c.singleFileUploads||h||!p)if(!c.singleFileUploads&&h)for(s=[],i=[],a=0;a<u;a+=1)m+=d[a].size+f,(a+1===u||m+d[a+1].size+f>h||p&&a+1-v>=p)&&(s.push(d.slice(v,a+1)),(o=g.slice(v,a+1)).length||(o=g),i.push(o),v=a+1,m=0);else i=g;else for(s=[],i=[],a=0;a<u;a+=p)s.push(d.slice(a,a+p)),(o=g.slice(a,a+p)).length||(o=g),i.push(o);else s=[d],i=[g];return n.originalFiles=d,e.each(s||d,(function(o,a){var c=e.extend({},n);return c.files=s?a:[a],c.paramName=i[o],r._initResponseObject(c),r._initProgressObject(c),r._addConvenienceMethods(t,c),l=r._trigger("add",e.Event("add",{delegatedEvent:t}),c)})),l},_replaceFileInput:function(t){var n=t.fileInput,i=n.clone(!0),o=n.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),n.after(i).detach(),o&&i.focus(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map((function(e,t){return t===n[0]?i[0]:t})),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,n){var i,o=this,s=e.Deferred(),a=[],r=function(e){e&&!e.entry&&(e.entry=t),s.resolve([e])},l=function(e){o._handleFileTreeEntries(e,n+t.name+"/").done((function(e){s.resolve(e)})).fail(r)},c=function(){i.readEntries((function(e){e.length?(a=a.concat(e),c()):l(a)}),r)};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,s.resolve(t._file)):t.file((function(e){e.relativePath=n,s.resolve(e)}),r):t.isDirectory?(i=t.createReader(),c()):s.resolve([]),s.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,(function(e){return i._handleFileTreeEntry(e,n)}))).then((function(){return Array.prototype.concat.apply([],arguments)}))},_getDroppedFiles:function(t){var n=(t=t||{}).items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,(function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()}))):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var n,i,o=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if((n=e.makeArray(t.prop("files"))).length)void 0===n[0].name&&n[0].fileName&&e.each(n,(function(e,t){t.name=t.fileName,t.size=t.fileSize}));else{if(!(i=t.prop("value")))return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then((function(){return Array.prototype.concat.apply([],arguments)})):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always((function(o){i.files=o,n.options.replaceFileInput&&n._replaceFileInput(i),!1!==n._trigger("change",e.Event("change",{delegatedEvent:t}),i)&&n._onAdd(t,i)}))},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,(function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)})),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,o={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always((function(i){o.files=i,!1!==n._trigger("drop",e.Event("drop",{delegatedEvent:t}),o)&&n._onAdd(t,o)})))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=this.element.data();e.each(this.element[0].attributes,(function(e,o){var s,a=o.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,(function(e){return e.charAt(1).toUpperCase()})),s=i[a],t._isRegExpOption(a,s)&&(s=t._getRegExp(s)),n[a]=s)}))},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always((function(e){t.files=e,n._onAdd(null,t)})):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,o=this,s=e.Deferred(),a=s.promise();return a.abort=function(){return i=!0,n?n.abort():(s.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always((function(e){i||(e.length?(t.files=e,(n=o._onSend(null,t)).then((function(e,t,n){s.resolve(e,t,n)}),(function(e,t,n){s.reject(e,t,n)}))):s.reject())})),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})?i.apply(t,o):i)||(e.exports=s)},73657:(e,t,n)=>{var i,o,s;n(43838),n(39028),function(){"use strict";o=[n(13886)],i=function(e){function t(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function n(t){var n=t.target,i=e(n);if(!i.is("[type=submit],[type=image]")){var o=i.closest("[type=submit]");if(0===o.length)return;n=o[0]}var s=this;if(s.clk=n,"image"==n.type)if(void 0!==t.offsetX)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=i.offset();s.clk_x=t.pageX-a.left,s.clk_y=t.pageY-a.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout((function(){s.clk=s.clk_x=s.clk_y=null}),100)}function i(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var o={};o.fileapi=void 0!==e("<input type='file'/>").get(0).files,o.formdata=void 0!==window.FormData;var s=!!e.fn.prop;e.fn.attr2=function(){if(!s)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function n(n){var i,o,s=e.param(n,t.traditional).split("&"),a=s.length,r=[];for(i=0;a>i;i++)s[i]=s[i].replace(/\+/g," "),o=s[i].split("="),r.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return r}function a(i){for(var o=new FormData,s=0;s<i.length;s++)o.append(i[s].name,i[s].value);if(t.extraData){var a=n(t.extraData);for(s=0;s<a.length;s++)a[s]&&o.append(a[s][0],a[s][1])}t.data=null;var r=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(r.xhr=function(){var n=e.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",(function(e){var n=0,i=e.loaded||e.position,o=e.total;e.lengthComputable&&(n=Math.ceil(i/o*100)),t.uploadProgress(e,i,o,n)}),!1),n}),r.data=null;var c=r.beforeSend;return r.beforeSend=function(e,n){n.data=t.formData?t.formData:o,c&&c.call(this,e,n)},e.ajax(r)}function r(n){function o(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){i("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){i("cannot get iframe.contentDocument: "+n),t=e.document}return t}function a(){function t(){try{var e=o(v).readyState;i("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(e){i("Server abort: ",e," (",e.name,")"),r(C),T&&clearTimeout(T),T=void 0}}var n=u.attr2("target"),s=u.attr2("action"),a="multipart/form-data",c=u.attr("enctype")||u.attr("encoding")||a;E.setAttribute("target",f),(!l||/post/i.test(l))&&E.setAttribute("method","POST"),s!=p.url&&E.setAttribute("action",p.url),p.skipEncodingOverride||l&&!/post/i.test(l)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),p.timeout&&(T=setTimeout((function(){_=!0,r(A)}),p.timeout));var d=[];try{if(p.extraData)for(var h in p.extraData)p.extraData.hasOwnProperty(h)&&d.push(e.isPlainObject(p.extraData[h])&&p.extraData[h].hasOwnProperty("name")&&p.extraData[h].hasOwnProperty("value")?e('<input type="hidden" name="'+p.extraData[h].name+'">').val(p.extraData[h].value).appendTo(E)[0]:e('<input type="hidden" name="'+h+'">').val(p.extraData[h]).appendTo(E)[0]);p.iframeTarget||g.appendTo("body"),v.attachEvent?v.attachEvent("onload",r):v.addEventListener("load",r,!1),setTimeout(t,15);try{E.submit()}catch(e){document.createElement("form").submit.apply(E)}}finally{E.setAttribute("action",s),E.setAttribute("enctype",c),n?E.setAttribute("target",n):u.removeAttr("target"),e(d).remove()}}function r(t){if(!b.aborted&&!O){if((I=o(v))||(i("cannot access response document"),t=C),t===A&&b)return b.abort("timeout"),void S.reject(b,"timeout");if(t==C&&b)return b.abort("server abort"),void S.reject(b,"error","server abort");if(I&&I.location.href!=p.iframeSrc||_){v.detachEvent?v.detachEvent("onload",r):v.removeEventListener("load",r,!1);var n,s="success";try{if(_)throw"timeout";var a="xml"==p.dataType||I.XMLDocument||e.isXMLDoc(I);if(i("isXml="+a),!a&&window.opera&&(null===I.body||!I.body.innerHTML)&&--L)return i("requeing onLoad callback, DOM not available"),void setTimeout(r,250);var l=I.body?I.body:I.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=I.XMLDocument?I.XMLDocument:I,a&&(p.dataType="xml"),b.getResponseHeader=function(e){return{"content-type":p.dataType}[e.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var c=(p.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||p.textarea){var u=I.getElementsByTagName("textarea")[0];if(u)b.responseText=u.value,b.status=Number(u.getAttribute("status"))||b.status,b.statusText=u.getAttribute("statusText")||b.statusText;else if(d){var f=I.getElementsByTagName("pre")[0],m=I.getElementsByTagName("body")[0];f?b.responseText=f.textContent?f.textContent:f.innerText:m&&(b.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=R(b.responseText));try{$=D(b,c,p)}catch(e){s="parsererror",b.error=n=e||s}}catch(e){i("error caught: ",e),s="error",b.error=n=e||s}b.aborted&&(i("upload aborted"),s=null),b.status&&(s=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===s?(p.success&&p.success.call(p.context,$,"success",b),S.resolve(b.responseText,"success",b),h&&e.event.trigger("ajaxSuccess",[b,p])):s&&(void 0===n&&(n=b.statusText),p.error&&p.error.call(p.context,b,s,n),S.reject(b,"error",n),h&&e.event.trigger("ajaxError",[b,p,n])),h&&e.event.trigger("ajaxComplete",[b,p]),h&&! --e.active&&e.event.trigger("ajaxStop"),p.complete&&p.complete.call(p.context,b,s),O=!0,p.timeout&&clearTimeout(T),setTimeout((function(){p.iframeTarget?g.attr("src",p.iframeSrc):g.remove(),b.responseXML=null}),100)}}}var c,d,p,h,f,g,v,b,y,w,_,T,E=u[0],S=e.Deferred();if(S.abort=function(e){b.abort(e)},n)for(d=0;d<m.length;d++)c=e(m[d]),s?c.prop("disabled",!1):c.removeAttr("disabled");if((p=e.extend(!0,{},e.ajaxSettings,t)).context=p.context||p,f="jqFormIO"+(new Date).getTime(),p.iframeTarget?(w=(g=e(p.iframeTarget)).attr2("name"))?f=w:g.attr2("name",f):(g=e('<iframe name="'+f+'" src="'+p.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),v=g[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";i("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(e){}g.attr("src",p.iframeSrc),b.error=n,p.error&&p.error.call(p.context,b,n,t),h&&e.event.trigger("ajaxError",[b,p,n]),p.complete&&p.complete.call(p.context,b,n)}},(h=p.global)&&0==e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[b,p]),p.beforeSend&&!1===p.beforeSend.call(p.context,b,p))return p.global&&e.active--,S.reject(),S;if(b.aborted)return S.reject(),S;(y=E.clk)&&((w=y.name)&&!y.disabled&&(p.extraData=p.extraData||{},p.extraData[w]=y.value,"image"==y.type&&(p.extraData[w+".x"]=E.clk_x,p.extraData[w+".y"]=E.clk_y)));var A=1,C=2,k=e("meta[name=csrf-token]").attr("content"),x=e("meta[name=csrf-param]").attr("content");x&&k&&(p.extraData=p.extraData||{},p.extraData[x]=k),p.forceSync?a():setTimeout(a,10);var $,I,O,L=50,R=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},N=e.parseJSON||function(e){return window.eval("("+e+")")},D=function(t,n,i){var o=t.getResponseHeader("content-type")||"",s="xml"===n||!n&&o.indexOf("xml")>=0,a=s?t.responseXML:t.responseText;return s&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&o.indexOf("json")>=0?a=N(a):("script"===n||!n&&o.indexOf("javascript")>=0)&&e.globalEval(a)),a};return S}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,d,u=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),l=t.type||this.attr2("method"),(d=(d="string"==typeof(c=t.url||this.attr2("action"))?e.trim(c):"")||window.location.href||"")&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:l||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var p={};if(this.trigger("form-pre-serialize",[this,t,p]),p.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=t.traditional;void 0===h&&(h=e.ajaxSettings.traditional);var f,m=[],g=this.formToArray(t.semantic,m);if(t.data&&(t.extraData=t.data,f=e.param(t.data,h)),t.beforeSubmit&&!1===t.beforeSubmit(g,this,t))return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,t,p]),p.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(g,h);f&&(v=v?v+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var b=[];if(t.resetForm&&b.push((function(){u.resetForm()})),t.clearForm&&b.push((function(){u.clearForm(t.includeHidden)})),!t.dataType&&t.target){var y=t.success||function(){};b.push((function(n){var i=t.replaceTarget?"replaceWith":"html";e(t.target)[i](n).each(y,arguments)}))}else t.success&&b.push(t.success);if(t.success=function(e,n,i){for(var o=t.context||this,s=0,a=b.length;a>s;s++)b[s].apply(o,[e,n,i||u,u])},t.error){var w=t.error;t.error=function(e,n,i){var o=t.context||this;w.apply(o,[e,n,i,u])}}if(t.complete){var _=t.complete;t.complete=function(e,n){var i=t.context||this;_.apply(i,[e,n,u])}}var T=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,E="multipart/form-data",S=u.attr("enctype")==E||u.attr("encoding")==E,A=o.fileapi&&o.formdata;i("fileAPI :"+A);var C,k=(T||S)&&!A;!1!==t.iframe&&(t.iframe||k)?t.closeKeepAlive?e.get(t.closeKeepAlive,(function(){C=r(g)})):C=r(g):C=(T||S)&&A?a(g):e.ajax(t),u.removeData("jqxhr").data("jqxhr",C);for(var x=0;x<m.length;x++)m[x]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(o){if((o=o||{}).delegation=o.delegation&&e.isFunction(e.fn.on),!o.delegation&&0===this.length){var s={s:this.selector,c:this.context};return!e.isReady&&s.s?(i("DOM not ready, queuing ajaxForm"),e((function(){e(s.s,s.c).ajaxForm(o)})),this):(i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return o.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,o,t).on("click.form-plugin",this.selector,o,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",o,t).bind("click.form-plugin",o,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,n){var i=[];if(0===this.length)return i;var s,a,r,l,c,d,u,p,h=this[0],f=this.attr("id"),m=t?h.getElementsByTagName("*"):h.elements;if(m&&!/MSIE [678]/.test(navigator.userAgent)&&(m=e(m).get()),f&&((s=e(':input[form="'+f+'"]').get()).length&&(m=(m||[]).concat(s))),!m||!m.length)return i;for(a=0,u=m.length;u>a;a++)if((l=(d=m[a]).name)&&!d.disabled)if(t&&h.clk&&"image"==d.type)h.clk==d&&(i.push({name:l,value:e(d).val(),type:d.type}),i.push({name:l+".x",value:h.clk_x},{name:l+".y",value:h.clk_y}));else if((c=e.fieldValue(d,!0))&&c.constructor==Array)for(n&&n.push(d),r=0,p=c.length;p>r;r++)i.push({name:l,value:c[r]});else if(o.fileapi&&"file"==d.type){n&&n.push(d);var g=d.files;if(g.length)for(r=0;r<g.length;r++)i.push({name:l,value:g[r],type:d.type});else i.push({name:l,value:"",type:d.type})}else null!=c&&(n&&n.push(d),i.push({name:l,value:c,type:d.type,required:d.required}));if(!t&&h.clk){var v=e(h.clk),b=v[0];(l=b.name)&&!b.disabled&&"image"==b.type&&(i.push({name:l,value:v.val()}),i.push({name:l+".x",value:h.clk_x},{name:l+".y",value:h.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each((function(){var i=this.name;if(i){var o=e.fieldValue(this,t);if(o&&o.constructor==Array)for(var s=0,a=o.length;a>s;s++)n.push({name:i,value:o[s]});else null!=o&&n.push({name:this.name,value:o})}})),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,o=this.length;o>i;i++){var s=this[i],a=e.fieldValue(s,t);null==a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var i=t.name,o=t.type,s=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!t.checked||("submit"==o||"image"==o)&&t.form&&t.form.clk!=t||"select"==s&&-1==t.selectedIndex))return null;if("select"==s){var a=t.selectedIndex;if(0>a)return null;for(var r=[],l=t.options,c="select-one"==o,d=c?a+1:l.length,u=c?a:0;d>u;u++){var p=l[u];if(p.selected){var h=p.value;if(h||(h=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),c)return h;r.push(h)}}return r}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,o=this.tagName.toLowerCase();n.test(i)||"textarea"==o?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1},void 0===(s="function"==typeof i?i.apply(t,o):i)||(e.exports=s)}()},73977:(e,t,n)=>{var i,o,s;n(58740),function(){"use strict";o=[n(13886)],void 0===(s="function"==typeof(i=function(e){var t=0;e.ajaxTransport("iframe",(function(n){if(n.async){var i,o,s,a=n.initialIframeSrc||"javascript:false;";return{send:function(r,l){(i=e('<form style="display:none;"></form>')).attr("accept-charset",n.formAcceptCharset),s=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+s+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+s+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+s+"_method=PATCH",n.type="POST"),o=e('<iframe src="'+a+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",(function(){var t,s=e.isArray(n.paramName)?n.paramName:[n.paramName];o.unbind("load").bind("load",(function(){var t;try{if(!(t=o.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+a+'"></iframe>').appendTo(i),window.setTimeout((function(){i.remove()}),0)})),i.prop("target",o.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,(function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)})),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after((function(e){return t[e]})),n.paramName&&n.fileInput.each((function(t){e(this).prop("name",s[t]||n.paramName)})),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each((function(n,i){var o=e(t[n]);e(i).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(i)}))})),i.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src",a),i&&i.remove()}}}})),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})?i.apply(t,o):i)||(e.exports=s)}()},61628:()=>{!function(e){e.NotyManager=function(t,n){var i={bubble:{top:10,left:-2,showZero:!1},max:20,container:e("<div />"),wrapper:"<div/>",emptyHTML:'<div class="no-notification">There is no notification in here</div>',callback:{onOpen:function(){},onClose:function(){}},useNoty:!1,noty:{layout:"bottomRight",timeout:!1,closeWith:["button"]}},o={useNoty:!0,increase:!0},s=this;s.settings={};var a=function(){s.$bubble=e("<span class='noty-manager-bubble'>0</span>"),isNaN(s.settings.bubble.top)&&(s.settings.bubble.top=-8),isNaN(s.settings.bubble.left)&&(s.settings.bubble.left=2),s.$bubble.css({marginLeft:s.settings.bubble.left,top:s.settings.bubble.top}),s.$bubble.on("notymanager-flash",(function(){s.$bubble.css({opacity:0}).css({top:s.settings.bubble.top-10}).animate({top:s.settings.bubble.top,opacity:1})})),s.$el.css("position","relative"),s.$el.append(s.$bubble);var t=e(s.settings.emptyHTML);t.addClass("notymanager-empty-html"),s.settings.container.prepend(t),r()},r=function(){s.$el.on("click",(function(e){s.$el.toggleClass("notymanager-opened"),s.$el.hasClass("notymanager-opened")?l():c(),e.preventDefault()}))},l=function(){s.settings.callback.onOpen&&s.settings.callback.onOpen.call(s)},c=function(){s.settings.callback.onClose&&s.settings.callback.onClose.call(s)},d=function(t,n,i){i=e.extend({},o,i),"function"==typeof noty&&s.settings.useNoty&&i.useNoty&&((i=i||{}).type=t,i.text=n,i=e.extend({},i,s.settings.noty),noty(i)),i.increase&&s.increase(1);var a=e('<div class="noty-manager-list-item noty-manager-list-item-'+t+'"/>').html(n),r=e(s.settings.wrapper).hide();r.append(a),s.settings.container.prepend(r),e(s.settings.container).find(".notymanager-empty-html").remove(),r.fadeIn()};s.increase=function(e){e=isNaN(e)?1:e;var t=parseInt(s.$bubble.text());return t=(t=(t+=e)>s.settings.max?s.settings.max+"+":t)<1?0:t,s.$bubble.text(t).trigger("notymanager-flash"),s.settings.bubble.showZero||s.$bubble.css({opacity:0}),s},s.decrease=function(e){return e=isNaN(e)?1:e,s.increase(parseInt("-"+e)),s},s.setCount=function(e){return e=(e=e<1?0:e)>s.settings.max?s.settings.max+"+":e,s.$bubble.text(e).trigger("notymanager-flash"),s.settings.bubble.showZero||s.$bubble.css({opacity:0}),s},s.getNotificationCount=function(){return e(s.settings.container).children().length},s.getBubbleCount=function(){return s.$bubble.text()},s.clearNotifications=function(){e(s.settings.container).empty();var t=e(s.settings.emptyHTML);return t.addClass("notymanager-empty-html"),s.settings.container.prepend(t),s},s.alert=function(e,t){return d("alert",e,t),s},s.info=function(e,t){return d("information",e,t),s},s.warning=function(e,t){return d("warning",e,t),s},s.error=function(e,t){return d("error",e,t),s},s.notification=function(e){return d(e.type,e.html,e),s},s.settings=e.extend({},i,n),s.$el=t,s.count=0,a()}}(jQuery)},68093:(e,t,n)=>{var i;n(43838),n(4949),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],e.noty.themes[this.options.theme]?this.options.theme=e.noty.themes[this.options.theme]:t.themeClassName=this.options.theme,delete t.layout,delete t.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=e.extend({},this.options,t),this._build(),this},_build:function(){var t=e('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=e("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;e.each(this.options.buttons,(function(t,n){var o=e("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+t).appendTo(i.$bar.find(".noty_buttons")).bind("click",(function(){e.isFunction(n.onClick)&&n.onClick.call(o,i)}))}))}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return t.options.custom?t.options.custom.find(t.options.layout.container.selector).append(t.$bar):e(t.options.layout.container.selector).append(t.$bar),t.options.theme&&t.options.theme.style&&t.options.theme.style.apply(t),"function"===e.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector)),t.showing=!0,t.options.theme&&t.options.theme.style&&t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",(function(e){t.stopPropagation(e),t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()})),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",(function(){t.close()})),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",(function(e){t.stopPropagation(e),t.close()})),-1==e.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,(function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.showing=!1,t.shown=!0})),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done((function(){t.close()})),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var t=this;if(this.showing)return void t.$bar.queue((function(){t.close.apply(t)}));if(!this.shown&&!this.showing){var n=[];return e.each(e.noty.queue,(function(e,i){i.options.id!=t.options.id&&n.push(i)})),void(e.noty.queue=n)}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,(function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)})).promise().done((function(){t.options.modal&&(e.notyRenderer.setModalCount(-1),0==e.notyRenderer.getModalCount()&&e(".noty_modal").fadeOut("fast",(function(){e(this).remove()}))),e.notyRenderer.setLayoutCountFor(t,-1),0==e.notyRenderer.getLayoutCountFor(t)&&e(t.options.layout.container.selector).remove(),void 0!==t.$bar&&null!==t.$bar&&(t.$bar.remove(),t.$bar=null,t.closed=!0),delete e.noty.store[t.options.id],t.options.theme.callback&&t.options.theme.callback.onClose&&t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render()),t.options.maxVisible>0&&t.options.dismissQueue&&e.notyRenderer.render()}))}},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done((function(){t.close()}))}return this},stopPropagation:function(e){void 0!==(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(n){var i=Object.create(t).init(n);return i.options.killer&&e.noty.closeAll(),i.options.force?e.noty.queue.unshift(i):e.noty.queue.push(i),e.notyRenderer.render(),"object"==e.noty.returns?i:i.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];"object"===e.type(t)?t.options.dismissQueue?t.options.maxVisible>0?e(t.options.layout.container.selector+" li").length<t.options.maxVisible&&e.notyRenderer.show(e.noty.queue.shift()):e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),t.options.custom?0==t.options.custom.find(t.options.layout.container.selector).length?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):t.options.custom.find(t.options.layout.container.selector).removeClass("i-am-new"):0==e(t.options.layout.container.selector).length?e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){if(0==e(".noty_modal").length){var n=e("<div/>").addClass("noty_modal").addClass(t.options.theme).data("noty_modal_count",0);t.options.theme.modal&&t.options.theme.modal.css&&n.css(t.options.theme.modal.css),n.prependTo(e("body")).fadeIn("fast")}},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,n){return e(t.options.layout.container.selector).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+n)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return!!e.noty.store.hasOwnProperty(t)&&e.noty.store[t]},e.noty.close=function(t){return!!e.noty.get(t)&&e.noty.get(t).close()},e.noty.setText=function(t,n){return!!e.noty.get(t)&&e.noty.get(t).setText(n)},e.noty.setType=function(t,n){return!!e.noty.get(t)&&e.noty.get(t).setType(n)},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,(function(e,t){t.close()}))};var n=window.alert;e.noty.consumeAlert=function(t){window.alert=function(n){t?t.text=n:t={text:n},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=n},e.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).resize((function(){e.each(e.noty.layouts,(function(t,n){n.container.style.apply(e(n.container.selector))}))}))}(jQuery),window.noty=function(e){return jQuery.notyRenderer.init(e)},(i=jQuery).noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){i(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},function(e){e.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){e(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){e(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){e(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"}):e(this).animate({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){e(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){e(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var n=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-n)/2+"px"}):e(this).animate({top:(e(window).height()-n)/2+"px"},500),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){e(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){e(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){e(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){e(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){e(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var t=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),e(t).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"})}},callback:{onShow:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery)},2338:(e,t,n)=>{n(39028),function(e){"use strict";function t(e,t){if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t-e),n.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(e,t))}function n(e){var t=this.value.length;if(e="start"==e.toLowerCase()?"Start":"End",document.selection){var n,i,o,s=document.selection.createRange();return(n=s.duplicate()).expand("textedit"),n.setEndPoint("EndToEnd",s),o=(i=n.text.length-s.text.length)+s.text.length,"Start"==e?i:o}return void 0!==this["selection"+e]&&(t=this["selection"+e]),t}var i={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};e.fn.number=function(o,s,a,r){r=void 0===r?",":r,s=void 0===s?0:s;var l="\\u"+("0000"+(a=void 0===a?".":a).charCodeAt(0).toString(16)).slice(-4),c=new RegExp("[^"+l+"0-9]","g"),d=new RegExp(l,"g");return!0===o?this.is("input:text")?this.on({"keydown.format":function(o){var l=e(this),c=l.data("numFormat"),d=o.keyCode?o.keyCode:o.which,u="",p=n.apply(this,["start"]),h=n.apply(this,["end"]),f="",m=!1;if(i.codes.hasOwnProperty(d)&&(d=i.codes[d]),!o.shiftKey&&d>=65&&90>=d?d+=32:!o.shiftKey&&d>=69&&105>=d?d-=48:o.shiftKey&&i.shifts.hasOwnProperty(d)&&(u=i.shifts[d]),""==u&&(u=String.fromCharCode(d)),8!=d&&45!=d&&127!=d&&u!=a&&!u.match(/[0-9]/)){var g=o.keyCode?o.keyCode:o.which;if(46==g||8==g||127==g||9==g||27==g||13==g||(65==g||82==g||80==g||83==g||70==g||72==g||66==g||74==g||84==g||90==g||61==g||173==g||48==g)&&!0===(o.ctrlKey||o.metaKey)||(86==g||67==g||88==g)&&!0===(o.ctrlKey||o.metaKey)||g>=35&&39>=g||g>=112&&123>=g)return;return o.preventDefault(),!1}if(0==p&&h==this.value.length?8==d?(p=h=1,this.value="",c.init=s>0?-1:0,c.c=s>0?-(s+1):0,t.apply(this,[0,0])):u==a?(p=h=1,this.value="0"+a+new Array(s+1).join("0"),c.init=s>0?1:0,c.c=s>0?-(s+1):0):45==d?(p=h=2,this.value="-0"+a+new Array(s+1).join("0"),c.init=s>0?1:0,c.c=s>0?-(s+1):0,t.apply(this,[2,2])):(c.init=s>0?-1:0,c.c=s>0?-s:0):c.c=h-this.value.length,c.isPartialSelection=p!=h,s>0&&u==a&&p==this.value.length-s-1)c.c++,c.init=Math.max(0,c.init),o.preventDefault(),m=this.value.length+c.c;else if(45!=d||0==p&&0!=this.value.indexOf("-"))if(u==a)c.init=Math.max(0,c.init),o.preventDefault();else if(s>0&&127==d&&p==this.value.length-s-1)o.preventDefault();else if(s>0&&8==d&&p==this.value.length-s)o.preventDefault(),c.c--,m=this.value.length+c.c;else if(s>0&&127==d&&p>this.value.length-s-1){if(""===this.value)return;"0"!=this.value.slice(p,p+1)&&(f=this.value.slice(0,p)+"0"+this.value.slice(p+1),l.val(f)),o.preventDefault(),m=this.value.length+c.c}else if(s>0&&8==d&&p>this.value.length-s){if(""===this.value)return;"0"!=this.value.slice(p-1,p)&&(f=this.value.slice(0,p-1)+"0"+this.value.slice(p),l.val(f)),o.preventDefault(),c.c--,m=this.value.length+c.c}else 127==d&&this.value.slice(p,p+1)==r?o.preventDefault():8==d&&this.value.slice(p-1,p)==r?(o.preventDefault(),c.c--,m=this.value.length+c.c):s>0&&p==h&&this.value.length>s+1&&p>this.value.length-s-1&&isFinite(+u)&&!o.metaKey&&!o.ctrlKey&&!o.altKey&&1===u.length&&(f=h===this.value.length?this.value.slice(0,p-1):this.value.slice(0,p)+this.value.slice(p+1),this.value=f,m=p);else o.preventDefault();!1!==m&&t.apply(this,[m,m]),l.data("numFormat",c)},"keyup.format":function(i){var o,a=e(this),r=a.data("numFormat"),l=i.keyCode?i.keyCode:i.which,c=n.apply(this,["start"]),d=n.apply(this,["end"]);0!==c||0!==d||189!==l&&109!==l||(a.val("-"+a.val()),c=1,r.c=1-this.value.length,r.init=1,a.data("numFormat",r),o=this.value.length+r.c,t.apply(this,[o,o])),""===this.value||(48>l||l>57)&&(96>l||l>105)&&8!==l&&46!==l&&110!==l||(a.val(a.val()),s>0&&(r.init<1?(c=this.value.length-s-(r.init<0?1:0),r.c=c-this.value.length,r.init=1,a.data("numFormat",r)):c>this.value.length-s&&8!=l&&(r.c++,a.data("numFormat",r))),46!=l||r.isPartialSelection||(r.c++,a.data("numFormat",r)),o=this.value.length+r.c,t.apply(this,[o,o]))},"paste.format":function(t){var n=e(this),i=t.originalEvent,o=null;return window.clipboardData&&window.clipboardData.getData?o=window.clipboardData.getData("Text"):i.clipboardData&&i.clipboardData.getData&&(o=i.clipboardData.getData("text/plain")),n.val(o),t.preventDefault(),!1}}).each((function(){var t=e(this).data("numFormat",{c:-(s+1),decimals:s,thousands_sep:r,dec_point:a,regex_dec_num:c,regex_dec:d,init:!!this.value.indexOf(".")});""!==this.value&&t.val(t.val())})):this.each((function(){var t=e(this),n=+t.text().replace(c,"").replace(d,".");t.number(isFinite(n)?+n:0,s,a,r)})):this.text(e.number.apply(window,arguments))};var o=null,s=null;e.isPlainObject(e.valHooks.text)?(e.isFunction(e.valHooks.text.get)&&(o=e.valHooks.text.get),e.isFunction(e.valHooks.text.set)&&(s=e.valHooks.text.set)):e.valHooks.text={},e.valHooks.text.get=function(t){var n,i=e(t).data("numFormat");return i?""===t.value?"":(n=+t.value.replace(i.regex_dec_num,"").replace(i.regex_dec,"."),(0===t.value.indexOf("-")?"-":"")+(isFinite(n)?n:0)):e.isFunction(o)?o(t):void 0},e.valHooks.text.set=function(t,n){var i=e(t).data("numFormat");if(i){var o=e.number(n,i.decimals,i.dec_point,i.thousands_sep);return e.isFunction(s)?s(t,o):t.value=o}return e.isFunction(s)?s(t,n):void 0},e.number=function(e,t,n,i){i=void 0===i?"1000"!==new Number(1e3).toLocaleString()?new Number(1e3).toLocaleString().charAt(1):"":i,n=void 0===n?new Number(.1).toLocaleString().charAt(1):n,t=isFinite(+t)?Math.abs(t):0;var o="\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4),s="\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4);e=(e+"").replace(".",n).replace(new RegExp(s,"g"),"").replace(new RegExp(o,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var a=isFinite(+e)?+e:0,r="";return r=(t?function(e,t){return""+ +(Math.round((""+e).indexOf("e")>0?e:e+"e+"+t)+"e-"+t)}(a,t):""+Math.round(a)).split("."),r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=new Array(t-r[1].length+1).join("0")),r.join(n)}}(jQuery)},14775:()=>{!function(e){function t(t,n){t.each((function(){let t=e(this).outerWidth(!0);e(this).data("width",t)})),t.prependTo(n)}function n(n){n.hasClass("ui-tabs-nav")||(n=n.find('ul[role="tablist"]'));let i=n.find("li"),o=i.first(),s=o.outerHeight();if(n.outerHeight()-5>s){var a=o.offset();i.each((function(){var i=e(this);if(i.offset().top>a.top){var o=n.find(".responsivetabs-more");if(!o.length){o=e('<li class="dropdown responsivetabs-more ui-state-default ui-corner-top"><a href="#" role="button" class="text-decoration-none" data-bs-toggle="dropdown" data-toggle="dropdown">...</a><ul class="dropdown-menu dropdown-menu-right dropdown-menu-tab"></ul></li>'),n.append(o)}var s=i.prev(),r=i.nextAll().not(".dropdown"),l=e(".dropdown-menu",o);return i.hasClass("dropdown")||(t(r,l),t(i,l)),void t(s,l)}}))}else{let t,i=n.parent().width(),o=0;n.children("li").each((function(){o+=e(this).outerWidth(!0)})),t=i-o,n.find(".dropdown-menu li").each((function(){if(!(e(this).data("width")<=t))return!1;e(this).insertBefore(n.find(".responsivetabs-more")),t-=e(this).data("width")})),n.find(".dropdown-menu li").length||n.find(".responsivetabs-more").remove()}}e.fn.responsiveTabs=function(){return e.each(this,(function(t,i){let o=e(this);o.find('ul[role="tablist"]').on("click",(e=>{splynx_event_bus.emit("jq-tab-change")})),setTimeout((function(){n(o)}),50),e(window).resize((function(){setTimeout((function(){n(o)}),50)}))})),e(window).trigger("resize"),this}}(jQuery)},10503:(e,t,n)=>{var i,o,s;!function(){"use strict";o=[n(13886)],i=function(e){function t(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function n(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var i=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};return i.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(o,s,a){"object"==typeof s&&(a=s,s=0),"function"==typeof a&&(a={onAfter:a}),"max"===o&&(o=9e9),a=e.extend({},i.defaults,a),s=s||a.duration;var r=a.queue&&1<a.axis.length;return r&&(s/=2),a.offset=n(a.offset),a.over=n(a.over),this.each((function(){function l(t){var n=e.extend({},a,{queue:!0,duration:s,complete:t&&function(){t.call(u,h,a)}});p.animate(f,n)}if(null!==o){var c,d=t(this),u=d?this.contentWindow||window:this,p=e(u),h=o,f={};switch(typeof h){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(h)){h=n(h);break}h=d?e(h):e(h,u);case"object":if(0===h.length)return;(h.is||h.style)&&(c=(h=e(h)).offset())}var m=e.isFunction(a.offset)&&a.offset(u,h)||a.offset;e.each(a.axis.split(""),(function(e,t){var n="x"===t?"Left":"Top",o=n.toLowerCase(),s="scroll"+n,g=p[s](),v=i.max(u,t);c?(f[s]=c[o]+(d?0:g-p.offset()[o]),a.margin&&(f[s]-=parseInt(h.css("margin"+n),10)||0,f[s]-=parseInt(h.css("border"+n+"Width"),10)||0),f[s]+=m[o]||0,a.over[o]&&(f[s]+=h["x"===t?"width":"height"]()*a.over[o])):(n=h[o],f[s]=n.slice&&"%"===n.slice(-1)?parseFloat(n)/100*v:n),a.limit&&/^\d+$/.test(f[s])&&(f[s]=0>=f[s]?0:Math.min(f[s],v)),!e&&1<a.axis.length&&(g===f[s]?f={}:r&&(l(a.onAfterFirst),f={}))})),l(a.onAfter)}}))},i.max=function(n,i){var o="scroll"+(s="x"===i?"Width":"Height");if(!t(n))return n[o]-e(n)[s.toLowerCase()]();var s="client"+s,a=(r=n.ownerDocument||n.document).documentElement,r=r.body;return Math.max(a[o],r[o])-Math.min(a[s],r[s])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var i=Math.round(t.now);n!==i&&(e(t.elem)[t.prop](i),t._last=this.get(t))}},i},void 0===(s="function"==typeof i?i.apply(t,o):i)||(e.exports=s)}()},33443:(e,t,n)=>{var i,o,s;n(58740),n(43838),n(39028),o=[n(13886)],void 0===(s="function"==typeof(i=function(e){"use strict";e.fn.serializeJSON=function(t){var n=e.serializeJSON,i=this,o=n.setupOpts(t),s=e.extend({},o.defaultTypes,o.customTypes),a=i.serializeArray();n.readCheckboxUncheckedValues(a,o,i);var r={};return e.each(a,(function(e,t){var a=t.name,l=t.value,c=a,d=n.attrFromInputWithName(i,a,"data-value-type");if(!d&&!o.disableColonTypes){var u=n.splitType(a);c=u[0],d=u[1]}if("skip"!==d){d||(d=o.defaultType);var p=n.applyTypeFunc(a,l,d,s);if(p||!n.shouldSkipFalsy(i,a,c,d,o)){var h=n.splitInputNameIntoKeysArray(c);n.deepSet(r,h,p,o)}}})),r},e.serializeJSON={defaultOptions:{},defaultBaseOptions:{checkboxUncheckedValue:void 0,useIntKeysAsArrayIndex:!1,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],disableColonTypes:!1,customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},skip:null},defaultType:"string"},setupOpts:function(t){null==t&&(t={});var n=e.serializeJSON,i=["checkboxUncheckedValue","useIntKeysAsArrayIndex","skipFalsyValuesForTypes","skipFalsyValuesForFields","disableColonTypes","customTypes","defaultTypes","defaultType"];for(var o in t)if(-1===i.indexOf(o))throw new Error("serializeJSON ERROR: invalid option '"+o+"'. Please use one of "+i.join(", "));return e.extend({},n.defaultBaseOptions,n.defaultOptions,t)},applyTypeFunc:function(e,n,i,o){var s=o[i];if(!s)throw new Error("serializeJSON ERROR: Invalid type "+i+" found in input name '"+e+"', please use one of "+t(o).join(", "));return s(n)},readCheckboxUncheckedValues:function(t,n,i){null==n&&(n={});var o="input[type=checkbox][name]:not(:checked):not([disabled])";i.find(o).add(i.filter(o)).each((function(i,o){var s=e(o).attr("data-unchecked-value");if(null==s&&(s=n.checkboxUncheckedValue),null!=s){if(o.name&&-1!==o.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+o.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");t.push({name:o.name,value:s})}}))},splitType:function(e){var t=e.split(":");if(t.length>1){var n=t.pop();return[t.join(":"),n]}return[e,""]},shouldSkipFalsy:function(t,n,i,o,s){var a=e.serializeJSON.attrFromInputWithName(t,n,"data-skip-falsy");if(null!=a)return"false"!==a;var r=s.skipFalsyValuesForFields;if(r&&(-1!==r.indexOf(i)||-1!==r.indexOf(n)))return!0;var l=s.skipFalsyValuesForTypes;return null==o&&(o="string"),!(!l||-1===l.indexOf(o))},attrFromInputWithName:function(e,t,n){var i='[name="'+t.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]';return e.find(i).add(e.filter(i)).attr(n)},splitInputNameIntoKeysArray:function(t){var n=t.split("[");return""===(n=e.map(n,(function(e){return e.replace(/\]/g,"")})))[0]&&n.shift(),n},deepSet:function(t,s,a,r){null==r&&(r={});var l=e.serializeJSON;if(i(t))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!s||0===s.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");var c=s[0];if(1!==s.length){var d=s[1],u=s.slice(1);if(""===c){var p=t.length-1,h=t[p];c=n(h)&&i(l.deepGet(h,u))?p:p+1}""===d||r.useIntKeysAsArrayIndex&&o(d)?!i(t[c])&&e.isArray(t[c])||(t[c]=[]):!i(t[c])&&n(t[c])||(t[c]={}),l.deepSet(t[c],u,a,r)}else""===c?t.push(a):t[c]=a},deepGet:function(t,o){var s=e.serializeJSON;if(i(t)||i(o)||0===o.length||!n(t)&&!e.isArray(t))return t;var a=o[0];if(""!==a){if(1===o.length)return t[a];var r=o.slice(1);return s.deepGet(t[a],r)}}};var t=function(e){if(Object.keys)return Object.keys(e);var t,n=[];for(t in e)n.push(t);return n},n=function(e){return e===Object(e)},i=function(e){return void 0===e},o=function(e){return/^[0-9]+$/.test(String(e))}})?i.apply(t,o):i)||(e.exports=s)},96823:(e,t,n)=>{var i,o,s,a;n(58740),n(39028),a=function(e){e.timeago=function(t){return t instanceof Date?o(t):o("string"==typeof t?e.timeago.parse(t):"number"==typeof t?new Date(t):e.timeago.datetime(t))};var t=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var n=this.settings.strings,i=n.prefixAgo,o=n.suffixAgo;if(this.settings.allowFuture&&t<0&&(i=n.prefixFromNow,o=n.suffixFromNow),!this.settings.allowPast&&t>=0)return this.settings.strings.inPast;var s=Math.abs(t)/1e3,a=s/60,r=a/60,l=r/24,c=l/365;function d(i,o){var s=e.isFunction(i)?i(o,t):i,a=n.numbers&&n.numbers[o]||o;return s.replace(/%d/i,a)}var u=s<45&&d(n.seconds,Math.round(s))||s<90&&d(n.minute,1)||a<45&&d(n.minutes,Math.round(a))||a<90&&d(n.hour,1)||r<24&&d(n.hours,Math.round(r))||r<42&&d(n.day,1)||l<30&&d(n.days,Math.round(l))||l<45&&d(n.month,1)||l<365&&d(n.months,Math.round(l/30))||c<1.5&&d(n.year,1)||d(n.years,Math.round(c)),p=n.wordSeparator||"";return void 0===n.wordSeparator&&(p=" "),e.trim([i,u,o].join(p))},parse:function(t){var n=e.trim(t);return n=(n=(n=(n=(n=n.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2")).replace(/([\+\-]\d\d)$/," $100"),new Date(n)},datetime:function(n){var i=t.isTime(n)?e(n).attr("datetime"):e(n).attr("title");return t.parse(i)},isTime:function(t){return"time"===e(t).get(0).tagName.toLowerCase()}});var n={init:function(){var n=e.proxy(i,this);n();var o=t.settings;o.refreshMillis>0&&(this._timeagoInterval=setInterval(n,o.refreshMillis))},update:function(n){var o=t.parse(n);e(this).data("timeago",{datetime:o}),t.settings.localeTitle&&e(this).attr("title",o.toLocaleString()),i.apply(this)},updateFromDOM:function(){e(this).data("timeago",{datetime:t.parse(t.isTime(this)?e(this).attr("datetime"):e(this).attr("title"))}),i.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};function i(){if(!e.contains(document.documentElement,this))return e(this).timeago("dispose"),this;var n=function(n){if(!(n=e(n)).data("timeago")){n.data("timeago",{datetime:t.datetime(n)});var i=e.trim(n.text());t.settings.localeTitle?n.attr("title",n.data("timeago").datetime.toLocaleString()):!(i.length>0)||t.isTime(n)&&n.attr("title")||n.attr("title",i)}return n.data("timeago")}(this),i=t.settings;return isNaN(n.datetime)||(0==i.cutoff||Math.abs(s(n.datetime))<i.cutoff)&&e(this).text(o(n.datetime)),this}function o(e){return t.inWords(s(e))}function s(e){return(new Date).getTime()-e.getTime()}e.fn.timeago=function(e,t){var i=e?n[e]:n.init;if(!i)throw new Error("Unknown function name '"+e+"' for timeago");return this.each((function(){i.call(this,t)})),this},document.createElement("abbr"),document.createElement("time")},o=[n(13886)],void 0===(s="function"==typeof(i=a)?i.apply(t,o):i)||(e.exports=s),"object"==typeof e.exports?a(n(13886)):a(jQuery)},61224:(e,t,n)=>{var i,o,s,a;e=n.nmd(e),n(43838),n(39028),a=function(e){function t(e){var t=e[0];return t.offsetWidth>0&&t.offsetHeight>0}function n(t){if(t.minTime&&(t.minTime=y(t.minTime)),t.maxTime&&(t.maxTime=y(t.maxTime)),t.durationTime&&"function"!=typeof t.durationTime&&(t.durationTime=y(t.durationTime)),"now"==t.scrollDefault)t.scrollDefault=function(){return t.roundingFunction(y(new Date),t)};else if(t.scrollDefault&&"function"!=typeof t.scrollDefault){var n=t.scrollDefault;t.scrollDefault=function(){return t.roundingFunction(y(n),t)}}else t.minTime&&(t.scrollDefault=function(){return t.roundingFunction(t.minTime,t)});if("string"===e.type(t.timeFormat)&&t.timeFormat.match(/[gh]/)&&(t._twelveHourTime=!0),!1===t.showOnFocus&&-1!=t.showOn.indexOf("focus")&&t.showOn.splice(t.showOn.indexOf("focus"),1),t.disableTimeRanges.length>0){for(var i in t.disableTimeRanges)t.disableTimeRanges[i]=[y(t.disableTimeRanges[i][0]),y(t.disableTimeRanges[i][1])];for(t.disableTimeRanges=t.disableTimeRanges.sort((function(e,t){return e[0]-t[0]})),i=t.disableTimeRanges.length-1;i>0;i--)t.disableTimeRanges[i][0]<=t.disableTimeRanges[i-1][1]&&(t.disableTimeRanges[i-1]=[Math.min(t.disableTimeRanges[i][0],t.disableTimeRanges[i-1][0]),Math.max(t.disableTimeRanges[i][1],t.disableTimeRanges[i-1][1])],t.disableTimeRanges.splice(i,1))}return t}function i(t){var n=t.data("timepicker-settings"),i=t.data("timepicker-list");if(i&&i.length&&(i.remove(),t.data("timepicker-list",!1)),n.useSelect)var a=i=e("<select />",{class:"ui-timepicker-select"});else i=e("<ul />",{class:"ui-timepicker-list"}),(a=e("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(i);if(n.noneOption)if(!0===n.noneOption&&(n.noneOption=n.useSelect?"Time...":"None"),e.isArray(n.noneOption)){for(var l in n.noneOption)if(parseInt(l,10)==l){var d=o(n.noneOption[l],n.useSelect);i.append(d)}}else d=o(n.noneOption,n.useSelect),i.append(d);n.className&&a.addClass(n.className),null===n.minTime&&null===n.durationTime||!n.showDuration||("function"==typeof n.step||n.step,a.addClass("ui-timepicker-with-duration"),a.addClass("ui-timepicker-step-"+n.step));var u=n.minTime;"function"==typeof n.durationTime?u=y(n.durationTime()):null!==n.durationTime&&(u=n.durationTime);var h=null!==n.minTime?n.minTime:0,f=null!==n.maxTime?n.maxTime:h+w-1;h>f&&(f+=w),f===w-1&&"string"===e.type(n.timeFormat)&&n.show2400&&(f=w);var m=n.disableTimeRanges,_=0,E=m.length,S=n.step;"function"!=typeof S&&(S=function(){return n.step}),l=h;for(var A=0;f>=l;l+=60*S(++A)){var C,k=l,x=b(k,n);if(n.useSelect?(C=e("<option />",{value:x})).text(x):((C=e("<li />")).addClass(43200>k%86400?"ui-timepicker-am":"ui-timepicker-pm"),C.data("time",86400>=k?k:k%86400),C.text(x)),(null!==n.minTime||null!==n.durationTime)&&n.showDuration){var $=v(l-u,n.step);if(n.useSelect)C.text(C.text()+" ("+$+")");else{var I=e("<span />",{class:"ui-timepicker-duration"});I.text(" ("+$+")"),C.append(I)}}E>_&&(k>=m[_][1]&&(_+=1),m[_]&&k>=m[_][0]&&k<m[_][1]&&(n.useSelect?C.prop("disabled",!0):C.addClass("ui-timepicker-disabled"))),i.append(C)}if(a.data("timepicker-input",t),t.data("timepicker-list",a),n.useSelect)t.val()&&i.val(s(y(t.val()),n)),i.on("focus",(function(){e(this).data("timepicker-input").trigger("showTimepicker")})),i.on("blur",(function(){e(this).data("timepicker-input").trigger("hideTimepicker")})),i.on("change",(function(){p(t,e(this).val(),"select")})),p(t,i.val(),"initial"),t.hide().after(i);else{var O=n.appendTo;"string"==typeof O?O=e(O):"function"==typeof O&&(O=O(t)),O.append(a),c(t,i),i.on("mousedown click","li",(function(n){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",(function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",T.show)})),r(t)||t[0].focus(),i.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),g(t)&&(t.trigger("hideTimepicker"),i.on("mouseup.timepicker click.timepicker","li",(function(e){i.off("mouseup.timepicker click.timepicker"),a.hide()})))}))}}function o(t,n){var i,o,s;return"object"==typeof t?(i=t.label,o=t.className,s=t.value):"string"==typeof t?i=t:e.error("Invalid noneOption value"),n?e("<option />",{value:s,class:o,text:i}):e("<li />",{class:o,text:i}).data("time",String(s))}function s(e,t){return null!==(e=t.roundingFunction(e,t))?b(e,t):void 0}function a(t){if(t.target!=window){var n=e(t.target);n.closest(".ui-timepicker-input").length||n.closest(".ui-timepicker-wrapper").length||(T.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}}function r(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function l(t,n,i){if(!i&&0!==i)return!1;var o=t.data("timepicker-settings"),s=!1;return i=o.roundingFunction(i,o),n.find("li").each((function(t,n){var o=e(n);if("number"==typeof o.data("time"))return o.data("time")==i?(s=o,!1):void 0})),s}function c(e,t){t.find("li").removeClass("ui-timepicker-selected");var n=y(u(e),e.data("timepicker-settings"));if(null!==n){var i=l(e,t,n);if(i){var o=i.offset().top-t.offset().top;(o+i.outerHeight()>t.outerHeight()||0>o)&&t.scrollTop(t.scrollTop()+i.position().top-i.outerHeight()),i.addClass("ui-timepicker-selected")}}}function d(t,n){if(""!==this.value&&"timepicker"!=n){var i=e(this);if(!i.is(":focus")||t&&"change"==t.type){var o=i.data("timepicker-settings"),s=y(this.value,o);if(null===s)return void i.trigger("timeFormatError");var a=!1;null!==o.minTime&&null!==o.maxTime&&(s<o.minTime||s>o.maxTime)&&(a=!0),e.each(o.disableTimeRanges,(function(){return s>=this[0]&&s<this[1]?(a=!0,!1):void 0})),o.forceRoundTime&&(s=o.roundingFunction(s,o));var r=b(s,o);a?p(i,r,"error")&&i.trigger("timeRangeError"):p(i,r)}}}function u(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function p(e,t,n){if(e.is("input")){e.val(t);var i=e.data("timepicker-settings");i.useSelect&&"select"!=n&&"initial"!=n&&e.data("timepicker-list").val(s(y(t),i))}return e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==n?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=n&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function h(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}function f(n){var i=e(this),o=i.data("timepicker-list");if(!o||!t(o)){if(40!=n.keyCode)return!0;T.show.call(i.get(0)),o=i.data("timepicker-list"),r(i)||i.focus()}switch(n.keyCode){case 13:return g(i)&&(d.call(i.get(0),{type:"change"}),T.hide.apply(this)),n.preventDefault(),!1;case 38:var s=o.find(".ui-timepicker-selected");return s.length?s.is(":first-child")||(s.removeClass("ui-timepicker-selected"),s.prev().addClass("ui-timepicker-selected"),s.prev().position().top<s.outerHeight()&&o.scrollTop(o.scrollTop()-s.outerHeight())):(o.find("li").each((function(t,n){return e(n).position().top>0?(s=e(n),!1):void 0})),s.addClass("ui-timepicker-selected")),!1;case 40:return 0===(s=o.find(".ui-timepicker-selected")).length?(o.find("li").each((function(t,n){return e(n).position().top>0?(s=e(n),!1):void 0})),s.addClass("ui-timepicker-selected")):s.is(":last-child")||(s.removeClass("ui-timepicker-selected"),s.next().addClass("ui-timepicker-selected"),s.next().position().top+2*s.outerHeight()>o.outerHeight()&&o.scrollTop(o.scrollTop()+s.outerHeight())),!1;case 27:o.find("li").removeClass("ui-timepicker-selected"),T.hide();break;case 9:T.hide();break;default:return!0}}function m(n){var i=e(this),o=i.data("timepicker-list"),s=i.data("timepicker-settings");if(!o||!t(o)||s.disableTextInput)return!0;switch(n.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:s.typeaheadHighlight?c(i,o):o.hide()}}function g(e){var t=e.data("timepicker-settings"),n=null,i=e.data("timepicker-list").find(".ui-timepicker-selected");return!i.hasClass("ui-timepicker-disabled")&&(i.length&&(n=i.data("time")),null!==n&&("string"!=typeof n&&(n=b(n,t)),p(e,n,"select")),!0)}function v(e,t){e=Math.abs(e);var n,i,o=Math.round(e/60),s=[];return 60>o?s=[o,_.mins]:(n=Math.floor(o/60),i=o%60,30==t&&30==i&&(n+=_.decimal+5),s.push(n),s.push(1==n?_.hr:_.hrs),30!=t&&i&&(s.push(i),s.push(_.mins))),s.join(" ")}function b(t,n){if("number"!=typeof t)return null;var i=parseInt(t%60),o=parseInt(t/60%60),s=parseInt(t/3600%24),a=new Date(1970,0,2,s,o,i,0);if(isNaN(a.getTime()))return null;if("function"===e.type(n.timeFormat))return n.timeFormat(a);for(var r,l,c="",d=0;d<n.timeFormat.length;d++)switch(l=n.timeFormat.charAt(d)){case"a":c+=a.getHours()>11?_.pm:_.am;break;case"A":c+=a.getHours()>11?_.PM:_.AM;break;case"g":c+=0==(r=a.getHours()%12)?"12":r;break;case"G":r=a.getHours(),t===w&&(r=n.show2400?24:0),c+=r;break;case"h":0!=(r=a.getHours()%12)&&10>r&&(r="0"+r),c+=0===r?"12":r;break;case"H":r=a.getHours(),t===w&&(r=n.show2400?24:0),c+=r>9?r:"0"+r;break;case"i":c+=(o=a.getMinutes())>9?o:"0"+o;break;case"s":c+=(i=a.getSeconds())>9?i:"0"+i;break;case"\\":d++,c+=n.timeFormat.charAt(d);break;default:c+=l}return c}function y(e,t){if(""===e||null===e)return null;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();if("string"!=typeof e)return e;("a"==(e=e.toLowerCase().replace(/[\s\.]/g,"")).slice(-1)||"p"==e.slice(-1))&&(e+="m");var n="("+_.am.replace(".","")+"|"+_.pm.replace(".","")+"|"+_.AM.replace(".","")+"|"+_.PM.replace(".","")+")?",i=new RegExp("^"+n+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+n+"$"),o=e.match(i);if(!o)return null;var s=parseInt(1*o[2],10);if(s>24){if(t&&!1===t.wrapHours)return null;s%=24}var a=o[1]||o[5],r=s;if(12>=s&&a){var l=a==_.pm||a==_.PM;r=12==s?l?12:0:s+(l?12:0)}var c=3600*r+60*(1*o[3]||0)+(1*o[4]||0);if(12>s&&!a&&t&&t._twelveHourTime&&t.scrollDefault){var d=c-t.scrollDefault();0>d&&d>=w/-2&&(c=(c+w/2)%w)}return c}var w=86400,_={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},T={init:function(t){return this.each((function(){var o=e(this),s=[];for(var a in e.fn.timepicker.defaults)o.data(a)&&(s[a]=o.data(a));var r=e.extend({},e.fn.timepicker.defaults,s,t);if(r.lang&&(_=e.extend(_,r.lang)),r=n(r),o.data("timepicker-settings",r),o.addClass("ui-timepicker-input"),r.useSelect)i(o);else{if(o.prop("autocomplete","off"),r.showOn)for(var l in r.showOn)o.on(r.showOn[l]+".timepicker",T.show);o.on("change.timepicker",d),o.on("keydown.timepicker",f),o.on("keyup.timepicker",m),r.disableTextInput&&o.on("keydown.timepicker",h),d.call(o.get(0))}}))},show:function(n){var o=e(this),s=o.data("timepicker-settings");if(n&&n.preventDefault(),s.useSelect)o.data("timepicker-list").focus();else{r(o)&&o.blur();var d=o.data("timepicker-list");if(!o.prop("readonly")&&(d&&0!==d.length&&"function"!=typeof s.durationTime||(i(o),d=o.data("timepicker-list")),!t(d))){o.data("ui-timepicker-value",o.val()),c(o,d),T.hide(),d.show();var p={};s.orientation.match(/r/)?p.left=o.offset().left+o.outerWidth()-d.outerWidth()+parseInt(d.css("marginLeft").replace("px",""),10):p.left=o.offset().left+parseInt(d.css("marginLeft").replace("px",""),10),"t"==(s.orientation.match(/t/)?"t":s.orientation.match(/b/)?"b":o.offset().top+o.outerHeight(!0)+d.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b")?(d.addClass("ui-timepicker-positioned-top"),p.top=o.offset().top-d.outerHeight()+parseInt(d.css("marginTop").replace("px",""),10)):(d.removeClass("ui-timepicker-positioned-top"),p.top=o.offset().top+o.outerHeight()+parseInt(d.css("marginTop").replace("px",""),10)),d.offset(p);var h=d.find(".ui-timepicker-selected");if(!h.length){var f=y(u(o));null!==f?h=l(o,d,f):s.scrollDefault&&(h=l(o,d,s.scrollDefault()))}if(h&&h.length){var m=d.scrollTop()+h.position().top-h.outerHeight();d.scrollTop(m)}else d.scrollTop(0);return s.stopScrollPropagation&&e(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",(function(t){t.preventDefault();var n=e(this).scrollTop();e(this).scrollTop(n+t.originalEvent.deltaY)})),e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",a),e(window).on("resize.ui-timepicker",a),s.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",a),o.trigger("showTimepicker"),this}}},hide:function(n){var i=e(this),o=i.data("timepicker-settings");return o&&o.useSelect&&i.blur(),e(".ui-timepicker-wrapper").each((function(){var n=e(this);if(t(n)){var i=n.data("timepicker-input"),o=i.data("timepicker-settings");o&&o.selectOnBlur&&g(i),n.hide(),i.trigger("hideTimepicker")}})),this},option:function(t,o){return"string"==typeof t&&void 0===o?e(this).data("timepicker-settings")[t]:this.each((function(){var s=e(this),a=s.data("timepicker-settings"),r=s.data("timepicker-list");"object"==typeof t?a=e.extend(a,t):"string"==typeof t&&(a[t]=o),a=n(a),s.data("timepicker-settings",a),r&&(r.remove(),s.data("timepicker-list",!1)),a.useSelect&&i(s)}))},getSecondsFromMidnight:function(){return y(u(this))},getTime:function(e){var t=u(this);if(!t)return null;var n=y(t);if(null===n)return null;e||(e=new Date);var i=new Date(e);return i.setHours(n/3600),i.setMinutes(n%3600/60),i.setSeconds(n%60),i.setMilliseconds(0),i},isVisible:function(){var e=this.data("timepicker-list");return!(!e||!t(e))},setTime:function(e){var t=this,n=t.data("timepicker-settings");if(n.forceRoundTime)var i=s(y(e),n);else i=b(y(e),n);return e&&null===i&&n.noneOption&&(i=e),p(t,i),t.data("timepicker-list")&&c(t,t.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var t=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),t.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(t){return this.length?T[t]?this.hasClass("ui-timepicker-input")?T[t].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):T.init.apply(this,arguments):this},e.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,t){if(null===e)return null;if("number"!=typeof t.step)return e;var n=e%(60*t.step);return n>=30*t.step?e+=60*t.step-n:e-=n,e==w&&t.show2400?e:e%w},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0}},t&&e&&e.exports===t?a(n(13886)):(o=[n(13886)],void 0===(s="function"==typeof(i=a)?i.apply(t,o):i)||(e.exports=s))},19959:(e,t,n)=>{var i,o,s;n(58740),n(43838),function(a,r,l){var c;c=e=>{let t="webuiPopover",n="webui-popover",i="webui.popover",o={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",selector:!1,delay:{show:null,hide:300},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",direction:"",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""},hideEmpty:!1},s=`${n}-rtl`,c=[],d=e('<div class="webui-popover-backdrop"></div>'),u=0,p=!1,h=-2e3,f=e(r),m=function(e,t){return isNaN(e)?t||0:Number(e)},g=function(e){return e.data(`plugin_${t}`)},v=function(){let e=null;for(let t=0;t<c.length;t++)e=g(c[t]),e&&e.hide(!0);f.trigger(`hiddenAll.${i}`)},b="ontouchstart"in r.documentElement&&/Mobi/.test(navigator.userAgent),y=function(e){let t={x:0,y:0};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){let n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX,t.y=n.pageY}else"mousedown"!==e.type&&"mouseup"!==e.type&&"click"!==e.type||(t.x=e.pageX,t.y=e.pageY);return t};function w(n,i){return this.$element=e(n),i&&("string"!==e.type(i.delay)&&"number"!==e.type(i.delay)||(i.delay={show:i.delay,hide:i.delay})),this.options=e.extend({},o,i),this._defaults=o,this._name=t,this._targetclick=!1,this.init(),c.push(this.$element),this}w.prototype={init(){if(this.$element[0]instanceof r.constructor&&!this.options.selector)throw new Error(`\`selector\` option must be specified when initializing ${this.type} on the window.document object!`);"manual"!==this.getTrigger()&&(b?this.$element.off("touchend",this.options.selector).on("touchend",this.options.selector,e.proxy(this.toggle,this)):"click"===this.getTrigger()?this.$element.off("click",this.options.selector).on("click",this.options.selector,e.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click",this.options.selector).on("mouseenter",this.options.selector,e.proxy(this.mouseenterHandler,this)).on("mouseleave",this.options.selector,e.proxy(this.mouseleaveHandler,this))),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=u,this.id=t+this._idSeed,this.options.container=e(this.options.container||r.body).first(),this.options.backdrop&&d.appendTo(this.options.container).hide(),u++,"sticky"===this.getTrigger()&&this.show(),this.options.selector&&(this._options=e.extend({},this.options,{selector:""}))},destroy(){let e=-1;for(let t=0;t<c.length;t++)if(c[t]===this.$element){e=t;break}c.splice(e,1),this.hide(),this.$element.data(`plugin_${t}`,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},getDelegateOptions(){let t={};return this._options&&e.each(this._options,((e,n)=>{o[e]!==n&&(t[e]=n)})),t},hide(t,n){if(!t&&"sticky"===this.getTrigger())return;if(!this._opened)return;n&&(n.preventDefault(),n.stopPropagation()),this.xhr&&!0===this.options.abortXHR&&(this.xhr.abort(),this.xhr=null);let o=e.Event(`hide.${i}`);if(this.$element.trigger(o,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());let e=this;setTimeout((()=>{e.getCache()||e.$target.remove()}),e.getHideDelay())}this.options.backdrop&&d.hide(),this._opened=!1,this.$element.trigger(`hidden.${i}`,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)},resetAutoHide(){let e=this,t=e.getAutoHide();t&&(e.autoHideHandler&&clearTimeout(e.autoHideHandler),e.autoHideHandler=setTimeout((()=>{e.hide()}),t))},delegate(n){let i=e(n).data(`plugin_${t}`);return i||(i=new w(n,this.getDelegateOptions()),e(n).data(`plugin_${t}`,i)),i},toggle(e){let t=this;e&&(e.preventDefault(),e.stopPropagation(),this.options.selector&&(t=this.delegate(e.currentTarget))),t[t.getTarget().hasClass("in")?"hide":"show"]()},hideAll(){v()},hideOthers(){!function(e){let t=null;for(let n=0;n<c.length;n++)t=g(c[n]),t&&t.id!==e.id&&t.hide(!0);f.trigger(`hiddenAll.${i}`)}(this)},show(){if(this._opened)return;let e=this.getTarget().removeClass().addClass(n).addClass(this._customTargetClass);if(this.options.multi||this.hideOthers(),!this.getCache()||!this._poped||""===this.content){if(this.content="",this.setTitle(this.getTitle()),this.options.closeable||e.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),this.canEmptyHide()&&""===this.content)return;e.show()}this.displayContent(),this.options.onShow&&this.options.onShow(e),this.bindBodyEvents(),this.options.backdrop&&d.show(),this._opened=!0,this.resetAutoHide()},displayContent(){let t=this.getElementPosition(),o=this.getTarget().removeClass().addClass(n).addClass(this._customTargetClass),a=this.getContentElement(),r=o[0].offsetWidth,l=o[0].offsetHeight,c="bottom",d=e.Event(`show.${i}`);if(this.canEmptyHide()){let e=a.children().html();if(null!==e&&0===e.trim().length)return}this.$element.trigger(d,[o]);let u=this.$element.data("width")||this.options.width;""===u&&(u=this._defaults.width),"auto"!==u&&o.width(u);let p=this.$element.data("height")||this.options.height;""===p&&(p=this._defaults.height),"auto"!==p&&a.height(p),this.options.style&&this.$target.addClass(`${n}-${this.options.style}`),"rtl"!==this.options.direction||a.hasClass(s)||a.addClass(s),this.options.arrow||o.find(".webui-arrow").remove(),o.detach().css({top:h,left:h,display:"block"}),this.getAnimation()&&o.addClass(this.getAnimation()),o.appendTo(this.options.container),c=this.getPlacement(t),this.$element.trigger(`added.${i}`),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&a.css("height",a.outerHeight()),this.$target.addClass("webui-no-padding")),this.options.maxHeight&&a.css("maxHeight",this.options.maxHeight),this.options.maxWidth&&a.css("maxWidth",this.options.maxWidth),r=o[0].offsetWidth,l=o[0].offsetHeight;let f=this.getTargetPositin(t,c,r,l);if(this.$target.css(f.position).addClass(c).addClass("in"),"iframe"===this.options.type){let e=o.find("iframe"),t=o.width(),n=e.parent().height();""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(t=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(n=this.options.iframeOptions.height),e.width(t).height(n)}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){let e=this.$target.find(".webui-arrow");e.removeAttr("style"),"left"===c||"right"===c?e.css({top:this.$target.height()/2}):"top"!==c&&"bottom"!==c||e.css({left:this.$target.width()/2}),f.arrowOffset&&(-1===f.arrowOffset.left||-1===f.arrowOffset.top?e.hide():e.css(f.arrowOffset))}this._poped=!0,this.$element.trigger(`shown.${i}`,[this.$target])},isTargetLoaded(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement(){return this.$element},getTarget(){if(!this.$target){let i=t+this._idSeed;this.$target=e(this.options.template).attr("id",i),this._customTargetClass=this.$target.attr("class")!==n?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",i)}return this.$target.data("trigger-element")||this.$target.data("trigger-element",this.getTriggerElement()),this.$target},removeTarget(){this.$target.remove(),this.$target=null,this.$contentElement=null},getTitleElement(){return this.getTarget().find(`.${n}-title`)},getContentElement(){return this.$contentElement||(this.$contentElement=this.getTarget().find(`.${n}-content`)),this.$contentElement},getTitle(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl(){return this.$element.attr("data-url")||this.options.url},getAutoHide(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop(){return m(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft(){return m(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache(){let e=this.$element.attr("data-cache");if(void 0!==e)switch(e.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow(){let e=this.$element.attr("data-delay-show");return void 0!==e?e:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay(){let e=this.$element.attr("data-delay-hide");return void 0!==e?e:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation(){return this.$element.attr("data-animation")||this.options.animation},getHideAnimation(){let e=this.getAnimation();return e?`${e}-out`:"out"},setTitle(e){let t=this.getTitleElement();e?("rtl"!==this.options.direction||t.hasClass(s)||t.addClass(s),t.html(e)):t.remove()},hasContent(){return this.getContent()},canEmptyHide(){return this.options.hideEmpty&&"html"===this.options.type},getIframe(){let t=e("<iframe></iframe>").attr("src",this.getUrl()),n=this;return e.each(this._defaults.iframeOptions,(e=>{void 0!==n.options.iframeOptions[e]&&t.attr(e,n.options.iframeOptions[e])})),t},getContent(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=e(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(e){throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){let t="";if(t=e.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,!this.content){let e=this.$element.next();e&&e.hasClass(`${n}-content`)&&(this.content=e)}}return this.content},setContent(t){let i=this.getTarget(),o=this.getContentElement();"string"==typeof t?o.html(t):t instanceof e&&(o.html(""),this.options.cache?t.removeClass(`${n}-content`).appendTo(o):t.clone(!0,!0).removeClass(`${n}-content`).appendTo(o)),this.$target=i},isAsync(){return"async"===this.options.type},setContentASync(t){let n=this;this.xhr||(this.xhr=e.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend(e,t){n.options.async.before&&n.options.async.before(n,e,t)},success(i){n.bindBodyEvents(),t&&e.isFunction(t)?n.content=t.apply(n.$element[0],[i]):n.content=i,n.setContent(n.content),n.getContentElement().removeAttr("style"),n.displayContent(),n.options.async.success&&n.options.async.success(n,i)},complete(){n.xhr=null},error(e,t){n.options.async.error&&n.options.async.error(n,e,t)}}))},bindBodyEvents(){p||(this.options.dismissible&&"click"===this.getTrigger()?b?f.off("touchstart.webui-popover").on("touchstart.webui-popover",e.proxy(this.bodyTouchStartHandler,this)):(f.off("keyup.webui-popover").on("keyup.webui-popover",e.proxy(this.escapeHandler,this)),f.off("click.webui-popover").on("click.webui-popover",e.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&f.off("touchend.webui-popover").on("touchend.webui-popover",e.proxy(this.bodyClickHandler,this)))},mouseenterHandler(e){let t=this;e&&this.options.selector&&(t=this.delegate(e.currentTarget)),t._timeout&&clearTimeout(t._timeout),t._enterTimeout=setTimeout((()=>{t.getTarget().is(":visible")||t.show()}),this.getDelayShow())},mouseleaveHandler(){let e=this;clearTimeout(e._enterTimeout),e._timeout=setTimeout((()=>{e.hide()}),this.getHideDelay())},escapeHandler(e){27===e.keyCode&&this.hideAll()},bodyTouchStartHandler(t){let n=this,i=e(t.currentTarget);i.on("touchend",(e=>{n.bodyClickHandler(e),i.off("touchend")})),i.on("touchmove",(()=>{i.off("touchend")}))},bodyClickHandler(e){p=!0;let t=!0;for(let n=0;n<c.length;n++){let i=g(c[n]);if(i&&i._opened){let n=i.getTarget().offset(),o=n.left,s=n.top,a=n.left+i.getTarget().width(),r=n.top+i.getTarget().height(),l=y(e);if(l.x>=o&&l.x<=a&&l.y>=s&&l.y<=r){t=!1;break}}}t&&v()},initTargetEvents(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",e.proxy(this.mouseenterHandler,this)).on("mouseleave",e.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",e.proxy(this.hide,this,!0))},getPlacement(e){let t,{container:n}=this.options,i=n.innerWidth(),o=n.innerHeight(),s=n.scrollTop(),a=n.scrollLeft(),r=Math.max(0,e.left-a),l=Math.max(0,e.top-s);t="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement;let c="horizontal"===t,d="vertical"===t;return"auto"===t||c||d?t=r<i/3?l<o/3?c?"right-bottom":"bottom-right":l<2*o/3?d?l<=o/2?"bottom-right":"top-right":"right":c?"right-top":"top-right":r<2*i/3?l<o/3?c?r<=i/2?"right-bottom":"left-bottom":"bottom":l<2*o/3?c?r<=i/2?"right":"left":l<=o/2?"bottom":"top":c?r<=i/2?"right-top":"left-top":"top":l<o/3?c?"left-bottom":"bottom-left":l<2*o/3?d?l<=o/2?"bottom-left":"top-left":"left":c?"left-top":"top-left":"auto-top"===t?t=r<i/3?"top-right":r<2*i/3?"top":"top-left":"auto-bottom"===t?t=r<i/3?"bottom-right":r<2*i/3?"bottom":"bottom-left":"auto-left"===t?t=l<o/3?"left-top":l<2*o/3?"left":"left-bottom":"auto-right"===t&&(t=l<o/3?"right-bottom":l<2*o/3?"right":"right-top"),t},getElementPosition(){let t=this.$element[0].getBoundingClientRect(),{container:n}=this.options,i=n.css("position");if(n.is(r.body)||"static"===i)return e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||t.width,height:this.$element[0].offsetHeight||t.height});if("fixed"===i){let e=n[0].getBoundingClientRect();return{top:t.top-e.top+n.scrollTop(),left:t.left-e.left+n.scrollLeft(),width:t.width,height:t.height}}return"relative"===i?{top:this.$element.offset().top-n.offset().top,left:this.$element.offset().left-n.offset().left,width:this.$element[0].offsetWidth||t.width,height:this.$element[0].offsetHeight||t.height}:void 0},getTargetPositin(e,t,n,i){let o=e,{container:s}=this.options,a=this.$element.outerWidth(),l=this.$element.outerHeight(),c=r.documentElement.scrollTop+s.scrollTop(),d=r.documentElement.scrollLeft+s.scrollLeft(),u={},p=null,f=this.options.arrow?20:0,m=10,g=a<f+m?f:0,v=l<f+m?f:0,b=0,y=r.documentElement.clientHeight+c,w=r.documentElement.clientWidth+d,_=o.left+o.width/2-g>0,T=o.left+o.width/2+g<w,E=o.top+o.height/2-v>0,S=o.top+o.height/2+v<y;switch(t){case"bottom":u={top:o.top+o.height,left:o.left+o.width/2-n/2};break;case"top":u={top:o.top-i,left:o.left+o.width/2-n/2};break;case"left":u={top:o.top+o.height/2-i/2,left:o.left-n};break;case"right":u={top:o.top+o.height/2-i/2,left:o.left+o.width};break;case"top-right":u={top:o.top-i,left:_?o.left-g:m},p={left:_?Math.min(a,n)/2+g:h};break;case"top-left":b=T?g:-10,u={top:o.top-i,left:o.left-n+o.width+b},p={left:T?n-Math.min(a,n)/2-g:h};break;case"bottom-right":u={top:o.top+o.height,left:_?o.left-g:m},p={left:_?Math.min(a,n)/2+g:h};break;case"bottom-left":b=T?g:-10,u={top:o.top+o.height,left:o.left-n+o.width+b},p={left:T?n-Math.min(a,n)/2-g:h};break;case"right-top":b=S?v:-10,u={top:o.top-i+o.height+b,left:o.left+o.width},p={top:S?i-Math.min(l,i)/2-v:h};break;case"right-bottom":u={top:E?o.top-v:m,left:o.left+o.width},p={top:E?Math.min(l,i)/2+v:h};break;case"left-top":b=S?v:-10,u={top:o.top-i+o.height+b,left:o.left-n},p={top:S?i-Math.min(l,i)/2-v:h};break;case"left-bottom":u={top:E?o.top-v:m,left:o.left-n},p={top:E?Math.min(l,i)/2+v:h}}return u.top+=this.getOffsetTop(),u.left+=this.getOffsetLeft(),{position:u,arrowOffset:p}}},e.fn[t]=function(n,i){let o=[],s=this.each((function(){let s=e.data(this,`plugin_${t}`);s?"destroy"===n?s.destroy():"string"==typeof n&&o.push(s[n]()):(n?"string"==typeof n?"destroy"!==n&&(i||(s=new w(this,null),o.push(s[n]()))):"object"==typeof n&&(s=new w(this,n)):s=new w(this,null),e.data(this,`plugin_${t}`,s))}));return o.length?o:s};let _={show:function(t,n){n?e(t).webuiPopover(n).webuiPopover("show"):e(t).webuiPopover("show")},hide:function(t){e(t).webuiPopover("hide")},create:function(t,n){n=n||{},e(t).webuiPopover(n)},isCreated:function(n){let i=!0;return e(n).each(((n,o)=>{i=i&&e(o).data(`plugin_${t}`)!==l})),i},hideAll:function(){v()},updateContent:function(n,i){let o=e(n).data(`plugin_${t}`);if(o){let e=o.getCache();o.options.cache=!1,o.options.content=i,o._opened?(o._opened=!1,o.show()):o.isAsync()?o.setContentASync(i):o.setContent(i),o.options.cache=e}},updateContentAsync:function(n,i){let o=e(n).data(`plugin_${t}`);if(o){let e=o.getCache(),{type:t}=o.options;o.options.cache=!1,o.options.url=i,o._opened?(o._opened=!1,o.show()):(o.options.type="async",o.setContentASync(o.content)),o.options.cache=e,o.options.type=t}},setDefaultOptions:function(t){o=e.extend({},o,t)}};a.WebuiPopovers=_},o=[n(13886)],(s="function"==typeof(i=c)?i.apply(t,o):i)===l||(e.exports=s)}(window,document)},46955:(e,t,n)=>{var i;n(58740),n(43838),n(39028),function e(t,n,i){function o(a,r){if(!n[a]){if(!t[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return o(n||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var s=void 0,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(o,s,a){!function(a,r){"use strict";var l=a.document,c=o("./src/utils/get-by-class"),d=o("./src/utils/extend"),u=o("./src/utils/index-of"),p=o("./src/utils/events"),h=o("./src/utils/to-string"),f=o("./src/utils/natural-sort"),m=o("./src/utils/classes"),g=o("./src/utils/get-attribute"),v=o("./src/utils/to-array"),b=function(e,t,n){var i,s=this,a=o("./src/item")(s),y=o("./src/add-async")(s);i={start:function(){s.listClass="list",s.searchClass="search",s.sortClass="sort",s.page=1e4,s.i=1,s.items=[],s.visibleItems=[],s.matchingItems=[],s.searched=!1,s.filtered=!1,s.searchColumns=r,s.handlers={updated:[]},s.plugins={},s.valueNames=[],s.utils={getByClass:c,extend:d,indexOf:u,events:p,toString:h,naturalSort:f,classes:m,getAttribute:g,toArray:v},s.utils.extend(s,t),s.listContainer="string"==typeof e?l.getElementById(e):e,s.listContainer&&(s.list=c(s.listContainer,s.listClass,!0),s.parse=o("./src/parse")(s),s.templater=o("./src/templater")(s),s.search=o("./src/search")(s),s.filter=o("./src/filter")(s),s.sort=o("./src/sort")(s),this.handlers(),this.items(),s.update(),this.plugins())},handlers:function(){for(var e in s.handlers)s[e]&&s.on(e,s[e])},items:function(){s.parse(s.list),n!==r&&s.add(n)},plugins:function(){for(var e=0;e<s.plugins.length;e++){var t=s.plugins[e];s[t.name]=t,t.init(s,b)}}},this.reIndex=function(){s.items=[],s.visibleItems=[],s.matchingItems=[],s.searched=!1,s.filtered=!1,s.parse(s.list)},this.toJSON=function(){for(var e=[],t=0,n=s.items.length;n>t;t++)e.push(s.items[t].values());return e},this.add=function(e,t){if(0!==e.length){if(t)return void y(e,t);var n=[],i=!1;e[0]===r&&(e=[e]);for(var o=0,l=e.length;l>o;o++){var c;i=s.items.length>s.page,c=new a(e[o],r,i),s.items.push(c),n.push(c)}return s.update(),n}},this.show=function(e,t){return this.i=e,this.page=t,s.update(),s},this.remove=function(e,t,n){for(var i=0,o=0,a=s.items.length;a>o;o++)s.items[o].values()[e]==t&&(s.templater.remove(s.items[o],n),s.items.splice(o,1),a--,o--,i++);return s.update(),i},this.get=function(e,t){for(var n=[],i=0,o=s.items.length;o>i;i++){var a=s.items[i];a.values()[e]==t&&n.push(a)}return n},this.size=function(){return s.items.length},this.clear=function(){return s.templater.clear(),s.items=[],s},this.on=function(e,t){return s.handlers[e].push(t),s},this.off=function(e,t){var n=s.handlers[e],i=u(n,t);return i>-1&&n.splice(i,1),s},this.trigger=function(e){for(var t=s.handlers[e].length;t--;)s.handlers[e][t](s);return s},this.reset={filter:function(){for(var e=s.items,t=e.length;t--;)e[t].filtered=!1;return s},search:function(){for(var e=s.items,t=e.length;t--;)e[t].found=!1;return s}},this.update=function(){var e=s.items,t=e.length;s.visibleItems=[],s.matchingItems=[],s.templater.clear();for(var n=0;t>n;n++)e[n].matching()&&s.matchingItems.length+1>=s.i&&s.visibleItems.length<s.page?(e[n].show(),s.visibleItems.push(e[n]),s.matchingItems.push(e[n])):e[n].matching()?(s.matchingItems.push(e[n]),e[n].hide()):e[n].hide();return s.trigger("updated"),s},i.start()};void 0!==(i=function(){return b}.call(t,n,t,e))&&(e.exports=i),s.exports=b,a.List=b}(window)},{"./src/add-async":2,"./src/filter":3,"./src/item":4,"./src/parse":5,"./src/search":6,"./src/sort":7,"./src/templater":8,"./src/utils/classes":9,"./src/utils/events":10,"./src/utils/extend":11,"./src/utils/get-attribute":12,"./src/utils/get-by-class":13,"./src/utils/index-of":14,"./src/utils/natural-sort":15,"./src/utils/to-array":16,"./src/utils/to-string":17}],2:[function(e,t,n){t.exports=function(e){var t=function(n,i,o){var s=n.splice(0,50);o=(o=o||[]).concat(e.add(s)),n.length>0?setTimeout((function(){t(n,i,o)}),1):(e.update(),i(o))};return t}},{}],3:[function(e,t,n){t.exports=function(e){return e.handlers.filterStart=e.handlers.filterStart||[],e.handlers.filterComplete=e.handlers.filterComplete||[],function(t){if(e.trigger("filterStart"),e.i=1,e.reset.filter(),void 0===t)e.filtered=!1;else{e.filtered=!0;for(var n=e.items,i=0,o=n.length;o>i;i++){var s=n[i];t(s)?s.filtered=!0:s.filtered=!1}}return e.update(),e.trigger("filterComplete"),e.visibleItems}}},{}],4:[function(e,t,n){t.exports=function(e){return function(t,n,i){var o=this;this._values={},this.found=!1,this.filtered=!1;this.values=function(t,n){if(void 0===t)return o._values;for(var i in t)o._values[i]=t[i];!0!==n&&e.templater.set(o,o.values())},this.show=function(){e.templater.show(o)},this.hide=function(){e.templater.hide(o)},this.matching=function(){return e.filtered&&e.searched&&o.found&&o.filtered||e.filtered&&!e.searched&&o.filtered||!e.filtered&&e.searched&&o.found||!e.filtered&&!e.searched},this.visible=function(){return!(!o.elm||o.elm.parentNode!=e.list)},function(t,n,i){if(void 0===n)i?o.values(t,i):o.values(t);else{o.elm=n;var s=e.templater.get(o,t);o.values(s)}}(t,n,i)}}},{}],5:[function(e,t,n){t.exports=function(t){var n=e("./item")(t),i=function(e,i){for(var o=0,s=e.length;s>o;o++)t.items.push(new n(i,e[o]))},o=function(e,n){var s=e.splice(0,50);i(s,n),e.length>0?setTimeout((function(){o(e,n)}),1):(t.update(),t.trigger("parseComplete"))};return t.handlers.parseComplete=t.handlers.parseComplete||[],function(){var e=function(e){for(var t=e.childNodes,n=[],i=0,o=t.length;o>i;i++)void 0===t[i].data&&n.push(t[i]);return n}(t.list),n=t.valueNames;t.indexAsync?o(e,n):i(e,n)}}},{"./item":4}],6:[function(e,t,n){t.exports=function(e){var t,n,i,o,s={resetList:function(){e.i=1,e.templater.clear(),o=void 0},setOptions:function(e){2==e.length&&e[1]instanceof Array?n=e[1]:2==e.length&&"function"==typeof e[1]?o=e[1]:3==e.length&&(n=e[1],o=e[2])},setColumns:function(){0!==e.items.length&&void 0===n&&(n=void 0===e.searchColumns?s.toArray(e.items[0].values()):e.searchColumns)},setSearchString:function(t){t=(t=e.utils.toString(t).toLowerCase()).replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),i=t},toArray:function(e){var t=[];for(var n in e)t.push(n);return t}},a={list:function(){for(var t=0,n=e.items.length;n>t;t++)a.item(e.items[t])},item:function(e){e.found=!1;for(var t=0,i=n.length;i>t;t++)if(a.values(e.values(),n[t]))return void(e.found=!0)},values:function(n,o){return!!(n.hasOwnProperty(o)&&(t=e.utils.toString(n[o]).toLowerCase(),""!==i&&t.search(i)>-1))},reset:function(){e.reset.search(),e.searched=!1}},r=function(t){return e.trigger("searchStart"),s.resetList(),s.setSearchString(t),s.setOptions(arguments),s.setColumns(),""===i?a.reset():(e.searched=!0,o?o(i,n):a.list()),e.update(),e.trigger("searchComplete"),e.visibleItems};return e.handlers.searchStart=e.handlers.searchStart||[],e.handlers.searchComplete=e.handlers.searchComplete||[],e.utils.events.bind(e.utils.getByClass(e.listContainer,e.searchClass),"keyup",(function(t){var n=t.target||t.srcElement;""===n.value&&!e.searched||r(n.value)})),e.utils.events.bind(e.utils.getByClass(e.listContainer,e.searchClass),"input",(function(e){""===(e.target||e.srcElement).value&&r("")})),r}},{}],7:[function(e,t,n){t.exports=function(e){e.sortFunction=e.sortFunction||function(t,n,i){return i.desc="desc"==i.order,e.utils.naturalSort(t.values()[i.valueName],n.values()[i.valueName],i)};var t={els:void 0,clear:function(){for(var n=0,i=t.els.length;i>n;n++)e.utils.classes(t.els[n]).remove("asc"),e.utils.classes(t.els[n]).remove("desc")},getOrder:function(t){var n=e.utils.getAttribute(t,"data-order");return"asc"==n||"desc"==n?n:e.utils.classes(t).has("desc")?"asc":e.utils.classes(t).has("asc")?"desc":"asc"},getInSensitive:function(t,n){var i=e.utils.getAttribute(t,"data-insensitive");n.insensitive="false"!==i},setOrder:function(n){for(var i=0,o=t.els.length;o>i;i++){var s=t.els[i];if(e.utils.getAttribute(s,"data-sort")===n.valueName){var a=e.utils.getAttribute(s,"data-order");"asc"==a||"desc"==a?a==n.order&&e.utils.classes(s).add(n.order):e.utils.classes(s).add(n.order)}}}},n=function(){e.trigger("sortStart");var n={},i=arguments[0].currentTarget||arguments[0].srcElement||void 0;i?(n.valueName=e.utils.getAttribute(i,"data-sort"),t.getInSensitive(i,n),n.order=t.getOrder(i)):((n=arguments[1]||n).valueName=arguments[0],n.order=n.order||"asc",n.insensitive=void 0===n.insensitive||n.insensitive),t.clear(),t.setOrder(n),n.sortFunction=n.sortFunction||e.sortFunction,e.items.sort((function(e,t){var i="desc"===n.order?-1:1;return n.sortFunction(e,t,n)*i})),e.update(),e.trigger("sortComplete")};return e.handlers.sortStart=e.handlers.sortStart||[],e.handlers.sortComplete=e.handlers.sortComplete||[],t.els=e.utils.getByClass(e.listContainer,e.sortClass),e.utils.events.bind(t.els,"click",n),e.on("searchStart",t.clear),e.on("filterStart",t.clear),n}},{}],8:[function(e,t,n){var i=function(e){var t,n=this;this.clearSourceItem=function(t,n){for(var i=0,o=n.length;o>i;i++){var s;if(n[i].data)for(var a=0,r=n[i].data.length;r>a;a++)t.setAttribute("data-"+n[i].data[a],"");else n[i].attr&&n[i].name?(s=e.utils.getByClass(t,n[i].name,!0))&&s.setAttribute(n[i].attr,""):(s=e.utils.getByClass(t,n[i],!0))&&(s.innerHTML="");s=void 0}return t},this.getItemSource=function(t){if(void 0===t){for(var n=e.list.childNodes,i=0,o=n.length;o>i;i++)if(void 0===n[i].data)return n[i].cloneNode(!0)}else{if(/^tr[\s>]/.exec(t)){var s=document.createElement("table");return s.innerHTML=t,s.firstChild}if(-1!==t.indexOf("<")){var a=document.createElement("div");return a.innerHTML=t,a.firstChild}var r=document.getElementById(e.item);if(r)return r}throw new Error("The list need to have at list one item on init otherwise you'll have to add a template.")},this.get=function(t,i){n.create(t);for(var o={},s=0,a=i.length;a>s;s++){var r;if(i[s].data)for(var l=0,c=i[s].data.length;c>l;l++)o[i[s].data[l]]=e.utils.getAttribute(t.elm,"data-"+i[s].data[l]);else i[s].attr&&i[s].name?(r=e.utils.getByClass(t.elm,i[s].name,!0),o[i[s].name]=r?e.utils.getAttribute(r,i[s].attr):""):(r=e.utils.getByClass(t.elm,i[s],!0),o[i[s]]=r?r.innerHTML:"");r=void 0}return o},this.set=function(t,i){var o=function(n,i){var o,s=function(t){for(var n=0,i=e.valueNames.length;i>n;n++)if(e.valueNames[n].data){for(var o=e.valueNames[n].data,s=0,a=o.length;a>s;s++)if(o[s]===t)return{data:t}}else{if(e.valueNames[n].attr&&e.valueNames[n].name&&e.valueNames[n].name==t)return e.valueNames[n];if(e.valueNames[n]===t)return t}}(n);s&&(s.data?t.elm.setAttribute("data-"+s.data,i):s.attr&&s.name?(o=e.utils.getByClass(t.elm,s.name,!0))&&o.setAttribute(s.attr,i):(o=e.utils.getByClass(t.elm,s,!0))&&(o.innerHTML=i),o=void 0)};if(!n.create(t))for(var s in i)i.hasOwnProperty(s)&&o(s,i[s])},this.create=function(e){if(void 0!==e.elm)return!1;var i=t.cloneNode(!0);return i.removeAttribute("id"),e.elm=i,n.set(e,e.values()),!0},this.remove=function(t){t.elm.parentNode===e.list&&e.list.removeChild(t.elm)},this.show=function(t){n.create(t),e.list.appendChild(t.elm)},this.hide=function(t){void 0!==t.elm&&t.elm.parentNode===e.list&&e.list.removeChild(t.elm)},this.clear=function(){if(e.list.hasChildNodes())for(;e.list.childNodes.length>=1;)e.list.removeChild(e.list.firstChild)},t=n.getItemSource(e.item),t=n.clearSourceItem(t,e.valueNames)};t.exports=function(e){return new i(e)}},{}],9:[function(e,t,n){function i(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var o=e("./index-of"),s=/\s+/,a=Object.prototype.toString;t.exports=function(e){return new i(e)},i.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},i.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=o(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},i.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},i.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},i.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(s);return""===e[0]&&e.shift(),e},i.prototype.has=i.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)}},{"./index-of":14}],10:[function(e,t,n){var i=window.addEventListener?"addEventListener":"attachEvent",o=window.removeEventListener?"removeEventListener":"detachEvent",s="addEventListener"!==i?"on":"",a=e("./to-array");n.bind=function(e,t,n,o){e=a(e);for(var r=0;r<e.length;r++)e[r][i](s+t,n,o||!1)},n.unbind=function(e,t,n,i){e=a(e);for(var r=0;r<e.length;r++)e[r][o](s+t,n,i||!1)}},{"./to-array":16}],11:[function(e,t,n){t.exports=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),i=0;t=n[i];i++)if(t)for(var o in t)e[o]=t[o];return e}},{}],12:[function(e,t,n){t.exports=function(e,t){var n=e.getAttribute&&e.getAttribute(t)||null;if(!n)for(var i=e.attributes.length,o=0;i>o;o++)void 0!==t[o]&&t[o].nodeName===t&&(n=t[o].nodeValue);return n}},{}],13:[function(e,t,n){t.exports=document.getElementsByClassName?function(e,t,n){return n?e.getElementsByClassName(t)[0]:e.getElementsByClassName(t)}:document.querySelector?function(e,t,n){return t="."+t,n?e.querySelector(t):e.querySelectorAll(t)}:function(e,t,n){var i=[];null===e&&(e=document);for(var o=e.getElementsByTagName("*"),s=o.length,a=new RegExp("(^|\\s)"+t+"(\\s|$)"),r=0,l=0;s>r;r++)if(a.test(o[r].className)){if(n)return o[r];i[l]=o[r],l++}return i}},{}],14:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],15:[function(e,t,n){t.exports=function(e,t,n){var i,o,s=/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[\da-fA-F]+$|\d+)/g,a=/^\s+|\s+$/g,r=/\s+/g,l=/^0x[0-9a-f]+$/i,c=/^0/,d=n||{},u=function(e){return d.insensitive&&(""+e).toLowerCase()||""+e},p=u(e)||"",h=u(t)||"",f=p.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=h.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(p.match(l),16)||1!==f.length&&Date.parse(p),v=parseInt(h.match(l),16)||g&&h.match(/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/)&&Date.parse(h)||null,b=function(e,t){return(!e.match(c)||1==t)&&parseFloat(e)||e.replace(r," ").replace(a,"")||0};if(v){if(v>g)return-1;if(g>v)return 1}for(var y=0,w=f.length,_=m.length,T=Math.max(w,_);T>y;y++){if(i=b(f[y],w),o=b(m[y],_),isNaN(i)!==isNaN(o))return isNaN(i)?1:-1;if(typeof i!=typeof o&&(i+="",o+=""),o>i)return-1;if(i>o)return 1}return 0}},{}],16:[function(e,t,n){t.exports=function(e){if(void 0===e)return[];if(null===e)return[null];if(e===window)return[window];if("string"==typeof e)return[e];if(function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e))return e;if("number"!=typeof e.length)return[e];if("function"==typeof e&&e instanceof Function)return[e];for(var t=[],n=0;n<e.length;n++)(Object.prototype.hasOwnProperty.call(e,n)||n in e)&&t.push(e[n]);return t.length?t:[]}},{}],17:[function(e,t,n){t.exports=function(e){return(e=null===(e=void 0===e?"":e)?"":e).toString()}},{}]},{},[1])},90675:()=>{!function(e){e.LJS=function(t,n){var i=this;i.$el=e(t),i.$el.data("LJS",i),i.options=n,i.Go=function(e,t){e.text().length==t?e.text(""):e.append(".")},i.stopInterval=function(){clearInterval(i.i)},i.init=function(){void 0!==i.options.speed&&null!==i.options.speed||(i.options.speed=300),void 0!==i.options.d&&null!==i.options.d||(i.options.d=3),void 0!==i.options.text&&null!==i.options.text||(i.options.text="Loading"),void 0!==i.options.left&&null!==i.options.left||(i.options.left=0),i.$el.html("<span>"+i.options.text+"<em></em></span>"),i.$dots=i.$el.find("em"),i.$lt=i.$el.find("span"),i.$el.css("position","relative"),i.$lt.css({position:"absolute",top:i.$el.outerHeight()/2-i.$lt.outerHeight()/2,left:i.options.left}),i.i=setInterval(i.Go,i.options.speed,i.$dots,i.options.d)},i.init()},e.fn.LJS=function(t){if("string"!=typeof t||"Stop"!=t)return this.each((function(){new e.LJS(this,t)}));var n=e(this).data("LJS");n&&n.stopInterval()}}(jQuery)},63940:function(e,t,n){var i,o;n(43838),n(39028),i=function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,i){var o;return(o="translate3d"===c.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"}).transition="all "+n+"ms "+i,o}function i(e,t){return("string"==typeof e?e:a(e)).indexOf(" "+t+" ")>=0}function o(e,t){var n=a(e),o=n+t;i(n,t)||(e.className=o.substring(1))}function s(e,t){var n,o=a(e);i(e,t)&&(n=o.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function a(e){return(" "+(e&&e.className||"")+" ").replace(/\s+/gi," ")}function r(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={version:"0.2.0"},c=l.settings={minimum:.08,easing:"linear",positionUsing:"",speed:350,trickle:!0,trickleSpeed:250,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(c[t]=n);return this},l.status=null,l.set=function(t){var i=l.isStarted();t=e(t,c.minimum,1),l.status=1===t?null:t;var o=l.render(!i),s=o.querySelector(c.barSelector),a=c.speed,r=c.easing;return o.offsetWidth,d((function(e){""===c.positionUsing&&(c.positionUsing=l.getPositioningCSS()),u(s,n(t,a,r)),1===t?(u(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout((function(){u(o,{transition:"all "+a+"ms linear",opacity:0}),setTimeout((function(){l.remove(),e()}),a)}),a)):setTimeout(e,a)})),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout((function(){l.status&&(l.trickle(),e())}),c.trickleSpeed)};return c.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var n=l.status;return n?n>1?void 0:("number"!=typeof t&&(t=n>=0&&n<.25?(3*Math.random()+3)/100:n>=.25&&n<.65?3*Math.random()/100:n>=.65&&n<.9?2*Math.random()/100:n>=.9&&n<.99?.005:0),n=e(n+t,0,.994),l.set(n)):l.start()},l.trickle=function(){return l.inc()},function(){var e=0,t=0;l.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&l.start(),e++,t++,n.always((function(){0==--t?(e=0,l.done()):l.set((e-t)/e)})),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=c.template;var i,s=n.querySelector(c.barSelector),a=e?"-100":t(l.status||0),d=document.querySelector(c.parent);return u(s,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),c.showSpinner||(i=n.querySelector(c.spinnerSelector))&&r(i),d!=document.body&&o(d,"nprogress-custom-parent"),d.appendChild(n),n},l.remove=function(){s(document.documentElement,"nprogress-busy"),s(document.querySelector(c.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&r(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var d=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),u=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function t(e){var t=document.body.style;if(e in t)return e;for(var n,i=o.length,s=e.charAt(0).toUpperCase()+e.slice(1);i--;)if((n=o[i]+s)in t)return n;return e}function n(n){return n=e(n),s[n]||(s[n]=t(n))}function i(e,t,i){t=n(t),e.style[t]=i}var o=["Webkit","O","Moz","ms"],s={};return function(e,t){var n,o,s=arguments;if(2==s.length)for(n in t)void 0!==(o=t[n])&&t.hasOwnProperty(n)&&i(e,n,o);else i(e,s[1],s[2])}}();return l},void 0===(o="function"==typeof i?i.call(t,n,t,e):i)||(e.exports=o)},27353:(e,t,n)=>{n(43838),function(){let e=[],t=[],n=null,i=[],o=[],s=function(n){let i=e.indexOf(t[n]);-1!==i&&e.splice(i,1)},a=function(e){return e.map((e=>{if(-1!==e.name.search(/selectItem\w+\[/)||-1!==e.name.search(/selectAll\w+\[/))return"";let t=e.name.match(/^\w+\[/);return null==t||"file"===e.type?"":(t=t[0],t.substring(0,t.length-1))})).filter(((e,t,n)=>""!==e&&n.indexOf(e)===t))},r=function(r,l){var c;e=r,n=l,t=e.slice(),function(n){let i=[];for(let e=0;e<n.length;e++)"hidden"==n[e].type&&void 0!==n[e+1]&&"checkbox"==n[e+1].type&&n[e].name==n[e+1].name&&i.push(n[e]);i.forEach((n=>{s(e.indexOf(n));let i=t.indexOf(n);-1!==i&&t.splice(i,1)}))}(t),o=a(t),i=function(){let e=[];return t.forEach((t=>{null!==t.name.match(/\[\]$/)&&(null==e[t.name]?e[t.name]=[t.value]:e[t.name].push(t.value))})),e}(),function(){for(let e=0;e<t.length;e++){if("_csrf_token"==t[e].name)continue;if(-1!==t[e].name.search(/selectItem\w+\[/)||-1!==t[e].name.search(/selectAll\w+\[/)){s(e);continue}let o=$(n).find(`[name="${t[e].name}"]`),a=0;if(0==o.length)continue;if(o.length>1&&(a=1),o=o[a],"file"==$(o).attr("type")&&""==$(o).val()){s(e);continue}if(null==$(o).attr("force-send")){let n=`${t[e].name}[]`,a=$(o).next(`select[name="${n}"]`);0!==a.length&&void 0===i[n]&&(null==$(a).val()||$(a).val()instanceof Array&&0==$(a).val().length)&&""==$(a).attr("original-value")&&"1"!=$(a).attr("force-send")&&s(e);continue}if("1"==$(o).attr("force-send"))continue;let r=!1;if($(o).val()instanceof Array){if($(o).attr("original-value")==i[t[e].name].join(",")){if(s(e),!r)for(let n=0;n<t.length;n++)if(t[n].name==t[e].name.substring(0,t[e].name.length-2)){s(n),r=!0;break}continue}}else{let n=$(o).attr("original-value"),i=t[e].value;if($.isNumeric(n)&&$.isNumeric(i)){if(n===i){s(e);continue}}else if(n=window.decodeHtml(n),n==i){s(e);continue}}}}(),c=a(e),$(o).not(c).get().forEach((t=>{e.push({name:`${t}[]`,value:"",type:"hidden",required:!1})}))},l=function(e){return function(){return r(arguments[0],arguments[1]),e.apply(this,arguments)}},c=function(t,n){return function(){return function(t,n,i){if(1==t.result){let t={};for(let n=0;n<e.length;n++){if("_csrf_token"==e[n].name)continue;let o=$(i).find(`[name="${e[n].name}"]`);if(0!=o.length){if(1==o.length){if(o=o[0],"multiple"==$(o).next(".input-wrap").find("select").attr("multiple")){$(o).next(".input-wrap").find("select").attr("original-value",e[n].value);continue}}else o=o[1];"multiple"===$(o).attr("multiple")?(null==t[e[n].name]&&(t[e[n].name]=[]),t[e[n].name].push(e[n].value)):$(o).attr("original-value",e[n].value)}}for(let e in t)$(i).find(`[name="${e}"]`).attr("original-value",t[e].join(","))}}(arguments[0],0,n),t.apply(this,arguments)}};var d;$.fn.ajaxForm=(d=$.fn.ajaxForm,function(){return arguments[0].forceSend||(null==arguments[0].beforeSubmit?arguments[0].beforeSubmit=l((()=>{})):arguments[0].beforeSubmit=l(arguments[0].beforeSubmit),null==arguments[0].success?arguments[0].success=c((()=>{}),this):arguments[0].success=c(arguments[0].success,this)),d.apply(this,arguments)})}()},17360:function(e,t,n){var i,o;n(58740),n(43838),n(9225),n(14632),n(8396),n(58150),n(38936),n(4496),n(81339),n(67882),n(97865),n(49465),n(69431),n(704),n(16925),function(s,a,r){"use strict";"undefined"!=typeof window&&n.amdO?void 0===(o="function"==typeof(i=r)?i.call(t,n,t,e):i)||(e.exports=o):e.exports?e.exports=r():a.exports?a.exports=r():a.Fingerprint2=r()}(0,this,(function(){"use strict";var e=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},t=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},n=function(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},i=function(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},o=function(e,t){return[e[0]^t[0],e[1]^t[1]]},s=function(e){return e=o(e,[0,e[0]>>>1]),e=t(e,[4283543511,3981806797]),e=o(e,[0,e[0]>>>1]),e=t(e,[3301882366,444984403]),o(e,[0,e[0]>>>1])},a=function(a,r){r=r||0;for(var l=(a=a||"").length%16,c=a.length-l,d=[0,r],u=[0,r],p=[0,0],h=[0,0],f=[2277735313,289559509],m=[1291169091,658871167],g=0;g<c;g+=16)p=[255&a.charCodeAt(g+4)|(255&a.charCodeAt(g+5))<<8|(255&a.charCodeAt(g+6))<<16|(255&a.charCodeAt(g+7))<<24,255&a.charCodeAt(g)|(255&a.charCodeAt(g+1))<<8|(255&a.charCodeAt(g+2))<<16|(255&a.charCodeAt(g+3))<<24],h=[255&a.charCodeAt(g+12)|(255&a.charCodeAt(g+13))<<8|(255&a.charCodeAt(g+14))<<16|(255&a.charCodeAt(g+15))<<24,255&a.charCodeAt(g+8)|(255&a.charCodeAt(g+9))<<8|(255&a.charCodeAt(g+10))<<16|(255&a.charCodeAt(g+11))<<24],p=t(p,f),p=n(p,31),p=t(p,m),d=o(d,p),d=n(d,27),d=e(d,u),d=e(t(d,[0,5]),[0,1390208809]),h=t(h,m),h=n(h,33),h=t(h,f),u=o(u,h),u=n(u,31),u=e(u,d),u=e(t(u,[0,5]),[0,944331445]);switch(p=[0,0],h=[0,0],l){case 15:h=o(h,i([0,a.charCodeAt(g+14)],48));case 14:h=o(h,i([0,a.charCodeAt(g+13)],40));case 13:h=o(h,i([0,a.charCodeAt(g+12)],32));case 12:h=o(h,i([0,a.charCodeAt(g+11)],24));case 11:h=o(h,i([0,a.charCodeAt(g+10)],16));case 10:h=o(h,i([0,a.charCodeAt(g+9)],8));case 9:h=o(h,[0,a.charCodeAt(g+8)]),h=t(h,m),h=n(h,33),h=t(h,f),u=o(u,h);case 8:p=o(p,i([0,a.charCodeAt(g+7)],56));case 7:p=o(p,i([0,a.charCodeAt(g+6)],48));case 6:p=o(p,i([0,a.charCodeAt(g+5)],40));case 5:p=o(p,i([0,a.charCodeAt(g+4)],32));case 4:p=o(p,i([0,a.charCodeAt(g+3)],24));case 3:p=o(p,i([0,a.charCodeAt(g+2)],16));case 2:p=o(p,i([0,a.charCodeAt(g+1)],8));case 1:p=o(p,[0,a.charCodeAt(g)]),p=t(p,f),p=n(p,31),p=t(p,m),d=o(d,p)}return d=o(d,[0,a.length]),u=o(u,[0,a.length]),d=e(d,u),u=e(u,d),d=s(d),u=s(u),d=e(d,u),u=e(u,d),("00000000"+(d[0]>>>0).toString(16)).slice(-8)+("00000000"+(d[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},r={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},l=function(e,t){if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t(e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t(e[o],o,e)},c=function(e,t){var n=[];return null==e?n:Array.prototype.map&&e.map===Array.prototype.map?e.map(t):(l(e,(function(e,i,o){n.push(t(e,i,o))})),n)},d=function(e){if(null==navigator.plugins)return e.NOT_AVAILABLE;for(var t=[],n=0,i=navigator.plugins.length;n<i;n++)navigator.plugins[n]&&t.push(navigator.plugins[n]);return u(e)&&(t=t.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))),c(t,(function(e){var t=c(e,(function(e){return[e.type,e.suffixes]}));return[e.name,e.description,t]}))},u=function(e){for(var t=!1,n=0,i=e.plugins.sortPluginsFor.length;n<i;n++){var o=e.plugins.sortPluginsFor[n];if(navigator.userAgent.match(o)){t=!0;break}}return t},p=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},h=function(){if(!p())return!1;var e=f();return!!window.WebGLRenderingContext&&!!e},f=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t},m=[{key:"userAgent",getData:function(e){e(navigator.userAgent)}},{key:"webdriver",getData:function(e,t){e(null==navigator.webdriver?t.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(e,t){e(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||t.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(e,t){e(window.screen.colorDepth||t.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(e,t){e(navigator.deviceMemory||t.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(e,t){e(window.devicePixelRatio||t.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(e,t){e(function(e){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:e.NOT_AVAILABLE}(t))}},{key:"screenResolution",getData:function(e,t){e(function(e){var t=[window.screen.width,window.screen.height];return e.screen.detectScreenOrientation&&t.sort().reverse(),t}(t))}},{key:"availableScreenResolution",getData:function(e,t){e(function(e){if(window.screen.availWidth&&window.screen.availHeight){var t=[window.screen.availHeight,window.screen.availWidth];return e.screen.detectScreenOrientation&&t.sort().reverse(),t}return e.NOT_AVAILABLE}(t))}},{key:"timezoneOffset",getData:function(e){e((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(e,t){window.Intl&&window.Intl.DateTimeFormat?e((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):e(t.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(e,t){e(function(e){try{return!!window.sessionStorage}catch(t){return e.ERROR}}(t))}},{key:"localStorage",getData:function(e,t){e(function(e){try{return!!window.localStorage}catch(t){return e.ERROR}}(t))}},{key:"indexedDb",getData:function(e,t){e(function(e){try{return!!window.indexedDB}catch(t){return e.ERROR}}(t))}},{key:"addBehavior",getData:function(e){e(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(e){e(!!window.openDatabase)}},{key:"cpuClass",getData:function(e,t){e(function(e){return navigator.cpuClass||e.NOT_AVAILABLE}(t))}},{key:"platform",getData:function(e,t){e(function(e){return navigator.platform?navigator.platform:e.NOT_AVAILABLE}(t))}},{key:"doNotTrack",getData:function(e,t){e(function(e){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:e.NOT_AVAILABLE}(t))}},{key:"plugins",getData:function(e,t){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?t.plugins.excludeIE?e(t.EXCLUDED):e(function(e){var t=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?t=c(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],(function(t){try{return new window.ActiveXObject(t),t}catch(t){return e.ERROR}})):t.push(e.NOT_AVAILABLE),navigator.plugins&&(t=t.concat(d(e))),t}(t)):e(d(t))}},{key:"canvas",getData:function(e,t){p()?e(function(e){var t=[],n=document.createElement("canvas");n.width=2e3,n.height=200,n.style.display="inline";var i=n.getContext("2d");return i.rect(0,0,10,10),i.rect(2,2,6,6),t.push("canvas winding:"+(!1===i.isPointInPath(5,5,"evenodd")?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",e.dontUseFakeFontInCanvas?i.font="11pt Arial":i.font="11pt no-real-font-123",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),i.fillStyle="rgba(102, 204, 0, 0.2)",i.font="18pt Arial",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),n.toDataURL&&t.push("canvas fp:"+n.toDataURL()),t}(t)):e(t.NOT_AVAILABLE)}},{key:"webgl",getData:function(e,t){h()?e(function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"};if(!(e=f()))return null;var n=[],i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i);var o=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW),i.itemSize=3,i.numItems=3;var s=e.createProgram(),a=e.createShader(e.VERTEX_SHADER);e.shaderSource(a,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),e.compileShader(a);var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),e.compileShader(r),e.attachShader(s,a),e.attachShader(s,r),e.linkProgram(s),e.useProgram(s),s.vertexPosAttrib=e.getAttribLocation(s,"attrVertex"),s.offsetUniform=e.getUniformLocation(s,"uniformOffset"),e.enableVertexAttribArray(s.vertexPosArray),e.vertexAttribPointer(s.vertexPosAttrib,i.itemSize,e.FLOAT,!1,0,0),e.uniform2f(s.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,i.numItems);try{n.push(e.canvas.toDataURL())}catch(e){}n.push("extensions:"+(e.getSupportedExtensions()||[]).join(";")),n.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),n.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),n.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),n.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),n.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),n.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),n.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),n.push("webgl max anisotropy:"+function(e){var t=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");if(t){var n=e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===n&&(n=2),n}return null}(e)),n.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),n.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),n.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),n.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),n.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),n.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),n.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),n.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),n.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),n.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),n.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),n.push("webgl red bits:"+e.getParameter(e.RED_BITS)),n.push("webgl renderer:"+e.getParameter(e.RENDERER)),n.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),n.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),n.push("webgl vendor:"+e.getParameter(e.VENDOR)),n.push("webgl version:"+e.getParameter(e.VERSION));try{var c=e.getExtension("WEBGL_debug_renderer_info");c&&(n.push("webgl unmasked vendor:"+e.getParameter(c.UNMASKED_VENDOR_WEBGL)),n.push("webgl unmasked renderer:"+e.getParameter(c.UNMASKED_RENDERER_WEBGL)))}catch(e){}return e.getShaderPrecisionFormat?(l(["FLOAT","INT"],(function(t){l(["VERTEX","FRAGMENT"],(function(i){l(["HIGH","MEDIUM","LOW"],(function(o){l(["precision","rangeMin","rangeMax"],(function(s){var a=e.getShaderPrecisionFormat(e[i+"_SHADER"],e[o+"_"+t])[s];"precision"!==s&&(s="precision "+s);var r=["webgl ",i.toLowerCase()," shader ",o.toLowerCase()," ",t.toLowerCase()," ",s,":",a].join("");n.push(r)}))}))}))})),n):n}()):e(t.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(e){h()?e(function(){try{var e=f(),t=e.getExtension("WEBGL_debug_renderer_info");return e.getParameter(t.UNMASKED_VENDOR_WEBGL)+"~"+e.getParameter(t.UNMASKED_RENDERER_WEBGL)}catch(e){return null}}()):e()}},{key:"adBlock",getData:function(e){e(function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(e){t=!1}return t}())}},{key:"hasLiedLanguages",getData:function(e){e(function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1}())}},{key:"hasLiedResolution",getData:function(e){e(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(e){e(function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.oscpu,i=navigator.platform.toLowerCase();if(e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0||t.indexOf("cros")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if(void 0!==n){if((n=n.toLowerCase()).indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(n.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(n.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===e))return!0}return i.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||(i.indexOf("linux")>=0||i.indexOf("android")>=0||i.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||(i.indexOf("mac")>=0||i.indexOf("ipad")>=0||i.indexOf("ipod")>=0||i.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||(i.indexOf("win")<0&&i.indexOf("linux")<0&&i.indexOf("mac")<0&&i.indexOf("iphone")<0&&i.indexOf("ipad")<0)!=("Other"===e)||void 0===navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e}())}},{key:"hasLiedBrowser",getData:function(e){e(function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(("Chrome"==(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":"Other")||"Safari"===e||"Opera"===e)&&"20030107"!==n)return!0;var i,o=eval.toString().length;if(37===o&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===o&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===o&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;try{throw"a"}catch(e){try{e.toSource(),i=!0}catch(e){i=!1}}return i&&"Firefox"!==e&&"Other"!==e}())}},{key:"touchSupport",getData:function(e){e(function(){var e,t=0;void 0!==navigator.maxTouchPoints?t=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(t=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return[t,e,"ontouchstart"in window]}())}},{key:"fonts",getData:function(e,t){var n=["monospace","sans-serif","serif"],i=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];t.fonts.extendedJsFonts&&(i=i.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),i=(i=i.concat(t.fonts.userDefinedFonts)).filter((function(e,t){return i.indexOf(e)===t}));var o=document.getElementsByTagName("body")[0],s=document.createElement("div"),a=document.createElement("div"),r={},l={},c=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="72px",e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML="mmmmmmmmmmlli",e},d=function(e,t){var n=c();return n.style.fontFamily="'"+e+"',"+t,n},u=function(e){for(var t=!1,i=0;i<n.length;i++)if(t=e[i].offsetWidth!==r[n[i]]||e[i].offsetHeight!==l[n[i]])return t;return t},p=function(){for(var e=[],t=0,i=n.length;t<i;t++){var o=c();o.style.fontFamily=n[t],s.appendChild(o),e.push(o)}return e}();o.appendChild(s);for(var h=0,f=n.length;h<f;h++)r[n[h]]=p[h].offsetWidth,l[n[h]]=p[h].offsetHeight;var m=function(){for(var e={},t=0,o=i.length;t<o;t++){for(var s=[],r=0,l=n.length;r<l;r++){var c=d(i[t],n[r]);a.appendChild(c),s.push(c)}e[i[t]]=s}return e}();o.appendChild(a);for(var g=[],v=0,b=i.length;v<b;v++)u(m[i[v]])&&g.push(i[v]);o.removeChild(a),o.removeChild(s),e(g)},pauseBefore:!0},{key:"fontsFlash",getData:function(e,t){return void 0!==window.swfobject?window.swfobject.hasFlashPlayerVersion("9.0.0")?t.fonts.swfPath?void function(e,t){window.___fp_swf_loaded=function(t){e(t)};var n=t.fonts.swfContainerId;!function(){var e=document.createElement("div");e.setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(e)}(),window.swfobject.embedSWF(t.fonts.swfPath,n,"1","1","9.0.0",!1,{onReady:"___fp_swf_loaded"},{allowScriptAccess:"always",menu:"false"},{})}((function(t){e(t)}),t):e("missing options.fonts.swfPath"):e("flash not installed"):e("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(e,t){var n=t.audio;if(n.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return e(t.EXCLUDED);var i=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==i)return e(t.NOT_AVAILABLE);var o=new i(1,44100,44100),s=o.createOscillator();s.type="triangle",s.frequency.setValueAtTime(1e4,o.currentTime);var a=o.createDynamicsCompressor();l([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],(function(e){void 0!==a[e[0]]&&"function"==typeof a[e[0]].setValueAtTime&&a[e[0]].setValueAtTime(e[1],o.currentTime)})),s.connect(a),a.connect(o.destination),s.start(0),o.startRendering();var r=setTimeout((function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),o.oncomplete=function(){},o=null,e("audioTimeout")}),n.timeout);o.oncomplete=function(t){var n;try{clearTimeout(r),n=t.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce((function(e,t){return e+Math.abs(t)}),0).toString(),s.disconnect(),a.disconnect()}catch(t){return void e(t)}e(n)}}},{key:"enumerateDevices",getData:function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return e(t.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then((function(t){e(t.map((function(e){return"id="+e.deviceId+";gid="+e.groupId+";"+e.kind+";"+e.label})))})).catch((function(t){e(t)}))}}],g=function(e){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200")};return g.get=function(e,t){t?e||(e={}):(t=e,e={}),function(e,t){if(null==t)return e;var n,i;for(i in t)null==(n=t[i])||Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n)}(e,r),e.components=e.extraComponents.concat(m);var n={data:[],addPreprocessedComponent:function(t,i){"function"==typeof e.preprocessor&&(i=e.preprocessor(t,i)),n.data.push({key:t,value:i})}},i=-1,o=function(s){if((i+=1)>=e.components.length)t(n.data);else{var a=e.components[i];if(e.excludes[a.key])o(!1);else{if(!s&&a.pauseBefore)return i-=1,void setTimeout((function(){o(!0)}),1);try{a.getData((function(e){n.addPreprocessedComponent(a.key,e),o(!1)}),e)}catch(e){n.addPreprocessedComponent(a.key,String(e)),o(!1)}}}};o(!1)},g.getPromise=function(e){return new Promise((function(t,n){g.get(e,t)}))},g.getV18=function(e,t){return null==t&&(t=e,e={}),g.get(e,(function(n){for(var i=[],o=0;o<n.length;o++){var s=n[o];if(s.value===(e.NOT_AVAILABLE||"not available"))i.push({key:s.key,value:"unknown"});else if("plugins"===s.key)i.push({key:"plugins",value:c(s.value,(function(e){var t=c(e[2],(function(e){return e.join?e.join("~"):e})).join(",");return[e[0],e[1],t].join("::")}))});else if(-1!==["canvas","webgl"].indexOf(s.key))i.push({key:s.key,value:s.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(s.key)){if(!s.value)continue;i.push({key:s.key,value:1})}else s.value?i.push(s.value.join?{key:s.key,value:s.value.join(";")}:s):i.push({key:s.key,value:s.value})}var r=a(c(i,(function(e){return e.value})).join("~~~"),31);t(r,i)}))},g.x64hash128=a,g.VERSION="2.1.0",g}))},45505:(e,t,n)=>{var i,o,s;n(58740),n(43838),n(4949),n(39028),o=[n(13886)],void 0===(s="function"==typeof(i=function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var n,i,o,s,a,r,l,c,d,u,p,h,f,m,g;function v(e,t){return f.call(e,t)}function b(e,t){var n,i,o,s,a,r,l,c,d,u,h,f=t&&t.split("/"),m=p.map,v=m&&m["*"]||{};if(e){for(a=(e=e.split("/")).length-1,p.nodeIdCompat&&g.test(e[a])&&(e[a]=e[a].replace(g,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),d=0;d<e.length;d++)if("."===(h=e[d]))e.splice(d,1),--d;else if(".."===h){if(0===d||1===d&&".."===e[2]||".."===e[d-1])continue;0<d&&(e.splice(d-1,2),d-=2)}e=e.join("/")}if((f||v)&&m){for(d=(n=e.split("/")).length;0<d;--d){if(i=n.slice(0,d).join("/"),f)for(u=f.length;0<u;--u)if(o=(o=m[f.slice(0,u).join("/")])&&o[i]){s=o,r=d;break}if(s)break;!l&&v&&v[i]&&(l=v[i],c=d)}!s&&l&&(s=l,r=c),s&&(n.splice(0,r,s),e=n.join("/"))}return e}function y(e,t){return function(){var n=m.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),r.apply(s,n.concat([e,t]))}}function w(e){return function(t){d[e]=t}}function _(e){if(v(u,e)){var t=u[e];delete u[e],h[e]=!0,a.apply(s,t)}if(!v(d,e)&&!v(h,e))throw new Error("No "+e);return d[e]}function T(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return e?T(e):[]}return t&&t.requirejs||(t?i=t:t={},d={},u={},p={},h={},f=Object.prototype.hasOwnProperty,m=[].slice,g=/\.js$/,l=function(e,t){var n,i,o=T(e),s=o[0],a=t[1];return e=o[1],s&&(n=_(s=b(s,a))),s?e=n&&n.normalize?n.normalize(e,(i=a,function(e){return b(e,i)})):b(e,a):(s=(o=T(e=b(e,a)))[0],e=o[1],s&&(n=_(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:n}},c={require:function(e){return y(e)},exports:function(e){var t=d[e];return void 0!==t?t:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:(t=e,function(){return p&&p.config&&p.config[t]||{}})};var t}},a=function(e,t,n,i){var o,a,r,p,f,m,g,b=[],T=typeof n;if(m=E(i=i||e),"undefined"==T||"function"==T){for(t=!t.length&&n.length?["require","exports","module"]:t,f=0;f<t.length;f+=1)if("require"===(a=(p=l(t[f],m)).f))b[f]=c.require(e);else if("exports"===a)b[f]=c.exports(e),g=!0;else if("module"===a)o=b[f]=c.module(e);else if(v(d,a)||v(u,a)||v(h,a))b[f]=_(a);else{if(!p.p)throw new Error(e+" missing "+a);p.p.load(p.n,y(i,!0),w(a),{}),b[f]=d[a]}r=n?n.apply(d[e],b):void 0,e&&(o&&o.exports!==s&&o.exports!==d[e]?d[e]=o.exports:r===s&&g||(d[e]=r))}else e&&(d[e]=n)},n=i=r=function(e,t,n,i,o){if("string"==typeof e)return c[e]?c[e](t):_(l(e,E(t)).f);if(!e.splice){if((p=e).deps&&r(p.deps,p.callback),!t)return;t.splice?(e=t,t=n,n=null):e=s}return t=t||function(){},"function"==typeof n&&(n=i,i=o),i?a(s,e,t,n):setTimeout((function(){a(s,e,t,n)}),4),r},r.config=function(e){return r(e)},n._defined=d,(o=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),v(d,e)||v(u,e)||(u[e]=[e,t,n])}).amd={jQuery:!0},t.requirejs=n,t.require=i,t.define=o),t.define("almond",(function(){})),t.define("jquery",[],(function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t})),t.define("select2/utils",["jquery"],(function(e){var t={};function n(e){var t=e.prototype,n=[];for(var i in t)"function"==typeof t[i]&&"constructor"!==i&&n.push(i);return n}function i(){this.listeners={}}t.Extend=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},t.Decorate=function(e,t){var i=n(t),o=n(e);function s(){var n=Array.prototype.unshift,i=t.prototype.constructor.length,o=e.prototype.constructor;0<i&&(n.call(arguments,e.prototype.constructor),o=t.prototype.constructor),o.apply(this,arguments)}t.displayName=e.displayName,s.prototype=new function(){this.constructor=s};for(var a=0;a<o.length;a++){var r=o[a];s.prototype[r]=e.prototype[r]}function l(e){var n=function(){};e in s.prototype&&(n=s.prototype[e]);var i=t.prototype[e];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}}for(var c=0;c<i.length;c++){var d=i[c];s.prototype[d]=l(d)}return s},i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},t.Observable=i,t.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var o=0;o<n.length;o++){var s=n[o];(s=s.substring(0,1).toLowerCase()+s.substring(1))in i||(i[s]={}),o==n.length-1&&(i[s]=e[t]),i=i[s]}delete e[t]}}return e},t.hasScroll=function(t,n){var i=e(n),o=n.style.overflowX,s=n.style.overflowY;return(o!==s||"hidden"!==s&&"visible"!==s)&&("scroll"===o||"scroll"===s||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},t.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,(function(e){i=i.add(e)})),n=i}t.append(n)},t.__cache={};var o=0;return t.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(e.id?(t=e.id,e.setAttribute("data-select2-id",t)):(e.setAttribute("data-select2-id",++o),t=o.toString())),t},t.StoreData=function(e,n,i){var o=t.GetUniqueElementId(e);t.__cache[o]||(t.__cache[o]={}),t.__cache[o][n]=i},t.GetData=function(n,i){var o=t.GetUniqueElementId(n);return i?t.__cache[o]&&null!=t.__cache[o][i]?t.__cache[o][i]:e(n).data(i):t.__cache[o]},t.RemoveData=function(e){var n=t.GetUniqueElementId(e);null!=t.__cache[n]&&delete t.__cache[n],e.removeAttribute("data-select2-id")},t})),t.define("select2/results",["jquery","./utils"],(function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(t.message);i.append(n(o(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],o=this.option(i);t.push(o)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(i){var o=e.map(i,(function(e){return e.id.toString()}));n.$results.find(".select2-results__option[aria-selected]").each((function(){var n=e(this),i=t.GetData(this,"data"),s=""+i.id;null!=i.element&&i.element.selected||null==i.element&&-1<e.inArray(s,o)?n.attr("aria-selected","true"):n.attr("aria-selected","false")}))}))},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var i=document.createElement("li");i.className="select2-results__option";var o={role:"option","aria-selected":"false"},s=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var a in(null!=n.element&&s.call(n.element,":disabled")||null==n.element&&n.disabled)&&(delete o["aria-selected"],o["aria-disabled"]="true"),null==n.id&&delete o["aria-selected"],null!=n._resultId&&(i.id=n._resultId),n.title&&(i.title=n.title),n.children&&(o.role="group",o["aria-label"]=n.text,delete o["aria-selected"]),o){var r=o[a];i.setAttribute(a,r)}if(n.children){var l=e(i),c=document.createElement("strong");c.className="select2-results__group",e(c),this.template(n,c);for(var d=[],u=0;u<n.children.length;u++){var p=n.children[u],h=this.option(p);d.push(h)}var f=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});f.append(d),l.append(c),l.append(f)}else this.template(n,i);return t.StoreData(i,"data",n),i},n.prototype.bind=function(n,i){var o=this,s=n.id+"-results";this.$results.attr("id",s),n.on("results:all",(function(e){o.clear(),o.append(e.data),n.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),n.on("results:append",(function(e){o.append(e.data),n.isOpen()&&o.setClasses()})),n.on("query",(function(e){o.hideMessages(),o.showLoading(e)})),n.on("select",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("unselect",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),n.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var e=o.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),n.on("results:select",(function(){var e=o.getHighlightedResults();if(0!==e.length){var n=t.GetData(e[0],"data");"true"==e.attr("aria-selected")?o.trigger("close",{}):o.trigger("select",{data:n})}})),n.on("results:previous",(function(){var e=o.getHighlightedResults(),t=o.$results.find("[aria-selected]"),n=t.index(e);if(!(n<=0)){var i=n-1;0===e.length&&(i=0);var s=t.eq(i);s.trigger("mouseenter");var a=o.$results.offset().top,r=s.offset().top,l=o.$results.scrollTop()+(r-a);0===i?o.$results.scrollTop(0):r-a<0&&o.$results.scrollTop(l)}})),n.on("results:next",(function(){var e=o.getHighlightedResults(),t=o.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var i=t.eq(n);i.trigger("mouseenter");var s=o.$results.offset().top+o.$results.outerHeight(!1),a=i.offset().top+i.outerHeight(!1),r=o.$results.scrollTop()+a-s;0===n?o.$results.scrollTop(0):s<a&&o.$results.scrollTop(r)}})),n.on("results:focus",(function(e){e.element.addClass("select2-results__option--highlighted")})),n.on("results:message",(function(e){o.displayMessage(e)})),e.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=o.$results.scrollTop(),n=o.$results.get(0).scrollHeight-t+e.deltaY,i=0<e.deltaY&&t-e.deltaY<=0,s=e.deltaY<0&&n<=o.$results.height();i?(o.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):s&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(n){var i=e(this),s=t.GetData(this,"data");"true"!==i.attr("aria-selected")?o.trigger("select",{originalEvent:n,data:s}):o.options.get("multiple")?o.trigger("unselect",{originalEvent:n,data:s}):o.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(n){var i=t.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted"),o.trigger("results:focus",{data:i,element:e(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,i=e.offset().top,o=this.$results.scrollTop()+(i-n),s=i-n;o-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(s>this.$results.outerHeight()||s<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),s=i(t,n);null==s?n.style.display="none":"string"==typeof s?n.innerHTML=o(s):e(n).append(s)},n})),t.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),t.define("select2/selection/base",["jquery","../utils","../keys"],(function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var n=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n},i.prototype.bind=function(e,t){var i=this,o=e.id+"-results";this.container=e,this.$selection.on("focus",(function(e){i.trigger("focus",e)})),this.$selection.on("blur",(function(e){i._handleBlur(e)})),this.$selection.on("keydown",(function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){i.update(e.data)})),e.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(e)})),e.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.trigger("focus"),i._detachCloseHandler(e)})),e.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex),i.$selection.attr("aria-disabled","false")})),e.on("disable",(function(){i.$selection.attr("tabindex","-1"),i.$selection.attr("aria-disabled","true")}))},i.prototype._handleBlur=function(t){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)}),1)},i.prototype._attachCloseHandler=function(n){e(document.body).on("mousedown.select2."+n.id,(function(n){var i=e(n.target).closest(".select2");e(".select2.select2-container--open").each((function(){this!=i[0]&&t.GetData(this,"element").select2("close")}))}))},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i})),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},o.prototype.bind=function(e,t){var n=this;o.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),e.on("focus",(function(t){e.isOpen()||n.$selection.trigger("focus")}))},o.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i);var o=t.title||t.text;o?n.attr("title",o):n.removeAttr("title")}else this.clear()},o})),t.define("select2/selection/multiple",["jquery","./base","../utils"],(function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,o){var s=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(e){s.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(t){if(!s.isDisabled()){var i=e(this).parent(),o=n.GetData(i[0],"data");s.trigger("unselect",{originalEvent:t,data:o})}}))},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var o=e[i],s=this.selectionContainer(),a=this.display(o,s);s.append(a);var r=o.title||o.text;r&&s.attr("title",r),n.StoreData(s[0],"data",o),t.push(s)}var l=this.$selection.find(".select2-selection__rendered");n.appendMany(l,t)}},i})),t.define("select2/selection/placeholder",["../utils"],(function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t})),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(e,t,n){function i(){}return i.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(e){i._handleClear(e)})),t.on("keypress",(function(e){i._handleKeyboardClear(e,t)}))},i.prototype._handleClear=function(e,t){if(!this.isDisabled()){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();var o=n.GetData(i[0],"data"),s=this.$element.val();this.$element.val(this.placeholder.id);var a={data:o};if(this.trigger("clear",a),a.prevented)this.$element.val(s);else{for(var r=0;r<o.length;r++)if(a={data:o[r]},this.trigger("unselect",a),a.prevented)return void this.$element.val(s);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},i.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},i.prototype.update=function(t,i){if(t.call(this,i),!(0<this.$selection.find(".select2-selection__placeholder").length||0===i.length)){var o=this.options.get("translations").get("removeAllItems"),s=e('<span class="select2-selection__clear" title="'+o()+'">&times;</span>');n.StoreData(s[0],"data",i),this.$selection.find(".select2-selection__rendered").prepend(s)}},i})),t.define("select2/selection/search",["jquery","../utils","../keys"],(function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,i,o){var s=this,a=i.id+"-results";e.call(this,i,o),i.on("open",(function(){s.$search.attr("aria-controls",a),s.$search.trigger("focus")})),i.on("close",(function(){s.$search.val(""),s.$search.removeAttr("aria-controls"),s.$search.removeAttr("aria-activedescendant"),s.$search.trigger("focus")})),i.on("enable",(function(){s.$search.prop("disabled",!1),s._transferTabIndex()})),i.on("disable",(function(){s.$search.prop("disabled",!0)})),i.on("focus",(function(e){s.$search.trigger("focus")})),i.on("results:focus",(function(e){e.data._resultId?s.$search.attr("aria-activedescendant",e.data._resultId):s.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(e){s.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){s._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){if(e.stopPropagation(),s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===s.$search.val()){var i=s.$searchContainer.prev(".select2-selection__choice");if(0<i.length){var o=t.GetData(i[0],"data");s.searchRemoveChoice(o),e.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(e){s.$search.val()&&e.stopPropagation()}));var r=document.documentMode,l=r&&r<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){l?s.$selection.off("input.search input.searchcheck"):s.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){if(l&&"input"===e.type)s.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&s.handleSearch(e)}}))},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.trigger("focus")},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em",this.$search.css("width",e)},i})),t.define("select2/selection/eventRelay",["jquery"],(function(e){function t(){}return t.prototype.bind=function(t,n,i){var o=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];t.call(this,n,i),n.on("*",(function(t,n){if(-1!==e.inArray(t,s)){n=n||{};var i=e.Event("select2:"+t,{params:n});o.$element.trigger(i),-1!==e.inArray(t,a)&&(n.prevented=i.isDefaultPrevented())}}))},t})),t.define("select2/translation",["jquery","require"],(function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n})),t.define("select2/diacritics",[],(function(){return{"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Œ:"OE",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",œ:"oe",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ώ:"ω",ς:"σ","’":"'"}})),t.define("select2/data/base",["../utils"],(function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+e.generateChars(4),i},t})),t.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each((function(){var e=n(this),o=i.item(e);t.push(o)})),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(i){var o=[];(e=[e]).push.apply(e,i);for(var s=0;s<e.length;s++){var a=e[s].id;-1===n.inArray(a,o)&&o.push(a)}t.$element.val(o),t.$element.trigger("input").trigger("change")}));else{var i=e.id;this.$element.val(i),this.$element.trigger("input").trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,n(e.element).is("option"))return e.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(i){for(var o=[],s=0;s<i.length;s++){var a=i[s].id;a!==e.id&&-1===n.inArray(a,o)&&o.push(a)}t.$element.val(o),t.$element.trigger("input").trigger("change")}))}},i.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",(function(e){n.select(e.data)})),e.on("unselect",(function(e){n.unselect(e.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){t.RemoveData(this)}))},i.prototype.query=function(e,t){var i=[],o=this;this.$element.children().each((function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var s=o.item(t),a=o.matches(e,s);null!==a&&i.push(a)}})),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var i;e.children?(i=document.createElement("optgroup")).label=e.text:void 0!==(i=document.createElement("option")).textContent?i.textContent=e.text:i.innerText=e.text,void 0!==e.id&&(i.value=e.id),e.disabled&&(i.disabled=!0),e.selected&&(i.selected=!0),e.title&&(i.title=e.title);var o=n(i),s=this._normalizeItem(e);return s.element=i,t.StoreData(i,"data",s),o},i.prototype.item=function(e){var i={};if(null!=(i=t.GetData(e[0],"data")))return i;if(e.is("option"))i={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){i={text:e.prop("label"),children:[],title:e.prop("title")};for(var o=e.children("option"),s=[],a=0;a<o.length;a++){var r=n(o[a]),l=this.item(r);s.push(l)}i.children=s}return(i=this._normalizeItem(i)).element=e[0],t.StoreData(e[0],"data",i),i},i.prototype._normalizeItem=function(e){return e!==Object(e)&&(e={id:e,text:e}),null!=(e=n.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},{selected:!1,disabled:!1},e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i})),t.define("select2/data/array",["./select","../utils","jquery"],(function(e,t,n){function i(e,t){this._dataToConvert=t.get("data")||[],i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype.bind=function(e,t){i.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},i.prototype.select=function(e){var t=this.$element.find("option").filter((function(t,n){return n.value==e.id.toString()}));0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){var i=this,o=this.$element.find("option"),s=o.map((function(){return i.item(n(this)).id})).get(),a=[];function r(e){return function(){return n(this).val()==e.id}}for(var l=0;l<e.length;l++){var c=this._normalizeItem(e[l]);if(0<=n.inArray(c.id,s)){var d=o.filter(r(c)),u=this.item(d),p=n.extend(!0,{},c,u),h=this.option(p);d.replaceWith(h)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);t.appendMany(f,m)}a.push(f)}}return a},i})),t.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var o=n.ajax(e);return o.then(t),o.fail(i),o}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);function s(){var s=o.transport(o,(function(o){var s=i.processResults(o,e);i.options.get("debug")&&window.console&&console.error&&(s&&s.results&&n.isArray(s.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(s)}),(function(){"status"in s&&(0===s.status||"0"===s.status)||i.trigger("results:message",{message:"errorLoading"})}));i._request=s}"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(s,this.ajaxOptions.delay)):s()},i})),t.define("select2/data/tags",["jquery"],(function(e){function t(t,n,i){var o=i.get("tags"),s=i.get("createTag");void 0!==s&&(this.createTag=s);var a=i.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,n,i),e.isArray(o))for(var r=0;r<o.length;r++){var l=o[r],c=this._normalizeItem(l),d=this.option(c);this.$element.append(d)}}return t.prototype.query=function(e,t,n){var i=this;this._removeOldTags(),null!=t.term&&null==t.page?e.call(this,t,(function e(o,s){for(var a=o.results,r=0;r<a.length;r++){var l=a[r],c=null!=l.children&&!e({results:l.children},!0);if((l.text||"").toUpperCase()===(t.term||"").toUpperCase()||c)return!s&&(o.data=a,void n(o))}if(s)return!0;var d=i.createTag(t);if(null!=d){var u=i.option(d);u.attr("data-select2-tag",!0),i.addOptions([u]),i.insertTag(a,d)}o.results=a,n(o)})):e.call(this,t,n)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){this.$element.find("option[data-select2-tag]").each((function(){this.selected||e(this).remove()}))},t})),t.define("select2/data/tokenizer",["jquery"],(function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){var o=this;n.term=n.term||"";var s=this.tokenizer(n,this.options,(function(t){var n,i=o._normalizeItem(t);if(!o.$element.find("option").filter((function(){return e(this).val()===i.id})).length){var s=o.option(i);s.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([s])}n=i,o.trigger("select",{data:n})}));s.term!==n.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.trigger("focus")),n.term=s.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,o){for(var s=i.get("tokenSeparators")||[],a=n.term,r=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};r<a.length;){var c=a[r];if(-1!==e.inArray(c,s)){var d=a.substr(0,r),u=l(e.extend({},n,{term:d}));null!=u?(o(u),a=a.substr(r+1)||"",r=0):r++}else r++}return{term:a}},t})),t.define("select2/data/minimumInputLength",[],(function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),t.define("select2/data/maximumInputLength",[],(function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),t.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(){i._checkIfMaximumSelected()}))},e.prototype.query=function(e,t,n){var i=this;this._checkIfMaximumSelected((function(){e.call(i,t,n)}))},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current((function(e){var i=null!=e?e.length:0;0<n.maximumSelectionLength&&i>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()}))},e})),t.define("select2/dropdown",["jquery","./utils"],(function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),t.define("select2/dropdown/search",["jquery","../utils"],(function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var o=this,s=n.id+"-results";t.call(this,n,i),this.$search.on("keydown",(function(e){o.trigger("keypress",e),o._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(t){e(this).off("keyup")})),this.$search.on("keyup input",(function(e){o.handleSearch(e)})),n.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",s),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),n.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||o.$search.trigger("focus")})),n.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(o.showSearch(e)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})),n.on("results:focus",(function(e){e.data._resultId?o.$search.attr("aria-activedescendant",e.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n})),t.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;0<=i;i--){var o=t[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},e})),t.define("select2/dropdown/infiniteScroll",["jquery"],(function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",(function(e){i.lastParams=e,i.loading=!0})),t.on("query:append",(function(e){i.lastParams=e,i.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var t=e.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&t){var n=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=n+50&&this.loadMore()}},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t})),t.define("select2/dropdown/attachBody",["jquery","../utils"],(function(e,t){function n(t,n,i){this.$dropdownParent=e(i.get("dropdownParent")||document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(t),i._bindContainerResultHandlers(t)})),t.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var n=this;t.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},n.prototype._attachPositioningHandler=function(n,i){var o=this,s="scroll.select2."+i.id,a="resize.select2."+i.id,r="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each((function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})})),l.on(s,(function(n){var i=t.GetData(this,"select2-scroll-position");e(this).scrollTop(i.y)})),e(window).on(s+" "+a+" "+r,(function(e){o._positionDropdown(),o._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,s="resize.select2."+i.id,a="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(o),e(window).off(o+" "+s+" "+a)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),o=null,s=this.$container.offset();s.bottom=s.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=s.top,a.bottom=s.top+a.height;var r=this.$dropdown.outerHeight(!1),l=t.scrollTop(),c=t.scrollTop()+t.height(),d=l<s.top-r,u=c>s.bottom+r,p={left:s.left,top:a.bottom},h=this.$dropdownParent;"static"===h.css("position")&&(h=h.offsetParent());var f={top:0,left:0};(e.contains(document.body,h[0])||h[0].isConnected)&&(f=h.offset()),p.top-=f.top,p.left-=f.left,n||i||(o="below"),u||!d||n?!d&&u&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(p.top=a.top-f.top-r),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(p)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),t.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,i=0;i<t.length;i++){var o=t[i];o.children?n+=e(o.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e})),t.define("select2/dropdown/selectOnClose",["../utils"],(function(e){function t(){}return t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",(function(e){i._handleSelectOnClose(e)}))},t.prototype._handleSelectOnClose=function(t,n){if(n&&null!=n.originalSelect2Event){var i=n.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var s=e.GetData(o[0],"data");null!=s.element&&s.element.selected||null==s.element&&s.selected||this.trigger("select",{data:s})}},t})),t.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(e){i._selectTriggered(e)})),t.on("unselect",(function(e){i._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e})),t.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}})),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(e,t,n,i,o,s,a,r,l,c,d,u,p,h,f,m,g,v,b,y,w,_,T,E,S,A,C,k,x){function $(){this.reset()}return $.prototype.apply=function(d){if(null==(d=e.extend(!0,{},this.defaults,d)).dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=h:d.dataAdapter=p,0<d.minimumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),0<d.maximumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,b)),0<d.maximumSelectionLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null!=d.query){var u=t(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,u)}if(null!=d.initSelection){var x=t(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,x)}}if(null==d.resultsAdapter&&(d.resultsAdapter=n,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,E)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,T)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,C))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=w;else{var $=c.Decorate(w,_);d.dropdownAdapter=$}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,A)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var I=t(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,I)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,S)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=o:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,r)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var O=t(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,O)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}d.language=this._resolveLanguage(d.language),d.language.push("en");for(var L=[],R=0;R<d.language.length;R++){var N=d.language[R];-1===L.indexOf(N)&&L.push(N)}return d.language=L,d.translations=this._processTranslations(d.language,d.debug),d},$.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return u[e]||e}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function n(i,o){if(""===e.trim(i.term))return o;if(o.children&&0<o.children.length){for(var s=e.extend(!0,{},o),a=o.children.length-1;0<=a;a--)null==n(i,o.children[a])&&s.children.splice(a,1);return 0<s.children.length?s:n(i,s)}var r=t(o.text).toUpperCase(),l=t(i.term).toUpperCase();return-1<r.indexOf(l)?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},$.prototype.applyFromElement=function(e,t){var n=e.language,i=this.defaults.language,o=t.prop("lang"),s=t.closest("[lang]").prop("lang"),a=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(n),this._resolveLanguage(i),this._resolveLanguage(s));return e.language=a,e},$.prototype._resolveLanguage=function(t){if(!t)return[];if(e.isEmptyObject(t))return[];if(e.isPlainObject(t))return[t];var n;n=e.isArray(t)?t:[t];for(var i=[],o=0;o<n.length;o++)if(i.push(n[o]),"string"==typeof n[o]&&0<n[o].indexOf("-")){var s=n[o].split("-")[0];i.push(s)}return i},$.prototype._processTranslations=function(t,n){for(var i=new d,o=0;o<t.length;o++){var s=new d,a=t[o];if("string"==typeof a)try{s=d.loadPath(a)}catch(t){try{a=this.defaults.amdLanguageBase+a,s=d.loadPath(a)}catch(t){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+a+'" could not be automatically loaded. A fallback will be used instead.')}}else s=e.isPlainObject(a)?new d(a):a;i.extend(s)}return i},$.prototype.set=function(t,n){var i={};i[e.camelCase(t)]=n;var o=c._convertData(i);e.extend(!0,this.defaults,o)},new $})),t.define("select2/options",["require","jquery","./defaults","./utils"],(function(e,t,n,i){function o(t,o){if(this.options=t,null!=o&&this.fromElement(o),null!=o&&(this.options=n.applyFromElement(this.options,o)),this.options=n.apply(this.options),o&&o.is("input")){var s=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,s)}}return o.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),i.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),i.StoreData(e[0],"data",i.GetData(e[0],"select2Tags")),i.StoreData(e[0],"tags",!0)),i.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",i.GetData(e[0],"ajaxUrl")),i.StoreData(e[0],"ajax-Url",i.GetData(e[0],"ajaxUrl")));var o={};function s(e,t){return t.toUpperCase()}for(var a=0;a<e[0].attributes.length;a++){var r=e[0].attributes[a].name,l="data-";if(r.substr(0,l.length)==l){var c=r.substring(l.length),d=i.GetData(e[0],c);o[c.replace(/-([a-z])/g,s)]=d}}t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset&&(o=t.extend(!0,{},e[0].dataset,o));var u=t.extend(!0,{},i.GetData(e[0]),o);for(var p in u=i._convertData(u))-1<t.inArray(p,n)||(t.isPlainObject(this.options[p])?t.extend(this.options[p],u[p]):this.options[p]=u[p]);return this},o.prototype.get=function(e){return this.options[e]},o.prototype.set=function(e,t){this.options[e]=t},o})),t.define("select2/core",["jquery","./options","./utils","./keys"],(function(e,t,n,i){var o=function(e,i){null!=n.GetData(e[0],"select2")&&n.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),i=i||{},this.options=new t(i,e),o.__super__.constructor.call(this);var s=e.attr("tabindex")||0;n.StoreData(e[0],"old-tabindex",s),e.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(e,this.options);var r=this.render();this._placeContainer(r);var l=this.options.get("selectionAdapter");this.selection=new l(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,r);var c=this.options.get("dropdownAdapter");this.dropdown=new c(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,r);var d=this.options.get("resultsAdapter");this.results=new d(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){u.trigger("selection:update",{data:e})})),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(e[0],"select2",this),e.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var o=e.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;var s=e.attr("style");if("string"!=typeof s)return null;for(var a=s.split(";"),r=0,l=a.length;r<l;r+=1){var c=a[r].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=t?(this._observer=new t((function(t){e._syncA(),e._syncS(null,t)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",e._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",e._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,!1))},o.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",(function(t,n){e.trigger(t,n)}))},o.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",(function(){t.toggleDropdown()})),this.selection.on("focus",(function(e){t.focus(e)})),this.selection.on("*",(function(i,o){-1===e.inArray(i,n)&&t.trigger(i,o)}))},o.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",(function(t,n){e.trigger(t,n)}))},o.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",(function(t,n){e.trigger(t,n)}))},o.prototype._registerEvents=function(){var e=this;this.on("open",(function(){e.$container.addClass("select2-container--open")})),this.on("close",(function(){e.$container.removeClass("select2-container--open")})),this.on("enable",(function(){e.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){e.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){e.$container.removeClass("select2-container--focus")})),this.on("query",(function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,(function(n){e.trigger("results:all",{data:n,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(n){e.trigger("results:append",{data:n,query:t})}))})),this.on("keypress",(function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(t),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(t,n){var i=!1,o=this;if(!t||!t.target||"OPTION"===t.target.nodeName||"OPTGROUP"===t.target.nodeName){if(n)if(n.addedNodes&&0<n.addedNodes.length)for(var s=0;s<n.addedNodes.length;s++)n.addedNodes[s].selected&&(i=!0);else n.removedNodes&&0<n.removedNodes.length?i=!0:e.isArray(n)&&e.each(n,(function(e,t){if(o._isChangeMutation(e,t))return!(i=!0)}));else i=!0;return i}},o.prototype._syncSubtree=function(e,t){var n=this._isChangeMutation(e,t),i=this;n&&this.dataAdapter.current((function(e){i.trigger("selection:update",{data:e})}))},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in i){var s=i[e],a={prevented:!1,name:e,args:t};if(n.call(this,s,a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},o.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current((function(t){e=t})),e},o.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,(function(e){return e.toString()}))),this.$element.val(n).trigger("input").trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),n.StoreData(t[0],"element",this.$element),t},o})),t.define("jquery-mousewheel",["jquery"],(function(e){return e})),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(e,t,n,i,o){if(null==e.fn.select2){var s=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var i=e.extend(!0,{},t);new n(e(this),i)})),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var i,a=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=e[t].apply(e,a)})),-1<e.inArray(t,s)?this:i}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n})),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n})?i.apply(t,o):i)||(e.exports=s)},89460:(e,t,n)=>{n(58740),n(43838),n(4949),n(9225),n(14632),n(8396),n(7948),n(39028),n(10765),n(38936),n(4496),n(81339),n(67882),n(97865),n(49465),n(69431),n(704),n(16925),self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){var i=n(24),o=n(25),s=String.fromCharCode(30);e.exports={protocol:4,encodePacket:i,encodePayload:function(e,t){var n=e.length,o=new Array(n),a=0;e.forEach((function(e,r){i(e,!1,(function(e){o[r]=e,++a===n&&t(o.join(s))}))}))},decodePacket:o,decodePayload:function(e,t){for(var n=e.split(s),i=[],a=0;a<n.length;a++){var r=o(n[a],t);if(i.push(r),"error"===r.type)break}return i}}},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(0),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,i,r=a(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=r.call(this)).opts=e,t.query=e.query,t.readyState="",t.socket=e.socket,t}return t=l,(n=[{key:"onError",value:function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,this.emit("open")}},{key:"onData",value:function(e){var t=c.decodePacket(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){this.emit("packet",e)}},{key:"onClose",value:function(){this.readyState="closed",this.emit("close")}}])&&o(t.prototype,n),i&&o(t,i),l}(n(1));e.exports=d},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var s=n[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;var p,h=n(1),f=n(30),m=n(15);t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(p=t.PacketType||(t.PacketType={}));var g=function(){function e(){c(this,e)}return u(e,[{key:"encode",value:function(e){return e.type!==p.EVENT&&e.type!==p.ACK||!m.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===p.EVENT?p.BINARY_EVENT:p.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==p.BINARY_EVENT&&e.type!==p.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}},{key:"encodeAsBinary",value:function(e){var t=f.deconstructPacket(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}]),e}();t.Encoder=g;var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=a(n);function n(){return c(this,n),t.call(this)}return u(n,[{key:"add",value:function(e){var t;if("string"==typeof e)(t=this.decodeString(e)).type===p.BINARY_EVENT||t.type===p.BINARY_ACK?(this.reconstructor=new b(t),0===t.attachments&&o(l(n.prototype),"emit",this).call(this,"decoded",t)):o(l(n.prototype),"emit",this).call(this,"decoded",t);else{if(!m.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,o(l(n.prototype),"emit",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,i={type:Number(e.charAt(0))};if(void 0===p[i.type])throw new Error("unknown packet type "+i.type);if(i.type===p.BINARY_EVENT||i.type===p.BINARY_ACK){for(var o=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var s=e.substring(o,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===e.charAt(t+1)){for(var a=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);i.nsp=e.substring(a,t)}else i.nsp="/";var r=e.charAt(t+1);if(""!==r&&Number(r)==r){for(var l=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}i.id=Number(e.substring(l,t+1))}if(e.charAt(++t)){var d=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!n.isPayloadValid(i.type,d))throw new Error("invalid payload");i.data=d}return i}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case p.CONNECT:return"object"===i(t);case p.DISCONNECT:return void 0===t;case p.CONNECT_ERROR:return"string"==typeof t||"object"===i(t);case p.EVENT:case p.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case p.ACK:case p.BINARY_ACK:return Array.isArray(t)}}}]),n}(h);t.Decoder=v;var b=function(){function e(t){c(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return u(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}()},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),s=e.indexOf("]");-1!=o&&-1!=s&&(e=e.substring(0,o)+e.substring(o,s).replace(/:/g,";")+e.substring(s,e.length));for(var a,r,l=n.exec(e||""),c={},d=14;d--;)c[i[d]]=l[d]||"";return-1!=o&&-1!=s&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1),"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1),n}(0,c.path),c.queryKey=(a=c.query,r={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r),c}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;var c=n(20),d=n(14),u=n(5),p=n(16),h=n(31),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,e);var t,n,r,l=a(f);function f(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=l.call(this)).nsps={},n.subs=[],e&&"object"===i(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",n.opts=t,n.reconnection(!1!==t.reconnection),n.reconnectionAttempts(t.reconnectionAttempts||1/0),n.reconnectionDelay(t.reconnectionDelay||1e3),n.reconnectionDelayMax(t.reconnectionDelayMax||5e3),n.randomizationFactor(t.randomizationFactor||.5),n.backoff=new h({min:n.reconnectionDelay(),max:n.reconnectionDelayMax(),jitter:n.randomizationFactor()}),n.timeout(null==t.timeout?2e4:t.timeout),n._readyState="closed",n.uri=e;var o=t.parser||u;return n.encoder=new o.Encoder,n.decoder=new o.Decoder,n._autoConnect=!1!==t.autoConnect,n._autoConnect&&n.open(),n}return t=f,(n=[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=c(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var o=p.on(n,"open",(function(){i.onopen(),e&&e()})),s=p.on(n,"error",(function(n){i.cleanup(),i._readyState="closed",t.emitReserved("error",n),e?e(n):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var a=this._timeout;0===a&&o();var r=setTimeout((function(){o(),n.close(),n.emit("error",new Error("timeout"))}),a);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(o),this.subs.push(s),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(p.on(e,"ping",this.onping.bind(this)),p.on(e,"data",this.ondata.bind(this)),p.on(e,"error",this.onerror.bind(this)),p.on(e,"close",this.onclose.bind(this)),p.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new d.Socket(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var i=n[t];if(this.nsps[i].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var i=setTimeout((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}])&&o(t.prototype,n),r&&o(t,r),f}(n(17).StrictEventEmitter);t.Manager=f},function(e,t,n){var i=n(9),o=n(23),s=n(27),a=n(28);t.polling=function(e){var t=!1,n=!1,a=!1!==e.jsonp;if("undefined"!=typeof location){var r="https:"===location.protocol,l=location.port;l||(l=r?443:80),t=e.hostname!==location.hostname||l!==e.port,n=e.secure!==r}if(e.xdomain=t,e.xscheme=n,"open"in new i(e)&&!e.forceJSONP)return new o(e);if(!a)throw new Error("JSONP disabled");return new s(e)},t.websocket=a},function(e,t,n){var i=n(22),o=n(2);e.exports=function(e){var t=e.xdomain,n=e.xscheme,s=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=n(3),u=n(4),p=n(0),h=n(12),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,i,l=r(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var i=0;this.polling&&(i++,this.once("pollComplete",(function(){--i||n()}))),this.writable||(i++,this.once("drain",(function(){--i||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;p.decodePayload(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,p.encodePayload(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emit("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=h()),this.supportsBinary||e.sid||(e.b64=1),e=u.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}])&&s(t.prototype,n),i&&s(t,i),c}(d);e.exports=f},function(e,t){var n=Object.create(null);n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";var i=Object.create(null);Object.keys(n).forEach((function(e){i[n[e]]=e})),e.exports={PACKET_TYPES:n,PACKET_TYPES_REVERSE:i,ERROR_PACKET:{type:"error",data:"parser error"}}},function(e,t,n){"use strict";var i,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s={},a=0,r=0;function l(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=l(+new Date);return e!==i?(a=0,i=e):e+"."+l(a++)}for(;r<64;r++)s[o[r]]=r;c.encode=l,c.decode=function(e){var t=0;for(r=0;r<e.length;r++)t=64*t+s[e.charAt(r)];return t},e.exports=c},function(e,t){e.exports.pick=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;var p=n(5),h=n(16),f=n(17),m=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,i,s=c(d);function d(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(i=s.call(this)).receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=t,i.ids=0,i.acks={},i.receiveBuffer=[],i.sendBuffer=[],i.connected=!1,i.disconnected=!0,i.flags={},n&&n.auth&&(i.auth=n.auth),i.io._autoConnect&&i.open(),i}return t=d,(n=[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[h.on(e,"open",this.onopen.bind(this)),h.on(e,"packet",this.onpacket.bind(this)),h.on(e,"error",this.onerror.bind(this)),h.on(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(m.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.unshift(e);var o={type:p.PacketType.EVENT,data:n,options:{}};o.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]&&(this.acks[this.ids]=n.pop(),o.id=this.ids++);var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?this.packet(o):this.sendBuffer.push(o)),this.flags={},this}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:p.PacketType.CONNECT,data:t})})):this.packet({type:p.PacketType.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case p.PacketType.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case p.PacketType.EVENT:case p.PacketType.BINARY_EVENT:this.onevent(e);break;case p.PacketType.ACK:case p.PacketType.BINARY_ACK:this.onack(e);break;case p.PacketType.DISCONNECT:this.ondisconnect();break;case p.PacketType.CONNECT_ERROR:var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=o(this._anyListeners.slice());try{for(n.s();!(t=n.n()).done;)t.value.apply(this,e)}catch(e){n.e(e)}finally{n.f()}}r(u(d.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];t.packet({type:p.PacketType.ACK,id:e,data:o})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:p.PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}])&&a(t.prototype,n),i&&a(t,i),d}(f.StrictEventEmitter);t.Socket=g},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;var o="function"==typeof ArrayBuffer,s=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),r="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function l(e){return o&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||a&&e instanceof Blob||r&&e instanceof File}t.isBinary=l,t.hasBinary=function e(t,n){if(!t||"object"!==i(t))return!1;if(Array.isArray(t)){for(var o=0,s=t.length;o<s;o++)if(e(t[o]))return!0;return!1}if(l(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&e(t[a]))return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(u,e);var t,n,i,c=l(u);function u(){return o(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"on",value:function(e,t){return a(d(u.prototype),"on",this).call(this,e,t),this}},{key:"once",value:function(e,t){return a(d(u.prototype),"once",this).call(this,e,t),this}},{key:"emit",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(t=a(d(u.prototype),"emit",this)).call.apply(t,[this,e].concat(i)),this}},{key:"emitReserved",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(t=a(d(u.prototype),"emit",this)).call.apply(t,[this,e].concat(i)),this}},{key:"listeners",value:function(e){return a(d(u.prototype),"listeners",this).call(this,e)}}])&&s(t.prototype,n),i&&s(t,i),u}(n(1));t.StrictEventEmitter=u},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.io=t.Socket=t.Manager=t.protocol=void 0;var o=n(19),s=n(7);e.exports=t=r;var a=t.managers={};function r(e,t){"object"===i(e)&&(t=e,e=void 0),t=t||{};var n,r=o.url(e,t.path||"/socket.io"),l=r.source,c=r.id,d=r.path,u=a[c]&&d in a[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?n=new s.Manager(l,t):(a[c]||(a[c]=new s.Manager(l,t)),n=a[c]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}t.io=r;var l=n(5);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.connect=r;var c=n(7);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return c.Manager}});var d=n(14);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return d.Socket}}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;var i=n(6);t.url=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),o=i(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port+t,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}},function(e,t,n){var i=n(21);e.exports=function(e,t){return new i(e,t)},e.exports.Socket=i,e.exports.protocol=i.protocol,e.exports.Transport=n(3),e.exports.transports=n(8),e.exports.parser=n(0)},function(e,t,n){function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(8),p=n(1),h=n(0),f=n(6),m=n(4),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(p,e);var t,n,c,d=l(p);function p(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,p),t=d.call(this),e&&"object"===o(e)&&(n=e,e=null),e?(e=f(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=f(n.host).host),t.secure=null!=n.secure?n.secure:"undefined"!=typeof location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=t.secure?"443":"80"),t.hostname=n.hostname||("undefined"!=typeof location?location.hostname:"localhost"),t.port=n.port||("undefined"!=typeof location&&location.port?location.port:t.secure?443:80),t.transports=n.transports||["polling","websocket"],t.readyState="",t.writeBuffer=[],t.prevBufferLen=0,t.opts=i({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),t.opts.path=t.opts.path.replace(/\/$/,"")+"/","string"==typeof t.opts.query&&(t.opts.query=m.decode(t.opts.query)),t.id=null,t.upgrades=null,t.pingInterval=null,t.pingTimeout=null,t.pingTimeoutTimer=null,"function"==typeof addEventListener&&(t.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){t.transport&&(t.transport.removeAllListeners(),t.transport.close())}),!1),"localhost"!==t.hostname&&(t.offlineEventListener=function(){t.onClose("transport close")},addEventListener("offline",t.offlineEventListener,!1))),t.open(),t}return t=p,(n=[{key:"createTransport",value:function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=h.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=i({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new u[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&p.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void setTimeout((function(){t.emit("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){var t=this,n=this.createTransport(e,{probe:1}),i=!1;p.priorWebsocketSuccess=!1;var o=function(){i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emit("upgrading",n),!n)return;p.priorWebsocketSuccess="websocket"===n.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(d(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emit("upgrade",n),n=null,t.upgrading=!1,t.flush())}))}else{var o=new Error("probe error");o.transport=n.name,t.emit("upgradeError",o)}})))};function s(){i||(i=!0,d(),n.close(),n=null)}var a=function(e){var i=new Error("probe error: "+e);i.transport=n.name,s(),t.emit("upgradeError",i)};function r(){a("transport closed")}function l(){a("socket closed")}function c(e){n&&e.name!==n.name&&s()}var d=function(){n.removeListener("open",o),n.removeListener("error",a),n.removeListener("close",r),t.removeListener("close",l),t.removeListener("upgrading",c)};n.once("open",o),n.once("error",a),n.once("close",r),this.once("close",l),this.once("upgrading",c),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",p.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}}},{key:"onHandshake",value:function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()},i=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?i():t()})):this.upgrading?i():t()),this}},{key:"onError",value:function(e){p.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}])&&a(t.prototype,n),c&&a(t,c),p}(p);g.priorWebsocketSuccess=!1,g.protocol=h.protocol,e.exports=g},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=n(9),f=n(10),m=n(1),g=n(13).pick,v=n(2);function b(){}var y=null!=new h({xdomain:!1}).responseType,w=function(e){l(n,e);var t=d(n);function n(e){var i;if(s(this,n),i=t.call(this,e),"undefined"!=typeof location){var o="https:"===location.protocol,a=location.port;a||(a=o?443:80),i.xd="undefined"!=typeof location&&e.hostname!==location.hostname||a!==e.port,i.xs=e.secure!==o}var r=e&&e.forceBase64;return i.supportsBinary=y&&!r,i}return r(n,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(e,{xd:this.xd,xs:this.xs},this.opts),new _(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(function(e){n.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t}}]),n}(f),_=function(e){l(n,e);var t=d(n);function n(e,i){var o;return s(this,n),(o=t.call(this)).opts=i,o.method=i.method||"GET",o.uri=e,o.async=!1!==i.async,o.data=void 0!==i.data?i.data:null,o.create(),o}return r(n,[{key:"create",value:function(){var e=this,t=g(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var i=this.xhr=new h(t);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var o in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this.opts.extraHeaders[o])}catch(e){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{i.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),this.hasXDR()?(i.onload=function(){e.onLoad()},i.onerror=function(){e.onError(i.responseText)}):i.onreadystatechange=function(){4===i.readyState&&(200===i.status||1223===i.status?e.onLoad():setTimeout((function(){e.onError("number"==typeof i.status?i.status:0)}),0))},i.send(this.data)}catch(t){return void setTimeout((function(){e.onError(t)}),0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=b:this.xhr.onreadystatechange=b,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"hasXDR",value:function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",value:function(){this.cleanup()}}]),n}(m);function T(){for(var e in _.requests)_.requests.hasOwnProperty(e)&&_.requests[e].abort()}_.requestsCount=0,_.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",T):"function"==typeof addEventListener&&addEventListener("onpagehide"in v?"pagehide":"unload",T,!1)),e.exports=w,e.exports.Request=_},function(e,t,n){var i=n(11).PACKET_TYPES,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,a=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=function(e,t,n){var r,l=e.type,c=e.data;return o&&c instanceof Blob?t?n(c):a(c,n):s&&(c instanceof ArrayBuffer||(r=c,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(c instanceof ArrayBuffer?c:c.buffer):a(new Blob([c]),n):n(i[l]+(c||""))}},function(e,t,n){var i,o=n(11),s=o.PACKET_TYPES_REVERSE,a=o.ERROR_PACKET;"function"==typeof ArrayBuffer&&(i=n(26));var r=function(e,t){if(i){var n=i.decode(e);return l(n,t)}return{base64:!0,data:e}},l=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e};e.exports=function(e,t){if("string"!=typeof e)return{type:"message",data:l(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:r(e.substring(1),t)}:s[n]?e.length>1?{type:s[n],data:e.substring(1)}:{type:s[n]}:a}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),o=i.length,s="";for(n=0;n<o;n+=3)s+=e[i[n]>>2],s+=e[(3&i[n])<<4|i[n+1]>>4],s+=e[(15&i[n+1])<<2|i[n+2]>>6],s+=e[63&i[n+2]];return o%3==2?s=s.substring(0,s.length-1)+"=":o%3==1&&(s=s.substring(0,s.length-2)+"=="),s},t.decode=function(t){var n,i,o,s,a,r=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var d=new ArrayBuffer(r),u=new Uint8Array(d);for(n=0;n<l;n+=4)i=e.indexOf(t[n]),o=e.indexOf(t[n+1]),s=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),u[c++]=i<<2|o>>4,u[c++]=(15&o)<<4|s>>2,u[c++]=(3&s)<<6|63&a;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p=n(10),h=n(2),f=/\n/g,m=/\\n/g,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,n,i,l=r(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this,e)).query=t.query||{},u||(u=h.___eio=h.___eio||[]),t.index=u.length,u.push(t.onData.bind(c(t))),t.query.j=t.index,t}return t=p,(n=[{key:"supportsBinary",get:function(){return!1}},{key:"doClose",value:function(){this.script&&(this.script.onerror=function(){},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s(d(p.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}},{key:"doWrite",value:function(e,t){var n,i=this;if(!this.form){var o=document.createElement("form"),s=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=a,o.method="POST",o.setAttribute("accept-charset","utf-8"),s.name="d",o.appendChild(s),document.body.appendChild(o),this.form=o,this.area=s}function r(){l(),t()}this.form.action=this.uri();var l=function(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=i.iframeId,n.src="javascript:0"}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n};l(),e=e.replace(m,"\\\n"),this.area.value=e.replace(f,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&r()}:this.iframe.onload=r}}])&&o(t.prototype,n),i&&o(t,i),p}(p);e.exports=g},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(3),d=n(0),u=n(4),p=n(12),h=n(13).pick,f=n(29),m=f.WebSocket,g=f.usingBrowserWebSocket,v=f.defaultBinaryType,b=f.nextTick,y="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,i,r=a(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=r.call(this,e)).supportsBinary=!e.forceBase64,t}return t=l,(n=[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=y?{}:h(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=g&&!y?t?new m(e,t):new m(e):new m(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||v,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var i=e[n],o=n===e.length-1;d.encodePacket(i,t.supportsBinary,(function(e){var n={};g||(i.options&&(n.compress=i.options.compress),t.opts.perMessageDeflate&&("string"==typeof e?Buffer.byteLength(e):e.length)<t.opts.perMessageDeflate.threshold&&(n.compress=!1));try{g?t.ws.send(e):t.ws.send(e,n)}catch(e){}o&&b((function(){t.writable=!0,t.emit("drain")}))}))},i=0;i<e.length;i++)n(i)}},{key:"onClose",value:function(){c.prototype.onClose.call(this)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=p()),this.supportsBinary||(e.b64=1),(e=u.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}},{key:"check",value:function(){return!(!m||"__initialize"in m&&this.name===l.prototype.name)}}])&&o(t.prototype,n),i&&o(t,i),l}(c);e.exports=w},function(e,t,n){var i=n(2),o="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e){return setTimeout(e,0)};e.exports={WebSocket:i.WebSocket||i.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:o}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;var o=n(15);t.deconstructPacket=function(e){var t=[],n=e.data,s=e;return s.data=function e(t,n){if(!t)return t;if(o.isBinary(t)){var s={_placeholder:!0,num:n.length};return n.push(t),s}if(Array.isArray(t)){for(var a=new Array(t.length),r=0;r<t.length;r++)a[r]=e(t[r],n);return a}if("object"===i(t)&&!(t instanceof Date)){var l={};for(var c in t)t.hasOwnProperty(c)&&(l[c]=e(t[c],n));return l}return t}(n,t),s.attachments=t.length,{packet:s,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(Array.isArray(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],n);else if("object"===i(t))for(var s in t)t.hasOwnProperty(s)&&(t[s]=e(t[s],n));return t}(e.data,t),e.attachments=void 0,e}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])},43945:(e,n,i)=>{i(43838),window.makePhotoSwiper=function(e){let n=empty(e)?".splynx-photo-swiper":e,i=function(e){let t=(e=e||window.event).target||e.srcElement;if("pws-open-froala"==t.className){let e=$(this).find(`.pws-open[data-pws-url="${t.getAttribute("data-pws-url")}"]`);e.length>0&&(t=e[0])}let i=t.getAttribute("data-pws-type");if("iframe"===i||"image"===i){let e=$(t).closest(n),i=0;return e.find(".pws-open[data-is-pws]").each(((e,n)=>{if($(n).attr("data-is-pws")&&t===n)return i=e,!1})),s(i,e),!1}},o=e=>e.find(".pws-open").parent("[data-pws-download-all-url]").data("pws-download-all-url");var s=function(e,n){let i=document.querySelector(".pswp"),s=function(e){let n=[];return e.find(".pws-open").each(((e,i)=>{let o,s=$(i);switch(s.data("pws-type")){case"iframe":var a=$('<iframe frameborder="0" width="100%" height="100%" class="embed-responsive-item" style="background: url(/images/loading.gif) no-repeat center center; margin-top: 44px;"></iframe>').attr("src","about:blank").attr("data-src",s.data("pws-url")).prop("outerHTML"),r=$(`<a class="btn btn-primary" onclick="download_by_iframe('${s.data("pws-download-url")}')"></a>`).text(t("common","Download"));r.css({position:"fixed",top:`calc(50% - ${$(".pswp-hidden-download-button").outerHeight()/2}px)`,right:`calc(50% - ${$(".pswp-hidden-download-button").outerWidth()/2}px)`}),o={html:$("html").hasClass("mobile")?r.prop("outerHTML"):a};break;case"image":var l=s.data("pws-ratio").split("x");o={src:s.data("pws-url"),w:parseInt(l[0],10),h:parseInt(l[1],10)}}s.get(0).hasAttribute("data-pws-download-url")&&(o.download=s.data("pws-download-url")),s.get(0).hasAttribute("data-pws-url")&&(o.view=s.data("pws-url")),null!=o&&(o.type=s.data("pws-type"),o.title=s.data("pws-title"),o.el=s.get(0),n.push(o))})),n}(n),a={bgOpacity:.8,closeOnScroll:!1,closeOnVerticalDrag:!1,mouseUsed:!0,history:!1,shareButtons:[{id:"open_new_tab",label:t("common","Open in new window"),url:"{{raw_image_url}}"},{id:"download",label:t("common","Download"),url:"{{raw_image_url}}",download:!0}],index:parseInt(e,10)};(e=>e.find(".pws-open").parent("[data-pws-is-download-all-url]").data("pws-is-download-all-url"))(n)&&a.shareButtons.push({id:"download_all",label:t("common","Download All"),url:o(n),download:!0});let r=new window.PhotoSwipe(i,window.PhotoSwipeUI_Default,s,a);r.listen("afterChange",(()=>{$(".pswp iframe").prop("src","about:blank"),$(".pswp iframe").each(((e,t)=>{$(t).prop("outerHTML")==r.currItem.html&&$(t).prop("src",$(t).data("src"))})),$(".pswp__button--share").on("click",(()=>{$(".pswp__share-tooltip").find(".pswp__share--open_new_tab").attr("href",r.currItem.view),$(".pswp__share-tooltip").find(".pswp__share--download").attr("href",r.currItem.view)}))})),r.init()};document.querySelectorAll(n).forEach((e=>{e.onclick=i}))}},85899:()=>{let e=null;!function(){const n="tabs_refresh",i="tabs_state";let o=function(e,t){localStorage.setItem(e,t)},s=function(e){return localStorage.getItem(e)},a=function(e){let t=$(e).attr("id");return $(e).attr("data-tabs-name")&&(t=$(e).attr("data-tabs-name")),t};window.addEventListener("beforeunload",(()=>{null!==e&&clearTimeout(e),o(n,"1")}));let r=function(e,t){return function(){let n=a(t),r=$(t).tabs("option","active"),l=s(i);return l=null==l?{}:JSON.parse(l),l[n]=r,o(i,JSON.stringify(l)),e.apply(this,arguments)}},l=function(e){let n=!1;return function(i,o){return!n&&isHaveUnsavedData(o.oldPanel)&&(window.showUnsavedDataDialog(o.oldPanel,(()=>{n=!0,forgetUnsavedData(o.oldPanel);let e=$(o.newTab.get(0)).index();$(i.target).tabs("option","active",e)}),null,t("common","Are you sure that you want to leave tab? All unsaved data will be lost!")),i.preventDefault()),n&&(n=!1),e.apply(this,arguments)}},c=function(e){return function(n,i){return i.panel.html(`<div class="main-tab-holder ps-20 pe-20">${t("common","Loading...")}</div>`),i.jqXHR.fail((()=>{i.panel.html(`<div class="main-tab-holder ps-20 pe-20">${t("common","Couldn't load!")}</div>`)})),e.apply(this,arguments)}},d=function(t){let r=s(i);if(null!=r){let l=a(t);r=JSON.parse(r);let c=s(n);c="1"===c;let d=$(t).is("[data-persistent-state]");if(c||d){if(void 0!==r[l])return r[l]}else r[l]=0,o(i,JSON.stringify(r));null!==e&&clearTimeout(e),e=setTimeout((()=>{o(n,"0")}),5e3)}return 0};var u;$.fn.tabs=(u=$.fn.tabs,function(){let e=Array.from(arguments);return 0===e.length&&(e[0]={}),e[0]instanceof Object&&(void 0===e[0].active&&(e[0].active=d(this)),void 0===e[0].activate?e[0].activate=r((()=>{}),this):e[0].activate=r(e[0].activate,this),void 0===e[0].beforeActivate?e[0].beforeActivate=l((()=>{})):e[0].beforeActivate=l(e[0].beforeActivate),void 0===e[0].beforeLoad?e[0].beforeLoad=c((()=>{})):e[0].beforeLoad=c(e[0].beforeLoad)),u.apply(this,e)})}()},39977:(e,t,n)=>{n(39028),function(e){e.fn.timeSlider=function(t){var n=this,i={range:!0,step:15,min:0,max:1440,tickInterval:120,tickLabels:null,values:null,slide:function(e,t){var n=s(t.values[0]),i=s(t.values[1]);o.flipInput.is(":checked")?(o.fromInput.val(i),o.toInput.val(n)):(o.fromInput.val(n),o.toInput.val(i));r()}},o=e.extend({timeFormat:"24H",sliderOptions:null,flipInput:null,textInput:null,fromInput:null,toInput:null,textTemplate:"<b>From</b><span class='text-primary'> <b>{valueFrom}</span></b> <b>To</b> <span class='text-primary'><b>{valueTo}</span></b>"},t);function s(e,t){var n=e%60,i=Math.floor(e/60),s="";return n=(n<10?"0":"")+n,i=(i<10?"0":"")+i,t&&"12H"===o.timeFormat&&(s=i>12?" PM":" AM",24===i&&(s=" AM"),12===i&&(s=" PM"),i>12&&(i-=12),0===i&&(i=12)),i+":"+n+s}function a(e){return e=e.split(":"),60*parseInt(e[0],10)+parseInt(e[1],10)}function r(){var e=o.fromInput.val(),t=o.toInput.val();e=s(a(e),1),t=s(a(t),1);var n=o.textTemplate.replace("{valueFrom}",e).replace("{valueTo}",t);o.textInput.html(n)}o.sliderOptions=e.extend(i,o.sliderOptions),null===o.sliderOptions.tickLabels&&(o.sliderOptions.tickLabels=function(){for(var e=Object(),t=o.sliderOptions.min;t<=o.sliderOptions.max;t+=o.sliderOptions.step)e[t]=s(t,1);return e}()),null===o.sliderOptions.values&&(o.sliderOptions.values=function(){var e=o.fromInput.val(),t=o.toInput.val();if(e>t){var n=t;t=e,e=n,o.flipInput.prop("checked",!0)}return[a(e),a(t)]}());o.flipInput.change((function(){var e=o.fromInput.val();o.fromInput.val(o.toInput.val()),o.toInput.val(e),r(),o.flipInput.prop("checked")?(n.css({background:"#a2c4fb"}),n.find(".ui-slider-range").css({background:"#ccc url(/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x"})):(n.css({background:"#ccc url(/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x"}),n.find(".ui-slider-range").css({background:"#a2c4fb"}))})),this.labeledslider(o.sliderOptions),r()}}(jQuery)},36376:(e,t,n)=>{n(58740),n(43838),n(39028),e.exports=function e(t,n,i){function o(a,r){if(!n[a]){if(!t[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return o(t[a][1][e]||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var s=void 0,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("./utils");var i=r(e("./TributeEvents")),o=r(e("./TributeMenuEvents")),s=r(e("./TributeRange")),a=r(e("./TributeSearch"));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,o=!1,s=void 0;try{for(var a,r=e[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(t){var n=this,r=t.values,l=void 0===r?null:r,c=t.iframe,d=void 0===c?null:c,u=t.selectClass,p=void 0===u?"highlight":u,h=t.trigger,f=void 0===h?"@":h,m=t.autocompleteMode,g=void 0!==m&&m,v=t.selectTemplate,b=void 0===v?null:v,y=t.menuItemTemplate,w=void 0===y?null:y,_=t.lookup,T=void 0===_?"key":_,E=t.fillAttr,S=void 0===E?"value":E,A=t.collection,C=void 0===A?null:A,k=t.menuContainer,x=void 0===k?null:k,$=t.noMatchTemplate,I=void 0===$?null:$,O=t.requireLeadingSpace,L=void 0===O||O,R=t.allowSpaces,N=void 0!==R&&R,D=t.replaceTextSuffix,M=void 0===D?null:D,P=t.positionMenu,F=void 0===P||P,B=t.spaceSelectsMatch,H=void 0!==B&&B,j=t.searchOpts,U=void 0===j?{}:j,W=t.menuItemLimit,K=void 0===W?null:W;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.autocompleteMode=g,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=x,this.allowSpaces=N,this.replaceTextSuffix=M,this.positionMenu=F,this.hasTrailingSpace=!1,this.spaceSelectsMatch=H,this.autocompleteMode&&(f="",N=!1),l)this.collection=[{trigger:f,iframe:d,selectClass:p,selectTemplate:(b||e.defaultSelectTemplate).bind(this),menuItemTemplate:(w||e.defaultMenuItemTemplate).bind(this),noMatchTemplate:"function"==typeof I?I.bind(n):I||function(){return""}.bind(n),lookup:T,fillAttr:S,values:l,requireLeadingSpace:L,searchOpts:U,menuItemLimit:K}];else{if(!C)throw new Error("[Tribute] No collection specified.");this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=C.map((function(t){return{trigger:t.trigger||f,iframe:t.iframe||d,selectClass:t.selectClass||p,selectTemplate:(t.selectTemplate||e.defaultSelectTemplate).bind(n),menuItemTemplate:(t.menuItemTemplate||e.defaultMenuItemTemplate).bind(n),noMatchTemplate:"function"==typeof I?I.bind(n):null,lookup:t.lookup||T,fillAttr:t.fillAttr||S,values:t.values,requireLeadingSpace:t.requireLeadingSpace,searchOpts:t.searchOpts||U,menuItemLimit:t.menuItemLimit||K}}))}new s.default(this),new i.default(this),new o.default(this),new a.default(this)}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"triggers",value:function(){return this.collection.map((function(e){return e.trigger}))}},{key:"attach",value:function(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array)for(var t=e.length,n=0;n<t;++n)this._attach(e[n]);else this._attach(e)}},{key:"_attach",value:function(e){e.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+e.nodeName),this.ensureEditable(e),this.events.bind(e),e.setAttribute("data-tribute",!0)}},{key:"ensureEditable",value:function(t){if(-1===e.inputTypes().indexOf(t.nodeName)){if(!t.contentEditable)throw new Error("[Tribute] Cannot bind to "+t.nodeName);t.contentEditable=!0}}},{key:"createMenu",value:function(){var e=this.range.getDocument().createElement("div"),t=this.range.getDocument().createElement("ul");return e.className="tribute-container",e.appendChild(t),this.menuContainer?this.menuContainer.appendChild(e):this.range.getDocument().body.appendChild(e)}},{key:"showMenuFor",value:function(e,t){var n=this;if(!this.isActive||this.current.element!==e||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(),e.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var i=function(e){if(n.isActive){var i=n.search.filter(n.current.mentionText,e,{pre:n.current.collection.searchOpts.pre||"<span>",post:n.current.collection.searchOpts.post||"</span>",skip:n.current.collection.searchOpts.skip,extract:function(e){if("string"==typeof n.current.collection.lookup)return e[n.current.collection.lookup];if("function"==typeof n.current.collection.lookup)return n.current.collection.lookup(e,n.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});n.current.collection.menuItemLimit&&(i=i.slice(0,n.current.collection.menuItemLimit)),n.current.filteredItems=i;var o=n.menu.querySelector("ul");if(n.range.positionMenuAtCaret(t),!i.length){var s=new CustomEvent("tribute-no-match",{detail:n.menu});return n.current.element.dispatchEvent(s),void("function"==typeof n.current.collection.noMatchTemplate&&!n.current.collection.noMatchTemplate()||!n.current.collection.noMatchTemplate?n.hideMenu():"function"==typeof n.current.collection.noMatchTemplate?o.innerHTML=n.current.collection.noMatchTemplate():o.innerHTML=n.current.collection.noMatchTemplate)}o.innerHTML="";var a=n.range.getDocument().createDocumentFragment();i.forEach((function(e,t){var i=n.range.getDocument().createElement("li");i.setAttribute("data-index",t),i.addEventListener("mousemove",(function(e){var t=l(n._findLiTarget(e.target),2),i=(t[0],t[1]);0!==e.movementY&&n.events.setActiveLi(i)})),n.menuSelected===t&&(i.className=n.current.collection.selectClass),i.innerHTML=n.current.collection.menuItemTemplate(e),a.appendChild(i)})),o.appendChild(a)}};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,i):i(this.current.collection.values)}}},{key:"_findLiTarget",value:function(e){if(!e)return[];var t=e.getAttribute("data-index");return t?[e,t]:this._findLiTarget(e.parentNode)}},{key:"showMenuForCollection",value:function(e,t){e!==document.activeElement&&this.placeCaretAtEnd(e),this.current.collection=this.collection[t||0],this.current.externalTrigger=!0,(this.current.element=e).isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(e,this.current.collection.trigger),this.showMenuFor(e)}},{key:"placeCaretAtEnd",value:function(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(e),i.collapse(!1),i.select()}}},{key:"insertTextAtCursor",value:function(e){var t,n;(n=(t=window.getSelection()).getRangeAt(0)).deleteContents();var i=document.createTextNode(e);n.insertNode(i),n.selectNodeContents(i),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}},{key:"insertAtCaret",value:function(e,t){var n=e.scrollTop,i=e.selectionStart,o=e.value.substring(0,i),s=e.value.substring(e.selectionEnd,e.value.length);e.value=o+t+s,i+=t.length,e.selectionStart=i,e.selectionEnd=i,e.focus(),e.scrollTop=n}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}},{key:"selectItemAtIndex",value:function(e,t){if("number"==typeof(e=parseInt(e))&&!isNaN(e)){var n=this.current.filteredItems[e],i=this.current.collection.selectTemplate(n);null!==i&&this.replaceText(i,t,n)}}},{key:"replaceText",value:function(e,t,n){this.range.replaceTriggerText(e,!0,!0,t,n)}},{key:"_append",value:function(e,t,n){if("function"==typeof e.values)throw new Error("Unable to append to values, as it is a function.");e.values=n?t:e.values.concat(t)}},{key:"append",value:function(e,t,n){var i=parseInt(e);if("number"!=typeof i)throw new Error("please provide an index for the collection to update.");var o=this.collection[i];this._append(o,t,n)}},{key:"appendCurrent",value:function(e,t){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,e,t)}},{key:"detach",value:function(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array)for(var t=e.length,n=0;n<t;++n)this._detach(e[n]);else this._detach(e)}},{key:"_detach",value:function(e){var t=this;this.events.unbind(e),e.tributeMenu&&this.menuEvents.unbind(e.tributeMenu),setTimeout((function(){e.removeAttribute("data-tribute"),t.isActive=!1,e.tributeMenu&&e.tributeMenu.remove()}))}}],[{key:"defaultSelectTemplate",value:function(e){return void 0===e?null:this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+e.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+e.original[this.current.collection.fillAttr]}},{key:"defaultMenuItemTemplate",value:function(e){return e.string}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"]}}]),e}();n.default=d,t.exports=n.default},{"./TributeEvents":2,"./TributeMenuEvents":3,"./TributeRange":4,"./TributeSearch":5,"./utils":7}],2:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tribute=t,this.tribute.events=this}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"bind",value:function(e){e.boundKeydown=this.keydown.bind(e,this),e.boundKeyup=this.keyup.bind(e,this),e.boundInput=this.input.bind(e,this),e.addEventListener("keydown",e.boundKeydown,!1),e.addEventListener("keyup",e.boundKeyup,!1),e.addEventListener("input",e.boundInput,!1)}},{key:"unbind",value:function(e){e.removeEventListener("keydown",e.boundKeydown,!1),e.removeEventListener("keyup",e.boundKeyup,!1),e.removeEventListener("input",e.boundInput,!1),delete e.boundKeydown,delete e.boundKeyup,delete e.boundInput}},{key:"keydown",value:function(t,n){t.shouldDeactivate(n)&&(t.tribute.isActive=!1,t.tribute.hideMenu());var i=this;t.commandEvent=!1,e.keys().forEach((function(e){e.key===n.keyCode&&(t.commandEvent=!0,t.callbacks()[e.value.toLowerCase()](n,i))}))}},{key:"input",value:function(e,t){e.inputEvent=!0,e.keyup.call(this,e,t)}},{key:"click",value:function(e,t){var n=e.tribute;if(n.menu&&n.menu.contains(t.target)){var i=t.target;for(t.preventDefault(),t.stopPropagation();"li"!==i.nodeName.toLowerCase();)if(!(i=i.parentNode)||i===n.menu)throw new Error("cannot find the <li> container for the click");n.selectItemAtIndex(i.getAttribute("data-index"),t),n.hideMenu()}else n.current.element&&!n.current.externalTrigger&&(n.current.externalTrigger=!1,setTimeout((function(){return n.hideMenu()})))}},{key:"keyup",value:function(e,t){if(e.inputEvent&&(e.inputEvent=!1),e.updateSelection(this),27!==t.keyCode){if(!e.tribute.allowSpaces&&e.tribute.hasTrailingSpace)return e.tribute.hasTrailingSpace=!1,e.commandEvent=!0,void e.callbacks().space(t,this);if(!e.tribute.isActive)if(e.tribute.autocompleteMode)e.callbacks().triggerChar(t,this,"");else{var n=e.getKeyCode(e,this,t);if(isNaN(n)||!n)return;var i=e.tribute.triggers().find((function(e){return e.charCodeAt(0)===n}));void 0!==i&&e.callbacks().triggerChar(t,this,i)}((e.tribute.current.trigger||e.tribute.autocompleteMode)&&!1===e.commandEvent||e.tribute.isActive&&8===t.keyCode)&&e.tribute.showMenuFor(this,!0)}}},{key:"shouldDeactivate",value:function(t){if(!this.tribute.isActive)return!1;if(0!==this.tribute.current.mentionText.length)return!1;var n=!1;return e.keys().forEach((function(e){t.keyCode===e.key&&(n=!0)})),!n}},{key:"getKeyCode",value:function(e,t,n){var i=e.tribute,o=i.range.getTriggerInfo(!1,i.hasTrailingSpace,!0,i.allowSpaces,i.autocompleteMode);return!!o&&o.mentionTriggerChar.charCodeAt(0)}},{key:"updateSelection",value:function(e){this.tribute.current.element=e;var t=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);t&&(this.tribute.current.selectedPath=t.mentionSelectedPath,this.tribute.current.mentionText=t.mentionText,this.tribute.current.selectedOffset=t.mentionSelectedOffset)}},{key:"callbacks",value:function(){var e=this;return{triggerChar:function(t,n,i){var o=e.tribute;o.current.trigger=i;var s=o.collection.find((function(e){return e.trigger===i}));o.current.collection=s,o.inputEvent&&o.showMenuFor(n,!0)},enter:function(t,n){e.tribute.isActive&&e.tribute.current.filteredItems&&(t.preventDefault(),t.stopPropagation(),setTimeout((function(){e.tribute.selectItemAtIndex(e.tribute.menuSelected,t),e.tribute.hideMenu()}),0))},escape:function(t,n){e.tribute.isActive&&(t.preventDefault(),t.stopPropagation(),e.tribute.isActive=!1,e.tribute.hideMenu())},tab:function(t,n){e.callbacks().enter(t,n)},space:function(t,n){e.tribute.isActive&&(e.tribute.spaceSelectsMatch?e.callbacks().enter(t,n):e.tribute.allowSpaces||(t.stopPropagation(),setTimeout((function(){e.tribute.hideMenu(),e.tribute.isActive=!1}),0)))},up:function(t,n){if(e.tribute.isActive&&e.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();var i=e.tribute.current.filteredItems.length,o=e.tribute.menuSelected;o<i&&0<o?(e.tribute.menuSelected--,e.setActiveLi()):0===o&&(e.tribute.menuSelected=i-1,e.setActiveLi(),e.tribute.menu.scrollTop=e.tribute.menu.scrollHeight)}},down:function(t,n){if(e.tribute.isActive&&e.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();var i=e.tribute.current.filteredItems.length-1,o=e.tribute.menuSelected;o<i?(e.tribute.menuSelected++,e.setActiveLi()):i===o&&(e.tribute.menuSelected=0,e.setActiveLi(),e.tribute.menu.scrollTop=0)}},delete:function(t,n){e.tribute.isActive&&e.tribute.current.mentionText.length<1?e.tribute.hideMenu():e.tribute.isActive&&e.tribute.showMenuFor(n)}}}},{key:"setActiveLi",value:function(e){var t=this.tribute.menu.querySelectorAll("li"),n=t.length>>>0;e&&(this.tribute.menuSelected=parseInt(e));for(var i=0;i<n;i++){var o=t[i];if(i===this.tribute.menuSelected){o.classList.add(this.tribute.current.collection.selectClass);var s=o.getBoundingClientRect(),a=this.tribute.menu.getBoundingClientRect();if(s.bottom>a.bottom){var r=s.bottom-a.bottom;this.tribute.menu.scrollTop+=r}else if(s.top<a.top){var l=a.top-s.top;this.tribute.menu.scrollTop-=l}}else o.classList.remove(this.tribute.current.collection.selectClass)}}},{key:"getFullHeight",value:function(e,t){var n=e.getBoundingClientRect().height;if(t){var i=e.currentStyle||window.getComputedStyle(e);return n+parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}}],[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}}]),e}();n.default=o,t.exports=n.default},{}],3:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tribute=t,(this.tribute.menuEvents=this).menu=this.tribute.menu}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"bind",value:function(e){var t=this;this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce((function(){t.tribute.isActive&&t.tribute.showMenuFor(t.tribute.current.element,!1)}),300,!1),this.windowResizeEvent=this.debounce((function(){t.tribute.isActive&&t.tribute.range.positionMenuAtCaret(!0)}),300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}},{key:"unbind",value:function(e){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}},{key:"debounce",value:function(e,t,n){var i,o=this,s=arguments;return function(){var a=o,r=s,l=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(a,r)}),t),l&&e.apply(a,r)}}}]),e}();n.default=o,t.exports=n.default},{}],4:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tribute=t,this.tribute.range=this}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"getDocument",value:function(){var e;return this.tribute.current.collection&&(e=this.tribute.current.collection.iframe),e?e.contentWindow.document:document}},{key:"positionMenuAtCaret",value:function(e){var t,n=this,i=this.tribute.current,o=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==o){if(!this.tribute.positionMenu)return void(this.tribute.menu.style.cssText="display: block;");t=this.isContentEditable(i.element)?this.getContentEditableCaretPosition(o.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,o.mentionPosition),this.tribute.menu.style.cssText="top: ".concat(t.top,"px;\n                                     left: ").concat(t.left,"px;\n                                     right: ").concat(t.right,"px;\n                                     bottom: ").concat(t.bottom,"px;\n                                     position: absolute;\n                                     display: block;"),"auto"===t.left&&(this.tribute.menu.style.left="auto"),"auto"===t.top&&(this.tribute.menu.style.top="auto"),e&&this.scrollIntoView(),window.setTimeout((function(){var i={width:n.tribute.menu.offsetWidth,height:n.tribute.menu.offsetHeight},o=n.isMenuOffScreen(t,i),s=window.innerWidth>i.width&&(o.left||o.right),a=window.innerHeight>i.height&&(o.top||o.bottom);(s||a)&&(n.tribute.menu.style.cssText="display: none",n.positionMenuAtCaret(e))}),0)}else this.tribute.menu.style.cssText="display: none"}},{key:"selectElement",value:function(e,t,n){var i,o=e;if(t)for(var s=0;s<t.length;s++){if(void 0===(o=o.childNodes[t[s]]))return;for(;o.length<n;)n-=o.length,o=o.nextSibling;0!==o.childNodes.length||o.length||(o=o.previousSibling)}var a=this.getWindowSelection();(i=this.getDocument().createRange()).setStart(o,n),i.setEnd(o,n),i.collapse(!0);try{a.removeAllRanges()}catch(e){}a.addRange(i),e.focus()}},{key:"replaceTriggerText",value:function(e,t,n,i,o){var s=this.getTriggerInfo(!0,n,t,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==s){var a=this.tribute.current,r=new CustomEvent("tribute-replaced",{detail:{item:o,instance:a,context:s,event:i}});if(this.isContentEditable(a.element)){e+="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";var l=s.mentionPosition+s.mentionText.length;this.tribute.autocompleteMode||(l+=s.mentionTriggerChar.length),this.pasteHtml(e,s.mentionPosition,l)}else{var c=this.tribute.current.element,d="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";e+=d;var u=s.mentionPosition,p=s.mentionPosition+s.mentionText.length+d.length;this.tribute.autocompleteMode||(p+=s.mentionTriggerChar.length-1),c.value=c.value.substring(0,u)+e+c.value.substring(p,c.value.length),c.selectionStart=u+e.length,c.selectionEnd=u+e.length}a.element.dispatchEvent(r)}}},{key:"pasteHtml",value:function(e,t,n){var i,o;o=this.getWindowSelection(),(i=this.getDocument().createRange()).setStart(o.anchorNode,t),i.setEnd(o.anchorNode,n),i.deleteContents();var s=this.getDocument().createElement("div");s.innerHTML=e;for(var a,r,l=this.getDocument().createDocumentFragment();a=s.firstChild;)r=l.appendChild(a);i.insertNode(l),r&&((i=i.cloneRange()).setStartAfter(r),i.collapse(!0),o.removeAllRanges(),o.addRange(i))}},{key:"getWindowSelection",value:function(){var e=this.tribute.current.element.ownerDocument;return e?e.getSelection():window.getSelection()}},{key:"getNodePositionInParent",value:function(e){if(null===e.parentNode)return 0;for(var t=0;t<e.parentNode.childNodes.length;t++)if(e.parentNode.childNodes[t]===e)return t}},{key:"getContentEditableSelectedPath",value:function(e){var t=this.getWindowSelection(),n=t.anchorNode,i=[];if(null!=n){for(var o,s=n.contentEditable;null!==n&&"true"!==s;)o=this.getNodePositionInParent(n),i.push(o),null!==(n=n.parentNode)&&(s=n.contentEditable);return i.reverse(),{selected:n,path:i,offset:t.getRangeAt(0).startOffset}}}},{key:"getTextPrecedingCurrentSelection",value:function(){var e=this.tribute.current,t="";if(this.isContentEditable(e.element)){var n=this.getWindowSelection().anchorNode;if(null!=n){var i=n.textContent,o=this.getWindowSelection().getRangeAt(0).startOffset;i&&0<=o&&(t=i.substring(0,o))}}else{var s=this.tribute.current.element;if(s){var a=s.selectionStart;s.value&&0<=a&&(t=s.value.substring(0,a))}}return t}},{key:"getLastWordInText",value:function(e){var t=(e=e.replace(/\u00A0/g," ")).split(/\s+/);return t[t.length-1].trim()}},{key:"getTriggerInfo",value:function(e,t,n,i,o){var s,a,r,l=this,c=this.tribute.current;if(this.isContentEditable(c.element)){var d=this.getContentEditableSelectedPath(c);d&&(s=d.selected,a=d.path,r=d.offset)}else s=this.tribute.current.element;var u=this.getTextPrecedingCurrentSelection(),p=this.getLastWordInText(u);if(o)return{mentionPosition:u.length-p.length,mentionText:p,mentionSelectedElement:s,mentionSelectedPath:a,mentionSelectedOffset:r};if(null!=u){var h,f=-1;if(this.tribute.collection.forEach((function(e){var t=e.trigger,i=e.requireLeadingSpace?l.lastIndexWithLeadingSpace(u,t):u.lastIndexOf(t);f<i&&(f=i,h=t,n=e.requireLeadingSpace)})),0<=f&&(0===f||!n||/[\xA0\s]/g.test(u.substring(f-1,f)))){var m=u.substring(f+h.length,u.length);h=u.substring(f,f+h.length);var g=m.substring(0,1),v=0<m.length&&(" "===g||" "===g);t&&(m=m.trim());var b=i?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=b.test(m),!v&&(e||!b.test(m)))return{mentionPosition:f,mentionText:m,mentionSelectedElement:s,mentionSelectedPath:a,mentionSelectedOffset:r,mentionTriggerChar:h}}}}},{key:"lastIndexWithLeadingSpace",value:function(e,t){for(var n=e.split("").reverse().join(""),i=-1,o=0,s=e.length;o<s;o++){for(var a=o===e.length-1,r=/\s/.test(n[o+1]),l=!0,c=t.length-1;0<=c;c--)if(t[c]!==n[o-c]){l=!1;break}if(l&&(a||r)){i=e.length-1-o;break}}return i}},{key:"isContentEditable",value:function(e){return"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName}},{key:"isMenuOffScreen",value:function(e,t){var n=window.innerWidth,i=window.innerHeight,o=document.documentElement,s=(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),a=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),r="number"==typeof e.top?e.top:a+i-e.bottom-t.height,l="number"==typeof e.right?e.right:e.left+t.width,c="number"==typeof e.bottom?e.bottom:e.top+t.height,d="number"==typeof e.left?e.left:s+n-e.right-t.width;return{top:r<Math.floor(a),right:l>Math.ceil(s+n),bottom:c>Math.ceil(a+i),left:d<Math.floor(s)}}},{key:"getMenuDimensions",value:function(){var e={width:null,height:null};return this.tribute.menu.style.cssText="top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;",e.width=this.tribute.menu.offsetWidth,e.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",e}},{key:"getTextAreaOrInputUnderlinePosition",value:function(e,t,n){var i=null!==window.mozInnerScreenX,o=this.getDocument().createElement("div");o.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(o);var s=o.style,a=window.getComputedStyle?getComputedStyle(e):e.currentStyle;s.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(s.wordWrap="break-word"),s.position="absolute",s.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((function(e){s[e]=a[e]})),i?(s.width="".concat(parseInt(a.width)-2,"px"),e.scrollHeight>parseInt(a.height)&&(s.overflowY="scroll")):s.overflow="hidden",o.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(o.textContent=o.textContent.replace(/\s/g," "));var r=this.getDocument().createElement("span");r.textContent=e.value.substring(t)||".",o.appendChild(r);var l=e.getBoundingClientRect(),c=document.documentElement,d=(window.pageXOffset||c.scrollLeft)-(c.clientLeft||0),u=(window.pageYOffset||c.scrollTop)-(c.clientTop||0),p=0,h=0;this.menuContainerIsBody&&(p=l.top,h=l.left);var f={top:p+u+r.offsetTop+parseInt(a.borderTopWidth)+parseInt(a.fontSize)-e.scrollTop,left:h+d+r.offsetLeft+parseInt(a.borderLeftWidth)},m=window.innerWidth,g=window.innerHeight,v=this.getMenuDimensions(),b=this.isMenuOffScreen(f,v);b.right&&(f.right=m-f.left,f.left="auto");var y=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(b.bottom){var w=y-(g-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);f.bottom=w+(g-l.top-r.offsetTop),f.top="auto"}return(b=this.isMenuOffScreen(f,v)).left&&(f.left=m>v.width?d+m-v.width:d,delete f.right),b.top&&(f.top=g>v.height?u+g-v.height:u,delete f.bottom),this.getDocument().body.removeChild(o),f}},{key:"getContentEditableCaretPosition",value:function(e){var t,n,i="sel_".concat((new Date).getTime(),"_").concat(Math.random().toString().substr(2)),o=this.getWindowSelection(),s=o.getRangeAt(0);(n=this.getDocument().createRange()).setStart(o.anchorNode,e),n.setEnd(o.anchorNode,e),n.collapse(!1),(t=this.getDocument().createElement("span")).id=i,t.appendChild(this.getDocument().createTextNode("\ufeff")),n.insertNode(t),o.removeAllRanges(),o.addRange(s);var a=t.getBoundingClientRect(),r=document.documentElement,l=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),c=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),d={x:0,y:0,top:0,bottom:0,left:0,right:0},u=this.tribute.current.element.ownerDocument;if(u!==document){var p=u.defaultView.frameElement;p&&(d=p.getBoundingClientRect())}var h=0,f=0;f=this.menuContainerIsBody?(h=a.left+d.x,a.top+d.y):(h=t.offsetLeft,t.offsetTop);var m,g={left:h+l,top:f+t.offsetHeight+c},v=window.innerWidth,b=window.innerHeight,y=this.getMenuDimensions(),w=this.isMenuOffScreen(g,y);if(w.right&&(g.left="auto",g.right=v-(a.left+d.x)-l),m=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight,w.bottom){var _=m-(b-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);g.top="auto",g.bottom=_+(b-(a.top+d.y))}return(w=this.isMenuOffScreen(g,y)).left&&(g.left=v>y.width?l+v-y.width:l,delete g.right),w.top&&(g.top=b>y.height?c+b-y.height:c,delete g.bottom),t.parentNode.removeChild(t),g}},{key:"scrollIntoView",value:function(e){var t,n=this.menu;if(void 0!==n){for(;void 0===t||0===t.height;)if(0===(t=n.getBoundingClientRect()).height&&(void 0===(n=n.childNodes[0])||!n.getBoundingClientRect))return;var i=t.top,o=i+t.height;if(i<0)window.scrollTo(0,window.pageYOffset+t.top-20);else if(o>window.innerHeight){var s=window.pageYOffset+t.top-20;100<s-window.pageYOffset&&(s=window.pageYOffset+100);var a=window.pageYOffset-(window.innerHeight-o);s<a&&(a=s),window.scrollTo(0,a)}}}},{key:"menuContainerIsBody",get:function(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}}]),e}();n.default=o,t.exports=n.default},{}],5:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tribute=t,this.tribute.search=this}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"simpleFilter",value:function(e,t){var n=this;return t.filter((function(t){return n.test(e,t)}))}},{key:"test",value:function(e,t){return null!==this.match(e,t)}},{key:"match",value:function(e,t,n){n=n||{},t.length;var i=n.pre||"",o=n.post||"",s=n.caseSensitive&&t||t.toLowerCase();if(n.skip)return{rendered:t,score:0};e=n.caseSensitive&&e||e.toLowerCase();var a=this.traverse(s,e,0,0,[]);return a?{rendered:this.render(t,a.cache,i,o),score:a.score}:null}},{key:"traverse",value:function(e,t,n,i,o){if(t.length===i)return{score:this.calculateScore(o),cache:o.slice()};if(!(e.length===n||t.length-i>e.length-n)){for(var s,a,r=t[i],l=e.indexOf(r,n);-1<l;){if(o.push(l),a=this.traverse(e,t,l+1,i+1,o),o.pop(),!a)return s;(!s||s.score<a.score)&&(s=a),l=e.indexOf(r,l+1)}return s}}},{key:"calculateScore",value:function(e){var t=0,n=1;return e.forEach((function(i,o){0<o&&(e[o-1]+1===i?n+=n+1:n=1),t+=n})),t}},{key:"render",value:function(e,t,n,i){var o=e.substring(0,t[0]);return t.forEach((function(s,a){o+=n+e[s]+i+e.substring(s+1,t[a+1]?t[a+1]:e.length)})),o}},{key:"filter",value:function(e,t,n){var i=this;return n=n||{},t.reduce((function(t,o,s,a){var r=o;n.extract&&(r=(r=n.extract(o))||"");var l=i.match(e,r,n);return null!=l&&(t[t.length]={string:l.rendered,score:l.score,index:s,original:o}),t}),[]).sort((function(e,t){return t.score-e.score||e.index-t.index}))}}]),e}();n.default=o,t.exports=n.default},{}],6:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=((i=e("./Tribute"))&&i.__esModule?i:{default:i}).default;n.default=o,t.exports=n.default},{"./Tribute":1}],7:[function(e,t,n){"use strict";if(Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],s=0;s<i;s++)if(t=n[s],e.call(o,t,s,n))return t}),window&&"function"!=typeof window.CustomEvent){var i=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};void 0!==window.Event&&(i.prototype=window.Event.prototype),window.CustomEvent=i}},{}]},{},[6])(6)},80542:function(e,t,n){var i,o,s;n(43838),n(4949),n(39028),n(6927),s=this,i=[n(13886)],o=function(e){return s.Bloodhound=function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,(function(e,o){if(!(i=n.call(null,o,e,t)))return!1})),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,(function(e,o){if(i=n.call(null,o,e,t))return!1})),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){return e.isFunction(t)?t:n;function n(){return String(t)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var s,a,r=this,l=arguments;return s=function(){i=null,n||(o=e.apply(r,l))},a=n&&!i,clearTimeout(i),i=setTimeout(s,t),a&&(o=e.apply(r,l)),o}},throttle:function(e,t){var n,i,o,s,a,r;return a=0,r=function(){a=new Date,o=null,s=e.apply(n,i)},function(){var l=new Date,c=t-(l-a);return n=this,i=arguments,c<=0?(clearTimeout(o),o=null,a=l,s=e.apply(n,i)):o||(o=setTimeout(r,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n="0.11.1",i=function(){"use strict";return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}};function e(e){return(e=t.toStr(e))?e.split(/\s+/):[]}function n(e){return(e=t.toStr(e))?e.split(/\W+/):[]}function i(e){return function(n){return n=t.isArray(n)?n:[].slice.call(arguments,0),function(i){var o=[];return t.each(n,(function(n){o=o.concat(e(t.toStr(i[n])))})),o}}}}(),o=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function o(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new o(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),s=function(){"use strict";var n;try{(n=window.localStorage).setItem("~~~","!"),n.removeItem("~~~")}catch(e){n=null}function i(e,i){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix)),this.ls=i||n,!this.ls&&this._noop()}return t.mixin(i.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(e){"QuotaExceededError"===e.name&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),a(this.ls.getItem(this._prefix(e)))},set:function(e,n,i){return t.isNumber(i)?this._safeSet(this._ttlKey(e),s(o()+i)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),s(n))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=r(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var n=a(this.ls.getItem(this._ttlKey(e)));return!!(t.isNumber(n)&&o()>n)}}),i;function o(){return(new Date).getTime()}function s(e){return JSON.stringify(t.isUndefined(e)?null:e)}function a(t){return e.parseJSON(t)}function r(e){var t,i,o=[],s=n.length;for(t=0;t<s;t++)(i=n.key(t)).match(e)&&o.push(i.replace(e,""));return o}}(),a=function(){"use strict";var n=0,i={},s=6,a=new o(10);function r(e){e=e||{},this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=!1===e.cache?new o(0):a}return r.setMaxPendingRequests=function(e){s=e},r.resetCache=function(){a.reset()},t.mixin(r.prototype,{_fingerprint:function(t){return(t=t||{}).url+t.type+e.param(t.data||{})},_get:function(e,t){var o,a,r=this;function l(e){t(null,e),r._cache.set(o,e)}function c(){t(!0)}function d(){n--,delete i[o],r.onDeckRequestArgs&&(r._get.apply(r,r.onDeckRequestArgs),r.onDeckRequestArgs=null)}o=this._fingerprint(e),this.cancelled||o!==this.lastReq||((a=i[o])?a.done(l).fail(c):n<s?(n++,i[o]=this._send(e).done(l).fail(c).always(d)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var o,s;i=i||e.noop,n=t.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(o=this._cache.get(s))?i(null,o):this._get(n,i)},cancel:function(){this.cancelled=!0}}),r}(),r=window.SearchIndex=function(){"use strict";var n="c",i="i";function o(n){(n=n||{}).datumTokenizer&&n.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||t.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}return t.mixin(o.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var o=this;e=t.isArray(e)?e:[e],t.each(e,(function(e){var r,l;o.datums[r=o.identify(e)]=e,l=s(o.datumTokenizer(e)),t.each(l,(function(e){var t,s,l;for(t=o.trie,s=e.split("");l=s.shift();)(t=t[n][l]||(t[n][l]=a()))[i].push(r)}))}))},get:function(e){var n=this;return t.map(e,(function(e){return n.datums[e]}))},search:function(e){var o,a,c=this;return o=s(this.queryTokenizer(e)),t.each(o,(function(e){var t,o,s,r;if(a&&0===a.length)return!1;for(t=c.trie,o=e.split("");t&&(s=o.shift());)t=t[n][s];if(!t||0!==o.length)return a=[],!1;r=t[i].slice(0),a=a?l(a,r):r})),a?t.map(r(a),(function(e){return c.datums[e]})):[]},all:function(){var e=[];for(var t in this.datums)e.push(this.datums[t]);return e},reset:function(){this.datums={},this.trie=a()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),o;function s(e){return e=t.filter(e,(function(e){return!!e})),e=t.map(e,(function(e){return e.toLowerCase()}))}function a(){var e={};return e[i]=[],e[n]={},e}function r(e){for(var t={},n=[],i=0,o=e.length;i<o;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function l(e,t){var n=0,i=0,o=[];e=e.sort(),t=t.sort();for(var s=e.length,a=t.length;n<s&&i<a;)e[n]<t[i]?n++:(e[n]>t[i]||(o.push(e[n]),n++),i++);return o}}(),l=function(){"use strict";var e;function n(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new s(e.cacheKey)}return e={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.mixin(n.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(e.data,t,this.ttl),this.storage.set(e.protocol,location.protocol,this.ttl),this.storage.set(e.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,n={};return this.cache?(n.data=this.storage.get(e.data),n.protocol=this.storage.get(e.protocol),n.thumbprint=this.storage.get(e.thumbprint),t=n.thumbprint!==this.thumbprint||n.protocol!==location.protocol,n.data&&!t?n.data:null):null},fromNetwork:function(e){var t,n=this;function i(){e(!0)}function o(t){e(null,n.transform(t))}e&&(t=this.prepare(this._settings()),this.transport(t).fail(i).done(o))},clear:function(){return this.storage.clear(),this}}),n}(),c=function(){"use strict";function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.transport=new a({cache:e.cache,limiter:e.limiter,transport:e.transport})}return t.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(e,t){var n,i=this;if(t)return e=e||"",n=this.prepare(e,this._settings()),this.transport.get(n,o);function o(e,n){t(e?[]:i.transform(n))}},cancelLastRequest:function(){this.transport.cancel()}}),e}(),d=function(){"use strict";return function(n){var s,a;return s={initialize:!0,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},!(n=t.mixin(s,n||{})).datumTokenizer&&e.error("datumTokenizer is required"),!n.queryTokenizer&&e.error("queryTokenizer is required"),a=n.sorter,n.sorter=a?function(e){return e.sort(a)}:t.identity,n.local=t.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=o(n.remote),n};function i(i){var o;return i?(o={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null},i=t.isString(i)?{url:i}:i,!(i=t.mixin(o,i)).url&&e.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?r(i.transport):e.ajax,i):null}function o(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null},n=t.isString(n)?{url:n}:n,!(n=t.mixin(i,n)).url&&e.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=s(n),n.limiter=a(n),n.transport=n.transport?r(n.transport):e.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function s(e){var t,n,i;return t=e.prepare,n=e.replace,i=e.wildcard,t||(t=n?o:e.wildcard?s:a);function o(e,t){return t.url=n(t.url,e),t}function s(e,t){return t.url=t.url.replace(i,encodeURIComponent(e)),t}function a(e,t){return t}}function a(e){var n,i,o;return n=e.limiter,i=e.rateLimitBy,o=e.rateLimitWait,n||(n=/^throttle$/i.test(i)?a(o):s(o)),n;function s(e){return function(n){return t.debounce(n,e)}}function a(e){return function(n){return t.throttle(n,e)}}}function r(n){return function(i){var o=e.Deferred();return n(i,s,a),o;function s(e){t.defer((function(){o.resolve(e)}))}function a(e){t.defer((function(){o.reject(e)}))}}}}(),u=function(){"use strict";var n;function o(e){e=d(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.local=e.local,this.remote=e.remote?new c(e.remote):null,this.prefetch=e.prefetch?new l(e.prefetch):null,this.index=new r({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),!1!==e.initialize&&this.initialize()}return n=window&&window.Bloodhound,o.noConflict=function(){return window&&(window.Bloodhound=n),o},o.tokenizers=i,t.mixin(o.prototype,{__ttAdapter:function(){var e=this;return this.remote?t:n;function t(t,n,i){return e.search(t,n,i)}function n(t,n){return e.search(t,n)}},_loadPrefetch:function(){var t,n,i=this;return t=e.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),t.resolve()):this.prefetch.fromNetwork(o):t.resolve(),t.promise();function o(e,n){if(e)return t.reject();i.add(n),i.prefetch.store(i.index.serialize()),t.resolve()}},_initialize:function(){var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise;function t(){e.add(e.local)}},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){return this.index.add(e),this},get:function(e){return e=t.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function(e,n,i){var o,s=this;return o=this.sorter(this.index.search(e)),n(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(e,a):this.remote&&this.remote.cancelLastRequest(),this;function a(e){var n=[];t.each(e,(function(e){!t.some(o,(function(t){return s.identify(e)===s.identify(t)}))&&n.push(e)})),i&&i(n)}},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return a.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),o}();return u}(e)}.apply(t,i),void 0===o||(e.exports=o),i=[n(13886)],o=function(e){return function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,(function(e,o){if(!(i=n.call(null,o,e,t)))return!1})),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,(function(e,o){if(i=n.call(null,o,e,t))return!1})),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){return e.isFunction(t)?t:n;function n(){return String(t)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var s,a,r=this,l=arguments;return s=function(){i=null,n||(o=e.apply(r,l))},a=n&&!i,clearTimeout(i),i=setTimeout(s,t),a&&(o=e.apply(r,l)),o}},throttle:function(e,t){var n,i,o,s,a,r;return a=0,r=function(){a=new Date,o=null,s=e.apply(n,i)},function(){var l=new Date,c=t-(l-a);return n=this,i=arguments,c<=0?(clearTimeout(o),o=null,a=l,s=e.apply(n,i)):o||(o=setTimeout(r,c)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n=function(){"use strict";var e={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return n;function n(n){var a,r;return r=t.mixin({},e,n),{css:(a={css:s(),classes:r,html:i(r),selectors:o(r)}).css,html:a.html,classes:a.classes,selectors:a.selectors,mixin:function(e){t.mixin(e,a)}}}function i(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}}function o(e){var n={};return t.each(e,(function(e,t){n[t]="."+e})),n}function s(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}}(),i=function(){"use strict";var n,i;function o(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}return n="typeahead:",i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(o.prototype,{_trigger:function(t,i){var o;return o=e.Event(n+t),(i=i||[]).unshift(o),this.$el.trigger.apply(this.$el,i),o},before:function(e){var t;return t=[].slice.call(arguments,1),this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=i[e])&&this._trigger(t,[].slice.call(arguments,1))}}),o}(),o=function(){"use strict";var e=/\s+/,t=l();return{onSync:o,onAsync:i,off:s,trigger:a};function n(t,n,i,o){var s;if(!i)return this;for(n=n.split(e),i=o?c(i,o):i,this._callbacks=this._callbacks||{};s=n.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function i(e,t,i){return n.call(this,"async",e,t,i)}function o(e,t,i){return n.call(this,"sync",e,t,i)}function s(t){var n;if(!this._callbacks)return this;for(t=t.split(e);n=t.shift();)delete this._callbacks[n];return this}function a(n){var i,o,s,a,l;if(!this._callbacks)return this;for(n=n.split(e),s=[].slice.call(arguments,1);(i=n.shift())&&(o=this._callbacks[i]);)a=r(o.sync,this,[i].concat(s)),l=r(o.async,this,[i].concat(s)),a()&&t(l);return this}function r(e,t,n){return i;function i(){for(var i,o=0,s=e.length;!i&&o<s;o+=1)i=!1===e[o].apply(t,n);return!i}}function l(){return window.setImmediate?function(e){setImmediate((function(){e()}))}:function(e){setTimeout((function(){e()}),0)}}function c(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}}(),s=function(e){"use strict";var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){var s;function a(t){var n,i,a;return(n=s.exec(t.data))&&(a=e.createElement(o.tagName),o.className&&(a.className=o.className),(i=t.splitText(n.index)).splitText(n[0].length),a.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(a,i)),!!n}function r(e,t){for(var n,i=3,o=0;o<e.childNodes.length;o++)(n=e.childNodes[o]).nodeType===i?o+=t(n)?1:0:r(n,t)}(o=t.mixin({},n,o)).node&&o.pattern&&(o.pattern=t.isArray(o.pattern)?o.pattern:[o.pattern],s=i(o.pattern,o.caseSensitive,o.wordsOnly),r(o.node,a))};function i(e,n,i){for(var o,s=[],a=0,r=e.length;a<r;a++)s.push(t.escapeRegExChars(e[a]));return o=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(o):new RegExp(o,"i")}}(window.document),a=function(){"use strict";var n;function i(n,i){(n=n||{}).input||e.error("input is missing"),i.mixin(this),this.$hint=e(n.hint),this.$input=e(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=s(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}return n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(i.prototype,o,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=n[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!r(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){return"tab"!==e||!r(t)},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i;i=!!(n=a(e,this.query))&&this.query.length!==e.length,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e,i,o,s,a=this;return e=t.bind(this._onBlur,this),i=t.bind(this._onFocus,this),o=t.bind(this._onKeydown,this),s=t.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",i).on("keydown.tt",o),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",(function(e){n[e.which||e.keyCode]||t.defer(t.bind(a._onInput,a,e))})),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),(""===e||!n||this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||((i=document.selection.createRange()).moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")}}),i;function s(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function a(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function r(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}}(),r=function(){"use strict";var n,i;function a(n,o){(n=n||{}).templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||e.error("missing source"),n.node||e.error("missing node"),n.name&&!c(n.name)&&e.error("invalid dataset name: "+n.name),o.mixin(this),this.highlight=!!n.highlight,this.name=n.name||i(),this.limit=n.limit||5,this.displayFn=r(n.display||n.displayKey),this.templates=l(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=t.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=e(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return n={val:"tt-selectable-display",obj:"tt-selectable-object"},i=t.getIdGenerator(),a.extractData=function(t){var i=e(t);return i.data(n.obj)?{val:i.data(n.val)||"",obj:i.data(n.obj)||null}:null},t.mixin(a.prototype,o,{_overwrite:function(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var n;n=this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;i=(n=this._getSuggestionsFragment(e,t)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,o){var a,r=this;return a=document.createDocumentFragment(),t.each(o,(function(t){var o,s;s=r._injectQuery(i,t),o=e(r.templates.suggestion(s)).data(n.obj,t).data(n.val,r.displayFn(t)).addClass(r.classes.suggestion+" "+r.classes.selectable),a.appendChild(o[0])})),this.highlight&&s({className:this.classes.highlight,node:a,pattern:i}),e(a)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(e,n){return t.isObject(n)?t.mixin({_query:e},n):n},update:function(t){var n=this,i=!1,o=!1,s=0;function a(e){o||(o=!0,e=(e||[]).slice(0,n.limit),s=e.length,n._overwrite(t,e),s<n.limit&&n.async&&n.trigger("asyncRequested",t))}function r(o){o=o||[],!i&&s<n.limit&&(n.cancel=e.noop,s+=o.length,n._append(t,o.slice(0,n.limit-s)),n.async&&n.trigger("asyncReceived",t))}this.cancel(),this.cancel=function(){i=!0,n.cancel=e.noop,n.async&&n.trigger("asyncCanceled",t)},this.source(t,a,r),!o&&a([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),a;function r(e){return e=e||t.stringify,t.isFunction(e)?e:n;function n(t){return t[e]}}function l(n,i){return{notFound:n.notFound&&t.templatify(n.notFound),pending:n.pending&&t.templatify(n.pending),header:n.header&&t.templatify(n.header),footer:n.footer&&t.templatify(n.footer),suggestion:n.suggestion||o};function o(t){return e("<div>").text(i(t))}}function c(e){return/^[_a-zA-Z0-9-]+$/.test(e)}}(),l=function(){"use strict";function n(n,i){var o=this;function s(t){var n=o.$node.find(t.node).first();return t.node=n.length?n:e("<div>").appendTo(o.$node),new r(t,i)}(n=n||{}).node||e.error("node is required"),i.mixin(this),this.$node=e(n.node),this.query=null,this.datasets=t.map(n.datasets,s)}return t.mixin(n.prototype,o,{_onSelectableClick:function(t){this.trigger("selectableClicked",e(t.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return t.every(this.datasets,e);function e(e){return e.isEmpty()}},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,o;n=(t=e.position().top)+e.outerHeight(!0),i=this.$node.scrollTop(),o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(i+t):o<n&&this.$node.scrollTop(i+(n-o))},bind:function(){var e,n=this;return e=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),t.each(this.datasets,(function(e){e.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)})),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i;return n=this.getActiveSelectable(),t=this._getSelectables(),-1===(i=(i=((i=(n?t.index(n):-1)+e)+1)%(t.length+1)-1)<-1?t.length-1:i)?null:t.eq(i)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?r.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(e){var n=e!==this.query;return n&&(this.query=e,t.each(this.datasets,i)),n;function i(t){t.update(e)}},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(e){e.destroy()}this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,n)}}),n}(),c=function(){"use strict";var e=l.prototype;function n(){l.apply(this,[].slice.call(arguments,0))}return t.mixin(n.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),e.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),n}(),d=function(){"use strict";function n(n,o){var s,a,r,l,c,d,u,p,h,f,m;(n=n||{}).input||e.error("missing input"),n.menu||e.error("missing menu"),n.eventBus||e.error("missing event bus"),o.mixin(this),this.eventBus=n.eventBus,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),a=i(this,"deactivate","_onBlurred"),r=i(this,"isActive","isOpen","_onEnterKeyed"),l=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),d=i(this,"isActive","open","_onUpKeyed"),u=i(this,"isActive","open","_onDownKeyed"),p=i(this,"isActive","isOpen","_onLeftKeyed"),h=i(this,"isActive","isOpen","_onRightKeyed"),f=i(this,"_openIfActive","_onQueryChanged"),m=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",a,this).onSync("enterKeyed",r,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",d,this).onSync("downKeyed",u,this).onSync("leftKeyed",p,this).onSync("rightKeyed",h,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}return t.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||e("<div>"),i=this.menu.$node||e("<div>"),n.on("blur.tt",(function(e){var o,s,a;o=document.activeElement,s=i.is(o),a=i.has(o).length>0,t.isMsie()&&(s||a)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer((function(){n.focus()})))})),i.on("mousedown.tt",(function(e){e.preventDefault()}))},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,t)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&t.preventDefault()},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return(e=t.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var e,n,i,o,s,r;e=this.menu.getTopSelectable(),n=this.menu.getSelectableData(e),i=this.input.getInputValue(),!n||t.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(o=a.normalizeQuery(i),s=t.escapeRegExChars(o),(r=new RegExp("^(?:"+s+")(.+$)","i").exec(n.val))&&this.input.setHint(i+r[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(t.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj)||(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),0))},autocomplete:function(e){var t,n;return t=this.input.getQuery(),!(!(n=this.menu.getSelectableData(e))||t===n.val||this.eventBus.before("autocomplete",n.obj)||(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),0))},moveCursor:function(e){var t,n,i,o;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),o=(i=this.menu.getSelectableData(n))?i.obj:null,!(this._minLengthMet()&&this.menu.update(t)||this.eventBus.before("cursorchange",o)||(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",o),0))},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n;function i(e){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,(function(t){return e[t].apply(e,i)}))}}}();!function(){"use strict";var o,s,r;function u(t,n){t.each((function(){var t,i=e(this);(t=i.data(s.typeahead))&&n(t,i)}))}function p(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(f(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function h(e,t){e.data(s.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(e){}return e}function f(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function m(e){var n,i;n=e.data(s.www),i=e.parent().filter(n.selectors.wrapper),t.each(e.data(s.attrs),(function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)})),e.removeData(s.typeahead).removeData(s.www).removeData(s.attr).removeClass(n.classes.input),i.length&&(e.detach().insertAfter(i),i.remove())}function g(n){var i;return(i=t.isJQuery(n)||t.isElement(n)?e(n).first():[]).length?i:null}o=e.fn.typeahead,s={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},r={initialize:function(o,r){var u;return r=t.isArray(r)?r:[].slice.call(arguments,1),u=n((o=o||{}).classNames),this.each(f);function f(){var n,f,m,v,b,y,w,_,T,E,S;t.each(r,(function(e){e.highlight=!!o.highlight})),n=e(this),f=e(u.html.wrapper),m=g(o.hint),v=g(o.menu),b=!1!==o.hint&&!m,y=!1!==o.menu&&!v,b&&(m=p(n,u)),y&&(v=e(u.html.menu).css(u.css.menu)),m&&m.val(""),n=h(n,u),(b||y)&&(f.css(u.css.wrapper),n.css(b?u.css.input:u.css.inputWithNoHint),n.wrap(f).parent().prepend(b?m:null).append(y?v:null)),S=y?c:l,w=new i({el:n}),_=new a({hint:m,input:n},u),T=new S({node:v,datasets:r},u),E=new d({input:_,menu:T,eventBus:w,minLength:o.minLength},u),n.data(s.www,u),n.data(s.typeahead,E)}},isEnabled:function(){var e;return u(this.first(),(function(t){e=t.isEnabled()})),e},enable:function(){return u(this,(function(e){e.enable()})),this},disable:function(){return u(this,(function(e){e.disable()})),this},isActive:function(){var e;return u(this.first(),(function(t){e=t.isActive()})),e},activate:function(){return u(this,(function(e){e.activate()})),this},deactivate:function(){return u(this,(function(e){e.deactivate()})),this},isOpen:function(){var e;return u(this.first(),(function(t){e=t.isOpen()})),e},open:function(){return u(this,(function(e){e.open()})),this},close:function(){return u(this,(function(e){e.close()})),this},select:function(t){var n=!1,i=e(t);return u(this.first(),(function(e){n=e.select(i)})),n},autocomplete:function(t){var n=!1,i=e(t);return u(this.first(),(function(e){n=e.autocomplete(i)})),n},moveCursor:function(e){var t=!1;return u(this.first(),(function(n){t=n.moveCursor(e)})),t},val:function(e){var t;return arguments.length?(u(this,(function(t){t.setVal(e)})),this):(u(this.first(),(function(e){t=e.getVal()})),t)},destroy:function(){return u(this,(function(e,t){m(t),e.destroy()})),this}},e.fn.typeahead=function(e){return r[e]?r[e].apply(this,[].slice.call(arguments,1)):r.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=o,this}}()}(e)}.apply(t,i),void 0===o||(e.exports=o)},45371:(e,t,n)=>{n(43838),function(e){var t="becameVisible",n="becameUnvisible",i=[];function o(t){return e(t).is(":visible")}function s(e){return-1!==i.indexOf(e)}function a(e){!s(e)&&function(e){return 1===e.nodeType}(e)&&i.push(e)}function r(e){e.childNodes.forEach((function(e){o(e)?(l(e,t),r(e)):(l(e,n),a(e))}))}function l(t,n){e(t).trigger(n)}function c(e,t){l(e,t),e.childNodes.forEach((function(e){c(e,t)}))}function d(e){!function(e){var t=i.indexOf(e);-1!=t&&i.splice(t,1)}(e),c(e,t)}function u(){var e=document.getElementsByTagName("body")[0];new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)((function(e){e.map((function(e){return e.target})).forEach((function(e){s(e)?o(e)&&d(e):o(e)||function(e){a(e),c(e,n)}(e)}))})).observe(e,{childList:!1,attributes:!0,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:["class","style"]})}document.addEventListener("DOMContentLoaded",(function(){r(document.getElementsByTagName("body")[0]),u()}))}(jQuery)},20616:()=>{!function(){function e(e,t){return t[plural=0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5]}jQuery.timeago.settings.strings={prefixAgo:"منذ",prefixFromNow:"بعد",suffixAgo:null,suffixFromNow:null,second:function(t){return e(t,["أقل من ثانية","ثانية واحدة","ثانيتين","%d ثوانٍ","%d ثانية","%d ثانية"])},seconds:function(t){return e(t,["أقل من ثانية","ثانية واحدة","ثانيتين","%d ثوانٍ","%d ثانية","%d ثانية"])},minute:function(t){return e(t,["أقل من دقيقة","دقيقة واحدة","دقيقتين","%d دقائق","%d دقيقة","دقيقة"])},minutes:function(t){return e(t,["أقل من دقيقة","دقيقة واحدة","دقيقتين","%d دقائق","%d دقيقة","دقيقة"])},hour:function(t){return e(t,["أقل من ساعة","ساعة واحدة","ساعتين","%d ساعات","%d ساعة","%d ساعة"])},hours:function(t){return e(t,["أقل من ساعة","ساعة واحدة","ساعتين","%d ساعات","%d ساعة","%d ساعة"])},day:function(t){return e(t,["أقل من يوم","يوم واحد","يومين","%d أيام","%d يومًا","%d يوم"])},days:function(t){return e(t,["أقل من يوم","يوم واحد","يومين","%d أيام","%d يومًا","%d يوم"])},month:function(t){return e(t,["أقل من شهر","شهر واحد","شهرين","%d أشهر","%d شهرًا","%d شهر"])},months:function(t){return e(t,["أقل من شهر","شهر واحد","شهرين","%d أشهر","%d شهرًا","%d شهر"])},year:function(t){return e(t,["أقل من عام","عام واحد","%d عامين","%d أعوام","%d عامًا"])},years:function(t){return e(t,["أقل من عام","عام واحد","عامين","%d أعوام","%d عامًا","%d عام"])}}}()},84960:()=>{jQuery.timeago.settings.strings={prefixAgo:"преди",prefixFromNow:"след",suffixAgo:null,suffixFromNow:null,seconds:"по-малко от минута",minute:"една минута",minutes:"%d минути",hour:"един час",hours:"%d часа",day:"един ден",days:"%d дни",month:"един месец",months:"%d месеца",year:"една година",years:"%d години"}},32487:()=>{jQuery.timeago.settings.strings={prefixAgo:"fa",prefixFromNow:"d'aqui a",suffixAgo:null,suffixFromNow:null,seconds:"menys d'1 minut",minute:"1 minut",minutes:"uns %d minuts",hour:"1 hora",hours:"unes %d hores",day:"1 dia",days:"%d dies",month:"aproximadament un mes",months:"%d mesos",year:"aproximadament un any",years:"%d anys"}},71961:()=>{!function(){function e(e,t,n){return n[t>=0?0:2==n.length||e<5?1:2]}jQuery.timeago.settings.strings={prefixAgo:"před",prefixFromNow:"za",suffixAgo:null,suffixFromNow:null,seconds:function(t,n){return e(t,n,["méně než minutou","méně než minutu"])},minute:function(t,n){return e(t,n,["minutou","minutu"])},minutes:function(t,n){return e(t,n,["%d minutami","%d minuty","%d minut"])},hour:function(t,n){return e(t,n,["hodinou","hodinu"])},hours:function(t,n){return e(t,n,["%d hodinami","%d hodiny","%d hodin"])},day:function(t,n){return e(t,n,["%d dnem","%d den"])},days:function(t,n){return e(t,n,["%d dny","%d dny","%d dní"])},month:function(t,n){return e(t,n,["%d měsícem","%d měsíc"])},months:function(t,n){return e(t,n,["%d měsíci","%d měsíce","%d měsíců"])},year:function(t,n){return e(t,n,["%d rokem","%d rok"])},years:function(t,n){return e(t,n,["%d lety","%d roky","%d let"])}}}()},21168:()=>{jQuery.timeago.settings.strings={prefixAgo:"vor",prefixFromNow:"in",suffixAgo:"",suffixFromNow:"",seconds:"wenigen Sekunden",minute:"etwa einer Minute",minutes:"%d Minuten",hour:"etwa einer Stunde",hours:"%d Stunden",day:"etwa einem Tag",days:"%d Tagen",month:"etwa einem Monat",months:"%d Monaten",year:"etwa einem Jahr",years:"%d Jahren"}},9106:()=>{jQuery.timeago.settings.strings={prefixAgo:"πριν",prefixFromNow:"σε",suffixAgo:"",suffixFromNow:"",seconds:"λιγότερο από ένα λεπτό",minute:"περίπου ένα λεπτό",minutes:"%d λεπτά",hour:"περίπου μία ώρα",hours:"περίπου %d ώρες",day:"μία μέρα",days:"%d μέρες",month:"περίπου ένα μήνα",months:"%d μήνες",year:"περίπου ένα χρόνο",years:"%d χρόνια"}},341:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},82344:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},66147:()=>{jQuery.timeago.settings.strings={prefixAgo:"hace",prefixFromNow:"dentro de",suffixAgo:"",suffixFromNow:"",seconds:"menos de un minuto",minute:"un minuto",minutes:"unos %d minutos",hour:"una hora",hours:"%d horas",day:"un día",days:"%d días",month:"un mes",months:"%d meses",year:"un año",years:"%d años"}},88634:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"tagasi",suffixFromNow:"pärast",seconds:function(e,t){return t<0?"vähem kui minuti aja":"vähem kui minut aega"},minute:function(e,t){return t<0?"umbes minuti aja":"umbes minut aega"},minutes:function(e,t){return t<0?"%d minuti":"%d minutit"},hour:function(e,t){return t<0?"umbes tunni aja":"umbes tund aega"},hours:function(e,t){return t<0?"%d tunni":"%d tundi"},day:function(e,t){return t<0?"umbes päeva":"umbes päev"},days:function(e,t){return"%d päeva"},month:function(e,t){return t<0?"umbes kuu aja":"umbes kuu aega"},months:function(e,t){return t<0?"%d kuu":"%d kuud"},year:function(e,t){return t<0?"umbes aasta aja":"umbes aasta aega"},years:function(e,t){return t<0?"%d aasta":"%d aastat"}}},58234:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"پیش",suffixFromNow:"از حال",seconds:"کمتر از یک دقیقه",minute:"حدود یک دقیقه",minutes:"%d دقیقه",hour:"حدود یک ساعت",hours:"حدود %d ساعت",day:"یک روز",days:"%d روز",month:"حدود یک ماه",months:"%d ماه",year:"حدود یک سال",years:"%d سال",wordSeparator:" ",numbers:["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"]}},72855:()=>{jQuery.timeago.settings.strings={prefixAgo:"il y a",prefixFromNow:"d'ici",seconds:"moins d'une minute",minute:"environ une minute",minutes:"environ %d minutes",hour:"environ une heure",hours:"environ %d heures",day:"environ un jour",days:"environ %d jours",month:"environ un mois",months:"environ %d mois",year:"un an",years:"%d ans"}},87676:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:null,suffixFromNow:null,seconds:"kevesebb mint egy perce",minute:"körülbelül egy perce",minutes:"%d perce",hour:"körülbelül egy órája",hours:"körülbelül %d órája",day:"körülbelül egy napja",days:"%d napja",month:"körülbelül egy hónapja",months:"%d hónapja",year:"körülbelül egy éve",years:"%d éve"}},56630:()=>{jQuery.timeago.settings.strings={suffixAgo:"fa",suffixFromNow:"da ora",seconds:"meno di un minuto",minute:"circa un minuto",minutes:"%d minuti",hour:"circa un'ora",hours:"circa %d ore",day:"un giorno",days:"%d giorni",month:"circa un mese",months:"%d mesi",year:"circa un anno",years:"%d anni"}},34415:()=>{jQuery.timeago.settings.strings={prefixAgo:"prieš",prefixFromNow:null,suffixAgo:null,suffixFromNow:"nuo dabar",seconds:"%d sek.",minute:"min.",minutes:"%d min.",hour:"val.",hours:"%d val.",day:"1 d.",days:"%d d.",month:"mėn.",months:"%d mėn.",year:"metus",years:"%d metus",wordSeparator:" ",numbers:[]}},34e3:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"",suffixFromNow:"",seconds:"1m",minute:"1m",minutes:"%dm",hour:"1h",hours:"%dh",day:"1d",days:"%dd",month:"1mo",months:"%dmo",year:"1yr",years:"%dyr",wordSeparator:" ",numbers:[]}},14933:(e,t,n)=>{var i,o,s;o=[n(13886)],void 0===(s="function"==typeof(i=function(e){e.timeago.settings.strings={prefixAgo:null,prefixFromNow:"over",suffixAgo:"geleden",suffixFromNow:null,seconds:"minder dan een minuut",minute:"ongeveer een minuut",minutes:"%d minuten",hour:"ongeveer een uur",hours:"ongeveer %d uur",day:"een dag",days:"%d dagen",month:"ongeveer een maand",months:"%d maanden",year:"ongeveer een jaar",years:"%d jaar",wordSeparator:" ",numbers:[]}})?i.apply(t,o):i)||(e.exports=s)},30243:()=>{!function(){function e(e,t,n){var i=e%10;return i>1&&i<5&&(e>20||e<10)?t:n}jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:"za",suffixAgo:"temu",suffixFromNow:null,seconds:"mniej niż minutę",minute:"minutę",minutes:function(t){return e(t,"%d minuty","%d minut")},hour:"godzinę",hours:function(t){return e(t,"%d godziny","%d godzin")},day:"dzień",days:"%d dni",month:"miesiąc",months:function(t){return e(t,"%d miesiące","%d miesięcy")},year:"rok",years:function(t){return e(t,"%d lata","%d lat")}}}()},48082:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},53424:()=>{jQuery.timeago.settings.strings={prefixAgo:"há",prefixFromNow:"em",suffixAgo:null,suffixFromNow:null,seconds:"alguns segundos",minute:"um minuto",minutes:"%d minutos",hour:"uma hora",hours:"%d horas",day:"um dia",days:"%d dias",month:"um mês",months:"%d meses",year:"um ano",years:"%d anos"}},94939:()=>{jQuery.timeago.settings.strings={suffixAgo:"atrás",suffixFromNow:"a partir de agora",seconds:"menos de um minuto",minute:"cerca de um minuto",minutes:"%d minutos",hour:"cerca de uma hora",hours:"cerca de %d horas",day:"um dia",days:"%d dias",month:"cerca de um mês",months:"%d meses",year:"cerca de um ano",years:"%d anos"}},54904:()=>{jQuery.timeago.settings.strings={prefixAgo:"acum",prefixFromNow:"in timp de",suffixAgo:"",suffixFromNow:"",seconds:"mai putin de un minut",minute:"un minut",minutes:"%d minute",hour:"o ora",hours:"%d ore",day:"o zi",days:"%d zile",month:"o luna",months:"%d luni",year:"un an",years:"%d ani"}},76140:function(){(function(){var e;e=function(e,t,n,i){var o;return 1===(o=e%10)&&(1===e||e>20)?t:o>1&&o<5&&(e>20||e<10)?n:i},jQuery.timeago.settings.strings={prefixAgo:"pre",prefixFromNow:"za",suffixAgo:null,suffixFromNow:null,second:"sekund",seconds:function(t){return e(t,"%d sekund","%d sekunde","%d sekundi")},minute:"oko minut",minutes:function(t){return e(t,"%d minut","%d minuta","%d minuta")},hour:"oko jedan sat",hours:function(t){return e(t,"%d sat","%d sata","%d sati")},day:"jedan dan",days:function(t){return e(t,"%d dan","%d dana","%d dana")},month:"mesec dana",months:function(t){return e(t,"%d mesec","%d meseca","%d meseci")},year:"godinu dana",years:function(t){return e(t,"%d godinu","%d godine","%d godina")},wordSeparator:" "}}).call(this)},3850:()=>{!function(){function e(e,t,n,i){var o=e%10;return 1==o&&(1==e||e>20)?t:o>1&&o<5&&(e>20||e<10)?n:i}jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:"через",suffixAgo:"назад",suffixFromNow:null,seconds:"меньше минуты",minute:"минуту",minutes:function(t){return e(t,"%d минута","%d минуты","%d минут")},hour:"час",hours:function(t){return e(t,"%d час","%d часа","%d часов")},day:"день",days:function(t){return e(t,"%d день","%d дня","%d дней")},month:"месяц",months:function(t){return e(t,"%d месяц","%d месяца","%d месяцев")},year:"год",years:function(t){return e(t,"%d год","%d года","%d лет")}}}()},66561:()=>{jQuery.timeago.settings.strings={prefixAgo:"pred",prefixFromNow:null,suffixAgo:null,suffixFromNow:null,seconds:"menej než minútou",minute:"minútou",minutes:"%d minútami",hour:"hodinou",hours:"%d hodinami",day:"1 dňom",days:"%d dňami",month:"1 mesiacom",months:"%d mesiacmi",year:"1 rokom",years:"%d rokmi"}},25669:()=>{jQuery.timeago.settings.strings={suffixAgo:"önce",suffixFromNow:null,seconds:"1 dakikadan",minute:"1 dakika",minutes:"%d dakika",hour:"1 saat",hours:"%d saat",day:"1 gün",days:"%d gün",month:"1 ay",months:"%d ay",year:"1 yıl",years:"%d yıl"}},81195:()=>{!function(){function e(e,t,n,i){var o=e%10;return 1==o&&(1==e||e>20)?t:o>1&&o<5&&(e>20||e<10)?n:i}jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:"через",suffixAgo:"тому",suffixFromNow:null,seconds:"менше хвилини",minute:"хвилина",minutes:function(t){return e(t,"%d хвилина","%d хвилини","%d хвилин")},hour:"година",hours:function(t){return e(t,"%d година","%d години","%d годин")},day:"день",days:function(t){return e(t,"%d день","%d дні","%d днів")},month:"місяць",months:function(t){return e(t,"%d місяць","%d місяці","%d місяців")},year:"рік",years:function(t){return e(t,"%d рік","%d роки","%d років")}}}()},23189:()=>{jQuery.timeago.settings.strings={prefixAgo:null,prefixFromNow:"从现在开始",suffixAgo:"之前",suffixFromNow:null,seconds:"不到1分钟",minute:"大约1分钟",minutes:"%d分钟",hour:"大约1小时",hours:"大约%d小时",day:"1天",days:"%d天",month:"大约1个月",months:"%d月",year:"大约1年",years:"%d年",numbers:[],wordSeparator:""}},53458:(e,t,n)=>{var i={"./jquery.timeago.ar":20616,"./jquery.timeago.ar.js":20616,"./jquery.timeago.bg":84960,"./jquery.timeago.bg.js":84960,"./jquery.timeago.ca":32487,"./jquery.timeago.ca.js":32487,"./jquery.timeago.cs":71961,"./jquery.timeago.cs.js":71961,"./jquery.timeago.de":21168,"./jquery.timeago.de.js":21168,"./jquery.timeago.el":9106,"./jquery.timeago.el.js":9106,"./jquery.timeago.en":82344,"./jquery.timeago.en-us":341,"./jquery.timeago.en-us.js":341,"./jquery.timeago.en.js":82344,"./jquery.timeago.es":66147,"./jquery.timeago.es.js":66147,"./jquery.timeago.et":88634,"./jquery.timeago.et.js":88634,"./jquery.timeago.fa":58234,"./jquery.timeago.fa.js":58234,"./jquery.timeago.fr":72855,"./jquery.timeago.fr.js":72855,"./jquery.timeago.hu":87676,"./jquery.timeago.hu.js":87676,"./jquery.timeago.it":56630,"./jquery.timeago.it.js":56630,"./jquery.timeago.lt":34415,"./jquery.timeago.lt.js":34415,"./jquery.timeago.mn":34e3,"./jquery.timeago.mn.js":34e3,"./jquery.timeago.nl":14933,"./jquery.timeago.nl.js":14933,"./jquery.timeago.pl":30243,"./jquery.timeago.pl.js":30243,"./jquery.timeago.ps":48082,"./jquery.timeago.ps.js":48082,"./jquery.timeago.pt":94939,"./jquery.timeago.pt-br":53424,"./jquery.timeago.pt-br.js":53424,"./jquery.timeago.pt.js":94939,"./jquery.timeago.ro":54904,"./jquery.timeago.ro.js":54904,"./jquery.timeago.rs":76140,"./jquery.timeago.rs.js":76140,"./jquery.timeago.ru":3850,"./jquery.timeago.ru.js":3850,"./jquery.timeago.sk":66561,"./jquery.timeago.sk.js":66561,"./jquery.timeago.tr":25669,"./jquery.timeago.tr.js":25669,"./jquery.timeago.uk":81195,"./jquery.timeago.uk.js":81195,"./jquery.timeago.zh":23189,"./jquery.timeago.zh.js":23189};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=s,e.exports=o,o.id=53458},29308:(e,t,n)=>{"use strict";e.exports=n.p+"fonts/Inter-Password.da508493.ttf"},52972:(e,t,n)=>{"use strict";e.exports=n.p+"fonts/Inter-Password.9623a62f.woff"},31910:(e,t,n)=>{"use strict";e.exports=n.p+"fonts/Inter-Password.ab355c9a.woff2"},35769:()=>{},5353:()=>{}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,n,i)=>{if(!t){var o=1/0;for(l=0;l<deferred.length;l++){for(var[t,n,i]=deferred[l],s=!0,a=0;a<t.length;a++)(!1&i||o>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[a])))?t.splice(a--,1):(s=!1,i<o&&(o=i));if(s){deferred.splice(l--,1);var r=n();void 0!==r&&(e=r)}}return e}i=i||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>i;l--)deferred[l]=deferred[l-1];deferred[l]=[t,n,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&t&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(n,i),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>"js/"+e+"."+__webpack_require__.h()+".js",__webpack_require__.miniCssF=e=>"css/"+e+"."+{773:"d7c0a5bc",1052:"601c84c7",1188:"601c84c7",1689:"22792dba",2322:"a8da3407",2607:"a362da81",2757:"928afa0c",2930:"601c84c7",3154:"6175b16c",3183:"e93d0556",3698:"34c7e217",4220:"601c84c7",4224:"7f7cca09",4625:"601c84c7",4850:"a2f17b20",4882:"a2f17b20",4966:"601c84c7",6130:"601c84c7",7773:"6175b16c",8530:"cbdc8fe8",8683:"601c84c7"}[e]+".css",__webpack_require__.h=()=>"710b8f0d0e29ef67",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="splynx-admin:",__webpack_require__.l=(e,t,n,i)=>{if(inProgress[e])inProgress[e].push(t);else{var o,s;if(void 0!==n)for(var a=document.getElementsByTagName("script"),r=0;r<a.length;r++){var l=a[r];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==dataWebpackPrefix+n){o=l;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",dataWebpackPrefix+n),o.src=e),inProgress[e]=[t];var c=(t,n)=>{o.onerror=o.onload=null,clearTimeout(d);var i=inProgress[e];if(delete inProgress[e],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=c.bind(null,o.onerror),o.onload=c.bind(null,o.onload),s&&document.head.appendChild(o)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/dist/dist-admin/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,n)=>{var i=__webpack_require__.miniCssF(e),o=__webpack_require__.p+i;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var o=(a=n[i]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var s=document.getElementsByTagName("style");for(i=0;i<s.length;i++){var a;if((o=(a=s[i]).getAttribute("data-href"))===e||o===t)return a}})(i,o))return t();((e,t,n,i,o)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",__webpack_require__.nc&&(s.nonce=__webpack_require__.nc),s.onerror=s.onload=n=>{if(s.onerror=s.onload=null,"load"===n.type)i();else{var a=n&&n.type,r=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+r+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=r,s.parentNode&&s.parentNode.removeChild(s),o(l)}},s.href=t,n?n.parentNode.insertBefore(s,n.nextSibling):document.head.appendChild(s)})(e,o,null,t,n)})),t={3524:0};__webpack_require__.f.miniCss=(n,i)=>{t[n]?i.push(t[n]):0!==t[n]&&{773:1,1052:1,1188:1,1689:1,2322:1,2607:1,2757:1,2930:1,3154:1,3183:1,3698:1,4220:1,4224:1,4625:1,4850:1,4882:1,4966:1,6130:1,7773:1,8530:1,8683:1}[n]&&i.push(t[n]=e(n).then((()=>{t[n]=0}),(e=>{throw delete t[n],e})))}}})(),(()=>{var e={3524:0};__webpack_require__.f.j=(t,n)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else if(4966!=t){var o=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=o);var s=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(s,(n=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[s,a,r]=n,l=0;if(s.some((t=>0!==e[t]))){for(i in a)__webpack_require__.o(a,i)&&(__webpack_require__.m[i]=a[i]);if(r)var c=r(__webpack_require__)}for(t&&t(n);l<s.length;l++)o=s[l],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(c)},n=globalThis.webpackChunksplynx_admin=globalThis.webpackChunksplynx_admin||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__=__webpack_require__.O(void 0,[8794],(()=>__webpack_require__(29512)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.710b8f0d0e29ef67.js.map